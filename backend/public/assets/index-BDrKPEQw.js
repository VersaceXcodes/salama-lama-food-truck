var h_=Object.defineProperty;var _p=t=>{throw TypeError(t)};var p_=(t,s,r)=>s in t?h_(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var kp=(t,s,r)=>p_(t,typeof s!="symbol"?s+"":s,r),Mu=(t,s,r)=>s.has(t)||_p("Cannot "+r);var Y=(t,s,r)=>(Mu(t,s,"read from private field"),r?r.call(t):s.get(t)),we=(t,s,r)=>s.has(t)?_p("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),pe=(t,s,r,n)=>(Mu(t,s,"write to private field"),n?n.call(t,r):s.set(t,r),r),Le=(t,s,r)=>(Mu(t,s,"access private method"),r);var Vl=(t,s,r,n)=>({set _(a){pe(t,s,a,r)},get _(){return Y(t,s,n)}});function f_(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function fb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gb={exports:{}},Bd={},yb={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),g_=Symbol.for("react.portal"),y_=Symbol.for("react.fragment"),b_=Symbol.for("react.strict_mode"),v_=Symbol.for("react.profiler"),j_=Symbol.for("react.provider"),w_=Symbol.for("react.context"),N_=Symbol.for("react.forward_ref"),__=Symbol.for("react.suspense"),k_=Symbol.for("react.memo"),C_=Symbol.for("react.lazy"),Cp=Symbol.iterator;function S_(t){return t===null||typeof t!="object"?null:(t=Cp&&t[Cp]||t["@@iterator"],typeof t=="function"?t:null)}var bb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vb=Object.assign,jb={};function $i(t,s,r){this.props=t,this.context=s,this.refs=jb,this.updater=r||bb}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wb(){}wb.prototype=$i.prototype;function Fh(t,s,r){this.props=t,this.context=s,this.refs=jb,this.updater=r||bb}var Th=Fh.prototype=new wb;Th.constructor=Fh;vb(Th,$i.prototype);Th.isPureReactComponent=!0;var Sp=Array.isArray,Nb=Object.prototype.hasOwnProperty,Mh={current:null},_b={key:!0,ref:!0,__self:!0,__source:!0};function kb(t,s,r){var n,a={},i=null,o=null;if(s!=null)for(n in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(i=""+s.key),s)Nb.call(s,n)&&!_b.hasOwnProperty(n)&&(a[n]=s[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:El,type:t,key:i,ref:o,props:a,_owner:Mh.current}}function E_(t,s){return{$$typeof:El,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Rh(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function P_(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Ep=/\/+/g;function Ru(t,s){return typeof t=="object"&&t!==null&&t.key!=null?P_(""+t.key):s.toString(36)}function kc(t,s,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case g_:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+Ru(o,0):n,Sp(a)?(r="",t!=null&&(r=t.replace(Ep,"$&/")+"/"),kc(a,s,r,"",function(d){return d})):a!=null&&(Rh(a)&&(a=E_(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Ep,"$&/")+"/")+t)),s.push(a)),1;if(o=0,n=n===""?".":n+":",Sp(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Ru(i,l);o+=kc(i,s,r,c,a)}else if(c=S_(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Ru(i,l++),o+=kc(i,s,r,c,a);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Hl(t,s,r){if(t==null)return t;var n=[],a=0;return kc(t,n,"","",function(i){return s.call(r,i,a++)}),n}function A_(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Cc={transition:null},F_={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Mh};function Cb(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Hl,forEach:function(t,s,r){Hl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Hl(t,function(){s++}),s},toArray:function(t){return Hl(t,function(s){return s})||[]},only:function(t){if(!Rh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=$i;$e.Fragment=y_;$e.Profiler=v_;$e.PureComponent=Fh;$e.StrictMode=b_;$e.Suspense=__;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F_;$e.act=Cb;$e.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=vb({},t.props),a=t.key,i=t.ref,o=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,o=Mh.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in s)Nb.call(s,c)&&!_b.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&l!==void 0?l[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:El,type:t.type,key:a,ref:i,props:n,_owner:o}};$e.createContext=function(t){return t={$$typeof:w_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j_,_context:t},t.Consumer=t};$e.createElement=kb;$e.createFactory=function(t){var s=kb.bind(null,t);return s.type=t,s};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:N_,render:t}};$e.isValidElement=Rh;$e.lazy=function(t){return{$$typeof:C_,_payload:{_status:-1,_result:t},_init:A_}};$e.memo=function(t,s){return{$$typeof:k_,type:t,compare:s===void 0?null:s}};$e.startTransition=function(t){var s=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=s}};$e.unstable_act=Cb;$e.useCallback=function(t,s){return Ht.current.useCallback(t,s)};$e.useContext=function(t){return Ht.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};$e.useEffect=function(t,s){return Ht.current.useEffect(t,s)};$e.useId=function(){return Ht.current.useId()};$e.useImperativeHandle=function(t,s,r){return Ht.current.useImperativeHandle(t,s,r)};$e.useInsertionEffect=function(t,s){return Ht.current.useInsertionEffect(t,s)};$e.useLayoutEffect=function(t,s){return Ht.current.useLayoutEffect(t,s)};$e.useMemo=function(t,s){return Ht.current.useMemo(t,s)};$e.useReducer=function(t,s,r){return Ht.current.useReducer(t,s,r)};$e.useRef=function(t){return Ht.current.useRef(t)};$e.useState=function(t){return Ht.current.useState(t)};$e.useSyncExternalStore=function(t,s,r){return Ht.current.useSyncExternalStore(t,s,r)};$e.useTransition=function(){return Ht.current.useTransition()};$e.version="18.3.1";yb.exports=$e;var u=yb.exports;const St=fb(u),qd=f_({__proto__:null,default:St},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_=u,M_=Symbol.for("react.element"),R_=Symbol.for("react.fragment"),L_=Object.prototype.hasOwnProperty,D_=T_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O_={key:!0,ref:!0,__self:!0,__source:!0};function Sb(t,s,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)L_.call(s,n)&&!O_.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:M_,type:t,key:i,ref:o,props:a,_owner:D_.current}}Bd.Fragment=R_;Bd.jsx=Sb;Bd.jsxs=Sb;gb.exports=Bd;var e=gb.exports,Eb={exports:{}},bs={},Pb={exports:{}},Ab={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(C,R){var _=C.length;C.push(R);e:for(;0<_;){var q=_-1>>>1,O=C[q];if(0<a(O,R))C[q]=R,C[_]=O,_=q;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var R=C[0],_=C.pop();if(_!==R){C[0]=_;e:for(var q=0,O=C.length,V=O>>>1;q<V;){var D=2*(q+1)-1,G=C[D],se=D+1,le=C[se];if(0>a(G,_))se<O&&0>a(le,G)?(C[q]=le,C[se]=_,q=se):(C[q]=G,C[D]=_,q=D);else if(se<O&&0>a(le,_))C[q]=le,C[se]=_,q=se;else break e}}return R}function a(C,R){var _=C.sortIndex-R.sortIndex;return _!==0?_:C.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,x=null,f=3,b=!1,h=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(C){for(var R=r(d);R!==null;){if(R.callback===null)n(d);else if(R.startTime<=C)n(d),R.sortIndex=R.expirationTime,s(c,R);else break;R=r(d)}}function w(C){if(p=!1,y(C),!h)if(r(c)!==null)h=!0,z(M);else{var R=r(d);R!==null&&B(w,R.startTime-C)}}function M(C,R){h=!1,p&&(p=!1,g(E),E=-1),b=!0;var _=f;try{for(y(R),x=r(c);x!==null&&(!(x.expirationTime>R)||C&&!S());){var q=x.callback;if(typeof q=="function"){x.callback=null,f=x.priorityLevel;var O=q(x.expirationTime<=R);R=t.unstable_now(),typeof O=="function"?x.callback=O:x===r(c)&&n(c),y(R)}else n(c);x=r(c)}if(x!==null)var V=!0;else{var D=r(d);D!==null&&B(w,D.startTime-R),V=!1}return V}finally{x=null,f=_,b=!1}}var T=!1,N=null,E=-1,L=5,k=-1;function S(){return!(t.unstable_now()-k<L)}function F(){if(N!==null){var C=t.unstable_now();k=C;var R=!0;try{R=N(!0,C)}finally{R?P():(T=!1,N=null)}}else T=!1}var P;if(typeof j=="function")P=function(){j(F)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=F,P=function(){H.postMessage(null)}}else P=function(){v(F,0)};function z(C){N=C,T||(T=!0,P())}function B(C,R){E=v(function(){C(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){h||b||(h=!0,z(M))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var _=f;f=R;try{return C()}finally{f=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,R){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var _=f;f=C;try{return R()}finally{f=_}},t.unstable_scheduleCallback=function(C,R,_){var q=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?q+_:q):_=q,C){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=_+O,C={id:m++,callback:R,priorityLevel:C,startTime:_,expirationTime:O,sortIndex:-1},_>q?(C.sortIndex=_,s(d,C),r(c)===null&&C===r(d)&&(p?(g(E),E=-1):p=!0,B(w,_-q))):(C.sortIndex=O,s(c,C),h||b||(h=!0,z(M))),C},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(C){var R=f;return function(){var _=f;f=R;try{return C.apply(this,arguments)}finally{f=_}}}})(Ab);Pb.exports=Ab;var $_=Pb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=u,gs=$_;function de(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fb=new Set,Ko={};function Aa(t,s){Ni(t,s),Ni(t+"Capture",s)}function Ni(t,s){for(Ko[t]=s,t=0;t<s.length;t++)Fb.add(s[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,z_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pp={},Ap={};function B_(t){return Wm.call(Ap,t)?!0:Wm.call(Pp,t)?!1:z_.test(t)?Ap[t]=!0:(Pp[t]=!0,!1)}function q_(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U_(t,s,r,n){if(s===null||typeof s>"u"||q_(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Qt(t,s,r,n,a,i,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Tt[s]=new Qt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Lh,Dh);Tt[s]=new Qt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Lh,Dh);Tt[s]=new Qt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Lh,Dh);Tt[s]=new Qt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oh(t,s,r,n){var a=Tt.hasOwnProperty(s)?Tt[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U_(s,r,a,n)&&(r=null),n||a===null?B_(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var Ur=I_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Ua=Symbol.for("react.portal"),Wa=Symbol.for("react.fragment"),$h=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),Mb=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Qm=Symbol.for("react.suspense_list"),zh=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Rb=Symbol.for("react.offscreen"),Fp=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=Fp&&t[Fp]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Lu;function wo(t){if(Lu===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Lu=s&&s[1]||""}return`
`+Lu+t}var Du=!1;function Ou(t,s){if(!t||Du)return"";Du=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){n=d}t.call(s.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Du=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?wo(t):""}function W_(t){switch(t.tag){case 5:return wo(t.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return t=Ou(t.type,!1),t;case 11:return t=Ou(t.type.render,!1),t;case 1:return t=Ou(t.type,!0),t;default:return""}}function Km(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wa:return"Fragment";case Ua:return"Portal";case Vm:return"Profiler";case $h:return"StrictMode";case Hm:return"Suspense";case Qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mb:return(t.displayName||"Context")+".Consumer";case Tb:return(t._context.displayName||"Context")+".Provider";case Ih:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zh:return s=t.displayName||null,s!==null?s:Km(t.type)||"Memo";case en:s=t._payload,t=t._init;try{return Km(t(s))}catch{}}return null}function V_(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Km(s);case 8:return s===$h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lb(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function H_(t){var s=Lb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Kl(t){t._valueTracker||(t._valueTracker=H_(t))}function Db(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=Lb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function Jc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ym(t,s){var r=s.checked;return lt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Tp(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=An(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ob(t,s){s=s.checked,s!=null&&Oh(t,"checked",s,!1)}function Gm(t,s){Ob(t,s);var r=An(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Xm(t,s.type,r):s.hasOwnProperty("defaultValue")&&Xm(t,s.type,An(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Mp(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Xm(t,s,r){(s!=="number"||Jc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var No=Array.isArray;function ti(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+An(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function Jm(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(de(91));return lt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rp(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(de(92));if(No(r)){if(1<r.length)throw Error(de(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:An(r)}}function $b(t,s){var r=An(s.value),n=An(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Lp(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Ib(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zm(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Ib(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yl,zb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Yl=Yl||document.createElement("div"),Yl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Yo(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q_=["Webkit","ms","Moz","O"];Object.keys(Lo).forEach(function(t){Q_.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Lo[s]=Lo[t]})});function Bb(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Lo.hasOwnProperty(t)&&Lo[t]?(""+s).trim():s+"px"}function qb(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Bb(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var K_=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ex(t,s){if(s){if(K_[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(de(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(de(61))}if(s.style!=null&&typeof s.style!="object")throw Error(de(62))}}function tx(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sx=null;function Bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rx=null,si=null,ri=null;function Dp(t){if(t=Fl(t)){if(typeof rx!="function")throw Error(de(280));var s=t.stateNode;s&&(s=Qd(s),rx(t.stateNode,t.type,s))}}function Ub(t){si?ri?ri.push(t):ri=[t]:si=t}function Wb(){if(si){var t=si,s=ri;if(ri=si=null,Dp(t),s)for(t=0;t<s.length;t++)Dp(s[t])}}function Vb(t,s){return t(s)}function Hb(){}var $u=!1;function Qb(t,s,r){if($u)return t(s,r);$u=!0;try{return Vb(t,s,r)}finally{$u=!1,(si!==null||ri!==null)&&(Hb(),Wb())}}function Go(t,s){var r=t.stateNode;if(r===null)return null;var n=Qd(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(de(231,s,typeof r));return r}var nx=!1;if(Dr)try{var so={};Object.defineProperty(so,"passive",{get:function(){nx=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{nx=!1}function Y_(t,s,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(m){this.onError(m)}}var Do=!1,Zc=null,ed=!1,ax=null,G_={onError:function(t){Do=!0,Zc=t}};function X_(t,s,r,n,a,i,o,l,c){Do=!1,Zc=null,Y_.apply(G_,arguments)}function J_(t,s,r,n,a,i,o,l,c){if(X_.apply(this,arguments),Do){if(Do){var d=Zc;Do=!1,Zc=null}else throw Error(de(198));ed||(ed=!0,ax=d)}}function Fa(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Kb(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Op(t){if(Fa(t)!==t)throw Error(de(188))}function Z_(t){var s=t.alternate;if(!s){if(s=Fa(t),s===null)throw Error(de(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Op(a),t;if(i===n)return Op(a),s;i=i.sibling}throw Error(de(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?t:s}function Yb(t){return t=Z_(t),t!==null?Gb(t):null}function Gb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Gb(t);if(s!==null)return s;t=t.sibling}return null}var Xb=gs.unstable_scheduleCallback,$p=gs.unstable_cancelCallback,e4=gs.unstable_shouldYield,t4=gs.unstable_requestPaint,mt=gs.unstable_now,s4=gs.unstable_getCurrentPriorityLevel,qh=gs.unstable_ImmediatePriority,Jb=gs.unstable_UserBlockingPriority,td=gs.unstable_NormalPriority,r4=gs.unstable_LowPriority,Zb=gs.unstable_IdlePriority,Ud=null,ur=null;function n4(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(Ud,t,void 0,(t.current.flags&128)===128)}catch{}}var Hs=Math.clz32?Math.clz32:o4,a4=Math.log,i4=Math.LN2;function o4(t){return t>>>=0,t===0?32:31-(a4(t)/i4|0)|0}var Gl=64,Xl=4194304;function _o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sd(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=_o(l):(i&=o,i!==0&&(n=_o(i)))}else o=r&~a,o!==0?n=_o(o):i!==0&&(n=_o(i));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-Hs(s),a=1<<r,n|=t[r],s&=~a;return n}function l4(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c4(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Hs(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=l4(l,s)):c<=s&&(t.expiredLanes|=l),i&=~l}}function ix(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ev(){var t=Gl;return Gl<<=1,!(Gl&4194240)&&(Gl=64),t}function Iu(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Pl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Hs(s),t[s]=r}function d4(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Hs(r),i=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function Uh(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-Hs(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var Xe=0;function tv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sv,Wh,rv,nv,av,ox=!1,Jl=[],bn=null,vn=null,jn=null,Xo=new Map,Jo=new Map,sn=[],u4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ip(t,s){switch(t){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Xo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(s.pointerId)}}function ro(t,s,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},s!==null&&(s=Fl(s),s!==null&&Wh(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function m4(t,s,r,n,a){switch(s){case"focusin":return bn=ro(bn,t,s,r,n,a),!0;case"dragenter":return vn=ro(vn,t,s,r,n,a),!0;case"mouseover":return jn=ro(jn,t,s,r,n,a),!0;case"pointerover":var i=a.pointerId;return Xo.set(i,ro(Xo.get(i)||null,t,s,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Jo.set(i,ro(Jo.get(i)||null,t,s,r,n,a)),!0}return!1}function iv(t){var s=Zn(t.target);if(s!==null){var r=Fa(s);if(r!==null){if(s=r.tag,s===13){if(s=Kb(r),s!==null){t.blockedOn=s,av(t.priority,function(){rv(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=lx(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);sx=n,r.target.dispatchEvent(n),sx=null}else return s=Fl(r),s!==null&&Wh(s),t.blockedOn=r,!1;s.shift()}return!0}function zp(t,s,r){Sc(t)&&r.delete(s)}function x4(){ox=!1,bn!==null&&Sc(bn)&&(bn=null),vn!==null&&Sc(vn)&&(vn=null),jn!==null&&Sc(jn)&&(jn=null),Xo.forEach(zp),Jo.forEach(zp)}function no(t,s){t.blockedOn===s&&(t.blockedOn=null,ox||(ox=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,x4)))}function Zo(t){function s(a){return no(a,t)}if(0<Jl.length){no(Jl[0],t);for(var r=1;r<Jl.length;r++){var n=Jl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(bn!==null&&no(bn,t),vn!==null&&no(vn,t),jn!==null&&no(jn,t),Xo.forEach(s),Jo.forEach(s),r=0;r<sn.length;r++)n=sn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<sn.length&&(r=sn[0],r.blockedOn===null);)iv(r),r.blockedOn===null&&sn.shift()}var ni=Ur.ReactCurrentBatchConfig,rd=!0;function h4(t,s,r,n){var a=Xe,i=ni.transition;ni.transition=null;try{Xe=1,Vh(t,s,r,n)}finally{Xe=a,ni.transition=i}}function p4(t,s,r,n){var a=Xe,i=ni.transition;ni.transition=null;try{Xe=4,Vh(t,s,r,n)}finally{Xe=a,ni.transition=i}}function Vh(t,s,r,n){if(rd){var a=lx(t,s,r,n);if(a===null)Yu(t,s,n,nd,r),Ip(t,n);else if(m4(a,t,s,r,n))n.stopPropagation();else if(Ip(t,n),s&4&&-1<u4.indexOf(t)){for(;a!==null;){var i=Fl(a);if(i!==null&&sv(i),i=lx(t,s,r,n),i===null&&Yu(t,s,n,nd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Yu(t,s,n,null,r)}}var nd=null;function lx(t,s,r,n){if(nd=null,t=Bh(n),t=Zn(t),t!==null)if(s=Fa(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Kb(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return nd=t,null}function ov(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s4()){case qh:return 1;case Jb:return 4;case td:case r4:return 16;case Zb:return 536870912;default:return 16}default:return 16}}var hn=null,Hh=null,Ec=null;function lv(){if(Ec)return Ec;var t,s=Hh,r=s.length,n,a="value"in hn?hn.value:hn.textContent,i=a.length;for(t=0;t<r&&s[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&s[r-n]===a[i-n];n++);return Ec=a.slice(t,1<n?1-n:void 0)}function Pc(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function Bp(){return!1}function vs(t){function s(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:Bp,this.isPropagationStopped=Bp,this}return lt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),s}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qh=vs(Ii),Al=lt({},Ii,{view:0,detail:0}),f4=vs(Al),zu,Bu,ao,Wd=lt({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ao&&(ao&&t.type==="mousemove"?(zu=t.screenX-ao.screenX,Bu=t.screenY-ao.screenY):Bu=zu=0,ao=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:Bu}}),qp=vs(Wd),g4=lt({},Wd,{dataTransfer:0}),y4=vs(g4),b4=lt({},Al,{relatedTarget:0}),qu=vs(b4),v4=lt({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),j4=vs(v4),w4=lt({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),N4=vs(w4),_4=lt({},Ii,{data:0}),Up=vs(_4),k4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=S4[t])?!!s[t]:!1}function Kh(){return E4}var P4=lt({},Al,{key:function(t){if(t.key){var s=k4[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A4=vs(P4),F4=lt({},Wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wp=vs(F4),T4=lt({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),M4=vs(T4),R4=lt({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),L4=vs(R4),D4=lt({},Wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O4=vs(D4),$4=[9,13,27,32],Yh=Dr&&"CompositionEvent"in window,Oo=null;Dr&&"documentMode"in document&&(Oo=document.documentMode);var I4=Dr&&"TextEvent"in window&&!Oo,cv=Dr&&(!Yh||Oo&&8<Oo&&11>=Oo),Vp=" ",Hp=!1;function dv(t,s){switch(t){case"keyup":return $4.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function z4(t,s){switch(t){case"compositionend":return uv(s);case"keypress":return s.which!==32?null:(Hp=!0,Vp);case"textInput":return t=s.data,t===Vp&&Hp?null:t;default:return null}}function B4(t,s){if(Va)return t==="compositionend"||!Yh&&dv(t,s)?(t=lv(),Ec=Hh=hn=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cv&&s.locale!=="ko"?null:s.data;default:return null}}var q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!q4[t.type]:s==="textarea"}function mv(t,s,r,n){Ub(n),s=ad(s,"onChange"),0<s.length&&(r=new Qh("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var $o=null,el=null;function U4(t){Nv(t,0)}function Vd(t){var s=Ka(t);if(Db(s))return t}function W4(t,s){if(t==="change")return s}var xv=!1;if(Dr){var Uu;if(Dr){var Wu="oninput"in document;if(!Wu){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Wu=typeof Kp.oninput=="function"}Uu=Wu}else Uu=!1;xv=Uu&&(!document.documentMode||9<document.documentMode)}function Yp(){$o&&($o.detachEvent("onpropertychange",hv),el=$o=null)}function hv(t){if(t.propertyName==="value"&&Vd(el)){var s=[];mv(s,el,t,Bh(t)),Qb(U4,s)}}function V4(t,s,r){t==="focusin"?(Yp(),$o=s,el=r,$o.attachEvent("onpropertychange",hv)):t==="focusout"&&Yp()}function H4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(el)}function Q4(t,s){if(t==="click")return Vd(s)}function K4(t,s){if(t==="input"||t==="change")return Vd(s)}function Y4(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ks=typeof Object.is=="function"?Object.is:Y4;function tl(t,s){if(Ks(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Wm.call(s,a)||!Ks(t[a],s[a]))return!1}return!0}function Gp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xp(t,s){var r=Gp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gp(r)}}function pv(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?pv(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function fv(){for(var t=window,s=Jc();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Jc(t.document)}return s}function Gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function G4(t){var s=fv(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&pv(r.ownerDocument.documentElement,r)){if(n!==null&&Gh(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Xp(r,i);var o=Xp(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(s),t.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X4=Dr&&"documentMode"in document&&11>=document.documentMode,Ha=null,cx=null,Io=null,dx=!1;function Jp(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dx||Ha==null||Ha!==Jc(n)||(n=Ha,"selectionStart"in n&&Gh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Io&&tl(Io,n)||(Io=n,n=ad(cx,"onSelect"),0<n.length&&(s=new Qh("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=Ha)))}function ec(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Qa={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},Vu={},gv={};Dr&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Hd(t){if(Vu[t])return Vu[t];if(!Qa[t])return t;var s=Qa[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in gv)return Vu[t]=s[r];return t}var yv=Hd("animationend"),bv=Hd("animationiteration"),vv=Hd("animationstart"),jv=Hd("transitionend"),wv=new Map,Zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(t,s){wv.set(t,s),Aa(s,[t])}for(var Hu=0;Hu<Zp.length;Hu++){var Qu=Zp[Hu],J4=Qu.toLowerCase(),Z4=Qu[0].toUpperCase()+Qu.slice(1);$n(J4,"on"+Z4)}$n(yv,"onAnimationEnd");$n(bv,"onAnimationIteration");$n(vv,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(jv,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e5=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function ef(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,J_(n,s,void 0,t),t.currentTarget=null}function Nv(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;ef(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;ef(a,l,d),i=c}}}if(ed)throw t=ax,ed=!1,ax=null,t}function rt(t,s){var r=s[px];r===void 0&&(r=s[px]=new Set);var n=t+"__bubble";r.has(n)||(_v(s,t,2,!1),r.add(n))}function Ku(t,s,r){var n=0;s&&(n|=4),_v(r,t,n,s)}var tc="_reactListening"+Math.random().toString(36).slice(2);function sl(t){if(!t[tc]){t[tc]=!0,Fb.forEach(function(r){r!=="selectionchange"&&(e5.has(r)||Ku(r,!1,t),Ku(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[tc]||(s[tc]=!0,Ku("selectionchange",!1,s))}}function _v(t,s,r,n){switch(ov(s)){case 1:var a=h4;break;case 4:a=p4;break;default:a=Vh}r=a.bind(null,s,r,t),a=void 0,!nx||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function Yu(t,s,r,n,a){var i=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Zn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Qb(function(){var d=i,m=Bh(r),x=[];e:{var f=wv.get(t);if(f!==void 0){var b=Qh,h=t;switch(t){case"keypress":if(Pc(r)===0)break e;case"keydown":case"keyup":b=A4;break;case"focusin":h="focus",b=qu;break;case"focusout":h="blur",b=qu;break;case"beforeblur":case"afterblur":b=qu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=y4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=M4;break;case yv:case bv:case vv:b=j4;break;case jv:b=L4;break;case"scroll":b=f4;break;case"wheel":b=O4;break;case"copy":case"cut":case"paste":b=N4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Wp}var p=(s&4)!==0,v=!p&&t==="scroll",g=p?f!==null?f+"Capture":null:f;p=[];for(var j=d,y;j!==null;){y=j;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=Go(j,g),w!=null&&p.push(rl(j,w,y)))),v)break;j=j.return}0<p.length&&(f=new b(f,h,null,r,m),x.push({event:f,listeners:p}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",f&&r!==sx&&(h=r.relatedTarget||r.fromElement)&&(Zn(h)||h[Or]))break e;if((b||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,b?(h=r.relatedTarget||r.toElement,b=d,h=h?Zn(h):null,h!==null&&(v=Fa(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(b=null,h=d),b!==h)){if(p=qp,w="onMouseLeave",g="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(p=Wp,w="onPointerLeave",g="onPointerEnter",j="pointer"),v=b==null?f:Ka(b),y=h==null?f:Ka(h),f=new p(w,j+"leave",b,r,m),f.target=v,f.relatedTarget=y,w=null,Zn(m)===d&&(p=new p(g,j+"enter",h,r,m),p.target=y,p.relatedTarget=v,w=p),v=w,b&&h)t:{for(p=b,g=h,j=0,y=p;y;y=Da(y))j++;for(y=0,w=g;w;w=Da(w))y++;for(;0<j-y;)p=Da(p),j--;for(;0<y-j;)g=Da(g),y--;for(;j--;){if(p===g||g!==null&&p===g.alternate)break t;p=Da(p),g=Da(g)}p=null}else p=null;b!==null&&tf(x,f,b,p,!1),h!==null&&v!==null&&tf(x,v,h,p,!0)}}e:{if(f=d?Ka(d):window,b=f.nodeName&&f.nodeName.toLowerCase(),b==="select"||b==="input"&&f.type==="file")var M=W4;else if(Qp(f))if(xv)M=K4;else{M=H4;var T=V4}else(b=f.nodeName)&&b.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=Q4);if(M&&(M=M(t,d))){mv(x,M,r,m);break e}T&&T(t,f,d),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Xm(f,"number",f.value)}switch(T=d?Ka(d):window,t){case"focusin":(Qp(T)||T.contentEditable==="true")&&(Ha=T,cx=d,Io=null);break;case"focusout":Io=cx=Ha=null;break;case"mousedown":dx=!0;break;case"contextmenu":case"mouseup":case"dragend":dx=!1,Jp(x,r,m);break;case"selectionchange":if(X4)break;case"keydown":case"keyup":Jp(x,r,m)}var N;if(Yh)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Va?dv(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(cv&&r.locale!=="ko"&&(Va||E!=="onCompositionStart"?E==="onCompositionEnd"&&Va&&(N=lv()):(hn=m,Hh="value"in hn?hn.value:hn.textContent,Va=!0)),T=ad(d,E),0<T.length&&(E=new Up(E,t,null,r,m),x.push({event:E,listeners:T}),N?E.data=N:(N=uv(r),N!==null&&(E.data=N)))),(N=I4?z4(t,r):B4(t,r))&&(d=ad(d,"onBeforeInput"),0<d.length&&(m=new Up("onBeforeInput","beforeinput",null,r,m),x.push({event:m,listeners:d}),m.data=N))}Nv(x,s)})}function rl(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ad(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Go(t,r),i!=null&&n.unshift(rl(t,i,a)),i=Go(t,s),i!=null&&n.push(rl(t,i,a))),t=t.return}return n}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tf(t,s,r,n,a){for(var i=s._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Go(r,i),c!=null&&o.unshift(rl(r,c,l))):a||(c=Go(r,i),c!=null&&o.push(rl(r,c,l)))),r=r.return}o.length!==0&&t.push({event:s,listeners:o})}var t5=/\r\n?/g,s5=/\u0000|\uFFFD/g;function sf(t){return(typeof t=="string"?t:""+t).replace(t5,`
`).replace(s5,"")}function sc(t,s,r){if(s=sf(s),sf(t)!==s&&r)throw Error(de(425))}function id(){}var ux=null,mx=null;function xx(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hx=typeof setTimeout=="function"?setTimeout:void 0,r5=typeof clearTimeout=="function"?clearTimeout:void 0,rf=typeof Promise=="function"?Promise:void 0,n5=typeof queueMicrotask=="function"?queueMicrotask:typeof rf<"u"?function(t){return rf.resolve(null).then(t).catch(a5)}:hx;function a5(t){setTimeout(function(){throw t})}function Gu(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Zo(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Zo(s)}function wn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var zi=Math.random().toString(36).slice(2),or="__reactFiber$"+zi,nl="__reactProps$"+zi,Or="__reactContainer$"+zi,px="__reactEvents$"+zi,i5="__reactListeners$"+zi,o5="__reactHandles$"+zi;function Zn(t){var s=t[or];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Or]||r[or]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=nf(t);t!==null;){if(r=t[or])return r;t=nf(t)}return s}t=r,r=t.parentNode}return null}function Fl(t){return t=t[or]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ka(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Qd(t){return t[nl]||null}var fx=[],Ya=-1;function In(t){return{current:t}}function nt(t){0>Ya||(t.current=fx[Ya],fx[Ya]=null,Ya--)}function et(t,s){Ya++,fx[Ya]=t.current,t.current=s}var Fn={},zt=In(Fn),ss=In(!1),ga=Fn;function _i(t,s){var r=t.type.contextTypes;if(!r)return Fn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=s[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function rs(t){return t=t.childContextTypes,t!=null}function od(){nt(ss),nt(zt)}function af(t,s,r){if(zt.current!==Fn)throw Error(de(168));et(zt,s),et(ss,r)}function kv(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(de(108,V_(t)||"Unknown",a));return lt({},r,n)}function ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,ga=zt.current,et(zt,t),et(ss,ss.current),!0}function of(t,s,r){var n=t.stateNode;if(!n)throw Error(de(169));r?(t=kv(t,s,ga),n.__reactInternalMemoizedMergedChildContext=t,nt(ss),nt(zt),et(zt,t)):nt(ss),et(ss,r)}var Sr=null,Kd=!1,Xu=!1;function Cv(t){Sr===null?Sr=[t]:Sr.push(t)}function l5(t){Kd=!0,Cv(t)}function zn(){if(!Xu&&Sr!==null){Xu=!0;var t=0,s=Xe;try{var r=Sr;for(Xe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Sr=null,Kd=!1}catch(a){throw Sr!==null&&(Sr=Sr.slice(t+1)),Xb(qh,zn),a}finally{Xe=s,Xu=!1}}return null}var Ga=[],Xa=0,cd=null,dd=0,_s=[],ks=0,ya=null,Tr=1,Mr="";function Kn(t,s){Ga[Xa++]=dd,Ga[Xa++]=cd,cd=t,dd=s}function Sv(t,s,r){_s[ks++]=Tr,_s[ks++]=Mr,_s[ks++]=ya,ya=t;var n=Tr;t=Mr;var a=32-Hs(n)-1;n&=~(1<<a),r+=1;var i=32-Hs(s)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Tr=1<<32-Hs(s)+a|r<<a|n,Mr=i+t}else Tr=1<<i|r<<a|n,Mr=t}function Xh(t){t.return!==null&&(Kn(t,1),Sv(t,1,0))}function Jh(t){for(;t===cd;)cd=Ga[--Xa],Ga[Xa]=null,dd=Ga[--Xa],Ga[Xa]=null;for(;t===ya;)ya=_s[--ks],_s[ks]=null,Mr=_s[--ks],_s[ks]=null,Tr=_s[--ks],_s[ks]=null}var hs=null,xs=null,at=!1,Us=null;function Ev(t,s){var r=Ss(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function lf(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,hs=t,xs=wn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,hs=t,xs=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=ya!==null?{id:Tr,overflow:Mr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Ss(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,hs=t,xs=null,!0):!1;default:return!1}}function gx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yx(t){if(at){var s=xs;if(s){var r=s;if(!lf(t,s)){if(gx(t))throw Error(de(418));s=wn(r.nextSibling);var n=hs;s&&lf(t,s)?Ev(n,r):(t.flags=t.flags&-4097|2,at=!1,hs=t)}}else{if(gx(t))throw Error(de(418));t.flags=t.flags&-4097|2,at=!1,hs=t}}}function cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hs=t}function rc(t){if(t!==hs)return!1;if(!at)return cf(t),at=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!xx(t.type,t.memoizedProps)),s&&(s=xs)){if(gx(t))throw Pv(),Error(de(418));for(;s;)Ev(t,s),s=wn(s.nextSibling)}if(cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){xs=wn(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}xs=null}}else xs=hs?wn(t.stateNode.nextSibling):null;return!0}function Pv(){for(var t=xs;t;)t=wn(t.nextSibling)}function ki(){xs=hs=null,at=!1}function Zh(t){Us===null?Us=[t]:Us.push(t)}var c5=Ur.ReactCurrentBatchConfig;function io(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,t));var a=n,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},s._stringRef=i,s)}if(typeof t!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,t))}return t}function nc(t,s){throw t=Object.prototype.toString.call(s),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function df(t){var s=t._init;return s(t._payload)}function Av(t){function s(g,j){if(t){var y=g.deletions;y===null?(g.deletions=[j],g.flags|=16):y.push(j)}}function r(g,j){if(!t)return null;for(;j!==null;)s(g,j),j=j.sibling;return null}function n(g,j){for(g=new Map;j!==null;)j.key!==null?g.set(j.key,j):g.set(j.index,j),j=j.sibling;return g}function a(g,j){return g=Cn(g,j),g.index=0,g.sibling=null,g}function i(g,j,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<j?(g.flags|=2,j):y):(g.flags|=2,j)):(g.flags|=1048576,j)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,j,y,w){return j===null||j.tag!==6?(j=nm(y,g.mode,w),j.return=g,j):(j=a(j,y),j.return=g,j)}function c(g,j,y,w){var M=y.type;return M===Wa?m(g,j,y.props.children,w,y.key):j!==null&&(j.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===en&&df(M)===j.type)?(w=a(j,y.props),w.ref=io(g,j,y),w.return=g,w):(w=Dc(y.type,y.key,y.props,null,g.mode,w),w.ref=io(g,j,y),w.return=g,w)}function d(g,j,y,w){return j===null||j.tag!==4||j.stateNode.containerInfo!==y.containerInfo||j.stateNode.implementation!==y.implementation?(j=am(y,g.mode,w),j.return=g,j):(j=a(j,y.children||[]),j.return=g,j)}function m(g,j,y,w,M){return j===null||j.tag!==7?(j=ha(y,g.mode,w,M),j.return=g,j):(j=a(j,y),j.return=g,j)}function x(g,j,y){if(typeof j=="string"&&j!==""||typeof j=="number")return j=nm(""+j,g.mode,y),j.return=g,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return y=Dc(j.type,j.key,j.props,null,g.mode,y),y.ref=io(g,null,j),y.return=g,y;case Ua:return j=am(j,g.mode,y),j.return=g,j;case en:var w=j._init;return x(g,w(j._payload),y)}if(No(j)||to(j))return j=ha(j,g.mode,y,null),j.return=g,j;nc(g,j)}return null}function f(g,j,y,w){var M=j!==null?j.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return M!==null?null:l(g,j,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ql:return y.key===M?c(g,j,y,w):null;case Ua:return y.key===M?d(g,j,y,w):null;case en:return M=y._init,f(g,j,M(y._payload),w)}if(No(y)||to(y))return M!==null?null:m(g,j,y,w,null);nc(g,y)}return null}function b(g,j,y,w,M){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,l(j,g,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return g=g.get(w.key===null?y:w.key)||null,c(j,g,w,M);case Ua:return g=g.get(w.key===null?y:w.key)||null,d(j,g,w,M);case en:var T=w._init;return b(g,j,y,T(w._payload),M)}if(No(w)||to(w))return g=g.get(y)||null,m(j,g,w,M,null);nc(j,w)}return null}function h(g,j,y,w){for(var M=null,T=null,N=j,E=j=0,L=null;N!==null&&E<y.length;E++){N.index>E?(L=N,N=null):L=N.sibling;var k=f(g,N,y[E],w);if(k===null){N===null&&(N=L);break}t&&N&&k.alternate===null&&s(g,N),j=i(k,j,E),T===null?M=k:T.sibling=k,T=k,N=L}if(E===y.length)return r(g,N),at&&Kn(g,E),M;if(N===null){for(;E<y.length;E++)N=x(g,y[E],w),N!==null&&(j=i(N,j,E),T===null?M=N:T.sibling=N,T=N);return at&&Kn(g,E),M}for(N=n(g,N);E<y.length;E++)L=b(N,g,E,y[E],w),L!==null&&(t&&L.alternate!==null&&N.delete(L.key===null?E:L.key),j=i(L,j,E),T===null?M=L:T.sibling=L,T=L);return t&&N.forEach(function(S){return s(g,S)}),at&&Kn(g,E),M}function p(g,j,y,w){var M=to(y);if(typeof M!="function")throw Error(de(150));if(y=M.call(y),y==null)throw Error(de(151));for(var T=M=null,N=j,E=j=0,L=null,k=y.next();N!==null&&!k.done;E++,k=y.next()){N.index>E?(L=N,N=null):L=N.sibling;var S=f(g,N,k.value,w);if(S===null){N===null&&(N=L);break}t&&N&&S.alternate===null&&s(g,N),j=i(S,j,E),T===null?M=S:T.sibling=S,T=S,N=L}if(k.done)return r(g,N),at&&Kn(g,E),M;if(N===null){for(;!k.done;E++,k=y.next())k=x(g,k.value,w),k!==null&&(j=i(k,j,E),T===null?M=k:T.sibling=k,T=k);return at&&Kn(g,E),M}for(N=n(g,N);!k.done;E++,k=y.next())k=b(N,g,E,k.value,w),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),j=i(k,j,E),T===null?M=k:T.sibling=k,T=k);return t&&N.forEach(function(F){return s(g,F)}),at&&Kn(g,E),M}function v(g,j,y,w){if(typeof y=="object"&&y!==null&&y.type===Wa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ql:e:{for(var M=y.key,T=j;T!==null;){if(T.key===M){if(M=y.type,M===Wa){if(T.tag===7){r(g,T.sibling),j=a(T,y.props.children),j.return=g,g=j;break e}}else if(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===en&&df(M)===T.type){r(g,T.sibling),j=a(T,y.props),j.ref=io(g,T,y),j.return=g,g=j;break e}r(g,T);break}else s(g,T);T=T.sibling}y.type===Wa?(j=ha(y.props.children,g.mode,w,y.key),j.return=g,g=j):(w=Dc(y.type,y.key,y.props,null,g.mode,w),w.ref=io(g,j,y),w.return=g,g=w)}return o(g);case Ua:e:{for(T=y.key;j!==null;){if(j.key===T)if(j.tag===4&&j.stateNode.containerInfo===y.containerInfo&&j.stateNode.implementation===y.implementation){r(g,j.sibling),j=a(j,y.children||[]),j.return=g,g=j;break e}else{r(g,j);break}else s(g,j);j=j.sibling}j=am(y,g.mode,w),j.return=g,g=j}return o(g);case en:return T=y._init,v(g,j,T(y._payload),w)}if(No(y))return h(g,j,y,w);if(to(y))return p(g,j,y,w);nc(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,j!==null&&j.tag===6?(r(g,j.sibling),j=a(j,y),j.return=g,g=j):(r(g,j),j=nm(y,g.mode,w),j.return=g,g=j),o(g)):r(g,j)}return v}var Ci=Av(!0),Fv=Av(!1),ud=In(null),md=null,Ja=null,e0=null;function t0(){e0=Ja=md=null}function s0(t){var s=ud.current;nt(ud),t._currentValue=s}function bx(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function ai(t,s){md=t,e0=Ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Zt=!0),t.firstContext=null)}function Fs(t){var s=t._currentValue;if(e0!==t)if(t={context:t,memoizedValue:s,next:null},Ja===null){if(md===null)throw Error(de(308));Ja=t,md.dependencies={lanes:0,firstContext:t}}else Ja=Ja.next=t;return s}var ea=null;function r0(t){ea===null?ea=[t]:ea.push(t)}function Tv(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,r0(s)):(r.next=a.next,a.next=r),s.interleaved=r,$r(t,n)}function $r(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var tn=!1;function n0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mv(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Nn(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,qe&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,$r(t,r)}return a=n.interleaved,a===null?(s.next=s,r0(n)):(s.next=a.next,a.next=s),n.interleaved=s,$r(t,r)}function Ac(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Uh(t,r)}}function uf(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=s:i=i.next=s}else a=i=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function xd(t,s,r,n){var a=t.updateQueue;tn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var x=a.baseState;o=0,m=d=c=null,l=i;do{var f=l.lane,b=l.eventTime;if((n&f)===f){m!==null&&(m=m.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=t,p=l;switch(f=s,b=r,p.tag){case 1:if(h=p.payload,typeof h=="function"){x=h.call(b,x,f);break e}x=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,f=typeof h=="function"?h.call(b,x,f):h,f==null)break e;x=lt({},x,f);break e;case 2:tn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else b={eventTime:b,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=b,c=x):m=m.next=b,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(m===null&&(c=x),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);va|=o,t.lanes=o,t.memoizedState=x}}function mf(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(de(191,a));a.call(n)}}}var Tl={},mr=In(Tl),al=In(Tl),il=In(Tl);function ta(t){if(t===Tl)throw Error(de(174));return t}function a0(t,s){switch(et(il,s),et(al,t),et(mr,Tl),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Zm(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Zm(s,t)}nt(mr),et(mr,s)}function Si(){nt(mr),nt(al),nt(il)}function Rv(t){ta(il.current);var s=ta(mr.current),r=Zm(s,t.type);s!==r&&(et(al,t),et(mr,r))}function i0(t){al.current===t&&(nt(mr),nt(al))}var it=In(0);function hd(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ju=[];function o0(){for(var t=0;t<Ju.length;t++)Ju[t]._workInProgressVersionPrimary=null;Ju.length=0}var Fc=Ur.ReactCurrentDispatcher,Zu=Ur.ReactCurrentBatchConfig,ba=0,ot=null,yt=null,Ct=null,pd=!1,zo=!1,ol=0,d5=0;function Mt(){throw Error(de(321))}function l0(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Ks(t[r],s[r]))return!1;return!0}function c0(t,s,r,n,a,i){if(ba=i,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fc.current=t===null||t.memoizedState===null?h5:p5,t=r(n,a),zo){i=0;do{if(zo=!1,ol=0,25<=i)throw Error(de(301));i+=1,Ct=yt=null,s.updateQueue=null,Fc.current=f5,t=r(n,a)}while(zo)}if(Fc.current=fd,s=yt!==null&&yt.next!==null,ba=0,Ct=yt=ot=null,pd=!1,s)throw Error(de(300));return t}function d0(){var t=ol!==0;return ol=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Ts(){if(yt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var s=Ct===null?ot.memoizedState:Ct.next;if(s!==null)Ct=s,yt=t;else{if(t===null)throw Error(de(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Ct===null?ot.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function ll(t,s){return typeof s=="function"?s(t):s}function em(t){var s=Ts(),r=s.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=yt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var m=d.lane;if((ba&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var x={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=x,o=n):c=c.next=x,ot.lanes|=m,va|=m}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Ks(n,s.memoizedState)||(Zt=!0),s.memoizedState=n,s.baseState=o,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,ot.lanes|=i,va|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function tm(t){var s=Ts(),r=s.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=s.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Ks(i,s.memoizedState)||(Zt=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,n]}function Lv(){}function Dv(t,s){var r=ot,n=Ts(),a=s(),i=!Ks(n.memoizedState,a);if(i&&(n.memoizedState=a,Zt=!0),n=n.queue,u0(Iv.bind(null,r,n,t),[t]),n.getSnapshot!==s||i||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,cl(9,$v.bind(null,r,n,a,s),void 0,null),Et===null)throw Error(de(349));ba&30||Ov(r,s,a)}return a}function Ov(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function $v(t,s,r,n){s.value=r,s.getSnapshot=n,zv(s)&&Bv(t)}function Iv(t,s,r){return r(function(){zv(s)&&Bv(t)})}function zv(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Ks(t,r)}catch{return!0}}function Bv(t){var s=$r(t,1);s!==null&&Qs(s,t,1,-1)}function xf(t){var s=rr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:t},s.queue=t,t=t.dispatch=x5.bind(null,ot,t),[s.memoizedState,t]}function cl(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function qv(){return Ts().memoizedState}function Tc(t,s,r,n){var a=rr();ot.flags|=t,a.memoizedState=cl(1|s,r,void 0,n===void 0?null:n)}function Yd(t,s,r,n){var a=Ts();n=n===void 0?null:n;var i=void 0;if(yt!==null){var o=yt.memoizedState;if(i=o.destroy,n!==null&&l0(n,o.deps)){a.memoizedState=cl(s,r,i,n);return}}ot.flags|=t,a.memoizedState=cl(1|s,r,i,n)}function hf(t,s){return Tc(8390656,8,t,s)}function u0(t,s){return Yd(2048,8,t,s)}function Uv(t,s){return Yd(4,2,t,s)}function Wv(t,s){return Yd(4,4,t,s)}function Vv(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Hv(t,s,r){return r=r!=null?r.concat([t]):null,Yd(4,4,Vv.bind(null,s,t),r)}function m0(){}function Qv(t,s){var r=Ts();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&l0(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function Kv(t,s){var r=Ts();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&l0(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function Yv(t,s,r){return ba&21?(Ks(r,s)||(r=ev(),ot.lanes|=r,va|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=r)}function u5(t,s){var r=Xe;Xe=r!==0&&4>r?r:4,t(!0);var n=Zu.transition;Zu.transition={};try{t(!1),s()}finally{Xe=r,Zu.transition=n}}function Gv(){return Ts().memoizedState}function m5(t,s,r){var n=kn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xv(t))Jv(s,r);else if(r=Tv(t,s,r,n),r!==null){var a=Vt();Qs(r,t,n,a),Zv(r,s,n)}}function x5(t,s,r){var n=kn(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xv(t))Jv(s,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var o=s.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ks(l,o)){var c=s.interleaved;c===null?(a.next=a,r0(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=Tv(t,s,a,n),r!==null&&(a=Vt(),Qs(r,t,n,a),Zv(r,s,n))}}function Xv(t){var s=t.alternate;return t===ot||s!==null&&s===ot}function Jv(t,s){zo=pd=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Zv(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,Uh(t,r)}}var fd={readContext:Fs,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},h5={readContext:Fs,useCallback:function(t,s){return rr().memoizedState=[t,s===void 0?null:s],t},useContext:Fs,useEffect:hf,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Tc(4194308,4,Vv.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Tc(4194308,4,t,s)},useInsertionEffect:function(t,s){return Tc(4,2,t,s)},useMemo:function(t,s){var r=rr();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=rr();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=m5.bind(null,ot,t),[n.memoizedState,t]},useRef:function(t){var s=rr();return t={current:t},s.memoizedState=t},useState:xf,useDebugValue:m0,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=xf(!1),s=t[0];return t=u5.bind(null,t[1]),rr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=ot,a=rr();if(at){if(r===void 0)throw Error(de(407));r=r()}else{if(r=s(),Et===null)throw Error(de(349));ba&30||Ov(n,s,r)}a.memoizedState=r;var i={value:r,getSnapshot:s};return a.queue=i,hf(Iv.bind(null,n,i,t),[t]),n.flags|=2048,cl(9,$v.bind(null,n,i,r,s),void 0,null),r},useId:function(){var t=rr(),s=Et.identifierPrefix;if(at){var r=Mr,n=Tr;r=(n&~(1<<32-Hs(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=ol++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=d5++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},p5={readContext:Fs,useCallback:Qv,useContext:Fs,useEffect:u0,useImperativeHandle:Hv,useInsertionEffect:Uv,useLayoutEffect:Wv,useMemo:Kv,useReducer:em,useRef:qv,useState:function(){return em(ll)},useDebugValue:m0,useDeferredValue:function(t){var s=Ts();return Yv(s,yt.memoizedState,t)},useTransition:function(){var t=em(ll)[0],s=Ts().memoizedState;return[t,s]},useMutableSource:Lv,useSyncExternalStore:Dv,useId:Gv,unstable_isNewReconciler:!1},f5={readContext:Fs,useCallback:Qv,useContext:Fs,useEffect:u0,useImperativeHandle:Hv,useInsertionEffect:Uv,useLayoutEffect:Wv,useMemo:Kv,useReducer:tm,useRef:qv,useState:function(){return tm(ll)},useDebugValue:m0,useDeferredValue:function(t){var s=Ts();return yt===null?s.memoizedState=t:Yv(s,yt.memoizedState,t)},useTransition:function(){var t=tm(ll)[0],s=Ts().memoizedState;return[t,s]},useMutableSource:Lv,useSyncExternalStore:Dv,useId:Gv,unstable_isNewReconciler:!1};function $s(t,s){if(t&&t.defaultProps){s=lt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function vx(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:lt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gd={isMounted:function(t){return(t=t._reactInternals)?Fa(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=Vt(),a=kn(t),i=Rr(n,a);i.payload=s,r!=null&&(i.callback=r),s=Nn(t,i,a),s!==null&&(Qs(s,t,a,n),Ac(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=Vt(),a=kn(t),i=Rr(n,a);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Nn(t,i,a),s!==null&&(Qs(s,t,a,n),Ac(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Vt(),n=kn(t),a=Rr(r,n);a.tag=2,s!=null&&(a.callback=s),s=Nn(t,a,n),s!==null&&(Qs(s,t,n,r),Ac(s,t,n))}};function pf(t,s,r,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):s.prototype&&s.prototype.isPureReactComponent?!tl(r,n)||!tl(a,i):!0}function ej(t,s,r){var n=!1,a=Fn,i=s.contextType;return typeof i=="object"&&i!==null?i=Fs(i):(a=rs(s)?ga:zt.current,n=s.contextTypes,i=(n=n!=null)?_i(t,a):Fn),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gd,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),s}function ff(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&Gd.enqueueReplaceState(s,s.state,null)}function jx(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},n0(t);var i=s.contextType;typeof i=="object"&&i!==null?a.context=Fs(i):(i=rs(s)?ga:zt.current,a.context=_i(t,i)),a.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(vx(t,s,i,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Gd.enqueueReplaceState(a,a.state,null),xd(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ei(t,s){try{var r="",n=s;do r+=W_(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:a,digest:null}}function sm(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function wx(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var g5=typeof WeakMap=="function"?WeakMap:Map;function tj(t,s,r){r=Rr(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){yd||(yd=!0,Tx=n),wx(t,s)},r}function sj(t,s,r){r=Rr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){wx(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){wx(t,s),typeof n!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),r}function gf(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new g5;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=F5.bind(null,t,s,r),s.then(t,t))}function yf(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function bf(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Rr(-1,1),s.tag=2,Nn(r,s,1))),r.lanes|=1),t)}var y5=Ur.ReactCurrentOwner,Zt=!1;function Ut(t,s,r,n){s.child=t===null?Fv(s,null,r,n):Ci(s,t.child,r,n)}function vf(t,s,r,n,a){r=r.render;var i=s.ref;return ai(s,a),n=c0(t,s,r,n,i,a),r=d0(),t!==null&&!Zt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Ir(t,s,a)):(at&&r&&Xh(s),s.flags|=1,Ut(t,s,n,a),s.child)}function jf(t,s,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,rj(t,s,i,n,a)):(t=Dc(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:tl,r(o,n)&&t.ref===s.ref)return Ir(t,s,a)}return s.flags|=1,t=Cn(i,n),t.ref=s.ref,t.return=s,s.child=t}function rj(t,s,r,n,a){if(t!==null){var i=t.memoizedProps;if(tl(i,n)&&t.ref===s.ref)if(Zt=!1,s.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Zt=!0);else return s.lanes=t.lanes,Ir(t,s,a)}return Nx(t,s,r,n,a)}function nj(t,s,r){var n=s.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(ei,us),us|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,et(ei,us),us|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,et(ei,us),us|=n}else i!==null?(n=i.baseLanes|r,s.memoizedState=null):n=r,et(ei,us),us|=n;return Ut(t,s,a,r),s.child}function aj(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Nx(t,s,r,n,a){var i=rs(r)?ga:zt.current;return i=_i(s,i),ai(s,a),r=c0(t,s,r,n,i,a),n=d0(),t!==null&&!Zt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Ir(t,s,a)):(at&&n&&Xh(s),s.flags|=1,Ut(t,s,r,a),s.child)}function wf(t,s,r,n,a){if(rs(r)){var i=!0;ld(s)}else i=!1;if(ai(s,a),s.stateNode===null)Mc(t,s),ej(s,r,n),jx(s,r,n,a),n=!0;else if(t===null){var o=s.stateNode,l=s.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Fs(d):(d=rs(r)?ga:zt.current,d=_i(s,d));var m=r.getDerivedStateFromProps,x=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";x||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&ff(s,o,n,d),tn=!1;var f=s.memoizedState;o.state=f,xd(s,n,o,a),c=s.memoizedState,l!==n||f!==c||ss.current||tn?(typeof m=="function"&&(vx(s,r,m,n),c=s.memoizedState),(l=tn||pf(s,r,l,n,f,c,d))?(x||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{o=s.stateNode,Mv(t,s),l=s.memoizedProps,d=s.type===s.elementType?l:$s(s.type,l),o.props=d,x=s.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fs(c):(c=rs(r)?ga:zt.current,c=_i(s,c));var b=r.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==x||f!==c)&&ff(s,o,n,c),tn=!1,f=s.memoizedState,o.state=f,xd(s,n,o,a);var h=s.memoizedState;l!==x||f!==h||ss.current||tn?(typeof b=="function"&&(vx(s,r,b,n),h=s.memoizedState),(d=tn||pf(s,r,d,n,f,h,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,h,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,h,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=h),o.props=n,o.state=h,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),n=!1)}return _x(t,s,r,n,i,a)}function _x(t,s,r,n,a,i){aj(t,s);var o=(s.flags&128)!==0;if(!n&&!o)return a&&of(s,r,!1),Ir(t,s,i);n=s.stateNode,y5.current=s;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&o?(s.child=Ci(s,t.child,null,i),s.child=Ci(s,null,l,i)):Ut(t,s,l,i),s.memoizedState=n.state,a&&of(s,r,!0),s.child}function ij(t){var s=t.stateNode;s.pendingContext?af(t,s.pendingContext,s.pendingContext!==s.context):s.context&&af(t,s.context,!1),a0(t,s.containerInfo)}function Nf(t,s,r,n,a){return ki(),Zh(a),s.flags|=256,Ut(t,s,r,n),s.child}var kx={dehydrated:null,treeContext:null,retryLane:0};function Cx(t){return{baseLanes:t,cachePool:null,transitions:null}}function oj(t,s,r){var n=s.pendingProps,a=it.current,i=!1,o=(s.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),et(it,a&1),t===null)return yx(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=n.children,t=n.fallback,i?(n=s.mode,i=s.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zd(o,n,0,null),t=ha(t,n,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Cx(r),s.memoizedState=kx,t):x0(s,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return b5(t,s,o,n,l,a,r);if(i){i=n.fallback,o=s.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Cn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Cn(l,i):(i=ha(i,o,r,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,o=t.child.memoizedState,o=o===null?Cx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,s.memoizedState=kx,n}return i=t.child,t=i.sibling,n=Cn(i,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function x0(t,s){return s=Zd({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function ac(t,s,r,n){return n!==null&&Zh(n),Ci(s,t.child,null,r),t=x0(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function b5(t,s,r,n,a,i,o){if(r)return s.flags&256?(s.flags&=-257,n=sm(Error(de(422))),ac(t,s,o,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=n.fallback,a=s.mode,n=Zd({mode:"visible",children:n.children},a,0,null),i=ha(i,a,o,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,s.mode&1&&Ci(s,t.child,null,o),s.child.memoizedState=Cx(o),s.memoizedState=kx,i);if(!(s.mode&1))return ac(t,s,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(de(419)),n=sm(i,n,void 0),ac(t,s,o,n)}if(l=(o&t.childLanes)!==0,Zt||l){if(n=Et,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,$r(t,a),Qs(n,t,a,-1))}return b0(),n=sm(Error(de(421))),ac(t,s,o,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=T5.bind(null,t),a._reactRetry=s,null):(t=i.treeContext,xs=wn(a.nextSibling),hs=s,at=!0,Us=null,t!==null&&(_s[ks++]=Tr,_s[ks++]=Mr,_s[ks++]=ya,Tr=t.id,Mr=t.overflow,ya=s),s=x0(s,n.children),s.flags|=4096,s)}function _f(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),bx(t.return,s,r)}function rm(t,s,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function lj(t,s,r){var n=s.pendingProps,a=n.revealOrder,i=n.tail;if(Ut(t,s,n.children,r),n=it.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_f(t,r,s);else if(t.tag===19)_f(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(et(it,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&hd(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),rm(s,!1,a,r,i);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&hd(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}rm(s,!0,r,null,i);break;case"together":rm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mc(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ir(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),va|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(de(153));if(s.child!==null){for(t=s.child,r=Cn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Cn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function v5(t,s,r){switch(s.tag){case 3:ij(s),ki();break;case 5:Rv(s);break;case 1:rs(s.type)&&ld(s);break;case 4:a0(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;et(ud,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(et(it,it.current&1),s.flags|=128,null):r&s.child.childLanes?oj(t,s,r):(et(it,it.current&1),t=Ir(t,s,r),t!==null?t.sibling:null);et(it,it.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return lj(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),et(it,it.current),n)break;return null;case 22:case 23:return s.lanes=0,nj(t,s,r)}return Ir(t,s,r)}var cj,Sx,dj,uj;cj=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sx=function(){};dj=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,ta(mr.current);var i=null;switch(r){case"input":a=Ym(t,a),n=Ym(t,n),i=[];break;case"select":a=lt({},a,{value:void 0}),n=lt({},n,{value:void 0}),i=[];break;case"textarea":a=Jm(t,a),n=Jm(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=id)}ex(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ko.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ko.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&rt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};uj=function(t,s,r,n){r!==n&&(s.flags|=4)};function oo(t,s){if(!at)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Rt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function j5(t,s,r){var n=s.pendingProps;switch(Jh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(s),null;case 1:return rs(s.type)&&od(),Rt(s),null;case 3:return n=s.stateNode,Si(),nt(ss),nt(zt),o0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(rc(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Us!==null&&(Lx(Us),Us=null))),Sx(t,s),Rt(s),null;case 5:i0(s);var a=ta(il.current);if(r=s.type,t!==null&&s.stateNode!=null)dj(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(de(166));return Rt(s),null}if(t=ta(mr.current),rc(s)){n=s.stateNode,r=s.type;var i=s.memoizedProps;switch(n[or]=s,n[nl]=i,t=(s.mode&1)!==0,r){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(a=0;a<ko.length;a++)rt(ko[a],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":Tp(n,i),rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},rt("invalid",n);break;case"textarea":Rp(n,i),rt("invalid",n)}ex(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&sc(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&sc(n.textContent,l,t),a=["children",""+l]):Ko.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&rt("scroll",n)}switch(r){case"input":Kl(n),Mp(n,i,!0);break;case"textarea":Kl(n),Lp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=id)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ib(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[or]=s,t[nl]=n,cj(t,s,!1,!1),s.stateNode=t;e:{switch(o=tx(r,n),r){case"dialog":rt("cancel",t),rt("close",t),a=n;break;case"iframe":case"object":case"embed":rt("load",t),a=n;break;case"video":case"audio":for(a=0;a<ko.length;a++)rt(ko[a],t);a=n;break;case"source":rt("error",t),a=n;break;case"img":case"image":case"link":rt("error",t),rt("load",t),a=n;break;case"details":rt("toggle",t),a=n;break;case"input":Tp(t,n),a=Ym(t,n),rt("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=lt({},n,{value:void 0}),rt("invalid",t);break;case"textarea":Rp(t,n),a=Jm(t,n),rt("invalid",t);break;default:a=n}ex(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?qb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zb(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yo(t,c):typeof c=="number"&&Yo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ko.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rt("scroll",t):c!=null&&Oh(t,i,c,o))}switch(r){case"input":Kl(t),Mp(t,n,!1);break;case"textarea":Kl(t),Lp(t);break;case"option":n.value!=null&&t.setAttribute("value",""+An(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ti(t,!!n.multiple,i,!1):n.defaultValue!=null&&ti(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Rt(s),null;case 6:if(t&&s.stateNode!=null)uj(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(de(166));if(r=ta(il.current),ta(mr.current),rc(s)){if(n=s.stateNode,r=s.memoizedProps,n[or]=s,(i=n.nodeValue!==r)&&(t=hs,t!==null))switch(t.tag){case 3:sc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sc(n.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[or]=s,s.stateNode=n}return Rt(s),null;case 13:if(nt(it),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&xs!==null&&s.mode&1&&!(s.flags&128))Pv(),ki(),s.flags|=98560,i=!1;else if(i=rc(s),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(de(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[or]=s}else ki(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Rt(s),i=!1}else Us!==null&&(Lx(Us),Us=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||it.current&1?vt===0&&(vt=3):b0())),s.updateQueue!==null&&(s.flags|=4),Rt(s),null);case 4:return Si(),Sx(t,s),t===null&&sl(s.stateNode.containerInfo),Rt(s),null;case 10:return s0(s.type._context),Rt(s),null;case 17:return rs(s.type)&&od(),Rt(s),null;case 19:if(nt(it),i=s.memoizedState,i===null)return Rt(s),null;if(n=(s.flags&128)!==0,o=i.rendering,o===null)if(n)oo(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(o=hd(t),o!==null){for(s.flags|=128,oo(i,!1),n=o.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return et(it,it.current&1|2),s.child}t=t.sibling}i.tail!==null&&mt()>Pi&&(s.flags|=128,n=!0,oo(i,!1),s.lanes=4194304)}else{if(!n)if(t=hd(o),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),oo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!at)return Rt(s),null}else 2*mt()-i.renderingStartTime>Pi&&r!==1073741824&&(s.flags|=128,n=!0,oo(i,!1),s.lanes=4194304);i.isBackwards?(o.sibling=s.child,s.child=o):(r=i.last,r!==null?r.sibling=o:s.child=o,i.last=o)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=mt(),s.sibling=null,r=it.current,et(it,n?r&1|2:r&1),s):(Rt(s),null);case 22:case 23:return y0(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?us&1073741824&&(Rt(s),s.subtreeFlags&6&&(s.flags|=8192)):Rt(s),null;case 24:return null;case 25:return null}throw Error(de(156,s.tag))}function w5(t,s){switch(Jh(s),s.tag){case 1:return rs(s.type)&&od(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Si(),nt(ss),nt(zt),o0(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return i0(s),null;case 13:if(nt(it),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(de(340));ki()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return nt(it),null;case 4:return Si(),null;case 10:return s0(s.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var ic=!1,Dt=!1,N5=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Za(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ut(t,s,n)}else r.current=null}function Ex(t,s,r){try{r()}catch(n){ut(t,s,n)}}var kf=!1;function _5(t,s){if(ux=rd,t=fv(),Gh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,m=0,x=t,f=null;t:for(;;){for(var b;x!==r||a!==0&&x.nodeType!==3||(l=o+a),x!==i||n!==0&&x.nodeType!==3||(c=o+n),x.nodeType===3&&(o+=x.nodeValue.length),(b=x.firstChild)!==null;)f=x,x=b;for(;;){if(x===t)break t;if(f===r&&++d===a&&(l=o),f===i&&++m===n&&(c=o),(b=x.nextSibling)!==null)break;x=f,f=x.parentNode}x=b}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mx={focusedElem:t,selectionRange:r},rd=!1,ye=s;ye!==null;)if(s=ye,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ye=t;else for(;ye!==null;){s=ye;try{var h=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,v=h.memoizedState,g=s.stateNode,j=g.getSnapshotBeforeUpdate(s.elementType===s.type?p:$s(s.type,p),v);g.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var y=s.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(w){ut(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,ye=t;break}ye=s.return}return h=kf,kf=!1,h}function Bo(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ex(s,r,i)}a=a.next}while(a!==n)}}function Xd(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Px(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function mj(t){var s=t.alternate;s!==null&&(t.alternate=null,mj(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[or],delete s[nl],delete s[px],delete s[i5],delete s[o5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xj(t){return t.tag===5||t.tag===3||t.tag===4}function Cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ax(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=id));else if(n!==4&&(t=t.child,t!==null))for(Ax(t,s,r),t=t.sibling;t!==null;)Ax(t,s,r),t=t.sibling}function Fx(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Fx(t,s,r),t=t.sibling;t!==null;)Fx(t,s,r),t=t.sibling}var Pt=null,Bs=!1;function Kr(t,s,r){for(r=r.child;r!==null;)hj(t,s,r),r=r.sibling}function hj(t,s,r){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(Ud,r)}catch{}switch(r.tag){case 5:Dt||Za(r,s);case 6:var n=Pt,a=Bs;Pt=null,Kr(t,s,r),Pt=n,Bs=a,Pt!==null&&(Bs?(t=Pt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Pt.removeChild(r.stateNode));break;case 18:Pt!==null&&(Bs?(t=Pt,r=r.stateNode,t.nodeType===8?Gu(t.parentNode,r):t.nodeType===1&&Gu(t,r),Zo(t)):Gu(Pt,r.stateNode));break;case 4:n=Pt,a=Bs,Pt=r.stateNode.containerInfo,Bs=!0,Kr(t,s,r),Pt=n,Bs=a;break;case 0:case 11:case 14:case 15:if(!Dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ex(r,s,o),a=a.next}while(a!==n)}Kr(t,s,r);break;case 1:if(!Dt&&(Za(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ut(r,s,l)}Kr(t,s,r);break;case 21:Kr(t,s,r);break;case 22:r.mode&1?(Dt=(n=Dt)||r.memoizedState!==null,Kr(t,s,r),Dt=n):Kr(t,s,r);break;default:Kr(t,s,r)}}function Sf(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new N5),s.forEach(function(n){var a=M5.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Os(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,o=s,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,Bs=!1;break e;case 3:Pt=l.stateNode.containerInfo,Bs=!0;break e;case 4:Pt=l.stateNode.containerInfo,Bs=!0;break e}l=l.return}if(Pt===null)throw Error(de(160));hj(i,o,a),Pt=null,Bs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ut(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)pj(s,t),s=s.sibling}function pj(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(s,t),er(t),n&4){try{Bo(3,t,t.return),Xd(3,t)}catch(p){ut(t,t.return,p)}try{Bo(5,t,t.return)}catch(p){ut(t,t.return,p)}}break;case 1:Os(s,t),er(t),n&512&&r!==null&&Za(r,r.return);break;case 5:if(Os(s,t),er(t),n&512&&r!==null&&Za(r,r.return),t.flags&32){var a=t.stateNode;try{Yo(a,"")}catch(p){ut(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ob(a,i),tx(l,o);var d=tx(l,i);for(o=0;o<c.length;o+=2){var m=c[o],x=c[o+1];m==="style"?qb(a,x):m==="dangerouslySetInnerHTML"?zb(a,x):m==="children"?Yo(a,x):Oh(a,m,x,d)}switch(l){case"input":Gm(a,i);break;case"textarea":$b(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ti(a,!!i.multiple,b,!1):f!==!!i.multiple&&(i.defaultValue!=null?ti(a,!!i.multiple,i.defaultValue,!0):ti(a,!!i.multiple,i.multiple?[]:"",!1))}a[nl]=i}catch(p){ut(t,t.return,p)}}break;case 6:if(Os(s,t),er(t),n&4){if(t.stateNode===null)throw Error(de(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(p){ut(t,t.return,p)}}break;case 3:if(Os(s,t),er(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zo(s.containerInfo)}catch(p){ut(t,t.return,p)}break;case 4:Os(s,t),er(t);break;case 13:Os(s,t),er(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(f0=mt())),n&4&&Sf(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(Dt=(d=Dt)||m,Os(s,t),Dt=d):Os(s,t),er(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(ye=t,m=t.child;m!==null;){for(x=ye=m;ye!==null;){switch(f=ye,b=f.child,f.tag){case 0:case 11:case 14:case 15:Bo(4,f,f.return);break;case 1:Za(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){n=f,r=f.return;try{s=n,h.props=s.memoizedProps,h.state=s.memoizedState,h.componentWillUnmount()}catch(p){ut(n,r,p)}}break;case 5:Za(f,f.return);break;case 22:if(f.memoizedState!==null){Pf(x);continue}}b!==null?(b.return=f,ye=b):Pf(x)}m=m.sibling}e:for(m=null,x=t;;){if(x.tag===5){if(m===null){m=x;try{a=x.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=x.stateNode,c=x.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Bb("display",o))}catch(p){ut(t,t.return,p)}}}else if(x.tag===6){if(m===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(p){ut(t,t.return,p)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;m===x&&(m=null),x=x.return}m===x&&(m=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Os(s,t),er(t),n&4&&Sf(t);break;case 21:break;default:Os(s,t),er(t)}}function er(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(xj(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Yo(a,""),n.flags&=-33);var i=Cf(t);Fx(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Cf(t);Ax(t,l,o);break;default:throw Error(de(161))}}catch(c){ut(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function k5(t,s,r){ye=t,fj(t)}function fj(t,s,r){for(var n=(t.mode&1)!==0;ye!==null;){var a=ye,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||ic;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=ic;var d=Dt;if(ic=o,(Dt=c)&&!d)for(ye=a;ye!==null;)o=ye,c=o.child,o.tag===22&&o.memoizedState!==null?Af(a):c!==null?(c.return=o,ye=c):Af(a);for(;i!==null;)ye=i,fj(i),i=i.sibling;ye=a,ic=l,Dt=d}Ef(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ye=i):Ef(t)}}function Ef(t){for(;ye!==null;){var s=ye;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Dt||Xd(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Dt)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:$s(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&mf(s,i,n);break;case 3:var o=s.updateQueue;if(o!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}mf(s,o,r)}break;case 5:var l=s.stateNode;if(r===null&&s.flags&4){r=l;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var x=m.dehydrated;x!==null&&Zo(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}Dt||s.flags&512&&Px(s)}catch(f){ut(s,s.return,f)}}if(s===t){ye=null;break}if(r=s.sibling,r!==null){r.return=s.return,ye=r;break}ye=s.return}}function Pf(t){for(;ye!==null;){var s=ye;if(s===t){ye=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ye=r;break}ye=s.return}}function Af(t){for(;ye!==null;){var s=ye;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Xd(4,s)}catch(c){ut(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){ut(s,a,c)}}var i=s.return;try{Px(s)}catch(c){ut(s,i,c)}break;case 5:var o=s.return;try{Px(s)}catch(c){ut(s,o,c)}}}catch(c){ut(s,s.return,c)}if(s===t){ye=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ye=l;break}ye=s.return}}var C5=Math.ceil,gd=Ur.ReactCurrentDispatcher,h0=Ur.ReactCurrentOwner,Es=Ur.ReactCurrentBatchConfig,qe=0,Et=null,ht=null,At=0,us=0,ei=In(0),vt=0,dl=null,va=0,Jd=0,p0=0,qo=null,Xt=null,f0=0,Pi=1/0,Cr=null,yd=!1,Tx=null,_n=null,oc=!1,pn=null,bd=0,Uo=0,Mx=null,Rc=-1,Lc=0;function Vt(){return qe&6?mt():Rc!==-1?Rc:Rc=mt()}function kn(t){return t.mode&1?qe&2&&At!==0?At&-At:c5.transition!==null?(Lc===0&&(Lc=ev()),Lc):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:ov(t.type)),t):1}function Qs(t,s,r,n){if(50<Uo)throw Uo=0,Mx=null,Error(de(185));Pl(t,r,n),(!(qe&2)||t!==Et)&&(t===Et&&(!(qe&2)&&(Jd|=r),vt===4&&rn(t,At)),ns(t,n),r===1&&qe===0&&!(s.mode&1)&&(Pi=mt()+500,Kd&&zn()))}function ns(t,s){var r=t.callbackNode;c4(t,s);var n=sd(t,t===Et?At:0);if(n===0)r!==null&&$p(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&$p(r),s===1)t.tag===0?l5(Ff.bind(null,t)):Cv(Ff.bind(null,t)),n5(function(){!(qe&6)&&zn()}),r=null;else{switch(tv(n)){case 1:r=qh;break;case 4:r=Jb;break;case 16:r=td;break;case 536870912:r=Zb;break;default:r=td}r=_j(r,gj.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function gj(t,s){if(Rc=-1,Lc=0,qe&6)throw Error(de(327));var r=t.callbackNode;if(ii()&&t.callbackNode!==r)return null;var n=sd(t,t===Et?At:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=vd(t,n);else{s=n;var a=qe;qe|=2;var i=bj();(Et!==t||At!==s)&&(Cr=null,Pi=mt()+500,xa(t,s));do try{P5();break}catch(l){yj(t,l)}while(!0);t0(),gd.current=i,qe=a,ht!==null?s=0:(Et=null,At=0,s=vt)}if(s!==0){if(s===2&&(a=ix(t),a!==0&&(n=a,s=Rx(t,a))),s===1)throw r=dl,xa(t,0),rn(t,n),ns(t,mt()),r;if(s===6)rn(t,n);else{if(a=t.current.alternate,!(n&30)&&!S5(a)&&(s=vd(t,n),s===2&&(i=ix(t),i!==0&&(n=i,s=Rx(t,i))),s===1))throw r=dl,xa(t,0),rn(t,n),ns(t,mt()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(de(345));case 2:Yn(t,Xt,Cr);break;case 3:if(rn(t,n),(n&130023424)===n&&(s=f0+500-mt(),10<s)){if(sd(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Vt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=hx(Yn.bind(null,t,Xt,Cr),s);break}Yn(t,Xt,Cr);break;case 4:if(rn(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var o=31-Hs(n);i=1<<o,o=s[o],o>a&&(a=o),n&=~i}if(n=a,n=mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C5(n/1960))-n,10<n){t.timeoutHandle=hx(Yn.bind(null,t,Xt,Cr),n);break}Yn(t,Xt,Cr);break;case 5:Yn(t,Xt,Cr);break;default:throw Error(de(329))}}}return ns(t,mt()),t.callbackNode===r?gj.bind(null,t):null}function Rx(t,s){var r=qo;return t.current.memoizedState.isDehydrated&&(xa(t,s).flags|=256),t=vd(t,s),t!==2&&(s=Xt,Xt=r,s!==null&&Lx(s)),t}function Lx(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function S5(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ks(i(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rn(t,s){for(s&=~p0,s&=~Jd,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Hs(s),n=1<<r;t[r]=-1,s&=~n}}function Ff(t){if(qe&6)throw Error(de(327));ii();var s=sd(t,0);if(!(s&1))return ns(t,mt()),null;var r=vd(t,s);if(t.tag!==0&&r===2){var n=ix(t);n!==0&&(s=n,r=Rx(t,n))}if(r===1)throw r=dl,xa(t,0),rn(t,s),ns(t,mt()),r;if(r===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Yn(t,Xt,Cr),ns(t,mt()),null}function g0(t,s){var r=qe;qe|=1;try{return t(s)}finally{qe=r,qe===0&&(Pi=mt()+500,Kd&&zn())}}function ja(t){pn!==null&&pn.tag===0&&!(qe&6)&&ii();var s=qe;qe|=1;var r=Es.transition,n=Xe;try{if(Es.transition=null,Xe=1,t)return t()}finally{Xe=n,Es.transition=r,qe=s,!(qe&6)&&zn()}}function y0(){us=ei.current,nt(ei)}function xa(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,r5(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(Jh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&od();break;case 3:Si(),nt(ss),nt(zt),o0();break;case 5:i0(n);break;case 4:Si();break;case 13:nt(it);break;case 19:nt(it);break;case 10:s0(n.type._context);break;case 22:case 23:y0()}r=r.return}if(Et=t,ht=t=Cn(t.current,null),At=us=s,vt=0,dl=null,p0=Jd=va=0,Xt=qo=null,ea!==null){for(s=0;s<ea.length;s++)if(r=ea[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ea=null}return t}function yj(t,s){do{var r=ht;try{if(t0(),Fc.current=fd,pd){for(var n=ot.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}pd=!1}if(ba=0,Ct=yt=ot=null,zo=!1,ol=0,h0.current=null,r===null||r.return===null){vt=1,dl=s,ht=null;break}e:{var i=t,o=r.return,l=r,c=s;if(s=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,x=m.tag;if(!(m.mode&1)&&(x===0||x===11||x===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=yf(o);if(b!==null){b.flags&=-257,bf(b,o,l,i,s),b.mode&1&&gf(i,d,s),s=b,c=d;var h=s.updateQueue;if(h===null){var p=new Set;p.add(c),s.updateQueue=p}else h.add(c);break e}else{if(!(s&1)){gf(i,d,s),b0();break e}c=Error(de(426))}}else if(at&&l.mode&1){var v=yf(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),bf(v,o,l,i,s),Zh(Ei(c,l));break e}}i=c=Ei(c,l),vt!==4&&(vt=2),qo===null?qo=[i]:qo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var g=tj(i,c,s);uf(i,g);break e;case 1:l=c;var j=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(_n===null||!_n.has(y)))){i.flags|=65536,s&=-s,i.lanes|=s;var w=sj(i,l,s);uf(i,w);break e}}i=i.return}while(i!==null)}jj(r)}catch(M){s=M,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function bj(){var t=gd.current;return gd.current=fd,t===null?fd:t}function b0(){(vt===0||vt===3||vt===2)&&(vt=4),Et===null||!(va&268435455)&&!(Jd&268435455)||rn(Et,At)}function vd(t,s){var r=qe;qe|=2;var n=bj();(Et!==t||At!==s)&&(Cr=null,xa(t,s));do try{E5();break}catch(a){yj(t,a)}while(!0);if(t0(),qe=r,gd.current=n,ht!==null)throw Error(de(261));return Et=null,At=0,vt}function E5(){for(;ht!==null;)vj(ht)}function P5(){for(;ht!==null&&!e4();)vj(ht)}function vj(t){var s=Nj(t.alternate,t,us);t.memoizedProps=t.pendingProps,s===null?jj(t):ht=s,h0.current=null}function jj(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=w5(r,s),r!==null){r.flags&=32767,ht=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ht=null;return}}else if(r=j5(r,s,us),r!==null){ht=r;return}if(s=s.sibling,s!==null){ht=s;return}ht=s=t}while(s!==null);vt===0&&(vt=5)}function Yn(t,s,r){var n=Xe,a=Es.transition;try{Es.transition=null,Xe=1,A5(t,s,r,n)}finally{Es.transition=a,Xe=n}return null}function A5(t,s,r,n){do ii();while(pn!==null);if(qe&6)throw Error(de(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(d4(t,i),t===Et&&(ht=Et=null,At=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oc||(oc=!0,_j(td,function(){return ii(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Es.transition,Es.transition=null;var o=Xe;Xe=1;var l=qe;qe|=4,h0.current=null,_5(t,r),pj(r,t),G4(mx),rd=!!ux,mx=ux=null,t.current=r,k5(r),t4(),qe=l,Xe=o,Es.transition=i}else t.current=r;if(oc&&(oc=!1,pn=t,bd=a),i=t.pendingLanes,i===0&&(_n=null),n4(r.stateNode),ns(t,mt()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(yd)throw yd=!1,t=Tx,Tx=null,t;return bd&1&&t.tag!==0&&ii(),i=t.pendingLanes,i&1?t===Mx?Uo++:(Uo=0,Mx=t):Uo=0,zn(),null}function ii(){if(pn!==null){var t=tv(bd),s=Es.transition,r=Xe;try{if(Es.transition=null,Xe=16>t?16:t,pn===null)var n=!1;else{if(t=pn,pn=null,bd=0,qe&6)throw Error(de(331));var a=qe;for(qe|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ye=d;ye!==null;){var m=ye;switch(m.tag){case 0:case 11:case 15:Bo(8,m,i)}var x=m.child;if(x!==null)x.return=m,ye=x;else for(;ye!==null;){m=ye;var f=m.sibling,b=m.return;if(mj(m),m===d){ye=null;break}if(f!==null){f.return=b,ye=f;break}ye=b}}}var h=i.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bo(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ye=g;break e}ye=i.return}}var j=t.current;for(ye=j;ye!==null;){o=ye;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ye=y;else e:for(o=j;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xd(9,l)}}catch(M){ut(l,l.return,M)}if(l===o){ye=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ye=w;break e}ye=l.return}}if(qe=a,zn(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(Ud,t)}catch{}n=!0}return n}finally{Xe=r,Es.transition=s}}return!1}function Tf(t,s,r){s=Ei(r,s),s=tj(t,s,1),t=Nn(t,s,1),s=Vt(),t!==null&&(Pl(t,1,s),ns(t,s))}function ut(t,s,r){if(t.tag===3)Tf(t,t,r);else for(;s!==null;){if(s.tag===3){Tf(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_n===null||!_n.has(n))){t=Ei(r,t),t=sj(s,t,1),s=Nn(s,t,1),t=Vt(),s!==null&&(Pl(s,1,t),ns(s,t));break}}s=s.return}}function F5(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=Vt(),t.pingedLanes|=t.suspendedLanes&r,Et===t&&(At&r)===r&&(vt===4||vt===3&&(At&130023424)===At&&500>mt()-f0?xa(t,0):p0|=r),ns(t,s)}function wj(t,s){s===0&&(t.mode&1?(s=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):s=1);var r=Vt();t=$r(t,s),t!==null&&(Pl(t,s,r),ns(t,r))}function T5(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),wj(t,r)}function M5(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(s),wj(t,r)}var Nj;Nj=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||ss.current)Zt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Zt=!1,v5(t,s,r);Zt=!!(t.flags&131072)}else Zt=!1,at&&s.flags&1048576&&Sv(s,dd,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Mc(t,s),t=s.pendingProps;var a=_i(s,zt.current);ai(s,r),a=c0(null,s,n,t,a,r);var i=d0();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rs(n)?(i=!0,ld(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,n0(s),a.updater=Gd,s.stateNode=a,a._reactInternals=s,jx(s,n,t,r),s=_x(null,s,n,!0,i,r)):(s.tag=0,at&&i&&Xh(s),Ut(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Mc(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=L5(n),t=$s(n,t),a){case 0:s=Nx(null,s,n,t,r);break e;case 1:s=wf(null,s,n,t,r);break e;case 11:s=vf(null,s,n,t,r);break e;case 14:s=jf(null,s,n,$s(n.type,t),r);break e}throw Error(de(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:$s(n,a),Nx(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:$s(n,a),wf(t,s,n,a,r);case 3:e:{if(ij(s),t===null)throw Error(de(387));n=s.pendingProps,i=s.memoizedState,a=i.element,Mv(t,s),xd(s,n,null,r);var o=s.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=Ei(Error(de(423)),s),s=Nf(t,s,n,r,a);break e}else if(n!==a){a=Ei(Error(de(424)),s),s=Nf(t,s,n,r,a);break e}else for(xs=wn(s.stateNode.containerInfo.firstChild),hs=s,at=!0,Us=null,r=Fv(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ki(),n===a){s=Ir(t,s,r);break e}Ut(t,s,n,r)}s=s.child}return s;case 5:return Rv(s),t===null&&yx(s),n=s.type,a=s.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,xx(n,a)?o=null:i!==null&&xx(n,i)&&(s.flags|=32),aj(t,s),Ut(t,s,o,r),s.child;case 6:return t===null&&yx(s),null;case 13:return oj(t,s,r);case 4:return a0(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=Ci(s,null,n,r):Ut(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:$s(n,a),vf(t,s,n,a,r);case 7:return Ut(t,s,s.pendingProps,r),s.child;case 8:return Ut(t,s,s.pendingProps.children,r),s.child;case 12:return Ut(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,i=s.memoizedProps,o=a.value,et(ud,n._currentValue),n._currentValue=o,i!==null)if(Ks(i.value,o)){if(i.children===a.children&&!ss.current){s=Ir(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Rr(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),bx(i.return,r,s),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===s.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),bx(o,r,s),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===s){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ut(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,ai(s,r),a=Fs(a),n=n(a),s.flags|=1,Ut(t,s,n,r),s.child;case 14:return n=s.type,a=$s(n,s.pendingProps),a=$s(n.type,a),jf(t,s,n,a,r);case 15:return rj(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:$s(n,a),Mc(t,s),s.tag=1,rs(n)?(t=!0,ld(s)):t=!1,ai(s,r),ej(s,n,a),jx(s,n,a,r),_x(null,s,n,!0,t,r);case 19:return lj(t,s,r);case 22:return nj(t,s,r)}throw Error(de(156,s.tag))};function _j(t,s){return Xb(t,s)}function R5(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(t,s,r,n){return new R5(t,s,r,n)}function v0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L5(t){if(typeof t=="function")return v0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ih)return 11;if(t===zh)return 14}return 2}function Cn(t,s){var r=t.alternate;return r===null?(r=Ss(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Dc(t,s,r,n,a,i){var o=2;if(n=t,typeof t=="function")v0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wa:return ha(r.children,a,i,s);case $h:o=8,a|=8;break;case Vm:return t=Ss(12,r,s,a|2),t.elementType=Vm,t.lanes=i,t;case Hm:return t=Ss(13,r,s,a),t.elementType=Hm,t.lanes=i,t;case Qm:return t=Ss(19,r,s,a),t.elementType=Qm,t.lanes=i,t;case Rb:return Zd(r,a,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tb:o=10;break e;case Mb:o=9;break e;case Ih:o=11;break e;case zh:o=14;break e;case en:o=16,n=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return s=Ss(o,r,s,a),s.elementType=t,s.type=n,s.lanes=i,s}function ha(t,s,r,n){return t=Ss(7,t,n,s),t.lanes=r,t}function Zd(t,s,r,n){return t=Ss(22,t,n,s),t.elementType=Rb,t.lanes=r,t.stateNode={isHidden:!1},t}function nm(t,s,r){return t=Ss(6,t,null,s),t.lanes=r,t}function am(t,s,r){return s=Ss(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function D5(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function j0(t,s,r,n,a,i,o,l,c){return t=new D5(t,s,r,l,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Ss(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},n0(i),t}function O5(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ua,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function kj(t){if(!t)return Fn;t=t._reactInternals;e:{if(Fa(t)!==t||t.tag!==1)throw Error(de(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rs(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(de(171))}if(t.tag===1){var r=t.type;if(rs(r))return kv(t,r,s)}return s}function Cj(t,s,r,n,a,i,o,l,c){return t=j0(r,n,!0,t,a,i,o,l,c),t.context=kj(null),r=t.current,n=Vt(),a=kn(r),i=Rr(n,a),i.callback=s??null,Nn(r,i,a),t.current.lanes=a,Pl(t,a,n),ns(t,n),t}function eu(t,s,r,n){var a=s.current,i=Vt(),o=kn(a);return r=kj(r),s.context===null?s.context=r:s.pendingContext=r,s=Rr(i,o),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Nn(a,s,o),t!==null&&(Qs(t,a,o,i),Ac(t,a,o)),o}function jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mf(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function w0(t,s){Mf(t,s),(t=t.alternate)&&Mf(t,s)}function $5(){return null}var Sj=typeof reportError=="function"?reportError:function(t){console.error(t)};function N0(t){this._internalRoot=t}tu.prototype.render=N0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(de(409));eu(t,s,null,null)};tu.prototype.unmount=N0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ja(function(){eu(null,t,null,null)}),s[Or]=null}};function tu(t){this._internalRoot=t}tu.prototype.unstable_scheduleHydration=function(t){if(t){var s=nv();t={blockedOn:null,target:t,priority:s};for(var r=0;r<sn.length&&s!==0&&s<sn[r].priority;r++);sn.splice(r,0,t),r===0&&iv(t)}};function _0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rf(){}function I5(t,s,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=jd(o);i.call(d)}}var o=Cj(s,n,t,0,null,!1,!1,"",Rf);return t._reactRootContainer=o,t[Or]=o.current,sl(t.nodeType===8?t.parentNode:t),ja(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=jd(c);l.call(d)}}var c=j0(t,0,!1,null,null,!1,!1,"",Rf);return t._reactRootContainer=c,t[Or]=c.current,sl(t.nodeType===8?t.parentNode:t),ja(function(){eu(s,c,r,n)}),c}function ru(t,s,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=jd(o);l.call(c)}}eu(s,o,t,a)}else o=I5(r,s,t,a,n);return jd(o)}sv=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=_o(s.pendingLanes);r!==0&&(Uh(s,r|1),ns(s,mt()),!(qe&6)&&(Pi=mt()+500,zn()))}break;case 13:ja(function(){var n=$r(t,1);if(n!==null){var a=Vt();Qs(n,t,1,a)}}),w0(t,1)}};Wh=function(t){if(t.tag===13){var s=$r(t,134217728);if(s!==null){var r=Vt();Qs(s,t,134217728,r)}w0(t,134217728)}};rv=function(t){if(t.tag===13){var s=kn(t),r=$r(t,s);if(r!==null){var n=Vt();Qs(r,t,s,n)}w0(t,s)}};nv=function(){return Xe};av=function(t,s){var r=Xe;try{return Xe=t,s()}finally{Xe=r}};rx=function(t,s,r){switch(s){case"input":if(Gm(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=Qd(n);if(!a)throw Error(de(90));Db(n),Gm(n,a)}}}break;case"textarea":$b(t,r);break;case"select":s=r.value,s!=null&&ti(t,!!r.multiple,s,!1)}};Vb=g0;Hb=ja;var z5={usingClientEntryPoint:!1,Events:[Fl,Ka,Qd,Ub,Wb,g0]},lo={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B5={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yb(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||$5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Ud=lc.inject(B5),ur=lc}catch{}}bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z5;bs.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_0(s))throw Error(de(200));return O5(t,s,null,r)};bs.createRoot=function(t,s){if(!_0(t))throw Error(de(299));var r=!1,n="",a=Sj;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=j0(t,1,!1,null,null,r,!1,n,a),t[Or]=s.current,sl(t.nodeType===8?t.parentNode:t),new N0(s)};bs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Yb(s),t=t===null?null:t.stateNode,t};bs.flushSync=function(t){return ja(t)};bs.hydrate=function(t,s,r){if(!su(s))throw Error(de(200));return ru(null,t,s,!0,r)};bs.hydrateRoot=function(t,s,r){if(!_0(t))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Sj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),s=Cj(s,null,t,1,r??null,a,!1,i,o),t[Or]=s.current,sl(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new tu(s)};bs.render=function(t,s,r){if(!su(s))throw Error(de(200));return ru(null,t,s,!1,r)};bs.unmountComponentAtNode=function(t){if(!su(t))throw Error(de(40));return t._reactRootContainer?(ja(function(){ru(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};bs.unstable_batchedUpdates=g0;bs.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!su(r))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return ru(t,s,r,!1,n)};bs.version="18.3.1-next-f1338f8080-20240426";function Ej(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ej)}catch(t){console.error(t)}}Ej(),Eb.exports=bs;var Bi=Eb.exports;const q5=fb(Bi);var Pj,Lf=Bi;Pj=Lf.createRoot,Lf.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ul.apply(this,arguments)}var fn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fn||(fn={}));const Df="popstate";function U5(t){t===void 0&&(t={});function s(n,a){let{pathname:i,search:o,hash:l}=n.location;return Dx("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:wd(a)}return V5(s,r,null,t)}function xt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function k0(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function W5(){return Math.random().toString(36).substr(2,8)}function Of(t,s){return{usr:t.state,key:t.key,idx:s}}function Dx(t,s,r,n){return r===void 0&&(r=null),ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?qi(s):s,{state:r,key:s&&s.key||n||W5()})}function wd(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function qi(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function V5(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=fn.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(ul({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function x(){l=fn.Pop;let v=m(),g=v==null?null:v-d;d=v,c&&c({action:l,location:p.location,delta:g})}function f(v,g){l=fn.Push;let j=Dx(p.location,v,g);d=m()+1;let y=Of(j,d),w=p.createHref(j);try{o.pushState(y,"",w)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(w)}i&&c&&c({action:l,location:p.location,delta:1})}function b(v,g){l=fn.Replace;let j=Dx(p.location,v,g);d=m();let y=Of(j,d),w=p.createHref(j);o.replaceState(y,"",w),i&&c&&c({action:l,location:p.location,delta:0})}function h(v){let g=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof v=="string"?v:wd(v);return j=j.replace(/ $/,"%20"),xt(g,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,g)}let p={get action(){return l},get location(){return t(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Df,x),c=v,()=>{a.removeEventListener(Df,x),c=null}},createHref(v){return s(a,v)},createURL:h,encodeLocation(v){let g=h(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:b,go(v){return o.go(v)}};return p}var $f;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($f||($f={}));function H5(t,s,r){return r===void 0&&(r="/"),Q5(t,s,r)}function Q5(t,s,r,n){let a=typeof s=="string"?qi(s):s,i=C0(a.pathname||"/",r);if(i==null)return null;let o=Aj(t);K5(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=ik(i);l=rk(o[c],d)}return l}function Aj(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Sn([n,c.relativePath]),m=r.concat(c);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Aj(i.children,s,m,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:tk(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Fj(i.path))a(i,o,c)}),s}function Fj(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Fj(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function K5(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:sk(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Y5=/^:[\w-]+$/,G5=3,X5=2,J5=1,Z5=10,ek=-2,If=t=>t==="*";function tk(t,s){let r=t.split("/"),n=r.length;return r.some(If)&&(n+=ek),s&&(n+=X5),r.filter(a=>!If(a)).reduce((a,i)=>a+(Y5.test(i)?G5:i===""?J5:Z5),n)}function sk(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function rk(t,s,r){let{routesMeta:n}=t,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,m=i==="/"?s:s.slice(i.length)||"/",x=nk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),f=c.route;if(!x)return null;Object.assign(a,x.params),o.push({params:a,pathname:Sn([i,x.pathname]),pathnameBase:uk(Sn([i,x.pathnameBase])),route:f}),x.pathnameBase!=="/"&&(i=Sn([i,x.pathnameBase]))}return o}function nk(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=ak(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,m,x)=>{let{paramName:f,isOptional:b}=m;if(f==="*"){let p=l[x]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[x];return b&&!h?d[f]=void 0:d[f]=(h||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function ak(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),k0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function ik(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return k0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function C0(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lk=t=>ok.test(t);function ck(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?qi(t):t,i;if(r)if(lk(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),k0(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=zf(r.substring(1),"/"):i=zf(r,s)}else i=s;return{pathname:i,search:mk(n),hash:xk(a)}}function zf(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function im(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dk(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function S0(t,s){let r=dk(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function E0(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=qi(t):(a=ul({},t),xt(!a.pathname||!a.pathname.includes("?"),im("?","pathname","search",a)),xt(!a.pathname||!a.pathname.includes("#"),im("#","pathname","hash",a)),xt(!a.search||!a.search.includes("#"),im("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let x=s.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),x-=1;a.pathname=f.join("/")}l=x>=0?s[x]:"/"}let c=ck(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Sn=t=>t.join("/").replace(/\/\/+/g,"/"),uk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Tj=["post","put","patch","delete"];new Set(Tj);const pk=["get",...Tj];new Set(pk);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ml.apply(this,arguments)}const P0=u.createContext(null),fk=u.createContext(null),Bn=u.createContext(null),nu=u.createContext(null),Wr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Mj=u.createContext(null);function gk(t,s){let{relative:r}=s===void 0?{}:s;Ui()||xt(!1);let{basename:n,navigator:a}=u.useContext(Bn),{hash:i,pathname:o,search:l}=Lj(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Sn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Ui(){return u.useContext(nu)!=null}function js(){return Ui()||xt(!1),u.useContext(nu).location}function Rj(t){u.useContext(Bn).static||u.useLayoutEffect(t)}function Be(){let{isDataRoute:t}=u.useContext(Wr);return t?Ak():yk()}function yk(){Ui()||xt(!1);let t=u.useContext(P0),{basename:s,future:r,navigator:n}=u.useContext(Bn),{matches:a}=u.useContext(Wr),{pathname:i}=js(),o=JSON.stringify(S0(a,r.v7_relativeSplatPath)),l=u.useRef(!1);return Rj(()=>{l.current=!0}),u.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let x=E0(d,JSON.parse(o),i,m.relative==="path");t==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:Sn([s,x.pathname])),(m.replace?n.replace:n.push)(x,m.state,m)},[s,n,o,i,t])}function Rs(){let{matches:t}=u.useContext(Wr),s=t[t.length-1];return s?s.params:{}}function Lj(t,s){let{relative:r}=s===void 0?{}:s,{future:n}=u.useContext(Bn),{matches:a}=u.useContext(Wr),{pathname:i}=js(),o=JSON.stringify(S0(a,n.v7_relativeSplatPath));return u.useMemo(()=>E0(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function bk(t,s){return vk(t,s)}function vk(t,s,r,n){Ui()||xt(!1);let{navigator:a}=u.useContext(Bn),{matches:i}=u.useContext(Wr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=js(),m;if(s){var x;let v=typeof s=="string"?qi(s):s;c==="/"||(x=v.pathname)!=null&&x.startsWith(c)||xt(!1),m=v}else m=d;let f=m.pathname||"/",b=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");b="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let h=H5(t,{pathname:b}),p=kk(h&&h.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Sn([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Sn([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return s&&p?u.createElement(nu.Provider,{value:{location:ml({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:fn.Pop}},p):p}function jk(){let t=Pk(),s=hk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},s),r?u.createElement("pre",{style:a},r):null,null)}const wk=u.createElement(jk,null);class Nk extends u.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?u.createElement(Wr.Provider,{value:this.props.routeContext},u.createElement(Mj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _k(t){let{routeContext:s,match:r,children:n}=t,a=u.useContext(P0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Wr.Provider,{value:s},n)}function kk(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let m=o.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);m>=0||xt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<o.length;m++){let x=o[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=m),x.route.id){let{loaderData:f,errors:b}=r,h=x.route.loader&&f[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||h){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,x,f)=>{let b,h=!1,p=null,v=null;r&&(b=l&&x.route.id?l[x.route.id]:void 0,p=x.route.errorElement||wk,c&&(d<0&&f===0?(Fk("route-fallback"),h=!0,v=null):d===f&&(h=!0,v=x.route.hydrateFallbackElement||null)));let g=s.concat(o.slice(0,f+1)),j=()=>{let y;return b?y=p:h?y=v:x.route.Component?y=u.createElement(x.route.Component,null):x.route.element?y=x.route.element:y=m,u.createElement(_k,{match:x,routeContext:{outlet:m,matches:g,isDataRoute:r!=null},children:y})};return r&&(x.route.ErrorBoundary||x.route.errorElement||f===0)?u.createElement(Nk,{location:r.location,revalidation:r.revalidation,component:p,error:b,children:j(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):j()},null)}var Dj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Dj||{}),Oj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Oj||{});function Ck(t){let s=u.useContext(P0);return s||xt(!1),s}function Sk(t){let s=u.useContext(fk);return s||xt(!1),s}function Ek(t){let s=u.useContext(Wr);return s||xt(!1),s}function $j(t){let s=Ek(),r=s.matches[s.matches.length-1];return r.route.id||xt(!1),r.route.id}function Pk(){var t;let s=u.useContext(Mj),r=Sk(),n=$j();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function Ak(){let{router:t}=Ck(Dj.UseNavigateStable),s=$j(Oj.UseNavigateStable),r=u.useRef(!1);return Rj(()=>{r.current=!0}),u.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,ml({fromRouteId:s},i)))},[t,s])}const Bf={};function Fk(t,s,r){Bf[t]||(Bf[t]=!0)}function Tk(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function es(t){let{to:s,replace:r,state:n,relative:a}=t;Ui()||xt(!1);let{future:i,static:o}=u.useContext(Bn),{matches:l}=u.useContext(Wr),{pathname:c}=js(),d=Be(),m=E0(s,S0(l,i.v7_relativeSplatPath),c,a==="path"),x=JSON.stringify(m);return u.useEffect(()=>d(JSON.parse(x),{replace:r,state:n,relative:a}),[d,x,a,r,n]),null}function ge(t){xt(!1)}function Mk(t){let{basename:s="/",children:r=null,location:n,navigationType:a=fn.Pop,navigator:i,static:o=!1,future:l}=t;Ui()&&xt(!1);let c=s.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:i,static:o,future:ml({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=qi(n));let{pathname:m="/",search:x="",hash:f="",state:b=null,key:h="default"}=n,p=u.useMemo(()=>{let v=C0(m,c);return v==null?null:{location:{pathname:v,search:x,hash:f,state:b,key:h},navigationType:a}},[c,m,x,f,b,h,a]);return p==null?null:u.createElement(Bn.Provider,{value:d},u.createElement(nu.Provider,{children:r,value:p}))}function Rk(t){let{children:s,location:r}=t;return bk(Ox(s),r)}new Promise(()=>{});function Ox(t,s){s===void 0&&(s=[]);let r=[];return u.Children.forEach(t,(n,a)=>{if(!u.isValidElement(n))return;let i=[...s,a];if(n.type===u.Fragment){r.push.apply(r,Ox(n.props.children,i));return}n.type!==ge&&xt(!1),!n.props.index||!n.props.children||xt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ox(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $x(){return $x=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$x.apply(this,arguments)}function Lk(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Dk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ok(t,s){return t.button===0&&(!s||s==="_self")&&!Dk(t)}function Ix(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let n=t[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function $k(t,s){let r=Ix(t);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(i=>{r.append(a,i)})}),r}const Ik=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zk="6";try{window.__reactRouterVersion=zk}catch{}const Bk="startTransition",qf=qd[Bk];function qk(t){let{basename:s,children:r,future:n,window:a}=t,i=u.useRef();i.current==null&&(i.current=U5({window:a,v5Compat:!0}));let o=i.current,[l,c]=u.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},m=u.useCallback(x=>{d&&qf?qf(()=>c(x)):c(x)},[c,d]);return u.useLayoutEffect(()=>o.listen(m),[o,m]),u.useEffect(()=>Tk(n),[n]),u.createElement(Mk,{basename:s,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Uk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X=u.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:x}=s,f=Lk(s,Ik),{basename:b}=u.useContext(Bn),h,p=!1;if(typeof d=="string"&&Wk.test(d)&&(h=d,Uk))try{let y=new URL(window.location.href),w=d.startsWith("//")?new URL(y.protocol+d):new URL(d),M=C0(w.pathname,b);w.origin===y.origin&&M!=null?d=M+w.search+w.hash:p=!0}catch{}let v=gk(d,{relative:a}),g=Vk(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:x});function j(y){n&&n(y),y.defaultPrevented||g(y)}return u.createElement("a",$x({},f,{href:h||v,onClick:p||i?n:j,ref:r,target:c}))});var Uf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uf||(Uf={}));var Wf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wf||(Wf={}));function Vk(t,s){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=s===void 0?{}:s,c=Be(),d=js(),m=Lj(t,{relative:o});return u.useCallback(x=>{if(Ok(x,r)){x.preventDefault();let f=n!==void 0?n:wd(d)===wd(m);c(t,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,m,n,a,r,t,i,o,l])}function ct(t){let s=u.useRef(Ix(t)),r=u.useRef(!1),n=js(),a=u.useMemo(()=>$k(n.search,r.current?null:s.current),[n.search]),i=Be(),o=u.useCallback((l,c)=>{const d=Ix(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}var Wi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hk={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},nn,Ah,ab,Qk=(ab=class{constructor(){we(this,nn,Hk);we(this,Ah,!1)}setTimeoutProvider(t){pe(this,nn,t)}setTimeout(t,s){return Y(this,nn).setTimeout(t,s)}clearTimeout(t){Y(this,nn).clearTimeout(t)}setInterval(t,s){return Y(this,nn).setInterval(t,s)}clearInterval(t){Y(this,nn).clearInterval(t)}},nn=new WeakMap,Ah=new WeakMap,ab),sa=new Qk;function Kk(t){setTimeout(t,0)}var wa=typeof window>"u"||"Deno"in globalThis;function Wt(){}function Yk(t,s){return typeof t=="function"?t(s):t}function zx(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ij(t,s){return Math.max(t+(s||0)-Date.now(),0)}function En(t,s){return typeof t=="function"?t(s):t}function Ns(t,s){return typeof t=="function"?t(s):t}function Vf(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(s.queryHash!==A0(o,s.options))return!1}else if(!xl(s.queryKey,o))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||i&&!i(s))}function Hf(t,s){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Na(s.options.mutationKey)!==Na(i))return!1}else if(!xl(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function A0(t,s){return((s==null?void 0:s.queryKeyHashFn)||Na)(t)}function Na(t){return JSON.stringify(t,(s,r)=>Bx(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function xl(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>xl(t[r],s[r])):!1}var Gk=Object.prototype.hasOwnProperty;function zj(t,s,r=0){if(t===s)return t;if(r>500)return s;const n=Qf(t)&&Qf(s);if(!n&&!(Bx(t)&&Bx(s)))return s;const i=(n?t:Object.keys(t)).length,o=n?s:Object.keys(s),l=o.length,c=n?new Array(l):{};let d=0;for(let m=0;m<l;m++){const x=n?m:o[m],f=t[x],b=s[x];if(f===b){c[x]=f,(n?m<i:Gk.call(t,x))&&d++;continue}if(f===null||b===null||typeof f!="object"||typeof b!="object"){c[x]=b;continue}const h=zj(f,b,r+1);c[x]=h,h===f&&d++}return i===l&&d===i?t:c}function Nd(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Qf(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Bx(t){if(!Kf(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Kf(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Kf(t){return Object.prototype.toString.call(t)==="[object Object]"}function Xk(t){return new Promise(s=>{sa.setTimeout(s,t)})}function qx(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?zj(t,s):s}function Jk(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function Zk(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var F0=Symbol();function Bj(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===F0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function T0(t,s){return typeof t=="function"?t(...s):!!t}function e6(t,s,r){let n=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??(a=s()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),t}var na,an,ui,ib,t6=(ib=class extends Wi{constructor(){super();we(this,na);we(this,an);we(this,ui);pe(this,ui,s=>{if(!wa&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Y(this,an)||this.setEventListener(Y(this,ui))}onUnsubscribe(){var s;this.hasListeners()||((s=Y(this,an))==null||s.call(this),pe(this,an,void 0))}setEventListener(s){var r;pe(this,ui,s),(r=Y(this,an))==null||r.call(this),pe(this,an,s(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(s){Y(this,na)!==s&&(pe(this,na,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof Y(this,na)=="boolean"?Y(this,na):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},na=new WeakMap,an=new WeakMap,ui=new WeakMap,ib),M0=new t6;function Ux(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var s6=Kk;function r6(){let t=[],s=0,r=l=>{l()},n=l=>{l()},a=s6;const i=l=>{s?t.push(l):a(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var bt=r6(),mi,on,xi,ob,n6=(ob=class extends Wi{constructor(){super();we(this,mi,!0);we(this,on);we(this,xi);pe(this,xi,s=>{if(!wa&&window.addEventListener){const r=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Y(this,on)||this.setEventListener(Y(this,xi))}onUnsubscribe(){var s;this.hasListeners()||((s=Y(this,on))==null||s.call(this),pe(this,on,void 0))}setEventListener(s){var r;pe(this,xi,s),(r=Y(this,on))==null||r.call(this),pe(this,on,s(this.setOnline.bind(this)))}setOnline(s){Y(this,mi)!==s&&(pe(this,mi,s),this.listeners.forEach(n=>{n(s)}))}isOnline(){return Y(this,mi)}},mi=new WeakMap,on=new WeakMap,xi=new WeakMap,ob),_d=new n6;function a6(t){return Math.min(1e3*2**t,3e4)}function qj(t){return(t??"online")==="online"?_d.isOnline():!0}var Wx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Uj(t){let s=!1,r=0,n;const a=Ux(),i=()=>a.status!=="pending",o=p=>{var v;if(!i()){const g=new Wx(p);f(g),(v=t.onCancel)==null||v.call(t,g)}},l=()=>{s=!0},c=()=>{s=!1},d=()=>M0.isFocused()&&(t.networkMode==="always"||_d.isOnline())&&t.canRun(),m=()=>qj(t.networkMode)&&t.canRun(),x=p=>{i()||(n==null||n(),a.resolve(p))},f=p=>{i()||(n==null||n(),a.reject(p))},b=()=>new Promise(p=>{var v;n=g=>{(i()||d())&&p(g)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;n=void 0,i()||(p=t.onContinue)==null||p.call(t)}),h=()=>{if(i())return;let p;const v=r===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(g){p=Promise.reject(g)}Promise.resolve(p).then(x).catch(g=>{var T;if(i())return;const j=t.retry??(wa?0:3),y=t.retryDelay??a6,w=typeof y=="function"?y(r,g):y,M=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,g);if(s||!M){f(g);return}r++,(T=t.onFail)==null||T.call(t,r,g),Xk(w).then(()=>d()?void 0:b()).then(()=>{s?f(g):h()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?h():b().then(h),a)}}var aa,lb,Wj=(lb=class{constructor(){we(this,aa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zx(this.gcTime)&&pe(this,aa,sa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wa?1/0:5*60*1e3))}clearGcTimeout(){Y(this,aa)&&(sa.clearTimeout(Y(this,aa)),pe(this,aa,void 0))}},aa=new WeakMap,lb),ia,hi,ws,oa,kt,Nl,la,Is,kr,cb,i6=(cb=class extends Wj{constructor(s){super();we(this,Is);we(this,ia);we(this,hi);we(this,ws);we(this,oa);we(this,kt);we(this,Nl);we(this,la);pe(this,la,!1),pe(this,Nl,s.defaultOptions),this.setOptions(s.options),this.observers=[],pe(this,oa,s.client),pe(this,ws,Y(this,oa).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,pe(this,ia,Gf(this.options)),this.state=s.state??Y(this,ia),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=Y(this,kt))==null?void 0:s.promise}setOptions(s){if(this.options={...Y(this,Nl),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Gf(this.options);r.data!==void 0&&(this.setState(Yf(r.data,r.dataUpdatedAt)),pe(this,ia,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,ws).remove(this)}setData(s,r){const n=qx(this.state.data,s,this.options);return Le(this,Is,kr).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(s,r){Le(this,Is,kr).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var n,a;const r=(n=Y(this,kt))==null?void 0:n.promise;return(a=Y(this,kt))==null||a.cancel(s),r?r.then(Wt).catch(Wt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,ia))}isActive(){return this.observers.some(s=>Ns(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===F0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>En(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Ij(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(n=>n.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=Y(this,kt))==null||r.continue()}onOnline(){var r;const s=this.observers.find(n=>n.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=Y(this,kt))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),Y(this,ws).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(Y(this,kt)&&(Y(this,la)?Y(this,kt).cancel({revert:!0}):Y(this,kt).cancelRetry()),this.scheduleGc()),Y(this,ws).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Le(this,Is,kr).call(this,{type:"invalidate"})}async fetch(s,r){var c,d,m,x,f,b,h,p,v,g,j,y;if(this.state.fetchStatus!=="idle"&&((c=Y(this,kt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,kt))return Y(this,kt).continueRetry(),Y(this,kt).promise}if(s&&this.setOptions(s),!this.options.queryFn){const w=this.observers.find(M=>M.options.queryFn);w&&this.setOptions(w.options)}const n=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(pe(this,la,!0),n.signal)})},i=()=>{const w=Bj(this.options,r),T=(()=>{const N={client:Y(this,oa),queryKey:this.queryKey,meta:this.meta};return a(N),N})();return pe(this,la,!1),this.options.persister?this.options.persister(w,T,this):w(T)},l=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Y(this,oa),state:this.state,fetchFn:i};return a(w),w})();(d=this.options.behavior)==null||d.onFetch(l,this),pe(this,hi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&Le(this,Is,kr).call(this,{type:"fetch",meta:(x=l.fetchOptions)==null?void 0:x.meta}),pe(this,kt,Uj({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:w=>{w instanceof Wx&&w.revert&&this.setState({...Y(this,hi),fetchStatus:"idle"}),n.abort()},onFail:(w,M)=>{Le(this,Is,kr).call(this,{type:"failed",failureCount:w,error:M})},onPause:()=>{Le(this,Is,kr).call(this,{type:"pause"})},onContinue:()=>{Le(this,Is,kr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const w=await Y(this,kt).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(b=(f=Y(this,ws).config).onSuccess)==null||b.call(f,w,this),(p=(h=Y(this,ws).config).onSettled)==null||p.call(h,w,this.state.error,this),w}catch(w){if(w instanceof Wx){if(w.silent)return Y(this,kt).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw Le(this,Is,kr).call(this,{type:"error",error:w}),(g=(v=Y(this,ws).config).onError)==null||g.call(v,w,this),(y=(j=Y(this,ws).config).onSettled)==null||y.call(j,this.state.data,w,this),w}finally{this.scheduleGc()}}},ia=new WeakMap,hi=new WeakMap,ws=new WeakMap,oa=new WeakMap,kt=new WeakMap,Nl=new WeakMap,la=new WeakMap,Is=new WeakSet,kr=function(s){const r=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Vj(n.data,this.options),fetchMeta:s.meta??null};case"success":const a={...n,...Yf(s.data,s.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return pe(this,hi,s.manual?a:void 0),a;case"error":const i=s.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=r(this.state),bt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Y(this,ws).notify({query:this,type:"updated",action:s})})},cb);function Vj(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qj(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Yf(t,s){return{data:t,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Gf(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yt,ze,_l,Bt,ca,pi,Er,ln,kl,fi,gi,da,ua,cn,yi,Qe,Co,Vx,Hx,Qx,Kx,Yx,Gx,Xx,Hj,db,o6=(db=class extends Wi{constructor(s,r){super();we(this,Qe);we(this,Yt);we(this,ze);we(this,_l);we(this,Bt);we(this,ca);we(this,pi);we(this,Er);we(this,ln);we(this,kl);we(this,fi);we(this,gi);we(this,da);we(this,ua);we(this,cn);we(this,yi,new Set);this.options=r,pe(this,Yt,s),pe(this,ln,null),pe(this,Er,Ux()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,ze).addObserver(this),Xf(Y(this,ze),this.options)?Le(this,Qe,Co).call(this):this.updateResult(),Le(this,Qe,Kx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jx(Y(this,ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jx(Y(this,ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Le(this,Qe,Yx).call(this),Le(this,Qe,Gx).call(this),Y(this,ze).removeObserver(this)}setOptions(s){const r=this.options,n=Y(this,ze);if(this.options=Y(this,Yt).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ns(this.options.enabled,Y(this,ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Le(this,Qe,Xx).call(this),Y(this,ze).setOptions(this.options),r._defaulted&&!Nd(this.options,r)&&Y(this,Yt).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,ze),observer:this});const a=this.hasListeners();a&&Jf(Y(this,ze),n,this.options,r)&&Le(this,Qe,Co).call(this),this.updateResult(),a&&(Y(this,ze)!==n||Ns(this.options.enabled,Y(this,ze))!==Ns(r.enabled,Y(this,ze))||En(this.options.staleTime,Y(this,ze))!==En(r.staleTime,Y(this,ze)))&&Le(this,Qe,Vx).call(this);const i=Le(this,Qe,Hx).call(this);a&&(Y(this,ze)!==n||Ns(this.options.enabled,Y(this,ze))!==Ns(r.enabled,Y(this,ze))||i!==Y(this,cn))&&Le(this,Qe,Qx).call(this,i)}getOptimisticResult(s){const r=Y(this,Yt).getQueryCache().build(Y(this,Yt),s),n=this.createResult(r,s);return c6(this,n)&&(pe(this,Bt,n),pe(this,pi,this.options),pe(this,ca,Y(this,ze).state)),n}getCurrentResult(){return Y(this,Bt)}trackResult(s,r){return new Proxy(s,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Y(this,Er).status==="pending"&&Y(this,Er).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(s){Y(this,yi).add(s)}getCurrentQuery(){return Y(this,ze)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=Y(this,Yt).defaultQueryOptions(s),n=Y(this,Yt).getQueryCache().build(Y(this,Yt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(s){return Le(this,Qe,Co).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,Bt)))}createResult(s,r){var L;const n=Y(this,ze),a=this.options,i=Y(this,Bt),o=Y(this,ca),l=Y(this,pi),d=s!==n?s.state:Y(this,_l),{state:m}=s;let x={...m},f=!1,b;if(r._optimisticResults){const k=this.hasListeners(),S=!k&&Xf(s,r),F=k&&Jf(s,n,r,a);(S||F)&&(x={...x,...Vj(m.data,s.options)}),r._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:h,errorUpdatedAt:p,status:v}=x;b=x.data;let g=!1;if(r.placeholderData!==void 0&&b===void 0&&v==="pending"){let k;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(k=i.data,g=!0):k=typeof r.placeholderData=="function"?r.placeholderData((L=Y(this,gi))==null?void 0:L.state.data,Y(this,gi)):r.placeholderData,k!==void 0&&(v="success",b=qx(i==null?void 0:i.data,k,r),f=!0)}if(r.select&&b!==void 0&&!g)if(i&&b===(o==null?void 0:o.data)&&r.select===Y(this,kl))b=Y(this,fi);else try{pe(this,kl,r.select),b=r.select(b),b=qx(i==null?void 0:i.data,b,r),pe(this,fi,b),pe(this,ln,null)}catch(k){pe(this,ln,k)}Y(this,ln)&&(h=Y(this,ln),b=Y(this,fi),p=Date.now(),v="error");const j=x.fetchStatus==="fetching",y=v==="pending",w=v==="error",M=y&&j,T=b!==void 0,E={status:v,fetchStatus:x.fetchStatus,isPending:y,isSuccess:v==="success",isError:w,isInitialLoading:M,isLoading:M,data:b,dataUpdatedAt:x.dataUpdatedAt,error:h,errorUpdatedAt:p,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>d.dataUpdateCount||x.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!y,isLoadingError:w&&!T,isPaused:x.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&T,isStale:R0(s,r),refetch:this.refetch,promise:Y(this,Er),isEnabled:Ns(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const k=E.data!==void 0,S=E.status==="error"&&!k,F=H=>{S?H.reject(E.error):k&&H.resolve(E.data)},P=()=>{const H=pe(this,Er,E.promise=Ux());F(H)},I=Y(this,Er);switch(I.status){case"pending":s.queryHash===n.queryHash&&F(I);break;case"fulfilled":(S||E.data!==I.value)&&P();break;case"rejected":(!S||E.error!==I.reason)&&P();break}}return E}updateResult(){const s=Y(this,Bt),r=this.createResult(Y(this,ze),this.options);if(pe(this,ca,Y(this,ze).state),pe(this,pi,this.options),Y(this,ca).data!==void 0&&pe(this,gi,Y(this,ze)),Nd(r,s))return;pe(this,Bt,r);const n=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Y(this,yi).size)return!0;const o=new Set(i??Y(this,yi));return this.options.throwOnError&&o.add("error"),Object.keys(Y(this,Bt)).some(l=>{const c=l;return Y(this,Bt)[c]!==s[c]&&o.has(c)})};Le(this,Qe,Hj).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Le(this,Qe,Kx).call(this)}},Yt=new WeakMap,ze=new WeakMap,_l=new WeakMap,Bt=new WeakMap,ca=new WeakMap,pi=new WeakMap,Er=new WeakMap,ln=new WeakMap,kl=new WeakMap,fi=new WeakMap,gi=new WeakMap,da=new WeakMap,ua=new WeakMap,cn=new WeakMap,yi=new WeakMap,Qe=new WeakSet,Co=function(s){Le(this,Qe,Xx).call(this);let r=Y(this,ze).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Wt)),r},Vx=function(){Le(this,Qe,Yx).call(this);const s=En(this.options.staleTime,Y(this,ze));if(wa||Y(this,Bt).isStale||!zx(s))return;const n=Ij(Y(this,Bt).dataUpdatedAt,s)+1;pe(this,da,sa.setTimeout(()=>{Y(this,Bt).isStale||this.updateResult()},n))},Hx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,ze)):this.options.refetchInterval)??!1},Qx=function(s){Le(this,Qe,Gx).call(this),pe(this,cn,s),!(wa||Ns(this.options.enabled,Y(this,ze))===!1||!zx(Y(this,cn))||Y(this,cn)===0)&&pe(this,ua,sa.setInterval(()=>{(this.options.refetchIntervalInBackground||M0.isFocused())&&Le(this,Qe,Co).call(this)},Y(this,cn)))},Kx=function(){Le(this,Qe,Vx).call(this),Le(this,Qe,Qx).call(this,Le(this,Qe,Hx).call(this))},Yx=function(){Y(this,da)&&(sa.clearTimeout(Y(this,da)),pe(this,da,void 0))},Gx=function(){Y(this,ua)&&(sa.clearInterval(Y(this,ua)),pe(this,ua,void 0))},Xx=function(){const s=Y(this,Yt).getQueryCache().build(Y(this,Yt),this.options);if(s===Y(this,ze))return;const r=Y(this,ze);pe(this,ze,s),pe(this,_l,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},Hj=function(s){bt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(Y(this,Bt))}),Y(this,Yt).getQueryCache().notify({query:Y(this,ze),type:"observerResultsUpdated"})})},db);function l6(t,s){return Ns(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Xf(t,s){return l6(t,s)||t.state.data!==void 0&&Jx(t,s,s.refetchOnMount)}function Jx(t,s,r){if(Ns(s.enabled,t)!==!1&&En(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&R0(t,s)}return!1}function Jf(t,s,r,n){return(t!==s||Ns(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&R0(t,r)}function R0(t,s){return Ns(s.enabled,t)!==!1&&t.isStaleByTime(En(s.staleTime,t))}function c6(t,s){return!Nd(t.getCurrentResult(),s)}function Zf(t){return{onFetch:(s,r)=>{var m,x,f,b,h;const n=s.options,a=(f=(x=(m=s.fetchOptions)==null?void 0:m.meta)==null?void 0:x.fetchMore)==null?void 0:f.direction,i=((b=s.state.data)==null?void 0:b.pages)||[],o=((h=s.state.data)==null?void 0:h.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const v=y=>{e6(y,()=>s.signal,()=>p=!0)},g=Bj(s.options,s.fetchOptions),j=async(y,w,M)=>{if(p)return Promise.reject();if(w==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const S={client:s.client,queryKey:s.queryKey,pageParam:w,direction:M?"backward":"forward",meta:s.options.meta};return v(S),S})(),E=await g(N),{maxPages:L}=s.options,k=M?Zk:Jk;return{pages:k(y.pages,E,L),pageParams:k(y.pageParams,w,L)}};if(a&&i.length){const y=a==="backward",w=y?d6:eg,M={pages:i,pageParams:o},T=w(n,M);l=await j(M,T,y)}else{const y=t??i.length;do{const w=c===0?o[0]??n.initialPageParam:eg(n,l);if(c>0&&w==null)break;l=await j(l,w),c++}while(c<y)}return l};s.options.persister?s.fetchFn=()=>{var p,v;return(v=(p=s.options).persister)==null?void 0:v.call(p,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function eg(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function d6(t,{pages:s,pageParams:r}){var n;return s.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,s[0],s,r[0],r):void 0}var Cl,nr,qt,ma,ar,Jr,ub,u6=(ub=class extends Wj{constructor(s){super();we(this,ar);we(this,Cl);we(this,nr);we(this,qt);we(this,ma);pe(this,Cl,s.client),this.mutationId=s.mutationId,pe(this,qt,s.mutationCache),pe(this,nr,[]),this.state=s.state||Qj(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Y(this,nr).includes(s)||(Y(this,nr).push(s),this.clearGcTimeout(),Y(this,qt).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){pe(this,nr,Y(this,nr).filter(r=>r!==s)),this.scheduleGc(),Y(this,qt).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Y(this,nr).length||(this.state.status==="pending"?this.scheduleGc():Y(this,qt).remove(this))}continue(){var s;return((s=Y(this,ma))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var o,l,c,d,m,x,f,b,h,p,v,g,j,y,w,M,T,N,E,L;const r=()=>{Le(this,ar,Jr).call(this,{type:"continue"})},n={client:Y(this,Cl),meta:this.options.meta,mutationKey:this.options.mutationKey};pe(this,ma,Uj({fn:()=>this.options.mutationFn?this.options.mutationFn(s,n):Promise.reject(new Error("No mutationFn found")),onFail:(k,S)=>{Le(this,ar,Jr).call(this,{type:"failed",failureCount:k,error:S})},onPause:()=>{Le(this,ar,Jr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,qt).canRun(this)}));const a=this.state.status==="pending",i=!Y(this,ma).canStart();try{if(a)r();else{Le(this,ar,Jr).call(this,{type:"pending",variables:s,isPaused:i}),await((l=(o=Y(this,qt).config).onMutate)==null?void 0:l.call(o,s,this,n));const S=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,s,n));S!==this.state.context&&Le(this,ar,Jr).call(this,{type:"pending",context:S,variables:s,isPaused:i})}const k=await Y(this,ma).start();return await((x=(m=Y(this,qt).config).onSuccess)==null?void 0:x.call(m,k,s,this.state.context,this,n)),await((b=(f=this.options).onSuccess)==null?void 0:b.call(f,k,s,this.state.context,n)),await((p=(h=Y(this,qt).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this,n)),await((g=(v=this.options).onSettled)==null?void 0:g.call(v,k,null,s,this.state.context,n)),Le(this,ar,Jr).call(this,{type:"success",data:k}),k}catch(k){try{await((y=(j=Y(this,qt).config).onError)==null?void 0:y.call(j,k,s,this.state.context,this,n))}catch(S){Promise.reject(S)}try{await((M=(w=this.options).onError)==null?void 0:M.call(w,k,s,this.state.context,n))}catch(S){Promise.reject(S)}try{await((N=(T=Y(this,qt).config).onSettled)==null?void 0:N.call(T,void 0,k,this.state.variables,this.state.context,this,n))}catch(S){Promise.reject(S)}try{await((L=(E=this.options).onSettled)==null?void 0:L.call(E,void 0,k,s,this.state.context,n))}catch(S){Promise.reject(S)}throw Le(this,ar,Jr).call(this,{type:"error",error:k}),k}finally{Y(this,qt).runNext(this)}}},Cl=new WeakMap,nr=new WeakMap,qt=new WeakMap,ma=new WeakMap,ar=new WeakSet,Jr=function(s){const r=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),bt.batch(()=>{Y(this,nr).forEach(n=>{n.onMutationUpdate(s)}),Y(this,qt).notify({mutation:this,type:"updated",action:s})})},ub);function Qj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pr,zs,Sl,mb,m6=(mb=class extends Wi{constructor(s={}){super();we(this,Pr);we(this,zs);we(this,Sl);this.config=s,pe(this,Pr,new Set),pe(this,zs,new Map),pe(this,Sl,0)}build(s,r,n){const a=new u6({client:s,mutationCache:this,mutationId:++Vl(this,Sl)._,options:s.defaultMutationOptions(r),state:n});return this.add(a),a}add(s){Y(this,Pr).add(s);const r=cc(s);if(typeof r=="string"){const n=Y(this,zs).get(r);n?n.push(s):Y(this,zs).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(Y(this,Pr).delete(s)){const r=cc(s);if(typeof r=="string"){const n=Y(this,zs).get(r);if(n)if(n.length>1){const a=n.indexOf(s);a!==-1&&n.splice(a,1)}else n[0]===s&&Y(this,zs).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=cc(s);if(typeof r=="string"){const n=Y(this,zs).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){var n;const r=cc(s);if(typeof r=="string"){const a=(n=Y(this,zs).get(r))==null?void 0:n.find(i=>i!==s&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){bt.batch(()=>{Y(this,Pr).forEach(s=>{this.notify({type:"removed",mutation:s})}),Y(this,Pr).clear(),Y(this,zs).clear()})}getAll(){return Array.from(Y(this,Pr))}find(s){const r={exact:!0,...s};return this.getAll().find(n=>Hf(r,n))}findAll(s={}){return this.getAll().filter(r=>Hf(s,r))}notify(s){bt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return bt.batch(()=>Promise.all(s.map(r=>r.continue().catch(Wt))))}},Pr=new WeakMap,zs=new WeakMap,Sl=new WeakMap,mb);function cc(t){var s;return(s=t.options.scope)==null?void 0:s.id}var Ar,dn,Gt,Fr,Lr,Oc,Zx,xb,x6=(xb=class extends Wi{constructor(r,n){super();we(this,Lr);we(this,Ar);we(this,dn);we(this,Gt);we(this,Fr);pe(this,Ar,r),this.setOptions(n),this.bindMethods(),Le(this,Lr,Oc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=Y(this,Ar).defaultMutationOptions(r),Nd(this.options,n)||Y(this,Ar).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Y(this,Gt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Na(n.mutationKey)!==Na(this.options.mutationKey)?this.reset():((a=Y(this,Gt))==null?void 0:a.state.status)==="pending"&&Y(this,Gt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Y(this,Gt))==null||r.removeObserver(this)}onMutationUpdate(r){Le(this,Lr,Oc).call(this),Le(this,Lr,Zx).call(this,r)}getCurrentResult(){return Y(this,dn)}reset(){var r;(r=Y(this,Gt))==null||r.removeObserver(this),pe(this,Gt,void 0),Le(this,Lr,Oc).call(this),Le(this,Lr,Zx).call(this)}mutate(r,n){var a;return pe(this,Fr,n),(a=Y(this,Gt))==null||a.removeObserver(this),pe(this,Gt,Y(this,Ar).getMutationCache().build(Y(this,Ar),this.options)),Y(this,Gt).addObserver(this),Y(this,Gt).execute(r)}},Ar=new WeakMap,dn=new WeakMap,Gt=new WeakMap,Fr=new WeakMap,Lr=new WeakSet,Oc=function(){var n;const r=((n=Y(this,Gt))==null?void 0:n.state)??Qj();pe(this,dn,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Zx=function(r){bt.batch(()=>{var n,a,i,o,l,c,d,m;if(Y(this,Fr)&&this.hasListeners()){const x=Y(this,dn).variables,f=Y(this,dn).context,b={client:Y(this,Ar),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=Y(this,Fr)).onSuccess)==null||a.call(n,r.data,x,f,b)}catch(h){Promise.reject(h)}try{(o=(i=Y(this,Fr)).onSettled)==null||o.call(i,r.data,null,x,f,b)}catch(h){Promise.reject(h)}}else if((r==null?void 0:r.type)==="error"){try{(c=(l=Y(this,Fr)).onError)==null||c.call(l,r.error,x,f,b)}catch(h){Promise.reject(h)}try{(m=(d=Y(this,Fr)).onSettled)==null||m.call(d,void 0,r.error,x,f,b)}catch(h){Promise.reject(h)}}}this.listeners.forEach(x=>{x(Y(this,dn))})})},xb),ir,hb,h6=(hb=class extends Wi{constructor(s={}){super();we(this,ir);this.config=s,pe(this,ir,new Map)}build(s,r,n){const a=r.queryKey,i=r.queryHash??A0(a,r);let o=this.get(i);return o||(o=new i6({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(r),state:n,defaultOptions:s.getQueryDefaults(a)}),this.add(o)),o}add(s){Y(this,ir).has(s.queryHash)||(Y(this,ir).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=Y(this,ir).get(s.queryHash);r&&(s.destroy(),r===s&&Y(this,ir).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){bt.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return Y(this,ir).get(s)}getAll(){return[...Y(this,ir).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(n=>Vf(r,n))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(n=>Vf(s,n)):r}notify(s){bt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){bt.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){bt.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},ir=new WeakMap,hb),dt,un,mn,bi,vi,xn,ji,wi,pb,p6=(pb=class{constructor(t={}){we(this,dt);we(this,un);we(this,mn);we(this,bi);we(this,vi);we(this,xn);we(this,ji);we(this,wi);pe(this,dt,t.queryCache||new h6),pe(this,un,t.mutationCache||new m6),pe(this,mn,t.defaultOptions||{}),pe(this,bi,new Map),pe(this,vi,new Map),pe(this,xn,0)}mount(){Vl(this,xn)._++,Y(this,xn)===1&&(pe(this,ji,M0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,dt).onFocus())})),pe(this,wi,_d.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,dt).onOnline())})))}unmount(){var t,s;Vl(this,xn)._--,Y(this,xn)===0&&((t=Y(this,ji))==null||t.call(this),pe(this,ji,void 0),(s=Y(this,wi))==null||s.call(this),pe(this,wi,void 0))}isFetching(t){return Y(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,un).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=Y(this,dt).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=Y(this,dt).build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(En(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return Y(this,dt).findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),a=Y(this,dt).get(n.queryHash),i=a==null?void 0:a.state.data,o=Yk(s,i);if(o!==void 0)return Y(this,dt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,s,r){return bt.batch(()=>Y(this,dt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=Y(this,dt).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=Y(this,dt);bt.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=Y(this,dt);return bt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=bt.batch(()=>Y(this,dt).findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(Wt).catch(Wt)}invalidateQueries(t,s={}){return bt.batch(()=>(Y(this,dt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=bt.batch(()=>Y(this,dt).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Wt)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Wt)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=Y(this,dt).build(this,s);return r.isStaleByTime(En(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Wt).catch(Wt)}fetchInfiniteQuery(t){return t.behavior=Zf(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Wt).catch(Wt)}ensureInfiniteQueryData(t){return t.behavior=Zf(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _d.isOnline()?Y(this,un).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,dt)}getMutationCache(){return Y(this,un)}getDefaultOptions(){return Y(this,mn)}setDefaultOptions(t){pe(this,mn,t)}setQueryDefaults(t,s){Y(this,bi).set(Na(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...Y(this,bi).values()],r={};return s.forEach(n=>{xl(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){Y(this,vi).set(Na(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...Y(this,vi).values()],r={};return s.forEach(n=>{xl(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...Y(this,mn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=A0(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===F0&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,mn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,dt).clear(),Y(this,un).clear()}},dt=new WeakMap,un=new WeakMap,mn=new WeakMap,bi=new WeakMap,vi=new WeakMap,xn=new WeakMap,ji=new WeakMap,wi=new WeakMap,pb),Kj=u.createContext(void 0),Ue=t=>{const s=u.useContext(Kj);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},f6=({client:t,children:s})=>(u.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Kj.Provider,{value:t,children:s})),Yj=u.createContext(!1),g6=()=>u.useContext(Yj);Yj.Provider;function y6(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var b6=u.createContext(y6()),v6=()=>u.useContext(b6),j6=(t,s,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?T0(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(s.isReset()||(t.retryOnMount=!1))},w6=t=>{u.useEffect(()=>{t.clearReset()},[t])},N6=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||T0(r,[t.error,n])),_6=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},k6=(t,s)=>t.isLoading&&t.isFetching&&!s,C6=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,tg=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function S6(t,s,r){var f,b,h,p;const n=g6(),a=v6(),i=Ue(),o=i.defaultQueryOptions(t);(b=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||b.call(f,o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",_6(o),j6(o,a,l),w6(a);const c=!i.getQueryCache().get(o.queryHash),[d]=u.useState(()=>new s(i,o)),m=d.getOptimisticResult(o),x=!n&&t.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(v=>{const g=x?d.subscribe(bt.batchCalls(v)):Wt;return d.updateResult(),g},[d,x]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),u.useEffect(()=>{d.setOptions(o)},[o,d]),C6(o,m))throw tg(o,d,a);if(N6({result:m,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw m.error;if((p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,o,m),o.experimental_prefetchInRender&&!wa&&k6(m,n)){const v=c?tg(o,d,a):l==null?void 0:l.promise;v==null||v.catch(Wt).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?m:d.trackResult(m)}function ue(t,s){return S6(t,o6)}function ce(t,s){const r=Ue(),[n]=u.useState(()=>new x6(r,t));u.useEffect(()=>{n.setOptions(t)},[n,t]);const a=u.useSyncExternalStore(u.useCallback(o=>n.subscribe(bt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=u.useCallback((o,l)=>{n.mutate(o,l).catch(Wt)},[n]);if(a.error&&T0(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const sg=t=>{let s;const r=new Set,n=(d,m)=>{const x=typeof d=="function"?d(s):d;if(!Object.is(x,s)){const f=s;s=m??(typeof x!="object"||x===null)?x:Object.assign({},s,x),r.forEach(b=>b(s,f))}},a=()=>s,l={setState:n,getState:a,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=s=t(n,a,l);return l},E6=t=>t?sg(t):sg,P6=t=>t;function A6(t,s=P6){const r=St.useSyncExternalStore(t.subscribe,St.useCallback(()=>s(t.getState()),[t,s]),St.useCallback(()=>s(t.getInitialState()),[t,s]));return St.useDebugValue(r),r}const rg=t=>{const s=E6(t),r=n=>A6(s,n);return Object.assign(r,s),r},Gj=t=>t?rg(t):rg;function F6(t,s){let r;try{r=t()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=r.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const eh=t=>s=>{try{const r=t(s);return r instanceof Promise?r:{then(n){return eh(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return eh(n)(r)}}}},T6=(t,s)=>(r,n,a)=>{let i={storage:F6(()=>localStorage),partialize:v=>v,version:0,merge:(v,g)=>({...g,...v}),...s},o=!1,l=0;const c=new Set,d=new Set;let m=i.storage;if(!m)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,a);const x=()=>{const v=i.partialize({...n()});return m.setItem(i.name,{state:v,version:i.version})},f=a.setState;a.setState=(v,g)=>(f(v,g),x());const b=t((...v)=>(r(...v),x()),n,a);a.getInitialState=()=>b;let h;const p=()=>{var v,g;if(!m)return;const j=++l;o=!1,c.forEach(w=>{var M;return w((M=n())!=null?M:b)});const y=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(v=n())!=null?v:b))||void 0;return eh(m.getItem.bind(m))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const M=i.migrate(w.state,w.version);return M instanceof Promise?M.then(T=>[!0,T]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var M;if(j!==l)return;const[T,N]=w;if(h=i.merge(N,(M=n())!=null?M:b),r(h,!0),T)return x()}).then(()=>{j===l&&(y==null||y(h,void 0),h=n(),o=!0,d.forEach(w=>w(h)))}).catch(w=>{j===l&&(y==null||y(void 0,w))})};return a.persist={setOptions:v=>{i={...i,...v},v.storage&&(m=v.storage)},clearStorage:()=>{m==null||m.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:v=>(c.add(v),()=>{c.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},i.skipHydration||p(),h||b},M6=T6;function Xj(t,s){return function(){return t.apply(s,arguments)}}const{toString:R6}=Object.prototype,{getPrototypeOf:L0}=Object,{iterator:au,toStringTag:Jj}=Symbol,iu=(t=>s=>{const r=R6.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Xs=t=>(t=t.toLowerCase(),s=>iu(s)===t),ou=t=>s=>typeof s===t,{isArray:Vi}=Array,Ai=ou("undefined");function Ml(t){return t!==null&&!Ai(t)&&t.constructor!==null&&!Ai(t.constructor)&&as(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zj=Xs("ArrayBuffer");function L6(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Zj(t.buffer),s}const D6=ou("string"),as=ou("function"),ew=ou("number"),Rl=t=>t!==null&&typeof t=="object",O6=t=>t===!0||t===!1,$c=t=>{if(iu(t)!=="object")return!1;const s=L0(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Jj in t)&&!(au in t)},$6=t=>{if(!Rl(t)||Ml(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},I6=Xs("Date"),z6=Xs("File"),B6=Xs("Blob"),q6=Xs("FileList"),U6=t=>Rl(t)&&as(t.pipe),W6=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||as(t.append)&&((s=iu(t))==="formdata"||s==="object"&&as(t.toString)&&t.toString()==="[object FormData]"))},V6=Xs("URLSearchParams"),[H6,Q6,K6,Y6]=["ReadableStream","Request","Response","Headers"].map(Xs),G6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ll(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),Vi(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(Ml(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(n=0;n<o;n++)l=i[n],s.call(null,t[l],l,t)}}function tw(t,s){if(Ml(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const ra=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sw=t=>!Ai(t)&&t!==ra;function th(){const{caseless:t,skipUndefined:s}=sw(this)&&this||{},r={},n=(a,i)=>{const o=t&&tw(r,i)||i;$c(r[o])&&$c(a)?r[o]=th(r[o],a):$c(a)?r[o]=th({},a):Vi(a)?r[o]=a.slice():(!s||!Ai(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Ll(arguments[a],n);return r}const X6=(t,s,r,{allOwnKeys:n}={})=>(Ll(s,(a,i)=>{r&&as(a)?t[i]=Xj(a,r):t[i]=a},{allOwnKeys:n}),t),J6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Z6=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},e3=(t,s,r,n)=>{let a,i,o;const l={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)o=a[i],(!n||n(o,t,s))&&!l[o]&&(s[o]=t[o],l[o]=!0);t=r!==!1&&L0(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},t3=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},s3=t=>{if(!t)return null;if(Vi(t))return t;let s=t.length;if(!ew(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},r3=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&L0(Uint8Array)),n3=(t,s)=>{const n=(t&&t[au]).call(t);let a;for(;(a=n.next())&&!a.done;){const i=a.value;s.call(t,i[0],i[1])}},a3=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},i3=Xs("HTMLFormElement"),o3=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),ng=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),l3=Xs("RegExp"),rw=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Ll(r,(a,i)=>{let o;(o=s(a,i,t))!==!1&&(n[i]=o||a)}),Object.defineProperties(t,n)},c3=t=>{rw(t,(s,r)=>{if(as(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(as(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},d3=(t,s)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Vi(t)?n(t):n(String(t).split(s)),r},u3=()=>{},m3=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function x3(t){return!!(t&&as(t.append)&&t[Jj]==="FormData"&&t[au])}const h3=t=>{const s=new Array(10),r=(n,a)=>{if(Rl(n)){if(s.indexOf(n)>=0)return;if(Ml(n))return n;if(!("toJSON"in n)){s[a]=n;const i=Vi(n)?[]:{};return Ll(n,(o,l)=>{const c=r(o,a+1);!Ai(c)&&(i[l]=c)}),s[a]=void 0,i}}return n};return r(t,0)},p3=Xs("AsyncFunction"),f3=t=>t&&(Rl(t)||as(t))&&as(t.then)&&as(t.catch),nw=((t,s)=>t?setImmediate:s?((r,n)=>(ra.addEventListener("message",({source:a,data:i})=>{a===ra&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ra.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",as(ra.postMessage)),g3=typeof queueMicrotask<"u"?queueMicrotask.bind(ra):typeof process<"u"&&process.nextTick||nw,y3=t=>t!=null&&as(t[au]),ee={isArray:Vi,isArrayBuffer:Zj,isBuffer:Ml,isFormData:W6,isArrayBufferView:L6,isString:D6,isNumber:ew,isBoolean:O6,isObject:Rl,isPlainObject:$c,isEmptyObject:$6,isReadableStream:H6,isRequest:Q6,isResponse:K6,isHeaders:Y6,isUndefined:Ai,isDate:I6,isFile:z6,isBlob:B6,isRegExp:l3,isFunction:as,isStream:U6,isURLSearchParams:V6,isTypedArray:r3,isFileList:q6,forEach:Ll,merge:th,extend:X6,trim:G6,stripBOM:J6,inherits:Z6,toFlatObject:e3,kindOf:iu,kindOfTest:Xs,endsWith:t3,toArray:s3,forEachEntry:n3,matchAll:a3,isHTMLForm:i3,hasOwnProperty:ng,hasOwnProp:ng,reduceDescriptors:rw,freezeMethods:c3,toObjectSet:d3,toCamelCase:o3,noop:u3,toFiniteNumber:m3,findKey:tw,global:ra,isContextDefined:sw,isSpecCompliantForm:x3,toJSONObject:h3,isAsyncFn:p3,isThenable:f3,setImmediate:nw,asap:g3,isIterable:y3};function Te(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}ee.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const aw=Te.prototype,iw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{iw[t]={value:t}});Object.defineProperties(Te,iw);Object.defineProperty(aw,"isAxiosError",{value:!0});Te.from=(t,s,r,n,a,i)=>{const o=Object.create(aw);ee.toFlatObject(t,o,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return Te.call(o,l,c,r,n,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const b3=null;function sh(t){return ee.isPlainObject(t)||ee.isArray(t)}function ow(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function ag(t,s,r){return t?t.concat(s).map(function(a,i){return a=ow(a),!r&&i?"["+a+"]":a}).join(r?".":""):s}function v3(t){return ee.isArray(t)&&!t.some(sh)}const j3=ee.toFlatObject(ee,{},null,function(s){return/^is[A-Z]/.test(s)});function lu(t,s,r){if(!ee.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,v){return!ee.isUndefined(v[p])});const n=r.metaTokens,a=r.visitor||m,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(s);if(!ee.isFunction(a))throw new TypeError("visitor must be a function");function d(h){if(h===null)return"";if(ee.isDate(h))return h.toISOString();if(ee.isBoolean(h))return h.toString();if(!c&&ee.isBlob(h))throw new Te("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(h)||ee.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function m(h,p,v){let g=h;if(h&&!v&&typeof h=="object"){if(ee.endsWith(p,"{}"))p=n?p:p.slice(0,-2),h=JSON.stringify(h);else if(ee.isArray(h)&&v3(h)||(ee.isFileList(h)||ee.endsWith(p,"[]"))&&(g=ee.toArray(h)))return p=ow(p),g.forEach(function(y,w){!(ee.isUndefined(y)||y===null)&&s.append(o===!0?ag([p],w,i):o===null?p:p+"[]",d(y))}),!1}return sh(h)?!0:(s.append(ag(v,p,i),d(h)),!1)}const x=[],f=Object.assign(j3,{defaultVisitor:m,convertValue:d,isVisitable:sh});function b(h,p){if(!ee.isUndefined(h)){if(x.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));x.push(h),ee.forEach(h,function(g,j){(!(ee.isUndefined(g)||g===null)&&a.call(s,g,ee.isString(j)?j.trim():j,p,f))===!0&&b(g,p?p.concat(j):[j])}),x.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return b(t),s}function ig(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function D0(t,s){this._pairs=[],t&&lu(t,this,s)}const lw=D0.prototype;lw.append=function(s,r){this._pairs.push([s,r])};lw.toString=function(s){const r=s?function(n){return s.call(this,n,ig)}:ig;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function w3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function cw(t,s,r){if(!s)return t;const n=r&&r.encode||w3;ee.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(s,r):i=ee.isURLSearchParams(s)?s.toString():new D0(s,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class og{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ee.forEach(this.handlers,function(n){n!==null&&s(n)})}}const dw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N3=typeof URLSearchParams<"u"?URLSearchParams:D0,_3=typeof FormData<"u"?FormData:null,k3=typeof Blob<"u"?Blob:null,C3={isBrowser:!0,classes:{URLSearchParams:N3,FormData:_3,Blob:k3},protocols:["http","https","file","blob","url","data"]},O0=typeof window<"u"&&typeof document<"u",rh=typeof navigator=="object"&&navigator||void 0,S3=O0&&(!rh||["ReactNative","NativeScript","NS"].indexOf(rh.product)<0),E3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P3=O0&&window.location.href||"http://localhost",A3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:O0,hasStandardBrowserEnv:S3,hasStandardBrowserWebWorkerEnv:E3,navigator:rh,origin:P3},Symbol.toStringTag,{value:"Module"})),Ot={...A3,...C3};function F3(t,s){return lu(t,new Ot.classes.URLSearchParams,{visitor:function(r,n,a,i){return Ot.isNode&&ee.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function T3(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function M3(t){const s={},r=Object.keys(t);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],s[i]=t[i];return s}function uw(t){function s(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&ee.isArray(a)?a.length:o,c?(ee.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!ee.isObject(a[o]))&&(a[o]=[]),s(r,n,a[o],i)&&ee.isArray(a[o])&&(a[o]=M3(a[o])),!l)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const r={};return ee.forEachEntry(t,(n,a)=>{s(T3(n),a,r,0)}),r}return null}function R3(t,s,r){if(ee.isString(t))try{return(s||JSON.parse)(t),ee.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Dl={transitional:dw,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=ee.isObject(s);if(i&&ee.isHTMLForm(s)&&(s=new FormData(s)),ee.isFormData(s))return a?JSON.stringify(uw(s)):s;if(ee.isArrayBuffer(s)||ee.isBuffer(s)||ee.isStream(s)||ee.isFile(s)||ee.isBlob(s)||ee.isReadableStream(s))return s;if(ee.isArrayBufferView(s))return s.buffer;if(ee.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return F3(s,this.formSerializer).toString();if((l=ee.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return lu(l?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),R3(s)):s}],transformResponse:[function(s){const r=this.transitional||Dl.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(ee.isResponse(s)||ee.isReadableStream(s))return s;if(s&&ee.isString(s)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Te.from(l,Te.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ot.classes.FormData,Blob:Ot.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{Dl.headers[t]={}});const L3=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D3=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||s[r]&&L3[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},lg=Symbol("internals");function co(t){return t&&String(t).trim().toLowerCase()}function Ic(t){return t===!1||t==null?t:ee.isArray(t)?t.map(Ic):String(t)}function O3(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const $3=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function om(t,s,r,n,a){if(ee.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!ee.isString(s)){if(ee.isString(n))return s.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(s)}}function I3(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function z3(t,s){const r=ee.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,i,o){return this[n].call(this,s,a,i,o)},configurable:!0})})}let is=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function i(l,c,d){const m=co(c);if(!m)throw new Error("header name must be a non-empty string");const x=ee.findKey(a,m);(!x||a[x]===void 0||d===!0||d===void 0&&a[x]!==!1)&&(a[x||c]=Ic(l))}const o=(l,c)=>ee.forEach(l,(d,m)=>i(d,m,c));if(ee.isPlainObject(s)||s instanceof this.constructor)o(s,r);else if(ee.isString(s)&&(s=s.trim())&&!$3(s))o(D3(s),r);else if(ee.isObject(s)&&ee.isIterable(s)){let l={},c,d;for(const m of s){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[d=m[0]]=(c=l[d])?ee.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(l,r)}else s!=null&&i(r,s,n);return this}get(s,r){if(s=co(s),s){const n=ee.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return O3(a);if(ee.isFunction(r))return r.call(this,a,n);if(ee.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=co(s),s){const n=ee.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||om(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function i(o){if(o=co(o),o){const l=ee.findKey(n,o);l&&(!r||om(n,n[l],l,r))&&(delete n[l],a=!0)}}return ee.isArray(s)?s.forEach(i):i(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!s||om(this,this[i],i,s,!0))&&(delete this[i],a=!0)}return a}normalize(s){const r=this,n={};return ee.forEach(this,(a,i)=>{const o=ee.findKey(n,i);if(o){r[o]=Ic(a),delete r[i];return}const l=s?I3(i):String(i).trim();l!==i&&delete r[i],r[l]=Ic(a),n[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return ee.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&ee.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[lg]=this[lg]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=co(o);n[l]||(z3(a,o),n[l]=!0)}return ee.isArray(s)?s.forEach(i):i(s),this}};is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(is.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});ee.freezeMethods(is);function lm(t,s){const r=this||Dl,n=s||r,a=is.from(n.headers);let i=n.data;return ee.forEach(t,function(l){i=l.call(r,i,a.normalize(),s?s.status:void 0)}),a.normalize(),i}function mw(t){return!!(t&&t.__CANCEL__)}function Hi(t,s,r){Te.call(this,t??"canceled",Te.ERR_CANCELED,s,r),this.name="CanceledError"}ee.inherits(Hi,Te,{__CANCEL__:!0});function xw(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new Te("Request failed with status code "+r.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function B3(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function q3(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,i=0,o;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),m=n[i];o||(o=d),r[a]=c,n[a]=d;let x=i,f=0;for(;x!==a;)f+=r[x++],x=x%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),d-o<s)return;const b=m&&d-m;return b?Math.round(f*1e3/b):void 0}}function U3(t,s){let r=0,n=1e3/s,a,i;const o=(d,m=Date.now())=>{r=m,a=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const m=Date.now(),x=m-r;x>=n?o(d,m):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-x)))},()=>a&&o(a)]}const kd=(t,s,r=3)=>{let n=0;const a=q3(50,250);return U3(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),m=o<=l;n=o;const x={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&m?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(x)},r)},cg=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},dg=t=>(...s)=>ee.asap(()=>t(...s)),W3=Ot.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Ot.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Ot.origin),Ot.navigator&&/(msie|trident)/i.test(Ot.navigator.userAgent)):()=>!0,V3=Ot.hasStandardBrowserEnv?{write(t,s,r,n,a,i,o){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(s)}`];ee.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),ee.isString(n)&&l.push(`path=${n}`),ee.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),ee.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function H3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Q3(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function hw(t,s,r){let n=!H3(s);return t&&(n||r==!1)?Q3(t,s):s}const ug=t=>t instanceof is?{...t}:t;function _a(t,s){s=s||{};const r={};function n(d,m,x,f){return ee.isPlainObject(d)&&ee.isPlainObject(m)?ee.merge.call({caseless:f},d,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function a(d,m,x,f){if(ee.isUndefined(m)){if(!ee.isUndefined(d))return n(void 0,d,x,f)}else return n(d,m,x,f)}function i(d,m){if(!ee.isUndefined(m))return n(void 0,m)}function o(d,m){if(ee.isUndefined(m)){if(!ee.isUndefined(d))return n(void 0,d)}else return n(void 0,m)}function l(d,m,x){if(x in s)return n(d,m);if(x in t)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,m,x)=>a(ug(d),ug(m),x,!0)};return ee.forEach(Object.keys({...t,...s}),function(m){const x=c[m]||a,f=x(t[m],s[m],m);ee.isUndefined(f)&&x!==l||(r[m]=f)}),r}const pw=t=>{const s=_a({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=s;if(s.headers=o=is.from(o),s.url=cw(hw(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ee.isFormData(r)){if(Ot.hasStandardBrowserEnv||Ot.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,x])=>{d.includes(m.toLowerCase())&&o.set(m,x)})}}if(Ot.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(s)),n||n!==!1&&W3(s.url))){const c=a&&i&&V3.read(i);c&&o.set(a,c)}return s},K3=typeof XMLHttpRequest<"u",Y3=K3&&function(t){return new Promise(function(r,n){const a=pw(t);let i=a.data;const o=is.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,m,x,f,b,h;function p(){b&&b(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function g(){if(!v)return;const y=is.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),M={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:y,config:t,request:v};xw(function(N){r(N),p()},function(N){n(N),p()},M),v=null}"onloadend"in v?v.onloadend=g:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(g)},v.onabort=function(){v&&(n(new Te("Request aborted",Te.ECONNABORTED,t,v)),v=null)},v.onerror=function(w){const M=w&&w.message?w.message:"Network Error",T=new Te(M,Te.ERR_NETWORK,t,v);T.event=w||null,n(T),v=null},v.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const M=a.transitional||dw;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new Te(w,M.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&ee.forEach(o.toJSON(),function(w,M){v.setRequestHeader(M,w)}),ee.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),l&&l!=="json"&&(v.responseType=a.responseType),d&&([f,h]=kd(d,!0),v.addEventListener("progress",f)),c&&v.upload&&([x,b]=kd(c),v.upload.addEventListener("progress",x),v.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(m=y=>{v&&(n(!y||y.type?new Hi(null,t,v):y),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const j=B3(a.url);if(j&&Ot.protocols.indexOf(j)===-1){n(new Te("Unsupported protocol "+j+":",Te.ERR_BAD_REQUEST,t));return}v.send(i||null)})},G3=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const m=d instanceof Error?d:this.reason;n.abort(m instanceof Te?m:new Hi(m instanceof Error?m.message:m))}};let o=s&&setTimeout(()=>{o=null,i(new Te(`timeout ${s} of ms exceeded`,Te.ETIMEDOUT))},s);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>ee.asap(l),c}},X3=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},J3=async function*(t,s){for await(const r of Z3(t))yield*X3(r,s)},Z3=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},mg=(t,s,r,n)=>{const a=J3(t,s);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){l(),c.close();return}let x=m.byteLength;if(r){let f=i+=x;r(f)}c.enqueue(new Uint8Array(m))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},xg=64*1024,{isFunction:dc}=ee,eC=(({Request:t,Response:s})=>({Request:t,Response:s}))(ee.global),{ReadableStream:hg,TextEncoder:pg}=ee.global,fg=(t,...s)=>{try{return!!t(...s)}catch{return!1}},tC=t=>{t=ee.merge.call({skipUndefined:!0},eC,t);const{fetch:s,Request:r,Response:n}=t,a=s?dc(s):typeof fetch=="function",i=dc(r),o=dc(n);if(!a)return!1;const l=a&&dc(hg),c=a&&(typeof pg=="function"?(h=>p=>h.encode(p))(new pg):async h=>new Uint8Array(await new r(h).arrayBuffer())),d=i&&l&&fg(()=>{let h=!1;const p=new r(Ot.origin,{body:new hg,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!p}),m=o&&l&&fg(()=>ee.isReadableStream(new n("").body)),x={stream:m&&(h=>h.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!x[h]&&(x[h]=(p,v)=>{let g=p&&p[h];if(g)return g.call(p);throw new Te(`Response type '${h}' is not supported`,Te.ERR_NOT_SUPPORT,v)})});const f=async h=>{if(h==null)return 0;if(ee.isBlob(h))return h.size;if(ee.isSpecCompliantForm(h))return(await new r(Ot.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(h)||ee.isArrayBuffer(h))return h.byteLength;if(ee.isURLSearchParams(h)&&(h=h+""),ee.isString(h))return(await c(h)).byteLength},b=async(h,p)=>{const v=ee.toFiniteNumber(h.getContentLength());return v??f(p)};return async h=>{let{url:p,method:v,data:g,signal:j,cancelToken:y,timeout:w,onDownloadProgress:M,onUploadProgress:T,responseType:N,headers:E,withCredentials:L="same-origin",fetchOptions:k}=pw(h),S=s||fetch;N=N?(N+"").toLowerCase():"text";let F=G3([j,y&&y.toAbortSignal()],w),P=null;const I=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let H;try{if(T&&d&&v!=="get"&&v!=="head"&&(H=await b(E,g))!==0){let q=new r(p,{method:"POST",body:g,duplex:"half"}),O;if(ee.isFormData(g)&&(O=q.headers.get("content-type"))&&E.setContentType(O),q.body){const[V,D]=cg(H,kd(dg(T)));g=mg(q.body,xg,V,D)}}ee.isString(L)||(L=L?"include":"omit");const z=i&&"credentials"in r.prototype,B={...k,signal:F,method:v.toUpperCase(),headers:E.normalize().toJSON(),body:g,duplex:"half",credentials:z?L:void 0};P=i&&new r(p,B);let C=await(i?S(P,k):S(p,B));const R=m&&(N==="stream"||N==="response");if(m&&(M||R&&I)){const q={};["status","statusText","headers"].forEach(G=>{q[G]=C[G]});const O=ee.toFiniteNumber(C.headers.get("content-length")),[V,D]=M&&cg(O,kd(dg(M),!0))||[];C=new n(mg(C.body,xg,V,()=>{D&&D(),I&&I()}),q)}N=N||"text";let _=await x[ee.findKey(x,N)||"text"](C,h);return!R&&I&&I(),await new Promise((q,O)=>{xw(q,O,{data:_,headers:is.from(C.headers),status:C.status,statusText:C.statusText,config:h,request:P})})}catch(z){throw I&&I(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,h,P),{cause:z.cause||z}):Te.from(z,z&&z.code,h,P)}}},sC=new Map,fw=t=>{let s=t&&t.env||{};const{fetch:r,Request:n,Response:a}=s,i=[n,a,r];let o=i.length,l=o,c,d,m=sC;for(;l--;)c=i[l],d=m.get(c),d===void 0&&m.set(c,d=l?new Map:tC(s)),m=d;return d};fw();const $0={http:b3,xhr:Y3,fetch:{get:fw}};ee.forEach($0,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const gg=t=>`- ${t}`,rC=t=>ee.isFunction(t)||t===null||t===!1;function nC(t,s){t=ee.isArray(t)?t:[t];const{length:r}=t;let n,a;const i={};for(let o=0;o<r;o++){n=t[o];let l;if(a=n,!rC(n)&&(a=$0[(l=String(n)).toLowerCase()],a===void 0))throw new Te(`Unknown adapter '${l}'`);if(a&&(ee.isFunction(a)||(a=a.get(s))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(gg).join(`
`):" "+gg(o[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const gw={getAdapter:nC,adapters:$0};function cm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hi(null,t)}function yg(t){return cm(t),t.headers=is.from(t.headers),t.data=lm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gw.getAdapter(t.adapter||Dl.adapter,t)(t).then(function(n){return cm(t),n.data=lm.call(t,t.transformResponse,n),n.headers=is.from(n.headers),n},function(n){return mw(n)||(cm(t),n&&n.response&&(n.response.data=lm.call(t,t.transformResponse,n.response),n.response.headers=is.from(n.response.headers))),Promise.reject(n)})}const yw="1.13.2",cu={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{cu[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const bg={};cu.transitional=function(s,r,n){function a(i,o){return"[Axios v"+yw+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(s===!1)throw new Te(a(o," has been removed"+(r?" in "+r:"")),Te.ERR_DEPRECATED);return r&&!bg[o]&&(bg[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,o,l):!0}};cu.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function aC(t,s,r){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const i=n[a],o=s[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Te("option "+i+" must be "+c,Te.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Te("Unknown option "+i,Te.ERR_BAD_OPTION)}}const zc={assertOptions:aC,validators:cu},tr=zc.validators;let pa=class{constructor(s){this.defaults=s||{},this.interceptors={request:new og,response:new og}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=_a(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&zc.assertOptions(n,{silentJSONParsing:tr.transitional(tr.boolean),forcedJSONParsing:tr.transitional(tr.boolean),clarifyTimeoutError:tr.transitional(tr.boolean)},!1),a!=null&&(ee.isFunction(a)?r.paramsSerializer={serialize:a}:zc.assertOptions(a,{encode:tr.function,serialize:tr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),zc.assertOptions(r,{baseUrl:tr.spelling("baseURL"),withXsrfToken:tr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&ee.merge(i.common,i[r.method]);i&&ee.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),r.headers=is.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let m,x=0,f;if(!c){const h=[yg.bind(this),void 0];for(h.unshift(...l),h.push(...d),f=h.length,m=Promise.resolve(r);x<f;)m=m.then(h[x++],h[x++]);return m}f=l.length;let b=r;for(;x<f;){const h=l[x++],p=l[x++];try{b=h(b)}catch(v){p.call(this,v);break}}try{m=yg.call(this,b)}catch(h){return Promise.reject(h)}for(x=0,f=d.length;x<f;)m=m.then(d[x++],d[x++]);return m}getUri(s){s=_a(this.defaults,s);const r=hw(s.baseURL,s.url,s.allowAbsoluteUrls);return cw(r,s.params,s.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(s){pa.prototype[s]=function(r,n){return this.request(_a(n||{},{method:s,url:r,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(s){function r(n){return function(i,o,l){return this.request(_a(l||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}pa.prototype[s]=r(),pa.prototype[s+"Form"]=r(!0)});let iC=class bw{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},s(function(i,o,l){n.reason||(n.reason=new Hi(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new bw(function(a){s=a}),cancel:s}}};function oC(t){return function(r){return t.apply(null,r)}}function lC(t){return ee.isObject(t)&&t.isAxiosError===!0}const nh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nh).forEach(([t,s])=>{nh[s]=t});function vw(t){const s=new pa(t),r=Xj(pa.prototype.request,s);return ee.extend(r,pa.prototype,s,{allOwnKeys:!0}),ee.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return vw(_a(t,a))},r}const Q=vw(Dl);Q.Axios=pa;Q.CanceledError=Hi;Q.CancelToken=iC;Q.isCancel=mw;Q.VERSION=yw;Q.toFormData=lu;Q.AxiosError=Te;Q.Cancel=Q.CanceledError;Q.all=function(s){return Promise.all(s)};Q.spread=oC;Q.isAxiosError=lC;Q.mergeConfig=_a;Q.AxiosHeaders=is;Q.formToJSON=t=>uw(ee.isHTMLForm(t)?new FormData(t):t);Q.getAdapter=gw.getAdapter;Q.HttpStatusCode=nh;Q.default=Q;const{Axios:YO,AxiosError:GO,CanceledError:XO,isCancel:JO,CancelToken:ZO,VERSION:e$,all:t$,Cancel:s$,isAxiosError:r$,spread:n$,toFormData:a$,AxiosHeaders:i$,HttpStatusCode:o$,formToJSON:l$,getAdapter:c$,mergeConfig:d$}=Q,gr=Object.create(null);gr.open="0";gr.close="1";gr.ping="2";gr.pong="3";gr.message="4";gr.upgrade="5";gr.noop="6";const Bc=Object.create(null);Object.keys(gr).forEach(t=>{Bc[gr[t]]=t});const ah={type:"error",data:"parser error"},jw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ww=typeof ArrayBuffer=="function",Nw=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,I0=({type:t,data:s},r,n)=>jw&&s instanceof Blob?r?n(s):vg(s,n):ww&&(s instanceof ArrayBuffer||Nw(s))?r?n(s):vg(new Blob([s]),n):n(gr[t]+(s||"")),vg=(t,s)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];s("b"+(n||""))},r.readAsDataURL(t)};function jg(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let dm;function cC(t,s){if(jw&&t.data instanceof Blob)return t.data.arrayBuffer().then(jg).then(s);if(ww&&(t.data instanceof ArrayBuffer||Nw(t.data)))return s(jg(t.data));I0(t,!1,r=>{dm||(dm=new TextEncoder),s(dm.encode(r))})}const wg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",So=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<wg.length;t++)So[wg.charCodeAt(t)]=t;const dC=t=>{let s=t.length*.75,r=t.length,n,a=0,i,o,l,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),m=new Uint8Array(d);for(n=0;n<r;n+=4)i=So[t.charCodeAt(n)],o=So[t.charCodeAt(n+1)],l=So[t.charCodeAt(n+2)],c=So[t.charCodeAt(n+3)],m[a++]=i<<2|o>>4,m[a++]=(o&15)<<4|l>>2,m[a++]=(l&3)<<6|c&63;return d},uC=typeof ArrayBuffer=="function",z0=(t,s)=>{if(typeof t!="string")return{type:"message",data:_w(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:mC(t.substring(1),s)}:Bc[r]?t.length>1?{type:Bc[r],data:t.substring(1)}:{type:Bc[r]}:ah},mC=(t,s)=>{if(uC){const r=dC(t);return _w(r,s)}else return{base64:!0,data:t}},_w=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},kw="",xC=(t,s)=>{const r=t.length,n=new Array(r);let a=0;t.forEach((i,o)=>{I0(i,!1,l=>{n[o]=l,++a===r&&s(n.join(kw))})})},hC=(t,s)=>{const r=t.split(kw),n=[];for(let a=0;a<r.length;a++){const i=z0(r[a],s);if(n.push(i),i.type==="error")break}return n};function pC(){return new TransformStream({transform(t,s){cC(t,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(a[0]|=128),s.enqueue(a),s.enqueue(r)})}})}let um;function uc(t){return t.reduce((s,r)=>s+r.length,0)}function mc(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let n=0;for(let a=0;a<s;a++)r[a]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function fC(t,s){um||(um=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(uc(r)<1)break;const c=mc(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(uc(r)<2)break;const c=mc(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(uc(r)<8)break;const c=mc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),m=d.getUint32(0);if(m>Math.pow(2,21)-1){l.enqueue(ah);break}a=m*Math.pow(2,32)+d.getUint32(4),n=3}else{if(uc(r)<a)break;const c=mc(r,a);l.enqueue(z0(i?c:um.decode(c),s)),n=0}if(a===0||a>t){l.enqueue(ah);break}}}})}const Cw=4;function ft(t){if(t)return gC(t)}function gC(t){for(var s in ft.prototype)t[s]=ft.prototype[s];return t}ft.prototype.on=ft.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};ft.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};ft.prototype.off=ft.prototype.removeListener=ft.prototype.removeAllListeners=ft.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===s||n.fn===s){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+t],this};ft.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)s[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,s)}return this};ft.prototype.emitReserved=ft.prototype.emit;ft.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ft.prototype.hasListeners=function(t){return!!this.listeners(t).length};const du=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),Cs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),yC="arraybuffer";function Sw(t,...s){return s.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const bC=Cs.setTimeout,vC=Cs.clearTimeout;function uu(t,s){s.useNativeTimers?(t.setTimeoutFn=bC.bind(Cs),t.clearTimeoutFn=vC.bind(Cs)):(t.setTimeoutFn=Cs.setTimeout.bind(Cs),t.clearTimeoutFn=Cs.clearTimeout.bind(Cs))}const jC=1.33;function wC(t){return typeof t=="string"?NC(t):Math.ceil((t.byteLength||t.size)*jC)}function NC(t){let s=0,r=0;for(let n=0,a=t.length;n<a;n++)s=t.charCodeAt(n),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(n++,r+=4);return r}function Ew(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _C(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function kC(t){let s={},r=t.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class CC extends Error{constructor(s,r,n){super(s),this.description=r,this.context=n,this.type="TransportError"}}class B0 extends ft{constructor(s){super(),this.writable=!1,uu(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,n){return super.emitReserved("error",new CC(s,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=z0(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=_C(s);return r.length?"?"+r:""}}class SC extends B0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};hC(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,xC(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ew()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Pw=!1;try{Pw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const EC=Pw;function PC(){}class AC extends SC{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||n!==s.port}}doWrite(s,r){const n=this.request({method:"POST",data:s});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=s}}class xr extends ft{constructor(s,r,n){super(),this.createRequest=s,uu(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var s;const r=Sw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=xr.requestsCount++,xr.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=PC,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete xr.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}xr.requestsCount=0;xr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ng);else if(typeof addEventListener=="function"){const t="onpagehide"in Cs?"pagehide":"unload";addEventListener(t,Ng,!1)}}function Ng(){for(let t in xr.requests)xr.requests.hasOwnProperty(t)&&xr.requests[t].abort()}const FC=function(){const t=Aw({xdomain:!1});return t&&t.responseType!==null}();class TC extends AC{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=FC&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new xr(Aw,this.uri(),s)}}function Aw(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||EC))return new XMLHttpRequest}catch{}if(!s)try{return new Cs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Fw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class MC extends B0{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,n=Fw?{}:Sw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],a=r===s.length-1;I0(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&du(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ew()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const mm=Cs.WebSocket||Cs.MozWebSocket;class RC extends MC{createSocket(s,r,n){return Fw?new mm(s,r,n):r?new mm(s,r):new mm(s)}doWrite(s,r){this.ws.send(r)}}class LC extends B0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=fC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=s.readable.pipeThrough(r).getReader(),a=pC();a.readable.pipeTo(s.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const n=s[r],a=r===s.length-1;this._writer.write(n).then(()=>{a&&du(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const DC={websocket:RC,webtransport:LC,polling:TC},OC=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$C=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ih(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let a=OC.exec(t||""),i={},o=14;for(;o--;)i[$C[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=IC(i,i.path),i.queryKey=zC(i,i.query),i}function IC(t,s){const r=/\/{2,9}/g,n=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&n.splice(0,1),s.slice(-1)=="/"&&n.splice(n.length-1,1),n}function zC(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const oh=typeof addEventListener=="function"&&typeof removeEventListener=="function",qc=[];oh&&addEventListener("offline",()=>{qc.forEach(t=>t())},!1);class Pn extends ft{constructor(s,r){if(super(),this.binaryType=yC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const n=ih(s);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=ih(r.host).host);uu(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=kC(this.opts.query)),oh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},qc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=Cw,r.transport=s,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Pn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Pn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=wC(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,du(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,n){return this._sendPacket("message",s,r,n),this}send(s,r,n){return this._sendPacket("message",s,r,n),this}_sendPacket(s,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:s,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():s()}):this.upgrading?n():s()),this}_onError(s){if(Pn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),oh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=qc.indexOf(this._offlineEventListener);n!==-1&&qc.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}Pn.protocol=Cw;class BC extends Pn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),n=!1;Pn.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",x=>{if(!n)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Pn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(m(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function i(){n||(n=!0,m(),r.close(),r=null)}const o=x=>{const f=new Error("probe error: "+x);f.transport=r.name,i(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function d(x){r&&x.name!==r.name&&i()}const m=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let n=0;n<s.length;n++)~this.transports.indexOf(s[n])&&r.push(s[n]);return r}}let qC=class extends BC{constructor(s,r={}){const n=typeof s=="object"?s:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>DC[a]).filter(a=>!!a)),super(s,n)}};function UC(t,s="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=ih(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+s,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const WC=typeof ArrayBuffer=="function",VC=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Tw=Object.prototype.toString,HC=typeof Blob=="function"||typeof Blob<"u"&&Tw.call(Blob)==="[object BlobConstructor]",QC=typeof File=="function"||typeof File<"u"&&Tw.call(File)==="[object FileConstructor]";function q0(t){return WC&&(t instanceof ArrayBuffer||VC(t))||HC&&t instanceof Blob||QC&&t instanceof File}function Uc(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Uc(t[r]))return!0;return!1}if(q0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Uc(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Uc(t[r]))return!0;return!1}function KC(t){const s=[],r=t.data,n=t;return n.data=lh(r,s),n.attachments=s.length,{packet:n,buffers:s}}function lh(t,s){if(!t)return t;if(q0(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=lh(t[n],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=lh(t[n],s));return r}return t}function YC(t,s){return t.data=ch(t.data,s),delete t.attachments,t}function ch(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=ch(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=ch(t[r],s));return t}const Mw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],GC=5;var De;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class XC{constructor(s){this.replacer=s}encode(s){return(s.type===De.EVENT||s.type===De.ACK)&&Uc(s)?this.encodeAsBinary({type:s.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===De.BINARY_EVENT||s.type===De.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=KC(s),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}class U0 extends ft{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const n=r.type===De.BINARY_EVENT;n||r.type===De.BINARY_ACK?(r.type=n?De.EVENT:De.ACK,this.reconstructor=new JC(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(q0(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const n={type:Number(s.charAt(0))};if(De[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===De.BINARY_EVENT||n.type===De.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const o=s.substring(i,r);if(o!=Number(o)||s.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););n.nsp=s.substring(i,r)}else n.nsp="/";const a=s.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=s.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===s.length)break}n.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(U0.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case De.CONNECT:return Cd(r);case De.DISCONNECT:return r===void 0;case De.CONNECT_ERROR:return typeof r=="string"||Cd(r);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Mw.indexOf(r[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class JC{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=YC(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ZC(t){return typeof t=="string"}const eS=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function tS(t){return t===void 0||eS(t)}function Cd(t){return Object.prototype.toString.call(t)==="[object Object]"}function sS(t,s){switch(t){case De.CONNECT:return s===void 0||Cd(s);case De.DISCONNECT:return s===void 0;case De.EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Mw.indexOf(s[0])===-1);case De.ACK:return Array.isArray(s);case De.CONNECT_ERROR:return typeof s=="string"||Cd(s);default:return!1}}function rS(t){return ZC(t.nsp)&&tS(t.id)&&sS(t.type,t.data)}const nS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:U0,Encoder:XC,get PacketType(){return De},isPacketValid:rS,protocol:GC},Symbol.toStringTag,{value:"Module"}));function qs(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const aS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rw extends ft{constructor(s,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[qs(s,"open",this.onopen.bind(this)),qs(s,"packet",this.onpacket.bind(this)),qs(s,"error",this.onerror.bind(this)),qs(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var n,a,i;if(aS.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:De.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const m=this.ids++,x=r.pop();this._registerAckCallback(m,x),o.id=m}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(s,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===s&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[s]=o}emitWithAck(s,...r){return new Promise((n,a)=>{const i=(o,l)=>o?a(o):n(l);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((a,...i)=>(this._queue[0],a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(n=>String(n.id)===s)){const n=this.acks[s];delete this.acks[s],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case De.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(s);break;case De.ACK:case De.BINARY_ACK:this.onack(s);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const n=new Error(s.data.message);n.data=s.data.data,this.emitReserved("connect_error",n);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:De.ACK,id:s,data:a}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(s===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,s.data)}}}function Qi(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Qi.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Qi.prototype.reset=function(){this.attempts=0};Qi.prototype.setMin=function(t){this.ms=t};Qi.prototype.setMax=function(t){this.max=t};Qi.prototype.setJitter=function(t){this.jitter=t};class dh extends ft{constructor(s,r){var n;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,uu(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Qi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const a=r.parser||nS;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new qC(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=qs(r,"open",function(){n.onopen(),s&&s()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),s?s(l):this.maybeReconnectOnOpen()},o=qs(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(qs(s,"ping",this.onping.bind(this)),qs(s,"data",this.ondata.bind(this)),qs(s,"error",this.onerror.bind(this)),qs(s,"close",this.onclose.bind(this)),qs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){du(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let n=this.nsps[s];return n?this._autoConnect&&!n.active&&n.connect():(n=new Rw(this,s,r),this.nsps[s]=n),n}_destroy(s){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let n=0;n<r.length;n++)this.engine.write(r[n],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(a=>{a?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",a)):s.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const uo={};function Wc(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=UC(t,s.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=uo[a]&&i in uo[a].nsps,l=s.forceNew||s["force new connection"]||s.multiplex===!1||o;let c;return l?c=new dh(n,s):(uo[a]||(uo[a]=new dh(n,s)),c=uo[a]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(Wc,{Manager:dh,Socket:Rw,io:Wc,connect:Wc});const Wn="https://123salama-lama-food-truck.launchpulse.ai",iS=()=>{if(typeof window<"u"){const t=window.location.protocol==="https:"?"wss:":"ws:",s=window.location.host;return`${t}//${s}`}return"ws://localhost:3000"},oS=iS(),lS=()=>`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Z=Gj()(M6((t,s)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0,isHydrated:!1,lastSyncedAt:null},business_settings:{delivery_enabled:!1,operating_hours:{},business_info:{name:"",phone:"",email:"",address:""},tax_settings:{vat_rate:0},loyalty_settings:{earning_rate:1,referral_enabled:!1}},notification_state:{notifications:[],unread_count:0},websocket_state:{socket:null,connected:!1,subscribed_channels:[]},login_user:async(r,n,a=!1)=>{var i,o;t(l=>({authentication_state:{...l.authentication_state,authentication_status:{...l.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const l=await Q.post(`${Wn}/api/auth/login`,{email:r,password:n,remember_me:a},{headers:{"Content-Type":"application/json"}}),{user:c,token:d}=l.data;t(()=>({authentication_state:{current_user:c,auth_token:d,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket(),await s().sync_guest_cart_to_backend()}catch(l){const c=((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||l.message||"Login failed";throw t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:c}})),new Error(c)}},register_user:async r=>{var n,a;t(i=>({authentication_state:{...i.authentication_state,authentication_status:{...i.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const i=await Q.post(`${Wn}/api/auth/register`,r,{headers:{"Content-Type":"application/json"}}),{user:o,token:l,first_order_discount_code:c}=i.data;return t(()=>({authentication_state:{current_user:o,auth_token:l,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket(),await s().sync_guest_cart_to_backend(),{user:o,token:l,first_order_discount_code:c}}catch(i){const o=((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||i.message||"Registration failed";throw t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:o}})),new Error(o)}},start_guest_checkout:async r=>{var n,a;t(i=>({authentication_state:{...i.authentication_state,authentication_status:{...i.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const i=await Q.post(`${Wn}/api/auth/guest`,{email:r},{headers:{"Content-Type":"application/json"}}),{user:o,token:l,redirectTo:c}=i.data;return t(()=>({authentication_state:{current_user:o,auth_token:l,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket(),{redirectTo:c}}catch(i){const o=((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||i.message||"Guest checkout failed";t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:o}}));const l=new Error(o);throw l.response=i.response,l}},logout_user:async()=>{const{auth_token:r}=s().authentication_state;try{r&&await Q.post(`${Wn}/api/auth/logout`,{},{headers:{Authorization:`Bearer ${r}`}})}catch(n){console.error("Logout API call failed:",n)}s().disconnect_websocket(),t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0,isHydrated:!0,lastSyncedAt:Date.now()},notification_state:{notifications:[],unread_count:0}}))},initialize_auth:async()=>{const{authentication_state:r}=s(),n=r.auth_token;if(!n){t(a=>({authentication_state:{...a.authentication_state,authentication_status:{...a.authentication_state.authentication_status,is_loading:!1}}}));return}try{const i=(await Q.get(`${Wn}/api/profile`,{headers:{Authorization:`Bearer ${n}`}})).data;t(()=>({authentication_state:{current_user:i,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket()}catch(a){console.error("Token verification failed:",a),t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null}}))}},update_auth_user:r=>{t(n=>({authentication_state:{...n.authentication_state,current_user:n.authentication_state.current_user?{...n.authentication_state.current_user,...r}:null}}))},clear_auth_error:()=>{t(r=>({authentication_state:{...r.authentication_state,error_message:null}}))},add_to_cart:r=>{t(n=>{const a=n.cart_state.items.findIndex(l=>l.item_id===r.item_id&&JSON.stringify(l.customizations)===JSON.stringify(r.customizations));let i;return a>=0?i=n.cart_state.items.map((l,c)=>c===a?{...l,quantity:l.quantity+r.quantity,line_total:(l.quantity+r.quantity)*l.unit_price}:l):i=[...n.cart_state.items,r],{cart_state:{...n.cart_state,items:i}}}),s().recalculate_totals()},update_cart_quantity:(r,n)=>{t(a=>{if(n<=0)return{cart_state:{...a.cart_state,items:a.cart_state.items.filter(o=>o.item_id!==r)}};const i=a.cart_state.items.map(o=>o.item_id===r?{...o,quantity:n,line_total:n*o.unit_price}:o);return{cart_state:{...a.cart_state,items:i}}}),s().recalculate_totals()},remove_from_cart:r=>{t(n=>({cart_state:{...n.cart_state,items:n.cart_state.items.filter(a=>a.item_id!==r)}})),s().recalculate_totals()},apply_discount:(r,n)=>{t(a=>({cart_state:{...a.cart_state,discount_code:r,discount_amount:n}})),s().recalculate_totals()},remove_discount:()=>{t(r=>({cart_state:{...r.cart_state,discount_code:null,discount_amount:0}})),s().recalculate_totals()},update_cart_fees:(r,n)=>{t(a=>({cart_state:{...a.cart_state,delivery_fee:r,tax_amount:n}})),s().recalculate_totals()},clear_cart:()=>{t(()=>({cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0,isHydrated:!0,lastSyncedAt:Date.now()}}))},recalculate_totals:()=>{t(r=>{const n=r.cart_state.items.reduce((i,o)=>i+o.line_total,0),a=n-r.cart_state.discount_amount+r.cart_state.delivery_fee+r.cart_state.tax_amount;return{cart_state:{...r.cart_state,subtotal:n,total:a}}})},sync_cart_from_api:r=>{t(n=>({cart_state:{items:(r.items||[]).map(o=>({item_id:o.item_id,item_name:o.item_name,quantity:o.quantity,unit_price:Number(o.unit_price||0),customizations:o.selected_customizations?Object.entries(o.selected_customizations).map(([l,c])=>({group_name:l,option_name:typeof c=="object"&&c.name||String(c),additional_price:typeof c=="object"?Number(c.additional_price||0):0})):[],line_total:Number(o.line_total||0)})),subtotal:Number(r.subtotal||0),discount_code:r.discount_code||null,discount_amount:Number(r.discount_amount||0),delivery_fee:Number(r.delivery_fee||0),tax_amount:Number(r.tax_amount||0),total:Number(r.total||0),isHydrated:!0,lastSyncedAt:Date.now()}}))},set_cart_hydrated:r=>{t(n=>({cart_state:{...n.cart_state,isHydrated:r}}))},sync_guest_cart_to_backend:async()=>{const r=s(),{cart_state:n,authentication_state:a}=r;if(!(!a.auth_token||n.items.length===0))try{for(const i of n.items){const o={};i.customizations.forEach((l,c)=>{const d=`group_${c}`;o[d]||(o[d]=[]),o[d].push({option_name:l.option_name,additional_price:l.additional_price})}),await Q.post(`${Wn}/api/cart/items`,{item_id:i.item_id,quantity:i.quantity,selected_customizations:o},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.auth_token}`}})}console.log("Guest cart synced to backend successfully")}catch(i){console.error("Failed to sync guest cart to backend:",i)}},fetch_business_settings:async()=>{try{const r=await Q.get(`${Wn}/api/business/info`),{name:n,phone:a,email:i,address:o,operating_hours:l,delivery_enabled:c,logo_url:d}=r.data;t(m=>({business_settings:{...m.business_settings,delivery_enabled:c||!1,operating_hours:l||{},business_info:{name:n||"",phone:a||"",email:i||"",address:o||"",logo_url:d||null}}}))}catch(r){console.error("Failed to fetch business settings:",r)}},update_business_settings:r=>{t(n=>({business_settings:{...n.business_settings,...r}}))},add_notification:r=>{const n={...r,id:lS(),created_at:new Date().toISOString(),read:!1};t(a=>({notification_state:{notifications:[n,...a.notification_state.notifications],unread_count:a.notification_state.unread_count+1}}))},mark_notification_read:r=>{t(n=>{const a=n.notification_state.notifications.map(o=>o.id===r?{...o,read:!0}:o),i=a.filter(o=>!o.read).length;return{notification_state:{notifications:a,unread_count:i}}})},mark_all_notifications_read:()=>{t(r=>({notification_state:{notifications:r.notification_state.notifications.map(n=>({...n,read:!0})),unread_count:0}}))},clear_notifications:()=>{t(()=>({notification_state:{notifications:[],unread_count:0}}))},remove_notification:r=>{t(n=>{const a=n.notification_state.notifications.filter(o=>o.id!==r),i=a.filter(o=>!o.read).length;return{notification_state:{notifications:a,unread_count:i}}})},connect_websocket:()=>{const{auth_token:r,current_user:n}=s().authentication_state,{socket:a}=s().websocket_state;if(!(a!=null&&a.connected)){if(a&&a.disconnect(),!r){console.warn("Cannot connect WebSocket: No auth token");return}try{const i=Wc(oS,{auth:{token:r},transports:["websocket","polling"]});i.on("connect",()=>{console.log("WebSocket connected"),t(o=>({websocket_state:{...o.websocket_state,socket:i,connected:!0}})),n&&(n.role==="customer"?s().subscribe_to_user_notifications(n.user_id):n.role==="staff"||n.role==="manager"?s().subscribe_to_staff_events():n.role==="admin"&&s().subscribe_to_admin_events())}),i.on("disconnect",()=>{console.log("WebSocket disconnected"),t(o=>({websocket_state:{...o.websocket_state,connected:!1,subscribed_channels:[]}}))}),i.on("connect_error",o=>{console.error("WebSocket connection error:",o)}),i.on("new_order",o=>{s().add_notification({type:"new_order",message:`New order #${o.data.order_number} received`})}),i.on("order_status_updated",o=>{const{order_number:l,new_status:c}=o.data;s().add_notification({type:"order_status_update",message:`Order #${l} status: ${c}`})}),i.on("low_stock_alert",o=>{const{item_name:l,status:c}=o.data;s().add_notification({type:"stock_alert",message:`${l} is ${c==="out_of_stock"?"out of stock":"running low"}`})}),i.on("loyalty.points_updated",o=>{const{points_amount:l,transaction_type:c}=o.data;s().add_notification({type:"loyalty_points",message:`You ${c==="earned"?"earned":"redeemed"} ${Math.abs(l)} points!`});const d=s().authentication_state.current_user}),i.on("loyalty.badge_unlocked",o=>{const{badge_name:l}=o.data;s().add_notification({type:"badge_unlocked",message:`Achievement unlocked: ${l}!`})}),i.on("new_catering_inquiry",o=>{const{contact_name:l,event_type:c}=o.data;s().add_notification({type:"new_catering_inquiry",message:`New ${c} catering inquiry from ${l}`})}),i.on("admin.metrics_updated",o=>{console.log("Dashboard metrics updated:",o.data.metrics)}),t(o=>({websocket_state:{...o.websocket_state,socket:i,connected:!1}}))}catch(i){console.error("Failed to create WebSocket connection:",i)}}},disconnect_websocket:()=>{const{socket:r}=s().websocket_state;r&&(r.disconnect(),t(()=>({websocket_state:{socket:null,connected:!1,subscribed_channels:[]}})))},subscribe_to_order_updates:r=>{const{socket:n}=s().websocket_state;if(!(n!=null&&n.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const a=`orders/${r}/tracking`;n.emit("subscribe",{channel:a}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:[...i.websocket_state.subscribed_channels,a]}}))},unsubscribe_from_order_updates:r=>{const{socket:n}=s().websocket_state;if(!(n!=null&&n.connected))return;const a=`orders/${r}/tracking`;n.emit("unsubscribe",{channel:a}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:i.websocket_state.subscribed_channels.filter(o=>o!==a)}}))},subscribe_to_user_notifications:r=>{const{socket:n}=s().websocket_state;if(!(n!=null&&n.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const a=`notifications/${r}`;n.emit("subscribe",{channel:a}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:[...i.websocket_state.subscribed_channels,a]}}))},subscribe_to_staff_events:()=>{const{socket:r}=s().websocket_state;if(!(r!=null&&r.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const n=["orders/new","staff/queue/updates","stock/alerts"];n.forEach(a=>{r.emit("subscribe",{channel:a})}),t(a=>({websocket_state:{...a.websocket_state,subscribed_channels:[...a.websocket_state.subscribed_channels,...n]}}))},subscribe_to_admin_events:()=>{const{socket:r}=s().websocket_state;if(!(r!=null&&r.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const n=["orders/new","staff/queue/updates","stock/alerts","catering/inquiries/new","admin/dashboard/metrics"];n.forEach(a=>{r.emit("subscribe",{channel:a})}),t(a=>({websocket_state:{...a.websocket_state,subscribed_channels:[...a.websocket_state.subscribed_channels,...n]}}))}}),{name:"salama-lama-store",partialize:t=>({authentication_state:{current_user:t.authentication_state.current_user,auth_token:t.authentication_state.auth_token,authentication_status:{is_authenticated:t.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},cart_state:{...t.cart_state,isHydrated:!1}})})),Lw="/checkout/order-type",Dw="returnTo";Q.defaults.withCredentials=!0;const cS="https://123salama-lama-food-truck.launchpulse.ai";Q.defaults.baseURL=cS;Q.interceptors.request.use(t=>{var s,r;t.headers||(t.headers={});try{const n=localStorage.getItem("salama-lama-store");if(n){const a=JSON.parse(n),i=(r=(s=a==null?void 0:a.state)==null?void 0:s.authentication_state)==null?void 0:r.auth_token,o=t.headers.Authorization||t.headers.authorization;i&&!o&&(t.headers.Authorization=`Bearer ${i}`)}}catch(n){console.error("Error reading auth token from storage:",n)}return t},t=>Promise.reject(t));let mo=!1;Q.interceptors.response.use(t=>t,async t=>{var r,n,a,i,o,l,c,d,m;const s=t.config;if(((r=t.response)==null?void 0:r.status)===401){const x=(a=(n=t.response)==null?void 0:n.data)==null?void 0:a.error_code,f=window.location.pathname;if(x==="AUTH_TOKEN_REQUIRED"||x==="AUTH_TOKEN_INVALID"||x==="AUTH_SESSION_SUPERSEDED"){const b=f.includes("/login"),h=f.includes("/signup"),p=["/","/menu","/about","/contact","/faqs","/terms","/privacy","/catering","/cart"].includes(f),v=f.includes("/checkout"),g=f.includes("/reset-password")||f.includes("/forgot-password"),j=f.includes("/verify-email"),y=f.includes("/track/"),w=b||h||p||g||j||y;if(x==="AUTH_TOKEN_INVALID"||x==="AUTH_SESSION_SUPERSEDED")try{const T=localStorage.getItem("salama-lama-store");if(T){const N=JSON.parse(T);(i=N==null?void 0:N.state)!=null&&i.authentication_state&&(N.state.authentication_state={current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},localStorage.setItem("salama-lama-store",JSON.stringify(N)))}}catch(T){console.error("Error clearing auth state:",T)}const M=((o=s.url)==null?void 0:o.includes("/api/checkout"))||((l=s.url)==null?void 0:l.includes("/api/cart"))||((c=s.url)==null?void 0:c.includes("/api/discount"));if(x==="AUTH_TOKEN_REQUIRED"&&(v||M)&&!mo&&!s._retry){s._retry=!0,mo=!0;try{const T=await Q.post("/api/auth/guest",{},{_retry:!0}),N=(d=T.data)==null?void 0:d.token;if(N){try{const E=localStorage.getItem("salama-lama-store"),L=E?JSON.parse(E):{state:{}};L.state||(L.state={}),L.state.authentication_state||(L.state.authentication_state={current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null}),L.state.authentication_state.auth_token=N,L.state.authentication_state.current_user=((m=T.data)==null?void 0:m.user)||null,L.state.authentication_state.authentication_status.is_authenticated=!1,localStorage.setItem("salama-lama-store",JSON.stringify(L))}catch(E){console.error("Error storing guest token:",E)}return s.headers.Authorization=`Bearer ${N}`,mo=!1,Q(s)}}catch(T){console.error("[GUEST AUTH] Failed to obtain guest token:",T),mo=!1}}if(mo=!1,!w&&!v&&!M){const T=encodeURIComponent(f+window.location.search);f.startsWith("/admin")?window.location.href=`/admin/login?returnTo=${T}`:f.startsWith("/staff")?window.location.href=`/staff/login?returnTo=${T}`:window.location.href=`/login?returnTo=${T}`}}}return Promise.reject(t)});/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ow=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=u.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>u.createElement("svg",{ref:c,...uS,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:Ow("lucide",a),...l},[...o.map(([d,m])=>u.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,s)=>{const r=u.forwardRef(({className:n,...a},i)=>u.createElement(mS,{ref:i,iconNode:s,className:Ow(`lucide-${dS(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=ie("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=ie("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=ie("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=ie("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=ie("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ie("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=ie("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ie("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ie("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ie("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ie("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=ie("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ie("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ie("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ie("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=ie("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ie("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=ie("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=ie("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ie("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ie("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ie("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=ie("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=ie("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ie("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ee(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function Pg(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function qn(...t){return s=>{let r=!1;const n=t.map(a=>{const i=Pg(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Pg(t[a],null)}}}}function _t(...t){return u.useCallback(qn(...t),t)}function OS(t,s){const r=u.createContext(s),n=i=>{const{children:o,...l}=i,c=u.useMemo(()=>l,Object.values(l));return e.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function a(i){const o=u.useContext(r);if(o)return o;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function Ta(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o),c=r.length;r=[...r,o];const d=x=>{var g;const{scope:f,children:b,...h}=x,p=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,v=u.useMemo(()=>h,Object.values(h));return e.jsx(p.Provider,{value:v,children:b})};d.displayName=i+"Provider";function m(x,f){var p;const b=((p=f==null?void 0:f[t])==null?void 0:p[c])||l,h=u.useContext(b);if(h)return h;if(o!==void 0)return o;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,$S(a,...s)]}function $S(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const x=c(i)[`__scope${d}`];return{...l,...x}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var Ms=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},IS=qd[" useInsertionEffect ".trim().toString()]||Ms;function xu({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,i,o]=zS({defaultProp:s,onChange:r}),l=t!==void 0,c=l?t:a;{const m=u.useRef(t!==void 0);u.useEffect(()=>{const x=m.current;x!==l&&console.warn(`${n} is changing from ${x?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,n])}const d=u.useCallback(m=>{var x;if(l){const f=BS(m)?m(t):m;f!==t&&((x=o.current)==null||x.call(o,f))}else i(m)},[l,t,i,o]);return[c,d]}function zS({defaultProp:t,onChange:s}){const[r,n]=u.useState(t),a=u.useRef(r),i=u.useRef(s);return IS(()=>{i.current=s},[s]),u.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function BS(t){return typeof t=="function"}function qS(t){const s=US(t),r=u.forwardRef((n,a)=>{const{children:i,...o}=n,l=u.Children.toArray(i),c=l.find(VS);if(c){const d=c.props.children,m=l.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...o,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,m):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function US(t){const s=u.forwardRef((r,n)=>{const{children:a,...i}=r;if(u.isValidElement(a)){const o=QS(a),l=HS(i,a.props);return a.type!==u.Fragment&&(l.ref=n?qn(n,o):o),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var WS=Symbol("radix.slottable");function VS(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===WS}function HS(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function QS(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var KS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=KS.reduce((t,s)=>{const r=qS(`Primitive.${s}`),n=u.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function H0(t,s){t&&Bi.flushSync(()=>t.dispatchEvent(s))}function Ag(t){const s=YS(t),r=u.forwardRef((n,a)=>{const{children:i,...o}=n,l=u.Children.toArray(i),c=l.find(XS);if(c){const d=c.props.children,m=l.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...o,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,m):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function YS(t){const s=u.forwardRef((r,n)=>{const{children:a,...i}=r;if(u.isValidElement(a)){const o=ZS(a),l=JS(i,a.props);return a.type!==u.Fragment&&(l.ref=n?qn(n,o):o),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var GS=Symbol("radix.slottable");function XS(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GS}function JS(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function ZS(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Q0(t){const s=t+"CollectionProvider",[r,n]=Ta(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:g}=p,j=St.useRef(null),y=St.useRef(new Map).current;return e.jsx(a,{scope:v,itemMap:y,collectionRef:j,children:g})};o.displayName=s;const l=t+"CollectionSlot",c=Ag(l),d=St.forwardRef((p,v)=>{const{scope:g,children:j}=p,y=i(l,g),w=_t(v,y.collectionRef);return e.jsx(c,{ref:w,children:j})});d.displayName=l;const m=t+"CollectionItemSlot",x="data-radix-collection-item",f=Ag(m),b=St.forwardRef((p,v)=>{const{scope:g,children:j,...y}=p,w=St.useRef(null),M=_t(v,w),T=i(m,g);return St.useEffect(()=>(T.itemMap.set(w,{ref:w,...y}),()=>void T.itemMap.delete(w))),e.jsx(f,{[x]:"",ref:M,children:j})});b.displayName=m;function h(p){const v=i(t+"CollectionConsumer",p);return St.useCallback(()=>{const j=v.collectionRef.current;if(!j)return[];const y=Array.from(j.querySelectorAll(`[${x}]`));return Array.from(v.itemMap.values()).sort((T,N)=>y.indexOf(T.ref.current)-y.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:d,ItemSlot:b},h,n]}var eE=u.createContext(void 0);function Yw(t){const s=u.useContext(eE);return t||s||"ltr"}function ds(t){const s=u.useRef(t);return u.useEffect(()=>{s.current=t}),u.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function tE(t,s=globalThis==null?void 0:globalThis.document){const r=ds(t);u.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var sE="DismissableLayer",mh="dismissableLayer.update",rE="dismissableLayer.pointerDownOutside",nE="dismissableLayer.focusOutside",Fg,Gw=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hu=u.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=u.useContext(Gw),[m,x]=u.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=u.useState({}),h=_t(s,N=>x(N)),p=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=p.indexOf(v),j=m?p.indexOf(m):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,w=j>=g,M=iE(N=>{const E=N.target,L=[...d.branches].some(k=>k.contains(E));!w||L||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},f),T=oE(N=>{const E=N.target;[...d.branches].some(k=>k.contains(E))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},f);return tE(N=>{j===d.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),u.useEffect(()=>{if(m)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Fg=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),Tg(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Fg)}},[m,f,r,d]),u.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),Tg())},[m,d]),u.useEffect(()=>{const N=()=>b({});return document.addEventListener(mh,N),()=>document.removeEventListener(mh,N)},[]),e.jsx(Ze.div,{...c,ref:h,style:{pointerEvents:y?w?"auto":"none":void 0,...t.style},onFocusCapture:Ee(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Ee(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Ee(t.onPointerDownCapture,M.onPointerDownCapture)})});hu.displayName=sE;var aE="DismissableLayerBranch",Xw=u.forwardRef((t,s)=>{const r=u.useContext(Gw),n=u.useRef(null),a=_t(s,n);return u.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ze.div,{...t,ref:a})});Xw.displayName=aE;function iE(t,s=globalThis==null?void 0:globalThis.document){const r=ds(t),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Jw(rE,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function oE(t,s=globalThis==null?void 0:globalThis.document){const r=ds(t),n=u.useRef(!1);return u.useEffect(()=>{const a=i=>{i.target&&!n.current&&Jw(nE,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Tg(){const t=new CustomEvent(mh);document.dispatchEvent(t)}function Jw(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?H0(a,i):a.dispatchEvent(i)}var lE=hu,cE=Xw,hm=0;function Zw(){u.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Mg()),document.body.insertAdjacentElement("beforeend",t[1]??Mg()),hm++,()=>{hm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),hm--}},[])}function Mg(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pm="focusScope.autoFocusOnMount",fm="focusScope.autoFocusOnUnmount",Rg={bubbles:!1,cancelable:!0},dE="FocusScope",K0=u.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,c]=u.useState(null),d=ds(a),m=ds(i),x=u.useRef(null),f=_t(s,p=>c(p)),b=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let p=function(y){if(b.paused||!l)return;const w=y.target;l.contains(w)?x.current=w:Zr(x.current,{select:!0})},v=function(y){if(b.paused||!l)return;const w=y.relatedTarget;w!==null&&(l.contains(w)||Zr(x.current,{select:!0}))},g=function(y){if(document.activeElement===document.body)for(const M of y)M.removedNodes.length>0&&Zr(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const j=new MutationObserver(g);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),j.disconnect()}}},[n,l,b.paused]),u.useEffect(()=>{if(l){Dg.add(b);const p=document.activeElement;if(!l.contains(p)){const g=new CustomEvent(pm,Rg);l.addEventListener(pm,d),l.dispatchEvent(g),g.defaultPrevented||(uE(fE(e2(l)),{select:!0}),document.activeElement===p&&Zr(l))}return()=>{l.removeEventListener(pm,d),setTimeout(()=>{const g=new CustomEvent(fm,Rg);l.addEventListener(fm,m),l.dispatchEvent(g),g.defaultPrevented||Zr(p??document.body,{select:!0}),l.removeEventListener(fm,m),Dg.remove(b)},0)}}},[l,d,m,b]);const h=u.useCallback(p=>{if(!r&&!n||b.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,g=document.activeElement;if(v&&g){const j=p.currentTarget,[y,w]=mE(j);y&&w?!p.shiftKey&&g===w?(p.preventDefault(),r&&Zr(y,{select:!0})):p.shiftKey&&g===y&&(p.preventDefault(),r&&Zr(w,{select:!0})):g===j&&p.preventDefault()}},[r,n,b.paused]);return e.jsx(Ze.div,{tabIndex:-1,...o,ref:f,onKeyDown:h})});K0.displayName=dE;function uE(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(Zr(n,{select:s}),document.activeElement!==r)return}function mE(t){const s=e2(t),r=Lg(s,t),n=Lg(s.reverse(),t);return[r,n]}function e2(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Lg(t,s){for(const r of t)if(!xE(r,{upTo:s}))return r}function xE(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hE(t){return t instanceof HTMLInputElement&&"select"in t}function Zr(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&hE(t)&&s&&t.select()}}var Dg=pE();function pE(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=Og(t,s),t.unshift(s)},remove(s){var r;t=Og(t,s),(r=t[0])==null||r.resume()}}}function Og(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function fE(t){return t.filter(s=>s.tagName!=="A")}var gE=qd[" useId ".trim().toString()]||(()=>{}),yE=0;function oi(t){const[s,r]=u.useState(gE());return Ms(()=>{r(n=>n??String(yE++))},[t]),s?`radix-${s}`:""}const bE=["top","right","bottom","left"],Ln=Math.min,ms=Math.max,Ad=Math.round,hc=Math.floor,fr=t=>({x:t,y:t}),vE={left:"right",right:"left",bottom:"top",top:"bottom"},jE={start:"end",end:"start"};function xh(t,s,r){return ms(t,Ln(s,r))}function Br(t,s){return typeof t=="function"?t(s):t}function qr(t){return t.split("-")[0]}function Ki(t){return t.split("-")[1]}function Y0(t){return t==="x"?"y":"x"}function G0(t){return t==="y"?"height":"width"}const wE=new Set(["top","bottom"]);function dr(t){return wE.has(qr(t))?"y":"x"}function X0(t){return Y0(dr(t))}function NE(t,s,r){r===void 0&&(r=!1);const n=Ki(t),a=X0(t),i=G0(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(o=Fd(o)),[o,Fd(o)]}function _E(t){const s=Fd(t);return[hh(t),s,hh(s)]}function hh(t){return t.replace(/start|end/g,s=>jE[s])}const $g=["left","right"],Ig=["right","left"],kE=["top","bottom"],CE=["bottom","top"];function SE(t,s,r){switch(t){case"top":case"bottom":return r?s?Ig:$g:s?$g:Ig;case"left":case"right":return s?kE:CE;default:return[]}}function EE(t,s,r,n){const a=Ki(t);let i=SE(qr(t),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),s&&(i=i.concat(i.map(hh)))),i}function Fd(t){return t.replace(/left|right|bottom|top/g,s=>vE[s])}function PE(t){return{top:0,right:0,bottom:0,left:0,...t}}function t2(t){return typeof t!="number"?PE(t):{top:t,right:t,bottom:t,left:t}}function Td(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function zg(t,s,r){let{reference:n,floating:a}=t;const i=dr(s),o=X0(s),l=G0(o),c=qr(s),d=i==="y",m=n.x+n.width/2-a.width/2,x=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;let b;switch(c){case"top":b={x:m,y:n.y-a.height};break;case"bottom":b={x:m,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y:x};break;case"left":b={x:n.x-a.width,y:x};break;default:b={x:n.x,y:n.y}}switch(Ki(s)){case"start":b[o]-=f*(r&&d?-1:1);break;case"end":b[o]+=f*(r&&d?-1:1);break}return b}const AE=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(s));let d=await o.getElementRects({reference:t,floating:s,strategy:a}),{x:m,y:x}=zg(d,n,c),f=n,b={},h=0;for(let p=0;p<l.length;p++){const{name:v,fn:g}=l[p],{x:j,y,data:w,reset:M}=await g({x:m,y:x,initialPlacement:n,placement:f,strategy:a,middlewareData:b,rects:d,platform:o,elements:{reference:t,floating:s}});m=j??m,x=y??x,b={...b,[v]:{...b[v],...w}},M&&h<=50&&(h++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(d=M.rects===!0?await o.getElementRects({reference:t,floating:s,strategy:a}):M.rects),{x:m,y:x}=zg(d,f,c)),p=-1)}return{x:m,y:x,placement:f,strategy:a,middlewareData:b}};async function fl(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:x="floating",altBoundary:f=!1,padding:b=0}=Br(s,t),h=t2(b),v=l[f?x==="floating"?"reference":"floating":x],g=Td(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:c})),j=x==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),w=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},M=Td(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:y,strategy:c}):j);return{top:(g.top-M.top+h.top)/w.y,bottom:(M.bottom-g.bottom+h.bottom)/w.y,left:(g.left-M.left+h.left)/w.x,right:(M.right-g.right+h.right)/w.x}}const FE=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=s,{element:d,padding:m=0}=Br(t,s)||{};if(d==null)return{};const x=t2(m),f={x:r,y:n},b=X0(a),h=G0(b),p=await o.getDimensions(d),v=b==="y",g=v?"top":"left",j=v?"bottom":"right",y=v?"clientHeight":"clientWidth",w=i.reference[h]+i.reference[b]-f[b]-i.floating[h],M=f[b]-i.reference[b],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let N=T?T[y]:0;(!N||!await(o.isElement==null?void 0:o.isElement(T)))&&(N=l.floating[y]||i.floating[h]);const E=w/2-M/2,L=N/2-p[h]/2-1,k=Ln(x[g],L),S=Ln(x[j],L),F=k,P=N-p[h]-S,I=N/2-p[h]/2+E,H=xh(F,I,P),z=!c.arrow&&Ki(a)!=null&&I!==H&&i.reference[h]/2-(I<F?k:S)-p[h]/2<0,B=z?I<F?I-F:I-P:0;return{[b]:f[b]+B,data:{[b]:H,centerOffset:I-H-B,...z&&{alignmentOffset:B}},reset:z}}}),TE=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=s,{mainAxis:m=!0,crossAxis:x=!0,fallbackPlacements:f,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...v}=Br(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const g=qr(a),j=dr(l),y=qr(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),M=f||(y||!p?[Fd(l)]:_E(l)),T=h!=="none";!f&&T&&M.push(...EE(l,p,h,w));const N=[l,...M],E=await fl(s,v),L=[];let k=((n=i.flip)==null?void 0:n.overflows)||[];if(m&&L.push(E[g]),x){const I=NE(a,o,w);L.push(E[I[0]],E[I[1]])}if(k=[...k,{placement:a,overflows:L}],!L.every(I=>I<=0)){var S,F;const I=(((S=i.flip)==null?void 0:S.index)||0)+1,H=N[I];if(H&&(!(x==="alignment"?j!==dr(H):!1)||k.every(C=>dr(C.placement)===j?C.overflows[0]>0:!0)))return{data:{index:I,overflows:k},reset:{placement:H}};let z=(F=k.filter(B=>B.overflows[0]<=0).sort((B,C)=>B.overflows[1]-C.overflows[1])[0])==null?void 0:F.placement;if(!z)switch(b){case"bestFit":{var P;const B=(P=k.filter(C=>{if(T){const R=dr(C.placement);return R===j||R==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(R=>R>0).reduce((R,_)=>R+_,0)]).sort((C,R)=>C[1]-R[1])[0])==null?void 0:P[0];B&&(z=B);break}case"initialPlacement":z=l;break}if(a!==z)return{reset:{placement:z}}}return{}}}};function Bg(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function qg(t){return bE.some(s=>t[s]>=0)}const ME=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=Br(t,s);switch(n){case"referenceHidden":{const i=await fl(s,{...a,elementContext:"reference"}),o=Bg(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qg(o)}}}case"escaped":{const i=await fl(s,{...a,altBoundary:!0}),o=Bg(i,r.floating);return{data:{escapedOffsets:o,escaped:qg(o)}}}default:return{}}}}},s2=new Set(["left","top"]);async function RE(t,s){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=qr(r),l=Ki(r),c=dr(r)==="y",d=s2.has(o)?-1:1,m=i&&c?-1:1,x=Br(s,t);let{mainAxis:f,crossAxis:b,alignmentAxis:h}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return l&&typeof h=="number"&&(b=l==="end"?h*-1:h),c?{x:b*m,y:f*d}:{x:f*d,y:b*m}}const LE=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=s,c=await RE(s,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},DE=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:g,y:j}=v;return{x:g,y:j}}},...c}=Br(t,s),d={x:r,y:n},m=await fl(s,c),x=dr(qr(a)),f=Y0(x);let b=d[f],h=d[x];if(i){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",j=b+m[v],y=b-m[g];b=xh(j,b,y)}if(o){const v=x==="y"?"top":"left",g=x==="y"?"bottom":"right",j=h+m[v],y=h-m[g];h=xh(j,h,y)}const p=l.fn({...s,[f]:b,[x]:h});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[f]:i,[x]:o}}}}}},OE=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=s,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Br(t,s),m={x:r,y:n},x=dr(a),f=Y0(x);let b=m[f],h=m[x];const p=Br(l,s),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const y=f==="y"?"height":"width",w=i.reference[f]-i.floating[y]+v.mainAxis,M=i.reference[f]+i.reference[y]-v.mainAxis;b<w?b=w:b>M&&(b=M)}if(d){var g,j;const y=f==="y"?"width":"height",w=s2.has(qr(a)),M=i.reference[x]-i.floating[y]+(w&&((g=o.offset)==null?void 0:g[x])||0)+(w?0:v.crossAxis),T=i.reference[x]+i.reference[y]+(w?0:((j=o.offset)==null?void 0:j[x])||0)-(w?v.crossAxis:0);h<M?h=M:h>T&&(h=T)}return{[f]:b,[x]:h}}}},$E=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:i,platform:o,elements:l}=s,{apply:c=()=>{},...d}=Br(t,s),m=await fl(s,d),x=qr(a),f=Ki(a),b=dr(a)==="y",{width:h,height:p}=i.floating;let v,g;x==="top"||x==="bottom"?(v=x,g=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=x,v=f==="end"?"top":"bottom");const j=p-m.top-m.bottom,y=h-m.left-m.right,w=Ln(p-m[v],j),M=Ln(h-m[g],y),T=!s.middlewareData.shift;let N=w,E=M;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(E=y),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(N=j),T&&!f){const k=ms(m.left,0),S=ms(m.right,0),F=ms(m.top,0),P=ms(m.bottom,0);b?E=h-2*(k!==0||S!==0?k+S:ms(m.left,m.right)):N=p-2*(F!==0||P!==0?F+P:ms(m.top,m.bottom))}await c({...s,availableWidth:E,availableHeight:N});const L=await o.getDimensions(l.floating);return h!==L.width||p!==L.height?{reset:{rects:!0}}:{}}}};function pu(){return typeof window<"u"}function Yi(t){return r2(t)?(t.nodeName||"").toLowerCase():"#document"}function fs(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function vr(t){var s;return(s=(r2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function r2(t){return pu()?t instanceof Node||t instanceof fs(t).Node:!1}function Ys(t){return pu()?t instanceof Element||t instanceof fs(t).Element:!1}function br(t){return pu()?t instanceof HTMLElement||t instanceof fs(t).HTMLElement:!1}function Ug(t){return!pu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fs(t).ShadowRoot}const IE=new Set(["inline","contents"]);function $l(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=Gs(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!IE.has(a)}const zE=new Set(["table","td","th"]);function BE(t){return zE.has(Yi(t))}const qE=[":popover-open",":modal"];function fu(t){return qE.some(s=>{try{return t.matches(s)}catch{return!1}})}const UE=["transform","translate","scale","rotate","perspective"],WE=["transform","translate","scale","rotate","perspective","filter"],VE=["paint","layout","strict","content"];function J0(t){const s=Z0(),r=Ys(t)?Gs(t):t;return UE.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||WE.some(n=>(r.willChange||"").includes(n))||VE.some(n=>(r.contain||"").includes(n))}function HE(t){let s=Dn(t);for(;br(s)&&!Ri(s);){if(J0(s))return s;if(fu(s))return null;s=Dn(s)}return null}function Z0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const QE=new Set(["html","body","#document"]);function Ri(t){return QE.has(Yi(t))}function Gs(t){return fs(t).getComputedStyle(t)}function gu(t){return Ys(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Dn(t){if(Yi(t)==="html")return t;const s=t.assignedSlot||t.parentNode||Ug(t)&&t.host||vr(t);return Ug(s)?s.host:s}function n2(t){const s=Dn(t);return Ri(s)?t.ownerDocument?t.ownerDocument.body:t.body:br(s)&&$l(s)?s:n2(s)}function gl(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=n2(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),o=fs(a);if(i){const l=ph(o);return s.concat(o,o.visualViewport||[],$l(a)?a:[],l&&r?gl(l):[])}return s.concat(a,gl(a,[],r))}function ph(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function a2(t){const s=Gs(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=br(t),i=a?t.offsetWidth:r,o=a?t.offsetHeight:n,l=Ad(r)!==i||Ad(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function ep(t){return Ys(t)?t:t.contextElement}function li(t){const s=ep(t);if(!br(s))return fr(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=a2(s);let o=(i?Ad(r.width):r.width)/n,l=(i?Ad(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const KE=fr(0);function i2(t){const s=fs(t);return!Z0()||!s.visualViewport?KE:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function YE(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==fs(t)?!1:s}function Sa(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=ep(t);let o=fr(1);s&&(n?Ys(n)&&(o=li(n)):o=li(t));const l=YE(i,r,n)?i2(i):fr(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,m=a.width/o.x,x=a.height/o.y;if(i){const f=fs(i),b=n&&Ys(n)?fs(n):n;let h=f,p=ph(h);for(;p&&n&&b!==h;){const v=li(p),g=p.getBoundingClientRect(),j=Gs(p),y=g.left+(p.clientLeft+parseFloat(j.paddingLeft))*v.x,w=g.top+(p.clientTop+parseFloat(j.paddingTop))*v.y;c*=v.x,d*=v.y,m*=v.x,x*=v.y,c+=y,d+=w,h=fs(p),p=ph(h)}}return Td({width:m,height:x,x:c,y:d})}function yu(t,s){const r=gu(t).scrollLeft;return s?s.left+r:Sa(vr(t)).left+r}function o2(t,s){const r=t.getBoundingClientRect(),n=r.left+s.scrollLeft-yu(t,r),a=r.top+s.scrollTop;return{x:n,y:a}}function GE(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",o=vr(n),l=s?fu(s.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=fr(1);const m=fr(0),x=br(n);if((x||!x&&!i)&&((Yi(n)!=="body"||$l(o))&&(c=gu(n)),br(n))){const b=Sa(n);d=li(n),m.x=b.x+n.clientLeft,m.y=b.y+n.clientTop}const f=o&&!x&&!i?o2(o,c):fr(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+m.x+f.x,y:r.y*d.y-c.scrollTop*d.y+m.y+f.y}}function XE(t){return Array.from(t.getClientRects())}function JE(t){const s=vr(t),r=gu(t),n=t.ownerDocument.body,a=ms(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=ms(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+yu(t);const l=-r.scrollTop;return Gs(n).direction==="rtl"&&(o+=ms(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const Wg=25;function ZE(t,s){const r=fs(t),n=vr(t),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const m=Z0();(!m||m&&s==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=yu(n);if(d<=0){const m=n.ownerDocument,x=m.body,f=getComputedStyle(x),b=m.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,h=Math.abs(n.clientWidth-x.clientWidth-b);h<=Wg&&(i-=h)}else d<=Wg&&(i+=d);return{width:i,height:o,x:l,y:c}}const e8=new Set(["absolute","fixed"]);function t8(t,s){const r=Sa(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=br(t)?li(t):fr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function Vg(t,s,r){let n;if(s==="viewport")n=ZE(t,r);else if(s==="document")n=JE(vr(t));else if(Ys(s))n=t8(s,r);else{const a=i2(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return Td(n)}function l2(t,s){const r=Dn(t);return r===s||!Ys(r)||Ri(r)?!1:Gs(r).position==="fixed"||l2(r,s)}function s8(t,s){const r=s.get(t);if(r)return r;let n=gl(t,[],!1).filter(l=>Ys(l)&&Yi(l)!=="body"),a=null;const i=Gs(t).position==="fixed";let o=i?Dn(t):t;for(;Ys(o)&&!Ri(o);){const l=Gs(o),c=J0(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&e8.has(a.position)||$l(o)&&!c&&l2(t,o))?n=n.filter(m=>m!==o):a=l,o=Dn(o)}return s.set(t,n),n}function r8(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const o=[...r==="clippingAncestors"?fu(s)?[]:s8(s,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,m)=>{const x=Vg(s,m,a);return d.top=ms(x.top,d.top),d.right=Ln(x.right,d.right),d.bottom=Ln(x.bottom,d.bottom),d.left=ms(x.left,d.left),d},Vg(s,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function n8(t){const{width:s,height:r}=a2(t);return{width:s,height:r}}function a8(t,s,r){const n=br(s),a=vr(s),i=r==="fixed",o=Sa(t,!0,i,s);let l={scrollLeft:0,scrollTop:0};const c=fr(0);function d(){c.x=yu(a)}if(n||!n&&!i)if((Yi(s)!=="body"||$l(a))&&(l=gu(s)),n){const b=Sa(s,!0,i,s);c.x=b.x+s.clientLeft,c.y=b.y+s.clientTop}else a&&d();i&&!n&&a&&d();const m=a&&!n&&!i?o2(a,l):fr(0),x=o.left+l.scrollLeft-c.x-m.x,f=o.top+l.scrollTop-c.y-m.y;return{x,y:f,width:o.width,height:o.height}}function gm(t){return Gs(t).position==="static"}function Hg(t,s){if(!br(t)||Gs(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return vr(t)===r&&(r=r.ownerDocument.body),r}function c2(t,s){const r=fs(t);if(fu(t))return r;if(!br(t)){let a=Dn(t);for(;a&&!Ri(a);){if(Ys(a)&&!gm(a))return a;a=Dn(a)}return r}let n=Hg(t,s);for(;n&&BE(n)&&gm(n);)n=Hg(n,s);return n&&Ri(n)&&gm(n)&&!J0(n)?r:n||HE(t)||r}const i8=async function(t){const s=this.getOffsetParent||c2,r=this.getDimensions,n=await r(t.floating);return{reference:a8(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function o8(t){return Gs(t).direction==="rtl"}const l8={convertOffsetParentRelativeRectToViewportRelativeRect:GE,getDocumentElement:vr,getClippingRect:r8,getOffsetParent:c2,getElementRects:i8,getClientRects:XE,getDimensions:n8,getScale:li,isElement:Ys,isRTL:o8};function d2(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function c8(t,s){let r=null,n;const a=vr(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:m,top:x,width:f,height:b}=d;if(l||s(),!f||!b)return;const h=hc(x),p=hc(a.clientWidth-(m+f)),v=hc(a.clientHeight-(x+b)),g=hc(m),y={rootMargin:-h+"px "+-p+"px "+-v+"px "+-g+"px",threshold:ms(0,Ln(1,c))||1};let w=!0;function M(T){const N=T[0].intersectionRatio;if(N!==c){if(!w)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!d2(d,t.getBoundingClientRect())&&o(),w=!1}try{r=new IntersectionObserver(M,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(M,y)}r.observe(t)}return o(!0),i}function d8(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=ep(t),m=a||i?[...d?gl(d):[],...gl(s)]:[];m.forEach(g=>{a&&g.addEventListener("scroll",r,{passive:!0}),i&&g.addEventListener("resize",r)});const x=d&&l?c8(d,r):null;let f=-1,b=null;o&&(b=new ResizeObserver(g=>{let[j]=g;j&&j.target===d&&b&&(b.unobserve(s),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=b)==null||y.observe(s)})),r()}),d&&!c&&b.observe(d),b.observe(s));let h,p=c?Sa(t):null;c&&v();function v(){const g=Sa(t);p&&!d2(p,g)&&r(),p=g,h=requestAnimationFrame(v)}return r(),()=>{var g;m.forEach(j=>{a&&j.removeEventListener("scroll",r),i&&j.removeEventListener("resize",r)}),x==null||x(),(g=b)==null||g.disconnect(),b=null,c&&cancelAnimationFrame(h)}}const u8=LE,m8=DE,x8=TE,h8=$E,p8=ME,Qg=FE,f8=OE,g8=(t,s,r)=>{const n=new Map,a={platform:l8,...r},i={...a.platform,_c:n};return AE(t,s,{...a,platform:i})};var y8=typeof document<"u",b8=function(){},Qc=y8?u.useLayoutEffect:b8;function Md(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!Md(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!Md(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function u2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Kg(t,s){const r=u2(t);return Math.round(s*r)/r}function ym(t){const s=u.useRef(t);return Qc(()=>{s.current=t}),s}function v8(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[m,x]=u.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[f,b]=u.useState(n);Md(f,n)||b(n);const[h,p]=u.useState(null),[v,g]=u.useState(null),j=u.useCallback(C=>{C!==T.current&&(T.current=C,p(C))},[]),y=u.useCallback(C=>{C!==N.current&&(N.current=C,g(C))},[]),w=i||h,M=o||v,T=u.useRef(null),N=u.useRef(null),E=u.useRef(m),L=c!=null,k=ym(c),S=ym(a),F=ym(d),P=u.useCallback(()=>{if(!T.current||!N.current)return;const C={placement:s,strategy:r,middleware:f};S.current&&(C.platform=S.current),g8(T.current,N.current,C).then(R=>{const _={...R,isPositioned:F.current!==!1};I.current&&!Md(E.current,_)&&(E.current=_,Bi.flushSync(()=>{x(_)}))})},[f,s,r,S,F]);Qc(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,x(C=>({...C,isPositioned:!1})))},[d]);const I=u.useRef(!1);Qc(()=>(I.current=!0,()=>{I.current=!1}),[]),Qc(()=>{if(w&&(T.current=w),M&&(N.current=M),w&&M){if(k.current)return k.current(w,M,P);P()}},[w,M,P,k,L]);const H=u.useMemo(()=>({reference:T,floating:N,setReference:j,setFloating:y}),[j,y]),z=u.useMemo(()=>({reference:w,floating:M}),[w,M]),B=u.useMemo(()=>{const C={position:r,left:0,top:0};if(!z.floating)return C;const R=Kg(z.floating,m.x),_=Kg(z.floating,m.y);return l?{...C,transform:"translate("+R+"px, "+_+"px)",...u2(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:_}},[r,l,z.floating,m.x,m.y]);return u.useMemo(()=>({...m,update:P,refs:H,elements:z,floatingStyles:B}),[m,P,H,z,B])}const j8=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?Qg({element:n.current,padding:a}).fn(r):{}:n?Qg({element:n,padding:a}).fn(r):{}}}},w8=(t,s)=>({...u8(t),options:[t,s]}),N8=(t,s)=>({...m8(t),options:[t,s]}),_8=(t,s)=>({...f8(t),options:[t,s]}),k8=(t,s)=>({...x8(t),options:[t,s]}),C8=(t,s)=>({...h8(t),options:[t,s]}),S8=(t,s)=>({...p8(t),options:[t,s]}),E8=(t,s)=>({...j8(t),options:[t,s]});var P8="Arrow",m2=u.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(Ze.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});m2.displayName=P8;var A8=m2;function F8(t){const[s,r]=u.useState(void 0);return Ms(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var tp="Popper",[x2,h2]=Ta(tp),[T8,p2]=x2(tp),f2=t=>{const{__scopePopper:s,children:r}=t,[n,a]=u.useState(null);return e.jsx(T8,{scope:s,anchor:n,onAnchorChange:a,children:r})};f2.displayName=tp;var g2="PopperAnchor",y2=u.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=p2(g2,r),o=u.useRef(null),l=_t(s,o),c=u.useRef(null);return u.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||o.current,d!==c.current&&i.onAnchorChange(c.current)}),n?null:e.jsx(Ze.div,{...a,ref:l})});y2.displayName=g2;var sp="PopperContent",[M8,R8]=x2(sp),b2=u.forwardRef((t,s)=>{var le,K,A,$,re,ve;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:x="partial",hideWhenDetached:f=!1,updatePositionStrategy:b="optimized",onPlaced:h,...p}=t,v=p2(sp,r),[g,j]=u.useState(null),y=_t(s,xe=>j(xe)),[w,M]=u.useState(null),T=F8(w),N=(T==null?void 0:T.width)??0,E=(T==null?void 0:T.height)??0,L=n+(i!=="center"?"-"+i:""),k=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},S=Array.isArray(d)?d:[d],F=S.length>0,P={padding:k,boundary:S.filter(D8),altBoundary:F},{refs:I,floatingStyles:H,placement:z,isPositioned:B,middlewareData:C}=v8({strategy:"fixed",placement:L,whileElementsMounted:(...xe)=>d8(...xe,{animationFrame:b==="always"}),elements:{reference:v.anchor},middleware:[w8({mainAxis:a+E,alignmentAxis:o}),c&&N8({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?_8():void 0,...P}),c&&k8({...P}),C8({...P,apply:({elements:xe,rects:ke,availableWidth:Ce,availableHeight:Pe})=>{const{width:ne,height:be}=ke.reference,U=xe.floating.style;U.setProperty("--radix-popper-available-width",`${Ce}px`),U.setProperty("--radix-popper-available-height",`${Pe}px`),U.setProperty("--radix-popper-anchor-width",`${ne}px`),U.setProperty("--radix-popper-anchor-height",`${be}px`)}}),w&&E8({element:w,padding:l}),O8({arrowWidth:N,arrowHeight:E}),f&&S8({strategy:"referenceHidden",...P})]}),[R,_]=w2(z),q=ds(h);Ms(()=>{B&&(q==null||q())},[B,q]);const O=(le=C.arrow)==null?void 0:le.x,V=(K=C.arrow)==null?void 0:K.y,D=((A=C.arrow)==null?void 0:A.centerOffset)!==0,[G,se]=u.useState();return Ms(()=>{g&&se(window.getComputedStyle(g).zIndex)},[g]),e.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:B?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[($=C.transformOrigin)==null?void 0:$.x,(re=C.transformOrigin)==null?void 0:re.y].join(" "),...((ve=C.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(M8,{scope:r,placedSide:R,onArrowChange:M,arrowX:O,arrowY:V,shouldHideArrow:D,children:e.jsx(Ze.div,{"data-side":R,"data-align":_,...p,ref:y,style:{...p.style,animation:B?void 0:"none"}})})})});b2.displayName=sp;var v2="PopperArrow",L8={top:"bottom",right:"left",bottom:"top",left:"right"},j2=u.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=R8(v2,n),o=L8[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(A8,{...a,ref:r,style:{...a.style,display:"block"}})})});j2.displayName=v2;function D8(t){return t!==null}var O8=t=>({name:"transformOrigin",options:t,fn(s){var v,g,j;const{placement:r,rects:n,middlewareData:a}=s,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,m]=w2(r),x={start:"0%",center:"50%",end:"100%"}[m],f=(((g=a.arrow)==null?void 0:g.x)??0)+l/2,b=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let h="",p="";return d==="bottom"?(h=o?x:`${f}px`,p=`${-c}px`):d==="top"?(h=o?x:`${f}px`,p=`${n.floating.height+c}px`):d==="right"?(h=`${-c}px`,p=o?x:`${b}px`):d==="left"&&(h=`${n.floating.width+c}px`,p=o?x:`${b}px`),{data:{x:h,y:p}}}});function w2(t){const[s,r="center"]=t.split("-");return[s,r]}var $8=f2,I8=y2,z8=b2,B8=j2,q8="Portal",bu=u.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,i]=u.useState(!1);Ms(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?q5.createPortal(e.jsx(Ze.div,{...n,ref:s}),o):null});bu.displayName=q8;function U8(t,s){return u.useReducer((r,n)=>s[r][n]??r,t)}var Vr=t=>{const{present:s,children:r}=t,n=W8(s),a=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),i=_t(n.ref,V8(a));return typeof r=="function"||n.isPresent?u.cloneElement(a,{ref:i}):null};Vr.displayName="Presence";function W8(t){const[s,r]=u.useState(),n=u.useRef(null),a=u.useRef(t),i=u.useRef("none"),o=t?"mounted":"unmounted",[l,c]=U8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=pc(n.current);i.current=l==="mounted"?d:"none"},[l]),Ms(()=>{const d=n.current,m=a.current;if(m!==t){const f=i.current,b=pc(d);t?c("MOUNT"):b==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(m&&f!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Ms(()=>{if(s){let d;const m=s.ownerDocument.defaultView??window,x=b=>{const p=pc(n.current).includes(CSS.escape(b.animationName));if(b.target===s&&p&&(c("ANIMATION_END"),!a.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},f=b=>{b.target===s&&(i.current=pc(n.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",x),s.addEventListener("animationend",x),()=>{m.clearTimeout(d),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",x),s.removeEventListener("animationend",x)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function pc(t){return(t==null?void 0:t.animationName)||"none"}function V8(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var bm="rovingFocusGroup.onEntryFocus",H8={bubbles:!1,cancelable:!0},Il="RovingFocusGroup",[fh,N2,Q8]=Q0(Il),[K8,_2]=Ta(Il,[Q8]),[Y8,G8]=K8(Il),k2=u.forwardRef((t,s)=>e.jsx(fh.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(fh.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(X8,{...t,ref:s})})}));k2.displayName=Il;var X8=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...x}=t,f=u.useRef(null),b=_t(s,f),h=Yw(i),[p,v]=xu({prop:o,defaultProp:l??null,onChange:c,caller:Il}),[g,j]=u.useState(!1),y=ds(d),w=N2(r),M=u.useRef(!1),[T,N]=u.useState(0);return u.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(bm,y),()=>E.removeEventListener(bm,y)},[y]),e.jsx(Y8,{scope:r,orientation:n,dir:h,loop:a,currentTabStopId:p,onItemFocus:u.useCallback(E=>v(E),[v]),onItemShiftTab:u.useCallback(()=>j(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:u.useCallback(()=>N(E=>E-1),[]),children:e.jsx(Ze.div,{tabIndex:g||T===0?-1:0,"data-orientation":n,...x,ref:b,style:{outline:"none",...t.style},onMouseDown:Ee(t.onMouseDown,()=>{M.current=!0}),onFocus:Ee(t.onFocus,E=>{const L=!M.current;if(E.target===E.currentTarget&&L&&!g){const k=new CustomEvent(bm,H8);if(E.currentTarget.dispatchEvent(k),!k.defaultPrevented){const S=w().filter(z=>z.focusable),F=S.find(z=>z.active),P=S.find(z=>z.id===p),H=[F,P,...S].filter(Boolean).map(z=>z.ref.current);E2(H,m)}}M.current=!1}),onBlur:Ee(t.onBlur,()=>j(!1))})})}),C2="RovingFocusGroupItem",S2=u.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=t,c=oi(),d=i||c,m=G8(C2,r),x=m.currentTabStopId===d,f=N2(r),{onFocusableItemAdd:b,onFocusableItemRemove:h,currentTabStopId:p}=m;return u.useEffect(()=>{if(n)return b(),()=>h()},[n,b,h]),e.jsx(fh.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx(Ze.span,{tabIndex:x?0:-1,"data-orientation":m.orientation,...l,ref:s,onMouseDown:Ee(t.onMouseDown,v=>{n?m.onItemFocus(d):v.preventDefault()}),onFocus:Ee(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:Ee(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){m.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=e7(v,m.orientation,m.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=f().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const w=y.indexOf(v.currentTarget);y=m.loop?t7(y,w+1):y.slice(w+1)}setTimeout(()=>E2(y))}}),children:typeof o=="function"?o({isCurrentTabStop:x,hasTabStop:p!=null}):o})})});S2.displayName=C2;var J8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z8(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function e7(t,s,r){const n=Z8(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return J8[n]}function E2(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function t7(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var s7=k2,r7=S2;function n7(t){const s=a7(t),r=u.forwardRef((n,a)=>{const{children:i,...o}=n,l=u.Children.toArray(i),c=l.find(o7);if(c){const d=c.props.children,m=l.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...o,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,m):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function a7(t){const s=u.forwardRef((r,n)=>{const{children:a,...i}=r;if(u.isValidElement(a)){const o=c7(a),l=l7(i,a.props);return a.type!==u.Fragment&&(l.ref=n?qn(n,o):o),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var i7=Symbol("radix.slottable");function o7(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===i7}function l7(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function c7(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var d7=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Oa=new WeakMap,fc=new WeakMap,gc={},vm=0,P2=function(t){return t&&(t.host||P2(t.parentNode))},u7=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=P2(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},m7=function(t,s,r,n){var a=u7(s,Array.isArray(t)?t:[t]);gc[r]||(gc[r]=new WeakMap);var i=gc[r],o=[],l=new Set,c=new Set(a),d=function(x){!x||l.has(x)||(l.add(x),d(x.parentNode))};a.forEach(d);var m=function(x){!x||c.has(x)||Array.prototype.forEach.call(x.children,function(f){if(l.has(f))m(f);else try{var b=f.getAttribute(n),h=b!==null&&b!=="false",p=(Oa.get(f)||0)+1,v=(i.get(f)||0)+1;Oa.set(f,p),i.set(f,v),o.push(f),p===1&&h&&fc.set(f,!0),v===1&&f.setAttribute(r,"true"),h||f.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return m(s),l.clear(),vm++,function(){o.forEach(function(x){var f=Oa.get(x)-1,b=i.get(x)-1;Oa.set(x,f),i.set(x,b),f||(fc.has(x)||x.removeAttribute(n),fc.delete(x)),b||x.removeAttribute(r)}),vm--,vm||(Oa=new WeakMap,Oa=new WeakMap,fc=new WeakMap,gc={})}},A2=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=d7(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),m7(n,a,r,"aria-hidden")):function(){return null}},cr=function(){return cr=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},cr.apply(this,arguments)};function F2(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function x7(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}var Kc="right-scroll-bar-position",Yc="width-before-scroll-bar",h7="with-scroll-bars-hidden",p7="--removed-body-scroll-bar-size";function jm(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function f7(t,s){var r=u.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var g7=typeof window<"u"?u.useLayoutEffect:u.useEffect,Yg=new WeakMap;function y7(t,s){var r=f7(null,function(n){return t.forEach(function(a){return jm(a,n)})});return g7(function(){var n=Yg.get(r);if(n){var a=new Set(n),i=new Set(t),o=r.current;a.forEach(function(l){i.has(l)||jm(l,null)}),i.forEach(function(l){a.has(l)||jm(l,o)})}Yg.set(r,t)},[t]),r}function b7(t){return t}function v7(t,s){s===void 0&&(s=b7);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=s(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var m=o;o=[],m.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(m){o.push(m),d()},filter:function(m){return o=o.filter(m),r}}}};return a}function j7(t){t===void 0&&(t={});var s=v7(null);return s.options=cr({async:!0,ssr:!1},t),s}var T2=function(t){var s=t.sideCar,r=F2(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return u.createElement(n,cr({},r))};T2.isSideCarExport=!0;function w7(t,s){return t.useMedium(s),T2}var M2=j7(),wm=function(){},vu=u.forwardRef(function(t,s){var r=u.useRef(null),n=u.useState({onScrollCapture:wm,onWheelCapture:wm,onTouchMoveCapture:wm}),a=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,m=t.enabled,x=t.shards,f=t.sideCar,b=t.noRelative,h=t.noIsolation,p=t.inert,v=t.allowPinchZoom,g=t.as,j=g===void 0?"div":g,y=t.gapMode,w=F2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=f,T=y7([r,s]),N=cr(cr({},w),a);return u.createElement(u.Fragment,null,m&&u.createElement(M,{sideCar:M2,removeScrollBar:d,shards:x,noRelative:b,noIsolation:h,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:y}),o?u.cloneElement(u.Children.only(l),cr(cr({},N),{ref:T})):u.createElement(j,cr({},N,{className:c,ref:T}),l))});vu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vu.classNames={fullWidth:Yc,zeroRight:Kc};var N7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=N7();return s&&t.setAttribute("nonce",s),t}function k7(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function C7(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var S7=function(){var t=0,s=null;return{add:function(r){t==0&&(s=_7())&&(k7(s,r),C7(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},E7=function(){var t=S7();return function(s,r){u.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},R2=function(){var t=E7(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},P7={left:0,top:0,right:0,gap:0},Nm=function(t){return parseInt(t||"",10)||0},A7=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[Nm(r),Nm(n),Nm(a)]},F7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return P7;var s=A7(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},T7=R2(),ci="data-scroll-locked",M7=function(t,s,r,n){var a=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(h7,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ci,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Yc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kc," .").concat(Kc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Yc," .").concat(Yc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ci,`] {
    `).concat(p7,": ").concat(l,`px;
  }
`)},Gg=function(){var t=parseInt(document.body.getAttribute(ci)||"0",10);return isFinite(t)?t:0},R7=function(){u.useEffect(function(){return document.body.setAttribute(ci,(Gg()+1).toString()),function(){var t=Gg()-1;t<=0?document.body.removeAttribute(ci):document.body.setAttribute(ci,t.toString())}},[])},L7=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;R7();var i=u.useMemo(function(){return F7(a)},[a]);return u.createElement(T7,{styles:M7(i,!s,a,r?"":"!important")})},gh=!1;if(typeof window<"u")try{var yc=Object.defineProperty({},"passive",{get:function(){return gh=!0,!0}});window.addEventListener("test",yc,yc),window.removeEventListener("test",yc,yc)}catch{gh=!1}var $a=gh?{passive:!1}:!1,D7=function(t){return t.tagName==="TEXTAREA"},L2=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!D7(t)&&r[s]==="visible")},O7=function(t){return L2(t,"overflowY")},$7=function(t){return L2(t,"overflowX")},Xg=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=D2(t,n);if(a){var i=O2(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},I7=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},z7=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},D2=function(t,s){return t==="v"?O7(s):$7(s)},O2=function(t,s){return t==="v"?I7(s):z7(s)},B7=function(t,s){return t==="h"&&s==="rtl"?-1:1},q7=function(t,s,r,n,a){var i=B7(t,window.getComputedStyle(s).direction),o=i*n,l=r.target,c=s.contains(l),d=!1,m=o>0,x=0,f=0;do{if(!l)break;var b=O2(t,l),h=b[0],p=b[1],v=b[2],g=p-v-i*h;(h||g)&&D2(t,l)&&(x+=g,f+=h);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(s.contains(l)||s===l));return(m&&Math.abs(x)<1||!m&&Math.abs(f)<1)&&(d=!0),d},bc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Jg=function(t){return[t.deltaX,t.deltaY]},Zg=function(t){return t&&"current"in t?t.current:t},U7=function(t,s){return t[0]===s[0]&&t[1]===s[1]},W7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},V7=0,Ia=[];function H7(t){var s=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),a=u.useState(V7++)[0],i=u.useState(R2)[0],o=u.useRef(t);u.useEffect(function(){o.current=t},[t]),u.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=x7([t.lockRef.current],(t.shards||[]).map(Zg),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=u.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var g=bc(p),j=r.current,y="deltaX"in p?p.deltaX:j[0]-g[0],w="deltaY"in p?p.deltaY:j[1]-g[1],M,T=p.target,N=Math.abs(y)>Math.abs(w)?"h":"v";if("touches"in p&&N==="h"&&T.type==="range")return!1;var E=window.getSelection(),L=E&&E.anchorNode,k=L?L===T||L.contains(T):!1;if(k)return!1;var S=Xg(N,T);if(!S)return!0;if(S?M=N:(M=N==="v"?"h":"v",S=Xg(N,T)),!S)return!1;if(!n.current&&"changedTouches"in p&&(y||w)&&(n.current=M),!M)return!0;var F=n.current||M;return q7(F,v,p,F==="h"?y:w)},[]),c=u.useCallback(function(p){var v=p;if(!(!Ia.length||Ia[Ia.length-1]!==i)){var g="deltaY"in v?Jg(v):bc(v),j=s.current.filter(function(M){return M.name===v.type&&(M.target===v.target||v.target===M.shadowParent)&&U7(M.delta,g)})[0];if(j&&j.should){v.cancelable&&v.preventDefault();return}if(!j){var y=(o.current.shards||[]).map(Zg).filter(Boolean).filter(function(M){return M.contains(v.target)}),w=y.length>0?l(v,y[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),d=u.useCallback(function(p,v,g,j){var y={name:p,delta:v,target:g,should:j,shadowParent:Q7(g)};s.current.push(y),setTimeout(function(){s.current=s.current.filter(function(w){return w!==y})},1)},[]),m=u.useCallback(function(p){r.current=bc(p),n.current=void 0},[]),x=u.useCallback(function(p){d(p.type,Jg(p),p.target,l(p,t.lockRef.current))},[]),f=u.useCallback(function(p){d(p.type,bc(p),p.target,l(p,t.lockRef.current))},[]);u.useEffect(function(){return Ia.push(i),t.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:f}),document.addEventListener("wheel",c,$a),document.addEventListener("touchmove",c,$a),document.addEventListener("touchstart",m,$a),function(){Ia=Ia.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,$a),document.removeEventListener("touchmove",c,$a),document.removeEventListener("touchstart",m,$a)}},[]);var b=t.removeScrollBar,h=t.inert;return u.createElement(u.Fragment,null,h?u.createElement(i,{styles:W7(a)}):null,b?u.createElement(L7,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Q7(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const K7=w7(M2,H7);var rp=u.forwardRef(function(t,s){return u.createElement(vu,cr({},t,{ref:s,sideCar:K7}))});rp.classNames=vu.classNames;var yh=["Enter"," "],Y7=["ArrowDown","PageUp","Home"],$2=["ArrowUp","PageDown","End"],G7=[...Y7,...$2],X7={ltr:[...yh,"ArrowRight"],rtl:[...yh,"ArrowLeft"]},J7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zl="Menu",[yl,Z7,eP]=Q0(zl),[Ma,I2]=Ta(zl,[eP,h2,_2]),ju=h2(),z2=_2(),[tP,Ra]=Ma(zl),[sP,Bl]=Ma(zl),B2=t=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=t,l=ju(s),[c,d]=u.useState(null),m=u.useRef(!1),x=ds(i),f=Yw(a);return u.useEffect(()=>{const b=()=>{m.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>m.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),e.jsx($8,{...l,children:e.jsx(tP,{scope:s,open:r,onOpenChange:x,content:c,onContentChange:d,children:e.jsx(sP,{scope:s,onClose:u.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:m,dir:f,modal:o,children:n})})})};B2.displayName=zl;var rP="MenuAnchor",np=u.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=ju(r);return e.jsx(I8,{...a,...n,ref:s})});np.displayName=rP;var ap="MenuPortal",[nP,q2]=Ma(ap,{forceMount:void 0}),U2=t=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=t,i=Ra(ap,s);return e.jsx(nP,{scope:s,forceMount:r,children:e.jsx(Vr,{present:r||i.open,children:e.jsx(bu,{asChild:!0,container:a,children:n})})})};U2.displayName=ap;var As="MenuContent",[aP,ip]=Ma(As),W2=u.forwardRef((t,s)=>{const r=q2(As,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Ra(As,t.__scopeMenu),o=Bl(As,t.__scopeMenu);return e.jsx(yl.Provider,{scope:t.__scopeMenu,children:e.jsx(Vr,{present:n||i.open,children:e.jsx(yl.Slot,{scope:t.__scopeMenu,children:o.modal?e.jsx(iP,{...a,ref:s}):e.jsx(oP,{...a,ref:s})})})})}),iP=u.forwardRef((t,s)=>{const r=Ra(As,t.__scopeMenu),n=u.useRef(null),a=_t(s,n);return u.useEffect(()=>{const i=n.current;if(i)return A2(i)},[]),e.jsx(op,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ee(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),oP=u.forwardRef((t,s)=>{const r=Ra(As,t.__scopeMenu);return e.jsx(op,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),lP=n7("MenuContent.ScrollLock"),op=u.forwardRef((t,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:f,onDismiss:b,disableOutsideScroll:h,...p}=t,v=Ra(As,r),g=Bl(As,r),j=ju(r),y=z2(r),w=Z7(r),[M,T]=u.useState(null),N=u.useRef(null),E=_t(s,N,v.onContentChange),L=u.useRef(0),k=u.useRef(""),S=u.useRef(0),F=u.useRef(null),P=u.useRef("right"),I=u.useRef(0),H=h?rp:u.Fragment,z=h?{as:lP,allowPinchZoom:!0}:void 0,B=R=>{var le,K;const _=k.current+R,q=w().filter(A=>!A.disabled),O=document.activeElement,V=(le=q.find(A=>A.ref.current===O))==null?void 0:le.textValue,D=q.map(A=>A.textValue),G=vP(D,_,V),se=(K=q.find(A=>A.textValue===G))==null?void 0:K.ref.current;(function A($){k.current=$,window.clearTimeout(L.current),$!==""&&(L.current=window.setTimeout(()=>A(""),1e3))})(_),se&&setTimeout(()=>se.focus())};u.useEffect(()=>()=>window.clearTimeout(L.current),[]),Zw();const C=u.useCallback(R=>{var q,O;return P.current===((q=F.current)==null?void 0:q.side)&&wP(R,(O=F.current)==null?void 0:O.area)},[]);return e.jsx(aP,{scope:r,searchRef:k,onItemEnter:u.useCallback(R=>{C(R)&&R.preventDefault()},[C]),onItemLeave:u.useCallback(R=>{var _;C(R)||((_=N.current)==null||_.focus(),T(null))},[C]),onTriggerLeave:u.useCallback(R=>{C(R)&&R.preventDefault()},[C]),pointerGraceTimerRef:S,onPointerGraceIntentChange:u.useCallback(R=>{F.current=R},[]),children:e.jsx(H,{...z,children:e.jsx(K0,{asChild:!0,trapped:a,onMountAutoFocus:Ee(i,R=>{var _;R.preventDefault(),(_=N.current)==null||_.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:e.jsx(hu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:f,onDismiss:b,children:e.jsx(s7,{asChild:!0,...y,dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:M,onCurrentTabStopIdChange:T,onEntryFocus:Ee(c,R=>{g.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(z8,{role:"menu","aria-orientation":"vertical","data-state":iN(v.open),"data-radix-menu-content":"",dir:g.dir,...j,...p,ref:E,style:{outline:"none",...p.style},onKeyDown:Ee(p.onKeyDown,R=>{const q=R.target.closest("[data-radix-menu-content]")===R.currentTarget,O=R.ctrlKey||R.altKey||R.metaKey,V=R.key.length===1;q&&(R.key==="Tab"&&R.preventDefault(),!O&&V&&B(R.key));const D=N.current;if(R.target!==D||!G7.includes(R.key))return;R.preventDefault();const se=w().filter(le=>!le.disabled).map(le=>le.ref.current);$2.includes(R.key)&&se.reverse(),yP(se)}),onBlur:Ee(t.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(L.current),k.current="")}),onPointerMove:Ee(t.onPointerMove,bl(R=>{const _=R.target,q=I.current!==R.clientX;if(R.currentTarget.contains(_)&&q){const O=R.clientX>I.current?"right":"left";P.current=O,I.current=R.clientX}}))})})})})})})});W2.displayName=As;var cP="MenuGroup",lp=u.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ze.div,{role:"group",...n,ref:s})});lp.displayName=cP;var dP="MenuLabel",V2=u.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ze.div,{...n,ref:s})});V2.displayName=dP;var Rd="MenuItem",ey="menu.itemSelect",wu=u.forwardRef((t,s)=>{const{disabled:r=!1,onSelect:n,...a}=t,i=u.useRef(null),o=Bl(Rd,t.__scopeMenu),l=ip(Rd,t.__scopeMenu),c=_t(s,i),d=u.useRef(!1),m=()=>{const x=i.current;if(!r&&x){const f=new CustomEvent(ey,{bubbles:!0,cancelable:!0});x.addEventListener(ey,b=>n==null?void 0:n(b),{once:!0}),H0(x,f),f.defaultPrevented?d.current=!1:o.onClose()}};return e.jsx(H2,{...a,ref:c,disabled:r,onClick:Ee(t.onClick,m),onPointerDown:x=>{var f;(f=t.onPointerDown)==null||f.call(t,x),d.current=!0},onPointerUp:Ee(t.onPointerUp,x=>{var f;d.current||(f=x.currentTarget)==null||f.click()}),onKeyDown:Ee(t.onKeyDown,x=>{const f=l.searchRef.current!=="";r||f&&x.key===" "||yh.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});wu.displayName=Rd;var H2=u.forwardRef((t,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=t,o=ip(Rd,r),l=z2(r),c=u.useRef(null),d=_t(s,c),[m,x]=u.useState(!1),[f,b]=u.useState("");return u.useEffect(()=>{const h=c.current;h&&b((h.textContent??"").trim())},[i.children]),e.jsx(yl.ItemSlot,{scope:r,disabled:n,textValue:a??f,children:e.jsx(r7,{asChild:!0,...l,focusable:!n,children:e.jsx(Ze.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:Ee(t.onPointerMove,bl(h=>{n?o.onItemLeave(h):(o.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(t.onPointerLeave,bl(h=>o.onItemLeave(h))),onFocus:Ee(t.onFocus,()=>x(!0)),onBlur:Ee(t.onBlur,()=>x(!1))})})})}),uP="MenuCheckboxItem",Q2=u.forwardRef((t,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return e.jsx(J2,{scope:t.__scopeMenu,checked:r,children:e.jsx(wu,{role:"menuitemcheckbox","aria-checked":Ld(r)?"mixed":r,...a,ref:s,"data-state":dp(r),onSelect:Ee(a.onSelect,()=>n==null?void 0:n(Ld(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Q2.displayName=uP;var K2="MenuRadioGroup",[mP,xP]=Ma(K2,{value:void 0,onValueChange:()=>{}}),Y2=u.forwardRef((t,s)=>{const{value:r,onValueChange:n,...a}=t,i=ds(n);return e.jsx(mP,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(lp,{...a,ref:s})})});Y2.displayName=K2;var G2="MenuRadioItem",X2=u.forwardRef((t,s)=>{const{value:r,...n}=t,a=xP(G2,t.__scopeMenu),i=r===a.value;return e.jsx(J2,{scope:t.__scopeMenu,checked:i,children:e.jsx(wu,{role:"menuitemradio","aria-checked":i,...n,ref:s,"data-state":dp(i),onSelect:Ee(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});X2.displayName=G2;var cp="MenuItemIndicator",[J2,hP]=Ma(cp,{checked:!1}),Z2=u.forwardRef((t,s)=>{const{__scopeMenu:r,forceMount:n,...a}=t,i=hP(cp,r);return e.jsx(Vr,{present:n||Ld(i.checked)||i.checked===!0,children:e.jsx(Ze.span,{...a,ref:s,"data-state":dp(i.checked)})})});Z2.displayName=cp;var pP="MenuSeparator",eN=u.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});eN.displayName=pP;var fP="MenuArrow",tN=u.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=ju(r);return e.jsx(B8,{...a,...n,ref:s})});tN.displayName=fP;var gP="MenuSub",[m$,sN]=Ma(gP),Po="MenuSubTrigger",rN=u.forwardRef((t,s)=>{const r=Ra(Po,t.__scopeMenu),n=Bl(Po,t.__scopeMenu),a=sN(Po,t.__scopeMenu),i=ip(Po,t.__scopeMenu),o=u.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},m=u.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return u.useEffect(()=>m,[m]),u.useEffect(()=>{const x=l.current;return()=>{window.clearTimeout(x),c(null)}},[l,c]),e.jsx(np,{asChild:!0,...d,children:e.jsx(H2,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":iN(r.open),...t,ref:qn(s,a.onTriggerChange),onClick:x=>{var f;(f=t.onClick)==null||f.call(t,x),!(t.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ee(t.onPointerMove,bl(x=>{i.onItemEnter(x),!x.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:Ee(t.onPointerLeave,bl(x=>{var b,h;m();const f=(b=r.content)==null?void 0:b.getBoundingClientRect();if(f){const p=(h=r.content)==null?void 0:h.dataset.side,v=p==="right",g=v?-5:5,j=f[v?"left":"right"],y=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:x.clientX+g,y:x.clientY},{x:j,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:j,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(x),x.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(t.onKeyDown,x=>{var b;const f=i.searchRef.current!=="";t.disabled||f&&x.key===" "||X7[n.dir].includes(x.key)&&(r.onOpenChange(!0),(b=r.content)==null||b.focus(),x.preventDefault())})})})});rN.displayName=Po;var nN="MenuSubContent",aN=u.forwardRef((t,s)=>{const r=q2(As,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Ra(As,t.__scopeMenu),o=Bl(As,t.__scopeMenu),l=sN(nN,t.__scopeMenu),c=u.useRef(null),d=_t(s,c);return e.jsx(yl.Provider,{scope:t.__scopeMenu,children:e.jsx(Vr,{present:n||i.open,children:e.jsx(yl.Slot,{scope:t.__scopeMenu,children:e.jsx(op,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var x;o.isUsingKeyboardRef.current&&((x=c.current)==null||x.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ee(t.onFocusOutside,m=>{m.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ee(t.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:Ee(t.onKeyDown,m=>{var b;const x=m.currentTarget.contains(m.target),f=J7[o.dir].includes(m.key);x&&f&&(i.onOpenChange(!1),(b=l.trigger)==null||b.focus(),m.preventDefault())})})})})})});aN.displayName=nN;function iN(t){return t?"open":"closed"}function Ld(t){return t==="indeterminate"}function dp(t){return Ld(t)?"indeterminate":t?"checked":"unchecked"}function yP(t){const s=document.activeElement;for(const r of t)if(r===s||(r.focus(),document.activeElement!==s))return}function bP(t,s){return t.map((r,n)=>t[(s+n)%t.length])}function vP(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let o=bP(t,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function jP(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,o=s.length-1;i<s.length;o=i++){const l=s[i],c=s[o],d=l.x,m=l.y,x=c.x,f=c.y;m>n!=f>n&&r<(x-d)*(n-m)/(f-m)+d&&(a=!a)}return a}function wP(t,s){if(!s)return!1;const r={x:t.clientX,y:t.clientY};return jP(r,s)}function bl(t){return s=>s.pointerType==="mouse"?t(s):void 0}var NP=B2,_P=np,kP=U2,CP=W2,SP=lp,EP=V2,PP=wu,AP=Q2,FP=Y2,TP=X2,MP=Z2,RP=eN,LP=tN,DP=rN,OP=aN,Nu="DropdownMenu",[$P]=Ta(Nu,[I2]),Kt=I2(),[IP,oN]=$P(Nu),lN=t=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Kt(s),d=u.useRef(null),[m,x]=xu({prop:a,defaultProp:i??!1,onChange:o,caller:Nu});return e.jsx(IP,{scope:s,triggerId:oi(),triggerRef:d,contentId:oi(),open:m,onOpenChange:x,onOpenToggle:u.useCallback(()=>x(f=>!f),[x]),modal:l,children:e.jsx(NP,{...c,open:m,onOpenChange:x,dir:n,modal:l,children:r})})};lN.displayName=Nu;var cN="DropdownMenuTrigger",dN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,i=oN(cN,r),o=Kt(r);return e.jsx(_P,{asChild:!0,...o,children:e.jsx(Ze.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:qn(s,i.triggerRef),onPointerDown:Ee(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ee(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});dN.displayName=cN;var zP="DropdownMenuPortal",uN=t=>{const{__scopeDropdownMenu:s,...r}=t,n=Kt(s);return e.jsx(kP,{...n,...r})};uN.displayName=zP;var mN="DropdownMenuContent",xN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=oN(mN,r),i=Kt(r),o=u.useRef(!1);return e.jsx(CP,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:s,onCloseAutoFocus:Ee(t.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ee(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,m=c.button===2||d;(!a.modal||m)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xN.displayName=mN;var BP="DropdownMenuGroup",qP=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(SP,{...a,...n,ref:s})});qP.displayName=BP;var UP="DropdownMenuLabel",hN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(EP,{...a,...n,ref:s})});hN.displayName=UP;var WP="DropdownMenuItem",pN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(PP,{...a,...n,ref:s})});pN.displayName=WP;var VP="DropdownMenuCheckboxItem",fN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(AP,{...a,...n,ref:s})});fN.displayName=VP;var HP="DropdownMenuRadioGroup",QP=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(FP,{...a,...n,ref:s})});QP.displayName=HP;var KP="DropdownMenuRadioItem",gN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(TP,{...a,...n,ref:s})});gN.displayName=KP;var YP="DropdownMenuItemIndicator",yN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(MP,{...a,...n,ref:s})});yN.displayName=YP;var GP="DropdownMenuSeparator",bN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(RP,{...a,...n,ref:s})});bN.displayName=GP;var XP="DropdownMenuArrow",JP=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(LP,{...a,...n,ref:s})});JP.displayName=XP;var ZP="DropdownMenuSubTrigger",vN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(DP,{...a,...n,ref:s})});vN.displayName=ZP;var eA="DropdownMenuSubContent",jN=u.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Kt(r);return e.jsx(OP,{...a,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jN.displayName=eA;var tA=lN,sA=dN,rA=uN,wN=xN,NN=hN,_N=pN,kN=fN,CN=gN,SN=yN,EN=bN,PN=vN,AN=jN;function FN(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=FN(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function TN(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=FN(t))&&(n&&(n+=" "),n+=s);return n}const up="-",nA=t=>{const s=iA(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(up);return l[0]===""&&l.length!==1&&l.shift(),MN(l,s)||aA(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},MN=(t,s)=>{var o;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?MN(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(up);return(o=s.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ty=/^\[(.+)\]$/,aA=t=>{if(ty.test(t)){const s=ty.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},iA=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return lA(Object.entries(t.classGroups),r).forEach(([i,o])=>{bh(o,n,i,s)}),n},bh=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:sy(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(oA(a)){bh(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{bh(o,sy(s,i),r,n)})})},sy=(t,s)=>{let r=t;return s.split(up).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},oA=t=>t.isThemeGetter,lA=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[s+o,l])):i);return[r,a]}):t,cA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},RN="!",dA=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,o=l=>{const c=[];let d=0,m=0,x;for(let v=0;v<l.length;v++){let g=l[v];if(d===0){if(g===a&&(n||l.slice(v,v+i)===s)){c.push(l.slice(m,v)),m=v+i;continue}if(g==="/"){x=v;continue}}g==="["?d++:g==="]"&&d--}const f=c.length===0?l:l.substring(m),b=f.startsWith(RN),h=b?f.substring(1):f,p=x&&x>m?x-m:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:h,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},uA=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},mA=t=>({cache:cA(t.cacheSize),parseClassName:dA(t),...nA(t)}),xA=/\s+/,hA=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],o=t.trim().split(xA);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:m,hasImportantModifier:x,baseClassName:f,maybePostfixModifierPosition:b}=r(d);let h=!!b,p=n(h?f.substring(0,b):f);if(!p){if(!h){l=d+(l.length>0?" "+l:l);continue}if(p=n(f),!p){l=d+(l.length>0?" "+l:l);continue}h=!1}const v=uA(m).join(":"),g=x?v+RN:v,j=g+p;if(i.includes(j))continue;i.push(j);const y=a(p,h);for(let w=0;w<y.length;++w){const M=y[w];i.push(g+M)}l=d+(l.length>0?" "+l:l)}return l};function pA(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=LN(s))&&(n&&(n+=" "),n+=r);return n}const LN=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=LN(t[n]))&&(r&&(r+=" "),r+=s);return r};function fA(t,...s){let r,n,a,i=o;function o(c){const d=s.reduce((m,x)=>x(m),t());return r=mA(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const m=hA(c,r);return a(c,m),m}return function(){return i(pA.apply(null,arguments))}}const tt=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},DN=/^\[(?:([a-z-]+):)?(.+)\]$/i,gA=/^\d+\/\d+$/,yA=new Set(["px","full","screen"]),bA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wr=t=>di(t)||yA.has(t)||gA.test(t),Yr=t=>Gi(t,"length",FA),di=t=>!!t&&!Number.isNaN(Number(t)),_m=t=>Gi(t,"number",di),xo=t=>!!t&&Number.isInteger(Number(t)),_A=t=>t.endsWith("%")&&di(t.slice(0,-1)),Me=t=>DN.test(t),Gr=t=>bA.test(t),kA=new Set(["length","size","percentage"]),CA=t=>Gi(t,kA,ON),SA=t=>Gi(t,"position",ON),EA=new Set(["image","url"]),PA=t=>Gi(t,EA,MA),AA=t=>Gi(t,"",TA),ho=()=>!0,Gi=(t,s,r)=>{const n=DN.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},FA=t=>vA.test(t)&&!jA.test(t),ON=()=>!1,TA=t=>wA.test(t),MA=t=>NA.test(t),RA=()=>{const t=tt("colors"),s=tt("spacing"),r=tt("blur"),n=tt("brightness"),a=tt("borderColor"),i=tt("borderRadius"),o=tt("borderSpacing"),l=tt("borderWidth"),c=tt("contrast"),d=tt("grayscale"),m=tt("hueRotate"),x=tt("invert"),f=tt("gap"),b=tt("gradientColorStops"),h=tt("gradientColorStopPositions"),p=tt("inset"),v=tt("margin"),g=tt("opacity"),j=tt("padding"),y=tt("saturate"),w=tt("scale"),M=tt("sepia"),T=tt("skew"),N=tt("space"),E=tt("translate"),L=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",Me,s],F=()=>[Me,s],P=()=>["",wr,Yr],I=()=>["auto",di,Me],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Me],_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[di,Me];return{cacheSize:500,separator:":",theme:{colors:[ho],spacing:[wr,Yr],blur:["none","",Gr,Me],brightness:q(),borderColor:[t],borderRadius:["none","","full",Gr,Me],borderSpacing:F(),borderWidth:P(),contrast:q(),grayscale:R(),hueRotate:q(),invert:R(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[_A,Yr],inset:S(),margin:S(),opacity:q(),padding:F(),saturate:q(),scale:q(),sepia:R(),skew:q(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[Gr]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Me]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xo,Me]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",xo,Me]}],"grid-cols":[{"grid-cols":[ho]}],"col-start-end":[{col:["auto",{span:["full",xo,Me]},Me]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[ho]}],"row-start-end":[{row:["auto",{span:[xo,Me]},Me]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,s]}],"min-w":[{"min-w":[Me,s,"min","max","fit"]}],"max-w":[{"max-w":[Me,s,"none","full","min","max","fit","prose",{screen:[Gr]},Gr]}],h:[{h:[Me,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Gr,Yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_m]}],"font-family":[{font:[ho]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",di,_m]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wr,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wr,Yr]}],"underline-offset":[{"underline-offset":["auto",wr,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),SA]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},PA]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[wr,Me]}],"outline-w":[{outline:[wr,Yr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[wr,Yr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gr,AA]}],"shadow-color":[{shadow:[ho]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Gr,Me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[x]}],saturate:[{saturate:[y]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[xo,Me]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[wr,Yr,_m]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LA=fA(RA);function Ie(...t){return LA(TN(t))}const vh=tA,jh=sA,DA=u.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(PN,{ref:a,className:Ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-neutral-100 data-[state=open]:bg-neutral-100 dark:focus:bg-neutral-800 dark:data-[state=open]:bg-neutral-800",s&&"pl-8",t),...n,children:[r,e.jsx(We,{className:"ml-auto h-4 w-4"})]}));DA.displayName=PN.displayName;const OA=u.forwardRef(({className:t,...s},r)=>e.jsx(AN,{ref:r,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border border-neutral-200 bg-white p-1 text-neutral-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",t),...s}));OA.displayName=AN.displayName;const Dd=u.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(rA,{children:e.jsx(wN,{ref:n,sideOffset:s,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border border-neutral-200 bg-white p-1 text-neutral-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",t),...r})}));Dd.displayName=wN.displayName;const Ws=u.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(_N,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-neutral-100 focus:text-neutral-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-neutral-800 dark:focus:text-neutral-50",s&&"pl-8",t),...r}));Ws.displayName=_N.displayName;const $A=u.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(kN,{ref:a,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-neutral-100 focus:text-neutral-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-neutral-800 dark:focus:text-neutral-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SN,{children:e.jsx(Ge,{className:"h-4 w-4"})})}),s]}));$A.displayName=kN.displayName;const IA=u.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(CN,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-neutral-100 focus:text-neutral-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-neutral-800 dark:focus:text-neutral-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SN,{children:e.jsx(qw,{className:"h-2 w-2 fill-current"})})}),s]}));IA.displayName=CN.displayName;const $N=u.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(NN,{ref:n,className:Ie("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));$N.displayName=NN.displayName;const mp=u.forwardRef(({className:t,...s},r)=>e.jsx(EN,{ref:r,className:Ie("-mx-1 my-1 h-px bg-neutral-100 dark:bg-neutral-800",t),...s}));mp.displayName=EN.displayName;const zA=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/loyalty",{headers:{Authorization:`Bearer ${t}`}})).data,ry=[{path:"/menu",label:"Menu",icon:uh},{path:"/catering",label:"Catering",icon:uh},{path:"/about",label:"About",icon:Uw},{path:"/contact",label:"Contact",icon:$t},{path:"/faqs",label:"FAQs",icon:Bw},{path:"/track-order",label:"Track Order",icon:gt}],BA=()=>{const t=Be(),s=js(),r=Z(k=>k.authentication_state.current_user),n=Z(k=>k.authentication_state.auth_token),a=Z(k=>k.authentication_state.authentication_status.is_authenticated),i=Z(k=>k.cart_state.items),o=Z(k=>k.logout_user),l=r==null?void 0:r.role,c=l==="guest",d=l==="customer",m=(r==null?void 0:r.first_name)||(c?"Guest":"User"),x=i.reduce((k,S)=>k+S.quantity,0),[f,b]=u.useState(!1),[h,p]=u.useState(!1),[v,g]=u.useState(!1),j=u.useRef(null),y=u.useRef(null),{data:w}=ue({queryKey:["loyalty",r==null?void 0:r.user_id],queryFn:()=>zA(n),enabled:!!n&&!!r&&d,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),M=u.useCallback(async()=>{p(!0);try{c&&(document.cookie="guest_session=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="checkout_intent=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"),await o(),t(c?"/menu":"/")}catch(k){console.error("Logout failed:",k),p(!1)}},[c,o,t]),T=u.useCallback(()=>{b(!0)},[]),N=u.useCallback(()=>{b(!1),setTimeout(()=>{var k;(k=y.current)==null||k.focus()},100)},[]),E=u.useCallback(k=>s.pathname===k,[s.pathname]),L=u.useCallback(()=>x===0?"":x>99?"99+":x.toString(),[x]);return u.useEffect(()=>{const k=()=>{g(window.scrollY>10)};return window.addEventListener("scroll",k,{passive:!0}),k(),()=>window.removeEventListener("scroll",k)},[]),u.useEffect(()=>{N()},[s.pathname,N]),u.useEffect(()=>(f?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[f]),u.useEffect(()=>{const k=S=>{j.current&&!j.current.contains(S.target)&&N()};if(f){const S=setTimeout(()=>{document.addEventListener("mousedown",k)},10);return()=>{clearTimeout(S),document.removeEventListener("mousedown",k)}}},[f,N]),u.useEffect(()=>{const k=S=>{S.key==="Escape"&&f&&N()};return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[f,N]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:`
          site-header fixed top-0 left-0 right-0 z-50
          transition-all duration-300 ease-out
          ${v?"bg-[var(--primary-bg)]/95 backdrop-blur-md shadow-md":"bg-[var(--primary-bg)]"}
        `,style:{paddingTop:"env(safe-area-inset-top, 0px)"},role:"banner",children:e.jsxs("nav",{className:"max-w-7xl mx-auto","aria-label":"Main navigation",children:[e.jsxs("div",{className:"flex lg:hidden items-center justify-between h-14 px-4",children:[e.jsx("div",{className:"flex items-center justify-start w-12 flex-shrink-0",children:e.jsx("button",{ref:y,onClick:T,className:`
                  flex items-center justify-center 
                  w-11 h-11 
                  text-[var(--primary-text)] 
                  hover:bg-[var(--accent-color)]/30
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2
                  rounded-xl
                  transition-colors duration-200
                  active:scale-95
                `,"aria-label":"Open navigation menu","aria-expanded":f,"aria-controls":"mobile-drawer","aria-haspopup":"dialog",children:e.jsx(V0,{className:"h-6 w-6","aria-hidden":"true"})})}),e.jsx("div",{className:"flex items-center justify-center flex-1 min-w-0 px-2",children:e.jsx(X,{to:"/",className:"flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2 rounded-lg","aria-label":"Salama Lama Home",children:e.jsx("img",{src:"/logo-salama-lama.jpg",alt:"Salama Lama",className:"h-8 w-auto object-contain max-w-[7.5rem]"})})}),e.jsx("div",{className:"flex items-center justify-end gap-1 w-auto flex-shrink-0",children:e.jsxs(X,{to:"/cart",className:`
                  relative flex items-center justify-center 
                  w-11 h-11 
                  text-[var(--primary-text)] 
                  hover:bg-[var(--accent-color)]/30
                  transition-colors duration-200 
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2 
                  rounded-xl
                  active:scale-95
                `,"aria-label":`Shopping cart${x>0?` with ${x} items`:""}`,children:[e.jsx(ps,{className:"h-5 w-5","aria-hidden":"true"}),x>0&&e.jsx("span",{className:`
                      absolute flex items-center justify-center 
                      bg-red-600 text-white 
                      text-[0.625rem] font-bold 
                      rounded-full 
                      pointer-events-none
                      min-w-[1.125rem] h-[1.125rem] px-1
                      -top-0.5 -right-0.5
                    `,"aria-hidden":"true",children:L()})]})})]}),e.jsxs("div",{className:"hidden lg:flex items-center justify-between h-[4.5rem] px-6",children:[e.jsx(X,{to:"/",className:"flex items-center flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2 rounded-lg","aria-label":"Salama Lama Home",children:e.jsx("img",{src:"/logo-salama-lama.jpg",alt:"Salama Lama",className:"h-10 w-auto object-contain transition-transform duration-200 hover:scale-105"})}),e.jsx("nav",{className:"flex items-center justify-center flex-1 px-8","aria-label":"Primary navigation",children:e.jsx("ul",{className:"flex items-center gap-8",children:ry.map(k=>e.jsx("li",{children:e.jsx(X,{to:k.path,className:`
                        text-sm font-medium 
                        transition-colors duration-200 
                        whitespace-nowrap 
                        py-2
                        focus:outline-none focus-visible:underline focus-visible:underline-offset-4
                        ${E(k.path)?"text-amber-700":"text-[var(--primary-text)] hover:text-amber-700"}
                      `,children:k.label})},k.path))})}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs(X,{to:"/cart",className:`
                  relative flex items-center justify-center 
                  w-11 h-11 
                  text-[var(--primary-text)] 
                  hover:bg-[var(--accent-color)]/30
                  transition-colors duration-200 
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2 
                  rounded-xl
                `,"aria-label":`Shopping cart${x>0?` with ${x} items`:""}`,children:[e.jsx(ps,{className:"h-5 w-5","aria-hidden":"true"}),x>0&&e.jsx("span",{className:`
                      absolute flex items-center justify-center 
                      bg-red-600 text-white 
                      text-xs font-bold 
                      rounded-full 
                      pointer-events-none
                      min-w-5 h-5 px-1
                      -top-1 -right-1
                    `,"aria-hidden":"true",children:L()})]}),a&&!c&&e.jsxs(vh,{children:[e.jsx(jh,{asChild:!0,children:e.jsxs("button",{className:`
                        flex items-center gap-2 
                        px-4 py-2.5 
                        text-sm font-semibold 
                        text-[var(--primary-text)] 
                        bg-white 
                        border-2 border-[var(--primary-text)] 
                        rounded-full 
                        hover:bg-[var(--primary-bg)] 
                        transition-all duration-200 
                        focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                        shadow-sm 
                        whitespace-nowrap
                        data-[state=open]:bg-[var(--primary-bg)]
                      `,"aria-label":"Account Menu",children:[e.jsx(cs,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"max-w-24 truncate",children:m}),e.jsx(lr,{className:"h-4 w-4 transition-transform duration-200 data-[state=open]:rotate-180","aria-hidden":"true"})]})}),e.jsxs(Dd,{align:"end",sideOffset:8,className:"w-56 bg-white rounded-xl shadow-xl border border-[var(--border-light)] py-2",children:[e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/dashboard",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-[var(--primary-text)] hover:bg-[var(--primary-bg)] transition-colors cursor-pointer",children:[e.jsx(Ca,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/orders",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-[var(--primary-text)] hover:bg-[var(--primary-bg)] transition-colors cursor-pointer",children:[e.jsx(Je,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:"My Orders"})]})}),e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/rewards",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-[var(--primary-text)] hover:bg-[var(--primary-bg)] transition-colors cursor-pointer",children:[e.jsx(Ti,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:"Rewards"}),w&&w.current_points_balance>0&&e.jsxs("span",{className:"ml-auto text-xs font-bold text-amber-600",children:[w.current_points_balance," pts"]})]})}),e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/profile",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-[var(--primary-text)] hover:bg-[var(--primary-bg)] transition-colors cursor-pointer",children:[e.jsx(cs,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:"Profile"})]})}),e.jsx(mp,{className:"my-2 bg-[var(--border-light)]"}),e.jsxs(Ws,{onClick:M,disabled:h,className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(hl,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:h?"Signing Out...":"Logout"})]})]})]}),a&&c&&e.jsx(X,{to:"/checkout/order-type",className:`
                    px-5 py-2.5 
                    text-sm font-bold 
                    text-[var(--btn-text)] 
                    bg-[var(--btn-bg)] 
                    rounded-full 
                    hover:bg-[#1A0F0D] hover:shadow-md 
                    transition-all duration-200 
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                    shadow-sm 
                    whitespace-nowrap
                  `,children:"Continue Order"}),!a&&e.jsxs(e.Fragment,{children:[e.jsx(X,{to:"/login",className:`
                      px-5 py-2.5 
                      text-sm font-semibold 
                      text-[var(--primary-text)] 
                      bg-white 
                      border-2 border-[var(--primary-text)] 
                      rounded-full 
                      hover:bg-[var(--primary-bg)] 
                      transition-all duration-200 
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                      shadow-sm 
                      whitespace-nowrap
                    `,"aria-label":"Log In",children:"Log In"}),e.jsx(X,{to:"/signup",className:`
                      px-5 py-2.5 
                      text-sm font-bold 
                      text-[var(--btn-text)] 
                      bg-[var(--btn-bg)] 
                      rounded-full 
                      hover:bg-[#1A0F0D] hover:shadow-md 
                      transition-all duration-200 
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                      shadow-sm 
                      whitespace-nowrap
                    `,"aria-label":"Sign Up",children:"Sign Up"})]})]})]})]})}),e.jsx("div",{className:"h-14 lg:h-[4.5rem]",style:{paddingTop:"env(safe-area-inset-top, 0px)"},"aria-hidden":"true"}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] lg:hidden animate-fade-in",onClick:N,"aria-hidden":"true"}),e.jsxs("aside",{ref:j,id:"mobile-drawer",className:`
              fixed top-0 left-0 bottom-0 
              w-[85vw] max-w-xs
              bg-[var(--primary-bg)] 
              shadow-2xl 
              z-[101] 
              lg:hidden 
              flex flex-col
              overscroll-contain
              animate-slide-in-left
            `,role:"dialog","aria-modal":"true","aria-label":"Navigation menu",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-[var(--primary-bg)]",style:{height:"env(safe-area-inset-top, 0px)",marginTop:"calc(-1 * env(safe-area-inset-top, 0px))"},"aria-hidden":"true"}),e.jsx("header",{className:"flex-shrink-0 bg-[var(--primary-bg)] border-b border-[var(--border-light)] px-3 h-14 min-h-[3.5rem] max-h-14",children:e.jsxs("div",{className:"grid grid-cols-[2.75rem_1fr_2.75rem] items-center gap-2 h-full",children:[e.jsx("div",{className:"w-11 h-11","aria-hidden":"true"}),e.jsx(X,{to:"/",onClick:N,className:"flex items-center justify-center h-full focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)] focus-visible:ring-offset-2 rounded-lg overflow-hidden","aria-label":"Salama Lama Home",children:e.jsx("img",{src:"/logo-salama-lama.jpg",alt:"Salama Lama",className:"h-8 max-h-8 w-auto object-contain",style:{maxHeight:"32px"}})}),e.jsx("button",{onClick:N,className:`
                    flex items-center justify-center 
                    w-11 h-11 
                    text-[var(--primary-text)] 
                    hover:bg-[var(--accent-color)]/40 
                    rounded-xl 
                    transition-colors
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-text)]
                  `,"aria-label":"Close menu",children:e.jsx(Ae,{className:"h-6 w-6","aria-hidden":"true"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-5 space-y-5",style:{paddingBottom:"calc(env(safe-area-inset-bottom, 0px) + 1.25rem)"},children:[a&&e.jsx("div",{className:"p-4 bg-gradient-to-br from-[var(--primary-bg)] to-[var(--accent-color)]/50 rounded-2xl border border-[var(--border-light)]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 bg-[var(--btn-bg)] rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-6 w-6 text-[var(--btn-text)]","aria-hidden":"true"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-bold text-base text-[var(--primary-text)] truncate",children:m}),!c&&(r==null?void 0:r.email)&&e.jsx("p",{className:"text-sm text-[var(--primary-text)]/70 truncate",children:r.email}),c&&e.jsx("p",{className:"text-sm text-[var(--primary-text)]/70",children:"Guest checkout"}),w&&w.current_points_balance>0&&e.jsxs("p",{className:"text-sm text-amber-700 font-medium mt-1",children:[w.current_points_balance," loyalty points"]})]})]})}),e.jsx("nav",{"aria-label":"Mobile navigation",children:e.jsxs("ul",{className:"bg-white border border-[var(--border-light)] rounded-2xl divide-y divide-[var(--border-light)] overflow-hidden",children:[e.jsx("li",{children:e.jsxs(X,{to:"/",onClick:N,className:`
                        flex items-center justify-between 
                        px-4 py-4 
                        text-base font-medium 
                        transition-colors min-h-[3.25rem]
                        ${E("/")?"bg-[var(--primary-bg)] text-amber-700":"text-[var(--primary-text)] hover:bg-[var(--primary-bg)]"}
                      `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ca,{className:"h-5 w-5 opacity-60","aria-hidden":"true"}),e.jsx("span",{children:"Home"})]}),e.jsx(We,{className:"h-5 w-5 opacity-40","aria-hidden":"true"})]})}),ry.map(k=>e.jsx("li",{children:e.jsxs(X,{to:k.path,onClick:N,className:`
                          flex items-center justify-between 
                          px-4 py-4 
                          text-base font-medium 
                          transition-colors min-h-[3.25rem]
                          ${E(k.path)?"bg-[var(--primary-bg)] text-amber-700":"text-[var(--primary-text)] hover:bg-[var(--primary-bg)]"}
                        `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k.icon,{className:"h-5 w-5 opacity-60","aria-hidden":"true"}),e.jsx("span",{children:k.label})]}),e.jsx(We,{className:"h-5 w-5 opacity-40","aria-hidden":"true"})]})},k.path)),x>0&&e.jsx("li",{children:e.jsxs(X,{to:"/cart",onClick:N,className:`
                          flex items-center justify-between 
                          px-4 py-4 
                          text-base font-medium 
                          text-[var(--primary-text)] 
                          hover:bg-[var(--primary-bg)] 
                          transition-colors min-h-[3.25rem]
                        `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{className:"h-5 w-5 opacity-60","aria-hidden":"true"}),e.jsx("span",{children:"View Cart"}),e.jsx("span",{className:"bg-red-600 text-white text-xs font-bold rounded-full h-5 min-w-5 px-1.5 flex items-center justify-center",children:x})]}),e.jsx(We,{className:"h-5 w-5 opacity-40","aria-hidden":"true"})]})})]})}),e.jsx("div",{className:"space-y-3 pt-2",children:a?e.jsxs(e.Fragment,{children:[d&&e.jsxs(e.Fragment,{children:[e.jsx(X,{to:"/dashboard",onClick:N,className:`
                            flex items-center justify-center 
                            w-full 
                            px-6 py-3.5 
                            border-2 border-[var(--primary-text)] 
                            text-base font-semibold 
                            rounded-full 
                            text-[var(--primary-text)] 
                            bg-white 
                            hover:bg-[var(--primary-bg)] 
                            focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                            transition-all duration-200
                          `,children:"My Account"}),e.jsx(X,{to:"/orders",onClick:N,className:`
                            flex items-center justify-center 
                            w-full 
                            px-6 py-3.5 
                            border-2 border-[var(--primary-text)] 
                            text-base font-semibold 
                            rounded-full 
                            text-[var(--primary-text)] 
                            bg-white 
                            hover:bg-[var(--primary-bg)] 
                            focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                            transition-all duration-200
                          `,children:"My Orders"})]}),c&&e.jsx(X,{to:"/checkout/order-type",onClick:N,className:`
                          flex items-center justify-center 
                          w-full 
                          px-6 py-3.5 
                          border-2 border-[var(--primary-text)] 
                          text-base font-semibold 
                          rounded-full 
                          text-[var(--primary-text)] 
                          bg-white 
                          hover:bg-[var(--primary-bg)] 
                          focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                          transition-all duration-200
                        `,children:"Continue Ordering"}),e.jsxs("button",{onClick:()=>{N(),M()},disabled:h,className:`
                        flex items-center justify-center gap-2 
                        w-full 
                        px-6 py-3.5 
                        text-base font-bold 
                        rounded-full 
                        text-[var(--btn-text)] 
                        bg-[var(--btn-bg)] 
                        hover:bg-[#1A0F0D] 
                        focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                        transition-all duration-200 
                        disabled:opacity-50 disabled:cursor-not-allowed
                      `,children:[e.jsx(hl,{className:"h-5 w-5","aria-hidden":"true"}),h?"Signing Out...":"Sign Out"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{to:"/login",onClick:N,className:`
                        flex items-center justify-center 
                        w-full 
                        px-6 py-3.5 
                        border-2 border-[var(--primary-text)] 
                        text-base font-semibold 
                        rounded-full 
                        text-[var(--primary-text)] 
                        bg-white 
                        hover:bg-[var(--primary-bg)] 
                        focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                        transition-all duration-200
                      `,children:"Log In"}),e.jsx(X,{to:"/signup",onClick:N,className:`
                        flex items-center justify-center 
                        w-full 
                        px-6 py-3.5 
                        text-base font-bold 
                        rounded-full 
                        text-[var(--btn-text)] 
                        bg-[var(--btn-bg)] 
                        hover:bg-[#1A0F0D] hover:shadow-lg 
                        focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-600 focus-visible:ring-offset-2 
                        transition-all duration-200
                      `,children:"Sign Up"})]})})]})]})]}),e.jsx("style",{children:`
        @keyframes slide-in-left {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(0);
          }
        }
        
        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        
        .animate-slide-in-left {
          animation: slide-in-left 0.25s cubic-bezier(0.32, 0.72, 0, 1);
        }
        
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
      `})]})};function qA(t,s=[]){let r=[];function n(i,o){const l=u.createContext(o);l.displayName=i+"Context";const c=r.length;r=[...r,o];const d=x=>{var g;const{scope:f,children:b,...h}=x,p=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,v=u.useMemo(()=>h,Object.values(h));return e.jsx(p.Provider,{value:v,children:b})};d.displayName=i+"Provider";function m(x,f){var p;const b=((p=f==null?void 0:f[t])==null?void 0:p[c])||l,h=u.useContext(b);if(h)return h;if(o!==void 0)return o;throw new Error(`\`${x}\` must be used within \`${i}\``)}return[d,m]}const a=()=>{const i=r.map(o=>u.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return u.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,UA(a,...s)]}function UA(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const x=c(i)[`__scope${d}`];return{...l,...x}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var WA=Symbol.for("react.lazy"),Od=qd[" use ".trim().toString()];function VA(t){return typeof t=="object"&&t!==null&&"then"in t}function IN(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===WA&&"_payload"in t&&VA(t._payload)}function xp(t){const s=QA(t),r=u.forwardRef((n,a)=>{let{children:i,...o}=n;IN(i)&&typeof Od=="function"&&(i=Od(i._payload));const l=u.Children.toArray(i),c=l.find(YA);if(c){const d=c.props.children,m=l.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...o,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,m):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var HA=xp("Slot");function QA(t){const s=u.forwardRef((r,n)=>{let{children:a,...i}=r;if(IN(a)&&typeof Od=="function"&&(a=Od(a._payload)),u.isValidElement(a)){const o=XA(a),l=GA(i,a.props);return a.type!==u.Fragment&&(l.ref=n?qn(n,o):o),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var KA=Symbol("radix.slottable");function YA(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===KA}function GA(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function XA(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var JA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hp=JA.reduce((t,s)=>{const r=xp(`Primitive.${s}`),n=u.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),zN={exports:{}},BN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=u;function ZA(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var eF=typeof Object.is=="function"?Object.is:ZA,tF=Li.useState,sF=Li.useEffect,rF=Li.useLayoutEffect,nF=Li.useDebugValue;function aF(t,s){var r=s(),n=tF({inst:{value:r,getSnapshot:s}}),a=n[0].inst,i=n[1];return rF(function(){a.value=r,a.getSnapshot=s,km(a)&&i({inst:a})},[t,r,s]),sF(function(){return km(a)&&i({inst:a}),t(function(){km(a)&&i({inst:a})})},[t]),nF(r),r}function km(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!eF(t,r)}catch{return!0}}function iF(t,s){return s()}var oF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iF:aF;BN.useSyncExternalStore=Li.useSyncExternalStore!==void 0?Li.useSyncExternalStore:oF;zN.exports=BN;var lF=zN.exports;function cF(){return lF.useSyncExternalStore(dF,()=>!0,()=>!1)}function dF(){return()=>{}}var pp="Avatar",[uF]=qA(pp),[mF,qN]=uF(pp),UN=u.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,i]=u.useState("idle");return e.jsx(mF,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(hp.span,{...n,ref:s})})});UN.displayName=pp;var WN="AvatarImage",VN=u.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,o=qN(WN,r),l=xF(n,i),c=ds(d=>{a(d),o.onImageLoadingStatusChange(d)});return Ms(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(hp.img,{...i,ref:s,src:n}):null});VN.displayName=WN;var HN="AvatarFallback",QN=u.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=qN(HN,r),[o,l]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(hp.span,{...a,ref:s}):null});QN.displayName=HN;function ny(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xF(t,{referrerPolicy:s,crossOrigin:r}){const n=cF(),a=u.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=u.useState(()=>ny(i,t));return Ms(()=>{l(ny(i,t))},[i,t]),Ms(()=>{const c=x=>()=>{l(x)};if(!i)return;const d=c("loaded"),m=c("error");return i.addEventListener("load",d),i.addEventListener("error",m),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",m)}},[i,r,s]),o}var KN=UN,YN=VN,GN=QN;const XN=u.forwardRef(({className:t,...s},r)=>e.jsx(KN,{ref:r,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));XN.displayName=KN.displayName;const JN=u.forwardRef(({className:t,...s},r)=>e.jsx(YN,{ref:r,className:Ie("aspect-square h-full w-full",t),...s}));JN.displayName=YN.displayName;const ZN=u.forwardRef(({className:t,...s},r)=>e.jsx(GN,{ref:r,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-neutral-100 dark:bg-neutral-800",t),...s}));ZN.displayName=GN.displayName;const hF=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/dashboard",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.low_stock_items.map(n=>({notification_id:`stock_${n.item_id}`,type:"low_stock_alert",message:`${n.name} is running low (${n.current_stock} left)`,created_at:new Date().toISOString(),item_id:n.item_id})),pF=async t=>{await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/logout",{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},fF=()=>{const t=Be(),s=Z(p=>p.authentication_state.current_user),r=Z(p=>p.authentication_state.auth_token),n=Z(p=>p.logout_user),i=Z(p=>p.business_settings).business_info.logo_url||"/assets/salama-lama-logo.png",{data:o=[],isLoading:l,refetch:c}=ue({queryKey:["staff-notifications"],queryFn:()=>hF(r||""),enabled:!!r,staleTime:3e4,refetchInterval:6e4,retry:1}),d=o.length,m=(s==null?void 0:s.first_name)||"Staff",x=m.charAt(0).toUpperCase(),f=(s==null?void 0:s.profile_photo_url)||null,b=async()=>{try{r&&await pF(r),await n(),t("/staff/login")}catch(p){console.error("Logout error:",p),await n(),t("/staff/login")}},h=p=>{p.type==="low_stock_alert"&&p.item_id?t("/staff/stock"):p.order_id&&t(`/staff/orders/${p.order_id}`)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"sticky top-0 left-0 right-0 bg-white border-b border-gray-200 shadow-sm z-50 transition-all duration-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(X,{to:"/staff/dashboard",className:"flex items-center gap-2 group","aria-label":"Salama Lama Staff Home",children:[e.jsx("img",{src:i,alt:"Salama Lama",className:"h-8 w-auto object-contain transition-transform duration-200 group-hover:scale-105",onError:p=>{const v=p.target;v.src!=="/logo.png"&&(v.src="/logo.png")}}),e.jsx("span",{className:"hidden sm:inline text-gray-900 font-bold text-base",children:"Staff"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsxs(X,{to:"/staff/orders",className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300","aria-label":"View Orders",children:[e.jsx(ps,{className:"h-5 w-5"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(X,{to:"/staff/stock",className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300","aria-label":"View Stock",children:[e.jsx(Je,{className:"h-5 w-5"}),e.jsx("span",{children:"Stock"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(vh,{onOpenChange:p=>p&&c(),children:[e.jsx(jh,{asChild:!0,children:e.jsxs("button",{className:"relative p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300 data-[state=open]:bg-gray-100","aria-label":"Notifications",children:[e.jsx(Tn,{className:"h-6 w-6"}),d>0&&e.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center h-5 w-5 text-xs font-bold text-white bg-red-600 rounded-full border-2 border-white",children:d>9?"9+":d})]})}),e.jsxs(Dd,{align:"end",sideOffset:8,className:"w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden py-0",children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["Notifications (",d,")"]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:l?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading notifications..."})]}):o.length===0?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx(Tn,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No notifications"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You're all caught up!"})]}):e.jsx("ul",{className:"divide-y divide-gray-100",children:o.map(p=>e.jsx("li",{children:e.jsx(Ws,{onClick:()=>h(p),className:"w-full px-4 py-3 hover:bg-gray-50 transition-colors text-left cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 mt-2 rounded-full ${p.type==="low_stock_alert"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:p.type==="low_stock_alert"?"Low Stock Alert":"Order Update"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(p.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})})},p.notification_id))})}),o.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsx(Ws,{asChild:!0,children:e.jsx(X,{to:"/staff/dashboard",className:"text-sm text-gray-900 hover:text-gray-700 font-medium focus:outline-none focus:underline",children:"View Dashboard"})})})]})]}),e.jsxs(vh,{children:[e.jsx(jh,{asChild:!0,children:e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300 data-[state=open]:bg-gray-100","aria-label":"Staff Profile Menu",children:[e.jsxs(XN,{className:"h-8 w-8",children:[e.jsx(JN,{src:f||void 0,alt:m}),e.jsx(ZN,{className:"bg-gray-200 text-gray-700 font-semibold text-sm",children:x})]}),e.jsx("span",{className:"hidden sm:inline font-medium text-gray-900",children:m})]})}),e.jsxs(Dd,{align:"end",sideOffset:8,className:"w-56 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden py-0",children:[e.jsxs($N,{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:m}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 font-normal",children:s==null?void 0:s.email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize font-normal",children:(s==null?void 0:s.role)||"Staff"})]}),e.jsxs("div",{className:"py-1",children:[e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/staff/profile",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"My Profile"})]})}),e.jsx(Ws,{asChild:!0,children:e.jsxs(X,{to:"/staff/reports",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{children:"Reports"})]})}),e.jsx(mp,{className:"bg-gray-100"}),e.jsxs(Ws,{onClick:b,className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors cursor-pointer",children:[e.jsx(hl,{className:"h-4 w-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})]})]})]}),e.jsx("div",{className:"md:hidden border-t border-gray-200 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(X,{to:"/staff/orders",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-100 transition-all duration-200",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(X,{to:"/staff/stock",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-100 transition-all duration-200",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{children:"Stock"})]})]})})]})}),e.jsx("style",{children:`
        nav img[alt="Salama Lama"] {
          max-height: 32px !important;
          width: auto !important;
          object-fit: contain !important;
        }
      `})]})},gF="/logo.png",yF="https://123salama-lama-food-truck.launchpulse.ai",wh=u.memo(({logoUrl:t,className:s="h-8 w-auto object-contain",showLabel:r=!0})=>{const[n,a]=u.useState(!1),[i,o]=u.useState(!1),l=u.useMemo(()=>!t||t==="/assets/salama-lama-logo.png"||t.includes("undefined")?gF:t,[t]);u.useEffect(()=>{a(!1),o(!1)},[l]);const c=u.useCallback(()=>{a(!0),o(!0)},[]),d=u.useCallback(()=>{o(!0)},[]),m=()=>e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg text-white font-bold text-sm shadow-sm flex-shrink-0",children:"SL"});return e.jsxs("div",{className:"flex items-center gap-3 min-h-[32px]",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center flex-shrink-0",children:n?e.jsx(m,{}):e.jsxs(e.Fragment,{children:[!i&&e.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded animate-pulse"}),e.jsx("img",{src:l,alt:"Salama Lama",className:`${s} ${i?"opacity-100":"opacity-0 absolute"}`,style:{maxHeight:"32px"},onError:c,onLoad:d,loading:"eager",decoding:"async"})]})}),r&&e.jsx("span",{className:"text-sm font-medium text-gray-300 hidden sm:inline whitespace-nowrap",children:"Admin"})]})});wh.displayName="SidebarLogo";const bF=()=>{var y,w,M,T;const t=js(),[s,r]=u.useState(!1),[n,a]=u.useState(!1),[i,o]=u.useState(!1),l=Z(N=>N.authentication_state.current_user),c=Z(N=>N.authentication_state.authentication_status.is_authenticated),d=Z(N=>N.authentication_state.auth_token),m=Z(N=>N.logout_user),x=Z(N=>{var E,L;return(L=(E=N.business_settings)==null?void 0:E.business_info)==null?void 0:L.logo_url}),{data:f}=ue({queryKey:["admin-notifications-summary"],queryFn:async()=>(await Q.get(`${yF}/api/admin/notifications/summary`,{headers:{Authorization:`Bearer ${d}`}})).data,enabled:!!d&&c&&(l==null?void 0:l.role)==="admin",staleTime:3e4,refetchInterval:6e4});u.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),u.useEffect(()=>{r(!1),a(!1),o(!1)},[t.pathname]),u.useEffect(()=>{const N=E=>{E.key==="Escape"&&(s&&h(),a(!1),o(!1))};return document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[s]);const b=()=>{r(!s)},h=()=>{r(!1)},p=async()=>{try{await m(),window.location.href="/admin/login"}catch(N){console.error("Logout error:",N),window.location.href="/admin/login"}},v=N=>N==="/admin/dashboard"?t.pathname===N:t.pathname===N||t.pathname.startsWith(N+"/");if(!c||(l==null?void 0:l.role)!=="admin")return null;const g=[{name:"Home",path:"/",icon:Ca,badge:0},{name:"Dashboard",path:"/admin/dashboard",icon:jS,badge:0},{name:"Orders",path:"/admin/orders",icon:pt,badge:(f==null?void 0:f.orders_pending_count)||0},{name:"Menu Items",path:"/admin/menu",icon:uh,badge:0},{name:"Categories",path:"/admin/menu/categories",icon:Mi,badge:0},{name:"Menu Builder",path:"/admin/menu/builder",icon:Vc,badge:0},{name:"Stock",path:"/admin/stock",icon:Je,badge:0},{name:"Delivery",path:"/admin/delivery",icon:zr,badge:0},{name:"Discounts",path:"/admin/discounts",icon:Mi,badge:0},{name:"Customers",path:"/admin/customers",icon:Rn,badge:0},{name:"Staff",path:"/admin/staff",icon:RS,badge:0},{name:"Invoices",path:"/admin/invoices",icon:os,badge:0},{name:"Messages",path:"/admin/messages",icon:Nt,badge:(f==null?void 0:f.contact_new_count)||0},{name:"Analytics",path:"/admin/analytics",icon:zw,badge:0},{name:"Activity Logs",path:"/admin/activity-logs",icon:Sd,badge:0},{name:"Settings",path:"/admin/settings",icon:pl,badge:0}],j=((f==null?void 0:f.orders_pending_count)||0)+((f==null?void 0:f.contact_new_count)||0);return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"lg:hidden fixed top-0 left-0 right-0 h-14 bg-gray-900 text-white z-50 flex items-center justify-between px-3 sm:px-4 border-b border-gray-800",style:{paddingTop:"env(safe-area-inset-top)"},children:[e.jsx("button",{onClick:b,className:"p-2 -ml-2 rounded-lg hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":"Open menu","aria-expanded":s,children:e.jsx(V0,{className:"w-6 h-6"})}),e.jsx(X,{to:"/admin/dashboard",className:"flex items-center",children:e.jsx(wh,{logoUrl:x,className:"h-7 w-auto object-contain",showLabel:!1})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{a(!n),o(!1)},className:"p-2 rounded-lg hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 relative","aria-label":"Notifications",children:[e.jsx(Tn,{className:"w-5 h-5"}),j>0&&e.jsx("span",{className:"absolute top-1 right-1 flex items-center justify-center min-w-[16px] h-4 text-[10px] font-bold text-white bg-red-500 rounded-full px-1",children:j>99?"99+":j})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 max-h-80 overflow-y-auto",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),j>0?e.jsxs("div",{className:"py-2",children:[((f==null?void 0:f.orders_pending_count)||0)>0&&e.jsxs(X,{to:"/admin/orders?status=received",className:"flex items-center px-4 py-3 hover:bg-gray-50 transition-colors",onClick:()=>a(!1),children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[f==null?void 0:f.orders_pending_count," pending order",(f==null?void 0:f.orders_pending_count)!==1?"s":""]})]}),((f==null?void 0:f.contact_new_count)||0)>0&&e.jsxs(X,{to:"/admin/messages",className:"flex items-center px-4 py-3 hover:bg-gray-50 transition-colors",onClick:()=>a(!1),children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[f==null?void 0:f.contact_new_count," new message",(f==null?void 0:f.contact_new_count)!==1?"s":""]})]})]}):e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx(Tn,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>{o(!i),a(!1)},className:"p-2 rounded-lg hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":"Profile",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-600 flex items-center justify-center text-white text-xs font-semibold",children:((w=(y=l==null?void 0:l.first_name)==null?void 0:y.charAt(0))==null?void 0:w.toUpperCase())||"A"})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 truncate",children:[l==null?void 0:l.first_name," ",l==null?void 0:l.last_name]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:l==null?void 0:l.email})]}),e.jsxs(X,{to:"/admin/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>o(!1),children:[e.jsx(pl,{className:"w-4 h-4 mr-3 text-gray-500"}),"Settings"]}),e.jsxs("button",{onClick:p,className:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(hl,{className:"w-4 h-4 mr-3"}),"Logout"]})]})]})]})]})]}),s&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 z-[55] transition-opacity backdrop-blur-sm",onClick:h,"aria-hidden":"true"}),e.jsxs("aside",{className:`
          fixed left-0 top-0 h-full bg-gray-900 text-white flex flex-col
          lg:z-30 lg:w-64 lg:translate-x-0
          z-[60] w-[280px] max-w-[85vw] transition-transform duration-300 ease-in-out
          ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,style:{height:"100dvh",paddingTop:"env(safe-area-inset-top)"},children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-800 flex-shrink-0",children:[e.jsx(X,{to:"/admin/dashboard",className:"flex items-center",children:e.jsx(wh,{logoUrl:x,showLabel:!0})}),e.jsx("button",{onClick:h,className:"lg:hidden p-2 rounded-lg hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":"Close menu",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:e.jsx("ul",{className:"space-y-1 px-2",children:g.map(N=>{const E=v(N.path);return e.jsx("li",{children:e.jsxs(X,{to:N.path,onClick:h,className:`
                      flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 
                      focus:outline-none focus:ring-2 focus:ring-orange-500
                      ${E?"bg-orange-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}
                    `,children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(N.icon,{className:"w-5 h-5"}),N.badge>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 flex items-center justify-center min-w-[16px] h-4 text-[10px] font-bold text-white bg-red-500 rounded-full px-1",children:N.badge>99?"99+":N.badge})]}),e.jsx("span",{className:"font-medium flex-1 truncate",children:N.name}),N.badge>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-red-500 text-white rounded-full",children:N.badge>99?"99+":N.badge})]})},N.name)})})}),e.jsx("div",{className:"border-t border-gray-800 p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:((T=(M=l==null?void 0:l.first_name)==null?void 0:M.charAt(0))==null?void 0:T.toUpperCase())||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-white truncate",children:[l==null?void 0:l.first_name," ",l==null?void 0:l.last_name]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:"Administrator"})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors hidden lg:block",title:"Logout",children:e.jsx(hl,{className:"w-5 h-5"})})]})})]})]})},vF=({variant:t="header",className:s=""})=>{const[r,n]=u.useState(!1),o={...{width:"auto",objectFit:"contain"},...t==="header"?{height:"28px",maxHeight:"28px",maxWidth:"120px"}:{height:"120px",maxHeight:"120px",opacity:.9}},l=t==="header"?"transition-transform duration-200 group-hover:scale-105":"",c=()=>{n(!0),console.error("Failed to load Salama Lama logo")};return r?e.jsx("div",{className:`flex items-center justify-center bg-[#D97706] text-white font-bold rounded-full ${s}`.trim(),style:{width:t==="header"?"32px":"48px",height:t==="header"?"32px":"48px",fontSize:t==="header"?"12px":"18px"},title:"Salama Lama",children:"SL"}):e.jsx("img",{src:"/logo-salama-lama.jpg",alt:"Salama Lama",loading:t==="header"?"eager":"lazy",decoding:"async",style:o,className:`${l} ${s}`.trim(),onError:c})},jF=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})}),wF=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"})}),NF="https://123salama-lama-food-truck.launchpulse.ai",_F=()=>{const t=Z(b=>b.business_settings.business_info),s=Z(b=>b.authentication_state.authentication_status.is_authenticated),[r,n]=u.useState(""),[a,i]=u.useState(""),[o,l]=u.useState(!1),[c,d]=u.useState(!1),m=ce({mutationFn:async b=>(await Q.post(`${NF}/api/newsletter/subscribe`,b,{headers:{"Content-Type":"application/json"}})).data,onSuccess:b=>{i(b.message||"Successfully subscribed!"),l(!0),d(!1),n("")},onError:b=>{var p,v;const h=((v=(p=b.response)==null?void 0:p.data)==null?void 0:v.message)||b.message||"Subscription failed. Please try again.";i(h),l(!1),d(!0)}}),x=b=>{if(b.preventDefault(),i(""),l(!1),d(!1),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){i("Please enter a valid email address."),d(!0);return}m.mutate({email:r})};u.useEffect(()=>{if(a){const b=setTimeout(()=>{i(""),l(!1),d(!1)},5e3);return()=>clearTimeout(b)}},[a]);const f={instagram:"https://www.instagram.com/salamalama369/#",tiktok:"https://www.tiktok.com/@salamalama369"};return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"bg-[#23120E] border-t border-[#2C1A16]","aria-labelledby":"footer-heading",children:[e.jsx("h2",{id:"footer-heading",className:"sr-only",children:"Footer"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-[#F2EFE9]",children:t.name||"Salama Lama Food Truck"}),e.jsxs("ul",{className:"space-y-3 text-sm text-[#F2EFE9]",children:[t.phone&&e.jsx("li",{children:e.jsxs("a",{href:`tel:${t.phone}`,className:"hover:opacity-80 transition-opacity duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.phone]})}),t.email&&e.jsx("li",{children:e.jsxs("a",{href:`mailto:${t.email}`,className:"hover:opacity-80 transition-opacity duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.email]})}),t.address&&e.jsxs("li",{className:"flex items-start",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:typeof t.address=="string"?t.address:`${t.address.line1}${t.address.line2?", "+t.address.line2:""}, ${t.address.city}, ${t.address.postal_code}`})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx("a",{href:f.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-[#F2EFE9] hover:opacity-75 transition-opacity duration-200","aria-label":"Visit our Instagram",children:e.jsx(jF,{className:"w-6 h-6"})}),e.jsx("a",{href:f.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-[#F2EFE9] hover:opacity-75 transition-opacity duration-200","aria-label":"Visit our TikTok",children:e.jsx(wF,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-[#F2EFE9]",children:"Quick Links"}),e.jsx("nav",{"aria-label":"Quick links navigation",children:e.jsxs("ul",{className:"space-y-3 text-sm text-[#F2EFE9]",children:[e.jsx("li",{children:e.jsx(X,{to:"/menu",className:"hover:opacity-80 transition-opacity duration-200",children:"Menu"})}),e.jsx("li",{children:e.jsx(X,{to:"/catering",className:"hover:opacity-80 transition-opacity duration-200",children:"Catering"})}),e.jsx("li",{children:e.jsx(X,{to:"/about",className:"hover:opacity-80 transition-opacity duration-200",children:"About Us"})}),e.jsx("li",{children:e.jsx(X,{to:"/track-order",className:"hover:opacity-80 transition-opacity duration-200",children:"Track Order"})}),e.jsx("li",{children:e.jsx(X,{to:"/contact",className:"hover:opacity-80 transition-opacity duration-200",children:"Contact"})}),e.jsx("li",{children:e.jsx(X,{to:"/faqs",className:"hover:opacity-80 transition-opacity duration-200",children:"FAQs"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-[#F2EFE9]",children:"Legal & Account"}),e.jsx("nav",{"aria-label":"Legal and account navigation",children:e.jsxs("ul",{className:"space-y-3 text-sm text-[#F2EFE9]",children:[e.jsx("li",{children:e.jsx(X,{to:"/terms",className:"hover:opacity-80 transition-opacity duration-200",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx(X,{to:"/privacy",className:"hover:opacity-80 transition-opacity duration-200",children:"Privacy Policy"})}),s&&e.jsx("li",{className:"pt-2 border-t border-[#2C1A16]",children:e.jsxs(X,{to:"/dashboard",className:"hover:opacity-80 transition-opacity duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"My Account"]})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-[#F2EFE9]",children:"Stay Updated"}),e.jsx("p",{className:"text-sm text-[#F2EFE9]",children:"Get exclusive offers, new menu items, and location updates."}),e.jsxs("form",{onSubmit:x,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newsletter-email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"newsletter-email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:b=>n(b.target.value),placeholder:"Enter your email",disabled:m.isPending,className:"w-full px-4 py-2 bg-[#2C1A16] border-2 border-[#F2EFE9] rounded-lg text-[#F2EFE9] placeholder-[#F2EFE9]/60 focus:outline-none focus:border-[#F2EFE9] focus:ring-2 focus:ring-[#F2EFE9]/50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsx("button",{type:"submit",disabled:m.isPending||!r,className:"w-full px-4 py-2 bg-[#F2EFE9] text-[#2C1A16] text-sm font-bold rounded-lg hover:bg-[#F2EFE9]/90 focus:outline-none focus:ring-2 focus:ring-[#F2EFE9] focus:ring-offset-2 focus:ring-offset-[#23120E] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-[#2C1A16]",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Subscribing..."]}):"Subscribe"}),a&&e.jsx("div",{role:"status","aria-live":"polite",className:`text-sm p-3 rounded-lg ${o?"bg-green-900/50 text-green-200 border border-green-700":c?"bg-red-900/50 text-red-200 border border-red-700":""}`,children:e.jsxs("div",{className:"flex items-start",children:[o&&e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c&&e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:a})]})})]}),e.jsxs("p",{className:"text-xs text-[#F2EFE9]/70",children:["We respect your privacy. See our"," ",e.jsx(X,{to:"/privacy",className:"text-[#F2EFE9] hover:opacity-80 underline transition-opacity duration-200",children:"Privacy Policy"}),"."]})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-[#2C1A16]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(vF,{variant:"footer"})}),e.jsxs("p",{className:"text-sm text-[#F2EFE9]/70",children:[" ",new Date().getFullYear()," ",t.name||"Salama Lama Food Truck",". All rights reserved."]})]})})]})]})})},kF=()=>{const[t,s]=u.useState(!1),[r,n]=u.useState(!1),[a,i]=u.useState({essential:!0,analytics:!1,marketing:!1});u.useEffect(()=>{const f=localStorage.getItem("cookie_consent");if(f)try{const b=JSON.parse(f);i(b),s(!1)}catch(b){console.error("Error parsing stored consent:",b),s(!0)}else s(!0)},[]);const o=()=>{const f={essential:!0,analytics:!0,marketing:!0};localStorage.setItem("cookie_consent",JSON.stringify(f)),i(f),s(!1)},l=()=>{const f={essential:!0,analytics:!1,marketing:!1};localStorage.setItem("cookie_consent",JSON.stringify(f)),i(f),s(!1)},c=()=>{n(!0)},d=()=>{localStorage.setItem("cookie_consent",JSON.stringify(a)),n(!1),s(!1)},m=()=>{i(f=>({...f,analytics:!f.analytics}))},x=()=>{i(f=>({...f,marketing:!f.marketing}))};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t-2 border-gray-200 shadow-2xl shadow-gray-900/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-orange-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"We Value Your Privacy"})]}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["We use cookies to enhance your browsing experience, analyze site traffic, and personalize content. Essential cookies are always enabled to ensure the website functions properly. You can choose to accept all cookies or customize your preferences."," ",e.jsx(X,{to:"/privacy",className:"text-orange-600 hover:text-orange-700 font-medium underline focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded",children:"Learn more in our Privacy Policy"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto lg:flex-shrink-0",children:[e.jsx("button",{onClick:l,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg border border-gray-300 transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-gray-100","aria-label":"Reject non-essential cookies",children:"Reject Non-Essential"}),e.jsx("button",{onClick:c,className:"px-6 py-3 bg-white hover:bg-gray-50 text-gray-900 font-medium rounded-lg border-2 border-gray-300 transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-gray-100","aria-label":"Customize cookie preferences",children:"Customize"}),e.jsx("button",{onClick:o,className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-orange-100","aria-label":"Accept all cookies",children:"Accept All"})]})]})})}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity duration-200",onClick:()=>n(!1),"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:f=>f.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:"Cookie Preferences"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-lg p-1","aria-label":"Close preferences modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Essential Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Always Enabled"})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("div",{className:"w-12 h-6 bg-green-600 rounded-full relative","aria-label":"Essential cookies enabled",children:e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-6 bg-white rounded-full shadow-md"})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies are necessary for the website to function properly. They enable core functionality such as security, authentication, and session management. The website cannot function properly without these cookies."})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Analytics Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full",children:"Optional"})]}),e.jsx("button",{onClick:m,className:"ml-4 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-full","aria-label":`${a.analytics?"Disable":"Enable"} analytics cookies`,"aria-pressed":a.analytics,children:e.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${a.analytics?"bg-orange-600":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0 bottom-0 w-6 bg-white rounded-full shadow-md transition-transform duration-200 ${a.analytics?"right-0":"left-0"}`})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously. This helps us improve our services and provide a better user experience. We use this data to analyze traffic patterns, identify popular content, and optimize the website's performance."})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Marketing Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-full",children:"Optional"})]}),e.jsx("button",{onClick:x,className:"ml-4 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-full","aria-label":`${a.marketing?"Disable":"Enable"} marketing cookies`,"aria-pressed":a.marketing,children:e.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${a.marketing?"bg-orange-600":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0 bottom-0 w-6 bg-white rounded-full shadow-md transition-transform duration-200 ${a.marketing?"right-0":"left-0"}`})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies are used to deliver relevant advertisements and track campaign effectiveness. They may be set by our advertising partners to build a profile of your interests and show you relevant ads on other sites. These cookies help us understand which marketing campaigns are most effective."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed",children:["For more detailed information about how we use cookies and process your data, please read our"," ",e.jsx(X,{to:"/privacy",className:"font-medium text-blue-700 hover:text-blue-800 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",children:"Privacy Policy"})," ","and"," ",e.jsx(X,{to:"/terms",className:"font-medium text-blue-700 hover:text-blue-800 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",children:"Terms & Conditions"}),"."]})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Your Current Preferences:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Essential Cookies"}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-green-700 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Analytics Cookies"}),e.jsx("span",{className:`inline-flex items-center gap-1 font-medium ${a.analytics?"text-orange-600":"text-gray-500"}`,children:a.analytics?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Disabled"]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Marketing Cookies"}),e.jsx("span",{className:`inline-flex items-center gap-1 font-medium ${a.marketing?"text-orange-600":"text-gray-500"}`,children:a.marketing?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Disabled"]})})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-gray-100",children:"Cancel"}),e.jsx("button",{onClick:d,className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Save Preferences"})]})]})})})]})]}):null},_u=Gj(t=>({isOverlayOpen:!1,overlayType:null,openOverlay:s=>t({isOverlayOpen:!0,overlayType:s}),closeOverlay:()=>t({isOverlayOpen:!1,overlayType:null})})),CF=({itemCount:t,total:s,isVisible:r=!0,hideOnOverlay:n=!1,className:a=""})=>{const i=js(),[o,l]=u.useState(null);u.useEffect(()=>{const p=sessionStorage.getItem("checkout_order_type");l(p)},[i.pathname]);const d=["/cart","/checkout","/order-confirmation","/admin","/staff"].some(p=>i.pathname.startsWith(p));if(t===0||!r||n||d)return null;const m=i.pathname==="/cart",x=m?"Proceed to Checkout":"View Cart",f=m?"/checkout/order-type":"/cart",b=o==="delivery"?zr:PS,h=o==="delivery"?"Delivery":o==="collection"?"Collection":null;return e.jsx("div",{"data-floating-cart":!0,className:`
        fixed z-40 lg:hidden
        left-4 right-4
        transition-all duration-300 ease-out
        ${a}
      `,style:{bottom:"calc(1rem + env(safe-area-inset-bottom, 0px))"},children:e.jsxs(X,{to:f,className:`
          flex items-center justify-between
          w-full
          bg-[var(--btn-bg)]
          text-[var(--btn-text)]
          rounded-2xl
          shadow-[0_8px_32px_rgba(44,26,22,0.25),0_2px_8px_rgba(44,26,22,0.15)]
          px-4 py-3.5
          hover:bg-[#1A0F0D]
          active:scale-[0.98]
          transition-all duration-200
          focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2
        `,"aria-label":`${x}. ${t} ${t===1?"item":"items"}, total ${s.toFixed(2)}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center",children:e.jsx(ps,{className:"h-5 w-5 text-[var(--btn-text)]","aria-hidden":"true"})}),e.jsx("span",{className:`
                absolute -top-1 -right-1 
                bg-red-500 text-white 
                text-[0.625rem] font-bold 
                rounded-full 
                h-[1.125rem] min-w-[1.125rem] px-1
                flex items-center justify-center
                shadow-md
                border border-[var(--btn-bg)]
              `,"aria-hidden":"true",children:t>99?"99+":t})]}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsxs("span",{className:"text-sm font-semibold text-[var(--btn-text)] truncate",children:[t," ",t===1?"item":"items"]}),h&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-[var(--btn-text)]/70",children:[e.jsx(b,{className:"h-3 w-3","aria-hidden":"true"}),h]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs font-medium text-[var(--btn-text)]/70",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold text-[var(--btn-text)] tracking-tight",children:["",s.toFixed(2)]})]}),e.jsx(We,{className:"w-5 h-5 text-[var(--btn-text)]/70","aria-hidden":"true"})]})]})})},SF=()=>{var j;const t=js(),s=Z(y=>y.cart_state.items),r=Z(y=>y.cart_state.total),n=Z(y=>y.cart_state.isHydrated),a=Z(y=>y.authentication_state.auth_token),i=Z(y=>y.sync_cart_from_api),o=Z(y=>y.set_cart_hydrated),l=_u(y=>y.isOverlayOpen),[c,d]=u.useState(!1),m="https://123salama-lama-food-truck.launchpulse.ai",x=u.useMemo(()=>Q.create({baseURL:m,withCredentials:!0}),[m]),{data:f,isLoading:b}=ue({queryKey:["cart"],queryFn:async()=>(await x.get("/api/cart",{headers:a?{Authorization:`Bearer ${a}`}:{}})).data,staleTime:3e4,refetchOnWindowFocus:!1,retry:2,retryDelay:y=>Math.min(1e3*2**y,3e3)});u.useEffect(()=>{f&&!b&&i(f)},[f,b,i]),u.useEffect(()=>{!b&&!f&&s.length>0&&!n&&o(!0)},[b,f,s.length,n,o]);const h=s.reduce((y,w)=>y+w.quantity,0),p=h===0||!n&&!b&&((j=f==null?void 0:f.items)==null?void 0:j.length)===0,g=["/cart","/checkout","/order-confirmation","/admin","/staff","/login","/signup","/forgot-password","/reset-password","/verify-email"].some(y=>t.pathname.startsWith(y));return u.useEffect(()=>{if(h>0){d(!0);const y=setTimeout(()=>d(!1),600);return()=>clearTimeout(y)}},[h,r]),!n&&b||p||g?null:e.jsxs(e.Fragment,{children:[e.jsxs(X,{to:"/cart",className:`
          fixed bottom-6 right-6 
          bg-[var(--btn-bg)] text-[var(--btn-text)]
          rounded-2xl shadow-2xl 
          hover:bg-[#1A0F0D] 
          transition-all duration-200 
          hover:scale-105 
          z-50 
          hidden lg:flex 
          items-center gap-3 
          px-5 py-4
          focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2
          ${c?"animate-bounce-subtle":""}
        `,"aria-label":`View cart with ${h} ${h===1?"item":"items"}, total ${r.toFixed(2)}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ps,{className:"h-6 w-6","aria-hidden":"true"}),e.jsx("span",{className:`
              absolute -top-2 -right-2 
              bg-red-500 text-white 
              text-xs font-bold 
              rounded-full 
              h-5 min-w-5 
              flex items-center justify-center px-1
              shadow-md
            `,"aria-hidden":"true",children:h>99?"99+":h})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("span",{className:"text-xs font-medium opacity-80",children:[h," ",h===1?"item":"items"]}),e.jsxs("span",{className:"text-lg font-bold tracking-tight",children:["",r.toFixed(2)]})]})]}),e.jsx(CF,{itemCount:h,total:r,isVisible:!p,hideOnOverlay:l,className:c?"animate-pulse-soft":""}),e.jsx("style",{children:`
        @keyframes bounce-subtle {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-4px);
          }
        }
        
        @keyframes pulse-soft {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.9;
          }
        }
        
        .animate-bounce-subtle {
          animation: bounce-subtle 0.5s ease-in-out;
        }
        
        .animate-pulse-soft {
          animation: pulse-soft 0.5s ease-in-out;
        }
      `})]})},EF=1,PF=5e3;let Cm=0;function AF(){return Cm=(Cm+1)%Number.MAX_SAFE_INTEGER,Cm.toString()}const Sm=new Map,ay=t=>{if(Sm.has(t))return;const s=setTimeout(()=>{Sm.delete(t),Qo({type:"REMOVE_TOAST",toastId:t})},PF);Sm.set(t,s)},FF=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,EF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?ay(r):t.toasts.forEach(n=>{ay(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},Gc=[];let Xc={toasts:[]};function Qo(t){Xc=FF(Xc,t),Gc.forEach(s=>{s(Xc)})}function Nh({...t}){const s=AF(),r=a=>Qo({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>Qo({type:"DISMISS_TOAST",toastId:s});return Qo({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Xi(){const[t,s]=u.useState(Xc);return u.useEffect(()=>(Gc.push(s),()=>{const r=Gc.indexOf(s);r>-1&&Gc.splice(r,1)}),[t]),{...t,toast:Nh,dismiss:r=>Qo({type:"DISMISS_TOAST",toastId:r})}}var TF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),MF="VisuallyHidden",fp=u.forwardRef((t,s)=>e.jsx(Ze.span,{...t,ref:s,style:{...TF,...t.style}}));fp.displayName=MF;var gp="ToastProvider",[yp,RF,LF]=Q0("Toast"),[e1]=Ta("Toast",[LF]),[DF,ku]=e1(gp),t1=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=t,[l,c]=u.useState(null),[d,m]=u.useState(0),x=u.useRef(!1),f=u.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${gp}\`. Expected non-empty \`string\`.`),e.jsx(yp.Provider,{scope:s,children:e.jsx(DF,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>m(b=>b+1),[]),onToastRemove:u.useCallback(()=>m(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:f,children:o})})};t1.displayName=gp;var s1="ToastViewport",OF=["F8"],_h="toast.viewportPause",kh="toast.viewportResume",r1=u.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=OF,label:a="Notifications ({hotkey})",...i}=t,o=ku(s1,r),l=RF(r),c=u.useRef(null),d=u.useRef(null),m=u.useRef(null),x=u.useRef(null),f=_t(s,x,o.onViewportChange),b=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=o.toastCount>0;u.useEffect(()=>{const v=g=>{var y;n.length!==0&&n.every(w=>g[w]||g.code===w)&&((y=x.current)==null||y.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),u.useEffect(()=>{const v=c.current,g=x.current;if(h&&v&&g){const j=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(_h);g.dispatchEvent(T),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(kh);g.dispatchEvent(T),o.isClosePausedRef.current=!1}},w=T=>{!v.contains(T.relatedTarget)&&y()},M=()=>{v.contains(document.activeElement)||y()};return v.addEventListener("focusin",j),v.addEventListener("focusout",w),v.addEventListener("pointermove",j),v.addEventListener("pointerleave",M),window.addEventListener("blur",j),window.addEventListener("focus",y),()=>{v.removeEventListener("focusin",j),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",j),v.removeEventListener("pointerleave",M),window.removeEventListener("blur",j),window.removeEventListener("focus",y)}}},[h,o.isClosePausedRef]);const p=u.useCallback(({tabbingDirection:v})=>{const j=l().map(y=>{const w=y.ref.current,M=[w,...GF(w)];return v==="forwards"?M:M.reverse()});return(v==="forwards"?j.reverse():j).flat()},[l]);return u.useEffect(()=>{const v=x.current;if(v){const g=j=>{var M,T,N;const y=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!y){const E=document.activeElement,L=j.shiftKey;if(j.target===v&&L){(M=d.current)==null||M.focus();return}const F=p({tabbingDirection:L?"backwards":"forwards"}),P=F.findIndex(I=>I===E);Em(F.slice(P+1))?j.preventDefault():L?(T=d.current)==null||T.focus():(N=m.current)==null||N.focus()}};return v.addEventListener("keydown",g),()=>v.removeEventListener("keydown",g)}},[l,p]),e.jsxs(cE,{ref:c,role:"region","aria-label":a.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&e.jsx(Ch,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});Em(v)}}),e.jsx(yp.Slot,{scope:r,children:e.jsx(Ze.ol,{tabIndex:-1,...i,ref:f})}),h&&e.jsx(Ch,{ref:m,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});Em(v)}})]})});r1.displayName=s1;var n1="ToastFocusProxy",Ch=u.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=ku(n1,r);return e.jsx(fp,{tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Ch.displayName=n1;var ql="Toast",$F="toast.swipeStart",IF="toast.swipeMove",zF="toast.swipeCancel",BF="toast.swipeEnd",a1=u.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=t,[l,c]=xu({prop:n,defaultProp:a??!0,onChange:i,caller:ql});return e.jsx(Vr,{present:r||l,children:e.jsx(WF,{open:l,...o,ref:s,onClose:()=>c(!1),onPause:ds(t.onPause),onResume:ds(t.onResume),onSwipeStart:Ee(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(t.onSwipeMove,d=>{const{x:m,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:Ee(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(t.onSwipeEnd,d=>{const{x:m,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),c(!1)})})})});a1.displayName=ql;var[qF,UF]=e1(ql,{onClose(){}}),WF=u.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:m,onSwipeMove:x,onSwipeCancel:f,onSwipeEnd:b,...h}=t,p=ku(ql,r),[v,g]=u.useState(null),j=_t(s,I=>g(I)),y=u.useRef(null),w=u.useRef(null),M=a||p.duration,T=u.useRef(0),N=u.useRef(M),E=u.useRef(0),{onToastAdd:L,onToastRemove:k}=p,S=ds(()=>{var H;(v==null?void 0:v.contains(document.activeElement))&&((H=p.viewport)==null||H.focus()),o()}),F=u.useCallback(I=>{!I||I===1/0||(window.clearTimeout(E.current),T.current=new Date().getTime(),E.current=window.setTimeout(S,I))},[S]);u.useEffect(()=>{const I=p.viewport;if(I){const H=()=>{F(N.current),d==null||d()},z=()=>{const B=new Date().getTime()-T.current;N.current=N.current-B,window.clearTimeout(E.current),c==null||c()};return I.addEventListener(_h,z),I.addEventListener(kh,H),()=>{I.removeEventListener(_h,z),I.removeEventListener(kh,H)}}},[p.viewport,M,c,d,F]),u.useEffect(()=>{i&&!p.isClosePausedRef.current&&F(M)},[i,M,p.isClosePausedRef,F]),u.useEffect(()=>(L(),()=>k()),[L,k]);const P=u.useMemo(()=>v?m1(v):null,[v]);return p.viewport?e.jsxs(e.Fragment,{children:[P&&e.jsx(VF,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:P}),e.jsx(qF,{scope:r,onClose:S,children:Bi.createPortal(e.jsx(yp.ItemSlot,{scope:r,children:e.jsx(lE,{asChild:!0,onEscapeKeyDown:Ee(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||S(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Ze.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...h,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ee(t.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,S()))}),onPointerDown:Ee(t.onPointerDown,I=>{I.button===0&&(y.current={x:I.clientX,y:I.clientY})}),onPointerMove:Ee(t.onPointerMove,I=>{if(!y.current)return;const H=I.clientX-y.current.x,z=I.clientY-y.current.y,B=!!w.current,C=["left","right"].includes(p.swipeDirection),R=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,_=C?R(0,H):0,q=C?0:R(0,z),O=I.pointerType==="touch"?10:2,V={x:_,y:q},D={originalEvent:I,delta:V};B?(w.current=V,vc(IF,x,D,{discrete:!1})):iy(V,p.swipeDirection,O)?(w.current=V,vc($F,m,D,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>O||Math.abs(z)>O)&&(y.current=null)}),onPointerUp:Ee(t.onPointerUp,I=>{const H=w.current,z=I.target;if(z.hasPointerCapture(I.pointerId)&&z.releasePointerCapture(I.pointerId),w.current=null,y.current=null,H){const B=I.currentTarget,C={originalEvent:I,delta:H};iy(H,p.swipeDirection,p.swipeThreshold)?vc(BF,b,C,{discrete:!0}):vc(zF,f,C,{discrete:!0}),B.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),VF=t=>{const{__scopeToast:s,children:r,...n}=t,a=ku(ql,s),[i,o]=u.useState(!1),[l,c]=u.useState(!1);return KF(()=>o(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:e.jsx(bu,{asChild:!0,children:e.jsx(fp,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},HF="ToastTitle",i1=u.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Ze.div,{...n,ref:s})});i1.displayName=HF;var QF="ToastDescription",o1=u.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Ze.div,{...n,ref:s})});o1.displayName=QF;var l1="ToastAction",c1=u.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(u1,{altText:r,asChild:!0,children:e.jsx(bp,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${l1}\`. Expected non-empty \`string\`.`),null)});c1.displayName=l1;var d1="ToastClose",bp=u.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=UF(d1,r);return e.jsx(u1,{asChild:!0,children:e.jsx(Ze.button,{type:"button",...n,ref:s,onClick:Ee(t.onClick,a.onClose)})})});bp.displayName=d1;var u1=u.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(Ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function m1(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),YF(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&s.push(o)}else s.push(...m1(n))}}),s}function vc(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?H0(a,i):a.dispatchEvent(i)}var iy=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function KF(t=()=>{}){const s=ds(t);Ms(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function YF(t){return t.nodeType===t.ELEMENT_NODE}function GF(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Em(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var XF=t1,x1=r1,h1=a1,p1=i1,f1=o1,g1=c1,y1=bp;const oy=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ly=TN,Cu=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return ly(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=s,o=Object.keys(a).map(d=>{const m=r==null?void 0:r[d],x=i==null?void 0:i[d];if(m===null)return null;const f=oy(m)||oy(x);return a[d][f]}),l=r&&Object.entries(r).reduce((d,m)=>{let[x,f]=m;return f===void 0||(d[x]=f),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,m)=>{let{class:x,className:f,...b}=m;return Object.entries(b).every(h=>{let[p,v]=h;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...d,x,f]:d},[]);return ly(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},JF=XF,b1=u.forwardRef(({className:t,...s},r)=>e.jsx(x1,{ref:r,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));b1.displayName=x1.displayName;const ZF=Cu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-neutral-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-neutral-800",{variants:{variant:{default:"border bg-white text-neutral-950 dark:bg-neutral-950 dark:text-neutral-50",destructive:"destructive group border-red-500 bg-red-500 text-neutral-50 dark:border-red-900 dark:bg-red-900 dark:text-neutral-50"}},defaultVariants:{variant:"default"}}),v1=u.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(h1,{ref:n,className:Ie(ZF({variant:s}),t),...r}));v1.displayName=h1.displayName;const e9=u.forwardRef(({className:t,...s},r)=>e.jsx(g1,{ref:r,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-neutral-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-neutral-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-neutral-50 group-[.destructive]:focus:ring-red-500 dark:border-neutral-800 dark:ring-offset-neutral-950 dark:hover:bg-neutral-800 dark:focus:ring-neutral-300 dark:group-[.destructive]:border-neutral-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-neutral-50 dark:group-[.destructive]:focus:ring-red-900",t),...s}));e9.displayName=g1.displayName;const j1=u.forwardRef(({className:t,...s},r)=>e.jsx(y1,{ref:r,className:Ie("absolute right-2 top-2 rounded-md p-1 text-neutral-950/50 opacity-100 transition-opacity hover:text-neutral-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-neutral-50/50 dark:hover:text-neutral-50",t),"toast-close":"",...s,children:e.jsx(Ae,{className:"h-4 w-4"})}));j1.displayName=y1.displayName;const w1=u.forwardRef(({className:t,...s},r)=>e.jsx(p1,{ref:r,className:Ie("text-sm font-semibold",t),...s}));w1.displayName=p1.displayName;const N1=u.forwardRef(({className:t,...s},r)=>e.jsx(f1,{ref:r,className:Ie("text-sm opacity-90",t),...s}));N1.displayName=f1.displayName;function t9(){const{toasts:t}=Xi();return e.jsxs(JF,{children:[t.map(function({id:s,title:r,description:n,action:a,...i}){return e.jsxs(v1,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(w1,{children:r}),n&&e.jsx(N1,{children:n})]}),a,e.jsx(j1,{})]},s)}),e.jsx(b1,{})]})}class cy extends u.Component{constructor(r){super(r);kp(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){}render(){if(this.state.hasError){const r=this.props.fallbackRoute||"/menu",n=this.props.fallbackMessage||"Something went wrong while loading this page. Please try again or return to the menu.";return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] pb-20",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-[#2C1A16] mb-4",children:"Oops! Something Went Wrong"}),e.jsx("p",{className:"text-[#6B5B4F] mb-6",children:n}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:this.handleReset,className:"inline-flex items-center justify-center bg-[#D4831D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#C07519] transition-colors",children:[e.jsx(SS,{className:"h-5 w-5 mr-2"}),"Try Again"]}),e.jsxs(X,{to:r,className:"inline-flex items-center justify-center bg-white border-2 border-[#D4C5B9] text-[#2C1A16] px-6 py-3 rounded-lg font-semibold hover:bg-[#F2EFE9] transition-colors",children:[e.jsx(Ca,{className:"h-5 w-5 mr-2"}),"Back to Menu"]})]})]})})})}return this.props.children}}const Su="https://123salama-lama-food-truck.launchpulse.ai",s9=async()=>(await Q.get(`${Su}/api/menu/items`,{params:{is_featured:!0,limit:6,is_active:!0}})).data.items.map(s=>{var r,n;return{item_id:s.item_id,name:s.name,description:((r=s.description)==null?void 0:r.substring(0,100))+(((n=s.description)==null?void 0:n.length)>100?"...":"")||"",price:Number(s.price||0),image_url:s.image_url||"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=300&h=300&fit=crop&q=80",is_limited_edition:s.is_limited_edition||!1}}),r9=async()=>{const t=await Q.get(`${Su}/api/business/info`);return{name:t.data.name||"Salama Lama Food Truck",phone:t.data.phone||"",email:t.data.email||"",address:t.data.address||"",operating_hours:t.data.operating_hours||{},delivery_enabled:t.data.delivery_enabled||!1,social_links:t.data.social_links||{}}},n9=async()=>{const t=await Q.get(`${Su}/api/business/reviews`,{params:{limit:5}});return{aggregate_rating:Number(t.data.aggregate_rating||0),total_count:t.data.total_count||0,reviews:(t.data.reviews||[]).map(s=>{var r,n;return{author_name:s.author_name||"Anonymous",rating:s.rating||5,text:((r=s.text)==null?void 0:r.substring(0,200))+(((n=s.text)==null?void 0:n.length)>200?"...":"")||"",time:s.time||new Date().toISOString(),profile_photo_url:s.profile_photo_url}})}},a9=async t=>{await Q.post(`${Su}/api/newsletter/subscribe`,{email:t})},i9=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(null),a=Z(p=>p.authentication_state.current_user),{data:i=[],isLoading:o,isError:l}=ue({queryKey:["featured-items"],queryFn:s9,staleTime:5*60*1e3,retry:1}),{data:c,isLoading:d}=ue({queryKey:["business-info"],queryFn:r9,staleTime:10*60*1e3,retry:1}),{data:m,isLoading:x}=ue({queryKey:["google-reviews"],queryFn:n9,staleTime:15*60*1e3,retry:1}),f=ce({mutationFn:a9,onSuccess:()=>{s(""),n(null)},onError:p=>{var g,j;const v=((j=(g=p.response)==null?void 0:g.data)==null?void 0:j.message)||"Subscription failed. Please try again.";n(v)}}),b=p=>{if(p.preventDefault(),n(null),!t||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){n("Please enter a valid email address");return}f.mutate(t)},h=p=>{const v=[],g=Math.floor(p),j=p%1>=.5;for(let y=0;y<5;y++)y<g?v.push(e.jsx(Hc,{className:"w-5 h-5 fill-[#2C1A16] text-[#2C1A16]"},y)):y===g&&j?v.push(e.jsx(Hc,{className:"w-5 h-5 fill-[#2C1A16] text-[#2C1A16]",style:{clipPath:"inset(0 50% 0 0)"}},y)):v.push(e.jsx(Hc,{className:"w-5 h-5 text-gray-300"},y));return v};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"relative bg-[#F2EFE9] overflow-hidden min-h-screen flex items-center",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10 py-12 sm:py-16 lg:py-24 w-full",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-16 items-center",children:[e.jsxs("div",{className:"order-2 lg:order-1 bg-[#F2EFE9] w-full",children:[!d&&c&&e.jsxs("div",{className:"inline-flex items-center px-5 py-2 bg-[#2C1A16] rounded-full shadow-lg mb-8",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-[#F2EFE9]",children:c.delivery_enabled?"Collection & Delivery Available":"Collection Only"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold text-[#2C1A16] mb-4 sm:mb-6 leading-tight tracking-tight",children:["Where Flavour",e.jsx("br",{}),"Meets Passion"]}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-[#4A3B32] mb-6 sm:mb-8 leading-relaxed font-medium",children:"Authentic Subs. Custom Bowls. Made with Heart."}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 w-full",children:[e.jsxs(X,{to:"/menu",className:"group flex items-center justify-center px-8 py-4 bg-[#3E2F26] text-[#F5F0EB] text-lg font-bold shadow-xl hover:bg-[#2C1A16] hover:scale-105 transition-all duration-300 ease-in-out w-full md:w-auto",style:{minHeight:"56px",borderRadius:"50px"},children:["Order Now",e.jsx(We,{className:"ml-2 w-6 h-6 group-hover:translate-x-2 transition-transform duration-300"})]}),e.jsxs(X,{to:"/about",className:"group flex items-center justify-center px-8 py-4 bg-transparent text-[#3E2F26] text-lg font-bold hover:bg-[#3E2F26] hover:text-[#F5F0EB] transition-all duration-300 ease-in-out w-full md:w-auto",style:{minHeight:"56px",borderRadius:"50px",border:"1.5px solid #3E2F26"},children:["Our Story",e.jsx(We,{className:"ml-2 w-6 h-6 group-hover:translate-x-1 transition-transform duration-300"})]})]}),a&&e.jsxs("p",{className:"mt-6 text-base text-[#4A3B32] font-medium",children:["Welcome back, ",a.first_name,"!"]})]}),e.jsxs("div",{className:"order-1 lg:order-2 relative w-full",children:[e.jsxs("div",{className:"relative rounded-2xl lg:rounded-3xl overflow-hidden shadow-xl lg:shadow-2xl lg:transform lg:translate-x-8 hover:scale-105 transition-transform duration-500",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800&h=1000&fit=crop&q=90",alt:"Delicious Food",className:"w-full aspect-[4/3] sm:aspect-[3/2] lg:aspect-[4/5] object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#2C1A16]/20 via-transparent to-transparent"})]}),e.jsxs("div",{className:"hidden sm:block absolute -bottom-4 sm:-bottom-6 -left-4 sm:-left-6 bg-[#2C1A16] text-[#F2EFE9] px-6 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-xl transform rotate-2 hover:rotate-0 transition-transform duration-300",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium mb-1",children:"Made Fresh Daily"}),e.jsx("p",{className:"text-lg sm:text-2xl font-extrabold",children:"100% Quality"})]})]})]})})}),e.jsx("section",{className:"py-8 sm:py-12 lg:py-20 bg-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-10",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Featured Items"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-600",children:"Try our most popular dishes"})]}),o?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[1,2,3,4].map(p=>e.jsx("div",{className:"bg-gray-100 rounded-xl h-80 animate-pulse"},p))}):l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Unable to load featured items. Please try again later."})]}):i.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:i.map(p=>e.jsxs("div",{className:"group bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:p.image_url,alt:p.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-200"}),p.is_limited_edition&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"Limited Edition"})]}),e.jsxs("div",{className:"p-5 lg:p-6",children:[e.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-2 leading-tight",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:p.description}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["",p.price.toFixed(2)]}),e.jsx(X,{to:"/menu",className:"flex items-center justify-center w-full sm:w-auto px-6 py-3 bg-orange-600 text-white text-base font-semibold rounded-lg hover:bg-orange-700 transition-colors",style:{minHeight:"48px"},children:"Add to Order"})]})]})]},p.item_id))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No featured items available at the moment."})}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(X,{to:"/menu",className:"inline-flex items-center justify-center px-8 py-4 bg-gray-100 text-gray-900 font-semibold rounded-xl hover:bg-gray-200 transition-colors w-full sm:w-auto",style:{minHeight:"56px"},children:["View Full Menu",e.jsx(We,{className:"ml-2 w-6 h-6"})]})})]})}),!x&&m&&m.reviews.length>0&&e.jsx("section",{className:"py-16 lg:py-24 bg-[#F2EFE9]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-extrabold text-[#2C1A16] mb-6",style:{fontWeight:800},children:"Locals Love Salama Lama"}),m.aggregate_rating>0&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("div",{className:"flex",children:h(m.aggregate_rating)}),e.jsx("span",{className:"text-xl font-semibold text-[#2C1A16]",children:m.aggregate_rating.toFixed(1)})]}),e.jsxs("p",{className:"text-[#4A3B32]",children:["Based on ",m.total_count," reviews"]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:m.reviews.slice(0,5).map((p,v)=>e.jsxs("div",{className:"flex-shrink-0 w-[350px] bg-white rounded-2xl shadow-xl border-2 border-[#2C1A16] p-6 snap-start",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[p.profile_photo_url?e.jsx("img",{src:p.profile_photo_url,alt:p.author_name,className:"w-12 h-12 rounded-full mr-4"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F2EFE9] flex items-center justify-center mr-4 border-2 border-[#2C1A16]",children:e.jsx("span",{className:"text-[#2C1A16] font-bold text-lg",children:p.author_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-[#2C1A16]",children:p.author_name}),e.jsx("div",{className:"flex mt-1",children:h(p.rating)})]})]}),e.jsxs("p",{className:"text-[#4A3B32] leading-relaxed",children:['"',p.text,'"']})]},v))})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("a",{href:`https://www.google.com/maps/search/${encodeURIComponent((c==null?void 0:c.name)||"Salama Lama Food Truck")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#2C1A16] font-bold hover:underline transition-all",children:["See All Reviews",e.jsx(We,{className:"ml-1 w-5 h-5"})]})})]})}),!d&&c&&e.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-br from-gray-50 via-white to-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Find Us"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Visit us at Serla House, Hibernian Industrial Estate"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-start",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-400 to-orange-600 rounded-3xl opacity-20 group-hover:opacity-30 blur-xl transition-all duration-300"}),e.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl border-2 border-orange-100 h-[450px] lg:h-[550px]",children:[e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent("Serla House, Hibernian Industrial Estate, Greenhills Road, Tallaght, Dublin 24, D24 NX22, Ireland")}&zoom=15&maptype=roadmap`,width:"100%",height:"100%",style:{border:0,filter:"brightness(100%) contrast(105%) saturate(110%)"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Salama Lama Location - Serla House, Tallaght"}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg px-4 py-2 border border-orange-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"We're Here!"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 lg:p-8 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(gt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Our Location"}),e.jsxs("p",{className:"text-gray-700 leading-relaxed text-base",children:[e.jsx("span",{className:"font-semibold",children:"Serla House"}),e.jsx("br",{}),"Hibernian Industrial Estate",e.jsx("br",{}),"Greenhills Road",e.jsx("br",{}),"Tallaght, Dublin 24",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"D24 NX22"}),", Ireland"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("Serla House, Hibernian Industrial Estate, Greenhills Road, Tallaght, Dublin 24, D24 NX22, Ireland")}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center justify-center space-x-3 px-6 py-4 bg-orange-600 text-white font-semibold rounded-xl shadow-lg hover:bg-orange-700 hover:shadow-xl hover:scale-105 transition-all duration-200",children:[e.jsx(yn,{className:"w-5 h-5 group-hover:rotate-12 transition-transform duration-200"}),e.jsx("span",{children:"Open in Maps"})]}),e.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent("Serla House, Hibernian Industrial Estate, Greenhills Road, Tallaght, Dublin 24, D24 NX22, Ireland")}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center justify-center space-x-3 px-6 py-4 bg-white text-orange-600 font-semibold rounded-xl border-2 border-orange-600 shadow-md hover:bg-orange-50 hover:shadow-lg hover:scale-105 transition-all duration-200",children:[e.jsx(kS,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-200"}),e.jsx("span",{children:"Get Directions"})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 lg:p-8 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(Ke,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Operating Hours"}),Object.keys(c.operating_hours).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(c.operating_hours).map(([p,v])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-700 font-medium capitalize",children:p}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[v.open," - ",v.close]})]},p))}):e.jsx("p",{className:"text-gray-600",children:"Hours not available"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 lg:p-8 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx($t,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Contact Us"}),e.jsxs("div",{className:"space-y-2",children:[c.phone&&e.jsx("a",{href:`tel:${c.phone}`,className:"text-gray-700 hover:text-orange-600 transition-colors block font-medium",children:c.phone}),c.email&&e.jsx("a",{href:`mailto:${c.email}`,className:"text-gray-700 hover:text-orange-600 transition-colors block font-medium",children:c.email})]})]})]})})]})]})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-[#2C1A16]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6 text-[#F2EFE9]",style:{fontWeight:800},children:"Let Us Cater Your Event"}),e.jsx("p",{className:"text-xl mb-8 text-[#F2EFE9]",children:"From corporate events to weddings, we bring the flavor to your special occasion"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:["Corporate Events","Weddings","Private Parties","Festivals"].map(p=>e.jsx(X,{to:`/catering?event=${encodeURIComponent(p)}`,className:"bg-[#F2EFE9]/10 backdrop-blur-sm rounded-lg p-4 text-center border border-[#F2EFE9]/20 hover:bg-[#F2EFE9]/20 hover:border-[#F2EFE9]/40 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#F2EFE9]/50 focus:ring-offset-2 focus:ring-offset-[#2C1A16]",children:e.jsx("p",{className:"font-medium text-[#F2EFE9]",children:p})},p))}),e.jsxs(X,{to:"/catering/inquiry",className:"inline-flex items-center px-8 py-4 bg-transparent text-[#F2EFE9] text-lg font-bold rounded-lg border-4 border-[#F2EFE9] hover:bg-[#F2EFE9] hover:text-[#2C1A16] transition-all duration-300",children:["Request Catering Quote",e.jsx(We,{className:"ml-2 w-5 h-5"})]})]})})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8 lg:p-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Get exclusive offers, new menu items, and location updates"})]}),e.jsxs("form",{onSubmit:b,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"email",value:t,onChange:p=>{s(p.target.value),n(null)},placeholder:"Enter your email",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 focus:outline-none transition-all",disabled:f.isPending}),e.jsx("button",{type:"submit",disabled:f.isPending||!t,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-2 animate-spin"}),"Subscribing..."]}):"Subscribe"})]}),f.isSuccess&&e.jsxs("div",{className:"mt-4 flex items-center text-green-600 bg-green-50 px-4 py-3 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:"Thanks for subscribing! Check your inbox."})]}),r&&e.jsxs("div",{className:"mt-4 flex items-center text-red-600 bg-red-50 px-4 py-3 rounded-lg",children:[e.jsx(me,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:r})]}),e.jsxs("p",{className:"mt-4 text-xs text-gray-500 text-center",children:["By subscribing, you agree to our"," ",e.jsx(X,{to:"/privacy",className:"text-orange-600 hover:text-orange-700",children:"Privacy Policy"})]})]})]})})}),e.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-[#2C1A16] border-t border-[#4A3B32] shadow-2xl",children:e.jsx("div",{className:"px-4 py-3",children:e.jsx(X,{to:"/menu",className:"flex items-center justify-center w-full px-8 py-4 bg-[#3E2F26] text-[#F5F0EB] text-lg font-bold rounded-full shadow-xl hover:bg-[#2C1A16] transition-all duration-300",style:{minHeight:"56px"},children:"Order Delivery"})})})]})},o9=({isOpen:t,onClose:s,title:r,children:n,footer:a,className:i="",maxHeight:o="90vh",overlayType:l="filter"})=>{const{openOverlay:c,closeOverlay:d}=_u();return u.useEffect(()=>(t?(c(l),document.body.style.overflow="hidden"):(d(),document.body.style.overflow="unset"),()=>{d(),document.body.style.overflow="unset"}),[t,c,d,l]),u.useEffect(()=>{const m=x=>{x.key==="Escape"&&t&&s()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[t,s]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] transition-opacity duration-300 animate-fade-in",onClick:s,"aria-hidden":"true"}),e.jsxs("div",{className:`
          fixed bottom-0 left-0 right-0 bg-white 
          rounded-t-[var(--radius-xl)] shadow-2xl z-[101]
          flex flex-col animate-slide-up
          ${i}
        `,style:{maxHeight:o,paddingBottom:"env(safe-area-inset-bottom, 0px)"},role:"dialog","aria-modal":"true","aria-labelledby":r?"sheet-title":void 0,children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1 bg-[var(--accent-color)] rounded-full opacity-50"})}),r&&e.jsxs("div",{className:"sticky top-0 bg-white border-b border-[var(--border-light)] px-4 sm:px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{id:"sheet-title",className:"text-xl font-bold text-[var(--primary-text)]",children:r}),e.jsx("button",{onClick:s,className:"p-2 text-[var(--primary-text)] hover:bg-[var(--primary-bg)] rounded-lg transition-colors",style:{minHeight:"var(--tap-target-min)",minWidth:"var(--tap-target-min)"},"aria-label":"Close",children:e.jsx(Ae,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-6",children:n}),a&&e.jsx("div",{className:"sticky bottom-0 bg-white border-t border-[var(--border-light)] px-4 sm:px-6 py-4",children:a})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        
        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        
        .animate-slide-up {
          animation: slide-up 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
      `})]}):null},l9=({group:t,selectedOptions:s,onOptionChange:r,showError:n=!1})=>e.jsxs("div",{className:`bg-white rounded-2xl border overflow-hidden w-full min-w-0 box-border ${n?"border-red-300":"border-[var(--border-light)]"}`,children:[e.jsxs("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3 bg-[#FAFAF8] border-b border-[var(--border-light)] flex items-center justify-between gap-2 w-full box-border",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-bold text-[var(--primary-text)] uppercase tracking-wide",children:t.name}),t.is_required&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-[10px] sm:text-xs font-semibold rounded-full whitespace-nowrap",children:"Required"})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-[var(--primary-text)]/60 whitespace-nowrap",children:t.type==="single"?"Select one":"Select any"})]}),e.jsx("div",{className:"divide-y divide-[var(--border-light)] w-full",children:t.options.sort((a,i)=>a.sort_order-i.sort_order).map(a=>{const i=s.some(o=>o.group_id===t.group_id&&o.option_id===a.option_id);return e.jsxs("label",{className:`
                flex items-center gap-3 px-3 sm:px-4 py-3 sm:py-3.5 cursor-pointer 
                transition-colors duration-150 touch-manipulation w-full box-border
                active:bg-[var(--primary-bg)]
                ${i?"bg-[var(--primary-bg)]":"hover:bg-[#FAFAF8]"}
              `,style:{minHeight:"52px"},children:[e.jsx("div",{className:`
                  flex-shrink-0 flex items-center justify-center
                  w-6 h-6 border-2 transition-all duration-150
                  ${t.type==="single"?"rounded-full":"rounded-md"}
                  ${i?"bg-[var(--btn-bg)] border-[var(--btn-bg)]":"bg-white border-[var(--border-light)]"}
                `,children:i&&e.jsx(Ge,{className:"w-4 h-4 text-white",strokeWidth:3})}),e.jsx("input",{type:t.type==="single"?"radio":"checkbox",name:t.group_id,checked:i,onChange:()=>r(t.group_id,t.name,t.type,a),className:"sr-only"}),e.jsx("span",{className:`flex-1 min-w-0 text-sm sm:text-base leading-tight ${i?"font-semibold text-[var(--primary-text)]":"text-[var(--primary-text)]"}`,children:a.name}),Number(a.additional_price)>0&&e.jsxs("span",{className:`flex-shrink-0 text-xs sm:text-sm font-medium ${i?"text-[var(--btn-bg)]":"text-[var(--primary-text)]/60"}`,children:["+",Number(a.additional_price).toFixed(2)]})]},a.option_id)})}),n&&e.jsxs("div",{className:"px-3 sm:px-4 py-2 bg-red-50 border-t border-red-200 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-xs sm:text-sm text-red-600",children:"Please select an option"})]})]}),c9=({value:t,onChange:s,min:r=1,max:n=99})=>{const a=()=>{t>r&&s(t-1)},i=()=>{t<n&&s(t+1)};return e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:a,disabled:t<=r,className:`
          w-12 h-12 sm:w-14 sm:h-14 flex items-center justify-center
          rounded-full border-2 border-[var(--primary-text)]
          bg-white text-[var(--primary-text)]
          active:scale-95 transition-all duration-150 touch-manipulation
          disabled:opacity-30 disabled:cursor-not-allowed
          hover:bg-[var(--primary-bg)]
          focus:outline-none focus:ring-2 focus:ring-[var(--primary-text)] focus:ring-offset-2
        `,"aria-label":"Decrease quantity",type:"button",children:e.jsx(Ww,{className:"w-5 h-5 sm:w-6 sm:h-6",strokeWidth:2.5})}),e.jsx("div",{className:"w-12 sm:w-16 text-center",children:e.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-[var(--primary-text)]","aria-live":"polite",children:t})}),e.jsx("button",{onClick:i,disabled:t>=n,className:`
          w-12 h-12 sm:w-14 sm:h-14 flex items-center justify-center
          rounded-full bg-[var(--btn-bg)] text-white
          active:scale-95 transition-all duration-150 touch-manipulation
          disabled:opacity-30 disabled:cursor-not-allowed
          hover:bg-[#1A0F0D]
          focus:outline-none focus:ring-2 focus:ring-[var(--primary-text)] focus:ring-offset-2
        `,"aria-label":"Increase quantity",type:"button",children:e.jsx(wt,{className:"w-5 h-5 sm:w-6 sm:h-6",strokeWidth:2.5})})]})},d9=({isOpen:t,onClose:s,item:r,selectedCustomizations:n,quantity:a,totalPrice:i,onCustomizationChange:o,onQuantityChange:l,onAddToCart:c,isLoading:d=!1})=>{const{openOverlay:m,closeOverlay:x}=_u(),[f,b]=u.useState(!1),[h,p]=u.useState(!1),v=u.useRef(null),g=u.useMemo(()=>{if(!r)return new Set;const M=new Set(n.map(N=>N.group_id)),T=new Set;return r.customization_groups.forEach(N=>{N.is_required&&!M.has(N.group_id)&&T.add(N.group_id)}),T},[r,n]),j=g.size>0;u.useEffect(()=>{if(!t)b(!1),p(!1);else{const M=setTimeout(()=>{p(!0)},50);return()=>clearTimeout(M)}},[t]),u.useEffect(()=>{if(t){m("customization");const M=window.scrollY;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${M}px`,document.body.style.width="100%",document.body.style.touchAction="none",()=>{x(),document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.touchAction="",window.scrollTo(0,M)}}},[t,m,x]),u.useEffect(()=>{const M=T=>{T.key==="Escape"&&t&&s()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[t,s]);const y=()=>{b(!0),j||c()};if(!t)return null;const w=Number(i)*a;return r&&r.customization_groups.length,e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`
          fixed inset-0 bg-black/60 backdrop-blur-sm z-[9998]
          transition-opacity duration-200
          ${h?"opacity-100":"opacity-0"}
        `,onClick:s,"aria-hidden":"true",style:{touchAction:"none"}}),e.jsxs("div",{"data-product-customizer":"true",className:`
          fixed z-[9999] bg-white
          flex flex-col
          overflow-hidden
          
          /* Mobile: Bottom sheet that slides up - full width, no horizontal overflow */
          left-0 right-0 bottom-0 w-full max-w-full
          rounded-t-[24px]
          
          /* Desktop: Centered modal */
          md:left-1/2 md:right-auto md:top-1/2 md:bottom-auto
          md:-translate-x-1/2 md:-translate-y-1/2
          md:rounded-[20px] md:w-full md:max-w-[480px]
          
          /* Transition for smooth appearance */
          transition-transform duration-300 ease-out
          ${h?"translate-y-0 md:translate-y-[-50%]":"translate-y-full md:translate-y-[-50%] md:scale-95"}
        `,style:{maxHeight:"min(92dvh, 92vh)"},role:"dialog","aria-modal":"true","aria-labelledby":"customizer-title",children:[e.jsx("div",{className:"flex-shrink-0 flex justify-center pt-3 pb-1 md:hidden","aria-hidden":"true",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between px-4 py-3 border-b border-[var(--border-light)] bg-white w-full box-border",children:[e.jsx("h2",{id:"customizer-title",className:"text-lg font-bold text-[var(--primary-text)] truncate flex-1 pr-4",children:(r==null?void 0:r.name)||"Customize Your Order"}),e.jsx("button",{onClick:s,type:"button",className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full hover:bg-[var(--primary-bg)] active:bg-[var(--primary-bg)] transition-colors touch-manipulation","aria-label":"Close",children:e.jsx(Ae,{className:"w-5 h-5 text-[var(--primary-text)]"})})]}),e.jsx("div",{ref:v,className:"flex-1 overflow-y-auto overflow-x-hidden overscroll-contain w-full min-w-0",style:{WebkitOverflowScrolling:"touch",flexBasis:"0%",minHeight:"0"},children:e.jsx("div",{className:"px-4 py-4 space-y-4 w-full min-w-0 box-border",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-3 sm:gap-4 p-3 sm:p-4 bg-[#FAFAF8] rounded-2xl w-full min-w-0 box-border",children:[r.image_url&&e.jsx("img",{src:r.image_url,alt:r.name,className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 object-cover rounded-xl flex-shrink-0",loading:"eager"}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center overflow-hidden box-border",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-[var(--primary-text)] leading-tight mb-1",children:r.name}),r.description&&e.jsx("p",{className:"text-xs sm:text-sm text-[var(--primary-text)]/60 line-clamp-2 leading-relaxed mb-1 sm:mb-2",children:r.description}),e.jsxs("p",{className:"text-base sm:text-lg font-bold text-[var(--primary-text)]",children:["",Number(r.price).toFixed(2)]})]})]}),r.customization_groups.length>0?e.jsx("div",{className:"space-y-3 w-full min-w-0 box-border",children:r.customization_groups.sort((M,T)=>M.sort_order-T.sort_order).map(M=>e.jsx(l9,{group:M,selectedOptions:n,onOptionChange:o,showError:f&&g.has(M.group_id)},M.group_id))}):e.jsxs("div",{className:"py-6 text-center bg-[#FAFAF8] rounded-2xl",children:[e.jsx(pt,{className:"w-10 h-10 mx-auto mb-3 text-[var(--primary-text)]/40"}),e.jsx("p",{className:"text-sm text-[var(--primary-text)]/60",children:"No customization options for this item."}),e.jsx("p",{className:"text-sm text-[var(--primary-text)]/60 mt-1",children:"Select quantity below and add to cart."})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-[var(--border-light)] p-4 w-full min-w-0 box-border",children:[e.jsx("h4",{className:"text-sm font-bold text-[var(--primary-text)] uppercase tracking-wide mb-4 text-center",children:"Quantity"}),e.jsx(c9,{value:a,onChange:l,min:1,max:99})]}),e.jsx("div",{className:"h-4","aria-hidden":"true"})]}):e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:e.jsx(Re,{className:"w-8 h-8 text-[var(--primary-text)] animate-spin"})}),e.jsx("p",{className:"text-[var(--primary-text)]/70 text-sm",children:"Loading options..."})]})})}),r&&e.jsxs("div",{className:"flex-shrink-0 bg-white border-t border-[var(--border-light)] px-3 sm:px-4 py-3 sm:py-4 w-full box-border",style:{boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.08)",paddingBottom:"max(12px, calc(12px + env(safe-area-inset-bottom, 0px)))",paddingLeft:"max(12px, env(safe-area-inset-left, 12px))",paddingRight:"max(12px, env(safe-area-inset-right, 12px))"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm sm:text-base font-medium text-[var(--primary-text)]/70",children:"Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-bold text-[var(--primary-text)]",children:["",w.toFixed(2)]})]}),e.jsx("button",{onClick:y,disabled:d,type:"button",className:`
                w-full py-3.5 sm:py-4 rounded-xl font-bold text-base
                flex items-center justify-center gap-2
                transition-all duration-200 touch-manipulation
                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--btn-bg)]
                ${j&&f?"bg-gray-200 text-gray-500 cursor-not-allowed":d?"bg-[var(--btn-bg)] text-white opacity-75 cursor-wait":"bg-[var(--btn-bg)] text-white hover:bg-[#1A0F0D] active:scale-[0.98] active:bg-[#1A0F0D]"}
              `,style:{minHeight:"52px"},children:d?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 text-white animate-spin"}),e.jsx("span",{children:"Adding to Cart..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-5 h-5"}),e.jsx("span",{children:"Add to Cart"}),e.jsx("span",{className:"opacity-75 mx-1",children:""}),e.jsxs("span",{children:["",w.toFixed(2)]})]})}),j&&f&&e.jsx("p",{className:"text-center text-sm text-red-600 mt-2",children:"Please complete required selections above"})]})]}),e.jsx("style",{children:`
        /* Ensure the sheet is above everything and properly contained */
        [data-product-customizer] {
          isolation: isolate;
          contain: layout style paint;
          /* CRITICAL: Prevent ALL horizontal overflow */
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }
        
        /* Ensure all children respect box-sizing */
        [data-product-customizer] *,
        [data-product-customizer] *::before,
        [data-product-customizer] *::after {
          box-sizing: border-box !important;
        }
        
        /* Mobile: Full viewport width with safe areas */
        @media (max-width: 768px) {
          [data-product-customizer] {
            max-width: 100% !important;
            width: 100% !important;
            left: 0 !important;
            right: 0 !important;
          }
          
          /* Ensure body doesn't scroll horizontally when modal is open */
          /* body:has([data-product-customizer]) {
            overflow-x: hidden !important;
          } */
        }
        
        /* Custom scrollbar for content area */
        [data-product-customizer] .overflow-y-auto::-webkit-scrollbar {
          width: 4px;
        }
        
        [data-product-customizer] .overflow-y-auto::-webkit-scrollbar-track {
          background: transparent;
        }
        
        [data-product-customizer] .overflow-y-auto::-webkit-scrollbar-thumb {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 4px;
        }
        
        /* Scrollable content area - prevent horizontal overflow */
        [data-product-customizer] .overflow-y-auto {
          overflow-x: hidden !important;
          max-width: 100% !important;
        }
        
        /* Smooth transitions */
        @media (prefers-reduced-motion: no-preference) {
          [data-product-customizer] {
            transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1),
                        opacity 0.3s ease-out;
          }
        }
        
        @media (prefers-reduced-motion: reduce) {
          [data-product-customizer] {
            transition: none;
          }
        }
        
        /* Mobile-specific fixes for iOS Safari */
        @supports (-webkit-touch-callout: none) {
          [data-product-customizer] {
            /* Prevent rubber-band scrolling on the modal itself */
            overscroll-behavior: contain;
          }
        }
        
        /* Safe area support for notched devices */
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
          [data-product-customizer] > .flex-shrink-0:last-of-type {
            padding-bottom: max(16px, calc(16px + env(safe-area-inset-bottom)));
          }
        }
      `})]})},u9=({steps:t,currentStep:s,selections:r})=>e.jsx("div",{className:"flex items-center justify-center gap-1 sm:gap-1.5 py-2 px-2 w-full max-w-full overflow-hidden",children:t.map((n,a)=>{const i=a<s,o=a===s,l=r.some(d=>d.step_id===n.step_id&&d.items.length>0),c=!n.is_required||l;return e.jsxs(St.Fragment,{children:[e.jsx("div",{className:`
                w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs font-bold
                flex-shrink-0 transition-all duration-200
                ${i&&c?"bg-green-500 text-white":o?"bg-[var(--btn-bg)] text-white ring-2 sm:ring-4 ring-[var(--btn-bg)]/20":"bg-gray-200 text-gray-500"}
              `,children:i&&c?e.jsx(Ge,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",strokeWidth:3}):a+1}),a<t.length-1&&e.jsx("div",{className:`
                  flex-1 min-w-[12px] max-w-8 h-1 rounded-full transition-all duration-200
                  ${a<s?"bg-green-500":"bg-gray-200"}
                `})]},n.step_id)})}),m9=({step:t,selection:s,onSelectionChange:r,showError:n=!1})=>{const a=u.useMemo(()=>new Set((s==null?void 0:s.items.map(o=>o.item_id))||[]),[s]),i=o=>o.override_price!==null?Number(o.override_price):Number(o.price);return e.jsxs("div",{className:"space-y-3 w-full max-w-full overflow-hidden box-border",children:[e.jsxs("div",{className:"text-center mb-4 px-1",children:[e.jsx("h3",{id:`step-${t.step_id}-title`,className:"text-lg sm:text-xl font-bold text-[var(--primary-text)]",children:t.step_name}),e.jsxs("p",{id:`step-${t.step_id}-description`,className:"text-sm text-[var(--primary-text)]/60 mt-1",children:[t.step_type==="single"?"Select one option":t.max_selections?`Select up to ${t.max_selections} options`:"Select as many as you like",t.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"(Required)"})]})]}),n&&t.is_required&&a.size===0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl px-3 py-3 flex items-center gap-2 text-red-600",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Please select an option to continue"})]}),e.jsx("div",{className:"flex flex-col gap-2 w-full max-w-full overflow-hidden",role:t.step_type==="single"?"radiogroup":"group","aria-labelledby":`step-${t.step_id}-title`,"aria-describedby":`step-${t.step_id}-description`,"aria-required":t.is_required,children:(()=>{const o=t.items.filter(l=>l.is_active).sort((l,c)=>l.sort_order-c.sort_order);return o.length===0?(console.warn(`No active items for step: ${t.step_name} (${t.step_key})`),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl px-4 py-6 text-center",children:[e.jsx("div",{className:"mb-3",children:e.jsx("svg",{className:"w-12 h-12 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h4",{className:"font-bold text-amber-900 mb-2",children:"No Options Available"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["No ",t.step_key," options have been configured yet. Please contact support or try again later."]})]})):o.map(l=>{const c=a.has(l.item_id),d=i(l);return e.jsxs("button",{onClick:()=>r(l),role:t.step_type==="single"?"radio":"checkbox","aria-checked":c,"aria-label":`${l.name}${l.description?`, ${l.description}`:""}${d>0?`, plus ${d.toFixed(2)}`:", included"}`,className:`
                  w-full flex items-center gap-2 sm:gap-3 p-3 sm:p-4 rounded-xl border-2 transition-all duration-150
                  text-left touch-manipulation box-border
                  ${c?"border-[var(--btn-bg)] bg-[var(--primary-bg)]":"border-[var(--border-light)] bg-white hover:border-[var(--primary-text)]/30"}
                `,style:{minHeight:"60px"},children:[e.jsx("div",{className:`
                    flex-shrink-0 w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center border-2 transition-all duration-150
                    ${t.step_type==="single"?"rounded-full":"rounded-md"}
                    ${c?"bg-[var(--btn-bg)] border-[var(--btn-bg)]":"bg-white border-[var(--border-light)]"}
                  `,children:c&&e.jsx(Ge,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",strokeWidth:3})}),l.image_url&&e.jsx("img",{src:l.image_url,alt:l.name,className:"w-10 h-10 sm:w-12 sm:h-12 object-cover rounded-lg flex-shrink-0",loading:"lazy"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"block text-sm sm:text-base font-semibold leading-snug truncate text-[var(--primary-text)]",children:l.name}),l.description&&e.jsx("span",{className:"block text-xs sm:text-sm text-[var(--primary-text)]/60 truncate mt-0.5 leading-tight",children:l.description})]}),d>0&&e.jsxs("span",{className:`flex-shrink-0 text-xs sm:text-sm font-bold whitespace-nowrap ${c?"text-[var(--btn-bg)]":"text-[var(--primary-text)]/70"}`,children:["+",d.toFixed(2)]}),d===0&&e.jsx("span",{className:"flex-shrink-0 text-xs text-green-600 font-semibold whitespace-nowrap",children:"Included"})]},l.step_item_id)})})()})]})},x9=({productName:t,basePrice:s,selections:r,quantity:n,onQuantityChange:a})=>{const i=u.useMemo(()=>r.reduce((d,m)=>d+m.items.reduce((x,f)=>x+f.price,0),0),[r]),o=s+i,l=o*n,c=u.useMemo(()=>{var x,f,b,h;const d=(f=(x=r.find(p=>p.step_key==="base"))==null?void 0:x.items[0])==null?void 0:f.name,m=(h=(b=r.find(p=>p.step_key==="protein"))==null?void 0:b.items[0])==null?void 0:h.name;return d&&m?`${t} - ${d} + ${m}`:t},[t,r]);return e.jsxs("div",{className:"space-y-4 w-full max-w-full overflow-hidden box-border",children:[e.jsxs("div",{className:"text-center mb-4 px-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[var(--primary-text)]",children:"Review Your Order"}),e.jsx("p",{className:"text-sm text-[var(--primary-text)]/60 mt-1",children:"Check your selections before adding to cart"})]}),e.jsxs("div",{className:"bg-[#FAFAF8] rounded-2xl p-3 sm:p-4 space-y-3 w-full box-border",children:[e.jsx("h4",{className:"font-bold text-[var(--primary-text)] text-sm sm:text-base break-words",children:c}),e.jsx("div",{className:"space-y-2 divide-y divide-[var(--border-light)]",children:r.map(d=>d.items.length>0&&e.jsxs("div",{className:"pt-2 first:pt-0",children:[e.jsx("span",{className:"text-xs font-semibold text-[var(--primary-text)]/60 uppercase tracking-wide",children:d.step_name}),d.items.map(m=>e.jsxs("div",{className:"flex justify-between items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm text-[var(--primary-text)] truncate flex-1 min-w-0",children:m.name}),m.price>0&&e.jsxs("span",{className:"text-sm font-medium text-[var(--primary-text)] flex-shrink-0 whitespace-nowrap",children:["+",m.price.toFixed(2)]})]},m.item_id))]},d.step_id))}),s>0&&e.jsxs("div",{className:"flex justify-between items-center gap-2 pt-2 border-t border-[var(--border-light)]",children:[e.jsx("span",{className:"text-sm text-[var(--primary-text)]/70",children:"Base Price"}),e.jsxs("span",{className:"text-sm font-medium text-[var(--primary-text)] whitespace-nowrap",children:["",s.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-2 pt-2 border-t border-[var(--border-light)]",children:[e.jsx("span",{className:"text-sm font-semibold text-[var(--primary-text)]",children:"Price per item"}),e.jsxs("span",{className:"text-base font-bold text-[var(--primary-text)] whitespace-nowrap",children:["",o.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-[var(--border-light)] p-3 sm:p-4 w-full box-border",children:[e.jsx("h4",{className:"text-sm font-bold text-[var(--primary-text)] uppercase tracking-wide mb-3 sm:mb-4 text-center",children:"Quantity"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>n>1&&a(n-1),disabled:n<=1,className:"w-11 h-11 sm:w-12 sm:h-12 flex items-center justify-center rounded-full border-2 border-[var(--primary-text)] bg-white text-[var(--primary-text)] active:scale-95 transition-all duration-150 disabled:opacity-30 disabled:cursor-not-allowed touch-manipulation",type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M20 12H4"})})}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-[var(--primary-text)] w-10 sm:w-12 text-center",children:n}),e.jsx("button",{onClick:()=>n<99&&a(n+1),disabled:n>=99,className:"w-11 h-11 sm:w-12 sm:h-12 flex items-center justify-center rounded-full bg-[var(--btn-bg)] text-white active:scale-95 transition-all duration-150 disabled:opacity-30 disabled:cursor-not-allowed touch-manipulation",type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),e.jsxs("div",{className:"bg-[var(--btn-bg)] text-white rounded-2xl p-3 sm:p-4 flex justify-between items-center w-full box-border",children:[e.jsx("span",{className:"font-semibold text-sm sm:text-base",children:"Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-bold whitespace-nowrap",children:["",l.toFixed(2)]})]})]})},h9=({isOpen:t,onClose:s,productName:r,productImageUrl:n,basePrice:a,steps:i,onAddToCart:o,isLoading:l=!1,error:c=null,onRetry:d})=>{const{openOverlay:m,closeOverlay:x}=_u(),[f,b]=u.useState(0),[h,p]=u.useState([]),[v,g]=u.useState(1),[j,y]=u.useState(!1),[w,M]=u.useState(!1),T=u.useRef(null),N=i.length+1,E=f===i.length,L=E?null:i[f];u.useEffect(()=>{if(i.length>0&&h.length===0){const B=i.map(C=>({step_id:C.step_id,step_key:C.step_key,step_name:C.step_name,items:[]}));p(B)}},[i,h.length]),u.useEffect(()=>{if(!t)b(0),p([]),g(1),y(!1),M(!1);else{const B=setTimeout(()=>M(!0),50);return()=>clearTimeout(B)}},[t]),u.useEffect(()=>{if(t){m("builder");const B=window.scrollY,C=()=>{const R=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${R}px`)};return C(),window.addEventListener("resize",C),window.addEventListener("orientationchange",C),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${B}px`,document.body.style.width="100%",document.body.style.touchAction="none",()=>{x(),window.removeEventListener("resize",C),window.removeEventListener("orientationchange",C),document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.touchAction="",window.scrollTo(0,B)}}},[t,m,x]),u.useEffect(()=>{const B=C=>{C.key==="Escape"&&t&&s()};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[t,s]);const k=u.useCallback(()=>{if(L)return h.find(B=>B.step_id===L.step_id)},[L,h]),S=u.useCallback(B=>{if(!L)return;const C=B.override_price!==null?Number(B.override_price):Number(B.price);p(R=>{const _=[...R],q=_.findIndex(V=>V.step_id===L.step_id);if(q===-1)return R;const O=_[q];return L.step_type==="single"?_[q]={...O,items:[{item_id:B.item_id,name:B.name,price:C}]}:O.items.findIndex(D=>D.item_id===B.item_id)>=0?_[q]={...O,items:O.items.filter(D=>D.item_id!==B.item_id)}:(L.max_selections===null||O.items.length<L.max_selections)&&(_[q]={...O,items:[...O.items,{item_id:B.item_id,name:B.name,price:C}]}),_})},[L]),F=u.useCallback(()=>{if(!L)return!0;const B=h.find(C=>C.step_id===L.step_id);return L.is_required?B&&B.items.length>=L.min_selections:!0},[L,h]),P=()=>{var B,C;if(y(!0),!F()){(B=T.current)==null||B.scrollTo({top:0,behavior:"smooth"});return}f<N-1&&(b(f+1),y(!1),(C=T.current)==null||C.scrollTo({top:0,behavior:"smooth"}))},I=()=>{var B;f>0&&(b(f-1),y(!1),(B=T.current)==null||B.scrollTo({top:0,behavior:"smooth"}))},H=()=>{const B=h.reduce((R,_)=>R+_.items.reduce((q,O)=>q+O.price,0),0),C=a+B;o(h,C,v)},z=u.useMemo(()=>{const B=h.reduce((C,R)=>C+R.items.reduce((_,q)=>_+q.price,0),0);return(a+B)*v},[a,h,v]);return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`
          fixed inset-0 bg-black/60 backdrop-blur-sm z-[9998]
          transition-opacity duration-200
          ${w?"opacity-100":"opacity-0"}
        `,onClick:s,"aria-hidden":"true",style:{touchAction:"none"}}),e.jsxs("div",{"data-product-builder":"true",className:`
          fixed z-[9999] bg-white flex flex-col transform-gpu
          
          /* Mobile: Full-height bottom sheet - CRITICAL: no horizontal overflow */
          left-0 right-0 bottom-0 rounded-t-[24px]
          
          /* Desktop: Centered modal */
          md:left-1/2 md:right-auto md:top-1/2 md:bottom-auto
          md:-translate-x-1/2 md:-translate-y-1/2
          md:rounded-[20px] md:w-full md:max-w-[520px]
          
          transition-transform duration-300 ease-out
          ${w?"translate-y-0 md:translate-y-[-50%]":"translate-y-full md:translate-y-[-50%] md:scale-95"}
        `,style:{height:"92dvh",maxHeight:"calc(100dvh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px))",overflow:"hidden",overflowX:"hidden",width:"100%",maxWidth:"100%",boxSizing:"border-box"},role:"dialog","aria-modal":"true","aria-labelledby":"builder-title",children:[e.jsx("div",{className:"flex-shrink-0 flex justify-center pt-3 pb-1 md:hidden","aria-hidden":"true",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between gap-2 px-3 sm:px-4 py-3 border-b border-[var(--border-light)] bg-white w-full box-border",children:[e.jsxs("div",{className:"flex-1 min-w-0 flex items-baseline gap-2 overflow-hidden",children:[e.jsx("h2",{id:"builder-title",className:"text-sm sm:text-lg font-bold text-[var(--primary-text)] truncate",children:r}),e.jsxs("span",{className:"text-xs text-[var(--primary-text)]/60 whitespace-nowrap flex-shrink-0",children:[f+1,"/",N]})]}),e.jsx("button",{onClick:s,type:"button",className:"flex-shrink-0 w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center rounded-full hover:bg-[var(--primary-bg)] active:bg-[var(--primary-bg)] transition-colors touch-manipulation","aria-label":"Close",children:e.jsx(Ae,{className:"w-5 h-5 text-[var(--primary-text)]"})})]}),e.jsx("div",{className:"flex-shrink-0 px-2 sm:px-4 py-2 border-b border-[var(--border-light)] bg-[#FAFAF8] w-full box-border overflow-hidden",children:e.jsx(u9,{steps:i,currentStep:f,selections:h})}),e.jsx("div",{ref:T,className:"flex-1 overflow-y-auto overflow-x-hidden overscroll-contain w-full",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",flexGrow:1,flexShrink:1,flexBasis:"0%",minHeight:"150px",display:"flex",flexDirection:"column",boxSizing:"border-box",maxWidth:"100%"},children:e.jsx("div",{className:"px-3 sm:px-4 py-4 flex-1 w-full box-border overflow-hidden",children:l&&i.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Re,{className:"w-10 h-10 text-[var(--btn-bg)] animate-spin mb-4"}),e.jsx("p",{className:"text-sm text-[var(--primary-text)]/70 font-medium",children:"Loading customization options..."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-2/3 mx-auto"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2 mx-auto"}),e.jsx("div",{className:"space-y-2 mt-4",children:[1,2,3].map(B=>e.jsx("div",{className:"h-16 bg-gray-100 rounded-xl animate-pulse border border-gray-200"},B))})]})]}):c?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl px-4 py-6 text-center",children:[e.jsx("div",{className:"mb-3",children:e.jsx("svg",{className:"w-12 h-12 mx-auto text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h4",{className:"font-bold text-red-900 mb-2",children:"We couldn't load options"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:c||"Something went wrong. Please try again."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[d&&e.jsx("button",{onClick:d,className:"px-6 py-2 bg-[var(--btn-bg)] text-white rounded-lg font-semibold hover:opacity-90 transition-colors",children:"Retry"}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Close"})]})]})}):i.length===0?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl px-4 py-6 text-center",children:[e.jsx("div",{className:"mb-3",children:e.jsx("svg",{className:"w-12 h-12 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h4",{className:"font-bold text-amber-900 mb-2",children:"No Options Available"}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"This item's customization options are not configured yet. Please contact support or try again later."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[d&&e.jsx("button",{onClick:d,className:"px-6 py-2 bg-[var(--btn-bg)] text-white rounded-lg font-semibold hover:opacity-90 transition-colors",children:"Retry"}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Close"})]})]})}):E?e.jsx(x9,{productName:r,basePrice:a,selections:h,quantity:v,onQuantityChange:g}):L?e.jsx(m9,{step:L,selection:k(),onSelectionChange:S,showError:j}):null})}),e.jsxs("div",{className:"flex-shrink-0 bg-white/95 backdrop-blur-sm border-t border-[var(--border-light)] px-3 sm:px-4 py-3 sticky bottom-0 z-10 w-full box-border",style:{boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.08)",paddingBottom:"max(12px, calc(12px + env(safe-area-inset-bottom, 0px)))",paddingLeft:"max(12px, env(safe-area-inset-left, 12px))",paddingRight:"max(12px, env(safe-area-inset-right, 12px))",touchAction:"manipulation"},children:[!E&&e.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[e.jsx("span",{className:"text-[var(--primary-text)]/70",children:"Running total"}),e.jsxs("span",{className:"font-bold text-[var(--primary-text)]",children:["",z.toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-3",children:[f>0&&e.jsxs("button",{onClick:I,type:"button",className:"flex-1 py-3.5 rounded-xl font-bold text-[var(--primary-text)] border-2 border-[var(--primary-text)] flex items-center justify-center gap-2 active:scale-[0.98] transition-all touch-manipulation",style:{minHeight:"52px",pointerEvents:"auto",touchAction:"manipulation"},"aria-label":"Go back to previous step",children:[e.jsx(Fi,{className:"w-5 h-5"}),"Back"]}),E?e.jsx("button",{onClick:H,disabled:l,type:"button",className:`
                  flex-1 py-3.5 rounded-xl font-bold text-white flex items-center justify-center gap-2
                  transition-all touch-manipulation
                  ${l?"bg-[var(--btn-bg)] opacity-75 cursor-wait":"bg-[var(--btn-bg)] active:scale-[0.98] hover:bg-[#1A0F0D]"}
                `,style:{minHeight:"52px"},children:l?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-5 h-5"}),"Add to Cart - ",z.toFixed(2)]})}):e.jsxs("button",{onClick:P,type:"button",className:"flex-1 py-3.5 rounded-xl font-bold text-white bg-[var(--btn-bg)] flex items-center justify-center gap-2 active:scale-[0.98] hover:bg-[#1A0F0D] transition-all touch-manipulation",style:{minHeight:"52px",pointerEvents:"auto",touchAction:"manipulation"},"aria-label":"Continue to next step",children:["Next",e.jsx(We,{className:"w-5 h-5"})]})]})]})]}),e.jsx("style",{children:`
        /* iOS Safari viewport height fix */
        :root {
          --vh: 1vh;
        }
        
        [data-product-builder] {
          isolation: isolate;
          contain: layout style paint;
          overscroll-behavior: contain;
          /* Force GPU acceleration for smoother animations */
          /* transform: translateZ(0); - Removed to fix desktop positioning */
          /* -webkit-transform: translateZ(0); - Removed to fix desktop positioning */
          /* Ensure flex layout works correctly */
          display: flex !important;
          flex-direction: column !important;
          /* CRITICAL: Prevent ALL horizontal overflow */
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }
        
        [data-product-builder] *,
        [data-product-builder] *::before,
        [data-product-builder] *::after {
          box-sizing: border-box !important;
        }
        
        /* Mobile: Full viewport height with safe areas */
        @media (max-width: 768px) {
          [data-product-builder] {
            /* Use dvh for dynamic viewport on iOS Safari */
            height: 92dvh !important;
            max-height: calc(100dvh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px)) !important;
            /* Fallback for older browsers */
            max-height: calc(100vh - env(safe-area-inset-top, 0px));
            /* Prevent iOS address bar resize issues */
            min-height: 400px;
            /* CRITICAL: prevent horizontal overflow - use 100% not 100vw */
            max-width: 100% !important;
            width: 100% !important;
            left: 0 !important;
            right: 0 !important;
          }
          
          /* Ensure body doesn't scroll horizontally when modal is open */
          /* body:has([data-product-builder]) {
            overflow-x: hidden !important;
          } */
        }
        
        /* Desktop: constrain height */
        @media (min-width: 769px) {
          [data-product-builder] {
            height: auto !important;
            max-height: min(90vh, 90dvh) !important;
          }
        }
        
        /* Scrollable content area - CRITICAL for mobile */
        [data-product-builder] .overflow-y-auto {
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
          /* Ensure this takes available space */
          flex: 1 1 0% !important;
          min-height: 0 !important; /* Critical for flex children to scroll */
          overflow-x: hidden !important;
          max-width: 100% !important;
        }
        
        [data-product-builder] .overflow-y-auto::-webkit-scrollbar {
          width: 4px;
        }
        
        [data-product-builder] .overflow-y-auto::-webkit-scrollbar-track {
          background: transparent;
        }
        
        [data-product-builder] .overflow-y-auto::-webkit-scrollbar-thumb {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 4px;
        }
        
        /* Header - fixed at top */
        [data-product-builder] > .flex-shrink-0:first-of-type {
          flex-shrink: 0 !important;
        }
        
        /* Footer - always visible at bottom with safe area */
        [data-product-builder] > .flex-shrink-0:last-of-type {
          flex-shrink: 0 !important;
          position: relative;
          z-index: 10;
          background: white;
          pointer-events: auto;
        }
        
        /* Ensure all direct children respect flex layout and don't overflow */
        [data-product-builder] > * {
          /* transform: translateZ(0); */
          /* -webkit-transform: translateZ(0); */
          flex-shrink: 0;
          max-width: 100% !important;
          overflow-x: hidden;
        }
        
        /* The scrollable content area should be the only one that grows */
        [data-product-builder] > .flex-1 {
          flex: 1 1 0% !important;
          min-height: 0 !important;
          overflow-y: auto !important;
          overflow-x: hidden !important;
        }
        
        /* Ensure buttons in footer don't overflow */
        [data-product-builder] button {
          max-width: 100%;
        }
        
        /* Safe area support for notched devices */
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
          [data-product-builder] > .flex-shrink-0:last-of-type {
            padding-bottom: max(12px, calc(12px + env(safe-area-inset-bottom)));
          }
        }
      `})]}):null},Ji="https://123salama-lama-food-truck.launchpulse.ai",p9=async t=>{const s=new URLSearchParams;return t.category&&s.append("category",t.category),t.search&&s.append("search",t.search),t.dietary_filters&&t.dietary_filters.length>0&&t.dietary_filters.forEach(n=>s.append("dietary_filters",n)),t.sort&&s.append("sort",t.sort),s.append("is_active","true"),s.append("limit","50"),s.append("offset","0"),(await Q.get(`${Ji}/api/menu/items?${s.toString()}`)).data},f9=async()=>(await Q.get(`${Ji}/api/menu/categories`)).data,g9=async()=>{try{return(await Q.get(`${Ji}/api/menu/builder-config`)).data}catch{return{config:null,builder_category_ids:[]}}},y9=async()=>{try{return(await Q.get(`${Ji}/api/menu/builder-steps`)).data}catch{return{steps:[]}}},b9=async(t,s)=>{const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),(await Q.post(`${Ji}/api/cart/builder`,t,{headers:r})).data},v9=async(t,s)=>{const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),(await Q.post(`${Ji}/api/cart/items`,t,{headers:r})).data},j9=()=>{var U,W,oe,je,Ve,te,Ne;const[t,s]=ct(),{toast:r}=Xi(),n=Z(J=>J.authentication_state.auth_token),a=Z(J=>J.add_to_cart),[i,o]=u.useState(t.get("category")||null),[l,c]=u.useState(t.get("search")||""),[d,m]=u.useState(((U=t.get("dietary_filters"))==null?void 0:U.split(",").filter(Boolean))||[]),[x,f]=u.useState(t.get("sort")||"default"),[b,h]=u.useState(!1),[p,v]=u.useState(null),[g,j]=u.useState({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1}),[y,w]=u.useState({is_open:!1,item:null}),{data:M}=ue({queryKey:["categories"],queryFn:f9,staleTime:10*60*1e3}),T=u.useMemo(()=>(M==null?void 0:M.categories)||[],[M]),{data:N}=ue({queryKey:["builder-config"],queryFn:g9,staleTime:10*60*1e3}),E=u.useMemo(()=>{var J;return((J=N==null?void 0:N.config)==null?void 0:J.builder_category_ids)||[]},[N]),L=((W=N==null?void 0:N.config)==null?void 0:W.enabled)??!1,k=((oe=N==null?void 0:N.config)==null?void 0:oe.include_base_item_price)??!1,{data:S,isLoading:F,error:P,refetch:I}=ue({queryKey:["builder-steps"],queryFn:y9,staleTime:5*60*1e3,enabled:y.is_open,retry:2}),H=u.useMemo(()=>(S==null?void 0:S.steps)||[],[S]);u.useEffect(()=>{P&&console.error("Failed to load builder steps:",P)},[P]);const z=J=>L&&E.includes(J.category_id),{data:B,isLoading:C,error:R}=ue({queryKey:["menu-items",i,l,d,x],queryFn:()=>p9({category:i||void 0,search:l||void 0,dietary_filters:d.length>0?d:void 0,sort:x!=="default"?x:void 0}),staleTime:5*60*1e3}),_=u.useMemo(()=>B!=null&&B.items?B.items.map(J=>({...J,price:Number(J.price||0),current_stock:J.current_stock!==null?Number(J.current_stock):null,image_url:J.image_url||`https://picsum.photos/300/300?random=${J.item_id}`,dietary_tags:J.dietary_tags||[],customization_groups:(J.customization_groups||[]).map(he=>({...he,options:(he.options||[]).map(_e=>({..._e,additional_price:Number(_e.additional_price||0)}))}))})):[],[B]),q=ce({mutationFn:J=>(v(J.item_id),v9(J,n)),onSuccess:()=>{if(g.item){const J=g.item,he={item_id:J.item_id,item_name:J.name,quantity:g.quantity,unit_price:Number(J.price),customizations:g.selected_customizations.map(_e=>({group_name:_e.group_name,option_name:_e.option_name,additional_price:Number(_e.additional_price)})),line_total:Number(g.total_price)*g.quantity};a(he)}v(null),j({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1}),r({title:"Success",description:"Item added to cart!"})},onError:J=>{var he,_e;v(null),r({variant:"destructive",title:"Error",description:((_e=(he=J.response)==null?void 0:he.data)==null?void 0:_e.message)||"Failed to add item to cart"})}}),O=ce({mutationFn:J=>(y.item&&v(y.item.item_id),b9(J,n)),onSuccess:(J,he)=>{var He,jr,Qr;const _e=he.builder_selections,Fe=(He=_e.base)==null?void 0:He.name,ae=(jr=_e.protein)==null?void 0:jr.name,fe=((Qr=y.item)==null?void 0:Qr.name)||"Custom Item",Se=Fe&&ae?`${fe} - ${Fe} + ${ae}`:fe;if(y.item){const Ls={item_id:y.item.item_id,item_name:Se,quantity:he.quantity,unit_price:he.builder_unit_price,customizations:[],line_total:he.builder_unit_price*he.quantity,is_builder_item:!0};a(Ls)}v(null),w({is_open:!1,item:null}),r({title:"Success",description:"Custom item added to cart!"})},onError:J=>{var he,_e;v(null),r({variant:"destructive",title:"Error",description:((_e=(he=J.response)==null?void 0:he.data)==null?void 0:_e.message)||"Failed to add custom item to cart"})}});u.useEffect(()=>{const J=new URLSearchParams;i&&J.set("category",i),l&&J.set("search",l),d.length>0&&J.set("dietary_filters",d.join(",")),x!=="default"&&J.set("sort",x),s(J,{replace:!0})},[i,l,d,x,s]),u.useEffect(()=>{if(n){const J=localStorage.getItem("pendingCartItem");if(J)try{const he=JSON.parse(J);Date.now()-he.timestamp<30*60*1e3&&(q.mutate({item_id:he.item_id,quantity:he.quantity,selected_customizations:he.selected_customizations}),r({title:"Success",description:`${he.item_name} added to cart!`}))}catch(he){console.error("Failed to process pending cart item:",he)}finally{localStorage.removeItem("pendingCartItem")}}},[n,q,r]);const V=J=>{o(J)},D=J=>{c(J.target.value)},G=()=>{c("")},se=J=>{m(he=>he.includes(J)?he.filter(_e=>_e!==J):[...he,J])},le=J=>{f(J.target.value)},K=()=>{o(null),c(""),m([]),f("default")},A=J=>{if(!J){console.error("[Customization] Error: Item is null or undefined"),r({variant:"destructive",title:"Error",description:"Unable to load product details. Please try again."});return}const he=[];J.customization_groups.forEach(fe=>{const Se=fe.options.find(He=>He.is_default);Se&&fe.type==="single"&&he.push({group_id:fe.group_id,group_name:fe.name,option_id:Se.option_id,option_name:Se.name,additional_price:Number(Se.additional_price)})});const _e=Number(J.price),Fe=he.reduce((fe,Se)=>fe+Number(Se.additional_price),0),ae=_e+Fe;j({is_open:!0,item:J,selected_customizations:he,total_price:ae,quantity:1})},$=()=>{j({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1})},re=J=>{if(!J){console.error("[Builder] Error: Item is null or undefined"),r({variant:"destructive",title:"Error",description:"Unable to load builder. Please try again."});return}w({is_open:!0,item:J})},ve=()=>{w({is_open:!1,item:null})},xe=(J,he,_e)=>{var jr,Qr,Ls,Un;if(!y.item)return;const Fe=(jr=J.find(Ds=>Ds.step_key==="base"))==null?void 0:jr.items[0],ae=(Qr=J.find(Ds=>Ds.step_key==="protein"))==null?void 0:Qr.items[0],fe=(Ls=J.find(Ds=>Ds.step_key==="sauce"))==null?void 0:Ls.items[0],Se=((Un=J.find(Ds=>Ds.step_key==="toppings"))==null?void 0:Un.items)||[];if(!Fe||!ae||!fe){r({variant:"destructive",title:"Error",description:"Please complete all required selections"});return}const He={base:{item_id:Fe.item_id,name:Fe.name,price:Fe.price},protein:{item_id:ae.item_id,name:ae.name,price:ae.price},sauce:{item_id:fe.item_id,name:fe.name,price:fe.price},toppings:Se.map(Ds=>({item_id:Ds.item_id,name:Ds.name,price:Ds.price}))};O.mutate({item_id:y.item.item_id,quantity:_e,builder_selections:He,builder_unit_price:he})},ke=(J,he,_e,Fe)=>{j(ae=>{var Qr;let fe=[...ae.selected_customizations];if(_e==="single")fe=fe.filter(Ls=>Ls.group_id!==J),fe.push({group_id:J,group_name:he,option_id:Fe.option_id,option_name:Fe.name,additional_price:Number(Fe.additional_price)});else{const Ls=fe.findIndex(Un=>Un.group_id===J&&Un.option_id===Fe.option_id);Ls>=0?fe.splice(Ls,1):fe.push({group_id:J,group_name:he,option_id:Fe.option_id,option_name:Fe.name,additional_price:Number(Fe.additional_price)})}const Se=Number(((Qr=ae.item)==null?void 0:Qr.price)||0),He=fe.reduce((Ls,Un)=>Ls+Number(Un.additional_price),0),jr=Se+He;return{...ae,selected_customizations:fe,total_price:jr}})},Ce=()=>{if(!g.item)return;const J=g.item.customization_groups.filter(Fe=>Fe.is_required),he=new Set(g.selected_customizations.map(Fe=>Fe.group_id));for(const Fe of J)if(!he.has(Fe.group_id)){r({variant:"destructive",title:"Validation Error",description:`Please select an option for "${Fe.name}"`});return}if(g.item.stock_tracked&&g.item.current_stock!==null&&g.item.current_stock<g.quantity){r({variant:"destructive",title:"Stock Error",description:"Insufficient stock available"});return}const _e={};g.selected_customizations.forEach(Fe=>{_e[Fe.group_id]||(_e[Fe.group_id]=[]),_e[Fe.group_id].push({option_id:Fe.option_id,option_name:Fe.option_name,additional_price:Fe.additional_price})}),q.mutate({item_id:g.item.item_id,quantity:g.quantity,selected_customizations:_e})},Pe=J=>{if(z(J)){re(J);return}J.customization_groups.length>0?A(J):(j({is_open:!1,item:J,selected_customizations:[],total_price:Number(J.price),quantity:1}),q.mutate({item_id:J.item_id,quantity:1,selected_customizations:{}}))},ne=[{value:"vegan",label:"Vegan",icon:""},{value:"vegetarian",label:"Vegetarian",icon:""},{value:"gluten_free",label:"Gluten-Free",icon:""},{value:"halal",label:"Halal",icon:""},{value:"dairy_free",label:"Dairy-Free",icon:""}],be=J=>!J.stock_tracked||J.current_stock===null?"in_stock":J.current_stock===0?"out_of_stock":J.current_stock<=5?"low_stock":"in_stock";return u.useEffect(()=>{const J=he=>{he.key==="Escape"&&g.is_open&&$()};if(g.is_open)return document.addEventListener("keydown",J),()=>{document.removeEventListener("keydown",J)}},[g.is_open]),u.useEffect(()=>{if(g.is_open){const J=document.body.style.overflow,he=document.body.style.paddingRight,_e=document.body.style.position,Fe=document.body.style.top,ae=document.body.style.width,fe=document.body.style.touchAction,Se=window.scrollY,He=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${Se}px`,document.body.style.width="100%",document.body.style.touchAction="none",He>0&&(document.body.style.paddingRight=`${He}px`),()=>{document.body.style.overflow=J,document.body.style.paddingRight=he,document.body.style.position=_e,document.body.style.top=Fe,document.body.style.width=ae,document.body.style.touchAction=fe,window.scrollTo(0,Se)}}},[g.is_open]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{backgroundColor:"var(--primary-bg)",paddingTop:"env(safe-area-inset-top)"},className:"border-b border-[#D4C5B0]",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-6 lg:px-10 py-5 sm:py-6 lg:py-8",children:[e.jsx("h1",{className:"text-[28px] sm:text-3xl lg:text-4xl font-bold leading-tight tracking-tight",style:{color:"var(--primary-text)"},children:"Our Menu"}),e.jsx("p",{className:"mt-2 text-[15px] sm:text-base lg:text-lg leading-relaxed",style:{color:"#4A3B32",opacity:"0.9"},children:"Discover our delicious selection of authentic dishes"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10 py-5 sm:py-8 lg:py-12",style:{backgroundColor:"var(--primary-bg)",paddingBottom:"calc(96px + env(safe-area-inset-bottom) + 16px)"},children:[e.jsxs("div",{className:"mb-5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[var(--primary-text)] opacity-40",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"search",placeholder:"Search menu...",value:l,onChange:D,className:"w-full pl-11 pr-11 py-3.5 text-[15px] bg-white border-2 border-[var(--border-light)] rounded-[14px] text-[var(--primary-text)] placeholder:text-[var(--primary-text)]/40 focus:border-[var(--primary-text)] focus:ring-2 focus:ring-[var(--primary-text)]/10 focus:outline-none transition-colors active:border-[var(--primary-text)]",style:{minHeight:"50px",fontSize:"16px"}}),l&&e.jsx("button",{onClick:G,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[var(--primary-text)] opacity-40 hover:opacity-100 active:opacity-100 transition-opacity p-2","aria-label":"Clear search",style:{minWidth:"44px",minHeight:"44px"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>h(!0),className:"relative flex items-center justify-center gap-2 px-4 py-3.5 bg-white border-2 border-[var(--border-light)] rounded-[14px] text-[var(--primary-text)] font-semibold hover:border-[var(--primary-text)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-text)]/10 active:border-[var(--primary-text)] active:bg-[var(--primary-bg)] transition-colors sm:hidden",style:{minHeight:"50px"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"text-[15px]",children:"Filters"}),d.length>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-[var(--btn-bg)] text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center shadow-md",children:d.length})]}),e.jsxs("select",{value:x,onChange:le,className:"px-4 py-3.5 bg-white border-2 border-[var(--border-light)] rounded-[14px] text-[var(--primary-text)] font-semibold focus:border-[var(--primary-text)] focus:ring-2 focus:ring-[var(--primary-text)]/10 focus:outline-none active:border-[var(--primary-text)] transition-colors appearance-none bg-[length:1.25rem] bg-[position:right_1rem_center] bg-no-repeat pr-11",style:{minHeight:"50px",fontSize:"15px",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%232C1A16' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},children:[e.jsx("option",{value:"default",children:"Sort by"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"price_low_high",children:"Price: Low-High"}),e.jsx("option",{value:"price_high_low",children:"Price: High-Low"})]})]}),(i||d.length>0)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-[13px] font-semibold text-gray-700",children:"Active filters:"}),i&&e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-2 bg-orange-100 text-orange-800 text-[13px] font-semibold rounded-full",children:[((je=T.find(J=>J.category_id===i))==null?void 0:je.name)||i,e.jsx("button",{onClick:()=>V(null),className:"text-orange-600 hover:text-orange-800 active:text-orange-900 p-0.5","aria-label":"Remove category filter",style:{minWidth:"20px",minHeight:"20px"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),d.map(J=>{var he;return e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-2 bg-green-100 text-green-800 text-[13px] font-semibold rounded-full",children:[((he=ne.find(_e=>_e.value===J))==null?void 0:he.label)||J,e.jsx("button",{onClick:()=>se(J),className:"text-green-600 hover:text-green-800 active:text-green-900 p-0.5","aria-label":`Remove ${J} filter`,style:{minWidth:"20px",minHeight:"20px"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},J)}),e.jsx("button",{onClick:K,className:"text-[13px] text-orange-600 hover:text-orange-700 active:text-orange-800 font-semibold underline px-2 py-2",style:{minHeight:"32px"},children:"Clear all"})]})]}),e.jsxs("div",{className:"mb-5 sm:mb-6",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("label",{htmlFor:"categorySelect",className:"block text-[13px] font-bold text-[var(--primary-text)] mb-2 uppercase tracking-wide",children:"Category"}),e.jsxs("select",{id:"categorySelect",value:i||"",onChange:J=>{V(J.target.value||null),h(!1)},className:"w-full px-4 py-3.5 bg-white border-2 border-[#D4C5B0] text-[var(--primary-text)] font-semibold focus:border-[var(--primary-text)] focus:ring-2 focus:ring-[var(--primary-text)]/10 focus:outline-none active:border-[var(--primary-text)] transition-colors appearance-none bg-[length:1.25rem] bg-[position:right_1rem_center] bg-no-repeat pr-11",style:{minHeight:"50px",borderRadius:"14px",fontSize:"15px",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%232C1A16' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},children:[e.jsx("option",{value:"",children:"All Items"}),T.map(J=>e.jsx("option",{value:J.category_id,children:J.name},J.category_id))]})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto scrollbar-hide -mx-4 sm:mx-0",children:e.jsxs("div",{className:"flex gap-2 pb-2 px-4 sm:px-0",style:{minWidth:"100%",width:"max-content"},"aria-label":"Categories",children:[e.jsx("button",{onClick:()=>V(null),className:`
                  inline-flex items-center justify-center px-5 rounded-full text-sm font-semibold whitespace-nowrap
                  transition-all duration-200 flex-shrink-0
                  ${i===null?"bg-[#2C1A16] text-white shadow-md":"bg-white text-[#2C1A16] border-2 border-[#D4C5B0] hover:border-[#2C1A16]"}
                `,style:{height:"44px",minHeight:"44px"},children:"All Items"}),T.map(J=>e.jsx("button",{onClick:()=>V(J.category_id),className:`
                    inline-flex items-center justify-center px-5 rounded-full text-sm font-semibold whitespace-nowrap
                    transition-all duration-200 flex-shrink-0
                    ${i===J.category_id?"bg-[#2C1A16] text-white shadow-md":"bg-white text-[#2C1A16] border-2 border-[#D4C5B0] hover:border-[#2C1A16]"}
                  `,style:{height:"44px",minHeight:"44px"},children:J.name},J.category_id))]})})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("aside",{className:"hidden sm:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-4 bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dietary Filters"}),e.jsx("div",{className:"space-y-3",children:ne.map(J=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:d.includes(J.value),onChange:()=>se(J.value),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:J.icon}),e.jsx("span",{children:J.label})]})]},J.value))})]})}),e.jsx("div",{className:"flex-1",children:C?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-3 lg:gap-6",children:[...Array(6)].map((J,he)=>e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-56 bg-gray-200"}),e.jsxs("div",{className:"p-4 sm:p-5 space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded-lg w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-lg w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-lg w-2/3"}),e.jsx("div",{className:"h-[52px] bg-gray-200 rounded-[14px] mt-4"})]})]},he))}):R?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-[18px] sm:text-lg font-bold text-gray-900 mb-2",children:"Failed to load menu items"}),e.jsx("p",{className:"text-[14px] sm:text-base text-gray-600 mb-6 max-w-md mx-auto leading-relaxed",children:"Please try again later or contact support if the problem persists."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 rounded-[14px] font-bold text-[15px] transition-colors active:scale-95",style:{backgroundColor:"var(--btn-bg)",color:"var(--btn-text)",minHeight:"52px"},children:"Retry"})]}):_.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-[18px] sm:text-lg font-bold text-gray-900 mb-2",children:"No menu items found"}),e.jsx("p",{className:"text-[14px] sm:text-base text-gray-600 mb-6 max-w-md mx-auto leading-relaxed",children:"Try adjusting your filters or search terms"}),e.jsx("button",{onClick:K,className:"px-8 py-4 rounded-[14px] font-bold text-[15px] transition-colors active:scale-95",style:{backgroundColor:"var(--btn-bg)",color:"var(--btn-text)",minHeight:"52px"},children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-3 lg:gap-6",children:_.map(J=>{const he=be(J),_e=he==="out_of_stock",Fe=he==="low_stock";return e.jsxs("div",{className:`bg-white overflow-hidden transition-all duration-200 border-2 border-[var(--border-light)] hover:shadow-soft-lg hover:border-[var(--primary-text)]/20 sm:hover:-translate-y-1 ${_e?"opacity-60":""}`,style:{borderRadius:"16px"},children:[e.jsxs("div",{className:"relative w-full bg-gray-50",style:{aspectRatio:"4/3"},children:[e.jsx("img",{src:J.image_url||"",alt:J.name,className:"w-full h-full object-cover",loading:"lazy"}),e.jsxs("div",{className:"absolute top-2.5 right-2.5 sm:top-3 sm:right-3 flex flex-col gap-1.5 sm:gap-2",children:[J.is_limited_edition&&e.jsx("span",{className:"px-2.5 py-1.5 bg-purple-600 text-white text-[11px] sm:text-xs font-bold rounded-full shadow-lg backdrop-blur-sm",children:"Limited Edition"}),_e&&e.jsx("span",{className:"px-2.5 py-1.5 bg-red-600 text-white text-[11px] sm:text-xs font-bold rounded-full shadow-lg backdrop-blur-sm",children:"Sold Out"}),Fe&&!_e&&e.jsxs("span",{className:"px-2.5 py-1.5 bg-orange-500 text-white text-[11px] sm:text-xs font-bold rounded-full shadow-lg backdrop-blur-sm",children:["Only ",J.current_stock," left"]})]}),J.dietary_tags&&J.dietary_tags.length>0&&e.jsx("div",{className:"absolute bottom-2.5 left-2.5 sm:bottom-3 sm:left-3 flex gap-1.5",children:J.dietary_tags.map(ae=>{const fe=ne.find(Se=>Se.value===ae);return fe?e.jsx("span",{className:"w-8 h-8 sm:w-9 sm:h-9 bg-white/95 backdrop-blur-sm rounded-full flex items-center justify-center text-base sm:text-lg shadow-lg border border-gray-100",title:fe.label,children:fe.icon},ae):null})})]}),e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsx("h3",{className:"text-[17px] sm:text-lg font-bold text-gray-900 mb-2 leading-tight",children:J.name}),J.description&&e.jsx("p",{className:"text-gray-600 text-[14px] sm:text-sm mb-3.5 line-clamp-2 leading-relaxed",children:J.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3.5",children:[e.jsxs("span",{className:"text-[22px] sm:text-2xl font-bold text-[#2C1A16]",style:{letterSpacing:"-0.01em"},children:["",Number(J.price).toFixed(2)]}),J.customization_groups.length>0&&e.jsx("span",{className:"px-2.5 py-1 bg-[#F2EFE9] text-[#2C1A16] text-[11px] sm:text-xs font-bold rounded-full border border-[#D4C5B0]",children:"Customizable"})]}),e.jsx("button",{onClick:()=>Pe(J),disabled:_e||p===J.item_id,className:`w-full px-5 py-4 rounded-[14px] font-bold text-[15px] transition-all duration-200 flex items-center justify-center add-to-cart-btn ${_e?"bg-gray-200 text-gray-500 cursor-not-allowed":p===J.item_id?"opacity-75 cursor-wait":"active:scale-[0.98] sm:hover:shadow-lg sm:hover:-translate-y-0.5"}`,style:_e?{minHeight:"52px"}:{backgroundColor:"var(--btn-bg)",color:"var(--btn-text)",minHeight:"52px"},children:p===J.item_id?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):_e?"Out of Stock":z(J)?"Build Your Own":J.customization_groups.length>0?"Customize & Add":"Add to Cart"})]})]},J.item_id)})})})]})]}),e.jsx(o9,{isOpen:b,onClose:()=>h(!1),title:"Dietary Filters",maxHeight:"80vh",footer:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{m([]),h(!1)},className:"flex-1 px-6 py-3 border-2 border-[var(--primary-text)] rounded-[var(--radius-btn)] text-[var(--primary-text)] font-semibold hover:bg-[var(--primary-bg)] transition-colors",style:{minHeight:"var(--tap-target-comfortable)"},children:"Clear"}),e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-6 py-3 rounded-[var(--radius-btn)] bg-[var(--btn-bg)] text-white font-bold hover:bg-[#1A0F0D] transition-colors",style:{minHeight:"var(--tap-target-comfortable)"},children:"Apply"})]}),children:e.jsx("div",{className:"space-y-4",children:ne.map(J=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-[var(--radius-card)] hover:bg-[var(--primary-bg)] transition-colors cursor-pointer",style:{minHeight:"52px"},children:[e.jsx("input",{type:"checkbox",checked:d.includes(J.value),onChange:()=>se(J.value),className:"w-6 h-6 text-[var(--btn-bg)] border-2 border-[var(--border-light)] rounded focus:ring-2 focus:ring-[var(--primary-text)]/20 transition-all"}),e.jsx("span",{className:"text-2xl flex-shrink-0",children:J.icon}),e.jsx("span",{className:"text-base font-medium text-[var(--primary-text)] flex-1",children:J.label})]},J.value))})}),e.jsx(d9,{isOpen:g.is_open,onClose:$,item:g.item,selectedCustomizations:g.selected_customizations,quantity:g.quantity,totalPrice:g.total_price,onCustomizationChange:ke,onQuantityChange:J=>j(he=>({...he,quantity:J})),onAddToCart:Ce,isLoading:q.isPending}),e.jsx(h9,{isOpen:y.is_open,onClose:ve,productName:((Ve=y.item)==null?void 0:Ve.name)||"Custom Item",productImageUrl:(te=y.item)==null?void 0:te.image_url,basePrice:k?Number(((Ne=y.item)==null?void 0:Ne.price)||0):0,steps:H,onAddToCart:xe,isLoading:O.isPending||F,error:P?P.message||"Failed to load customization options":null,onRetry:()=>I()})]})},w9=[{id:"HL_001",name:"Grilled Halloumi Sticks",description:"Served on a small base of fries, drizzled with hot honey",price:6.5,category:"Sides",isHighlight:!0},{id:"HL_002",name:"Crispy Seasoned Fries",description:"Freshly fried, lightly seasoned crispy fries",price:5,category:"Sides",isHighlight:!0},{id:"HL_003",name:"Cheesy Pizza Poppers",description:"Served on a small base of fries with hot honey",price:6.5,category:"Sides",isHighlight:!0},{id:"HL_004",name:"Chicken Grilled Sub",description:"Toasted ciabatta sub with grilled chicken",price:14.5,category:"Most Popular",isHighlight:!0,image:"chicken-sub"}],Pm=[{id:"most-popular",name:"Most Popular",itemCount:4,items:[{id:"MP_001",name:"Mixed Rice Bowl",description:"Mediterranean rice topped with grilled chicken and smoked brisket, finished with signature topped fries, house garlic sauce, Signature Lamazing sauce, shredded mozzarella, crispy onions, mixed Mediterranean salad, and hot honey.",price:19,category:"Most Popular",hasCustomizations:!1},{id:"MP_002",name:"Mixed Loaded Fries",description:"Crispy seasoned fries topped with grilled chicken and smoked brisket, shredded mozzarella, house garlic sauce, Signature Lamazing sauce, crispy onions, mixed Mediterranean salad, and hot honey.",price:18,category:"Most Popular",hasCustomizations:!1},{id:"MP_003",name:"Chicken Grilled Sub",description:"Toasted ciabatta sub filled with grilled chicken shawarma, melted mozzarella, house garlic sauce, and Signature Lamazing sauce. Served with signature topped fries.",price:14.5,category:"Most Popular",hasCustomizations:!0},{id:"MP_004",name:"Brisket Saj Wrap",description:"Traditional toasted saj wrap filled with pulled smoked brisket, house garlic sauce, pickles, and fries. Served with signature topped fries.",price:16.5,category:"Most Popular",hasCustomizations:!0}]},{id:"grilled-subs",name:"Grilled Subs",itemCount:3,note:"All grilled subs are served with signature topped fries.",items:[{id:"GS_001",name:"Chicken Grilled Sub",description:"Toasted ciabatta sub with grilled chicken shawarma, mozzarella, house garlic, Signature Lamazing sauce.",price:14.5,category:"Grilled Subs",hasCustomizations:!0},{id:"GS_002",name:"Traditional Brisket Grilled Sub",description:"Toasted ciabatta sub with slow smoked brisket, mozzarella, house garlic, Signature Lamazing sauce.",price:16,category:"Grilled Subs",hasCustomizations:!0},{id:"GS_003",name:"Mixed Grilled Sub",description:"Toasted ciabatta sub with grilled chicken + smoked brisket, mozzarella, house garlic, Signature Lamazing sauce.",price:17,category:"Grilled Subs",hasCustomizations:!0}]},{id:"saj-wraps",name:"Saj Wraps",itemCount:3,note:"All saj wraps are served with signature topped fries.",items:[{id:"SW_001",name:"Traditional Chicken Saj Wrap",description:"Toasted saj wrap with grilled chicken, house garlic sauce, pickles and fries.",price:15,category:"Saj Wraps",hasCustomizations:!0},{id:"SW_002",name:"Brisket Saj Wrap",description:"Toasted saj wrap with pulled smoked brisket, house garlic sauce, pickles and fries.",price:16.5,category:"Saj Wraps",hasCustomizations:!0},{id:"SW_003",name:"Mixed Saj Wrap",description:"Toasted saj wrap with grilled chicken + brisket, house garlic sauce, pickles and fries.",price:17.5,category:"Saj Wraps",hasCustomizations:!0}]},{id:"loaded-fries",name:"Loaded Fries",itemCount:3,items:[{id:"LF_001",name:"Chicken Loaded Fries",description:"Crispy seasoned fries with grilled chicken, mozzarella, house garlic, Signature Lamazing sauce, crispy onions, Mediterranean salad, hot honey.",price:15.5,category:"Loaded Fries",hasCustomizations:!0},{id:"LF_002",name:"Brisket Loaded Fries",description:"Crispy seasoned fries with smoked brisket, mozzarella, house garlic, Signature Lamazing sauce, crispy onions, Mediterranean salad, hot honey.",price:17.5,category:"Loaded Fries",hasCustomizations:!0},{id:"LF_003",name:"Mixed Loaded Fries",description:"Crispy seasoned fries with grilled chicken + smoked brisket, mozzarella, house garlic, Signature Lamazing sauce, crispy onions, Mediterranean salad, hot honey.",price:18,category:"Loaded Fries",hasCustomizations:!0}]},{id:"rice-bowls",name:"Rice Bowls",itemCount:3,note:"Rice bowls are topped with signature topped fries.",items:[{id:"RB_001",name:"Chicken Rice Bowl",description:"Mediterranean rice with grilled chicken, signature topped fries, house garlic, Signature Lamazing sauce, mozzarella, crispy onions, Mediterranean salad, hot honey.",price:16.5,category:"Rice Bowls",hasCustomizations:!0},{id:"RB_002",name:"Brisket Rice Bowl",description:"Mediterranean rice with smoked brisket, signature topped fries, house garlic, Signature Lamazing sauce, mozzarella, crispy onions, Mediterranean salad, hot honey.",price:18.5,category:"Rice Bowls",hasCustomizations:!0},{id:"RB_003",name:"Mixed Rice Bowl",description:"Mediterranean rice with grilled chicken + smoked brisket, signature topped fries, house garlic, Signature Lamazing sauce, mozzarella, crispy onions, Mediterranean salad, hot honey.",price:19,category:"Rice Bowls",hasCustomizations:!0}]},{id:"sides",name:"Sides",itemCount:4,items:[{id:"SI_001",name:"Crispy Seasoned Fries",description:"Freshly fried, lightly seasoned crispy fries.",price:5,category:"Sides",hasCustomizations:!1},{id:"SI_002",name:"Signature Topped Fries",description:"Finished with shredded mozzarella, house garlic sauce, Signature Lamazing sauce, mixed Mediterranean salad, crispy onions, and hot honey.",price:8,category:"Sides",hasCustomizations:!1},{id:"SI_003",name:"Grilled Halloumi Sticks",description:"Served on a small base of fries, drizzled with hot honey and topped with shredded mozzarella and crispy onions.",price:6.5,category:"Sides",hasCustomizations:!1},{id:"SI_004",name:"Cheesy Pizza Poppers",description:"Served on a small base of fries, drizzled with hot honey and topped with shredded mozzarella and crispy onions.",price:6.5,category:"Sides",hasCustomizations:!1}]},{id:"sauces-dips",name:"Sauces and Dips",itemCount:7,items:[{id:"SD_001",name:"Ketchup",description:"",price:1.5,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_002",name:"Bbq Sauce Dip",description:"",price:1.5,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_003",name:"Sweet Chilli Sauce Dip",description:"",price:1.5,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_004",name:"House Garlic Sauce",description:"",price:2,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_005",name:"Signature Lamazing Sauce",description:"",price:2,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_006",name:"Spicy Harissa",description:"",price:2,category:"Sauces and Dips",hasCustomizations:!1},{id:"SD_007",name:"Hot Honey",description:"",price:2.5,category:"Sauces and Dips",hasCustomizations:!1}]},{id:"drinks",name:"Drinks",itemCount:10,items:[{id:"DR_001",name:"Shani Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_002",name:"Rubicon Guava Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_003",name:"Rubicon Mango Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_004",name:"Rubicon Passion Fruit Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_005",name:"Palestine Cola Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_006",name:"Palestine Cola (Sugar Free) Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_007",name:"Palestine Lemon and Lime Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_008",name:"Palestine Orange Can 330ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_009",name:"Bottled Water 350ml",description:"",price:2.5,category:"Drinks",hasCustomizations:!1},{id:"DR_010",name:"Capri Sun 350ml",description:"",price:2,category:"Drinks",hasCustomizations:!1}]}],N9=()=>{const{toast:t}=Xi(),s=Z(y=>y.add_to_cart),[r,n]=u.useState(""),[a,i]=u.useState("highlights"),o=u.useRef({}),l=u.useRef(null),[c,d]=u.useState(null),[m,x]=u.useState(!1),[f,b]=u.useState(1);u.useEffect(()=>{const y=new IntersectionObserver(w=>{w.forEach(M=>{M.isIntersecting&&M.intersectionRatio>=.5&&i(M.target.id)})},{threshold:[0,.5,1],rootMargin:"-120px 0px -50% 0px"});return Object.values(o.current).forEach(w=>{w&&y.observe(w)}),()=>y.disconnect()},[]);const h=u.useMemo(()=>r.trim()?Pm.map(y=>({...y,items:y.items.filter(w=>w.name.toLowerCase().includes(r.toLowerCase())||w.description.toLowerCase().includes(r.toLowerCase()))})):Pm,[r]),p=y=>{const w=o.current[y];if(w){const T=w.getBoundingClientRect().top+window.pageYOffset+-120;window.scrollTo({top:T,behavior:"smooth"})}},v=y=>{d(y),b(1),x(!0)},g=()=>{if(!c)return;const y={item_id:c.id,item_name:c.name,quantity:f,unit_price:c.price,customizations:[],line_total:c.price*f};s(y),t({title:"Added to cart",description:`${c.name} x${f}`}),x(!1),d(null),b(1)},j=[{id:"highlights",name:"Highlights"},...Pm.map(y=>({id:y.id,name:y.name}))];return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-4",children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Menu"})})}),e.jsx("div",{className:"bg-white border-b sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search in Salama Lama",value:r,onChange:y=>n(y.target.value),className:"w-full pl-12 pr-12 py-3 text-base border-2 border-gray-200 rounded-full focus:outline-none focus:border-orange-500 transition-colors"}),r&&e.jsx("button",{onClick:()=>n(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Ae,{className:"w-5 h-5"})})]})})}),e.jsx("div",{className:"bg-white border-b sticky top-[73px] z-20 shadow-sm",children:e.jsx("div",{ref:l,className:"max-w-6xl mx-auto px-4 sm:px-6 py-3 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex gap-2 min-w-max",children:j.map(y=>e.jsx("button",{onClick:()=>p(y.id),className:`px-4 py-2 rounded-full font-semibold text-sm whitespace-nowrap transition-all ${a===y.id?"bg-orange-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y.name},y.id))})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-8",children:[e.jsxs("section",{id:"highlights",ref:y=>o.current.highlights=y,className:"mb-12",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Highlights"})}),e.jsx("div",{className:"flex overflow-x-auto gap-4 pb-4 snap-x snap-mandatory scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0",children:w9.map(y=>e.jsxs("div",{onClick:()=>v(y),className:"min-w-[260px] sm:min-w-[280px] bg-white rounded-xl shadow-sm hover:shadow-lg transition-all p-4 sm:p-5 snap-start cursor-pointer border border-gray-100 flex-shrink-0 relative",children:[e.jsx("div",{className:"text-xs text-orange-600 font-bold mb-2 uppercase tracking-wide",children:y.category}),e.jsxs("div",{className:"flex justify-between items-start gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-base text-gray-900 leading-tight mb-2",children:y.name}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["",y.price.toFixed(2)]})]}),y.image&&e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex-shrink-0 flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 text-xs font-semibold",children:"Image"})})]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),v(y)},className:"w-9 h-9 rounded-full bg-orange-600 text-white flex items-center justify-center hover:bg-orange-700 transition-all shadow-md hover:scale-105 ml-auto",children:e.jsx(wt,{className:"w-5 h-5"})})]},y.id))})]}),h.map(y=>e.jsxs("section",{id:y.id,ref:w=>o.current[y.id]=w,className:"mb-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:y.name}),e.jsxs("span",{className:"text-gray-500 text-sm font-medium",children:[y.items.length," ",y.items.length===1?"item":"items"]})]}),y.note&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:y.note}),y.items.length===0?e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No matching items"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.items.map(w=>e.jsxs("div",{onClick:()=>v(w),className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all p-5 cursor-pointer border border-gray-100 relative group hover:border-orange-200",children:[e.jsx("button",{onClick:M=>{M.stopPropagation(),v(w)},className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-orange-600 text-white flex items-center justify-center hover:bg-orange-700 transition-all shadow-md group-hover:scale-110 z-10","aria-label":"Add to cart",children:e.jsx(wt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex justify-between gap-4 pr-12",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 flex-1 leading-tight",children:w.name}),e.jsx("button",{onClick:M=>{M.stopPropagation(),v(w)},className:"w-5 h-5 rounded-full border border-gray-300 text-gray-400 flex items-center justify-center hover:border-orange-600 hover:text-orange-600 transition-colors flex-shrink-0 mt-0.5","aria-label":"View details",children:e.jsx(Uw,{className:"w-3.5 h-3.5"})})]}),w.description&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-3 leading-relaxed",children:w.description}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",w.price.toFixed(2)]})]}),w.image&&e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex-shrink-0 flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 text-xs font-semibold",children:"Image"})})]})]},w.id))})]},y.id)),r&&h.every(y=>y.items.length===0)&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(yr,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try searching with different keywords or browse our categories"}),e.jsx("button",{onClick:()=>n(""),className:"px-6 py-3 bg-orange-600 text-white rounded-full font-semibold hover:bg-orange-700 transition-colors",children:"Clear Search"})]})]}),m&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",onClick:y=>{y.target===y.currentTarget&&x(!1)},children:e.jsxs("div",{className:"bg-white w-full sm:max-w-2xl sm:rounded-2xl rounded-t-2xl max-h-[90vh] overflow-y-auto",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:c.name}),e.jsx("button",{onClick:()=>x(!1),className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[c.image&&e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg mb-4"}),c.description&&e.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:c.description}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-6",children:["",c.price.toFixed(2)]}),c.hasCustomizations&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-orange-800 font-semibold",children:"Customization options available for this item"}),e.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Choose your spice level, add-ons, and extras"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>b(Math.max(1,f-1)),className:"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center hover:border-orange-600 transition-colors",children:"-"}),e.jsx("span",{className:"text-xl font-bold w-12 text-center",children:f}),e.jsx("button",{onClick:()=>b(f+1),className:"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center hover:border-orange-600 transition-colors",children:"+"})]})]}),e.jsxs("button",{onClick:g,className:"w-full py-4 bg-orange-600 text-white rounded-full font-bold text-lg hover:bg-orange-700 transition-colors shadow-lg",children:["Add to Cart  ",(c.price*f).toFixed(2)]})]})]})})]})};function jc(t){return Math.round(t*100)}function po(t){return(t/100).toFixed(2)}function Di(t){const s=jc(t.subtotal||0),r=jc(t.discountAmount||0),n=jc(t.deliveryFee||0),a=jc(t.taxAmount||0),i=s-r+n+a;return{subtotalCents:s,discountCents:r,deliveryFeeCents:n,taxCents:a,totalCents:i,subtotal:po(s),discount:po(r),deliveryFee:po(n),tax:po(a),total:po(i)}}function $d(t){return{subtotal:Number((t==null?void 0:t.subtotal)||0),discountAmount:Number((t==null?void 0:t.discount_amount)||0),deliveryFee:Number((t==null?void 0:t.delivery_fee)||0),taxAmount:Number((t==null?void 0:t.tax_amount)||0)}}function On(){if(typeof window>"u")return null;try{let t=localStorage.getItem("guest_cart_id");return t||(t=`guest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("guest_cart_id",t)),t}catch(t){return console.error("Failed to access localStorage for guest cart ID:",t),null}}const vl=({totals:t,discountCode:s=null,hasDiscount:r=!1,showDeliveryFee:n=!0,showTax:a=!0,className:i=""})=>e.jsxs("div",{className:`space-y-3 ${i}`,children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["",t.subtotal]})]}),r&&s&&t.discountCents>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mi,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Discount (",s,")"]})]}),e.jsxs("span",{className:"font-medium",children:["-",t.discount]})]}),n&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:t.deliveryFeeCents>0?`${t.deliveryFee}`:"Free"})]}),a&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsxs("span",{className:"font-medium",children:["",t.tax]})]}),e.jsx("div",{className:"pt-3 border-t-2 border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["",t.total]})]})})]}),_9=()=>{const t=Be(),s=Ue(),{toast:r}=Xi(),n=Z(W=>W.authentication_state.auth_token),a=Z(W=>W.cart_state.items),i=Z(W=>W.cart_state.subtotal),o=Z(W=>W.cart_state.discount_code),l=Z(W=>W.cart_state.discount_amount),c=Z(W=>W.cart_state.delivery_fee),d=Z(W=>W.cart_state.tax_amount),m=Z(W=>W.cart_state.total),x=Z(W=>W.cart_state.isHydrated),f=Z(W=>W.update_cart_quantity),b=Z(W=>W.remove_from_cart),h=Z(W=>W.clear_cart),p=Z(W=>W.sync_cart_from_api),v=Z(W=>W.set_cart_hydrated),[g,j]=u.useState(""),[y,w]=u.useState(null),[M,T]=u.useState({}),[N,E]=u.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[L,k]=u.useState([]),[S,F]=u.useState(null),[P,I]=u.useState(!1),H="https://123salama-lama-food-truck.launchpulse.ai",z=u.useMemo(()=>Q.create({baseURL:H,withCredentials:!0}),[H]);n||On(),u.useEffect(()=>{n||On()},[n]);const{data:B,isLoading:C,error:R,refetch:_}=ue({queryKey:["cart"],queryFn:async()=>{const W=await z.get("/api/cart",{headers:n?{Authorization:`Bearer ${n}`}:{}});return F(null),I(!1),W.data},staleTime:3e4,refetchOnWindowFocus:!1,retry:2,retryDelay:W=>Math.min(1e3*2**W,3e3)}),q=u.useMemo(()=>a.length===0?null:{items:a.map((W,oe)=>({cart_item_id:W.item_id||`local_${oe}`,item_id:W.item_id,item_name:W.item_name,quantity:W.quantity,unit_price:W.unit_price,selected_customizations:W.customizations?W.customizations.reduce((je,Ve)=>({...je,[Ve.group_name]:{name:Ve.option_name,additional_price:Ve.additional_price}}),{}):null,line_total:W.line_total,is_available:!0})),subtotal:i,discount_code:o,discount_amount:l,delivery_fee:c,tax_amount:d,total:m},[a,i,o,l,c,d,m]),O=u.useMemo(()=>{var W,oe,je,Ve,te;if(B&&!R)return B;if(R&&q){const Ne=((oe=(W=R==null?void 0:R.response)==null?void 0:W.data)==null?void 0:oe.message)||(R==null?void 0:R.message)||"Unknown error",J=((Ve=(je=R==null?void 0:R.response)==null?void 0:je.data)==null?void 0:Ve.error_code)||"",he=(te=R==null?void 0:R.response)==null?void 0:te.status;return console.warn("[CART] API fetch failed, using local cart:",{status:he,error_code:J,message:Ne}),P||(I(!0),F("We couldn't sync your cart with the server. Your items are still saved locally.")),q}return B||q},[B,R,q,P]);u.useEffect(()=>{B&&!R&&p(B)},[B,R,p]),u.useEffect(()=>{!C&&R&&a.length>0&&!x&&v(!0)},[C,R,a.length,x,v]),u.useEffect(()=>{var W;!C&&B&&((W=B.items)==null?void 0:W.length)===0&&!x&&v(!0)},[C,B,x,v]),u.useEffect(()=>{O&&Di($d(O))},[O]);const V=ce({mutationFn:async({cart_item_id:W,quantity:oe,item_id:je})=>{T(Ve=>({...Ve,[W]:!0}));try{return(await z.put(`/api/cart/item/${W}`,{quantity:oe},{headers:n?{Authorization:`Bearer ${n}`}:{}})).data}catch(Ve){if(je&&P)return f(je,oe),{success:!0,local:!0};throw Ve}},onSuccess:W=>{W!=null&&W.local||s.invalidateQueries({queryKey:["cart"]})},onError:W=>{var oe,je;console.error("Failed to update item quantity:",W),r({variant:"destructive",title:"Error",description:((je=(oe=W.response)==null?void 0:oe.data)==null?void 0:je.message)||"Failed to update quantity. Please try again."})},onSettled:(W,oe,je)=>{T(Ve=>({...Ve,[je.cart_item_id]:!1}))}}),D=ce({mutationFn:async({cart_item_id:W,item_id:oe})=>{try{return(await z.delete(`/api/cart/item/${W}`,{headers:n?{Authorization:`Bearer ${n}`}:{}})).data}catch(je){if(oe&&P)return b(oe),{success:!0,local:!0};throw je}},onSuccess:W=>{W!=null&&W.local||s.invalidateQueries({queryKey:["cart"]})},onError:W=>{var oe,je;console.error("Failed to remove item:",W),r({variant:"destructive",title:"Error",description:((je=(oe=W.response)==null?void 0:oe.data)==null?void 0:je.message)||"Failed to remove item. Please try again."})}}),G=ce({mutationFn:async()=>{try{return(await z.delete("/api/cart",{headers:n?{Authorization:`Bearer ${n}`}:{}})).data}catch(W){if(P)return h(),{success:!0,local:!0};throw W}},onSuccess:W=>{W!=null&&W.local?r({title:"Success",description:"Cart cleared locally"}):(s.invalidateQueries({queryKey:["cart"]}),r({title:"Success",description:"Cart cleared successfully"}))},onError:W=>{var oe,je;console.error("Failed to clear cart:",W),r({variant:"destructive",title:"Error",description:((je=(oe=W.response)==null?void 0:oe.data)==null?void 0:je.message)||"Failed to clear cart. Please try again."})}}),se=ce({mutationFn:async W=>(await z.post("/api/discount/validate",W,{headers:n?{Authorization:`Bearer ${n}`}:{}})).data,onSuccess:W=>{if(W.valid)w(null),j(""),s.invalidateQueries({queryKey:["cart"]}),r({title:"Success",description:"Discount code applied successfully!"});else{const oe=W.message||"Invalid discount code";w(oe),r({variant:"destructive",title:"Error",description:oe})}},onError:W=>{var je,Ve;const oe=((Ve=(je=W.response)==null?void 0:je.data)==null?void 0:Ve.message)||"Failed to validate discount code";w(oe),r({variant:"destructive",title:"Error",description:oe})}}),le=ce({mutationFn:async()=>(await z.post("/api/checkout/validate",{order_type:"collection"},{headers:n?{Authorization:`Bearer ${n}`}:{}})).data,onSuccess:W=>{W.valid?t(Lw):(k(W.errors||[]),r({variant:"destructive",title:"Items Unavailable",description:"Some items in your cart are no longer available. Please review and remove them."}))},onError:W=>{var oe,je;r({variant:"destructive",title:"Error",description:((je=(oe=W.response)==null?void 0:oe.data)==null?void 0:je.message)||"Failed to validate cart. Please try again."})}}),K=(W,oe,je)=>{oe<1||V.mutate({cart_item_id:W,quantity:oe,item_id:je})},A=(W,oe,je)=>{E({isOpen:!0,title:"Remove Item",message:`Remove ${oe} from cart?`,onConfirm:()=>{D.mutate({cart_item_id:W,item_id:je}),E({isOpen:!1,title:"",message:"",onConfirm:()=>{}})}})},$=()=>{E({isOpen:!0,title:"Clear Cart",message:"Are you sure you want to remove all items from your cart?",onConfirm:()=>{G.mutate(),E({isOpen:!1,title:"",message:"",onConfirm:()=>{}})}})},re=()=>{if(!g.trim()){w("Please enter a discount code");return}se.mutate({code:g.trim().toUpperCase(),order_type:"collection",order_value:ne.subtotalCents/100})},ve=async()=>{var W,oe;try{await z.delete("/api/discount/remove",{headers:n?{Authorization:`Bearer ${n}`}:{}}),j(""),w(null),s.invalidateQueries({queryKey:["cart"]}),r({title:"Success",description:"Discount removed successfully"})}catch(je){console.error("Failed to remove discount:",je),r({variant:"destructive",title:"Error",description:((oe=(W=je.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to remove discount"})}},xe=()=>{le.mutate()},ke=W=>{j(W.target.value),w(null)},Ce=(W,oe,je)=>{if(oe&&je&&Array.isArray(je))return e.jsx("div",{className:"mt-2 space-y-1",children:je.map((te,Ne)=>!te.items||te.items.length===0?null:e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-500 text-xs uppercase tracking-wide",children:[te.step_name,":"]}),e.jsx("span",{className:"ml-1 text-gray-700",children:te.items.map(J=>J.name).join(", ")})]},Ne))});if(!W||Object.keys(W).length===0)return null;const Ve=Object.entries(W).map(([te,Ne])=>typeof Ne=="object"&&Ne!==null?`${te}: ${Ne.name||Ne}${Ne.additional_price?` (+${Number(Ne.additional_price||0).toFixed(2)})`:""}`:`${te}: ${Ne}`);return e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:Ve.join(", ")})};if(C||!x&&!O)return e.jsxs("div",{className:"min-h-screen py-4 sm:py-6 lg:py-8 px-4 sm:px-6 lg:px-10 bg-[#F2EFE9]",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[e.jsx("div",{className:"h-8 sm:h-10 lg:h-12 bg-gray-200 rounded-lg w-48 animate-pulse"}),e.jsx("div",{className:"h-4 sm:h-5 bg-gray-200 rounded w-64 mt-2 animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:[1,2,3].map(W=>e.jsx("div",{className:"bg-white rounded-2xl shadow-md border-2 border-[#E8E1D6] p-5 sm:p-6 animate-pulse",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-24"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"h-11 w-11 bg-gray-200 rounded-full"}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded"}),e.jsx("div",{className:"h-11 w-11 bg-gray-200 rounded-full"})]})]}),e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded"})]})},W))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-[#E8E1D6] p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-36 mb-6"}),e.jsxs("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-24"})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-14"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-20"})]})]}),e.jsx("div",{className:"h-14 bg-gray-200 rounded-lg"})]})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-2xl z-40 lg:hidden border-t-2 border-[#E8E1D6] p-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Re,{className:"h-6 w-6 animate-spin text-[#2C1A16] mr-2"}),e.jsx("span",{className:"text-sm text-[#4A3B32]",children:"Loading your cart..."})]})})]});if(R&&!O)return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-[#F2EFE9]",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(me,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-[#2C1A16]",children:"Failed to Load Cart"}),e.jsx("p",{className:"mb-6 text-[#4A3B32]",children:"We couldn't load your cart. Please try again."}),e.jsx("button",{onClick:()=>_(),className:"px-6 py-3 font-medium rounded-lg transition-colors duration-200 bg-[#2C1A16] text-[#F2EFE9]",style:{minHeight:"48px"},children:"Retry"})]})});const Pe=(O==null?void 0:O.items)||[],ne=Di($d(O));if(Pe.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-[#F2EFE9]",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(pt,{className:"h-24 w-24 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold mb-4 text-[#2C1A16]",children:"Your Cart is Empty"}),e.jsx("p",{className:"mb-8 text-[#4A3B32]",children:"Add some delicious items from our menu to get started!"}),e.jsxs(X,{to:"/menu",className:"inline-flex items-center px-6 py-3 font-medium rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl bg-[#2C1A16] text-[#F2EFE9]",style:{minHeight:"48px"},children:["Browse Menu",e.jsx(Eo,{className:"ml-2 h-5 w-5"})]})]})});const be=!!(O!=null&&O.discount_code&&ne.discountCents>0),U=W=>{const oe=Pe.find(je=>je.item_id===W);return(oe==null?void 0:oe.item_name)||"Unknown item"};return e.jsxs(e.Fragment,{children:[N.isOpen&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 px-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:N.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:N.message}),e.jsxs("div",{className:"flex space-x-3 justify-end",children:[e.jsx("button",{onClick:()=>E({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),className:"px-6 py-2.5 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:N.onConfirm,className:"px-6 py-2.5 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Remove"})]})]})}),L.length>0&&e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 max-w-2xl w-full mx-4",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-red-900 mb-2",children:"Items Unavailable"}),e.jsx("p",{className:"text-sm text-red-800 mb-3",children:"The following items in your cart are no longer available:"}),e.jsx("ul",{className:"space-y-2 mb-4",children:L.map((W,oe)=>e.jsxs("li",{className:"flex items-start text-sm text-red-800",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:U(W.field)})," - ",W.message]})]},oe))}),e.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Please remove these items from your cart to continue with checkout."}),e.jsx("button",{onClick:()=>k([]),className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Got it"})]}),e.jsx("button",{onClick:()=>k([]),className:"ml-4 text-red-600 hover:text-red-800 transition-colors","aria-label":"Close",children:e.jsx(Ae,{className:"h-5 w-5"})})]})})}),S&&e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 max-w-2xl w-full mx-4",children:e.jsx("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-xl shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Kw,{className:"h-5 w-5 text-amber-600 flex-shrink-0"}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium text-amber-900",children:S})}),e.jsx("button",{onClick:()=>{F(null),_()},className:"ml-4 px-3 py-1.5 text-sm font-medium text-amber-700 bg-amber-100 hover:bg-amber-200 rounded-lg transition-colors",children:"Retry Sync"}),e.jsx("button",{onClick:()=>F(null),className:"ml-2 text-amber-600 hover:text-amber-800 transition-colors","aria-label":"Dismiss",children:e.jsx(Ae,{className:"h-4 w-4"})})]})})}),e.jsxs("div",{className:"min-h-screen py-4 sm:py-6 lg:py-8 px-4 sm:px-6 lg:px-8 bg-[#F2EFE9]",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#2C1A16]",children:"Shopping Cart"}),e.jsxs("p",{className:"mt-1 text-sm text-[#4A3B32]",children:[Pe.length," ",Pe.length===1?"item":"items"," in your cart"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3 sm:space-y-4",children:[Pe.map(W=>{const oe=Number(W.unit_price||0),je=Number(W.line_total||0),Ve=M[W.cart_item_id]||!1,te=W.is_available!==!1;return e.jsxs("div",{className:`rounded-xl sm:rounded-2xl shadow-sm sm:shadow-md border p-4 sm:p-5 transition-all duration-200 hover:shadow-md ${te?"bg-white border-[#E8E1D6]":"bg-red-50 border-red-300 opacity-75"}`,children:[!te&&e.jsxs("div",{className:"mb-3 flex items-start space-x-2 bg-red-100 border border-red-300 rounded-lg p-3",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Item No Longer Available"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Please remove this item to continue with checkout"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-base sm:text-lg font-bold leading-tight ${te?"text-[#2C1A16]":"text-gray-500 line-through"}`,children:W.item_name}),Ce(W.selected_customizations,W.is_builder_item,W.builder_selections),te&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["",oe.toFixed(2)," each"]})]}),te&&e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-[#2C1A16]",children:["",je.toFixed(2)]})})]}),te?e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center bg-[#F2EFE9] rounded-lg p-1",children:[e.jsx("button",{onClick:()=>K(W.cart_item_id,W.quantity-1,W.item_id),disabled:W.quantity<=1||Ve,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white border border-[#E8E1D6] flex items-center justify-center text-[#2C1A16] hover:border-[#2C1A16] disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Decrease quantity",children:Ve?e.jsx(Re,{className:"h-4 w-4 animate-spin"}):e.jsx(Ww,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-10 sm:w-12 text-center font-bold text-lg text-[#2C1A16]",children:W.quantity}),e.jsx("button",{onClick:()=>K(W.cart_item_id,W.quantity+1,W.item_id),disabled:Ve,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white border border-[#E8E1D6] flex items-center justify-center text-[#2C1A16] hover:border-[#2C1A16] disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Increase quantity",children:Ve?e.jsx(Re,{className:"h-4 w-4 animate-spin"}):e.jsx(wt,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>A(W.cart_item_id,W.item_name,W.item_id),disabled:D.isPending,className:"flex items-center justify-center px-3 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 text-sm font-medium rounded-lg transition-all duration-200 disabled:opacity-50","aria-label":"Remove item",children:[e.jsx(It,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:"Remove"})]})]}):e.jsxs("button",{onClick:()=>A(W.cart_item_id,W.item_name,W.item_id),disabled:D.isPending,className:"w-full py-2.5 bg-red-600 text-white font-semibold text-sm rounded-lg hover:bg-red-700 transition-all duration-200 disabled:opacity-50 flex items-center justify-center","aria-label":"Remove unavailable item",children:[e.jsx(It,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:"Remove Unavailable Item"})]})]})]},W.cart_item_id)}),e.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[e.jsxs(X,{to:"/menu",className:"inline-flex items-center text-orange-600 hover:text-orange-700 font-medium transition-colors duration-200",children:[e.jsx(Eo,{className:"mr-2 h-5 w-5 rotate-180"}),"Continue Shopping"]}),e.jsx("button",{onClick:$,disabled:G.isPending,className:"inline-flex items-center px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Empty cart",children:G.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-5 w-5 animate-spin"}),"Clearing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"mr-2 h-5 w-5"}),"Empty Cart"]})})]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-[#E8E1D6] p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-[#2C1A16] mb-4",children:"Order Summary"}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("label",{htmlFor:"discount-code-mobile",className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Code"}),be?e.jsxs("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mi,{className:"h-4 w-4 text-green-600 mr-1.5"}),e.jsx("span",{className:"font-medium text-green-900 text-sm",children:O==null?void 0:O.discount_code})]}),e.jsx("button",{onClick:ve,className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Remove"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"discount-code-mobile",type:"text",value:g,onChange:ke,placeholder:"Enter code",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-200"}),e.jsx("button",{onClick:re,disabled:se.isPending||!g.trim(),className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:se.isPending?e.jsx(Re,{className:"h-4 w-4 animate-spin"}):"Apply"})]}),y&&e.jsxs("div",{className:"mt-2 flex items-start text-xs text-red-600 bg-red-50 px-2 py-1.5 rounded",children:[e.jsx(me,{className:"h-3.5 w-3.5 mr-1.5 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:y})]})]}),e.jsx(vl,{totals:ne,discountCode:O==null?void 0:O.discount_code,hasDiscount:be,showDeliveryFee:!0,showTax:!0})]})}),e.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-[#E8E1D6] p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-[#2C1A16] mb-6",children:"Order Summary"}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[e.jsx("label",{htmlFor:"discount-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Code"}),be?e.jsxs("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mi,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-900",children:O.discount_code})]}),e.jsx("button",{onClick:ve,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Remove"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{id:"discount-code",type:"text",value:g,onChange:ke,placeholder:"Enter code",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200"}),e.jsx("button",{onClick:re,disabled:se.isPending||!g.trim(),className:"px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:se.isPending?e.jsx(Re,{className:"h-5 w-5 animate-spin"}):"Apply"})]}),y&&e.jsxs("div",{className:"flex items-start text-sm text-red-600 bg-red-50 px-3 py-2 rounded-md",children:[e.jsx(me,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:y})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(vl,{totals:ne,discountCode:O==null?void 0:O.discount_code,hasDiscount:be,showDeliveryFee:!0,showTax:!0})}),e.jsx("button",{onClick:xe,disabled:le.isPending,className:"w-full py-4 font-bold text-lg rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center checkout-btn bg-[#2C1A16] text-[#F2EFE9]",style:{minHeight:"48px"},children:le.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 animate-spin mr-2"}),"Validating..."]}):e.jsxs(e.Fragment,{children:["Proceed to Checkout",e.jsx(Eo,{className:"ml-2 h-5 w-5"})]})}),e.jsx("p",{className:"mt-4 text-xs text-center text-gray-500",children:"Secure checkout powered by SumUp"})]})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white z-40 lg:hidden border-t-2 border-[#E8E1D6]",style:{paddingBottom:"max(env(safe-area-inset-bottom, 0px), 8px)",boxShadow:"0 -8px 32px 0 rgb(44 26 22 / 0.15)"},children:e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium mb-0.5",children:"Total"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-[#2C1A16]",style:{letterSpacing:"-0.02em"},children:["",ne.total]})]}),e.jsx("button",{onClick:xe,disabled:le.isPending,className:"flex-1 max-w-[200px] py-3.5 font-bold text-base rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg active:scale-[0.98] flex items-center justify-center bg-[#2C1A16] text-[#F2EFE9]",style:{minHeight:"48px"},children:le.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 animate-spin mr-2"}),e.jsx("span",{children:"Validating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Checkout"}),e.jsx(Eo,{className:"ml-2 h-5 w-5"})]})})]})}),e.jsx("div",{className:"h-28 lg:hidden","aria-hidden":"true"})]})]})},k9=t=>{const s=new Date,r=t.toDateString()===s.toDateString(),n=new Date(s);n.setDate(n.getDate()+1);const a=t.toDateString()===n.toDateString();return r?"Today":a?"Tomorrow":t.toLocaleDateString("en-IE",{weekday:"short",day:"numeric",month:"short"})},C9=t=>new Date(t).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit",hour12:!1}),dy=t=>new Date(t).getHours(),S9=t=>{const s={};return t.forEach(r=>{const n=new Date(r.slot_time),a=n.toDateString();s[a]||(s[a]={label:k9(n),date:n,slots:[]}),s[a].slots.push(r)}),Object.keys(s).forEach(r=>{s[r].slots.sort((n,a)=>new Date(n.slot_time).getTime()-new Date(a.slot_time).getTime())}),s},E9=(t,s)=>{if(s==="all")return t;const r=new Date,n=t.filter(a=>a.is_available&&new Date(a.slot_time)>r);return s==="next"?n.slice(0,6):s==="afternoon"?t.filter(a=>{const i=dy(a.slot_time);return i>=12&&i<17}):s==="evening"?t.filter(a=>dy(a.slot_time)>=17):t},P9=({isOpen:t,onClose:s,availableTimeSlots:r,selectedTimeSlot:n,onSelectTimeSlot:a})=>{const[i,o]=u.useState(""),[l,c]=u.useState("all"),d=u.useMemo(()=>S9(r),[r]),m=u.useMemo(()=>Object.keys(d).sort((f,b)=>new Date(f).getTime()-new Date(b).getTime()),[d]);St.useEffect(()=>{t&&m.length>0&&!i&&o(m[0])},[t,m,i]);const x=u.useMemo(()=>!i||!d[i]?[]:E9(d[i].slots,l),[i,d,l]);return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 transition-opacity duration-300",onClick:s}),e.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-50 bg-white shadow-2xl transition-transform duration-300 ease-out",style:{borderTopLeftRadius:"24px",borderTopRightRadius:"24px",maxHeight:"85vh",backgroundColor:"#FAF8F5"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1 rounded-full",style:{backgroundColor:"#D4C5B5"}})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",style:{borderColor:"#E5DFD6"},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"w-6 h-6 mr-3",style:{color:"#80604A"}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#2C2018"},children:"Select collection time"})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-opacity-80 transition-colors",style:{backgroundColor:"#DEBF93"},children:e.jsx(Ae,{className:"w-5 h-5",style:{color:"#2C2018"}})})]}),e.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(85vh - 140px)"},children:[m.length>1&&e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:m.map(f=>e.jsx("button",{onClick:()=>{o(f),c("all")},className:"px-5 py-2.5 rounded-xl font-medium text-sm whitespace-nowrap transition-all duration-200 min-h-[44px]",style:{backgroundColor:i===f?"#2C2018":"#FFFFFF",color:i===f?"#FFFFFF":"#2C2018",border:`2px solid ${i===f?"#2C2018":"#D4C5B5"}`},children:d[f].label},f))})}),e.jsx("div",{className:"px-6 py-3 border-b",style:{borderColor:"#E5DFD6"},children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>c("all"),className:"px-4 py-2 rounded-full font-medium text-sm whitespace-nowrap transition-all duration-200",style:{backgroundColor:l==="all"?"#80604A":"#FFFFFF",color:l==="all"?"#FFFFFF":"#80604A",border:`1px solid ${l==="all"?"#80604A":"#D4C5B5"}`},children:"All times"}),e.jsx("button",{onClick:()=>c("next"),className:"px-4 py-2 rounded-full font-medium text-sm whitespace-nowrap transition-all duration-200",style:{backgroundColor:l==="next"?"#80604A":"#FFFFFF",color:l==="next"?"#FFFFFF":"#80604A",border:`1px solid ${l==="next"?"#80604A":"#D4C5B5"}`},children:"Next available"}),e.jsx("button",{onClick:()=>c("afternoon"),className:"px-4 py-2 rounded-full font-medium text-sm whitespace-nowrap transition-all duration-200",style:{backgroundColor:l==="afternoon"?"#80604A":"#FFFFFF",color:l==="afternoon"?"#FFFFFF":"#80604A",border:`1px solid ${l==="afternoon"?"#80604A":"#D4C5B5"}`},children:"Afternoon"}),e.jsx("button",{onClick:()=>c("evening"),className:"px-4 py-2 rounded-full font-medium text-sm whitespace-nowrap transition-all duration-200",style:{backgroundColor:l==="evening"?"#80604A":"#FFFFFF",color:l==="evening"?"#FFFFFF":"#80604A",border:`1px solid ${l==="evening"?"#80604A":"#D4C5B5"}`},children:"Evening"})]})}),e.jsx("div",{className:"px-6 py-4",children:x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ke,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#D4C5B5"}}),e.jsx("p",{className:"text-base font-medium",style:{color:"#80604A"},children:"No available time slots"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"#80604A"},children:"Try selecting a different day or filter"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(f=>{const b=n===f.slot_time,h=f.is_available;return e.jsx("button",{onClick:()=>h&&a(f.slot_time),disabled:!h,className:"px-4 py-3 rounded-2xl font-medium text-base transition-all duration-200 min-h-[48px]",style:{backgroundColor:b?"#2C2018":h?"#FFFFFF":"#F5F3F0",color:b?"#FFFFFF":h?"#2C2018":"#B8B0A5",border:`2px solid ${b?"#2C2018":h?"#D4C5B5":"#E5DFD6"}`,cursor:h?"pointer":"not-allowed",opacity:h?1:.5},children:C9(f.slot_time)},f.slot_time)})})}),e.jsx("div",{className:"h-8"})]})]})]}):null},A9=t=>{const s=new Date(t),r=new Date,n=s.toDateString()===r.toDateString(),a=new Date(r);a.setDate(a.getDate()+1);const i=s.toDateString()===a.toDateString(),o=s.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit",hour12:!1});return n?`Today ${o}`:i?`Tomorrow ${o}`:`${s.toLocaleDateString("en-IE",{weekday:"short",day:"numeric",month:"short"})} ${o}`},F9=({availableTimeSlots:t,selectedTimeSlot:s,onSelectTimeSlot:r,error:n})=>{const[a,i]=u.useState(!1),o=l=>{r(l),i(!1)};return e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"collection-time-picker",className:"block text-sm font-medium mb-2",style:{color:"#2C2018"},children:"Collection time"}),e.jsxs("button",{id:"collection-time-picker",type:"button",onClick:()=>i(!0),className:"w-full px-4 py-3 text-left border-2 rounded-2xl transition-all duration-200 flex items-center justify-between min-h-[48px]",style:{backgroundColor:"#FFFFFF",borderColor:n?"#EF4444":"#D4C5B5",boxShadow:"0 1px 3px rgba(44, 32, 24, 0.1)"},children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx(Ke,{className:"w-5 h-5 mr-3",style:{color:"#80604A"}}),e.jsx("span",{className:"text-base",style:{color:s?"#2C2018":"#80604A"},children:s?A9(s):"Choose a time"})]}),e.jsx(lr,{className:"w-5 h-5 flex-shrink-0",style:{color:"#80604A"}})]}),n&&e.jsx("p",{className:"mt-2 text-sm",style:{color:"#EF4444"},children:n}),e.jsx(P9,{isOpen:a,onClose:()=>i(!1),availableTimeSlots:t,selectedTimeSlot:s,onSelectTimeSlot:o})]})},wc="https://123salama-lama-food-truck.launchpulse.ai",T9=()=>{const t=Be(),s=Ue(),r=Z(C=>C.authentication_state.auth_token),n=Z(C=>C.business_settings.delivery_enabled),a=Z(C=>C.update_cart_fees),[i,o]=u.useState(null),[l,c]=u.useState(null),[d,m]=u.useState(null),[x,f]=u.useState([]),[b,h]=u.useState({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:null}),[p,v]=u.useState({is_open:!1,address_line1:"",address_line2:"",city:"Dublin",postal_code:"",delivery_instructions:"",label:""}),[g,j]=u.useState({time_slots_loading:!1,addresses_loading:!1,delivery_validating:!1}),[y,w]=u.useState(null),{data:M}=ue({queryKey:["addresses"],queryFn:async()=>(await Q.get(`${wc}/api/addresses`,{headers:{Authorization:`Bearer ${r}`}})).data,enabled:!!r&&i==="delivery",staleTime:6e4,refetchOnWindowFocus:!1,select:C=>C.addresses||[]}),T=M||[],{data:N}=ue({queryKey:["cart"],queryFn:async()=>(await Q.get(`${wc}/api/cart`,{headers:r?{Authorization:`Bearer ${r}`}:{}})).data,staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),E=(N==null?void 0:N.items)||[],L=Di($d(N)),k=r?null:On();u.useEffect(()=>{r||On()},[r]),u.useEffect(()=>{},[N,L,k]);const S=ce({mutationFn:async C=>(await Q.post(`${wc}/api/delivery/validate-address`,C,{headers:{Authorization:`Bearer ${r}`}})).data,onMutate:()=>{j(C=>({...C,delivery_validating:!0})),w(null)},onSuccess:C=>{h({is_valid:C.valid,delivery_fee:Number(C.delivery_fee||0),estimated_time:C.estimated_delivery_time?`${C.estimated_delivery_time} minutes`:null,zone_name:C.zone_id||null,error_message:C.valid?null:"Delivery not available to this address"}),j(R=>({...R,delivery_validating:!1}))},onError:C=>{var R,_;w(((_=(R=C.response)==null?void 0:R.data)==null?void 0:_.message)||"Failed to validate delivery address"),h({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:"Failed to validate delivery address"}),j(q=>({...q,delivery_validating:!1}))}}),F=ce({mutationFn:async C=>(await Q.post(`${wc}/api/addresses`,C,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:C=>{s.invalidateQueries({queryKey:["addresses"]}),v({is_open:!1,address_line1:"",address_line2:"",city:"Dublin",postal_code:"",delivery_instructions:"",label:""}),m(C.address_id),S.mutate({address:C.address_line1,postal_code:C.postal_code})},onError:C=>{var R,_;w(((_=(R=C.response)==null?void 0:R.data)==null?void 0:_.message)||"Failed to create address")}}),P=()=>{j(V=>({...V,time_slots_loading:!0}));const C=new Date,R=45,_=new Date(C.getTime()+R*6e4),q=[],O=2;for(let V=0;V<O;V++){const D=new Date(C);D.setDate(D.getDate()+V),D.setMinutes(0,0,0);const G=11,se=20;for(let le=G;le<se;le++)for(let K=0;K<60;K+=15){const A=new Date(D);A.setHours(le,K,0,0);const $=A.getTime()>_.getTime();q.push({slot_time:A.toISOString(),is_available:$,capacity_remaining:$?Math.floor(Math.random()*5)+1:0})}}f(q),j(V=>({...V,time_slots_loading:!1}))},I=C=>{o(C),w(null),C==="collection"?(P(),m(null),h({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:null})):(c(null),f([]))},H=C=>{m(C.address_id),w(null),S.mutate({address_id:C.address_id})},z=C=>{if(C.preventDefault(),w(null),!p.label||!p.address_line1||!p.postal_code){w("Please fill in all required address fields");return}F.mutate({label:p.label,address_line1:p.address_line1,address_line2:p.address_line2||null,city:p.city,postal_code:p.postal_code,delivery_instructions:p.delivery_instructions||null,is_default:!1})},B=()=>{if(w(null),!i){w("Please select an order type");return}if(i==="collection"&&!l){w("Please select a collection time slot");return}if(i==="delivery"){if(!d){w("Please select a delivery address");return}if(!b.is_valid){w(b.error_message||"Delivery address is not valid");return}}a(i==="delivery"?b.delivery_fee:0,0);try{if(sessionStorage.setItem("checkout_order_type",i),i==="collection")sessionStorage.setItem("checkout_collection_time_slot",l||""),sessionStorage.removeItem("checkout_delivery_address_id"),sessionStorage.removeItem("checkout_delivery_address_data");else if(i==="delivery"&&d){sessionStorage.setItem("checkout_delivery_address_id",d);const C=T.find(R=>R.address_id===d);C&&sessionStorage.setItem("checkout_delivery_address_data",JSON.stringify({label:C.label,address_line1:C.address_line1,address_line2:C.address_line2||"",city:C.city,postal_code:C.postal_code,delivery_instructions:C.delivery_instructions||""})),sessionStorage.removeItem("checkout_collection_time_slot")}t("/checkout/contact")}catch(C){console.error("Error storing order type data:",C),w("Failed to save order information. Please try again.")}};return u.useEffect(()=>{E.length===0&&t("/cart")},[E,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white font-semibold",children:"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Order Type"})]}),e.jsx(We,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Contact"})]}),e.jsx(We,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Payment"})]}),e.jsx(We,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"4"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8 sm:px-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Choose Order Type"}),e.jsx("p",{className:"mt-2 text-blue-100",children:"Select collection or delivery for your order"})]}),y&&e.jsxs("div",{className:"mx-6 mt-6 sm:mx-8 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:y})]}),e.jsxs("div",{className:"px-6 py-8 sm:px-8",children:[e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Order Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>I("collection"),className:`relative rounded-xl border-2 p-6 flex flex-col items-start transition-all duration-200 ${i==="collection"?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[e.jsx(Ke,{className:`w-8 h-8 mb-3 ${i==="collection"?"text-blue-600":"text-gray-400"}`}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Collection"}),e.jsx("span",{className:"mt-1 text-sm text-gray-600",children:"Pick up your order from our food truck"}),i==="collection"&&e.jsx(Ge,{className:"absolute top-4 right-4 w-6 h-6 text-blue-600"})]}),e.jsxs("button",{type:"button",onClick:()=>I("delivery"),disabled:!n,className:`relative rounded-xl border-2 p-6 flex flex-col items-start transition-all duration-200 ${i==="delivery"?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":n?"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md":"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60"}`,children:[e.jsx(gt,{className:`w-8 h-8 mb-3 ${i==="delivery"?"text-blue-600":n?"text-gray-400":"text-gray-300"}`}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Delivery"}),e.jsx("span",{className:"mt-1 text-sm text-gray-600",children:n?"We'll deliver to your address":"Currently unavailable"}),i==="delivery"&&e.jsx(Ge,{className:"absolute top-4 right-4 w-6 h-6 text-blue-600"})]})]})]}),i==="collection"&&e.jsx("div",{className:"mt-8",children:g.time_slots_loading?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4",style:{borderColor:"#2C2018"}})}):e.jsx(F9,{availableTimeSlots:x,selectedTimeSlot:l,onSelectTimeSlot:C=>{c(C),w(null)},error:y&&!l?"Please select a collection time":null})}),i==="delivery"&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Delivery Address"}),e.jsxs("button",{type:"button",onClick:()=>v(C=>({...C,is_open:!0})),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}),T.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:[e.jsx(gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No saved addresses yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add an address to enable delivery"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:T.map(C=>e.jsx("button",{type:"button",onClick:()=>H(C),className:`relative rounded-xl border-2 p-6 text-left transition-all duration-200 ${d===C.address_id?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:C.label}),C.is_default&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Default"})]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[C.address_line1,C.address_line2&&`, ${C.address_line2}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[C.city,", ",C.postal_code]})]}),d===C.address_id&&e.jsx(Ge,{className:"w-6 h-6 text-blue-600 flex-shrink-0 ml-4"})]})},C.address_id))}),d&&g.delivery_validating&&e.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg border border-gray-200 p-4 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Validating delivery address..."})]}),d&&!g.delivery_validating&&b.is_valid&&e.jsx("div",{className:"mt-4 bg-green-50 rounded-lg border border-green-200 p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ge,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Delivery Available"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm text-green-700",children:["Delivery Fee: ",e.jsxs("span",{className:"font-semibold",children:["",Number(b.delivery_fee).toFixed(2)]})]}),b.estimated_time&&e.jsxs("p",{className:"text-sm text-green-700",children:["Estimated Time: ",e.jsx("span",{className:"font-semibold",children:b.estimated_time})]})]})]})]})}),d&&!g.delivery_validating&&!b.is_valid&&b.error_message&&e.jsxs("div",{className:"mt-4 bg-red-50 rounded-lg border border-red-200 p-4 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:b.error_message})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-6 sm:px-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),e.jsx(vl,{totals:L,discountCode:N==null?void 0:N.discount_code,hasDiscount:!!(N!=null&&N.discount_code)&&L.discountCents>0,showDeliveryFee:!0,showTax:!0})]}),e.jsxs("div",{className:"bg-white px-6 py-6 sm:px-8 border-t border-gray-200 flex justify-between",children:[e.jsx(X,{to:"/cart",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors duration-200",children:"Back to Cart"}),e.jsxs("button",{type:"button",onClick:B,disabled:!i||i==="collection"&&!l||i==="delivery"&&(!d||!b.is_valid),className:"inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:["Continue to Contact Info",e.jsx(We,{className:"w-5 h-5 ml-2"})]})]})]})]})}),p.is_open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Delivery Address"}),e.jsx("button",{type:"button",onClick:()=>v(C=>({...C,is_open:!1})),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:z,className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-700 mb-1",children:["Label ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"label",value:p.label,onChange:C=>v(R=>({...R,label:C.target.value})),placeholder:"e.g., Home, Work",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address_line1",className:"block text-sm font-medium text-gray-700 mb-1",children:["Address Line 1 ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"address_line1",value:p.address_line1,onChange:C=>v(R=>({...R,address_line1:C.target.value})),placeholder:"Street address",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address_line2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",id:"address_line2",value:p.address_line2,onChange:C=>v(R=>({...R,address_line2:C.target.value})),placeholder:"Apartment, suite, etc.",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"city",value:p.city,onChange:C=>v(R=>({...R,city:C.target.value})),required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:["Eircode ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"postal_code",value:p.postal_code,onChange:C=>v(R=>({...R,postal_code:C.target.value})),placeholder:"D01 A123",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_instructions",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),e.jsx("textarea",{id:"delivery_instructions",value:p.delivery_instructions,onChange:C=>v(R=>({...R,delivery_instructions:C.target.value})),placeholder:"Any special instructions for delivery",rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>v(C=>({...C,is_open:!1})),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:F.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Address"})]})]})]})})]})},M9=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),R9=t=>{const s=t.replace(/[\s\-()]/g,"");return/^\+?\d{10,15}$/.test(s)},Am=t=>!t||t.trim().length===0?"Full name is required":t.trim().length<2?"Name must be at least 2 characters":t.trim().length>100?"Name must not exceed 100 characters":null,Fm=t=>!t||t.trim().length===0?"Email address is required":M9(t)?t.length>255?"Email must not exceed 255 characters":null:"Please enter a valid email address",Tm=t=>{if(!t||t.trim().length===0)return"Phone number is required";const s=t.replace(/[\s\-()]/g,"");return s.length<10?"Phone number must be at least 10 digits":s.length>20?"Phone number must not exceed 20 characters":R9(t)?null:"Please enter a valid phone number"},L9=()=>{const t=Be(),s=Z(p=>p.authentication_state.current_user),r=Z(p=>p.authentication_state.authentication_status.is_authenticated),[n,a]=u.useState({customer_name:"",customer_email:"",customer_phone:""}),[i,o]=u.useState({is_valid:!1,errors:{customer_name:null,customer_email:null,customer_phone:null}}),[l,c]=u.useState(!1),[d,m]=u.useState(!1);u.useEffect(()=>{if(r&&s){const p={customer_name:`${s.first_name} ${s.last_name}`.trim(),customer_email:s.email,customer_phone:s.phone};a(p);const v=Am(p.customer_name),g=Fm(p.customer_email),j=Tm(p.customer_phone);o({is_valid:!v&&!g&&!j,errors:{customer_name:v,customer_email:g,customer_phone:j}})}},[r,s]),u.useEffect(()=>{sessionStorage.getItem("checkout_order_type")||t("/checkout/order-type",{replace:!0})},[t]);const x=(p,v)=>{a(g=>({...g,[p]:v})),o(g=>({...g,errors:{...g.errors,[p]:null}})),l||c(!0)},f=p=>{let v=null;switch(p){case"customer_name":v=Am(n.customer_name);break;case"customer_email":v=Fm(n.customer_email);break;case"customer_phone":v=Tm(n.customer_phone);break}o(g=>({...g,errors:{...g.errors,[p]:v}}))},b=()=>{const p=Am(n.customer_name),v=Fm(n.customer_email),g=Tm(n.customer_phone),j=!p&&!v&&!g;return o({is_valid:j,errors:{customer_name:p,customer_email:v,customer_phone:g}}),j},h=async()=>{if(m(!0),!b()){m(!1);const v=document.querySelector('[aria-invalid="true"]');v&&v.scrollIntoView({behavior:"smooth",block:"center"});return}try{sessionStorage.setItem("checkout_contact_info",JSON.stringify(n)),sessionStorage.setItem("checkout_customer_name",n.customer_name),sessionStorage.setItem("checkout_customer_email",n.customer_email),sessionStorage.setItem("checkout_customer_phone",n.customer_phone),t("/checkout/payment")}catch(v){console.error("Error storing contact info:",v),m(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Contact Information"}),e.jsx("p",{className:"mt-3 text-base text-gray-600 leading-relaxed",children:"We'll use this information to contact you about your order"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Order Type"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-blue-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"2"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-blue-600",children:"Contact"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"3"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Payment"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"4"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 lg:p-8",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"customer_name",name:"customer_name",value:n.customer_name,onChange:p=>x("customer_name",p.target.value),onBlur:()=>f("customer_name"),"aria-invalid":!!i.errors.customer_name,"aria-describedby":i.errors.customer_name?"customer_name_error":void 0,placeholder:"Enter your full name",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_name&&e.jsxs("p",{id:"customer_name_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"customer_email",name:"customer_email",value:n.customer_email,onChange:p=>x("customer_email",p.target.value),onBlur:()=>f("customer_email"),"aria-invalid":!!i.errors.customer_email,"aria-describedby":i.errors.customer_email?"customer_email_error":void 0,placeholder:"your.email@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_email&&e.jsxs("p",{id:"customer_email_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_email]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"We'll send order updates to this email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",id:"customer_phone",name:"customer_phone",value:n.customer_phone,onChange:p=>x("customer_phone",p.target.value),onBlur:()=>f("customer_phone"),"aria-invalid":!!i.errors.customer_phone,"aria-describedby":i.errors.customer_phone?"customer_phone_error":void 0,placeholder:"+353 1 234 5678",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_phone?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_phone&&e.jsxs("p",{id:"customer_phone_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_phone]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"For delivery coordination and order updates"})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Your contact information is secure"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"We'll only use this to communicate about your order. We never share your details with third parties."})]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 lg:px-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs(X,{to:"/checkout/order-type",className:`inline-flex items-center justify-center px-6 py-3 rounded-lg 
                    bg-gray-100 hover:bg-gray-200 text-gray-900 
                    font-medium text-base transition-all duration-200 
                    border border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-200`,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Order Type"]}),e.jsx("button",{type:"button",onClick:h,disabled:d,className:`inline-flex items-center justify-center px-6 py-3 rounded-lg 
                    bg-blue-600 hover:bg-blue-700 text-white 
                    font-medium text-base transition-all duration-200 
                    shadow-lg hover:shadow-xl 
                    focus:outline-none focus:ring-4 focus:ring-blue-100 
                    disabled:opacity-50 disabled:cursor-not-allowed`,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Continue to Payment",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",e.jsx(X,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Contact our support team"})]})})]})})})},D9=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",{headers:{Authorization:`Bearer ${t}`}})).data.payment_methods||[],O9=async(t,s)=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,$9=()=>{const t=Be(),s=Z(O=>O.authentication_state.auth_token),r=Z(O=>O.authentication_state.current_user),[n,a]=u.useState(null),[i,o]=u.useState(""),[l,c]=u.useState("card"),[d,m]=u.useState(!1),[x,f]=u.useState(!1),[b,h]=u.useState({sumup_token:"",card_type:"",last_four_digits:"",expiry_month:"",expiry_year:"",cardholder_name:""}),[p,v]=u.useState([]),[g,j]=u.useState(!1),{data:y,isLoading:w}=ue({queryKey:["cart"],queryFn:async()=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/cart",{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s,staleTime:3e4}),M=(y==null?void 0:y.items)||[],T=Di($d(y)),N=s?null:On();u.useEffect(()=>{s||On()},[s]),u.useEffect(()=>{},[y,T,N]);const{data:E=[],isLoading:L}=ue({queryKey:["payment-methods",r==null?void 0:r.user_id],queryFn:()=>D9(s),enabled:!!s&&!!r,staleTime:5*60*1e3}),k=ce({mutationFn:O=>O9(s,O),onSuccess:O=>{a(O.payment_method_id),m(!1),h({sumup_token:"",card_type:"",last_four_digits:"",expiry_month:"",expiry_year:"",cardholder_name:""}),o(""),v([])},onError:O=>{var V,D;v([{field:"general",message:((D=(V=O.response)==null?void 0:V.data)==null?void 0:D.message)||"Failed to save payment method"}])}}),S=T.deliveryFeeCents>0?"delivery":"collection";u.useEffect(()=>{const O=sessionStorage.getItem("checkout_order_type"),V=sessionStorage.getItem("checkout_customer_name"),D=sessionStorage.getItem("checkout_customer_email");if(!O){t("/checkout/order-type",{replace:!0});return}if(!V||!D){t("/checkout/contact",{replace:!0});return}},[t]),u.useEffect(()=>{if(E.length>0&&!n){const O=E.find(V=>V.is_default);O&&a(O.payment_method_id)}},[E,n]);const F=O=>/^\d{3,4}$/.test(O),P=()=>{const O=[];return l==="card"&&(!n&&!d&&O.push({field:"payment_method",message:"Please select a payment method or add a new card"}),n&&!d&&(!i||!F(i))&&O.push({field:"cvv",message:"Please enter a valid CVV (3-4 digits)"}),d&&(b.sumup_token||O.push({field:"new_card",message:"Please complete the card information"}))),v(O),O.length===0},I=O=>{a(O),m(!1),c("card"),o(""),v([])},H=()=>{m(!0),a(null),c("card"),o(""),v([])},z=()=>{c("cash"),a(null),m(!1),o(""),v([])},B=O=>{const V=O.target.value.replace(/\D/g,"").slice(0,4);o(V),v(D=>D.filter(G=>G.field!=="cvv"))},C=async()=>{j(!0),v([]);try{await new Promise(D=>setTimeout(D,1500));const V={sumup_token:`sumup_tok_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,card_type:"Visa",last_four_digits:"4242",expiry_month:"12",expiry_year:"2025",cardholder_name:"John Doe"};h(V),x?k.mutate({...V,is_default:E.length===0}):a("new_card_temp")}catch{v([{field:"new_card",message:"Failed to process card details. Please try again."}])}finally{j(!1)}},R=()=>{if(P())try{if(l==="cash")sessionStorage.setItem("checkout_payment_method_id","cash_at_pickup"),sessionStorage.setItem("checkout_payment_method_type","cash"),sessionStorage.setItem("checkout_last_four_digits",""),sessionStorage.setItem("checkout_card_type",""),sessionStorage.removeItem("checkout_cvv");else if(l==="card")if(n&&!d){const O=E.find(V=>V.payment_method_id===n);O&&(sessionStorage.setItem("checkout_payment_method_id",O.payment_method_id),sessionStorage.setItem("checkout_payment_method_type","card"),sessionStorage.setItem("checkout_last_four_digits",O.last_four_digits),sessionStorage.setItem("checkout_card_type",O.card_type),sessionStorage.setItem("checkout_cvv",i))}else d&&b.sumup_token&&(sessionStorage.setItem("checkout_payment_method_id","new_card_temp"),sessionStorage.setItem("checkout_payment_method_type","card"),sessionStorage.setItem("checkout_last_four_digits",b.last_four_digits),sessionStorage.setItem("checkout_card_type",b.card_type),sessionStorage.removeItem("checkout_cvv"));t("/checkout/review")}catch(O){console.error("Error storing payment method data:",O),v([{field:"general",message:"Failed to save payment information. Please try again."}])}},_=()=>{t("/checkout/contact")},q=O=>{var V;return(V=p.find(D=>D.field===O))==null?void 0:V.message};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-600 text-white text-sm font-semibold",children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Order Type"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-green-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-600 text-white text-sm font-semibold",children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Contact"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-green-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 text-white text-sm font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-blue-600",children:"Payment"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-300 text-gray-600 text-sm font-semibold",children:"4"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Payment Method"}),e.jsx("p",{className:"mt-2 text-blue-100",children:"Select your payment method to complete your order"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[q("general")&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:q("general")})})]}),(L||w)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Re,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}),!L&&!w&&e.jsxs(e.Fragment,{children:[E.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(Vs,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Saved Payment Methods"})]}),E.map(O=>e.jsxs("div",{onClick:()=>I(O.payment_method_id),className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${n===O.payment_method_id&&!d?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:n===O.payment_method_id&&!d,onChange:()=>I(O.payment_method_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(hr,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[O.card_type,"  ",O.last_four_digits]}),O.is_default&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Expires ",O.expiry_month,"/",O.expiry_year]})]})]}),n===O.payment_method_id&&!d&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("label",{htmlFor:"cvv",className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV / Security Code *"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",id:"cvv",value:i,onChange:B,maxLength:4,placeholder:"123",className:`block w-24 px-4 py-2 border-2 rounded-lg focus:ring-4 focus:ring-blue-100 focus:outline-none transition-all ${q("cvv")?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),e.jsx(Vs,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"3-4 digits on back of card"})]}),q("cvv")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:q("cvv")})]})]},O.payment_method_id))]}),e.jsxs("div",{className:"space-y-4",children:[E.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),e.jsxs("div",{onClick:H,className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${d?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:d,onChange:H,className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx(hr,{className:"h-6 w-6 text-gray-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Add New Card"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay with a new credit or debit card"})]})]}),d&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Vs,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Secure Payment Processing"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Your card details are encrypted and processed securely through SumUp. We never store your full card number or CVV."})]})]})}),e.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(hr,{className:"h-12 w-12 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"SumUp Payment Form"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secure card entry would appear here"})]}),!b.sumup_token&&e.jsx("button",{type:"button",onClick:C,disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Processing..."]}):e.jsx(e.Fragment,{children:"Demo: Enter Card Details"})}),b.sumup_token&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Card details validated"})]})})]})}),e.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"save_card",checked:x,onChange:O=>f(O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),e.jsx("label",{htmlFor:"save_card",className:"text-sm text-gray-700",children:"Save this card for future orders (secure and encrypted)"})]}),q("new_card")&&e.jsx("p",{className:"text-sm text-red-600",children:q("new_card")})]})]})]}),S==="collection"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),e.jsx("div",{onClick:z,className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${l==="cash"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:l==="cash",onChange:z,className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Pay with Cash at Pickup"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay when you collect your order"})]})]})})]}),q("payment_method")&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-600",children:q("payment_method")})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:_,className:"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all",children:" Back"}),e.jsx("button",{type:"button",onClick:R,disabled:L||w||k.isPending||T.totalCents<=0,className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),"Saving..."]}):e.jsx(e.Fragment,{children:"Continue to Review "})})]})]})]}),e.jsx("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Vs,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Secure Payment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your payment information is encrypted and secure. We use industry-standard security measures to protect your data."})]})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden sticky top-8",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Order Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"space-y-3",children:M.map(O=>e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[O.quantity,"x ",O.item_name]}),O.customizations&&O.customizations.length>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O.customizations.map(V=>V.option_name).join(", ")})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 ml-4",children:["",Number(O.line_total||0).toFixed(2)]})]},O.item_id))}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsx(vl,{totals:T,discountCode:y==null?void 0:y.discount_code,hasDiscount:!!(y!=null&&y.discount_code)&&T.discountCents>0,showDeliveryFee:!0,showTax:!0,className:"text-sm"})})]})]})})]})]})})})},I9=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.random()*16|0;return(t==="x"?s:s&3|8).toString(16)}),uy=t=>`${Number(t||0).toFixed(2)}`,z9=t=>{if(!t)return"Not specified";try{return new Date(t).toLocaleString("en-IE",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},B9=()=>{const t=Be(),s="https://123salama-lama-food-truck.launchpulse.ai",r=Z(S=>S.authentication_state.auth_token),n=Z(S=>S.clear_cart),[a,i]=u.useState({order_type:"collection",collection_time_slot:null,delivery_address_snapshot:null,customer_info:{customer_name:"",customer_email:"",customer_phone:""},payment_info:{payment_method_id:"",payment_method_type:"",last_four_digits:"",card_type:""},items:[],special_instructions:""}),[o,l]=u.useState({subtotal:0,discount_code:null,discount_amount:0,delivery_fee:null,tax_amount:0,total_amount:0}),[c,d]=u.useState(!1),[m,x]=u.useState(null),[f]=u.useState(I9()),{data:b,isLoading:h}=ue({queryKey:["cart"],queryFn:async()=>{try{const S={};return r&&typeof r=="string"&&(S.Authorization=`Bearer ${r}`),(await Q.get(`${s}/api/cart`,{headers:S})).data}catch(S){throw console.error("Failed to fetch cart:",S),S}},enabled:!0,staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),p=(b==null?void 0:b.items)||[],v=(b==null?void 0:b.discount_code)||null,g=r?null:On();u.useEffect(()=>{r||On()},[r]),u.useEffect(()=>{const S=sessionStorage.getItem("checkout_order_type"),F=sessionStorage.getItem("checkout_collection_time_slot"),P=sessionStorage.getItem("checkout_delivery_address_data"),I=sessionStorage.getItem("checkout_customer_name"),H=sessionStorage.getItem("checkout_customer_email"),z=sessionStorage.getItem("checkout_customer_phone"),B=sessionStorage.getItem("checkout_payment_method_id"),C=sessionStorage.getItem("checkout_payment_method_type"),R=sessionStorage.getItem("checkout_last_four_digits"),_=sessionStorage.getItem("checkout_card_type"),q=sessionStorage.getItem("checkout_special_instructions");if(!S||!I||!B){t("/checkout/order-type");return}let O=null;if(P)try{O=JSON.parse(P)}catch(V){console.error("Failed to parse delivery address:",V)}i({order_type:S,collection_time_slot:F||null,delivery_address_snapshot:O,customer_info:{customer_name:I||"",customer_email:H||"",customer_phone:z||""},payment_info:{payment_method_id:B||"",payment_method_type:C||"card",last_four_digits:R||"",card_type:_||""},items:p,special_instructions:q||""})},[p,t]);const{data:j,isLoading:y}=ue({queryKey:["calculate-checkout-totals",a.order_type],queryFn:async()=>{const S=sessionStorage.getItem("checkout_delivery_address_id");try{const F={"Content-Type":"application/json"};return r&&typeof r=="string"&&(F.Authorization=`Bearer ${r}`),(await Q.post(`${s}/api/checkout/calculate`,{order_type:a.order_type,delivery_address_id:S||null,discount_code:v},{headers:F})).data}catch(F){throw console.error("Failed to calculate totals:",F),F}},enabled:!!a.order_type,staleTime:1/0,retry:1});u.useEffect(()=>{if(j){const S={subtotal:Number(j.subtotal||0),discount_code:j.discount_code,discount_amount:Number(j.discount_amount||0),delivery_fee:j.delivery_fee!==null?Number(j.delivery_fee):null,tax_amount:Number(j.tax_amount||0),total_amount:Number(j.total_amount||0)};l(S),Di({subtotal:S.subtotal,discountAmount:S.discount_amount,deliveryFee:S.delivery_fee||0,taxAmount:S.tax_amount})}},[j,p,g]);const w=ce({mutationFn:async()=>{const S=sessionStorage.getItem("checkout_delivery_address_id");try{const F={"Content-Type":"application/json"};return r&&typeof r=="string"&&(F.Authorization=`Bearer ${r}`),(await Q.post(`${s}/api/checkout/validate`,{order_type:a.order_type,collection_time_slot:a.collection_time_slot,delivery_address_id:S||null,discount_code:v},{headers:F})).data}catch(F){throw console.error("Order validation failed:",F),F}}}),M=ce({mutationFn:async S=>{try{const F={"Content-Type":"application/json"};return r&&typeof r=="string"&&(F.Authorization=`Bearer ${r}`),(await Q.post(`${s}/api/checkout/order`,S,{headers:F})).data}catch(F){throw console.error("Order placement failed:",F),F}},onSuccess:S=>{n(),localStorage.setItem("lastOrder",JSON.stringify({ticket_number:S.ticket_number,order_id:S.order_id,order_number:S.order_number,created_at:new Date().toISOString()})),sessionStorage.removeItem("checkout_order_type"),sessionStorage.removeItem("checkout_collection_time_slot"),sessionStorage.removeItem("checkout_delivery_address_id"),sessionStorage.removeItem("checkout_delivery_address_data"),sessionStorage.removeItem("checkout_customer_name"),sessionStorage.removeItem("checkout_customer_email"),sessionStorage.removeItem("checkout_customer_phone"),sessionStorage.removeItem("checkout_payment_method_id"),sessionStorage.removeItem("checkout_payment_method_type"),sessionStorage.removeItem("checkout_last_four_digits"),sessionStorage.removeItem("checkout_card_type"),sessionStorage.removeItem("checkout_special_instructions");const F=new URLSearchParams({ticket:S.ticket_number||"",order_number:S.order_number||"",order_type:a.order_type||"",total:String(S.total_amount||0),points:String(S.loyalty_points_awarded||0),status:S.status||"received"});t(`/order-confirmation?${F.toString()}`,{replace:!0})},onError:S=>{var P,I;const F=((I=(P=S.response)==null?void 0:P.data)==null?void 0:I.message)||S.message||"Failed to place order. Please try again.";x(F)}}),T=async()=>{var S;if(x(null),!c){x("Please accept the Terms & Conditions to continue.");return}try{const F=await w.mutateAsync();if(!F.valid){const z=((S=F.errors)==null?void 0:S.map(B=>B.message).join(", "))||"Order validation failed";x(z);return}const P=sessionStorage.getItem("checkout_delivery_address_id"),I=sessionStorage.getItem("checkout_cvv"),H={order_type:a.order_type,collection_time_slot:a.collection_time_slot,delivery_address_id:P||null,discount_code:v,special_instructions:a.special_instructions||null,customer_name:a.customer_info.customer_name,customer_email:a.customer_info.customer_email,customer_phone:a.customer_info.customer_phone,payment_method_id:a.payment_info.payment_method_id,cvv:I||void 0,idempotency_key:f};await M.mutateAsync(H)}catch(F){console.error("Order placement error:",F)}},N=()=>{t("/checkout/order-type")},E=()=>{t("/checkout/contact")},L=()=>{t("/checkout/payment")},k=M.isPending||w.isPending;return h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8 flex items-center justify-center",style:{backgroundColor:"var(--primary-bg)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"h-12 w-12 animate-spin mx-auto mb-4",style:{color:"var(--primary-text)"}}),e.jsx("p",{className:"font-medium",style:{color:"#4A3B32"},children:"Loading your order details..."})]})})}):!h&&p.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8 flex items-center justify-center",style:{backgroundColor:"var(--primary-bg)"},children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(me,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--primary-text)"},children:"Cart is Empty"}),e.jsx("p",{className:"mb-6",style:{color:"#4A3B32"},children:"Your cart is empty. Please add items before proceeding to checkout."}),e.jsx("button",{onClick:()=>t("/menu"),className:"px-6 py-3 font-medium rounded-lg transition-colors duration-200",style:{backgroundColor:"var(--btn-bg)",color:"var(--btn-text)",minHeight:"48px"},children:"Browse Menu"})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8",style:{backgroundColor:"var(--primary-bg)"},children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"#4A3B32"},children:"Checkout Progress"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--primary-text)"},children:"Step 4 of 4"})]}),e.jsx("div",{className:"w-full rounded-full h-2",style:{backgroundColor:"var(--accent-color)"},children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"100%",backgroundColor:"var(--primary-text)"}})})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-2",style:{color:"var(--primary-text)"},children:"Review Your Order"}),e.jsx("p",{style:{color:"#4A3B32"},children:"Please review your order details before completing your purchase"})]}),m&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-600 p-4 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"Order Placement Error"}),e.jsx("p",{className:"text-sm text-red-700",children:m})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:a.order_type==="collection"?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-5 w-5 text-orange-600 mr-2"}),"Collection Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-5 w-5 text-orange-600 mr-2"}),"Delivery Details"]})}),e.jsxs("button",{onClick:N,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Order Type"}),e.jsx("p",{className:"text-base font-medium text-gray-900 capitalize",children:a.order_type})]}),a.order_type==="collection"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Collection Time"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:z9(a.collection_time_slot)})]}),a.order_type==="delivery"&&a.delivery_address_snapshot&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Delivery Address"}),e.jsxs("div",{className:"text-base text-gray-900",children:[e.jsx("p",{className:"font-medium",children:a.delivery_address_snapshot.label}),e.jsx("p",{children:a.delivery_address_snapshot.address_line1}),a.delivery_address_snapshot.address_line2&&e.jsx("p",{children:a.delivery_address_snapshot.address_line2}),e.jsxs("p",{children:[a.delivery_address_snapshot.city,", ",a.delivery_address_snapshot.postal_code]}),a.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",a.delivery_address_snapshot.delivery_instructions]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(cs,{className:"h-5 w-5 text-orange-600 mr-2"}),"Contact Information"]}),e.jsxs("button",{onClick:E,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Name"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.customer_info.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.customer_info.customer_email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.customer_info.customer_phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(hr,{className:"h-5 w-5 text-orange-600 mr-2"}),"Payment Method"]}),e.jsxs("button",{onClick:L,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-3 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Card Type"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.payment_info.card_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ending in"}),e.jsxs("p",{className:"text-base font-medium text-gray-900",children:[" ",a.payment_info.last_four_digits]})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(pt,{className:"h-5 w-5 text-orange-600 mr-2"}),"Order Items (",a.items.length,")"]}),e.jsx("div",{className:"space-y-4",children:a.items.map((S,F)=>e.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:S.item_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",S.quantity]})]}),e.jsx("p",{className:"font-semibold text-gray-900",children:uy(S.line_total)})]}),S.customizations&&S.customizations.length>0&&e.jsxs("div",{className:"mt-2 pl-4 border-l-2 border-orange-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Customizations:"}),S.customizations.map((P,I)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[P.group_name,": ",P.option_name,P.additional_price>0&&e.jsxs("span",{className:"text-orange-600 ml-1",children:["+",uy(P.additional_price)]})]},I))]})]},`${S.item_id}-${F}`))}),a.special_instructions&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Special Instructions:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:a.special_instructions})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),y?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Re,{className:"h-8 w-8 text-orange-600 animate-spin"})}):e.jsx(vl,{totals:Di({subtotal:o.subtotal,discountAmount:o.discount_amount,deliveryFee:o.delivery_fee||0,taxAmount:o.tax_amount}),discountCode:o.discount_code,hasDiscount:!!o.discount_code&&o.discount_amount>0,showDeliveryFee:!0,showTax:!0}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("label",{className:"flex items-start cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:S=>{d(S.target.checked),S.target.checked&&x(null)},className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-2 focus:ring-orange-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:["I agree to the"," ",e.jsx(X,{to:"/terms",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium underline",children:"Terms & Conditions"})," ","and"," ",e.jsx(X,{to:"/privacy",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium underline",children:"Privacy Policy"})]})]})}),e.jsx("button",{onClick:T,disabled:!c||k||y,className:"w-full mt-6 px-6 py-4 rounded-lg font-semibold text-lg focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center",style:{backgroundColor:"var(--btn-bg)",color:"var(--btn-text)",minHeight:"48px"},children:k?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"animate-spin h-5 w-5 mr-2"}),"Processing Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-5 w-5 mr-2"}),"Place Order"]})}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Your payment is secured via SumUp"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(X,{to:"/cart",className:"text-orange-600 hover:text-orange-700 font-medium text-sm inline-flex items-center transition-colors",children:" Back to Cart"})})]})})})},q9=()=>{const[t]=ct(),s=t.get("ticket"),r=t.get("order_number"),n=t.get("order_type"),a=t.get("total"),i=t.get("points"),o=t.get("status")||"received";let l=s,c=r;if(!l)try{const b=localStorage.getItem("lastOrder");if(b){const h=JSON.parse(b);l=l||h.ticket_number,c=c||h.order_number}}catch(b){console.error("Error reading lastOrder from localStorage:",b)}const d=l,m=c||r;if(u.useEffect(()=>{d&&localStorage.setItem("lastOrder",JSON.stringify({ticket_number:d,order_number:m,created_at:new Date().toISOString()}))},[d,m]),!l)return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] pb-20",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-orange-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-[#2C1A16] mb-4",children:"Order Confirmation Not Found"}),e.jsx("p",{className:"text-[#6B5B4F] mb-6",children:"We couldn't find your order confirmation. If you just placed an order, please try again or contact support."}),e.jsx(X,{to:"/menu",className:"inline-block bg-[#D4831D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#C07519] transition-colors",children:"Back to Menu"})]})})});const x=b=>b?`${parseFloat(b).toFixed(2)}`:"0.00",f=`/track/${d}`;return e.jsxs("div",{className:"min-h-screen bg-[#F2EFE9] pb-20",children:[e.jsx("div",{className:"bg-white border-b border-[#D4C5B9]",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx(Oe,{className:"h-10 w-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-[#2C1A16] mb-2",children:"Order Confirmed!"}),e.jsx("p",{className:"text-[#6B5B4F]",children:"Thank you for your order. We're preparing it now."})]})})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-[#6B5B4F] mb-2",children:"Your Order Ticket"}),e.jsx("div",{className:"text-4xl font-bold text-[#D4831D] mb-4 font-mono tracking-wider",children:d}),e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-blue-600 mr-2"}),o.charAt(0).toUpperCase()+o.slice(1)]})]}),m&&e.jsx("div",{className:"mt-4 pt-4 border-t border-[#D4C5B9] text-center",children:e.jsxs("p",{className:"text-xs text-[#6B5B4F]",children:["Order Reference: ",m]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[n==="collection"?e.jsx(Je,{className:"h-6 w-6 text-[#D4831D] mr-3 flex-shrink-0"}):e.jsx(gt,{className:"h-6 w-6 text-[#D4831D] mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2C1A16] mb-1",children:n==="collection"?"Collection Order":"Delivery Order"}),e.jsx("p",{className:"text-[#6B5B4F]",children:n==="collection"?"Your order will be ready for collection. We'll notify you when it's prepared.":"Your order is being prepared for delivery. We'll keep you updated on its progress."})]})]})}),a&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2C1A16] mb-4",children:"Order Summary"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between text-[#2C1A16]",children:[e.jsx("span",{className:"font-medium",children:"Total Amount"}),e.jsx("span",{className:"font-bold text-lg",children:x(a)})]})})]}),i&&parseInt(i)>0&&e.jsx("div",{className:"bg-gradient-to-r from-[#D4831D] to-[#E89B3C] rounded-lg shadow-md p-6 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{className:"h-8 w-8 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Loyalty Points Earned!"}),e.jsxs("p",{className:"text-white/90",children:["You've earned ",e.jsx("span",{className:"font-bold text-xl",children:i})," points with this order"]})]})]})}),e.jsx(X,{to:f,className:"block w-full bg-[#D4831D] text-white text-center py-4 rounded-lg font-semibold hover:bg-[#C07519] transition-colors shadow-md mb-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Track Your Order",e.jsx(Eo,{className:"h-5 w-5 ml-2"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx(X,{to:"/menu",className:"block bg-white border-2 border-[#D4C5B9] text-[#2C1A16] text-center py-3 rounded-lg font-medium hover:bg-[#F2EFE9] transition-colors",children:"Browse Menu"}),e.jsx(X,{to:"/orders",className:"block bg-white border-2 border-[#D4C5B9] text-[#2C1A16] text-center py-3 rounded-lg font-medium hover:bg-[#F2EFE9] transition-colors",children:"Order History"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Save Your Tracking Link"}),e.jsxs("p",{children:["Use your ticket number ",e.jsx("span",{className:"font-mono font-bold",children:d})," to track your order anytime. No login required!"]})]})]})}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2C1A16] mb-4",children:"What happens next?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-[#D4831D] text-white flex items-center justify-center font-semibold mr-3",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#2C1A16]",children:"Order Received"}),e.jsx("p",{className:"text-sm text-[#6B5B4F]",children:"We've received your order and payment"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-300 text-white flex items-center justify-center font-semibold mr-3",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#2C1A16]",children:"Preparing"}),e.jsx("p",{className:"text-sm text-[#6B5B4F]",children:"Our team is preparing your order"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-300 text-white flex items-center justify-center font-semibold mr-3",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#2C1A16]",children:n==="collection"?"Ready for Collection":"Out for Delivery"}),e.jsx("p",{className:"text-sm text-[#6B5B4F]",children:n==="collection"?"We'll notify you when your order is ready":"Your order is on its way to you"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-300 text-white flex items-center justify-center font-semibold mr-3",children:"4"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#2C1A16]",children:"Completed"}),e.jsx("p",{className:"text-sm text-[#6B5B4F]",children:"Enjoy your meal!"})]})]})]})]})]})]})},U9=async t=>{const r=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/track?ticket=${encodeURIComponent(t)}`);if(!r.data.success)throw new Error("Failed to fetch order tracking data");const{success:n,...a}=r.data;if(!a.ticket_number||!a.order_number)throw new Error("Invalid order tracking data received");return a},W9=()=>{const{ticketNumber:t}=Rs(),[s,r]=u.useState(!0),[n,a]=u.useState(new Date),{data:i,isLoading:o,error:l,refetch:c}=ue({queryKey:["order-tracking",t],queryFn:()=>U9(t),enabled:!!t,refetchInterval:g=>{const j=g.state.data;return j&&(j.status==="completed"||j.status==="cancelled")?!1:s?1e4:!1},staleTime:0});if(u.useEffect(()=>{i&&(a(new Date),(i.status==="completed"||i.status==="cancelled")&&r(!1))},[i]),!t)return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-[#2C1A16] mb-4",children:"Tracking Link Invalid"}),e.jsx("p",{className:"text-[#6B5B4F] mb-6",children:"Please use the tracking link from your confirmation screen or go to the Track Order page."}),e.jsxs(X,{to:"/track-order",className:"inline-flex items-center justify-center bg-[#D4831D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#C07519] transition-colors",children:[e.jsx(Ca,{className:"h-5 w-5 mr-2"}),"Track Order"]})]})});if(o)return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ls,{className:"h-12 w-12 text-[#D4831D] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-[#2C1A16] font-medium",children:"Loading order status..."})]})});if(l||!i)return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx(jt,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-[#2C1A16] mb-4",children:"Unable to Load Order"}),e.jsx("p",{className:"text-[#6B5B4F] mb-6",children:l instanceof Error?l.message:"We couldn't find this order. Please check your ticket number."}),e.jsxs("button",{onClick:()=>c(),className:"inline-flex items-center justify-center bg-[#D4831D] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#C07519] transition-colors mb-4 w-full",children:[e.jsx(ls,{className:"h-5 w-5 mr-2"}),"Try Again"]}),e.jsx(X,{to:"/menu",className:"block text-[#2C1A16] hover:text-[#D4831D] font-medium",children:"Back to Menu"})]})});const d=g=>({received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-green-100 text-green-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[g]||"bg-gray-100 text-gray-800",m=g=>({received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled"})[g]||g,x=g=>`${g.toFixed(2)}`,f=g=>new Date(g).toLocaleString("en-IE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=g=>!g||Object.keys(g).length===0?"":Object.entries(g).map(([j,y])=>`${j}: ${y}`).join(", "),h=i.order_type==="collection"?["received","preparing","ready","completed"]:["received","preparing","out_for_delivery","completed"],p=h.indexOf(i.status),v=i.status==="cancelled";return e.jsxs("div",{className:"min-h-screen bg-[#F2EFE9] pb-20",children:[e.jsx("div",{className:"bg-white border-b border-[#D4C5B9]",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#2C1A16]",children:"Track Order"}),e.jsxs("p",{className:"text-[#6B5B4F] mt-1",children:["Ticket: ",e.jsx("span",{className:"font-mono font-semibold text-[#D4831D]",children:i.ticket_number})]})]}),e.jsxs("button",{onClick:()=>{r(!0),c()},disabled:!s&&(i.status==="completed"||i.status==="cancelled"),className:"flex items-center gap-2 px-4 py-2 bg-[#D4C5B9] text-[#2C1A16] rounded-lg hover:bg-[#C4B5A9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ls,{className:`h-5 w-5 ${s?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),s&&e.jsxs("p",{className:"text-xs text-[#6B5B4F] mt-2",children:["Last updated: ",n.toLocaleTimeString(),"  Auto-refreshing every 10 seconds"]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#2C1A16]",children:"Current Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${d(i.status)}`,children:m(i.status)})]}),!v&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex items-center justify-between mb-8",children:h.map((g,j)=>{const y=j<=p,w=j===p;return e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center border-2 transition-all ${y?"bg-[#D4831D] border-[#D4831D] text-white":"bg-white border-[#D4C5B9] text-[#6B5B4F]"} ${w?"ring-4 ring-[#D4831D]/30":""}`,children:y?e.jsx(Oe,{className:"h-6 w-6"}):e.jsx(qw,{className:"h-6 w-6"})}),e.jsx("p",{className:`mt-2 text-xs sm:text-sm text-center ${y?"text-[#2C1A16] font-medium":"text-[#6B5B4F]"}`,children:m(g)})]}),j<h.length-1&&e.jsx("div",{className:`absolute top-5 left-1/2 w-full h-0.5 -z-10 ${j<p?"bg-[#D4831D]":"bg-[#D4C5B9]"}`})]},g)})})}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(jt,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Order Cancelled"}),e.jsx("p",{children:"This order has been cancelled. If you have questions, please contact us."})]})]}),e.jsxs("div",{className:"mt-4 flex items-center text-[#6B5B4F]",children:[i.order_type==="collection"?e.jsx(Je,{className:"h-5 w-5 mr-2"}):e.jsx(gt,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:i.order_type==="collection"?"Collection Order":"Delivery Order"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#2C1A16] mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:i.items.map((g,j)=>e.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-[#D4C5B9] last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-[#2C1A16]",children:g.item_name}),g.selected_customizations&&e.jsx("p",{className:"text-sm text-[#6B5B4F] mt-1",children:b(g.selected_customizations)}),e.jsxs("p",{className:"text-sm text-[#6B5B4F] mt-1",children:["Qty: ",g.quantity]})]}),e.jsx("p",{className:"font-medium text-[#2C1A16]",children:x(g.line_total)})]},j))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#D4C5B9] space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[#6B5B4F]",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:x(i.subtotal)})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",x(i.discount_amount)]})]}),i.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-[#6B5B4F]",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:x(i.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-[#6B5B4F]",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:x(i.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-[#2C1A16] pt-2 border-t border-[#D4C5B9]",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:x(i.total_amount)})]})]})]}),i.status_history.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#2C1A16] mb-4",children:"Order History"}),e.jsx("div",{className:"space-y-3",children:i.status_history.map((g,j)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-[#D4831D]/10 flex items-center justify-center mr-3",children:e.jsx(Ke,{className:"h-4 w-4 text-[#D4831D]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-[#2C1A16]",children:m(g.status)}),e.jsx("p",{className:"text-sm text-[#6B5B4F]",children:f(g.changed_at)})]}),g.notes&&e.jsx("p",{className:"text-sm text-[#6B5B4F] mt-1",children:g.notes})]})]},j))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#2C1A16] mb-4",children:"Need Help?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"tel:+353871234567",className:"flex items-center text-[#2C1A16] hover:text-[#D4831D] transition-colors",children:[e.jsx($t,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"+353 87 123 4567"})]}),e.jsxs("a",{href:"mailto:info@coffeeshop.ie",className:"flex items-center text-[#2C1A16] hover:text-[#D4831D] transition-colors",children:[e.jsx(Nt,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:"info@coffeeshop.ie"})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(X,{to:"/menu",className:"inline-flex items-center text-[#2C1A16] hover:text-[#D4831D] font-medium transition-colors",children:[e.jsx(Ca,{className:"h-5 w-5 mr-2"}),"Back to Menu"]})})]})]})},V9=()=>{const t=Be(),[s]=ct(),r=s.get("ref")||null,n=s.get("redirect_url")||"/menu",a=Z(K=>K.register_user),i=Z(K=>K.authentication_state.authentication_status.is_authenticated),[o,l]=u.useState({email:"",phone:"",password:"",first_name:"",last_name:"",marketing_opt_in:!1,terms_accepted:!1}),[c,d]=u.useState(""),[m,x]=u.useState(!1),[f,b]=u.useState(!1),[h,p]=u.useState(!1),[v,g]=u.useState(null),[j,y]=u.useState(!1),[w,M]=u.useState(null),[T,N]=u.useState(!1),[E,L]=u.useState(!1),k=u.useRef(null),S=u.useRef(null),[F,P]=u.useState({email:null,phone:null,password:null,password_confirmation:null,first_name:null,last_name:null,terms_accepted:null}),[I,H]=u.useState({score:0,feedback:[],isValid:!1});u.useEffect(()=>{i&&t("/dashboard")},[i,t]),u.useEffect(()=>{console.log("Registration error state changed:",{hasError:!!v,errorMessage:v,fieldErrors:F,bannerRefExists:!!k.current})},[v,F]),u.useEffect(()=>{v&&k.current&&(console.log("Error detected - scrolling banner into view"),setTimeout(()=>{k.current?(console.log("Scrolling error banner into view now"),k.current.scrollIntoView({behavior:"smooth",block:"start"}),F.email&&S.current&&setTimeout(()=>{var K;(K=S.current)==null||K.focus()},300)):console.warn("Error banner ref not available after timeout")},100))},[v,F.email]);const z=u.useCallback(K=>{const A=[];let $=0;K.length>=8?$+=1:A.push("At least 8 characters required"),/[a-zA-Z]/.test(K)?$+=1:A.push("Include at least one letter"),/\d/.test(K)?$+=1:A.push("Include at least one number"),/[A-Z]/.test(K)&&/[a-z]/.test(K)&&($+=1),/[!@#$%^&*(),.?":{}|<>]/.test(K)&&($+=1);const re=K.length>=8&&/[a-zA-Z]/.test(K)&&/\d/.test(K);return H({score:$,feedback:A,isValid:re}),re},[]),B=K=>{typeof o[K]=="string"&&o[K]},C=(K,A)=>{if(l($=>({...$,[K]:A})),K in F&&P($=>({...$,[K]:null})),v&&E){const $=v.toLowerCase(),re=K==="email"&&($.includes("email")||$.includes("already registered")),ve=K==="phone"&&$.includes("phone");(re||ve)&&g(null)}K==="password"&&typeof A=="string"&&(z(A),A===c&&F.password_confirmation&&P($=>({...$,password_confirmation:null})))},R=u.useCallback((K,A)=>{let $=null;switch(K){case"email":!A||typeof A!="string"||A.trim()===""?$="Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A)||($="Please enter a valid email address");break;case"phone":!A||typeof A!="string"||A.trim()===""?$="Phone number is required":A.length<10?$="Phone number must be at least 10 digits":A.length>20&&($="Phone number is too long");break;case"password":!A||typeof A!="string"||A.trim()===""?$="Password is required":A.length<8?$="Password must be at least 8 characters":/[a-zA-Z]/.test(A)?/\d/.test(A)||($="Password must contain at least one number"):$="Password must contain at least one letter";break;case"password_confirmation":!A||typeof A!="string"||A.trim()===""?$="Password confirmation is required":A!==o.password&&($="Passwords do not match");break;case"first_name":!A||typeof A!="string"||A.trim()===""?$="First name is required":A.length>100&&($="First name is too long");break;case"last_name":!A||typeof A!="string"||A.trim()===""?$="Last name is required":A.length>100&&($="Last name is too long");break;case"terms_accepted":A||($="You must accept the Terms & Conditions");break}return P(re=>({...re,[K]:$})),$===null},[o.password]),_=K=>{K==="password_confirmation"?R("password_confirmation",c):K in o&&R(K,o[K])},q=u.useCallback(()=>{const K={};return K.email=R("email",o.email),K.phone=R("phone",o.phone),K.password=R("password",o.password),K.password_confirmation=R("password_confirmation",c),K.first_name=R("first_name",o.first_name),K.last_name=R("last_name",o.last_name),K.terms_accepted=R("terms_accepted",o.terms_accepted),Object.values(K).every(Boolean)},[o,c,R]),O=async K=>{var A,$,re,ve,xe,ke,Ce;if(K.preventDefault(),L(!0),g(null),!!q()){p(!0);try{const Pe=await a({email:o.email,phone:o.phone,password:o.password,first_name:o.first_name,last_name:o.last_name,marketing_opt_in:o.marketing_opt_in,referred_by_user_id:r||void 0});M(Pe.first_order_discount_code),y(!0),p(!1)}catch(Pe){console.error("Registration error:",Pe),console.error("Error response:",(A=Pe.response)==null?void 0:A.data);const ne=((re=($=Pe.response)==null?void 0:$.data)==null?void 0:re.message)||Pe.message||"Registration failed. Please try again.",be={...F};if((xe=(ve=Pe.response)==null?void 0:ve.data)!=null&&xe.errors){const W=Pe.response.data.errors;Object.assign(be,W)}const U=(Ce=(ke=Pe.response)==null?void 0:ke.data)==null?void 0:Ce.error_code;U==="EMAIL_ALREADY_EXISTS"&&(be.email="This email address is already registered. Please use a different email or try logging in."),U==="PHONE_ALREADY_EXISTS"&&(be.phone="This phone number is already registered. Please use a different phone number or try logging in."),console.log("Setting error state - Error message:",ne),console.log("Setting error state - Field errors:",be),p(!1),Bi.flushSync(()=>{g(ne),P(be)}),console.log("Error state set - should now be visible"),console.log("Error banner will be scrolled into view by useEffect"),setTimeout(()=>{console.log("Post-error timeout - banner should definitely be visible now"),console.log("Current error:",ne)},150)}}},V=()=>{y(!1),t(n)},D=async()=>{if(w)try{await navigator.clipboard.writeText(w),N(!0),setTimeout(()=>N(!1),2e3)}catch(K){console.error("Failed to copy code:",K)}},G=u.useMemo(()=>I.score===0?"bg-gray-200":I.score<=2?"bg-red-500":I.score===3?"bg-yellow-500":I.score===4?"bg-blue-500":"bg-green-500",[I.score]),se=u.useMemo(()=>`${I.score/5*100}%`,[I.score]),le=u.useMemo(()=>I.score===0?"":I.score<=2?"Weak":I.score===3?"Fair":I.score===4?"Good":"Strong",[I.score]);return e.jsxs(e.Fragment,{children:[j&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"success-modal",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-2xl px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 mb-6 animate-bounce",children:e.jsx(ES,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to Salama Lama!"}),e.jsxs("p",{className:"text-lg text-gray-600 mb-6",children:["Hi ",o.first_name,"! Your account has been created successfully."]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx(Ti,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("p",{className:"text-sm font-semibold text-orange-900 uppercase tracking-wide",children:"Your First Order Discount"})]}),e.jsx("div",{className:"bg-white rounded-lg px-6 py-4 mb-4",children:e.jsx("p",{className:"text-4xl font-bold text-orange-600 tracking-wider font-mono",children:w})}),e.jsx("button",{onClick:D,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:T?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(W0,{className:"h-4 w-4 mr-2"}),"Copy Code"]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Bonus:"})," You've been automatically enrolled in our loyalty program! Start earning points with every order."]})}),e.jsx("button",{onClick:V,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 rounded-xl text-lg font-semibold hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200 transform hover:scale-105",children:"Start Ordering"})]})})]})}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Join Salama Lama and start earning rewards!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-8 sm:px-8",children:[r&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ti,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"You've been referred by a friend! You'll both earn bonus rewards."})]})}),v&&e.jsx("div",{ref:k,className:"mb-6 bg-red-50 border-4 border-red-400 rounded-lg p-5 shadow-lg",role:"alert","aria-live":"assertive","aria-atomic":"true","data-testid":"registration-error-banner",id:"registration-error-banner",style:{opacity:"1",visibility:"visible",display:"block",position:"relative",zIndex:9999,minHeight:"60px",backgroundColor:"#FEF2F2",borderColor:"#F87171",borderWidth:"4px",padding:"1.25rem"},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ae,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-red-900 mb-1",children:"Registration Failed"}),e.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:v}),v.toLowerCase().includes("already registered")&&e.jsxs("p",{className:"text-sm text-red-700 mt-2",children:["Already have an account?"," ",e.jsx(X,{to:"/login",className:"font-bold underline hover:text-red-900 transition-colors",children:"Sign in here"})]})]})]})},`error-${v}`),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,value:o.first_name,onChange:K=>{C("first_name",K.target.value)},onFocus:K=>{B("first_name"),K.target.select()},onBlur:()=>_("first_name"),className:`block w-full px-4 py-3 border ${F.first_name?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"John"}),F.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.first_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,value:o.last_name,onChange:K=>{C("last_name",K.target.value)},onFocus:K=>{B("last_name"),K.target.select()},onBlur:()=>_("last_name"),className:`block w-full px-4 py-3 border ${F.last_name?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"Smith"}),F.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.last_name})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:S,id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:K=>{C("email",K.target.value)},onFocus:K=>{B("email"),K.target.select()},onBlur:()=>_("email"),className:`block w-full px-4 py-3 border-2 ${F.email?"border-red-600 bg-red-50 ring-4 ring-red-200 text-red-900":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 ${F.email?"focus:ring-red-200 focus:border-red-600":"focus:ring-orange-100 focus:border-orange-500"} transition-all`,placeholder:"you@example.com","aria-invalid":F.email?"true":"false","aria-describedby":F.email?"email-error":void 0}),F.email&&e.jsxs("p",{id:"email-error",className:"mt-2 text-sm font-bold text-red-800 flex items-start bg-red-100 p-2 rounded border-l-4 border-red-600",role:"alert",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-red-600"}),e.jsx("span",{children:F.email})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:o.phone,onChange:K=>{C("phone",K.target.value)},onFocus:K=>{B("phone"),K.target.select()},onBlur:()=>_("phone"),className:`block w-full px-4 py-3 border-2 ${F.phone?"border-red-600 bg-red-50 ring-4 ring-red-200 text-red-900":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 ${F.phone?"focus:ring-red-200 focus:border-red-600":"focus:ring-orange-100 focus:border-orange-500"} transition-all`,placeholder:"+353 1 234 5678"}),F.phone&&e.jsxs("p",{className:"mt-2 text-sm font-bold text-red-800 flex items-start bg-red-100 p-2 rounded border-l-4 border-red-600",role:"alert",children:[e.jsx(Ae,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-red-600"}),e.jsx("span",{children:F.phone})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:m?"text":"password",autoComplete:"new-password",required:!0,value:o.password,onChange:K=>{C("password",K.target.value)},onFocus:K=>{B("password"),K.target.select()},onBlur:()=>_("password"),className:`block w-full px-4 py-3 pr-12 border ${F.password?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:""}),e.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700",children:m?e.jsx(pr,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]}),F.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.password}),o.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-xs font-medium ${I.score<=2?"text-red-600":I.score===3?"text-yellow-600":I.score===4?"text-blue-600":"text-green-600"}`,children:le})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${G}`,style:{width:se}})}),I.feedback.length>0&&e.jsx("ul",{className:"mt-2 space-y-1",children:I.feedback.map((K,A)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-center",children:[e.jsx(Ae,{className:"h-3 w-3 text-red-500 mr-1"}),K]},A))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:f?"text":"password",autoComplete:"new-password",required:!0,value:c,onChange:K=>{const A=K.target.value;d(A),P($=>({...$,password_confirmation:null})),A===o.password&&P($=>({...$,password_confirmation:null}))},onFocus:K=>{K.target.select()},onBlur:()=>_("password_confirmation"),className:`block w-full px-4 py-3 pr-12 border ${F.password_confirmation?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:""}),e.jsx("button",{type:"button",onClick:()=>b(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700",children:f?e.jsx(pr,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]}),F.password_confirmation&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.password_confirmation})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"marketing_opt_in",name:"marketing_opt_in",type:"checkbox",checked:o.marketing_opt_in,onChange:K=>{C("marketing_opt_in",K.target.checked)},className:"mt-1 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"marketing_opt_in",className:"ml-2 block text-sm text-gray-700",children:"I'd like to receive marketing emails and offers"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"terms_accepted",name:"terms_accepted",type:"checkbox",required:!0,checked:o.terms_accepted,onChange:K=>{C("terms_accepted",K.target.checked)},onBlur:()=>_("terms_accepted"),className:`mt-1 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded ${F.terms_accepted?"border-red-300":""}`}),e.jsxs("label",{htmlFor:"terms_accepted",className:"ml-2 block text-sm text-gray-700",children:["I agree to the"," ",e.jsx(X,{to:"/terms",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Terms & Conditions"})," ","and"," ",e.jsx(X,{to:"/privacy",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Privacy Policy"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),F.terms_accepted&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:F.terms_accepted}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 rounded-xl text-lg font-semibold hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:h?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating your account..."]}):"Create Account"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(X,{to:"/login",className:"text-orange-600 hover:text-orange-700 font-semibold",children:"Sign in"})]})})]})]})})]})},H9=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(""),[a,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState(null),m=Z(k=>k.authentication_state.authentication_status.is_loading),x=Z(k=>k.authentication_state.error_message),f=Z(k=>k.login_user),b=Z(k=>k.clear_auth_error),h=Z(k=>k.authentication_state.authentication_status.is_authenticated),p=Be(),v=js(),g=new URLSearchParams(v.search),j=g.get(Dw)||g.get("redirect");u.useEffect(()=>{h&&p(j||"/dashboard",{replace:!0})},[h,j,p]),u.useEffect(()=>{(t||r)&&(d(null),b())},[t,r,b]);const y=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),w=()=>t.trim()?y(t)?r?r.length<8?(d("Password must be at least 8 characters"),!1):!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email address is required"),!1),M=async k=>{if(k.preventDefault(),d(null),b(),!!w())try{await f(t,r,a)}catch(S){console.error("Login error:",S)}},T=()=>{t&&!y(t)&&d("Please enter a valid email address")},N=()=>{l(!o)},E=()=>{sessionStorage.setItem("checkout_mode","guest"),p(j||Lw,{replace:!0})},L=x||c;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center py-6 sm:py-12 px-4 sm:px-6 lg:px-10",style:{backgroundColor:"var(--primary-bg)"},children:e.jsxs("div",{className:"max-w-md w-full space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold leading-tight",style:{color:"var(--primary-text)"},children:"Sign in to your account"}),e.jsx("p",{className:"mt-2 text-base sm:text-lg",style:{color:"#4A3B32"},children:"Welcome back to Salama Lama"})]}),e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden border-2",style:{borderColor:"var(--border-light)",boxShadow:"var(--shadow-lg)"},children:[e.jsxs("div",{className:"p-6 sm:p-8",children:[L&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",role:"alert","aria-live":"polite",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 font-medium",children:L})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:k=>s(k.target.value),onBlur:T,disabled:m,placeholder:"your.email@example.com",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400","aria-describedby":L?"error-message":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:k=>n(k.target.value),disabled:m,placeholder:"Enter your password",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400 pr-12","aria-describedby":L?"error-message":void 0}),e.jsx("button",{type:"button",onClick:N,disabled:m,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1 disabled:opacity-50","aria-label":o?"Hide password":"Show password",children:o?e.jsx(pr,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",checked:a,onChange:k=>i(k.target.checked),disabled:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-700 cursor-pointer select-none",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(X,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",children:"Forgot password?"})})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(NS,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Sign In"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),e.jsxs("button",{type:"button",onClick:E,disabled:m,className:"w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium text-blue-600 bg-white border border-blue-600 hover:bg-blue-50 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Continue as guest without signing in",children:[e.jsx(pt,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Continue as Guest"})]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(X,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",children:"Sign up"})," ","  or"," ",e.jsx("button",{onClick:E,className:"font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",children:"continue as a guest"})]})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-500 leading-relaxed",children:["By signing in, you agree to our"," ",e.jsx(X,{to:"/terms",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Terms of Service"})," ","and"," ",e.jsx(X,{to:"/privacy",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Privacy Policy"})]})]})})})},Q9=async t=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/password-reset-request",{email:t},{headers:{"Content-Type":"application/json"}})).data,K9=()=>{var d,m;const[t,s]=u.useState(""),[r,n]=u.useState(!1),a=ce({mutationFn:Q9,onSuccess:()=>{n(!0)},onError:x=>{console.error("Password reset request error:",x)}}),i=a.isPending,o=a.error?((m=(d=a.error.response)==null?void 0:d.data)==null?void 0:m.message)||a.error.message||"Failed to send reset link. Please try again.":null,l=async x=>{x.preventDefault(),a.reset(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&a.mutate(t)},c=x=>{s(x.target.value),a.error&&a.reset()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[r?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg shadow-gray-200/50 p-8 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(Oe,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Check Your Email"}),e.jsxs("p",{className:"text-base text-gray-600 leading-relaxed",children:["If an account exists for ",e.jsx("span",{className:"font-medium text-gray-900",children:t}),", you'll receive a password reset link shortly."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"The reset link will expire in 1 hour for security reasons."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Check your email inbox (and spam folder)"}),e.jsx("li",{children:"Click the reset link in the email"}),e.jsx("li",{children:"Create a new password"})]})]})]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs(X,{to:"/login",className:"inline-flex items-center justify-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:[e.jsx(Ft,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Login"})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg shadow-gray-200/50 p-8 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:e.jsx(Nt,{className:"h-10 w-10 text-blue-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Forgot Password?"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No worries! Enter your email and we'll send you a reset link."})]}),o&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md px-4 py-3 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:o})]})]}),e.jsxs("form",{onSubmit:l,className:"space-y-6",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:c,disabled:i,placeholder:"you@example.com",className:`w-full px-4 py-3 rounded-lg border-2 border-gray-200 placeholder-gray-400 text-gray-900 
                             focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100
                             disabled:bg-gray-50 disabled:cursor-not-allowed
                             transition-all duration-200`,"aria-required":"true","aria-invalid":o?"true":"false","aria-describedby":o?"email-error":void 0}),o&&e.jsx("p",{id:"email-error",className:"sr-only",children:o})]}),e.jsx("button",{type:"submit",disabled:i||!t.trim(),className:`w-full px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 
                           focus:outline-none focus:ring-4 focus:ring-blue-100
                           disabled:bg-gray-300 disabled:cursor-not-allowed
                           transition-all duration-200 shadow-lg hover:shadow-xl
                           flex items-center justify-center space-x-2`,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Sending..."})]}):e.jsx("span",{children:"Send Reset Link"})})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs(X,{to:"/login",className:"inline-flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200 text-sm",children:[e.jsx(Ft,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Login"})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Remember your password?"," ",e.jsx(X,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"Sign in here"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Need additional help?"," ",e.jsx(X,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"Contact Support"})]})})]})})})},Y9=async t=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/password-reset",t,{headers:{"Content-Type":"application/json"}})).data,G9=()=>{const{token:t}=Rs(),s=Be(),[r,n]=u.useState(""),[a,i]=u.useState(""),[o,l]=u.useState(""),[c,d]=u.useState(!1),[m,x]=u.useState(!1),[f,b]=u.useState(!1),[h,p]=u.useState(null),[v,g]=u.useState(null),[j,y]=u.useState(5);u.useEffect(()=>{t?(n(t),p(null)):p("Invalid reset link. No token provided.")},[t]);const w=u.useMemo(()=>{const S=a.length>=8,F=/[a-zA-Z]/.test(a),P=/[0-9]/.test(a),I=[{met:S,text:"At least 8 characters"},{met:F,text:"Contains at least one letter"},{met:P,text:"Contains at least one number"}],H=I.filter(C=>C.met).length,z=H===I.length;let B="weak";return H===3&&a.length>=12?B="strong":H>=2&&(B="medium"),{is_valid:z,strength:B,requirements:I}},[a]),M=()=>{g(o&&a!==o?"Passwords do not match":null)},T=ce({mutationFn:Y9,onSuccess:()=>{b(!0),p(null);const S=setInterval(()=>{y(F=>F<=1?(clearInterval(S),s("/login"),0):F-1)},1e3)},onError:S=>{var P,I;const F=((I=(P=S.response)==null?void 0:P.data)==null?void 0:I.message)||S.message||"Failed to reset password";p(F),b(!1)}}),N=S=>{if(S.preventDefault(),p(null),g(null),!r){p("Invalid reset link. Please request a new password reset.");return}if(!w.is_valid){p("Please meet all password requirements");return}if(a!==o){g("Passwords do not match");return}T.mutate({reset_token:r,new_password:a})},E=()=>{s("/login")},L=()=>w.strength==="strong"?"bg-green-500":w.strength==="medium"?"bg-yellow-500":"bg-red-500",k=()=>w.strength==="strong"?"w-full":w.strength==="medium"?"w-2/3":"w-1/3";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full",children:f?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been successfully reset. You can now log in with your new password."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["Redirecting to login in ",e.jsx("strong",{children:j})," seconds..."]})}),e.jsx("button",{onClick:E,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-100",children:"Continue to Login"}),e.jsx(X,{to:"/",className:"block text-sm text-gray-600 hover:text-gray-900",children:"Back to Home"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-800",children:h}),h.toLowerCase().includes("expired")&&e.jsx(X,{to:"/forgot-password",className:"text-sm text-red-700 underline hover:text-red-800 mt-2 inline-block",children:"Request a new reset link"})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new_password",name:"new_password",type:c?"text":"password",required:!0,value:a,onChange:S=>{i(S.target.value),p(null)},placeholder:"Enter new password",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?e.jsx(pr,{className:"w-5 h-5"}):e.jsx(Ps,{className:"w-5 h-5"})})]}),a&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-xs font-semibold ${w.strength==="strong"?"text-green-600":w.strength==="medium"?"text-yellow-600":"text-red-600"}`,children:w.strength.toUpperCase()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${L()} ${k()} transition-all duration-300`})})]})]}),a&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Password requirements:"}),w.requirements.map((S,F)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[S.met?e.jsx(Ge,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):e.jsx(Ae,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${S.met?"text-green-700":"text-gray-600"}`,children:S.text})]},F))]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",name:"confirm_password",type:m?"text":"password",required:!0,value:o,onChange:S=>{l(S.target.value),g(null)},onBlur:M,placeholder:"Confirm new password",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?e.jsx(pr,{className:"w-5 h-5"}):e.jsx(Ps,{className:"w-5 h-5"})})]}),v&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:v})]})]}),e.jsx("button",{type:"submit",disabled:T.isPending||!r||!w.is_valid||a!==o||!a||!o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:T.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Resetting Password..."})]}):e.jsx("span",{children:"Reset Password"})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(X,{to:"/login",className:"block text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Back to Login"}),e.jsx(X,{to:"/",className:"block text-sm text-gray-600 hover:text-gray-900",children:"Return to Home"})]})]})})})})},X9=()=>{const{token:t}=Rs(),s=Be(),[r,n]=u.useState({status:"pending",message:"Verifying your email address..."}),a=Z(h=>h.authentication_state.current_user),i=Z(h=>h.authentication_state.auth_token),o=Z(h=>h.update_auth_user),l=Z(h=>h.authentication_state.authentication_status.is_authenticated),c="https://123salama-lama-food-truck.launchpulse.ai",d=ce({mutationFn:async h=>(await Q.post(`${c}/api/auth/verify-email`,h,{headers:{"Content-Type":"application/json"}})).data,onSuccess:h=>{n({status:"success",message:h.message||"Your email has been verified successfully!"}),h.user&&a&&o({email_verified:!0})},onError:h=>{var v,g;const p=((g=(v=h.response)==null?void 0:v.data)==null?void 0:g.message)||h.message||"Verification failed. The link may be invalid or expired.";n({status:"failed",message:p})}}),m=ce({mutationFn:async()=>(await Q.post(`${c}/api/auth/resend-verification`,{},{headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}}})).data,onSuccess:h=>{n({status:"pending",message:h.message||"New verification email sent! Please check your inbox."})},onError:h=>{var v,g;const p=((g=(v=h.response)==null?void 0:v.data)==null?void 0:g.message)||h.message||"Failed to resend verification email. Please try again.";n({status:"failed",message:p})}});u.useEffect(()=>{t?d.mutate({verification_token:t}):n({status:"failed",message:"Invalid verification link. No token provided."})},[t]);const x=()=>{m.mutate()},f=()=>{s("/dashboard")},b=()=>{s("/login")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 px-6 py-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-4 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Email Verification"}),e.jsx("p",{className:"text-orange-50 text-sm",children:"Confirming your email address"})]}),e.jsxs("div",{className:"px-6 py-8",children:[r.status==="pending"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6",children:e.jsxs("svg",{className:"animate-spin h-16 w-16 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Verifying Your Email"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:r.message}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-700 text-sm",children:"Please wait while we confirm your email address..."})})]}),r.status==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Email Verified Successfully!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:r.message}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-green-700 text-sm",children:[" Your email address has been confirmed",e.jsx("br",{}),"You can now enjoy all features of your Salama Lama account!"]})}),e.jsxs("div",{className:"space-y-3",children:[l?e.jsx("button",{onClick:f,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Continue to Dashboard"}):e.jsx("button",{onClick:b,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Sign In to Your Account"}),e.jsx(X,{to:"/",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Back to Home"})]})]}),r.status==="failed"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:r.message}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-red-700 text-sm font-medium mb-2",children:"Common reasons for failure:"}),e.jsxs("ul",{className:"text-red-600 text-sm text-left space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"The verification link has expired (24 hours)"}),e.jsx("li",{children:"The link has already been used"}),e.jsx("li",{children:"The link is invalid or corrupted"}),e.jsx("li",{children:"Your email has already been verified"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:x,disabled:m.isPending,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-orange-100",children:m.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending New Email..."]}):"Resend Verification Email"}),e.jsx(X,{to:"/login",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Sign In Instead"}),e.jsx(X,{to:"/",className:"block w-full text-gray-600 hover:text-gray-900 px-6 py-2 rounded-lg font-medium transition-colors text-center text-sm",children:"Back to Home"})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Need help?"," ",e.jsx("a",{href:"mailto:support@salamalama.ie",className:"text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"Contact Support"})]})})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Verification links expire after 24 hours for security."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Check your spam folder if you don't see the email."})]})]})})})},Vn="https://123salama-lama-food-truck.launchpulse.ai",J9=t=>{const s=[500,1e3,2500,5e3];for(const n of s)if(t<n)return n-t;return Math.ceil(t/5e3)*5e3-t},Z9=t=>{const s=[{name:"Bronze Reward",points:500},{name:"Silver Reward",points:1e3},{name:"Gold Reward",points:2500},{name:"Platinum Reward",points:5e3}];for(const n of s)if(t<n.points)return{name:n.name,points_required:n.points,points_remaining:n.points-t};const r=Math.ceil(t/5e3)*5e3;return{name:"Elite Reward",points_required:r,points_remaining:r-t}},my=t=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(t),Sh=t=>{const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric"}).format(s)},xy=t=>{const s=new Date(t),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return a<60?`${a} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:o<7?`${o} day${o>1?"s":""} ago`:Sh(t)},hy=t=>({received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-green-100 text-green-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",py=t=>({received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled"})[t]||t,eT=(t,s)=>`${t.charAt(0)}${s.charAt(0)}`.toUpperCase(),tT=()=>{var R;const t=Z(_=>_.authentication_state.current_user),s=Z(_=>_.authentication_state.auth_token),r=Z(_=>_.add_to_cart),[n,a]=u.useState(null),[i,o]=u.useState(null),[l,c]=u.useState(null),{data:d,isLoading:m,error:x,refetch:f}=ue({queryKey:["dashboard-profile",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/profile`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1}),{data:b,isLoading:h,error:p,refetch:v}=ue({queryKey:["loyalty-account",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/loyalty`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1,select:_=>({loyalty_account_id:_.loyalty_account_id,current_points_balance:Number(_.current_points_balance||0),total_points_earned:Number(_.total_points_earned||0),referral_count:Number(_.referral_count||0),next_milestone:Z9(Number(_.current_points_balance||0))})}),{data:g,isLoading:j,error:y,refetch:w}=ue({queryKey:["recent-orders",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/orders`,{headers:{Authorization:`Bearer ${s}`},params:{limit:5,sort_by:"created_at",sort_order:"desc"}})).data,enabled:!!s&&!!t,staleTime:2*60*1e3,retry:1,select:_=>({orders:_.orders.map(q=>({order_id:q.order_id,order_number:q.order_number,order_type:q.order_type,status:q.status,total_amount:Number(q.total_amount||0),created_at:q.created_at})),total:_.total})}),{data:M,isLoading:T,error:N,refetch:E}=ue({queryKey:["active-orders",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/orders`,{headers:{Authorization:`Bearer ${s}`},params:{status:"received,preparing,ready,out_for_delivery",limit:10,sort_by:"created_at",sort_order:"desc"}})).data,enabled:!!s&&!!t,staleTime:1*60*1e3,refetchInterval:3e4,retry:1,select:_=>({orders:_.orders.map(q=>({order_id:q.order_id,order_number:q.order_number,status:q.status,collection_time_slot:q.collection_time_slot,estimated_delivery_time:q.estimated_delivery_time}))})}),{data:L}=ue({queryKey:["points-history",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/loyalty/points/history`,{headers:{Authorization:`Bearer ${s}`},params:{limit:5}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1,select:_=>({transactions:_.transactions.map(q=>({transaction_id:q.transaction_id,transaction_type:q.transaction_type,points_amount:Number(q.points_amount||0),created_at:q.created_at,reason:q.reason}))})}),{data:k}=ue({queryKey:["earned-badges",t==null?void 0:t.user_id],queryFn:async()=>(await Q.get(`${Vn}/api/loyalty/badges`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:10*60*1e3,retry:1,select:_=>(_.earned||[]).sort((O,V)=>new Date(V.earned_at).getTime()-new Date(O.earned_at).getTime()).slice(0,3)}),S=t,F={total_orders:(g==null?void 0:g.total)||0,total_spent:((R=d==null?void 0:d.stats)==null?void 0:R.total_spent)||0,current_points_balance:(b==null?void 0:b.current_points_balance)||0,next_reward_points_needed:J9((b==null?void 0:b.current_points_balance)||0)},P={current_points_balance:(b==null?void 0:b.current_points_balance)||0,total_points_earned:(b==null?void 0:b.total_points_earned)||0,next_milestone:(b==null?void 0:b.next_milestone)||null,recent_badges:k||[]},I=(g==null?void 0:g.orders)||[],H=(M==null?void 0:M.orders)||[],z=m||h||j||T,B=P.next_milestone?(P.next_milestone.points_required-P.next_milestone.points_remaining)/P.next_milestone.points_required*100:100,C=async _=>{var q,O;a(_),o(null),c(null);try{const D=(await Q.get(`${Vn}/api/orders/${_}`,{headers:{Authorization:`Bearer ${s}`}})).data;if(D.items&&D.items.length>0){for(const G of D.items){const se={item_id:G.item_id,item_name:G.item_name,quantity:Number(G.quantity||1),unit_price:Number(G.unit_price||0),customizations:G.selected_customizations?Object.entries(G.selected_customizations).map(([le,K])=>({group_name:le,option_name:typeof K=="string"?K:K.name,additional_price:typeof K=="object"&&K.price?Number(K.price):0})):[],line_total:Number(G.line_total||0)};r(se)}c(`${D.items.length} item(s) added to cart!`),setTimeout(()=>{c(null)},3e3)}else o("No items found in this order")}catch(V){console.error("Reorder error:",V),o(((O=(q=V.response)==null?void 0:q.data)==null?void 0:O.message)||"Failed to add items to cart")}finally{a(null)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[z&&e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading your dashboard..."})]})}),!z&&(x||p||y||N)&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-6 w-6 text-red-500 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:(x==null?void 0:x.message)||(p==null?void 0:p.message)||(y==null?void 0:y.message)||(N==null?void 0:N.message)||"Failed to load dashboard data"}),e.jsxs("button",{onClick:()=>{f(),v(),w(),E()},className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx("span",{children:"Retry"})]})]})]})}),!z&&S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[S.profile_photo_url?e.jsx("img",{src:S.profile_photo_url,alt:`${S.first_name} ${S.last_name}`,className:"h-16 w-16 rounded-full object-cover border-4 border-blue-500"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold",children:eT(S.first_name,S.last_name)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",S.first_name,"! "]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("p",{className:"text-gray-600",children:S.email}),S.email_verified&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Verified"]})]})]})]})})}),!S.email_verified&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-yellow-500 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Email Verification Required"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Please verify your email address to access all features and receive important updates about your orders."}),e.jsxs(X,{to:"/profile",className:"inline-flex items-center text-yellow-800 hover:text-yellow-900 font-semibold text-sm",children:["Verify Email",e.jsx(We,{className:"h-4 w-4 ml-1"})]})]})]})}),l&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-500 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:l}),e.jsxs(X,{to:"/cart",className:"ml-auto text-green-700 hover:text-green-900 font-semibold flex items-center",children:["View Cart",e.jsx(We,{className:"h-4 w-4 ml-1"})]})]})}),i&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-5 w-5 text-red-500 mr-3"}),e.jsx("p",{className:"text-red-800 font-medium",children:i}),e.jsx("button",{onClick:()=>o(null),className:"ml-auto text-red-700 hover:text-red-900",children:"Dismiss"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:F.total_orders})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Jt,{className:"h-6 w-6 text-green-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spent"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:my(F.total_spent)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-200 cursor-pointer",onClick:()=>window.location.href="/rewards",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur",children:e.jsx(ka,{className:"h-6 w-6 text-white"})})}),e.jsx("p",{className:"text-sm text-white/90 mb-1",children:"Loyalty Points"}),e.jsx("p",{className:"text-4xl font-bold text-white",children:P.current_points_balance}),e.jsxs("p",{className:"text-xs text-white/80 mt-1",children:[F.next_reward_points_needed," more to next reward"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:e.jsxs(X,{to:"/menu",className:"flex flex-col h-full items-center justify-center text-center group",children:[e.jsx("div",{className:"p-4 bg-blue-100 rounded-full mb-3 group-hover:bg-blue-200 transition-colors",children:e.jsx(ps,{className:"h-8 w-8 text-blue-600"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:"Order Now"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Browse our menu"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Hc,{className:"h-6 w-6 text-yellow-500 mr-2"}),"Loyalty Progress"]}),e.jsxs(X,{to:"/rewards",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View All Rewards",e.jsx(We,{className:"h-4 w-4 ml-1"})]})]}),P.next_milestone&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Progress to ",P.next_milestone.name]}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[Math.round(B),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(B,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Only ",P.next_milestone.points_remaining," more points needed!"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:P.current_points_balance})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Earned"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.total_points_earned})]})]}),P.recent_badges.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Achievements"}),e.jsx("div",{className:"flex space-x-3",children:P.recent_badges.map(_=>e.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-lg p-3 text-center hover:scale-105 transition-transform",title:`${_.name} - Earned ${xy(_.earned_at)}`,children:[_.icon_url?e.jsx("img",{src:_.icon_url,alt:_.name,className:"h-10 w-10 mx-auto mb-1"}):e.jsx(Ti,{className:"h-10 w-10 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 truncate max-w-[60px]",children:_.name})]},_.badge_id))})]}),(L==null?void 0:L.transactions)&&L.transactions.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:L.transactions.slice(0,3).map(_=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[_.transaction_type==="earned"?e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}):e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:_.transaction_type==="earned"?"Earned":"Redeemed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`font-semibold ${_.transaction_type==="earned"?"text-green-600":"text-blue-600"}`,children:[_.transaction_type==="earned"?"+":"-",Math.abs(_.points_amount)]}),e.jsx("span",{className:"text-gray-500 text-xs",children:xy(_.created_at)})]})]},_.transaction_id))})]})]}),H.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Ke,{className:"h-6 w-6 text-blue-600 mr-2"}),"Active Orders"]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:[H.length," in progress"]})]}),e.jsx("div",{className:"space-y-4",children:H.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded",children:_.collection_time_slot?e.jsx(gt,{className:"h-5 w-5 text-blue-600"}):e.jsx(zr,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:_.order_number}),e.jsx("p",{className:"text-xs text-gray-600",children:_.collection_time_slot?`Collection: ${Sh(_.collection_time_slot)}`:`Delivery: ${_.estimated_delivery_time||"Processing"}`})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${hy(_.status)}`,children:py(_.status)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{to:`/orders/${_.order_id}/track`,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-center text-sm font-medium",children:"Track Order"}),e.jsx(X,{to:`/orders/${_.order_id}`,className:"flex-1 bg-gray-100 text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors text-center text-sm font-medium",children:"View Details"})]})]},_.order_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Je,{className:"h-6 w-6 text-gray-600 mr-2"}),"Recent Orders"]}),e.jsxs(X,{to:"/orders",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View All Orders",e.jsx(We,{className:"h-4 w-4 ml-1"})]})]}),I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet"}),e.jsxs(X,{to:"/menu",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Browse Menu",e.jsx(We,{className:"h-4 w-4 ml-2"})]})]}):e.jsx("div",{className:"space-y-4",children:I.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:_.order_number}),e.jsx("p",{className:"text-sm text-gray-600",children:Sh(_.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-gray-900",children:my(_.total_amount)}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${hy(_.status)}`,children:py(_.status)})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{to:`/orders/${_.order_id}`,className:"flex-1 bg-gray-100 text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors text-center text-sm font-medium",children:"View Details"}),e.jsx("button",{onClick:()=>C(_.order_id),disabled:n===_.order_id,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-center text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:n===_.order_id?e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Reorder"]})})]})]},_.order_id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(X,{to:"/menu",className:"flex items-center justify-between bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(ps,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Order Now"})]}),e.jsx(We,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600"})]}),e.jsxs(X,{to:"/orders",className:"flex items-center justify-between bg-gray-50 hover:bg-gray-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"My Orders"})]}),e.jsx(We,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]}),e.jsxs(X,{to:"/rewards",className:"flex items-center justify-between bg-orange-50 hover:bg-orange-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-600 rounded-lg",children:e.jsx(ka,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"My Rewards"})]}),e.jsx(We,{className:"h-5 w-5 text-gray-400 group-hover:text-orange-600"})]}),e.jsxs(X,{to:"/profile",className:"flex items-center justify-between bg-gray-50 hover:bg-gray-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(cs,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Edit Profile"})]}),e.jsx(We,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Account"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Member Since"}),e.jsx("span",{className:"font-semibold",children:new Date().getFullYear()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Total Orders"}),e.jsx("span",{className:"font-semibold",children:F.total_orders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Loyalty Points"}),e.jsx("span",{className:"font-semibold",children:P.current_points_balance})]})]})]})]})]})]})]})})})},Ul="https://123salama-lama-food-truck.launchpulse.ai",sT=async t=>(await Q.get(`${Ul}/api/profile`,{headers:{Authorization:`Bearer ${t}`}})).data,rT=async(t,s)=>(await Q.put(`${Ul}/api/profile`,t,{headers:{Authorization:`Bearer ${s}`}})).data,nT=async(t,s)=>(await Q.put(`${Ul}/api/profile/password`,t,{headers:{Authorization:`Bearer ${s}`}})).data,aT=async(t,s)=>(await Q.delete(`${Ul}/api/profile`,{data:{password:t},headers:{Authorization:`Bearer ${s}`}})).data,iT=async t=>(await Q.post(`${Ul}/api/auth/resend-verification`,{},{headers:{Authorization:`Bearer ${t}`}})).data,oT=()=>{const t=Be(),[s,r]=ct(),n=Ue(),a=Z(A=>A.authentication_state.current_user),i=Z(A=>A.authentication_state.auth_token),o=Z(A=>A.update_auth_user),l=Z(A=>A.logout_user),[c,d]=u.useState(s.get("section")||"personal"),[m,x]=u.useState({first_name:"",last_name:"",phone:"",dietary_preferences:null,marketing_opt_in:!1,order_notifications_email:!0,order_notifications_sms:!1,marketing_emails:!1,marketing_sms:!1}),[f,b]=u.useState({current_password:"",new_password:"",confirm_password:""}),[h,p]=u.useState(!1),[v,g]=u.useState(!1),[j,y]=u.useState(!1),[w,M]=u.useState({}),[T,N]=u.useState(null),[E,L]=u.useState(!1),[k,S]=u.useState(""),F=["vegan","vegetarian","gluten-free","halal","dairy-free","nut-free"],{data:P,isLoading:I}=ue({queryKey:["userProfile"],queryFn:()=>sT(i||""),enabled:!!i,staleTime:6e4}),H=ce({mutationFn:A=>rT(A,i||""),onSuccess:A=>{o(A),n.invalidateQueries({queryKey:["userProfile"]}),N("Profile updated successfully!"),setTimeout(()=>N(null),3e3)},onError:A=>{var $,re;M({submit:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to update profile"})}}),z=ce({mutationFn:A=>nT(A,i||""),onSuccess:()=>{b({current_password:"",new_password:"",confirm_password:""}),N("Password changed successfully!"),setTimeout(()=>N(null),3e3)},onError:A=>{var $,re;M({submit:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to change password"})}}),B=ce({mutationFn:A=>aT(A,i||""),onSuccess:()=>{l(),t("/")},onError:A=>{var $,re;M({submit:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to delete account"})}}),C=ce({mutationFn:()=>iT(i||""),onSuccess:()=>{N("Verification email sent! Check your inbox."),setTimeout(()=>N(null),3e3)},onError:A=>{var $,re;M({submit:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to send verification email"})}});u.useEffect(()=>{P&&x({first_name:P.first_name,last_name:P.last_name,phone:P.phone,dietary_preferences:P.dietary_preferences,marketing_opt_in:P.marketing_opt_in,order_notifications_email:P.order_notifications_email,order_notifications_sms:P.order_notifications_sms,marketing_emails:P.marketing_emails,marketing_sms:P.marketing_sms})},[P]),u.useEffect(()=>{r({section:c})},[c,r]),u.useEffect(()=>{M({}),N(null)},[c]);const R=(A,$)=>{x(re=>({...re,[A]:$})),M(re=>({...re,[A]:""}))},_=(A,$)=>{b(re=>({...re,[A]:$})),M(re=>({...re,[A]:""}))},q=A=>{x($=>{const re=$.dietary_preferences||[],ve=re.includes(A)?re.filter(xe=>xe!==A):[...re,A];return{...$,dietary_preferences:ve.length>0?ve:null}})},O=()=>{const A={};return m.first_name.trim()||(A.first_name="First name is required"),m.last_name.trim()||(A.last_name="Last name is required"),m.phone.trim()?/^[\d\s+\-()]+$/.test(m.phone)||(A.phone="Invalid phone number format"):A.phone="Phone number is required",M(A),Object.keys(A).length===0},V=()=>{const A={};return f.current_password||(A.current_password="Current password is required"),f.new_password?f.new_password.length<8?A.new_password="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*\d)/.test(f.new_password)||(A.new_password="Password must contain at least one letter and one number"):A.new_password="New password is required",f.new_password!==f.confirm_password&&(A.confirm_password="Passwords do not match"),M(A),Object.keys(A).length===0},D=A=>{A.preventDefault(),M({}),O()&&H.mutate(m)},G=A=>{A.preventDefault(),M({}),V()&&z.mutate({current_password:f.current_password,new_password:f.new_password})},se=()=>{if(!k){M({submit:"Please enter your password to confirm deletion"});return}B.mutate(k)},K=(A=>A.length===0?{strength:"",color:"bg-gray-200",width:"w-0"}:A.length<8?{strength:"Weak",color:"bg-red-500",width:"w-1/3"}:/(?=.*[a-zA-Z])(?=.*\d)/.test(A)?{strength:"Strong",color:"bg-green-500",width:"w-full"}:{strength:"Medium",color:"bg-yellow-500",width:"w-2/3"})(f.new_password);return!a||!i?(t("/login"),null):I?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"w-12 h-12 animate-spin text-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences"})]}),P&&!P.email_verified&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Email not verified"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Please verify your email address to access all features."}),e.jsx("button",{onClick:()=>C.mutate(),disabled:C.isPending,className:"mt-2 text-sm font-medium text-yellow-800 hover:text-yellow-900 underline disabled:opacity-50",children:C.isPending?"Sending...":"Resend verification email"})]})]})}),T&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"ml-3 text-sm font-medium text-green-800",children:T})]})}),w.submit&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"ml-3 text-sm font-medium text-red-800",children:w.submit})]})}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("aside",{className:"lg:col-span-3",children:e.jsxs("nav",{className:"space-y-1 bg-white rounded-lg shadow p-2 sticky top-4",children:[e.jsxs("button",{onClick:()=>d("personal"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="personal"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(cs,{className:"w-5 h-5 mr-3"}),"Personal Information"]}),e.jsxs("button",{onClick:()=>d("notifications"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="notifications"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Tn,{className:"w-5 h-5 mr-3"}),"Notifications"]}),e.jsxs("button",{onClick:()=>d("password"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="password"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Vs,{className:"w-5 h-5 mr-3"}),"Password & Security"]}),e.jsxs("button",{onClick:()=>d("account"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="account"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(LS,{className:"w-5 h-5 mr-3"}),"Dietary Preferences"]})]})}),e.jsx("main",{className:"mt-8 lg:mt-0 lg:col-span-9",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c==="personal"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"relative",children:P!=null&&P.profile_photo_url?e.jsx("img",{src:P.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-300",children:e.jsx(cs,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{children:[e.jsxs("button",{disabled:!0,className:"px-4 py-2 bg-gray-100 text-gray-400 text-sm font-medium rounded-lg cursor-not-allowed flex items-center",children:[e.jsx(fS,{className:"w-4 h-4 mr-2"}),"Upload Photo (Coming Soon)"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),e.jsx("form",{onSubmit:D,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Nt,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-900",children:P==null?void 0:P.email}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email changes require verification. Contact support to update."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{id:"first_name",type:"text",value:m.first_name,onChange:A=>R("first_name",A.target.value),className:`w-full px-4 py-3 rounded-lg border ${w.first_name?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"John"}),w.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{id:"last_name",type:"text",value:m.last_name,onChange:A=>R("last_name",A.target.value),className:`w-full px-4 py-3 rounded-lg border ${w.last_name?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Doe"}),w.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{id:"phone",type:"tel",value:m.phone,onChange:A=>R("phone",A.target.value),className:`w-full px-4 py-3 rounded-lg border ${w.phone?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"+353 1 234 5678"}),w.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.phone})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:H.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})})]})})]}),c==="notifications"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),e.jsx("form",{onSubmit:D,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Updates"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive order status updates via email"})]}),e.jsx("button",{type:"button",onClick:()=>R("order_notifications_email",!m.order_notifications_email),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${m.order_notifications_email?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${m.order_notifications_email?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive order status updates via SMS"})]}),e.jsx("button",{type:"button",onClick:()=>R("order_notifications_sms",!m.order_notifications_sms),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${m.order_notifications_sms?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${m.order_notifications_sms?"translate-x-5":"translate-x-0"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Marketing & Promotions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive promotional offers and updates"})]}),e.jsx("button",{type:"button",onClick:()=>R("marketing_emails",!m.marketing_emails),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${m.marketing_emails?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${m.marketing_emails?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Marketing SMS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive special offers via SMS"})]}),e.jsx("button",{type:"button",onClick:()=>R("marketing_sms",!m.marketing_sms),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${m.marketing_sms?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${m.marketing_sms?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"General Marketing"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opt in to all marketing communications"})]}),e.jsx("button",{type:"button",onClick:()=>R("marketing_opt_in",!m.marketing_opt_in),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${m.marketing_opt_in?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${m.marketing_opt_in?"translate-x-5":"translate-x-0"}`})})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:H.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})})]})})]}),c==="password"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Password & Security"}),e.jsx("form",{onSubmit:G,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"current_password",type:h?"text":"password",value:f.current_password,onChange:A=>_("current_password",A.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${w.current_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?e.jsx(pr,{className:"w-5 h-5"}):e.jsx(Ps,{className:"w-5 h-5"})})]}),w.current_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.current_password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new_password",type:v?"text":"password",value:f.new_password,onChange:A=>_("new_password",A.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${w.new_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>g(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v?e.jsx(pr,{className:"w-5 h-5"}):e.jsx(Ps,{className:"w-5 h-5"})})]}),w.new_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.new_password}),f.new_password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${K.color} transition-all duration-300 ${K.width}`})}),K.strength&&e.jsx("span",{className:"ml-3 text-xs font-medium text-gray-600",children:K.strength})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use at least 8 characters with letters and numbers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",type:j?"text":"password",value:f.confirm_password,onChange:A=>_("confirm_password",A.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${w.confirm_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Re-enter new password"}),e.jsx("button",{type:"button",onClick:()=>y(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j?e.jsx(pr,{className:"w-5 h-5"}):e.jsx(Ps,{className:"w-5 h-5"})})]}),w.confirm_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.confirm_password})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:z.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Change Password"]})})})]})})]}),c==="account"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Dietary Preferences & Account"}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dietary Preferences"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select your dietary requirements to see personalized menu recommendations"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:F.map(A=>e.jsx("button",{type:"button",onClick:()=>q(A),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${(m.dietary_preferences||[]).includes(A)?"bg-orange-100 text-orange-700 border-2 border-orange-600":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:A.charAt(0).toUpperCase()+A.slice(1).replace("-"," ")},A))}),e.jsx("button",{onClick:D,disabled:H.isPending,className:"mt-4 w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})]}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Created"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a!=null&&a.created_at?new Date(a.created_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Status"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email Verified"}),e.jsx("span",{className:`text-sm font-medium ${P!=null&&P.email_verified?"text-green-600":"text-yellow-600"}`,children:P!=null&&P.email_verified?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-red-900 mb-2 flex items-center",children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"Delete Account"]}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Your order history will be anonymized but retained for legal and accounting purposes in compliance with GDPR."}),e.jsxs("button",{onClick:()=>L(!0),className:"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors flex items-center",children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Delete My Account"]})]})]})]})})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>L(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-6 pt-6 pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(It,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Account"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Are you absolutely sure you want to delete your account? This action is permanent and cannot be undone."}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"All your personal data will be deleted, and your order history will be anonymized."}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"delete_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your password to confirm"}),e.jsx("input",{id:"delete_password",type:"password",value:k,onChange:A=>{S(A.target.value),M({})},className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter password"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse gap-3",children:[e.jsx("button",{onClick:se,disabled:B.isPending||!k,className:"w-full sm:w-auto px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:B.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Yes, Delete My Account"}),e.jsx("button",{onClick:()=>{L(!1),S(""),M({})},disabled:B.isPending,className:"mt-3 sm:mt-0 w-full sm:w-auto px-6 py-3 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:"Cancel"})]})]})]})})]})},Wl="https://123salama-lama-food-truck.launchpulse.ai",lT=async t=>(await Q.get(`${Wl}/api/addresses`,{headers:{Authorization:`Bearer ${t}`}})).data.addresses,cT=async(t,s)=>(await Q.post(`${Wl}/api/addresses`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,dT=async(t,s,r)=>(await Q.put(`${Wl}/api/addresses/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,uT=async(t,s)=>{await Q.delete(`${Wl}/api/addresses/${t}`,{headers:{Authorization:`Bearer ${s}`}})},mT=async(t,s)=>(await Q.put(`${Wl}/api/addresses/${t}/default`,{},{headers:{Authorization:`Bearer ${s}`}})).data,xT=()=>{const t=Z(C=>C.authentication_state.current_user),s=Z(C=>C.authentication_state.auth_token),[r,n]=u.useState(!1),[a,i]=u.useState(null),[o,l]=u.useState({label:"",address_line1:"",address_line2:null,city:"Dublin",postal_code:"",delivery_instructions:null,is_default:!1}),[c,d]=u.useState({}),[m,x]=u.useState(null),[f,b]=u.useState(null),[h,p]=u.useState(null),v=Ue(),{data:g=[],isLoading:j,error:y}=ue({queryKey:["addresses",t==null?void 0:t.user_id],queryFn:()=>lT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),w=ce({mutationFn:C=>cT(C,s),onSuccess:()=>{v.invalidateQueries({queryKey:["addresses"]}),n(!1),E(),L("Address added successfully!")},onError:C=>{var _,q;const R=((q=(_=C.response)==null?void 0:_.data)==null?void 0:q.message)||"Failed to add address";d({submit:R})}}),M=ce({mutationFn:({addressId:C,data:R})=>dT(C,R,s),onSuccess:()=>{v.invalidateQueries({queryKey:["addresses"]}),i(null),E(),L("Address updated successfully!")},onError:C=>{var _,q;const R=((q=(_=C.response)==null?void 0:_.data)==null?void 0:q.message)||"Failed to update address";d({submit:R})}}),T=ce({mutationFn:C=>uT(C,s),onSuccess:()=>{v.invalidateQueries({queryKey:["addresses"]}),x(null),L("Address deleted successfully!")},onError:C=>{var _,q;const R=((q=(_=C.response)==null?void 0:_.data)==null?void 0:q.message)||"Failed to delete address";p(R),setTimeout(()=>p(null),3e3)}}),N=ce({mutationFn:C=>mT(C,s),onSuccess:()=>{v.invalidateQueries({queryKey:["addresses"]}),L("Default address updated!")},onError:C=>{var _,q;const R=((q=(_=C.response)==null?void 0:_.data)==null?void 0:q.message)||"Failed to set default address";p(R),setTimeout(()=>p(null),3e3)}}),E=()=>{l({label:"",address_line1:"",address_line2:null,city:"Dublin",postal_code:"",delivery_instructions:null,is_default:!1}),d({})},L=C=>{b(C),setTimeout(()=>b(null),3e3)},k=()=>{const C={};return o.label.trim()?o.label.length>50&&(C.label="Label must be 50 characters or less"):C.label="Label is required",o.address_line1.trim()?o.address_line1.length>255&&(C.address_line1="Address must be 255 characters or less"):C.address_line1="Address line 1 is required",o.city.trim()||(C.city="City is required"),o.postal_code.trim()?o.postal_code.length>20&&(C.postal_code="Postal code must be 20 characters or less"):C.postal_code="Postal code is required",o.delivery_instructions&&o.delivery_instructions.length>500&&(C.delivery_instructions="Delivery instructions must be 500 characters or less"),d(C),Object.keys(C).length===0},S=C=>{C.preventDefault(),d({}),k()&&(a?M.mutate({addressId:a,data:o}):w.mutate(o))},F=C=>{i(C.address_id),l({label:C.label,address_line1:C.address_line1,address_line2:C.address_line2,city:C.city,postal_code:C.postal_code,delivery_instructions:C.delivery_instructions,is_default:C.is_default}),n(!0),d({})},P=()=>{n(!1),i(null),E()},I=C=>{x(C)},H=()=>{m&&T.mutate(m)},z=C=>{N.mutate(C)},B=C=>{const R=C.toLowerCase();return R.includes("home")?e.jsx(Ca,{className:"w-5 h-5"}):R.includes("work")||R.includes("office")?e.jsx(pS,{className:"w-5 h-5"}):e.jsx(gt,{className:"w-5 h-5"})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"My Delivery Addresses"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Manage your saved delivery addresses for faster checkout"})]}),!r&&e.jsxs("button",{onClick:()=>{n(!0),i(null),E()},className:"inline-flex items-center justify-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(wt,{className:"w-5 h-5 mr-2"}),"Add New Address"]})]})}),f&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{className:"w-5 h-5 text-green-600 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:f})]}),e.jsx("button",{onClick:()=>b(null),className:"text-green-600 hover:text-green-800",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),h&&e.jsx("div",{className:"fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg bg-red-600 text-white",children:h}),y&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Error loading addresses"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:y.message||"Please try again later"})]})]}),r&&e.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:a?"Edit Address":"Add New Address"})}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[c.submit&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-800 text-sm",children:c.submit})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-900 mb-2",children:["Label ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"label",value:o.label,onChange:C=>{l(R=>({...R,label:C.target.value})),c.label&&d(R=>{const _={...R};return delete _.label,_})},placeholder:"e.g., Home, Work, Office",className:`w-full px-4 py-3 border-2 ${c.label?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.label&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),c.label]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address_line1",className:"block text-sm font-medium text-gray-900 mb-2",children:["Address Line 1 ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"address_line1",value:o.address_line1,onChange:C=>{l(R=>({...R,address_line1:C.target.value})),c.address_line1&&d(R=>{const _={...R};return delete _.address_line1,_})},placeholder:"Street address, building number",className:`w-full px-4 py-3 border-2 ${c.address_line1?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.address_line1&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),c.address_line1]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address_line2",className:"block text-sm font-medium text-gray-900 mb-2",children:"Address Line 2 (Optional)"}),e.jsx("input",{type:"text",id:"address_line2",value:o.address_line2||"",onChange:C=>l(R=>({...R,address_line2:C.target.value||null})),placeholder:"Apartment, suite, floor (optional)",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-900 mb-2",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"city",value:o.city,onChange:C=>{l(R=>({...R,city:C.target.value})),c.city&&d(R=>{const _={...R};return delete _.city,_})},placeholder:"Dublin",className:`w-full px-4 py-3 border-2 ${c.city?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.city&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),c.city]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-900 mb-2",children:["Postal Code (Eircode) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"postal_code",value:o.postal_code,onChange:C=>{l(R=>({...R,postal_code:C.target.value})),c.postal_code&&d(R=>{const _={...R};return delete _.postal_code,_})},placeholder:"D02 X285",className:`w-full px-4 py-3 border-2 ${c.postal_code?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.postal_code&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),c.postal_code]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_instructions",className:"block text-sm font-medium text-gray-900 mb-2",children:"Delivery Instructions (Optional)"}),e.jsx("textarea",{id:"delivery_instructions",value:o.delivery_instructions||"",onChange:C=>l(R=>({...R,delivery_instructions:C.target.value||null})),placeholder:"Gate code, buzzer number, or special instructions...",rows:3,className:`w-full px-4 py-3 border-2 ${c.delivery_instructions?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 resize-none`}),c.delivery_instructions&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),c.delivery_instructions]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:o.is_default,onChange:C=>l(R=>({...R,is_default:C.target.checked})),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-4 focus:ring-orange-100"}),e.jsx("label",{htmlFor:"is_default",className:"ml-3 text-gray-900 font-medium",children:"Set as default address"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:w.isPending||M.isPending,className:"flex-1 sm:flex-none px-8 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:w.isPending||M.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Updating...":"Saving..."]}):a?"Update Address":"Save Address"}),e.jsx("button",{type:"button",onClick:P,className:"flex-1 sm:flex-none px-8 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"})]})]})]}),j&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin h-12 w-12 text-orange-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading addresses..."})]})}),!j&&!r&&g.length===0&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(gt,{className:"w-12 h-12 text-orange-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Addresses Yet"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"You haven't added any delivery addresses yet. Add your first address to enable delivery orders."}),e.jsxs("button",{onClick:()=>{n(!0),i(null),E()},className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(wt,{className:"w-5 h-5 mr-2"}),"Add Your First Address"]})]})}),!j&&g.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(C=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:`px-6 py-4 ${C.is_default?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-100 to-gray-50"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${C.is_default?"bg-white/20":"bg-white"}`,children:e.jsx("span",{className:C.is_default?"text-white":"text-gray-700",children:B(C.label)})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${C.is_default?"text-white":"text-gray-900"}`,children:C.label}),C.is_default&&e.jsxs("span",{className:"text-xs text-white/90 flex items-center mt-1",children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"Default Address"]})]})]})})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:C.address_line1}),C.address_line2&&e.jsx("p",{className:"text-gray-700 leading-relaxed",children:C.address_line2}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[C.city,", ",C.postal_code]})]}),C.delivery_instructions&&e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",C.delivery_instructions]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-100",children:[!C.is_default&&e.jsx("button",{onClick:()=>z(C.address_id),disabled:N.isPending,className:"flex-1 px-4 py-2 bg-green-50 text-green-700 font-medium rounded-lg hover:bg-green-100 focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 text-sm disabled:opacity-50",children:"Set as Default"}),e.jsxs("button",{onClick:()=>F(C),className:"px-4 py-2 bg-blue-50 text-blue-700 font-medium rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm flex items-center",children:[e.jsx(fa,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>I(C.address_id),className:"px-4 py-2 bg-red-50 text-red-700 font-medium rounded-lg hover:bg-red-100 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 text-sm flex items-center",children:[e.jsx(It,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]},C.address_id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(me,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Delete Address?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Are you sure you want to delete this address? This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:T.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:T.isPending?"Deleting...":"Delete"})]})]})})]})})})},hT=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",{headers:{Authorization:`Bearer ${t}`}})).data.payment_methods,pT=async(t,s)=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,fT=async(t,s)=>{await Q.delete(`https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods/${t}`,{headers:{Authorization:`Bearer ${s}`}})},gT=async(t,s)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods/${t}/default`,{},{headers:{Authorization:`Bearer ${s}`}})).data,yT=t=>{switch(t){case"Visa":return"bg-blue-600";case"Mastercard":return"bg-red-600";case"Amex":return"bg-green-600";case"Discover":return"bg-orange-600";default:return"bg-gray-600"}},bT=t=>`   ${t}`,vT=t=>{const s=t.replace(/\s/g,"");return s.startsWith("4")?"Visa":/^5[1-5]/.test(s)?"Mastercard":/^3[47]/.test(s)?"Amex":s.startsWith("6")?"Discover":"Visa"},jT=()=>`sumup_token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,wT=()=>{const t=Z(F=>F.authentication_state.auth_token),[s,r]=u.useState(!1),[n,a]=u.useState(null),[i,o]=u.useState(!1),[l,c]=u.useState(null),[d,m]=u.useState(null),[x,f]=u.useState({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),b=Ue(),{data:h=[],isLoading:p,error:v}=ue({queryKey:["payment-methods"],queryFn:()=>hT(t||""),enabled:!!t,staleTime:5*60*1e3,retry:1}),g=ce({mutationFn:F=>pT(F,t||""),onSuccess:()=>{b.invalidateQueries({queryKey:["payment-methods"]}),m("Payment method added successfully!"),r(!1),f({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),setTimeout(()=>m(null),5e3)},onError:F=>{var I,H;const P=((H=(I=F.response)==null?void 0:I.data)==null?void 0:H.message)||"Failed to add payment method";c(P),setTimeout(()=>c(null),5e3)}}),j=ce({mutationFn:F=>fT(F,t||""),onSuccess:()=>{b.invalidateQueries({queryKey:["payment-methods"]}),m("Payment method removed successfully!"),o(!1),a(null),setTimeout(()=>m(null),5e3)},onError:F=>{var I,H;const P=((H=(I=F.response)==null?void 0:I.data)==null?void 0:H.message)||"Failed to remove payment method";c(P),o(!1),setTimeout(()=>c(null),5e3)}}),y=ce({mutationFn:F=>gT(F,t||""),onSuccess:()=>{b.invalidateQueries({queryKey:["payment-methods"]}),m("Default payment method updated!"),setTimeout(()=>m(null),5e3)},onError:F=>{var I,H;const P=((H=(I=F.response)==null?void 0:I.data)==null?void 0:H.message)||"Failed to update default payment method";c(P),setTimeout(()=>c(null),5e3)}}),w=()=>{r(!0),c(null)},M=()=>{r(!1),f({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),c(null)},T=(F,P)=>{f(I=>({...I,[F]:P})),c(null)},N=F=>{if(F.preventDefault(),c(null),!x.card_number||x.card_number.replace(/\s/g,"").length<13){c("Please enter a valid card number");return}if(!x.expiry_month||!x.expiry_year){c("Please enter card expiry date");return}if(!x.cvv||x.cvv.length<3){c("Please enter a valid CVV");return}if(!x.cardholder_name.trim()){c("Please enter cardholder name");return}const P=x.card_number.replace(/\s/g,""),I=P.slice(-4),H=vT(P),B={sumup_token:jT(),card_type:H,last_four_digits:I,expiry_month:x.expiry_month,expiry_year:x.expiry_year,cardholder_name:x.cardholder_name,is_default:x.is_default};g.mutate(B)},E=F=>{if(h.length===1){c("Cannot remove your only saved payment method"),setTimeout(()=>c(null),5e3);return}a(F),o(!0)},L=()=>{n&&j.mutate(n)},k=()=>{o(!1),a(null)},S=F=>{y.mutate(F)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Methods"}),e.jsx("p",{className:"mt-2 text-gray-600 leading-relaxed",children:"Manage your saved payment methods for faster checkout"})]}),e.jsx(X,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200 text-sm font-medium",children:" Back to Profile"})]})}),d&&e.jsxs("div",{className:"mb-6 bg-green-50 border-2 border-green-200 text-green-800 px-6 py-4 rounded-xl flex items-start shadow-lg shadow-green-100",children:[e.jsx(Ge,{className:"size-5 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"font-medium",children:d})]}),l&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-6 py-4 rounded-xl flex items-start shadow-lg shadow-red-100",children:[e.jsx(me,{className:"size-5 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"font-medium",children:l})]}),v&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load payment methods. Please try again."})}),!s&&e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:w,disabled:p,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wt,{className:"size-5 mr-2"}),"Add New Card"]})}),s&&e.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Add New Payment Method"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Enter your card details securely"})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"card_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),e.jsx("input",{type:"text",id:"card_number",value:x.card_number,onChange:F=>{var H;const P=F.target.value.replace(/\D/g,""),I=((H=P.match(/.{1,4}/g))==null?void 0:H.join(" "))||P;T("card_number",I)},placeholder:"1234 5678 9012 3456",maxLength:19,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:g.isPending})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry_month",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month"}),e.jsx("input",{type:"text",id:"expiry_month",value:x.expiry_month,onChange:F=>T("expiry_month",F.target.value.replace(/\D/g,"").slice(0,2)),placeholder:"MM",maxLength:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:g.isPending})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry_year",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year"}),e.jsx("input",{type:"text",id:"expiry_year",value:x.expiry_year,onChange:F=>T("expiry_year",F.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"YYYY",maxLength:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:g.isPending})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cvv",className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),e.jsx("input",{type:"text",id:"cvv",value:x.cvv,onChange:F=>T("cvv",F.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"123",maxLength:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:g.isPending})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cardholder_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),e.jsx("input",{type:"text",id:"cardholder_name",value:x.cardholder_name,onChange:F=>T("cardholder_name",F.target.value),placeholder:"John Smith",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:g.isPending})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:x.is_default,onChange:F=>T("is_default",F.target.checked),className:"size-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:g.isPending}),e.jsx("label",{htmlFor:"is_default",className:"ml-3 text-sm font-medium text-gray-700",children:"Set as default payment method"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Secure Payment:"})," Your card information is encrypted and tokenized. We never store your full card number or CVV."]})}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:g.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:g.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Card..."]}):"Add Card"}),e.jsx("button",{type:"button",onClick:M,disabled:g.isPending,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),p&&e.jsx("div",{className:"space-y-6",children:[1,2].map(F=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},F))}),!p&&h.length>0&&e.jsx("div",{className:"space-y-6",children:h.map(F=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:`${yT(F.card_type)} text-white rounded-lg p-3 flex items-center justify-center shadow-lg`,children:e.jsx(hr,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:F.card_type}),F.is_default&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx(Ge,{className:"size-3 mr-1"}),"Default"]})]}),e.jsx("p",{className:"text-gray-600 text-base font-mono mb-1",children:bT(F.last_four_digits)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Expires ",F.expiry_month,"/",F.expiry_year.slice(-2),"  ",F.cardholder_name]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[!F.is_default&&e.jsx("button",{onClick:()=>S(F.payment_method_id),disabled:y.isPending,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting..."]}):"Set as Default"}),e.jsxs("button",{onClick:()=>E(F.payment_method_id),disabled:j.isPending,className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(It,{className:"size-4 mr-2"}),"Remove"]})]})]})})},F.payment_method_id))}),!p&&h.length===0&&!s&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(hr,{className:"size-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Payment Methods Saved"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto leading-relaxed",children:"Add your first payment method for faster checkout and a smoother ordering experience."}),e.jsxs("button",{onClick:w,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(wt,{className:"size-5 mr-2"}),"Add Your First Card"]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx(me,{className:"size-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Remove Payment Method?"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Are you sure you want to remove this payment method? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:k,disabled:j.isPending,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:j.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Removing..."]}):"Remove"})]})]})}),e.jsxs("div",{className:"mt-12 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Your Payment Security"}),e.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ge,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"All payment data is encrypted using industry-standard SSL/TLS protocols"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ge,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"We never store your full card number or CVV - only secure tokens"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ge,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"CVV is required fresh for each transaction for your security"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ge,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"Payment processing powered by SumUp - PCI DSS Level 1 compliant"})]})]})]})]})})})},_1="https://123salama-lama-food-truck.launchpulse.ai/api",NT=async t=>{const s=new URLSearchParams;return t.status&&s.append("status",t.status),t.order_type&&s.append("order_type",t.order_type),t.date_range&&s.append("date_range",t.date_range),t.query&&s.append("query",t.query),s.append("limit",t.limit.toString()),s.append("offset",t.offset.toString()),(await Q.get(`${_1}/orders?${s.toString()}`,{headers:{Authorization:`Bearer ${t.auth_token}`}})).data},_T=async(t,s)=>(await Q.get(`${_1}/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`}})).data,fy=t=>{const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)},gy=t=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(t),yy=t=>{const s="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(t){case"received":return`${s} bg-blue-100 text-blue-800`;case"preparing":return`${s} bg-yellow-100 text-yellow-800`;case"ready":case"completed":return`${s} bg-green-100 text-green-800`;case"out_for_delivery":return`${s} bg-purple-100 text-purple-800`;case"cancelled":return`${s} bg-red-100 text-red-800`;default:return`${s} bg-gray-100 text-gray-800`}},by=t=>{switch(t){case"completed":return e.jsx(Oe,{className:"w-4 h-4 mr-1"});case"cancelled":return e.jsx(jt,{className:"w-4 h-4 mr-1"});case"preparing":return e.jsx(Ke,{className:"w-4 h-4 mr-1"});default:return e.jsx(me,{className:"w-4 h-4 mr-1"})}},vy=t=>t.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),kT=()=>{const t=Z(_=>_.authentication_state.auth_token),s=Z(_=>_.add_to_cart),r=Z(_=>_.cart_state.items),n=Z(_=>_.clear_cart),[a,i]=ct(),o=Be(),[l,c]=u.useState(""),[d,m]=u.useState(""),[x,f]=u.useState(null),[b,h]=u.useState({isOpen:!1,order:null}),p=a.get("status"),v=a.get("date_range"),g=a.get("order_type"),j=parseInt(a.get("page")||"1",10),y=20,{data:w,isLoading:M,isError:T,error:N,refetch:E}=ue({queryKey:["orders",p,v,g,l,j],queryFn:()=>NT({auth_token:t,status:p,order_type:g,date_range:v,query:l,limit:y,offset:(j-1)*y}),enabled:!!t,staleTime:6e4,retry:1}),L=(w==null?void 0:w.orders)||[],k=(w==null?void 0:w.total)||0,S=Math.ceil(k/y),F=ce({mutationFn:_=>_T(_,t),onSuccess:_=>{window.open(_.invoice_url,"_blank")},onError:_=>{console.error("Failed to download invoice:",_),f({type:"error",message:"Failed to download invoice. Please try again."}),setTimeout(()=>f(null),3e3)}}),P=(_,q)=>{const O=new URLSearchParams(a);q?O.set(_,q):O.delete(_),O.delete("page"),i(O)},I=()=>{i(new URLSearchParams),c(""),m("")};u.useEffect(()=>{const _=setTimeout(()=>{c(d);const q=new URLSearchParams(a);q.delete("page"),i(q)},500);return()=>clearTimeout(_)},[d]);const H=_=>{if(_<1||_>S)return;const q=new URLSearchParams(a);q.set("page",_.toString()),i(q),window.scrollTo({top:0,behavior:"smooth"})},z=_=>{if(r.length>0){h({isOpen:!0,order:_});return}if(!_.items||_.items.length===0){f({type:"error",message:"This order has no items to reorder."}),setTimeout(()=>f(null),3e3);return}_.items.forEach(q=>{const O=q.selected_customizations?Object.entries(q.selected_customizations).map(([V,D])=>({group_name:V,option_name:typeof D=="string"?D:D.name||"",additional_price:0})):[];s({item_id:q.item_id,item_name:q.item_name,quantity:q.quantity,unit_price:q.unit_price,customizations:O,line_total:q.line_total})}),o("/cart")},B=()=>{if(b.order){n();const _=b.order;if(!_.items||_.items.length===0){f({type:"error",message:"This order has no items to reorder."}),setTimeout(()=>f(null),3e3),h({isOpen:!1,order:null});return}_.items.forEach(q=>{const O=q.selected_customizations?Object.entries(q.selected_customizations).map(([V,D])=>({group_name:V,option_name:typeof D=="string"?D:D.name||"",additional_price:0})):[];s({item_id:q.item_id,item_name:q.item_name,quantity:q.quantity,unit_price:q.unit_price,customizations:O,line_total:q.line_total})}),h({isOpen:!1,order:null}),o("/cart")}},C=_=>{F.mutate(_)},R=u.useMemo(()=>{let _=0;return p&&_++,v&&_++,g&&_++,l&&_++,_},[p,v,g,l]);return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${x.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:x.message}),b.isOpen&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>h({isOpen:!1,order:null})}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"mt-3 text-center sm:mt-5",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Replace Cart Items?"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Your cart will be cleared and replaced with items from this order. Continue?"})})]})}),e.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[e.jsx("button",{type:"button",onClick:B,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-600 text-base font-medium text-white hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:col-start-2 sm:text-sm",children:"Yes, Replace Cart"}),e.jsx("button",{type:"button",onClick:()=>h({isOpen:!1,order:null}),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order History"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all your past orders"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by order number...",value:d,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex items-center gap-3",children:R>0&&e.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["Clear Filters (",R,")"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(mu,{className:"w-4 h-4 inline mr-1"}),"Status"]}),e.jsxs("select",{value:p||"",onChange:_=>P("status",_.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Mn,{className:"w-4 h-4 inline mr-1"}),"Date Range"]}),e.jsxs("select",{value:v||"",onChange:_=>P("date_range",_.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_3_months",children:"Last 3 Months"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Je,{className:"w-4 h-4 inline mr-1"}),"Order Type"]}),e.jsxs("select",{value:g||"",onChange:_=>P("order_type",_.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"collection",children:"Collection"}),e.jsx("option",{value:"delivery",children:"Delivery"})]})]})]})]}),M?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your orders..."})]})}):T?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(N==null?void 0:N.message)||"An error occurred while loading your orders"}),e.jsx("button",{onClick:()=>E(),className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Try Again"})]})}):L.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:l||R>0?"No Orders Found":"No Orders Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l||R>0?"Try adjusting your filters or search terms":"You haven't placed any orders yet. Start ordering now!"}),l||R>0?e.jsx("button",{onClick:I,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Clear Filters"}):e.jsx(X,{to:"/menu",className:"inline-block px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Browse Menu"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(_=>{var q,O;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(X,{to:`/orders/${_.order_id}`,className:"text-sm font-medium text-orange-600 hover:text-orange-700",children:["#",_.order_number]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:fy(_.created_at)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:_.order_type==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(zr,{className:"w-4 h-4 mr-1.5"}),"Delivery"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-4 h-4 mr-1.5"}),"Collection"]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[((q=_.items)==null?void 0:q.length)||0," ",(((O=_.items)==null?void 0:O.length)||0)===1?"item":"items"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:gy(_.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:yy(_.status),children:[by(_.status),vy(_.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(X,{to:`/orders/${_.order_id}`,className:"text-gray-600 hover:text-gray-900 transition-colors p-1.5 rounded hover:bg-gray-100",title:"View Details",children:e.jsx(yn,{className:"w-4 h-4"})}),_.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>z(_),className:"text-orange-600 hover:text-orange-700 transition-colors p-1.5 rounded hover:bg-orange-50",title:"Reorder",children:e.jsx(Vo,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(_.order_id),disabled:F.isPending,className:"text-blue-600 hover:text-blue-700 transition-colors p-1.5 rounded hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Download Invoice",children:e.jsx(ys,{className:`w-4 h-4 ${F.isPending?"animate-spin":""}`})})]})]})})]},_.order_id)})})]})}),e.jsx("div",{className:"lg:hidden space-y-4 mb-6",children:L.map(_=>{var q,O;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs(X,{to:`/orders/${_.order_id}`,className:"text-lg font-semibold text-orange-600 hover:text-orange-700",children:["#",_.order_number]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:fy(_.created_at)})]}),e.jsxs("span",{className:yy(_.status),children:[by(_.status),vy(_.status)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Type"}),e.jsx("div",{className:"flex items-center text-sm text-gray-900",children:_.order_type==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(zr,{className:"w-4 h-4 mr-1.5"}),"Delivery"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-4 h-4 mr-1.5"}),"Collection"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Items"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[((q=_.items)==null?void 0:q.length)||0," ",(((O=_.items)==null?void 0:O.length)||0)===1?"item":"items"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:gy(_.total_amount)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{to:`/orders/${_.order_id}`,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium text-sm hover:bg-gray-200 transition-colors text-center",children:"View Details"}),_.status==="completed"&&e.jsxs("button",{onClick:()=>z(_),className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-medium text-sm hover:bg-orange-700 transition-colors",children:[e.jsx(Vo,{className:"w-4 h-4 inline mr-1"}),"Reorder"]})]})]})]},_.order_id)})}),S>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(j-1)*y+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(j*y,k)})," ","of ",e.jsx("span",{className:"font-medium",children:k})," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(j-1),disabled:j===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Fi,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,S)},(_,q)=>{let O;return S<=5||j<=3?O=q+1:j>=S-2?O=S-4+q:O=j-2+q,e.jsx("button",{onClick:()=>H(O),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${j===O?"bg-orange-600 text-white":"text-gray-700 hover:bg-gray-50"}`,children:O},O)})}),e.jsx("button",{onClick:()=>H(j+1),disabled:j===S,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]})]})})]})]})})]})},CT=async(t,s)=>{const r=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}});return r.data&&r.data.order?{...r.data.order,items:r.data.items||[],status_history:r.data.status_history||[]}:r.data},ST=async(t,s,r)=>{const n=await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}/cancel`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});return n.data&&n.data.order?{...n.data.order,items:n.data.items||[],status_history:n.data.status_history||[]}:n.data},ET=async(t,s)=>(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`}})).data,Mm=t=>new Date(t).toLocaleString("en-IE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Hn=t=>`${Number(t||0).toFixed(2)}`,jy=t=>({received:"bg-gray-100 text-gray-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-blue-100 text-blue-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",Rm=t=>({received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled"})[t]||t,PT=t=>{if(t.status!=="received")return!1;const s=new Date(t.created_at).getTime(),r=new Date().getTime(),n=5*60*1e3;return r-s<n},AT=()=>{var k,S;const{order_id:t}=Rs(),s=Be(),r=Ue(),n=Z(F=>F.authentication_state.auth_token),a=Z(F=>F.add_to_cart),[i,o]=u.useState(!1),[l,c]=u.useState(""),[d,m]=u.useState(null),{data:x,isLoading:f,isError:b,error:h}=ue({queryKey:["order",t],queryFn:()=>CT(t,n),enabled:!!t&&!!n,staleTime:3e4,retry:1}),p=ce({mutationFn:F=>ST(t,F,n),onSuccess:F=>{r.setQueryData(["order",t],F),o(!1),c("")}}),v=x?PT(x):!1,g=(x==null?void 0:x.items)||[],j=(x==null?void 0:x.status_history)||[],y=u.useCallback(async()=>{if(!(!t||!n))try{const F=await ET(t,n);window.open(F.invoice_url,"_blank")}catch(F){console.error("Failed to download invoice:",F),m({type:"error",message:"Failed to download invoice. Please try again."}),setTimeout(()=>m(null),3e3)}},[t,n]),w=u.useCallback(()=>{x&&(x.items.forEach(F=>{const P=F.selected_customizations?Object.entries(F.selected_customizations).map(([I,H])=>({group_name:I,option_name:typeof H=="string"?H:H.name||"",additional_price:0})):[];a({item_id:F.item_id,item_name:F.item_name,quantity:F.quantity,unit_price:F.unit_price,customizations:P,line_total:F.line_total})}),s("/cart"))},[x,a,s]),M=u.useCallback(()=>{s(`/orders/${t}/track`)},[t,s]),T=u.useCallback(()=>{if(!l.trim()){m({type:"error",message:"Please provide a reason for cancellation"}),setTimeout(()=>m(null),3e3);return}p.mutate({cancellation_reason:l})},[l,p]);if(f)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})});if(b||!x){const F=Q.isAxiosError(h)&&((k=h.response)==null?void 0:k.status)===404?"Order not found":Q.isAxiosError(h)&&((S=h.response)==null?void 0:S.status)===403?"You don't have permission to view this order":"Failed to load order details";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:F}),e.jsx("p",{className:"text-gray-600 mb-6",children:F==="Order not found"?"The order you are looking for does not exist or may have been deleted.":"Please try again or contact support if the problem persists."}),e.jsxs(X,{to:"/orders",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2"}),"Back to Orders"]})]})})})})}const N=x.order_type==="collection"?["received","preparing","ready","completed"]:["received","preparing","out_for_delivery","completed"],E=N.indexOf(x.status),L=x.status==="cancelled";return e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${d.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:d.message}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(X,{to:"/orders",className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[e.jsx(Ft,{className:"h-5 w-5 mr-2"}),"Back to Orders"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",x.order_number]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Placed on ",Mm(x.created_at)]})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold ${jy(x.status)}`,children:Rm(x.status)})]})]}),!L&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-orange-600 transition-all duration-500",style:{width:`${(E+1)/N.length*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:N.map((F,P)=>{const I=P<=E,H=Rm(F);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ${I?"bg-orange-600 border-orange-600":"bg-white border-gray-300"}`,children:I?e.jsx(Oe,{className:"h-6 w-6 text-white"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"})}),e.jsx("span",{className:`mt-2 text-sm font-medium ${I?"text-gray-900":"text-gray-500"}`,children:H})]},F)})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Order Type"}),e.jsx("p",{className:"text-base text-gray-900 capitalize",children:x.order_type})]})]}),x.order_type==="collection"&&x.collection_time_slot&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ke,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Collection Time"}),e.jsx("p",{className:"text-base text-gray-900",children:Mm(x.collection_time_slot)})]})]}),x.order_type==="delivery"&&x.delivery_address_snapshot&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(gt,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Delivery Address"}),e.jsxs("p",{className:"text-base text-gray-900",children:[x.delivery_address_snapshot.address_line1,x.delivery_address_snapshot.address_line2&&e.jsxs(e.Fragment,{children:[", ",x.delivery_address_snapshot.address_line2]})]}),e.jsxs("p",{className:"text-base text-gray-900",children:[x.delivery_address_snapshot.city,","," ",x.delivery_address_snapshot.postal_code]}),x.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Note: ",x.delivery_address_snapshot.delivery_instructions]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx($t,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("a",{href:`tel:${x.customer_phone}`,className:"text-base text-orange-600 hover:text-orange-700",children:x.customer_phone})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Nt,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("a",{href:`mailto:${x.customer_email}`,className:"text-base text-orange-600 hover:text-orange-700",children:x.customer_email})]})]})]})]}),x.special_instructions&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Special Instructions"}),e.jsx("p",{className:"text-sm text-yellow-800",children:x.special_instructions})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:g.map(F=>e.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:F.item_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",F.quantity]}),F.selected_customizations&&Object.keys(F.selected_customizations).length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(F.selected_customizations).map(([P,I])=>e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[P,":"]})," ",typeof I=="string"?I:I.name||I]},P))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Hn(F.line_total)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Hn(F.unit_price)," each"]})]})]},F.order_item_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:Hn(x.subtotal)})]}),x.discount_code&&x.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount (",x.discount_code,")"]}),e.jsxs("span",{children:["-",Hn(x.discount_amount)]})]}),x.delivery_fee&&x.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:Hn(x.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsx("span",{children:Hn(x.tax_amount)})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:Hn(x.total_amount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(hr,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"text-base text-gray-900",children:x.payment_method_type||"Cash on Collection"})]})]}),x.sumup_transaction_id&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"text-base text-gray-900 font-mono text-sm",children:x.sumup_transaction_id})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Oe,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payment Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-semibold ${x.payment_status==="paid"?"bg-green-100 text-green-800":x.payment_status==="pending"?"bg-yellow-100 text-yellow-800":x.payment_status==="refunded"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:x.payment_status?x.payment_status.charAt(0).toUpperCase()+x.payment_status.slice(1):"Unknown"})]})]}),x.loyalty_points_awarded>0&&e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-orange-900",children:["You earned ",x.loyalty_points_awarded," loyalty points from this order!"]})})]})]}),j.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status History"}),e.jsx("div",{className:"space-y-4",children:j.sort((F,P)=>new Date(P.changed_at).getTime()-new Date(F.changed_at).getTime()).map(F=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${jy(F.status)}`,children:F.status==="completed"?e.jsx(Oe,{className:"h-5 w-5"}):F.status==="cancelled"?e.jsx(jt,{className:"h-5 w-5"}):F.status==="preparing"?e.jsx(gS,{className:"h-5 w-5"}):F.status==="out_for_delivery"?e.jsx(zr,{className:"h-5 w-5"}):e.jsx(Je,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:Rm(F.status)}),e.jsx("p",{className:"text-sm text-gray-600",children:Mm(F.changed_at)}),F.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.notes})]})]},F.history_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.status!=="completed"&&x.status!=="cancelled"&&e.jsxs("button",{onClick:M,className:"flex items-center justify-center px-4 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(Je,{className:"h-5 w-5 mr-2"}),"Track Order"]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(ys,{className:"h-5 w-5 mr-2"}),"Invoice"]}),e.jsxs("button",{onClick:w,className:"flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(ps,{className:"h-5 w-5 mr-2"}),"Reorder"]}),v&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center justify-center px-4 py-3 bg-red-100 text-red-700 rounded-lg font-medium hover:bg-red-200 transition-colors",children:[e.jsx(jt,{className:"h-5 w-5 mr-2"}),"Cancel"]})]}),x.status==="cancelled"&&x.cancellation_reason&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Cancellation Reason"}),e.jsx("p",{className:"text-sm text-red-800",children:x.cancellation_reason})]})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>o(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(jt,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Cancel Order"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to cancel order #",x.order_number,"? This action cannot be undone."]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for cancellation ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"cancellation_reason",rows:3,value:l,onChange:F=>c(F.target.value),placeholder:"Please tell us why you're cancelling...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),p.isError&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to cancel order. Please try again or contact support."})})]})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:T,disabled:p.isPending||!l.trim(),className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:p.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Confirm Cancellation"}),e.jsx("button",{type:"button",onClick:()=>o(!1),disabled:p.isPending,className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})]})},La="https://123salama-lama-food-truck.launchpulse.ai",FT=async t=>(await Q.get(`${La}/api/loyalty`,{headers:{Authorization:`Bearer ${t}`}})).data,TT=async(t,s,r)=>(await Q.get(`${La}/api/loyalty/points/history`,{headers:{Authorization:`Bearer ${t}`},params:{limit:s,offset:r}})).data,MT=async t=>(await Q.get(`${La}/api/loyalty/rewards`,{headers:{Authorization:`Bearer ${t}`}})).data.rewards,RT=async t=>(await Q.get(`${La}/api/loyalty/redeemed-rewards`,{headers:{Authorization:`Bearer ${t}`}})).data.redeemed_rewards,LT=async t=>(await Q.get(`${La}/api/loyalty/badges`,{headers:{Authorization:`Bearer ${t}`}})).data,DT=async t=>(await Q.get(`${La}/api/loyalty/referral`,{headers:{Authorization:`Bearer ${t}`}})).data,OT=async(t,s)=>(await Q.post(`${La}/api/loyalty/rewards/${s}/redeem`,{},{headers:{Authorization:`Bearer ${t}`}})).data,$T=()=>{const t=Z(A=>A.authentication_state.current_user),s=Z(A=>A.authentication_state.auth_token),[r,n]=u.useState(1),[a,i]=u.useState(null),[o,l]=u.useState(!1),[c,d]=u.useState(null),[m,x]=u.useState(!1),[f,b]=u.useState(null),[h,p]=u.useState(!1),[v,g]=u.useState(null),j=50,y=Ue(),{data:w,isLoading:M,error:T}=ue({queryKey:["loyalty-account",t==null?void 0:t.user_id],queryFn:()=>FT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:N,isLoading:E,error:L}=ue({queryKey:["points-history",t==null?void 0:t.user_id,r],queryFn:()=>TT(s,j,(r-1)*j),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:k,isLoading:S,error:F}=ue({queryKey:["available-rewards",t==null?void 0:t.user_id],queryFn:()=>MT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:P}=ue({queryKey:["redeemed-rewards",t==null?void 0:t.user_id],queryFn:()=>RT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:I,isLoading:H,error:z}=ue({queryKey:["badges",t==null?void 0:t.user_id],queryFn:()=>LT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:B}=ue({queryKey:["referral-info",t==null?void 0:t.user_id],queryFn:()=>DT(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),C=ce({mutationFn:A=>OT(s,A),onSuccess:A=>{y.invalidateQueries({queryKey:["loyalty-account",t==null?void 0:t.user_id]}),y.invalidateQueries({queryKey:["redeemed-rewards",t==null?void 0:t.user_id]}),y.invalidateQueries({queryKey:["available-rewards",t==null?void 0:t.user_id]}),b(A),l(!1),x(!0),i(null)},onError:A=>{var $,re;g({type:"error",message:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to redeem reward. Please try again."}),setTimeout(()=>g(null),3e3),i(null),l(!1)}}),R=A=>{if(!w||w.current_points_balance<A.points_cost){g({type:"error",message:`You need ${A.points_cost-((w==null?void 0:w.current_points_balance)||0)} more points to redeem this reward.`}),setTimeout(()=>g(null),3e3);return}d(A),l(!0)},_=()=>{c&&(i(c.reward_id),C.mutate(c.reward_id))},q=async()=>{if(B!=null&&B.referral_code)try{await navigator.clipboard.writeText(B.referral_code),p(!0),setTimeout(()=>p(!1),2e3)}catch(A){console.error("Failed to copy:",A)}},O=async A=>{try{await navigator.clipboard.writeText(A),g({type:"success",message:"Reward code copied to clipboard!"}),setTimeout(()=>g(null),3e3)}catch($){console.error("Failed to copy:",$)}},V=()=>{B!=null&&B.referral_link&&(navigator.share?navigator.share({title:"Join Salama Lama Food Truck",text:"Use my referral code to get rewards!",url:B.referral_link}).catch(A=>console.error("Share failed:",A)):(navigator.clipboard.writeText(B.referral_link),g({type:"success",message:"Referral link copied to clipboard!"}),setTimeout(()=>g(null),3e3)))},D=Math.ceil(((N==null?void 0:N.total)||0)/j),se=(()=>{if(!w)return null;const A=[100,250,500,1e3,2500,5e3],$=w.current_points_balance,re=A.find(ve=>ve>$);return re?{points:re,remaining:re-$,progress:$/re*100}:null})(),le=A=>new Date(A).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),K=A=>A.replace("_"," ").replace(/\b\w/g,$=>$.toUpperCase());return e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${v.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:v.message}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"My Rewards"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Earn points, unlock rewards, and share the love with friends!"})]}),M?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded w-1/2 mx-auto"})]}):T?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl mb-12",children:e.jsx("p",{className:"font-medium",children:"Failed to load loyalty account"})}):w?e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-xl p-8 mb-12 text-white",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-blue-100 text-lg mb-2",children:"Your Points Balance"}),e.jsx("p",{className:"text-6xl font-bold mb-2",children:w.current_points_balance.toLocaleString()}),e.jsxs("p",{className:"text-blue-100",children:[w.total_points_earned.toLocaleString()," total earned  ",w.total_points_redeemed.toLocaleString()," redeemed"]})]}),se&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-sm text-blue-100",children:"Next Milestone"}),e.jsxs("p",{className:"text-sm font-medium",children:[se.points.toLocaleString()," points"]})]}),e.jsx("div",{className:"w-full bg-blue-800 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-white h-full rounded-full transition-all duration-500",style:{width:`${Math.min(se.progress,100)}%`}})}),e.jsxs("p",{className:"text-sm text-blue-100 mt-2 text-center",children:["Only ",se.remaining.toLocaleString()," more points to go!"]})]})]}):null,e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Redeem Your Points"}),e.jsx(X,{to:"/menu",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Earn More Points "})]}),S?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(A=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]},A))}):F?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load rewards"})}):k&&k.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.filter(A=>A.status==="active").map(A=>{const $=w&&w.current_points_balance>=A.points_cost,re=A.availability_status==="unavailable"||A.status==="out_of_stock";return e.jsxs("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-200 hover:shadow-xl ${!$||re?"opacity-60":""}`,children:[A.image_url&&e.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:e.jsx("img",{src:A.image_url,alt:A.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:A.name}),A.availability_status==="limited"&&e.jsx("span",{className:"bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded",children:"Limited"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:A.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-5 h-5 text-blue-600 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:A.points_cost.toLocaleString()})]}),e.jsx("button",{onClick:()=>R(A),disabled:!$||re||a===A.reward_id,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${!$||re?"bg-gray-200 text-gray-500 cursor-not-allowed":a===A.reward_id?"bg-blue-400 text-white cursor-wait":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg"}`,children:a===A.reward_id?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Redeeming..."]}):re?"Out of Stock":$?"Redeem":"Not Enough Points"})]})]})]},A.reward_id)})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No rewards available at the moment."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Check back soon for exciting new rewards!"})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Your Achievements"}),H?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[1,2,3,4,5,6].map(A=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})]},A))}):z?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load badges"})}):I?e.jsxs("div",{className:"space-y-8",children:[I.earned.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Earned Badges"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:I.earned.map(A=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-200 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:A.icon_url?e.jsx("img",{src:A.icon_url,alt:A.name,className:"w-10 h-10"}):e.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:A.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:A.description}),A.earned_at&&e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:le(A.earned_at)})]},A.badge_id))})]}),I.locked.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Locked Badges"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:I.locked.map(A=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg opacity-60 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),e.jsx("h4",{className:"font-semibold text-gray-700 text-sm mb-1",children:A.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:A.description})]},A.badge_id))})]})]}):null]}),P&&P.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Redeemed Rewards"}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reward Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Redeemed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"font-mono font-semibold text-blue-600",children:A.reward_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.points_deducted.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A.usage_status==="unused"?"bg-green-100 text-green-800":A.usage_status==="used"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:A.usage_status==="unused"?"Active":A.usage_status==="used"?"Used":"Expired"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:le(A.redeemed_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.expires_at?le(A.expires_at):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.usage_status==="unused"&&e.jsx("button",{onClick:()=>O(A.reward_code),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Copy Code"})})]},A.redeemed_reward_id))})]})})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Points History"}),E?e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(A=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]},A))})}):L?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load points history"})}):N&&N.transactions.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.transactions.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:le(A.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A.transaction_type==="earned"?"bg-green-100 text-green-800":A.transaction_type==="redeemed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:K(A.transaction_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:A.reason||(A.order_id?`Order #${A.order_id.slice(-8)}`:"-")}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold text-right ${A.points_amount>0?"text-green-600":"text-red-600"}`,children:[A.points_amount>0?"+":"",A.points_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:A.running_balance.toLocaleString()})]},A.transaction_id))})]})}),D>1&&e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>n(A=>Math.max(1,A-1)),disabled:r===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>n(A=>Math.min(D,A+1)),disabled:r===D,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:r})," of"," ",e.jsx("span",{className:"font-medium",children:D})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>n(A=>Math.max(1,A-1)),disabled:r===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,D)},(A,$)=>{const re=$+1;return e.jsx("button",{onClick:()=>n(re),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${r===re?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:re},re)}),e.jsxs("button",{onClick:()=>n(A=>Math.min(D,A+1)),disabled:r===D,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No points transactions yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start ordering to earn points!"})]})]}),B&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Refer a Friend"}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-700 rounded-xl shadow-xl p-8 text-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Share the Love, Earn Rewards!"}),e.jsx("p",{className:"text-green-100",children:"Invite your friends and you'll both get rewarded when they place their first order."})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-green-100 font-medium",children:"Your Referral Code"}),e.jsx("button",{onClick:q,className:"bg-white text-green-700 px-4 py-2 rounded-lg font-medium hover:bg-green-50 transition-colors",children:h?e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copied!"]}):"Copy Code"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 text-center",children:e.jsx("span",{className:"text-3xl font-bold text-green-700 tracking-wider",children:B.referral_code})})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("button",{onClick:V,className:"bg-white text-green-700 px-8 py-3 rounded-lg font-medium hover:bg-green-50 transition-all duration-200 hover:shadow-lg",children:"Share Referral Link"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:B.referral_count}),e.jsx("p",{className:"text-green-100 text-sm",children:"Total Referrals"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:B.successful_referrals}),e.jsx("p",{className:"text-green-100 text-sm",children:"Successful"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:B.total_points_earned}),e.jsx("p",{className:"text-green-100 text-sm",children:"Points Earned"})]})]})]})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Want to earn more points?"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx(X,{to:"/menu",className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 hover:shadow-lg",children:"Order Now"}),e.jsx(X,{to:"/orders",className:"bg-white text-blue-600 border-2 border-blue-600 px-8 py-3 rounded-lg font-medium hover:bg-blue-50 transition-all duration-200",children:"View My Orders"})]})]})]})}),o&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Confirm Redemption"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to redeem ",e.jsx("strong",{children:c.points_cost.toLocaleString()})," points for"," ",e.jsx("strong",{children:c.name}),"?"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Your new balance will be:"," ",e.jsxs("strong",{children:[w?(w.current_points_balance-c.points_cost).toLocaleString():"0"," ","points"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"flex-1 px-6 py-3 rounded-lg font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,className:"flex-1 px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Confirm"})]})]})}),m&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reward Redeemed!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your reward code is:"}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4",children:e.jsx("span",{className:"text-3xl font-bold text-blue-700 tracking-wider",children:f.reward_code})}),e.jsx("button",{onClick:()=>O(f.reward_code),className:"text-blue-600 hover:text-blue-700 font-medium mb-4",children:"Copy Code"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Use this code at checkout to apply your reward.",f.expires_at&&` Expires on ${le(f.expires_at)}.`]})]}),e.jsx("button",{onClick:()=>{x(!1),b(null)},className:"w-full px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Got It"})]})})]})},IT=async()=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/catering/info")).data,zT=()=>{const[t,s]=u.useState(null),{data:r,isLoading:n,error:a}=ue({queryKey:["cateringInfo"],queryFn:IT,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),i=[{question:"What is the minimum order requirement for catering?",answer:"Our minimum catering order is for 20 guests. We can accommodate events of any size, from intimate gatherings to large corporate functions."},{question:"How far in advance should I book catering?",answer:"We recommend booking at least 7 days in advance to ensure availability. However, we can sometimes accommodate last-minute requests depending on our schedule."},{question:"Do you provide equipment and setup?",answer:"Yes! We provide all necessary serving equipment, setup, and cleanup. Our team will arrive early to set up and will handle all cleanup after your event."},{question:"Can you accommodate dietary restrictions?",answer:"Absolutely! We offer vegetarian, vegan, gluten-free, halal, and nut-free options. Just let us know your requirements when submitting your inquiry."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, bank transfers, and company purchase orders for corporate events. A deposit is required to secure your booking."},{question:"What is your cancellation policy?",answer:"Cancellations made 72 hours or more before the event will receive a full refund of the deposit. Cancellations within 72 hours are subject to a 50% cancellation fee."}],o=[{name:"Corporate Events",description:"Team lunches, meetings, conferences",icon:""},{name:"Weddings",description:"Ceremony receptions, rehearsal dinners",icon:""},{name:"Private Parties",description:"Birthdays, anniversaries, celebrations",icon:""},{name:"Festivals & Markets",description:"Food festivals, farmers markets",icon:""},{name:"Community Events",description:"Fundraisers, charity events, gatherings",icon:""}],l=[{number:1,title:"Submit Inquiry",description:"Fill out our catering inquiry form with your event details",icon:""},{number:2,title:"Receive Custom Quote",description:"We'll send you a detailed quote within 24 hours",icon:""},{number:3,title:"Finalize Details",description:"Work with us to customize your menu and confirm arrangements",icon:""},{number:4,title:"Enjoy Your Event",description:"We handle everything - setup, service, and cleanup",icon:""}],c=d=>{s(t===d?null:d)};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"relative bg-gradient-to-br from-orange-50 to-red-50 py-16 md:py-24 lg:py-32",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:"Catering for Every Occasion"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-700 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Bring the authentic taste of our food truck to your next event. From corporate lunches to weddings, we make every occasion special."}),e.jsx(X,{to:"/catering/inquiry",className:"inline-block bg-orange-600 hover:bg-orange-700 text-white font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-lg hover:scale-105",children:"Request a Quote"})]})})}),n&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading catering information..."})]})}),a&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-800 font-medium mb-4",children:"Failed to load catering information"}),e.jsx("p",{className:"text-red-600 text-sm mb-4",children:a.message}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Please try refreshing the page or contact us directly."})]})}),!n&&!a&&r&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Our Catering Services"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:r.description||"We bring our award-winning menu directly to your event. Our mobile catering service combines convenience with exceptional food quality, ensuring your guests enjoy a memorable dining experience. Whether it's an intimate gathering or a large celebration, we have the perfect solution for you."})]})})}),e.jsx("section",{className:"py-16 md:py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Events We Serve"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"From corporate functions to private celebrations, we cater to all types of events"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((d,m)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"text-5xl mb-4",children:d.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.name}),e.jsx("p",{className:"text-gray-600",children:d.description})]},m))})]})}),r.packages&&r.packages.length>0&&e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Packages"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose from our curated packages or let us create a custom menu for your event"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.packages.map((d,m)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 rounded-xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-all duration-200 hover:scale-105",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:d.name}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:d.description}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-baseline justify-center mb-2",children:[e.jsxs("span",{className:"text-4xl font-bold text-orange-600",children:["",Number(d.price_per_person||0).toFixed(2)]}),e.jsx("span",{className:"text-gray-600 ml-2",children:"per person"})]}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Minimum ",d.min_guests," guests"]})]}),e.jsx(X,{to:`/catering/inquiry?package=${encodeURIComponent(d.name)}`,className:"block w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold text-center px-6 py-3 rounded-lg transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",children:"Request Quote"})]},m))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our simple 4-step process makes catering your event effortless"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map(d=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-6",children:[e.jsx("div",{className:"text-6xl mb-2",children:d.icon}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-orange-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg shadow-lg",children:d.number})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.title}),e.jsx("p",{className:"text-gray-600",children:d.description})]},d.number))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Have questions? We have answers."})]}),e.jsx("div",{className:"space-y-4",children:i.map((d,m)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsxs("button",{onClick:()=>c(m),className:"w-full px-6 py-4 text-left flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-lg","aria-expanded":t===m,"aria-label":`Toggle FAQ: ${d.question}`,children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900 pr-4",children:d.question}),e.jsx("svg",{className:`w-6 h-6 text-orange-600 flex-shrink-0 transition-transform duration-200 ${t===m?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t===m&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:d.answer})})]},m))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-gradient-to-br from-orange-600 to-red-600",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Ready to Make Your Event Special?"}),e.jsx("p",{className:"text-xl text-orange-100 mb-8 leading-relaxed",children:"Get a custom quote today and let us handle all the details. Our team is ready to make your event unforgettable."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(X,{to:"/catering/inquiry",className:"inline-block bg-white hover:bg-gray-100 text-orange-600 font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",children:"Request a Quote"}),e.jsx(X,{to:"/contact",className:"inline-block bg-orange-700 hover:bg-orange-800 text-white font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",children:"Contact Us"})]}),e.jsxs("p",{className:"mt-6 text-orange-100 text-sm",children:["Questions? Call us at"," ",e.jsx("a",{href:"tel:+353-1-234-5678",className:"underline hover:text-white transition-colors",children:"+353-1-234-5678"})," ","or email"," ",e.jsx("a",{href:"mailto:catering@salamalama.ie",className:"underline hover:text-white transition-colors",children:"catering@salamalama.ie"})]})]})})]})]})},BT="https://123salama-lama-food-truck.launchpulse.ai",qT=()=>{const t=Be(),s=Z(N=>N.authentication_state.current_user),r=Z(N=>N.authentication_state.auth_token),[n,a]=u.useState({contact_name:"",contact_email:"",contact_phone:"",company_name:null,event_type:"",event_type_other:null,event_date:"",event_start_time:"",event_end_time:"",event_location_address:"",event_location_city:"Dublin",event_location_postal_code:"",event_location_type:"",guest_count:0,guest_count_min:null,guest_count_max:null,dietary_requirements:[],dietary_notes:null,menu_preferences:null,preferred_package:null,budget_range:null,additional_details:null,marketing_opt_in:!1}),[i,o]=u.useState({}),[l,c]=u.useState(!1),[d,m]=u.useState(null);u.useEffect(()=>{s&&a(N=>({...N,contact_name:`${s.first_name} ${s.last_name}`,contact_email:s.email,contact_phone:s.phone}))},[s]);const x=ce({mutationFn:async N=>{const E={"Content-Type":"application/json"};return r&&(E.Authorization=`Bearer ${r}`),(await Q.post(`${BT}/api/catering/inquiry`,N,{headers:E})).data},onSuccess:N=>{m(N),c(!0),a({contact_name:s?`${s.first_name} ${s.last_name}`:"",contact_email:(s==null?void 0:s.email)||"",contact_phone:(s==null?void 0:s.phone)||"",company_name:null,event_type:"",event_type_other:null,event_date:"",event_start_time:"",event_end_time:"",event_location_address:"",event_location_city:"Dublin",event_location_postal_code:"",event_location_type:"",guest_count:0,guest_count_min:null,guest_count_max:null,dietary_requirements:[],dietary_notes:null,menu_preferences:null,preferred_package:null,budget_range:null,additional_details:null,marketing_opt_in:!1}),o({})},onError:N=>{var L,k;console.error("Catering inquiry submission error:",N);const E=((k=(L=N.response)==null?void 0:L.data)==null?void 0:k.message)||N.message||"Failed to submit inquiry";o({submit:E})}}),f=N=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N),b=N=>/^\+?[\d\s\-()]{10,20}$/.test(N),h=N=>{if(!N)return!1;let E=N;if(N.includes(":")&&N.split(":").length===3){const k=N.split(":");E=`${k[0]}:${k[1]}`}return/^([01]\d|2[0-3]):([0-5]\d)$/.test(E)},p=N=>{if(!N)return!1;const E=new Date;E.setHours(0,0,0,0);const L=new Date(N);L.setHours(0,0,0,0);const k=new Date(E);return k.setDate(k.getDate()+7),L>=k},v=u.useCallback((N,E)=>{if(["contact_name","contact_email","contact_phone","event_type","event_date","event_start_time","event_end_time","event_location_address","event_location_city","event_location_postal_code","event_location_type","guest_count"].includes(N)&&(!E||typeof E=="string"&&E.trim()===""||typeof E=="number"&&E<=0))return"This field is required";switch(N){case"contact_email":if(E&&!f(E))return"Please enter a valid email address";break;case"contact_phone":if(E&&!b(E))return"Please enter a valid phone number (10-20 digits)";break;case"event_date":if(E&&!p(E))return"Event date must be at least 7 days from today";break;case"event_start_time":case"event_end_time":if(E&&!h(E))return"Please enter time in HH:MM format (e.g., 14:30)";break;case"guest_count":if(E&&(typeof E!="number"||E<=0))return"Guest count must be a positive number";break;case"event_type_other":if(n.event_type==="other"&&(!E||E.trim()===""))return"Please specify the event type";break}return null},[n.event_type]),g=u.useCallback(()=>{const N={};return console.log("Validating form with formData:",n),Object.keys(n).forEach(E=>{const L=v(E,n[E]);L&&(console.log(`Validation error for ${E}:`,L,"Value:",n[E]),N[E]=L)}),console.log("Total validation errors:",Object.keys(N).length,N),o(N),{isValid:Object.keys(N).length===0,errors:N}},[n,v]),j=(N,E)=>{a(L=>({...L,[N]:E})),i[N]&&o(L=>{const k={...L};return delete k[N],k})},y=N=>{if(N==="contact_email"&&typeof n[N]=="string"){const L=n[N].trim();L!==n[N]&&a(k=>({...k,[N]:L}))}const E=v(N,n[N]);E&&o(L=>({...L,[N]:E}))},w=N=>{a(E=>{const L=E.dietary_requirements||[],k=L.includes(N)?L.filter(S=>S!==N):[...L,N];return{...E,dietary_requirements:k}})},M=async N=>{N.preventDefault();const E=g();if(!E.isValid){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const k=Object.keys(E.errors)[0];if(k){const S=document.getElementById(k);S==null||S.focus(),S==null||S.scrollIntoView({behavior:"smooth",block:"center"})}},300);return}const L={...n,user_id:(s==null?void 0:s.user_id)||void 0,contact_email:n.contact_email.trim(),guest_count:Number(n.guest_count),guest_count_min:n.guest_count_min?Number(n.guest_count_min):null,guest_count_max:n.guest_count_max?Number(n.guest_count_max):null,dietary_requirements:n.dietary_requirements.length>0?n.dietary_requirements:null};x.mutate(L)},T=()=>{c(!1),t(s?"/catering/inquiries":"/menu")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Request a Catering Quote"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Tell us about your event and we'll get back to you within 24 hours"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",noValidate:!0,children:[i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-red-700",children:i.submit})]})}),Object.keys(i).length>0&&!i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-red-700 mb-1",children:"Please correct the following errors:"}),e.jsx("ul",{className:"text-sm text-red-600 list-disc list-inside space-y-1",children:Object.entries(i).map(([N,E])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-medium",children:[N.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase()),":"]})," ",E]},N))})]})]})}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"contact_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"contact_name",value:n.contact_name,onChange:N=>j("contact_name",N.target.value),onBlur:()=>y("contact_name"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_name?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"John Smith"}),i.contact_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"contact_email",value:n.contact_email,onChange:N=>j("contact_email",N.target.value),onBlur:()=>y("contact_email"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_email?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"john.smith@example.com"}),i.contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",id:"contact_phone",value:n.contact_phone,onChange:N=>j("contact_phone",N.target.value),onBlur:()=>y("contact_phone"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_phone?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"+353 1 234 5678"}),i.contact_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_phone})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company / Organization Name (Optional)"}),e.jsx("input",{type:"text",id:"company_name",value:n.company_name||"",onChange:N=>j("company_name",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"ABC Corporation"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"event_type",value:n.event_type,onChange:N=>j("event_type",N.target.value),onBlur:()=>y("event_type"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_type?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,children:[e.jsx("option",{value:"",children:"Select event type"}),e.jsx("option",{value:"corporate",children:"Corporate Event"}),e.jsx("option",{value:"wedding",children:"Wedding"}),e.jsx("option",{value:"birthday",children:"Birthday Party"}),e.jsx("option",{value:"meeting",children:"Meeting / Conference"}),e.jsx("option",{value:"other",children:"Other"})]}),i.event_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_type})]}),n.event_type==="other"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_type_other",className:"block text-sm font-medium text-gray-700 mb-1",children:["Please Specify ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_type_other",value:n.event_type_other||"",onChange:N=>j("event_type_other",N.target.value||null),onBlur:()=>y("event_type_other"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_type_other?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"Describe your event type"}),i.event_type_other&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_type_other})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Date ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",id:"event_date",name:"event_date",autoComplete:"off",value:n.event_date,onChange:N=>{const E=N.target.value;a(L=>({...L,event_date:E})),i.event_date&&o(L=>{const k={...L};return delete k.event_date,k})},onBlur:N=>{const E=N.target.value,L=v("event_date",E);L&&o(k=>({...k,event_date:L}))},min:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_date?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_date}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum 7 days lead time required"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_start_time",className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"time",id:"event_start_time",name:"event_start_time",autoComplete:"off",value:n.event_start_time,onChange:N=>{const E=N.target.value;a(L=>({...L,event_start_time:E})),i.event_start_time&&o(L=>{const k={...L};return delete k.event_start_time,k})},onBlur:N=>{const E=N.target.value,L=v("event_start_time",E);L&&o(k=>({...k,event_start_time:L}))},className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_start_time?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_start_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_end_time",className:"block text-sm font-medium text-gray-700 mb-1",children:["End Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"time",id:"event_end_time",name:"event_end_time",autoComplete:"off",value:n.event_end_time,onChange:N=>{const E=N.target.value;a(L=>({...L,event_end_time:E})),i.event_end_time&&o(L=>{const k={...L};return delete k.event_end_time,k})},onBlur:N=>{const E=N.target.value,L=v("event_end_time",E);L&&o(k=>({...k,event_end_time:L}))},className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_end_time?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_end_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_end_time})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Venue Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"event_location_address",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_address",value:n.event_location_address,onChange:N=>j("event_location_address",N.target.value),onBlur:()=>y("event_location_address"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_address?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"123 Main Street, Venue Name"}),i.event_location_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_address})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_location_city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_city",value:n.event_location_city,onChange:N=>j("event_location_city",N.target.value),onBlur:()=>y("event_location_city"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_city?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"Dublin"}),i.event_location_city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_location_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:["Postal Code ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_postal_code",value:n.event_location_postal_code,onChange:N=>j("event_location_postal_code",N.target.value),onBlur:()=>y("event_location_postal_code"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_postal_code?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"D01 A1B2"}),i.event_location_postal_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_postal_code})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"event_location_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Venue Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"event_location_type",value:n.event_location_type,onChange:N=>j("event_location_type",N.target.value),onBlur:()=>y("event_location_type"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_type?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,children:[e.jsx("option",{value:"",children:"Select venue type"}),e.jsx("option",{value:"office",children:"Office / Corporate Space"}),e.jsx("option",{value:"home",children:"Private Home"}),e.jsx("option",{value:"venue",children:"Event Venue / Hall"}),e.jsx("option",{value:"outdoor",children:"Outdoor Location"}),e.jsx("option",{value:"other",children:"Other"})]}),i.event_location_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_type})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Guest Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"guest_count",className:"block text-sm font-medium text-gray-700 mb-1",children:["Expected Guests ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"guest_count",min:"1",value:n.guest_count||"",onChange:N=>j("guest_count",parseInt(N.target.value)||0),onBlur:()=>y("guest_count"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.guest_count?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"50"}),i.guest_count&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.guest_count})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guest_count_min",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum (Optional)"}),e.jsx("input",{type:"number",id:"guest_count_min",min:"1",value:n.guest_count_min||"",onChange:N=>j("guest_count_min",N.target.value?parseInt(N.target.value):null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guest_count_max",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum (Optional)"}),e.jsx("input",{type:"number",id:"guest_count_max",min:"1",value:n.guest_count_max||"",onChange:N=>j("guest_count_max",N.target.value?parseInt(N.target.value):null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"60"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dietary Requirements"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select all that apply:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:["vegetarian","vegan","gluten-free","halal","nut-free","dairy-free"].map(N=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.dietary_requirements.includes(N),onChange:()=>w(N),className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:N.replace("-"," ")})]},N))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dietary_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Dietary Notes (Optional)"}),e.jsx("textarea",{id:"dietary_notes",rows:3,value:n.dietary_notes||"",onChange:N=>j("dietary_notes",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Please specify any additional dietary requirements or allergies..."})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Menu Preferences"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred_package",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Package (Optional)"}),e.jsxs("select",{id:"preferred_package",value:n.preferred_package||"",onChange:N=>j("preferred_package",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx("option",{value:"",children:"Select a package"}),e.jsx("option",{value:"standard",children:"Standard Package"}),e.jsx("option",{value:"premium",children:"Premium Package"}),e.jsx("option",{value:"luxury",children:"Luxury Package"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"menu_preferences",className:"block text-sm font-medium text-gray-700 mb-1",children:"Menu Preferences & Special Requests (Optional)"}),e.jsx("textarea",{id:"menu_preferences",rows:4,value:n.menu_preferences||"",onChange:N=>j("menu_preferences",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Describe your ideal menu or specific items you'd like to include..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budget_range",className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Range (Optional)"}),e.jsxs("select",{id:"budget_range",value:n.budget_range||"",onChange:N=>j("budget_range",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"under-500",children:"Under 500"}),e.jsx("option",{value:"500-1000",children:"500 - 1,000"}),e.jsx("option",{value:"1000-2500",children:"1,000 - 2,500"}),e.jsx("option",{value:"2500-5000",children:"2,500 - 5,000"}),e.jsx("option",{value:"over-5000",children:"Over 5,000"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Additional Details"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"additional_details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Any other details we should know? (Optional)"}),e.jsx("textarea",{id:"additional_details",rows:5,value:n.additional_details||"",onChange:N=>j("additional_details",N.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Setup requirements, equipment needs, timeline, special considerations..."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"marketing_opt_in",checked:n.marketing_opt_in,onChange:N=>j("marketing_opt_in",N.target.checked),className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500 mt-0.5"}),e.jsx("label",{htmlFor:"marketing_opt_in",className:"ml-3 text-sm text-gray-700",children:"Yes, I'd like to receive updates about catering services and special offers from Salama Lama"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["By submitting this form, you agree to our"," ",e.jsx(X,{to:"/terms",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Terms & Conditions"})," ","and"," ",e.jsx(X,{to:"/privacy",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Privacy Policy"}),"."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{type:"submit",disabled:x.isPending,className:"flex-1 bg-gradient-to-r from-orange-600 to-orange-700 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-orange-700 hover:to-orange-800 focus:outline-none focus:ring-4 focus:ring-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:x.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Inquiry"}),e.jsx(X,{to:"/catering",className:"flex-none sm:w-auto px-8 py-4 rounded-lg font-semibold text-lg border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200 text-center",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help or have questions?"," ",e.jsx(X,{to:"/contact",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Contact us"})," ","or call"," ",e.jsx("a",{href:"tel:+35312345678",className:"text-orange-600 hover:text-orange-700 font-medium",children:"+353 1 234 5678"})]})})]})}),l&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-full bg-green-100 p-4",children:e.jsx("svg",{className:"h-12 w-12 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We've received your catering inquiry"}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-orange-800 font-semibold",children:["Inquiry ID: ",d.inquiry_number]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"We'll review your request and get back to you within 24 hours with a custom quote."})]}),e.jsxs("div",{className:"space-y-3",children:[s&&e.jsx("button",{onClick:T,className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200",children:"View My Inquiries"}),e.jsx("button",{onClick:T,className:"w-full border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200",children:s?"Back to Home":"Browse Menu"})]})]})})]})},fo={new:{label:"New",color:"text-gray-700",bgColor:"bg-gray-100"},in_progress:{label:"In Progress",color:"text-yellow-700",bgColor:"bg-yellow-100"},quoted:{label:"Quote Sent",color:"text-blue-700",bgColor:"bg-blue-100"},confirmed:{label:"Confirmed",color:"text-green-700",bgColor:"bg-green-100"},completed:{label:"Completed",color:"text-green-800",bgColor:"bg-green-200"},cancelled:{label:"Cancelled",color:"text-red-700",bgColor:"bg-red-100"}},UT={corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:"Other"},WT=()=>{var M;const[t,s]=ct(),r=Ue(),n=Z(T=>T.authentication_state.auth_token),[a,i]=u.useState(null),[o,l]=u.useState(!1),c=t.get("status")||null,{data:d,isLoading:m,error:x}=ue({queryKey:["catering-inquiries",c],queryFn:async()=>{const T={};return c&&(T.status=c),(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries",{headers:{Authorization:`Bearer ${n}`},params:T})).data},enabled:!!n,staleTime:6e4,refetchOnWindowFocus:!1}),f=(d==null?void 0:d.inquiries)||[],b=ce({mutationFn:async T=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${T}/cancel`,{},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["catering-inquiries"]}),l(!1),i(null)}}),h=T=>{s(T?{status:T}:{})},p=T=>{i(T),l(!0)},v=()=>{a&&b.mutate(a)},g=()=>{l(!1),i(null)},j=T=>new Date(T).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}),y=T=>{const N=new Date(T),L=new Date().getTime()-N.getTime(),k=Math.floor(L/(1e3*60*60*24));if(k===0)return"Today";if(k===1)return"Yesterday";if(k<7)return`${k} days ago`;if(k<30){const S=Math.floor(k/7);return`${S} ${S===1?"week":"weeks"} ago`}else{const S=Math.floor(k/30);return`${S} ${S===1?"month":"months"} ago`}},w=T=>T==="new"||T==="in_progress";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Catering Inquiries"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track and manage your catering requests"})]}),e.jsxs(X,{to:"/catering/inquiry",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Inquiry"]})]}),e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex space-x-8 min-w-max","aria-label":"Filter by status",children:[e.jsx("button",{onClick:()=>h(null),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${c?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-orange-600 text-orange-600"}`,children:"All Inquiries"}),Object.entries(fo).map(([T,N])=>e.jsx("button",{onClick:()=>h(T),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${c===T?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:N.label},T))]})})]}),m&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your inquiries..."})]})}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-6 w-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading inquiries"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:x instanceof Error?x.message:"An unexpected error occurred"}),e.jsx("button",{onClick:()=>r.invalidateQueries({queryKey:["catering-inquiries"]}),className:"mt-2 text-sm font-medium text-red-600 hover:text-red-500",children:"Try again"})]})]})}),!m&&!x&&f.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:c?"No inquiries found":"No catering inquiries yet"}),e.jsx("p",{className:"mt-2 text-gray-600 max-w-md mx-auto",children:c?`You don't have any ${(M=fo[c])==null?void 0:M.label.toLowerCase()} inquiries.`:"You haven't submitted any catering inquiries yet. Let us help make your event special!"}),e.jsx("div",{className:"mt-6",children:c?e.jsx("button",{onClick:()=>h(null),className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"View All Inquiries"}):e.jsxs(X,{to:"/catering/inquiry",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Submit Your First Inquiry"]})})]}),!m&&!x&&f.length>0&&e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:f.map(T=>{var N,E,L;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.inquiry_number}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${(N=fo[T.status])==null?void 0:N.color} ${(E=fo[T.status])==null?void 0:E.bgColor}`,children:(L=fo[T.status])==null?void 0:L.label})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted ",y(T.submitted_at)]})]})})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:UT[T.event_type]||T.event_type}),T.company_name&&e.jsx("p",{className:"text-sm text-gray-600",children:T.company_name})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:j(T.event_date)}),e.jsx("p",{className:"text-sm text-gray-600",children:T.event_start_time})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsxs("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-900",children:T.event_location_city})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-900",children:T.guest_count_min&&T.guest_count_max?`${T.guest_count_min} - ${T.guest_count_max} guests`:`${T.guest_count} guests`})})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsxs(X,{to:`/catering/inquiries/${T.inquiry_id}`,className:"flex-1 inline-flex justify-center items-center px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]}),w(T.status)&&e.jsxs("button",{onClick:()=>p(T.inquiry_id),disabled:b.isPending,className:"inline-flex justify-center items-center px-4 py-2 bg-white border border-red-300 text-red-700 font-medium rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})})]},T.inquiry_id)})})]})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:g}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Cancel Inquiry"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to cancel this catering inquiry? This action cannot be undone."})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:v,disabled:b.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel Inquiry"}),e.jsx("button",{type:"button",onClick:g,disabled:b.isPending,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"No, Keep It"})]}),b.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to cancel inquiry. Please try again."})})]})]})})]})},VT=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data},HT=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}/accept-quote`,{},{headers:{Authorization:`Bearer ${s}`}})).data},QT=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}/cancel`,{},{headers:{Authorization:`Bearer ${s}`}})).data},wy=t=>new Date(t).toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ny=t=>{const[s,r]=t.split(":"),n=parseInt(s,10),a=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${r} ${a}`},Nc=t=>{const s=new Date(t);return s.toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})+" at "+s.toLocaleTimeString("en-IE",{hour:"numeric",minute:"2-digit",hour12:!0})},za=t=>`${t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,KT=(t,s)=>({corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:s||"Other"})[t]||t,YT=t=>({new:"bg-gray-100 text-gray-800 border-gray-300",in_progress:"bg-yellow-100 text-yellow-800 border-yellow-300",quoted:"bg-blue-100 text-blue-800 border-blue-300",confirmed:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",cancelled:"bg-red-100 text-red-800 border-red-300"})[t]||"bg-gray-100 text-gray-800 border-gray-300",GT=t=>({new:"Pending Review",in_progress:"Under Review",quoted:"Quote Sent",confirmed:"Confirmed",completed:"Completed",cancelled:"Cancelled"})[t]||t,XT=t=>new Date(t)<new Date,JT=()=>{var p,v;const{inquiry_id:t}=Rs(),s=Ue(),r=Z(g=>g.authentication_state.auth_token),{data:n,isLoading:a,error:i}=ue({queryKey:["catering-inquiry",t],queryFn:()=>VT(t,r),enabled:!!t&&!!r,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),o=u.useMemo(()=>!(n!=null&&n.quotes)||n.quotes.length===0?null:n.quotes.find(g=>g.accepted_at===null)||null,[n]),l=ce({mutationFn:()=>HT(t,r),onSuccess:g=>{s.setQueryData(["catering-inquiry",t],g),s.invalidateQueries({queryKey:["catering-inquiries"]}),alert("Quote accepted successfully! We will contact you shortly to finalize details.")},onError:g=>{var y,w;const j=((w=(y=g.response)==null?void 0:y.data)==null?void 0:w.message)||g.message||"Failed to accept quote";alert(`Error: ${j}`)}}),c=ce({mutationFn:()=>QT(t,r),onSuccess:g=>{s.setQueryData(["catering-inquiry",t],g),s.invalidateQueries({queryKey:["catering-inquiries"]}),alert("Inquiry cancelled successfully.")},onError:g=>{var y,w;const j=((w=(y=g.response)==null?void 0:y.data)==null?void 0:w.message)||g.message||"Failed to cancel inquiry";alert(`Error: ${j}`)}}),d=()=>{if(!o)return;window.confirm("Are you sure you want to accept this quote? This will confirm your booking.")&&l.mutate()},m=()=>{window.confirm("Are you sure you want to cancel this inquiry? This action cannot be undone.")&&c.mutate()},x=()=>{o!=null&&o.quote_pdf_url?window.open(o.quote_pdf_url,"_blank","noopener,noreferrer"):alert("Quote PDF not available yet. Please contact support if this issue persists.")},f=(n==null?void 0:n.status)==="quoted"&&o&&!o.accepted_at,b=(n==null?void 0:n.status)&&["new","in_progress","quoted"].includes(n.status),h=o?XT(o.valid_until):!1;return a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"})]})]})})})}):i?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx(jt,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Failed to Load Inquiry"}),e.jsx("p",{className:"text-red-700 mb-6",children:((v=(p=i==null?void 0:i.response)==null?void 0:p.data)==null?void 0:v.message)||(i==null?void 0:i.message)||"Could not load inquiry details"}),e.jsxs(X,{to:"/catering/inquiries",className:"inline-flex items-center px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})]})})})}):n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(X,{to:"/catering/inquiries",className:"inline-flex items-center text-orange-600 hover:text-orange-700 font-medium transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Inquiry #",n.inquiry_number]}),e.jsxs("p",{className:"text-gray-600",children:["Submitted on ",Nc(n.submitted_at)]})]}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold border-2 ${YT(n.status)}`,children:GT(n.status)})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Inquiry Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-gray-200 md:left-1/2 md:transform md:-translate-x-1/2"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["new","in_progress","quoted","confirmed","completed"].includes(n.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(Oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Submitted"}),e.jsx("p",{className:"text-sm text-gray-600",children:Nc(n.submitted_at)})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["in_progress","quoted","confirmed","completed"].includes(n.status)?"bg-green-500 border-green-200":(n.status==="new","bg-gray-300 border-gray-200")}`,children:e.jsx(Oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Under Review"}),e.jsx("p",{className:"text-sm text-gray-600",children:["in_progress","quoted","confirmed","completed"].includes(n.status)?"Reviewed by admin":"Awaiting review"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["quoted","confirmed","completed"].includes(n.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(Oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Quote Sent"}),e.jsx("p",{className:"text-sm text-gray-600",children:["quoted","confirmed","completed"].includes(n.status)&&(o!=null&&o.sent_at)?Nc(o.sent_at):"Quote pending"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["confirmed","completed"].includes(n.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(Oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Confirmed"}),e.jsx("p",{className:"text-sm text-gray-600",children:["confirmed","completed"].includes(n.status)&&(o!=null&&o.accepted_at)?Nc(o.accepted_at):"Awaiting confirmation"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${n.status==="completed"?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(Oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.status==="completed"?"Event completed":"Pending"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(os,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Type"}),e.jsx("p",{className:"text-gray-900",children:KT(n.event_type,n.event_type_other)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Mn,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Date"}),e.jsx("p",{className:"text-gray-900",children:wy(n.event_date)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Time"}),e.jsxs("p",{className:"text-gray-900",children:[Ny(n.event_start_time)," - ",Ny(n.event_end_time)]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rn,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Guest Count"}),e.jsx("p",{className:"text-gray-900",children:n.guest_count_min&&n.guest_count_max?`${n.guest_count_min} - ${n.guest_count_max} guests`:`${n.guest_count} guests`})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 md:col-span-2",children:[e.jsx(gt,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Location"}),e.jsxs("p",{className:"text-gray-900",children:[n.event_location_address,", ",n.event_location_city,", ",n.event_location_postal_code]}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[n.event_location_type," venue"]})]})]})]}),n.dietary_requirements&&n.dietary_requirements.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Dietary Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.dietary_requirements.map((g,j)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:g},j))}),n.dietary_notes&&e.jsxs("p",{className:"mt-3 text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Additional notes:"})," ",n.dietary_notes]})]}),n.menu_preferences&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Menu Preferences"}),e.jsx("p",{className:"text-gray-900",children:n.menu_preferences})]}),n.budget_range&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Budget Range"}),e.jsx("p",{className:"text-gray-900",children:n.budget_range})]}),n.additional_details&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Additional Details"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:n.additional_details})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:n.contact_name})]}),n.company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Company"}),e.jsx("p",{className:"text-gray-900",children:n.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:n.contact_email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:n.contact_phone})]})]})]}),n.admin_notes&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 lg:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx(os,{className:"w-6 h-6 mr-2"}),"Message from Admin"]}),e.jsx("p",{className:"text-blue-900 whitespace-pre-wrap",children:n.admin_notes})]}),o&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Quote Details"}),o.quote_pdf_url&&e.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-800 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Download PDF"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Quote Number: ",e.jsx("span",{className:"font-semibold text-gray-900",children:o.quote_number})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Valid Until: ",e.jsx("span",{className:`font-semibold ${h?"text-red-600":"text-gray-900"}`,children:wy(o.valid_until)})]}),h&&e.jsx("p",{className:"text-sm text-red-600 font-semibold mt-1",children:" This quote has expired. Please contact us for an updated quote."})]}),e.jsx("div",{className:"overflow-x-auto mb-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.line_items.map((g,j)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:g.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:za(Number(g.unit_price||0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-semibold",children:za(Number(g.total||0))})]},j))})]})}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(o.subtotal||0))})]}),o.additional_fees&&o.additional_fees.length>0&&e.jsx(e.Fragment,{children:o.additional_fees.map((g,j)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:g.name}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(g.amount||0))})]},j))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(o.tax_amount||0))})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-3 border-t border-gray-300",children:[e.jsx("span",{className:"text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-orange-600",children:za(Number(o.grand_total||0))})]})]}),o.terms&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Terms & Conditions"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:o.terms})]})]}),!o&&n.status==="in_progress"&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center",children:[e.jsx(me,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"Quote Pending"}),e.jsx("p",{className:"text-yellow-700",children:"Our team is currently reviewing your inquiry. You'll receive a quote within 24-48 hours."})]}),(f||b)&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f&&!h&&e.jsx("button",{onClick:d,disabled:l.isPending,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Accepting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5 mr-2"}),"Accept Quote & Confirm Booking"]})}),b&&e.jsx("button",{onClick:m,disabled:c.isPending,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-5 h-5 mr-2"}),"Cancel Inquiry"]})})]})}),n.status==="confirmed"&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-green-700",children:"Your catering booking has been confirmed. We will contact you shortly to finalize all details."})]}),n.status==="cancelled"&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Inquiry Cancelled"}),e.jsx("p",{className:"text-red-700",children:"This catering inquiry has been cancelled. If you have any questions, please contact us."})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-8 text-center",children:[e.jsx(me,{className:"w-16 h-16 text-yellow-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-yellow-900 mb-2",children:"Inquiry Not Found"}),e.jsx("p",{className:"text-yellow-700 mb-6",children:"The catering inquiry you're looking for doesn't exist or you don't have access to it."}),e.jsxs(X,{to:"/catering/inquiries",className:"inline-flex items-center px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})]})})})})},ZT=async()=>{const s=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/business/info",{params:{include_team:!0}});return{name:s.data.name||"",phone:s.data.phone||"",email:s.data.email||"",address:s.data.address||"",logo_url:s.data.logo_url||"",description:s.data.about_description||"",mission_statement:s.data.mission||"",team_members:s.data.team_info||[]}},eM=()=>{const t=Z(o=>o.business_settings),{data:s,isLoading:r,isError:n,error:a}=ue({queryKey:["business-info","about-page"],queryFn:ZT,staleTime:5*60*1e3,retry:2}),i=(o,l)=>{o==="phone"?window.location.href=`tel:${l}`:o==="email"&&(window.location.href=`mailto:${l}`)};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading About Us..."})]})}),n&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Information"}),e.jsx("p",{className:"text-gray-600 mb-6",children:a instanceof Error?a.message:"We encountered an error while loading our information. Please try again later."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(X,{to:"/",className:"px-6 py-3 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors",children:"Back to Home"}),e.jsx(X,{to:"/contact",className:"px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Contact Us"})]})]})}),!r&&!n&&s&&e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"relative bg-gradient-to-br from-orange-50 to-red-50 py-20 lg:py-32",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["About ",s.name||t.business_info.name||"Salama Lama"]}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:["Bringing authentic flavors to the streets of ",s.address&&typeof s.address=="object"?s.address.city:t.business_info.address&&typeof t.business_info.address=="object"?t.business_info.address.city:"Dublin"]}),e.jsx("div",{className:"mt-8",children:e.jsxs(X,{to:"/menu",className:"inline-flex items-center px-8 py-4 bg-orange-600 text-white font-semibold rounded-lg shadow-lg hover:bg-orange-700 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"Browse Our Menu"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})}),s.description&&e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-8 text-center",children:"Our Story"}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:s.description.split(`

`).map((o,l)=>e.jsx("p",{className:"mb-6",children:o},l))})]})})}),s.mission_statement&&e.jsx("div",{className:"py-16 lg:py-24 bg-gradient-to-br from-orange-50 to-red-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-600 rounded-full mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:"Our Mission"}),e.jsxs("p",{className:"text-xl lg:text-2xl text-gray-700 leading-relaxed italic",children:['"',s.mission_statement,'"']})]})})}),s.team_members&&s.team_members.length>0&&e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"The passionate people behind the flavors you love"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.team_members.map((o,l)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-orange-100 to-red-100 flex items-center justify-center overflow-hidden",children:o.photo_url?e.jsx("img",{src:o.photo_url,alt:o.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-32 h-32 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-5xl font-bold text-white",children:o.name.charAt(0)})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:o.name}),e.jsx("p",{className:"text-orange-600 font-semibold mb-4",children:o.role}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.bio})]})]},l))})]})}),e.jsx("div",{className:"py-16 lg:py-24 bg-gradient-to-br from-orange-50 to-red-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"The principles that guide everything we do"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Quality First"}),e.jsx("p",{className:"text-gray-600",children:"Only the freshest ingredients and authentic recipes"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Community Focus"}),e.jsx("p",{className:"text-gray-600",children:"Building connections through great food"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Sustainability"}),e.jsx("p",{className:"text-gray-600",children:"Eco-friendly practices and local sourcing"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Innovation"}),e.jsx("p",{className:"text-gray-600",children:"Creative flavors and modern food experiences"})]})]})]})}),e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-600 to-red-600 rounded-2xl shadow-2xl overflow-hidden",children:e.jsxs("div",{className:"px-6 py-12 sm:px-12 lg:py-16 lg:px-16 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-6",children:"Ready to Experience Our Food?"}),e.jsx("p",{className:"text-xl text-orange-100 mb-8 max-w-2xl mx-auto",children:"Order online for collection or delivery and taste the difference that passion and quality make."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(X,{to:"/menu",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-orange-600 font-semibold rounded-lg shadow-lg hover:bg-gray-50 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"View Menu"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs(X,{to:"/contact",className:"inline-flex items-center justify-center px-8 py-4 bg-orange-800 text-white font-semibold rounded-lg shadow-lg hover:bg-orange-900 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"Contact Us"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})})})}),e.jsx("div",{className:"py-12 bg-gray-100 border-t border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Get in Touch"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 text-gray-700",children:[e.jsxs("button",{onClick:()=>i("phone",s.phone||t.business_info.phone),className:"flex items-center gap-2 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"font-medium",children:s.phone||t.business_info.phone})]}),e.jsxs("button",{onClick:()=>i("email",s.email||t.business_info.email),className:"flex items-center gap-2 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{className:"font-medium",children:s.email||t.business_info.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"font-medium",children:s.address&&typeof s.address=="object"?`${s.address.line1}${s.address.line2?", "+s.address.line2:""}, ${s.address.city}, ${s.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}${t.business_info.address.line2?", "+t.business_info.address.line2:""}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:s.address||t.business_info.address||"Dublin, Ireland"})]})]})]})})})]})]})},tM=()=>{const t=Z(E=>E.business_settings),[s,r]=u.useState({name:"",email:"",phone:"",subject:"",message:""}),[n,a]=u.useState({}),[i,o]=u.useState(!1),[l,c]=u.useState(!0),d="https://123salama-lama-food-truck.launchpulse.ai",{data:m,isLoading:x,error:f}=ue({queryKey:["business-contact-info"],queryFn:async()=>{const E=await Q.get(`${d}/api/business/info`);return{name:E.data.name||"Salama Lama Food Truck",phone:E.data.phone||"",email:E.data.email||"",address:E.data.address||"",operating_hours:E.data.operating_hours||{},location_coordinates:E.data.location||null,social_links:E.data.social_links||{}}},staleTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1}),b=ce({mutationFn:async E=>(await Q.post(`${d}/api/contact`,E)).data,onSuccess:()=>{o(!0),r({name:"",email:"",phone:"",subject:"",message:""}),a({}),setTimeout(()=>{o(!1)},5e3)},onError:E=>{var L,k;a({submit:((k=(L=E.response)==null?void 0:L.data)==null?void 0:k.message)||"Failed to send message. Please try again."})}}),h=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),p=E=>{const L=E.replace(/\s/g,"");return/^(\+353|0)\d{9}$/.test(L)},v=(E,L)=>{switch(E){case"name":return L.trim()?L.trim().length<2?"Name must be at least 2 characters":void 0:"Name is required";case"email":return L.trim()?h(L)?void 0:"Please enter a valid email address":"Email is required";case"phone":return L.trim()?p(L)?void 0:"Please enter a valid Irish phone number":"Phone number is required";case"subject":return L.trim()?L.trim().length<3?"Subject must be at least 3 characters":void 0:"Subject is required";case"message":return L.trim()?L.trim().length<10?"Message must be at least 10 characters":void 0:"Message is required";default:return}},g=()=>{const E={};return Object.keys(s).forEach(L=>{const k=v(L,s[L]);k&&(E[L]=k)}),a(E),Object.keys(E).length===0},j=(E,L)=>{r(k=>({...k,[E]:L})),n[E]&&a(k=>({...k,[E]:void 0})),n.submit&&a(k=>({...k,submit:void 0}))},y=E=>{const L=v(E,s[E]);L&&a(k=>({...k,[E]:L}))},w=E=>{E.preventDefault(),g()&&b.mutate(s)},M=()=>{console.log("Phone contact initiated")},T=()=>{console.log("Email contact initiated")},N=()=>{c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 p-4 bg-gradient-to-t from-[#F2EFE9] via-[#F2EFE9] to-transparent pointer-events-none",children:e.jsxs("a",{href:`tel:${(m==null?void 0:m.phone)||t.business_info.phone}`,onClick:M,className:"flex items-center justify-center w-full bg-[#2C1A16] text-[#F2EFE9] font-bold rounded-full shadow-2xl hover:shadow-3xl hover:bg-[#3E2F26] transition-all duration-300 active:scale-95 pointer-events-auto",style:{minHeight:"56px",fontSize:"17px"},children:[e.jsx($t,{className:"h-5 w-5 mr-2"}),"Call Us Now"]})}),e.jsxs("main",{className:"min-h-screen bg-[#F2EFE9] pb-24 lg:pb-0",children:[e.jsx("section",{className:"relative bg-[#F2EFE9] overflow-hidden min-h-screen flex items-center",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-10 py-12 sm:py-16 lg:py-20 w-full",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-20 items-stretch",children:[e.jsxs("div",{className:"order-1 lg:order-1 flex flex-col justify-center space-y-8 sm:space-y-12 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-extrabold text-[#2C1A16] mb-4 sm:mb-6 leading-tight tracking-tight",children:"Get in Touch"}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-[#4A3B32] leading-relaxed font-medium max-w-lg",children:"We'd love to hear from you! Whether you have a question about our menu or want to say hello."})]}),x?e.jsx("div",{className:"space-y-8",children:[1,2,3].map(E=>e.jsxs("div",{className:"flex items-start space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 bg-[#4A3B32]/20 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-[#4A3B32]/20 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-[#4A3B32]/20 rounded w-3/4"})]})]},E))}):f?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:[e.jsx(me,{className:"h-8 w-8 text-red-600 mb-2"}),e.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load contact information"})]}):e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 rounded-full bg-[#2C1A16] flex items-center justify-center shadow-lg",children:e.jsx($t,{className:"h-6 w-6 sm:h-7 sm:w-7 text-[#F2EFE9]"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[#2C1A16]",children:"Call or Text"})]}),e.jsxs("a",{href:`tel:${(m==null?void 0:m.phone)||t.business_info.phone}`,onClick:M,className:"flex items-center justify-center w-full bg-[#2C1A16] text-[#F2EFE9] font-bold rounded-2xl shadow-lg hover:shadow-xl hover:bg-[#3E2F26] transition-all duration-300 active:scale-95",style:{minHeight:"56px",fontSize:"17px"},children:[e.jsx($t,{className:"h-5 w-5 mr-2"}),(m==null?void 0:m.phone)||t.business_info.phone||"+353-1-234-5678"]}),e.jsxs("a",{href:`mailto:${(m==null?void 0:m.email)||t.business_info.email}`,onClick:T,className:"flex items-center justify-center w-full bg-white border-2 border-[#2C1A16] text-[#2C1A16] font-bold rounded-2xl shadow-md hover:shadow-lg hover:bg-[#F2EFE9] transition-all duration-300 active:scale-95",style:{minHeight:"56px",fontSize:"17px"},children:[e.jsx(Nt,{className:"h-5 w-5 mr-2"}),(m==null?void 0:m.email)||t.business_info.email||"hello@salamalama.ie"]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group transform hover:translate-x-2 transition-transform duration-300",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 rounded-full bg-[#2C1A16] flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"h-6 w-6 sm:h-7 sm:w-7 text-[#F2EFE9]"})})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[#2C1A16] mb-3",children:"Opening Hours"}),e.jsx("div",{className:"space-y-2",children:(()=>{const E=(m==null?void 0:m.operating_hours)||t.operating_hours;if(!E||Object.keys(E).length===0)return e.jsx("p",{className:"text-[#4A3B32] font-medium",style:{fontSize:"16px"},children:"Please contact us for our operating hours."});const L=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],k=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return L.slice(0,3).map((S,F)=>{const P=E[S];return e.jsxs("div",{className:"flex justify-between items-center",style:{fontSize:"16px"},children:[e.jsx("span",{className:"font-semibold text-[#2C1A16]",children:k[F]}),e.jsx("span",{className:"font-medium text-[#4A3B32]",children:P&&P.open&&P.close?`${P.open} - ${P.close}`:"Closed"})]},S)})})()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 rounded-full bg-[#2C1A16] flex items-center justify-center shadow-lg",children:e.jsx(gt,{className:"h-6 w-6 sm:h-7 sm:w-7 text-[#F2EFE9]"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[#2C1A16]",children:"Visit Us"})]}),e.jsx("p",{className:"text-[#4A3B32] leading-relaxed font-medium mb-4",style:{fontSize:"17px"},children:m!=null&&m.address&&typeof m.address=="object"?`${m.address.line1}${m.address.line2?", "+m.address.line2:""}, ${m.address.city}, ${m.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}${t.business_info.address.line2?", "+t.business_info.address.line2:""}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland"}),e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(m!=null&&m.address&&typeof m.address=="object"?`${m.address.line1}, ${m.address.city}, ${m.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full bg-white border-2 border-[#2C1A16] text-[#2C1A16] font-bold rounded-2xl shadow-md hover:shadow-lg hover:bg-[#F2EFE9] transition-all duration-300 active:scale-95",style:{minHeight:"56px",fontSize:"17px"},children:[e.jsx(gt,{className:"h-5 w-5 mr-2"}),"Get Directions"]})]})]})]}),e.jsxs("div",{className:"order-2 lg:order-2 relative w-full",children:[e.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl transform lg:translate-x-8 hover:scale-105 transition-transform duration-500",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=1000&h=1200&fit=crop&q=90",alt:"Delicious pizza on wooden board",className:"w-full aspect-[4/3] sm:aspect-[3/2] lg:aspect-[4/5] object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#2C1A16]/30 via-transparent to-transparent"})]}),e.jsxs("div",{className:"hidden sm:block absolute -bottom-6 sm:-bottom-8 -left-6 sm:-left-8 bg-[#2C1A16] text-[#F2EFE9] px-8 py-5 rounded-2xl shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-300 z-20",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Made Fresh Daily"}),e.jsx("p",{className:"text-2xl font-extrabold",children:"100% Quality"})]})]})]})})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white relative",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-[#2C1A16] mb-10 text-center",children:"Find Us on the Map"}),e.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-xl border-4 border-[#F2EFE9]",children:[l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#F2EFE9] z-10",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-[#2C1A16]"})}),e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(m!=null&&m.address&&typeof m.address=="object"?`${m.address.line1}, ${m.address.city}, ${m.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland")}&zoom=15&maptype=roadmap`,width:"100%",height:"500",style:{border:0,filter:"grayscale(20%) sepia(10%) brightness(105%) contrast(95%)"},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:N,className:"w-full",title:"Salama Lama Food Truck Location"})]})]})}),e.jsxs("section",{className:"py-16 lg:py-24 bg-[#F2EFE9] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[#2C1A16]/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-[#4A3B32]/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-[#2C1A16] mb-4",children:"Send Us a Message"}),e.jsx("p",{className:"text-base sm:text-lg text-[#4A3B32] leading-relaxed max-w-2xl mx-auto",children:"Have a question or feedback? Fill out the form below and we'll get back to you as soon as possible."})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-[#2C1A16]/10 p-8 lg:p-12",children:[i&&e.jsxs("div",{className:"mb-8 bg-green-50 border-2 border-green-200 rounded-lg p-6 flex items-start",children:[e.jsx(Oe,{className:"h-6 w-6 text-green-600 mt-0.5 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-900 font-semibold mb-1",children:"Message Sent Successfully!"}),e.jsx("p",{className:"text-green-700",children:"Thank you for contacting us. We'll get back to you within 24 hours."})]})]}),n.submit&&e.jsxs("div",{className:"mb-8 bg-red-50 border-2 border-red-200 rounded-lg p-6 flex items-start",children:[e.jsx(me,{className:"h-6 w-6 text-red-600 mt-0.5 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-900 font-semibold mb-1",children:"Error"}),e.jsx("p",{className:"text-red-700",children:n.submit})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-[#2C1A16] mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:E=>j("name",E.target.value),onBlur:()=>y("name"),placeholder:"John Smith",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${n.name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-[#2C1A16]/20 focus:border-[#2C1A16] focus:ring-[#2C1A16]/10"}`,style:{fontSize:"16px",minHeight:"56px"}}),n.name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),n.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-[#2C1A16] mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:E=>j("email",E.target.value),onBlur:()=>y("email"),placeholder:"john.smith@example.com",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${n.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-[#2C1A16]/20 focus:border-[#2C1A16] focus:ring-[#2C1A16]/10"}`,style:{fontSize:"16px",minHeight:"56px"}}),n.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),n.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-[#2C1A16] mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone",value:s.phone,onChange:E=>j("phone",E.target.value),onBlur:()=>y("phone"),placeholder:"0851234567 or +353851234567",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${n.phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-[#2C1A16]/20 focus:border-[#2C1A16] focus:ring-[#2C1A16]/10"}`,style:{fontSize:"16px",minHeight:"56px"}}),n.phone&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),n.phone]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-semibold text-[#2C1A16] mb-2",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"subject",value:s.subject,onChange:E=>j("subject",E.target.value),onBlur:()=>y("subject"),placeholder:"General Inquiry",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${n.subject?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-[#2C1A16]/20 focus:border-[#2C1A16] focus:ring-[#2C1A16]/10"}`,style:{fontSize:"16px",minHeight:"56px"}}),n.subject&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),n.subject]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-[#2C1A16] mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",rows:6,value:s.message,onChange:E=>j("message",E.target.value),onBlur:()=>y("message"),placeholder:"Tell us how we can help you...",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-4 resize-none ${n.message?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-[#2C1A16]/20 focus:border-[#2C1A16] focus:ring-[#2C1A16]/10"}`,style:{fontSize:"16px",lineHeight:"1.5"}}),n.message&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),n.message]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:b.isPending,className:"w-full md:w-auto px-10 py-4 bg-[#2C1A16] text-[#F2EFE9] font-bold text-lg rounded-full shadow-xl hover:shadow-2xl hover:bg-[#3E2F26] hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-[#2C1A16]/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",style:{minHeight:"56px"},children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Message..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hw,{className:"h-5 w-5 mr-2"}),"Send Message"]})})})]})]})]})]})]})]})},Lm=[{id:"ordering",name:"Ordering",description:"Questions about placing and managing orders",sort_order:1},{id:"delivery",name:"Delivery",description:"Delivery zones, fees, and timing",sort_order:2},{id:"catering",name:"Catering",description:"Catering services and event inquiries",sort_order:3},{id:"loyalty",name:"Loyalty Program",description:"Points, rewards, and referrals",sort_order:4},{id:"account",name:"Account & Payments",description:"Account management and payment methods",sort_order:5}],Dm=[{id:"faq_1",category_id:"ordering",question:"How do I place an order?",answer:"You can place an order by browsing our menu, adding items to your cart, and proceeding to checkout. You can choose between collection or delivery (if available in your area). Create an account for faster checkout and to track your orders.",sort_order:1,is_active:!0,keywords:["place order","how to order","ordering process","menu","cart","checkout"]},{id:"faq_2",category_id:"ordering",question:"Can I customize my order?",answer:"Yes! Most of our menu items can be customized. When adding an item to your cart, you'll see available customization options such as spice level, extra toppings, and dietary modifications. Some items may have additional charges for premium customizations.",sort_order:2,is_active:!0,keywords:["customize","modifications","spice level","toppings","extras","changes"]},{id:"faq_3",category_id:"ordering",question:"What are your operating hours?",answer:"Our operating hours vary by day. You can view our current schedule on our homepage or contact page. We typically operate Monday-Friday 11:00 AM - 8:00 PM and weekends 12:00 PM - 9:00 PM. Check our website for holiday hours and special events.",sort_order:3,is_active:!0,keywords:["hours","open","closed","schedule","timing","when open"]},{id:"faq_4",category_id:"ordering",question:"Can I cancel or modify my order?",answer:"You can cancel your order within 10 minutes of placing it from your order tracking page. After that, please contact us immediately at our phone number. Modifications to orders in progress may not be possible, but we'll do our best to accommodate your request.",sort_order:4,is_active:!0,keywords:["cancel","modify","change order","edit order","update order"]},{id:"faq_5",category_id:"ordering",question:"Do you offer vegetarian and vegan options?",answer:"Absolutely! We have a wide selection of vegetarian and vegan dishes clearly marked on our menu with dietary icons. Use the dietary filters on our menu page to easily find options that suit your preferences. Our staff can also help with dietary questions.",sort_order:5,is_active:!0,keywords:["vegetarian","vegan","dietary","plant-based","meat-free","dietary requirements"]},{id:"faq_6",category_id:"delivery",question:"Do you deliver to my area?",answer:"We deliver to most areas within Dublin. Enter your address during checkout to see if we deliver to your location. Delivery availability and fees may vary by distance. Check our delivery zones map on the checkout page for specific coverage areas.",sort_order:1,is_active:!0,keywords:["delivery area","delivery zone","do you deliver","delivery coverage","location"]},{id:"faq_7",category_id:"delivery",question:"What are your delivery fees?",answer:"Delivery fees typically range from 3.50 to 6.00 depending on your distance from our location. The exact fee will be calculated and displayed before you complete your order. We offer free delivery on orders over 40 within our standard delivery zone.",sort_order:2,is_active:!0,keywords:["delivery fee","delivery cost","delivery charge","how much delivery","delivery price"]},{id:"faq_8",category_id:"delivery",question:"How long does delivery take?",answer:"Most deliveries arrive within 30-45 minutes during regular hours. Delivery times may be longer during peak hours (lunch and dinner rush). You'll receive an estimated delivery time when placing your order, and you can track your order in real-time from your account.",sort_order:3,is_active:!0,keywords:["delivery time","how long delivery","delivery duration","wait time","delivery speed"]},{id:"faq_9",category_id:"delivery",question:"Is there a minimum order for delivery?",answer:"Yes, most delivery zones have a minimum order value of 15-20. The specific minimum for your area will be displayed when you enter your delivery address at checkout. Collection orders have no minimum order value.",sort_order:4,is_active:!0,keywords:["minimum order","minimum delivery","order minimum","least order amount"]},{id:"faq_10",category_id:"delivery",question:"Can I track my delivery?",answer:"Yes! Once your order is confirmed, you can track its status in real-time from your order tracking page. You'll receive notifications when your order is being prepared, ready, and out for delivery. You can access tracking from the link in your confirmation email or through your account.",sort_order:5,is_active:!0,keywords:["track delivery","order tracking","track order","where is my order","order status"]},{id:"faq_11",category_id:"catering",question:"Do you offer catering services?",answer:"Yes! We provide full catering services for corporate events, weddings, private parties, and community gatherings. Visit our catering page to learn more about our packages and submit an inquiry. We can accommodate groups from 20 to 200+ guests.",sort_order:1,is_active:!0,keywords:["catering","events","parties","corporate catering","wedding catering","large orders"]},{id:"faq_12",category_id:"catering",question:"What is the minimum guest count for catering?",answer:"Our standard minimum for catering services is 20 guests. However, we may be able to accommodate smaller groups depending on availability and event type. Contact us directly to discuss your specific needs and we'll do our best to help.",sort_order:2,is_active:!0,keywords:["minimum guests","catering minimum","how many people","guest count","catering size"]},{id:"faq_13",category_id:"catering",question:"How far in advance should I book catering?",answer:"We recommend booking at least 7-10 days in advance for standard catering requests. For large events (100+ guests) or peak season dates (weekends, holidays), please book 2-3 weeks ahead. Last-minute requests may be accommodated based on availability.",sort_order:3,is_active:!0,keywords:["book catering","catering notice","advance booking","lead time","catering reservation"]},{id:"faq_14",category_id:"catering",question:"Can you accommodate dietary restrictions for catering?",answer:"Absolutely! We specialize in creating custom menus that accommodate various dietary needs including vegetarian, vegan, gluten-free, halal, and nut-free options. Mention your requirements in the catering inquiry form and we'll design a menu to suit your guests.",sort_order:4,is_active:!0,keywords:["dietary restrictions","catering dietary","allergies","special diet","food requirements"]},{id:"faq_15",category_id:"catering",question:"What equipment and services are included?",answer:"Our catering services include serving equipment, utensils, plates, napkins, and setup assistance. We can also provide staff for larger events. Specific inclusions vary by package - full details will be provided in your custom quote.",sort_order:5,is_active:!0,keywords:["catering equipment","included services","setup","staff","catering package"]},{id:"faq_16",category_id:"loyalty",question:"How does the loyalty program work?",answer:"Earn 1 point for every 1 you spend on orders. Points can be redeemed for discounts, free items, and special perks. Create an account to automatically start earning points with every order. Track your points and view available rewards in your loyalty dashboard.",sort_order:1,is_active:!0,keywords:["loyalty program","points","rewards","how to earn","loyalty system"]},{id:"faq_17",category_id:"loyalty",question:"How do I redeem my loyalty points?",answer:`Visit your loyalty dashboard to browse available rewards. Click "Redeem" on any reward you can afford with your points. You'll receive a unique reward code to use at checkout. Codes are typically valid for 30 days after redemption.`,sort_order:2,is_active:!0,keywords:["redeem points","use points","rewards redemption","reward code","spend points"]},{id:"faq_18",category_id:"loyalty",question:"Do loyalty points expire?",answer:"Points remain valid for 12 months from the date earned, as long as your account remains active. Any activity (orders or redemptions) extends the expiration of all your points. You'll receive notifications before points are about to expire.",sort_order:3,is_active:!0,keywords:["points expire","expiration","points validity","lose points","point duration"]},{id:"faq_19",category_id:"loyalty",question:"How does the referral program work?",answer:"Share your unique referral code with friends. When they sign up and place their first order, you both earn bonus points! Find your referral code in your loyalty dashboard. There's no limit to how many friends you can refer.",sort_order:4,is_active:!0,keywords:["referral","refer friend","referral code","invite friends","referral bonus"]},{id:"faq_20",category_id:"loyalty",question:"What are badges and how do I earn them?",answer:"Badges are special achievements you unlock by reaching milestones like total orders, spending thresholds, or consecutive weekly orders. Each badge comes with bonus points and bragging rights! View all available badges and your progress in your loyalty dashboard.",sort_order:5,is_active:!0,keywords:["badges","achievements","unlock badges","badges earn","loyalty badges"]},{id:"faq_21",category_id:"account",question:"Do I need an account to order?",answer:"You can browse our menu as a guest, but creating an account provides benefits: faster checkout, order history, loyalty points, saved addresses, and order tracking. Account creation is quick, free, and includes a welcome discount code!",sort_order:1,is_active:!0,keywords:["account","registration","sign up","create account","guest order"]},{id:"faq_22",category_id:"account",question:"What payment methods do you accept?",answer:"We accept all major credit and debit cards (Visa, Mastercard, Amex, Discover) through our secure payment processor. You can save your payment methods for faster checkout. For collection orders, we also accept cash payment at pickup.",sort_order:2,is_active:!0,keywords:["payment methods","credit card","debit card","cash","how to pay","payment options"]},{id:"faq_23",category_id:"account",question:"Is my payment information secure?",answer:"Absolutely. We never store your full card details. All payment processing is handled by our secure PCI-compliant payment provider (SumUp). We only store a tokenized reference to your card for future use. Your CVV is never stored and must be re-entered for each transaction.",sort_order:3,is_active:!0,keywords:["security","payment security","safe payment","card security","data protection"]},{id:"faq_24",category_id:"account",question:"How do I reset my password?",answer:`Click "Forgot Password" on the login page and enter your email address. You'll receive a password reset link valid for 1 hour. Click the link and create a new password. If you don't receive the email, check your spam folder or contact support.`,sort_order:4,is_active:!0,keywords:["reset password","forgot password","password recovery","change password","login issues"]},{id:"faq_25",category_id:"account",question:"Can I update my account information?",answer:'Yes, you can update your profile information, email, phone number, saved addresses, and payment methods anytime from your account settings. Click on your profile icon and select "My Profile" to make changes. Some changes may require email verification.',sort_order:5,is_active:!0,keywords:["update account","change email","edit profile","update information","account settings"]}],sM=()=>{var h;const t=Z(p=>p.business_settings),[s,r]=u.useState(""),[n,a]=u.useState(null),[i,o]=u.useState(new Set),l=u.useMemo(()=>{let p=Dm.filter(v=>v.is_active);if(n&&(p=p.filter(v=>v.category_id===n)),s.trim()){const v=s.toLowerCase();p=p.filter(g=>g.question.toLowerCase().includes(v)||g.answer.toLowerCase().includes(v)||g.keywords.some(j=>j.toLowerCase().includes(v)))}return p.sort((v,g)=>v.sort_order-g.sort_order)},[s,n]),c=u.useMemo(()=>{const p={};return Dm.filter(v=>v.is_active).forEach(v=>{p[v.category_id]=(p[v.category_id]||0)+1}),p},[]),d=p=>{o(v=>{const g=new Set(v);return g.has(p)?g.delete(p):g.add(p),g})},m=()=>{r("")},x=()=>{a(null)},f=p=>{r(p.target.value)},b=p=>{a(n===p?null:p)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[e.jsx("nav",{className:"mb-4","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("li",{children:e.jsx(X,{to:"/",className:"hover:text-orange-600 transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx("span",{className:"mx-2",children:"/"})}),e.jsx("li",{className:"text-gray-900 font-medium",children:"FAQs"})]})}),e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx(Bw,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Find answers to common questions about ordering, delivery, catering, loyalty rewards, and more."})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(yr,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search FAQs... (e.g., delivery, payment, rewards)",value:s,onChange:f,className:"w-full pl-12 pr-12 py-3 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 text-base","aria-label":"Search FAQs"}),s&&e.jsx("button",{onClick:m,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsxs("button",{onClick:x,className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${n===null?"bg-orange-600 text-white shadow-lg hover:bg-orange-700":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-500 hover:text-orange-600"}`,children:["All Categories (",Dm.filter(p=>p.is_active).length,")"]}),Lm.sort((p,v)=>p.sort_order-v.sort_order).map(p=>e.jsxs("button",{onClick:()=>b(p.id),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${n===p.id?"bg-orange-600 text-white shadow-lg hover:bg-orange-700":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-500 hover:text-orange-600"}`,children:[p.name," (",c[p.id]||0,")"]},p.id))]})}),(s||n)&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Active Filters:"}),s&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:[e.jsxs("span",{children:['Search: "',s,'"']}),e.jsx("button",{onClick:m,className:"hover:text-orange-900 transition-colors","aria-label":"Clear search filter",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsxs("span",{children:["Category: ",(h=Lm.find(p=>p.id===n))==null?void 0:h.name]}),e.jsx("button",{onClick:x,className:"hover:text-blue-900 transition-colors","aria-label":"Clear category filter",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-900",children:l.length})," ",l.length===1?"question":"questions"]})}),l.length>0?e.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:l.map(p=>{const v=i.has(p.id),g=Lm.find(j=>j.id===p.category_id);return e.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("button",{onClick:()=>d(p.id),className:"w-full px-6 py-4 text-left flex items-center justify-between gap-4 hover:bg-gray-50 rounded-xl transition-colors","aria-expanded":v,"aria-controls":`faq-answer-${p.id}`,children:[e.jsxs("div",{className:"flex-1",children:[g&&e.jsx("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-800 text-xs font-semibold rounded-full mb-2",children:g.name}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 leading-snug",children:p.question})]}),e.jsx("div",{className:"flex-shrink-0",children:v?e.jsx(Jn,{className:"w-6 h-6 text-orange-600"}):e.jsx(lr,{className:"w-6 h-6 text-gray-400"})})]}),v&&e.jsx("div",{id:`faq-answer-${p.id}`,className:"px-6 pb-4 pt-2 border-t border-gray-100 animate-fadeIn",children:e.jsx("p",{className:"text-base text-gray-700 leading-relaxed whitespace-pre-line",children:p.answer})})]},p.id)})}):e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-6",children:e.jsx(yr,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No FAQs Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any questions matching your search or filter criteria."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[s&&e.jsx("button",{onClick:m,className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors shadow-md",children:"Clear Search"}),n&&e.jsx("button",{onClick:x,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Clear Category Filter"})]})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-600 to-yellow-600 rounded-2xl shadow-xl p-8 lg:p-12 text-white",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Still Have Questions?"}),e.jsx("p",{className:"text-lg text-orange-100 mb-8",children:"Can't find the answer you're looking for? Our friendly support team is here to help!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("a",{href:`tel:${t.business_info.phone}`,className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx($t,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Call Us"}),e.jsx("p",{className:"text-orange-100 text-sm",children:t.business_info.phone||"+353-1-234-5678"})]}),e.jsxs("a",{href:`mailto:${t.business_info.email}`,className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx(Nt,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Email Us"}),e.jsx("p",{className:"text-orange-100 text-sm",children:t.business_info.email||"hello@salamalama.ie"})]}),e.jsxs(X,{to:"/contact",className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx(_S,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Contact Form"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Visit our contact page"})]})]})]})})})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.3s ease-in-out;
        }
      `})]})},rM=Cu("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-neutral-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/90",outline:"border border-neutral-200 bg-white hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k1=u.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const o=n?HA:"button";return e.jsx(o,{className:Ie(rM({variant:s,size:r,className:t})),ref:i,...a})});k1.displayName="Button";const C1=u.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:Ie("flex h-10 w-full rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:ring-offset-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",t),ref:n,...r}));C1.displayName="Input";var nM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],aM=nM.reduce((t,s)=>{const r=xp(`Primitive.${s}`),n=u.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),iM="Label",S1=u.forwardRef((t,s)=>e.jsx(aM.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));S1.displayName=iM;var E1=S1;const oM=Cu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),P1=u.forwardRef(({className:t,...s},r)=>e.jsx(E1,{ref:r,className:Ie(oM(),t),...s}));P1.displayName=E1.displayName;const A1=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ie("rounded-lg border border-neutral-200 bg-white text-neutral-950 shadow-sm dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",t),...s}));A1.displayName="Card";const F1=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ie("flex flex-col space-y-1.5 p-6",t),...s}));F1.displayName="CardHeader";const T1=u.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:Ie("text-2xl font-semibold leading-none tracking-tight",t),...s}));T1.displayName="CardTitle";const M1=u.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:Ie("text-sm text-neutral-500 dark:text-neutral-400",t),...s}));M1.displayName="CardDescription";const R1=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ie("p-6 pt-0",t),...s}));R1.displayName="CardContent";const lM=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ie("flex items-center p-6 pt-0",t),...s}));lM.displayName="CardFooter";const cM=Cu("relative w-full rounded-lg border border-neutral-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-neutral-950 dark:border-neutral-800 dark:[&>svg]:text-neutral-50",{variants:{variant:{default:"bg-white text-neutral-950 dark:bg-neutral-950 dark:text-neutral-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),L1=u.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:Ie(cM({variant:s}),t),...r}));L1.displayName="Alert";const dM=u.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:Ie("mb-1 font-medium leading-none tracking-tight",t),...s}));dM.displayName="AlertTitle";const D1=u.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ie("text-sm [&_p]:leading-relaxed",t),...s}));D1.displayName="AlertDescription";const uM=()=>{const t=Be(),[s,r]=u.useState(""),[n,a]=u.useState(!1),[i,o]=u.useState(null),l=async c=>{var m,x;c.preventDefault(),o(null);const d=s.trim().toUpperCase();if(!d){o("Please enter your ticket number");return}a(!0);try{(await Q.get("/api/orders/track",{params:{ticket:d}})).data.data&&t(`/track/${d}`)}catch(f){((m=f.response)==null?void 0:m.status)===404?o("Ticket not found. Please check your ticket number and try again."):((x=f.response)==null?void 0:x.status)===400?o("Please enter a valid ticket number"):o("Something went wrong. Please try again later."),console.error("Track order error:",f),a(!1)}};return e.jsx("div",{className:"min-h-screen bg-[#F2EFE9] py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[#6F4E37] mb-2",children:"Track Your Order"}),e.jsx("p",{className:"text-gray-600",children:"Enter your order details to see the current status"})]}),e.jsxs(A1,{className:"mb-6 shadow-lg",children:[e.jsxs(F1,{children:[e.jsx(T1,{className:"text-xl text-[#6F4E37]",children:"Order Tracking"}),e.jsx(M1,{children:"Enter the ticket number from your order confirmation."})]}),e.jsx(R1,{children:e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(P1,{htmlFor:"ticketNumber",className:"text-base font-semibold",children:["Ticket Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C1,{id:"ticketNumber",type:"text",placeholder:"e.g., SL-109229",value:s,onChange:c=>r(c.target.value),disabled:n,className:"text-base h-12",required:!0}),e.jsx("p",{className:"text-sm text-gray-600",children:"You can find your ticket number on your order confirmation page."})]}),i&&e.jsxs(L1,{variant:"destructive",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx(D1,{children:i})]}),e.jsx(k1,{type:"submit",disabled:n,className:"w-full h-12 text-base font-semibold",style:{backgroundColor:"#6F4E37",color:"white"},children:n?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-5 w-5 animate-spin"}),"Tracking..."]}):"Track Order"})]})})]})]})})},mM=()=>{const[t,s]=u.useState(null),[r,n]=u.useState(!0),[a,i]=u.useState(null),[o,l]=u.useState([]),[c,d]=u.useState(!1),[m,x]=u.useState(!1),f=Z(w=>w.business_settings),b=u.useRef(new Map),h=u.useRef(null),p={title:"Terms and Conditions",last_updated:"2024-01-15",sections:[{id:"general-terms",heading:"1. General Terms",content:'These Terms and Conditions ("Terms") govern your use of the Salama Lama Food Truck online ordering platform and services. By accessing or using our services, you agree to be bound by these Terms. If you do not agree to these Terms, please do not use our services.',subsections:[{heading:"1.1 Agreement to Terms",content:"By creating an account or placing an order through our platform, you acknowledge that you have read, understood, and agree to be bound by these Terms and our Privacy Policy."},{heading:"1.2 Eligibility",content:"You must be at least 18 years old to use our services. By using our services, you represent and warrant that you meet this age requirement."},{heading:"1.3 Changes to Terms",content:"We reserve the right to modify these Terms at any time. We will notify users of material changes via email or through our platform. Your continued use of our services after such modifications constitutes acceptance of the updated Terms."}]},{id:"account-registration",heading:"2. Account Registration and Security",content:"To use certain features of our service, you must create an account. You are responsible for maintaining the confidentiality of your account credentials.",subsections:[{heading:"2.1 Account Creation",content:"You must provide accurate, current, and complete information during registration. You agree to update your information promptly if it changes."},{heading:"2.2 Account Security",content:"You are responsible for all activities that occur under your account. You must immediately notify us of any unauthorized use of your account or any other breach of security."},{heading:"2.3 Account Termination",content:"We reserve the right to suspend or terminate your account if you violate these Terms or engage in fraudulent or abusive behavior. You may also request account deletion at any time through your account settings."}]},{id:"menu-pricing",heading:"3. Menu Items and Pricing",content:"Our menu items and prices are subject to change without notice. We make every effort to ensure accuracy in our menu descriptions and pricing.",subsections:[{heading:"3.1 Menu Accuracy",content:"While we strive to provide accurate descriptions and images of our menu items, actual items may vary slightly. We reserve the right to modify menu items, ingredients, or recipes at any time."},{heading:"3.2 Pricing",content:"All prices are displayed in Euros () and include applicable VAT. Prices are subject to change without notice. The price applicable to your order will be the price displayed at the time you complete your order."},{heading:"3.3 Availability",content:"Menu items are subject to availability. We reserve the right to limit quantities or discontinue items. If an ordered item becomes unavailable, we will notify you and offer a substitute or refund."},{heading:"3.4 Dietary Information",content:"While we provide dietary information and accommodate dietary restrictions where possible, we cannot guarantee that our food is free from allergens. Please inform us of any allergies when ordering."}]},{id:"ordering-process",heading:"4. Ordering Process",content:"Orders can be placed through our online platform for collection or delivery (where available). All orders are subject to acceptance by Salama Lama.",subsections:[{heading:"4.1 Order Placement",content:"To place an order, you must add items to your cart, select a collection time or delivery address, and complete payment. Your order is not confirmed until you receive an order confirmation."},{heading:"4.2 Order Confirmation",content:"Upon successful order placement, you will receive an order confirmation via email and/or SMS containing your order details and unique order number."},{heading:"4.3 Order Modifications",content:"Order modifications are subject to availability and must be requested within a reasonable timeframe. Contact us immediately if you need to modify your order."},{heading:"4.4 Minimum Order Values",content:"Delivery orders may be subject to minimum order value requirements based on delivery zone. These requirements will be clearly displayed during checkout."}]},{id:"payment-terms",heading:"5. Payment Terms",content:"We accept various payment methods through our secure payment processor. All payments must be completed before order fulfillment.",subsections:[{heading:"5.1 Payment Methods",content:"We accept major credit and debit cards (Visa, Mastercard, American Express) through our payment processor SumUp. For collection orders, we may also accept cash payment on collection where indicated."},{heading:"5.2 Payment Processing",content:"Your payment will be processed immediately upon order confirmation. We do not store your full card details; they are securely processed and stored by our payment processor."},{heading:"5.3 Failed Payments",content:"If payment fails, your order will not be processed. You will be notified and given the opportunity to retry payment or use an alternative payment method."},{heading:"5.4 Pricing Errors",content:"In the event of a pricing error, we reserve the right to cancel the order and offer a refund or the correct price. We will notify you before taking any action."}]},{id:"collection-delivery",heading:"6. Collection and Delivery Services",content:"We offer both collection and delivery services (delivery subject to location and availability). Service-specific terms apply.",subsections:[{heading:"6.1 Collection Service",content:"For collection orders, you must collect your order at the specified time slot from the food truck location provided in your order confirmation. Please bring your order number for identification."},{heading:"6.2 Delivery Service",content:"Delivery is available to selected areas as indicated during checkout. Delivery fees and minimum order values vary by zone. Estimated delivery times are approximate and subject to traffic and weather conditions."},{heading:"6.3 Delivery Address",content:"You are responsible for providing an accurate and complete delivery address. We are not responsible for delays or failed deliveries due to incorrect address information."},{heading:"6.4 Delivery Delays",content:"While we aim to deliver within the estimated timeframe, delivery times are approximate and not guaranteed. We are not liable for delays caused by circumstances beyond our control."},{heading:"6.5 Failed Delivery",content:"If delivery cannot be completed due to incorrect address, unavailability of recipient, or access issues, the order may be deemed completed and no refund will be provided."}]},{id:"cancellation-refunds",heading:"7. Cancellation and Refunds",content:"Cancellation and refund rights vary depending on the stage of order processing and the nature of the service.",subsections:[{heading:"7.1 Customer Cancellation",content:"You may cancel your order within a limited time after placement, provided the order has not yet been prepared. Cancellation requests must be made through your account or by contacting us immediately."},{heading:"7.2 Refund Policy",content:"Refunds will be issued to the original payment method. Processing time for refunds typically takes 5-10 business days. Partial refunds may be issued for partial order fulfillment or resolved issues."},{heading:"7.3 Business Cancellation",content:"We reserve the right to cancel orders if items are unavailable, payment fails, or we identify fraudulent activity. You will be notified immediately and receive a full refund."},{heading:"7.4 Complaints and Issues",content:"If you have issues with your order quality or service, please contact us within 24 hours with your order details, photos (if applicable), and description of the issue. We will review and respond promptly."}]},{id:"catering-services",heading:"8. Catering Services",content:"Our catering services are subject to separate terms in addition to these general terms. Catering requires advance booking and agreement to a customized quote.",subsections:[{heading:"8.1 Catering Inquiries",content:"Catering services must be requested through our catering inquiry form with at least 7 days advance notice. All inquiries are subject to availability and approval."},{heading:"8.2 Catering Quotes",content:"We will provide a detailed quote including menu items, pricing, service details, and terms. The quote is valid for 7 days unless otherwise specified."},{heading:"8.3 Catering Confirmation",content:"Catering bookings are confirmed upon acceptance of the quote and receipt of the required deposit (if applicable). Final details must be confirmed at least 48 hours before the event."},{heading:"8.4 Catering Cancellation",content:"Catering cancellations made more than 48 hours before the event may receive a partial refund. Cancellations within 48 hours are non-refundable unless due to circumstances beyond your control."},{heading:"8.5 Event Day Responsibilities",content:"You are responsible for providing accurate event details, suitable venue access, power/water connections if required, and any necessary permits. We are not liable for issues arising from incomplete or inaccurate information."}]},{id:"loyalty-program",heading:"9. Loyalty and Rewards Program",content:"Our loyalty program allows customers to earn points and rewards. Participation is optional and subject to program terms.",subsections:[{heading:"9.1 Program Participation",content:"By creating an account, you are automatically enrolled in our loyalty program. Points are earned on qualifying purchases and can be redeemed for rewards as described in your account."},{heading:"9.2 Earning Points",content:"Points are awarded based on your order total after discounts and before delivery fees and tax. The earning rate is subject to change with notice. Points are credited after order completion."},{heading:"9.3 Redeeming Rewards",content:"Rewards can be redeemed through your account when you have sufficient points. Rewards are subject to availability and expiration dates. Redeemed rewards cannot be returned or exchanged for cash."},{heading:"9.4 Points Expiration",content:"Points may expire after a period of account inactivity as specified in the loyalty program terms. We will notify you before points expire."},{heading:"9.5 Program Changes",content:"We reserve the right to modify, suspend, or terminate the loyalty program at any time with reasonable notice. Changes to the program will be communicated via email and through our platform."},{heading:"9.6 Referral Program",content:"Our referral program allows you to earn rewards by referring friends. Referral rewards are subject to program terms and may require the referred customer to complete their first order."}]},{id:"intellectual-property",heading:"10. Intellectual Property Rights",content:"All content on our platform, including text, graphics, logos, images, and software, is the property of Salama Lama Food Truck and protected by intellectual property laws.",subsections:[{heading:"10.1 Ownership",content:"The Salama Lama name, logo, and all associated trademarks are our exclusive property. You may not use our intellectual property without prior written permission."},{heading:"10.2 Limited License",content:"We grant you a limited, non-exclusive, non-transferable license to access and use our platform for personal, non-commercial purposes in accordance with these Terms."},{heading:"10.3 User Content",content:"By submitting content to our platform (reviews, feedback, etc.), you grant us a worldwide, royalty-free license to use, reproduce, and display such content in connection with our services."}]},{id:"liability-limitations",heading:"11. Limitation of Liability and Disclaimers",content:"Our liability is limited to the maximum extent permitted by law. Important limitations and disclaimers apply to our services.",subsections:[{heading:'11.1 Service "As Is"',content:'Our services are provided "as is" without warranties of any kind, either express or implied. We do not guarantee uninterrupted or error-free service.'},{heading:"11.2 Food Safety",content:"While we maintain strict food safety standards, we are not responsible for adverse reactions or illness resulting from consumption of our products unless caused by our negligence."},{heading:"11.3 Limitation of Liability",content:"Our total liability for any claims arising from these Terms or your use of our services shall not exceed the amount you paid for the specific order giving rise to the claim."},{heading:"11.4 Exclusion of Damages",content:"We are not liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or goodwill."},{heading:"11.5 Force Majeure",content:"We are not liable for failure to perform obligations due to causes beyond our reasonable control, including natural disasters, power outages, strikes, or government actions."}]},{id:"privacy-data",heading:"12. Privacy and Data Protection",content:"We are committed to protecting your privacy and personal data in compliance with GDPR and applicable data protection laws.",subsections:[{heading:"12.1 Privacy Policy",content:"Our Privacy Policy, which is incorporated into these Terms, describes how we collect, use, and protect your personal information. Please review our Privacy Policy carefully."},{heading:"12.2 Data Collection",content:"We collect personal information necessary to process orders, provide services, and improve customer experience. This includes contact details, payment information, and order history."},{heading:"12.3 Data Security",content:"We implement appropriate security measures to protect your personal data. However, no method of transmission over the internet is 100% secure."},{heading:"12.4 Your Rights",content:"Under GDPR, you have rights to access, correct, delete, or restrict processing of your personal data. You can exercise these rights through your account settings or by contacting us."},{heading:"12.5 Marketing Communications",content:"You may opt in or out of marketing communications at any time through your account preferences or by following unsubscribe instructions in our emails."}]},{id:"dispute-resolution",heading:"13. Dispute Resolution and Governing Law",content:"These Terms are governed by Irish law. Disputes will be resolved through negotiation, mediation, or litigation in Ireland.",subsections:[{heading:"13.1 Governing Law",content:"These Terms and any disputes arising from them shall be governed by and construed in accordance with the laws of Ireland."},{heading:"13.2 Jurisdiction",content:"Any legal proceedings arising from these Terms shall be subject to the exclusive jurisdiction of the courts of Ireland."},{heading:"13.3 Informal Resolution",content:"Before initiating formal legal proceedings, we encourage you to contact us to attempt informal resolution of any dispute."},{heading:"13.4 Consumer Rights",content:"Nothing in these Terms affects your statutory rights as a consumer under Irish or EU law."}]},{id:"changes-to-terms",heading:"14. Changes to Terms and Service",content:"We may update these Terms periodically to reflect changes in our practices, services, or legal requirements.",subsections:[{heading:"14.1 Notification of Changes",content:"We will notify registered users of material changes to these Terms via email or prominent notice on our platform at least 7 days before the changes take effect."},{heading:"14.2 Acceptance of Changes",content:"Your continued use of our services after changes to these Terms constitutes acceptance of the revised Terms. If you do not agree to the changes, you should discontinue use of our services."},{heading:"14.3 Service Changes",content:"We reserve the right to modify, suspend, or discontinue any aspect of our services at any time without notice. We are not liable for any modification, suspension, or discontinuation of services."}]},{id:"contact-information",heading:"15. Contact Information and Support",content:"For questions, concerns, or support regarding these Terms or our services, please contact us through the following channels.",subsections:[{heading:"15.1 Customer Support",content:`You can reach our customer support team via phone at ${f.business_info.phone||"+353-1-XXX-XXXX"}, email at ${f.business_info.email||"hello@salamalama.ie"}, or through the contact form on our website.`},{heading:"15.2 Business Address",content:`Salama Lama Food Truck, ${f.business_info.address&&typeof f.business_info.address=="object"?`${f.business_info.address.line1}${f.business_info.address.line2?", "+f.business_info.address.line2:""}, ${f.business_info.address.city}, ${f.business_info.address.postal_code}`:"Dublin, Ireland"}. Our registered business address and VAT number are available upon request.`},{heading:"15.3 Response Times",content:"We aim to respond to all inquiries within 24-48 hours during business days. For urgent order-related issues, please call our phone line during operating hours."},{heading:"15.4 Feedback",content:"We welcome your feedback and suggestions. Please share your thoughts through our contact channels or leave a review on our platform."}]}]};u.useEffect(()=>{(async()=>{n(!0),await new Promise(T=>setTimeout(T,500)),s(p);const M=[];p.sections.forEach(T=>{M.push({id:T.id,title:T.heading,level:1}),T.subsections&&T.subsections.forEach((N,E)=>{M.push({id:`${T.id}-${E}`,title:N.heading,level:2})})}),l(M),n(!1)})()},[]),u.useEffect(()=>{if(!t)return;const w={root:null,rootMargin:"-20% 0px -70% 0px",threshold:0};return h.current=new IntersectionObserver(M=>{M.forEach(T=>{T.isIntersecting&&i(T.target.id)})},w),b.current.forEach(M=>{h.current&&h.current.observe(M)}),()=>{h.current&&h.current.disconnect()}},[t]),u.useEffect(()=>{const w=()=>{x(window.scrollY>400)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const v=w=>{const M=b.current.get(w);if(M){const E=M.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:E,behavior:"smooth"}),d(!1)}},g=()=>{window.scrollTo({top:0,behavior:"smooth"})},j=()=>{window.print()},y=(w,M)=>{M?b.current.set(w,M):b.current.delete(w)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r&&e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Terms & Conditions..."})]})}),!r&&t&&e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 mb-8 print:shadow-none print:border-0",children:e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(os,{className:"w-8 h-8 text-orange-600"}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:t.title})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:f.business_info.name||"Salama Lama Food Truck"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last Updated: ",new Date(t.last_updated).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200","aria-label":"Print Terms & Conditions",children:[e.jsx(Ol,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Print"})]}),e.jsx(X,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200",children:e.jsx("span",{children:"Back to Home"})})]})]})}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0 print:hidden",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Table of Contents"}),e.jsx("nav",{className:"space-y-1 max-h-[calc(100vh-200px)] overflow-y-auto",children:o.map(w=>e.jsx("button",{onClick:()=>v(w.id),className:`
                          w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-150
                          ${w.level===2?"pl-6":""}
                          ${a===w.id?"bg-orange-50 text-orange-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                        `,children:e.jsxs("div",{className:"flex items-center gap-2",children:[a===w.id&&e.jsx(We,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:w.title})]})},w.id))})]})}),e.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition-colors duration-200 print:hidden","aria-label":"Toggle table of contents",children:c?e.jsx(Ae,{className:"w-6 h-6"}):e.jsx(V0,{className:"w-6 h-6"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 print:hidden",onClick:()=>d(!1)}),e.jsx("div",{className:"lg:hidden fixed inset-y-0 right-0 w-80 max-w-full bg-white shadow-2xl z-50 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Table of Contents"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close menu",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("nav",{className:"space-y-1",children:o.map(w=>e.jsx("button",{onClick:()=>v(w.id),className:`
                              w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-150
                              ${w.level===2?"pl-6":""}
                              ${a===w.id?"bg-orange-50 text-orange-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                            `,children:w.title},w.id))})]})})]}),e.jsxs("main",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 lg:p-12 print:shadow-none print:border-0",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-600 p-4 mb-8 rounded-r-lg print:break-inside-avoid",children:e.jsxs("p",{className:"text-sm text-orange-900 leading-relaxed",children:[e.jsx("strong",{children:"Please read these Terms and Conditions carefully."})," By accessing or using our services, you agree to be bound by these terms. If you do not agree to these terms, please do not use our services."]})}),e.jsx("article",{className:"prose prose-gray max-w-none",children:t.sections.map(w=>e.jsxs("section",{id:w.id,ref:M=>y(w.id,M),className:"mb-12 scroll-mt-24 print:break-inside-avoid",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-gray-200",children:w.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:w.content}),w.subsections&&w.subsections.length>0&&e.jsx("div",{className:"ml-0 sm:ml-4 space-y-6",children:w.subsections.map((M,T)=>e.jsxs("div",{id:`${w.id}-${T}`,ref:N=>y(`${w.id}-${T}`,N),className:"print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:M.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:M.content})]},`${w.id}-${T}`))})]},w.id))}),e.jsxs("div",{className:"mt-12 pt-8 border-t-2 border-gray-200 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Questions About These Terms?"}),e.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"If you have any questions or concerns about these Terms and Conditions, please contact us:"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:`mailto:${f.business_info.email||"hello@salamalama.ie"}`,className:"underline hover:text-blue-700",children:f.business_info.email||"hello@salamalama.ie"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",e.jsx("a",{href:`tel:${f.business_info.phone||"+353-1-XXX-XXXX"}`,className:"underline hover:text-blue-700",children:f.business_info.phone||"+353-1-XXX-XXXX"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",f.business_info.address&&typeof f.business_info.address=="object"?`${f.business_info.address.line1}${f.business_info.address.line2?", "+f.business_info.address.line2:""}, ${f.business_info.address.city}, ${f.business_info.address.postal_code}`:"Dublin, Ireland"]})]})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{className:"mb-2",children:"By using our services, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions."}),e.jsxs("p",{className:"font-medium text-gray-900",children:[" ",new Date().getFullYear()," ",f.business_info.name||"Salama Lama Food Truck",". All rights reserved."]})]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-4 justify-center print:hidden",children:[e.jsx(X,{to:"/privacy",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"Privacy Policy"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx(X,{to:"/contact",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"Contact Us"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx(X,{to:"/faqs",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"FAQs"})]})]})]})]}),m&&!r&&e.jsx("button",{onClick:g,className:"fixed bottom-6 left-6 z-40 w-12 h-12 bg-gray-900 hover:bg-gray-800 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-110 print:hidden","aria-label":"Back to top",children:e.jsx($w,{className:"w-5 h-5"})})]}),e.jsx("style",{children:`
          @media print {
            body {
              print-color-adjust: exact;
              -webkit-print-color-adjust: exact;
            }
            
            .print\\:hidden {
              display: none !important;
            }
            
            .print\\:shadow-none {
              box-shadow: none !important;
            }
            
            .print\\:border-0 {
              border: 0 !important;
            }
            
            .print\\:break-inside-avoid {
              break-inside: avoid;
              page-break-inside: avoid;
            }
            
            h1, h2, h3 {
              break-after: avoid;
              page-break-after: avoid;
            }
            
            @page {
              margin: 2cm;
            }
          }
        `})]})},xM=async()=>{try{return(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/content/privacy")).data}catch{return{title:"Privacy Policy",last_updated:new Date().toISOString(),sections:[{id:"introduction",heading:"1. Introduction",content:"Salama Lama Food Truck ('we', 'us', or 'our') is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our website and services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site or use our services.",subsections:[]},{id:"data-controller",heading:"2. Data Controller",content:"Salama Lama Food Truck is the data controller responsible for your personal data. We are committed to ensuring that your privacy is protected in accordance with the General Data Protection Regulation (GDPR) and applicable Irish data protection laws.",subsections:[]},{id:"information-collected",heading:"3. Information We Collect",content:"We collect various types of information in connection with the services we provide, including:",subsections:[{heading:"Personal Identification Information",content:"Name, email address, phone number, delivery address, and payment information when you create an account or place an order."},{heading:"Order Information",content:"Details of your food orders, including items purchased, customizations, delivery preferences, and order history."},{heading:"Technical Information",content:"IP address, browser type, device information, operating system, and usage data collected through cookies and similar technologies."},{heading:"Location Data",content:"Delivery addresses and location information necessary to provide our services."},{heading:"Loyalty Program Data",content:"Points balance, rewards redemption history, badges earned, and referral activity."},{heading:"Communication Data",content:"Correspondence with customer support, catering inquiries, and marketing preferences."}]},{id:"how-we-use",heading:"4. How We Use Your Information",content:"We use the information we collect for the following purposes:",subsections:[{heading:"Service Delivery",content:"To process and fulfill your orders, manage deliveries, and provide customer support."},{heading:"Account Management",content:"To create and maintain your account, authenticate your identity, and manage your preferences."},{heading:"Payment Processing",content:"To process payments securely through our payment provider (SumUp) and prevent fraud."},{heading:"Loyalty Program",content:"To manage your loyalty points, rewards, badges, and referral program participation."},{heading:"Communications",content:"To send order confirmations, status updates, promotional offers (with your consent), and respond to inquiries."},{heading:"Service Improvement",content:"To analyze usage patterns, improve our menu offerings, and enhance user experience."},{heading:"Legal Compliance",content:"To comply with legal obligations, resolve disputes, and enforce our terms of service."}]},{id:"legal-basis",heading:"5. Legal Basis for Processing",content:"Under GDPR, we process your personal data based on the following legal grounds:",subsections:[{heading:"Contract Performance",content:"Processing necessary to fulfill our contract with you (order processing and delivery)."},{heading:"Consent",content:"Marketing communications and optional features (you can withdraw consent at any time)."},{heading:"Legitimate Interests",content:"Fraud prevention, service improvement, and business analytics."},{heading:"Legal Obligations",content:"Compliance with tax, accounting, and other legal requirements."}]},{id:"data-sharing",heading:"6. How We Share Your Information",content:"We do not sell your personal information. We may share your information with:",subsections:[{heading:"Service Providers",content:"Payment processors (SumUp), email service providers, cloud hosting, and analytics platforms that help us operate our business."},{heading:"Delivery Partners",content:"Delivery address and contact information necessary to fulfill delivery orders."},{heading:"Legal Authorities",content:"When required by law or to protect our rights, property, or safety."},{heading:"Business Transfers",content:"In the event of a merger, acquisition, or sale of assets, your information may be transferred."}]},{id:"data-retention",heading:"7. Data Retention",content:"We retain your personal data only as long as necessary for the purposes outlined in this policy:",subsections:[{heading:"Active Accounts",content:"Account and order data retained while your account is active."},{heading:"Anonymized Data",content:"After account deletion, order history is anonymized but retained for legal and accounting purposes (7 years)."},{heading:"Marketing Data",content:"Removed immediately upon unsubscribe or consent withdrawal."},{heading:"Technical Logs",content:"Retained for 90 days for security and troubleshooting purposes."}]},{id:"your-rights",heading:"8. Your Data Protection Rights (GDPR)",content:"Under GDPR, you have the following rights:",subsections:[{heading:"Right to Access",content:"Request a copy of all personal data we hold about you."},{heading:"Right to Rectification",content:"Request correction of inaccurate or incomplete data."},{heading:"Right to Erasure",content:"Request deletion of your personal data ('right to be forgotten')."},{heading:"Right to Restriction",content:"Request limitation of processing in certain circumstances."},{heading:"Right to Data Portability",content:"Receive your data in a structured, commonly used format."},{heading:"Right to Object",content:"Object to processing based on legitimate interests or direct marketing."},{heading:"Right to Withdraw Consent",content:"Withdraw consent at any time for consent-based processing."},{heading:"Right to Lodge a Complaint",content:"File a complaint with the Data Protection Commission (Ireland) if you believe your rights have been violated."}]},{id:"cookies",heading:"9. Cookies and Tracking Technologies",content:"We use cookies and similar technologies to enhance your experience, analyze usage, and provide personalized content. You can manage your cookie preferences through our Cookie Settings. For more information, please see our Cookie Policy.",subsections:[{heading:"Essential Cookies",content:"Required for website functionality (authentication, cart management)."},{heading:"Analytics Cookies",content:"Help us understand how visitors use our website (with your consent)."},{heading:"Marketing Cookies",content:"Used for personalized advertising and retargeting (with your consent)."}]},{id:"data-security",heading:"10. Data Security",content:"We implement appropriate technical and organizational measures to protect your personal data against unauthorized access, alteration, disclosure, or destruction. These include:",subsections:[{heading:"Encryption",content:"All data transmissions are encrypted using SSL/TLS. Payment information is tokenized and never stored in plain text."},{heading:"Access Controls",content:"Limited employee access to personal data based on job requirements."},{heading:"Regular Audits",content:"Security assessments and penetration testing to identify vulnerabilities."},{heading:"Secure Infrastructure",content:"Data hosted on secure cloud platforms with regular backups."}]},{id:"international-transfers",heading:"11. International Data Transfers",content:"Your data is primarily processed within the European Economic Area (EEA). If we transfer data outside the EEA, we ensure adequate safeguards are in place, such as Standard Contractual Clauses (SCCs) approved by the European Commission."},{id:"childrens-privacy",heading:"12. Children's Privacy",content:"Our services are not intended for individuals under the age of 16. We do not knowingly collect personal data from children. If you believe we have inadvertently collected information from a child, please contact us immediately."},{id:"third-party-links",heading:"13. Third-Party Links",content:"Our website may contain links to third-party websites (social media, payment processors). We are not responsible for the privacy practices of these external sites. We encourage you to review their privacy policies before providing any information."},{id:"changes-policy",heading:"14. Changes to This Privacy Policy",content:"We may update this Privacy Policy from time to time to reflect changes in our practices or legal requirements. The 'Last Updated' date at the top of this policy indicates when it was last revised. We will notify you of significant changes via email or prominent notice on our website."},{id:"contact-us",heading:"15. Contact Us",content:"If you have any questions about this Privacy Policy, wish to exercise your data protection rights, or need to contact our Data Protection Officer, please reach out to us:",subsections:[]}],contact_info:{dpo_email:"privacy@salamalama.ie",support_email:"hello@salamalama.ie",phone:"+353-1-234-5678"}}}},hM=async t=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/gdpr/export-data",{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,pM=()=>{const t=Z(E=>E.authentication_state.current_user),s=Z(E=>E.authentication_state.auth_token),[r,n]=u.useState(null),[a,i]=u.useState(!1),[o,l]=u.useState([]),[c,d]=u.useState(null),[m,x]=u.useState(null),f=Be(),b=u.useRef({}),h=u.useRef(null),{data:p,isLoading:v,error:g}=ue({queryKey:["privacyPolicy"],queryFn:xM,staleTime:30*60*1e3,retry:1}),j=ce({mutationFn:()=>{if(!s)throw new Error("Not authenticated");return hM(s)},onSuccess:()=>{d("Data export request submitted successfully! You will receive an email with your data within 48 hours."),x(null),setTimeout(()=>{d(null)},1e4)},onError:E=>{var k,S;const L=((S=(k=E.response)==null?void 0:k.data)==null?void 0:S.message)||E.message||"Failed to request data export. Please try again or contact support.";x(L),d(null)}});u.useEffect(()=>{if(p){const E=p.sections.map(L=>({id:L.id,title:L.heading,level:1}));l(E)}},[p]),u.useEffect(()=>{if(p)return h.current=new IntersectionObserver(E=>{E.forEach(L=>{L.isIntersecting&&L.intersectionRatio>.5&&n(L.target.id)})},{rootMargin:"-20% 0px -60% 0px",threshold:[.5]}),Object.values(b.current).forEach(E=>{var L;E&&((L=h.current)==null||L.observe(E))}),()=>{var E;(E=h.current)==null||E.disconnect()}},[p]);const y=u.useCallback(E=>{const L=b.current[E];if(L){const F=L.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:F,behavior:"smooth"})}},[]),w=()=>{window.print()},M=()=>{if(!t){f("/login?redirect_url=/privacy");return}x(null),d(null),j.mutate()},T=()=>{if(!t){f("/login?redirect_url=/privacy");return}f("/profile#delete-account")},N=()=>{i(!0)};return v?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading Privacy Policy..."})]})})}):g||!p?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(me,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Privacy Policy"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're having trouble loading our privacy policy. Please try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 text-white py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ho,{className:"h-12 w-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:p.title}),e.jsxs("p",{className:"text-blue-100",children:["Last Updated: ",new Date(p.last_updated).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("button",{onClick:w,className:"hidden md:flex items-center space-x-2 bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors print:hidden",children:[e.jsx(Ol,{className:"h-5 w-5"}),e.jsx("span",{children:"Print"})]})]}),e.jsx("p",{className:"text-lg text-blue-100 max-w-3xl",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your personal information in compliance with GDPR and Irish data protection laws."})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-1/4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sticky top-24",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(os,{className:"h-5 w-5 mr-2 text-blue-600"}),"Table of Contents"]}),e.jsx("nav",{className:"space-y-2",children:o.map(E=>e.jsxs("button",{onClick:()=>y(E.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all duration-200 flex items-center justify-between group ${r===E.id?"bg-blue-50 text-blue-700 font-semibold":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("span",{className:"truncate",children:E.title}),r===E.id&&e.jsx(We,{className:"h-4 w-4 text-blue-600"})]},E.id))}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[e.jsxs("button",{onClick:N,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[e.jsx(yn,{className:"h-4 w-4"}),e.jsx("span",{children:"Cookie Settings"})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:M,disabled:j.isPending,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:j.isPending?"Requesting...":"Request My Data"})]}),e.jsxs("button",{onClick:T,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete My Account"})]})]})]})]})}),e.jsxs("main",{className:"lg:w-3/4",children:[c&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-800",children:c})]})}),m&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:m})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 divide-y divide-gray-200",children:p.sections.map(E=>e.jsxs("section",{id:E.id,ref:L=>{L&&(b.current[E.id]=L)},className:"p-8 scroll-mt-24",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:E.heading}),e.jsxs("div",{className:"prose prose-gray max-w-none",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4 whitespace-pre-line",children:E.content}),E.subsections&&E.subsections.length>0&&e.jsx("div",{className:"space-y-4 mt-6",children:E.subsections.map((L,k)=>e.jsxs("div",{className:"pl-4 border-l-2 border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:L.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:L.content})]},k))}),E.id==="contact-us"&&e.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-6 border border-blue-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Data Protection Officer"}),e.jsx("a",{href:`mailto:${p.contact_info.dpo_email}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:p.contact_info.dpo_email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Customer Support"}),e.jsx("a",{href:`mailto:${p.contact_info.support_email}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:p.contact_info.support_email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($t,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),e.jsx("a",{href:`tel:${p.contact_info.phone}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:p.contact_info.phone})]})]})]})})]})]},E.id))}),t&&e.jsxs("div",{className:"mt-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ho,{className:"h-6 w-6 mr-2 text-blue-600"}),"Your GDPR Rights"]}),e.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"As a registered user, you can exercise your data protection rights directly through your account settings or by contacting us:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:M,disabled:j.isPending,className:"flex items-center justify-center space-x-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ys,{className:"h-5 w-5"}),e.jsx("span",{children:j.isPending?"Processing...":"Request My Data"})]}),e.jsxs(X,{to:"/profile",className:"flex items-center justify-center space-x-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium hover:bg-blue-50 hover:border-blue-300 transition-all duration-200",children:[e.jsx(Ho,{className:"h-5 w-5"}),e.jsx("span",{children:"Manage Privacy Settings"})]})]})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-4 justify-center print:hidden",children:[e.jsxs(X,{to:"/terms",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Terms & Conditions"}),e.jsx(yn,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:N,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Cookie Policy"}),e.jsx(yn,{className:"h-4 w-4"})]}),e.jsxs(X,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Contact Us"}),e.jsx(yn,{className:"h-4 w-4"})]})]})]})]})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cookie Settings"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We use cookies to enhance your experience, analyze site usage, and assist in our marketing efforts. You can manage your preferences below."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Essential Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Required for website functionality (authentication, cart, security). Cannot be disabled."})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Always Active"})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Analytics Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website."})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Marketing Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Used to deliver personalized advertisements and measure campaign effectiveness."})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{i(!1)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Save Preferences"})]})]})]})})})]})},fM=()=>{const[t,s]=u.useState(""),[r,n]=u.useState(""),[a,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState(!1),[m,x]=u.useState(null),[f,b]=u.useState(0),[h,p]=u.useState(null),[v,g]=u.useState(null),j=Z(G=>G.authentication_state.authentication_status.is_loading),y=Z(G=>G.authentication_state.error_message),w=Z(G=>G.authentication_state.current_user),M=Z(G=>G.authentication_state.authentication_status.is_authenticated),T=Z(G=>G.login_user),N=Z(G=>G.logout_user),E=Z(G=>G.clear_auth_error),L=Be(),k=5,S=3;u.useEffect(()=>{M&&w&&["staff","manager","admin"].includes(w.role)&&L("/staff/dashboard",{replace:!0})},[M,w,L]),u.useEffect(()=>{y&&(x(y),d(!1))},[y]);const F=G=>G?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G)?(p(null),!0):(p("Please enter a valid email address"),!1):(p("Email is required"),!1),P=G=>G?G.length<8?(g("Password must be at least 8 characters"),!1):(g(null),!0):(g("Password is required"),!1),I=()=>{const G=F(t),se=P(r);return G&&se},H=G=>{const se=G.target.value;s(se),x(null),E(),h&&p(null)},z=G=>{const se=G.target.value;n(se),x(null),E(),v&&g(null)},B=()=>{t&&F(t)},C=()=>{r&&P(r)},R=()=>{l(G=>!G)},_=async G=>{if(G.preventDefault(),f>=k){x("Too many failed login attempts. Please try again later or reset your password.");return}if(x(null),E(),!!I()){d(!0);try{await T(t,r,a);const se=Z.getState().authentication_state.current_user;if(se){if(!["staff","manager","admin"].includes(se.role)){x("Access denied. Staff credentials required."),b(le=>le+1),await N(),d(!1);return}b(0)}}catch(se){console.error("Login error:",se),b(K=>K+1);const le=(se==null?void 0:se.message)||"Invalid email or password. Please try again.";x(le),d(!1)}}},q=c||j,O=m||y,V=q||f>=k||!t||!r,D=f>=S&&f<k;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-gray-100 flex flex-col",children:[e.jsx("header",{className:"w-full py-6 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto flex justify-center items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Eg,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Salama Lama"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Staff Portal"})]})]})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"bg-white shadow-2xl shadow-blue-200/50 rounded-2xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(Vs,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Sign In"}),e.jsx("p",{className:"text-gray-600",children:"Access your operational dashboard"})]}),O&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start space-x-3 animate-in fade-in duration-200",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:O})})]}),D&&!O&&e.jsxs("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 flex items-start space-x-3 animate-in fade-in duration-200",children:[e.jsx(me,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["You have ",k-f," login attempt",k-f!==1?"s":""," remaining."]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Consider resetting your password if you've forgotten it."})]})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Nt,{className:`w-5 h-5 ${h?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:H,onBlur:B,placeholder:"staff@salamalama.ie",className:`
                        block w-full pl-12 pr-4 py-3 rounded-lg
                        border-2 transition-all duration-200
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4
                        ${h?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}
                      `})]}),h&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1 animate-in fade-in duration-200",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:h})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Vs,{className:`w-5 h-5 ${v?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:z,onBlur:C,placeholder:"Enter your password",className:`
                        block w-full pl-12 pr-12 py-3 rounded-lg
                        border-2 transition-all duration-200
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4
                        ${v?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}
                      `}),e.jsx("button",{type:"button",onClick:R,className:"absolute inset-y-0 right-0 pr-4 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-r-lg","aria-label":o?"Hide password":"Show password",children:o?e.jsx(pr,{className:"w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(Ps,{className:"w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),v&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1 animate-in fade-in duration-200",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:v})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:G=>i(G.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Remember me for 30 days"})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:V,className:`
                      w-full flex justify-center items-center
                      py-3 px-4 rounded-lg font-semibold text-base
                      transition-all duration-200
                      focus:outline-none focus:ring-4 focus:ring-blue-100
                      ${V?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg active:scale-95"}
                    `,children:q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In to Staff Portal"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(X,{to:"/forgot-password",className:"text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Forgot your password?"})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Eg,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Secure Staff Access"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"This portal is for authorized staff members only. All login attempts are monitored and logged."})]})]})}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Need help? Contact your manager or email"," ",e.jsx("a",{href:"mailto:support@salamalama.ie",className:"text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"support@salamalama.ie"})]})]})}),e.jsx("footer",{className:"py-6 px-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," Salama Lama Food Truck. All rights reserved."]})})]})})},gM=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/dashboard",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,yM=async t=>{const s=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},params:{limit:5,sort_by:"created_at",sort_order:"asc"}}),r=["received","preparing","ready","out_for_delivery"];return{...s.data,orders:s.data.orders.filter(n=>r.includes(n.status))}},bM=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${s}/status`,{status:r,notes:"Updated from dashboard"},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,vM=t=>{if(!t)return null;const s=new Date(t).getTime(),r=new Date().getTime();return Math.floor((s-r)/6e4)},jM=t=>{if(t===null)return"N/A";if(t<0)return"Overdue";if(t<60)return`${t}m`;const s=Math.floor(t/60),r=t%60;return`${s}h ${r}m`},wM=t=>t===null?"text-gray-500":t<0?"text-red-600":t<15?"text-orange-600":t<30?"text-yellow-600":"text-green-600",NM=()=>{const t=Be(),s=Ue(),r=Z(k=>k.authentication_state.auth_token),n=Z(k=>k.authentication_state.current_user),[a,i]=u.useState(new Set),[o,l]=u.useState(new Date().toISOString()),{data:c,isLoading:d,refetch:m}=ue({queryKey:["staffDashboardMetrics"],queryFn:()=>gM(r),enabled:!!r,staleTime:3e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:2}),{data:x,isLoading:f,error:b,refetch:h}=ue({queryKey:["staffActiveOrders"],queryFn:()=>yM(r),enabled:!!r,staleTime:15e3,refetchInterval:15e3,refetchOnWindowFocus:!0,retry:2}),p=ce({mutationFn:({orderId:k,newStatus:S})=>bM(r,k,S),onSuccess:()=>{s.invalidateQueries({queryKey:["staffDashboardMetrics"]}),s.invalidateQueries({queryKey:["staffActiveOrders"]})}}),v=u.useMemo(()=>c?{total_orders_today:c.total_orders_today,orders_in_progress:c.orders_in_progress,orders_completed_today:c.orders_completed_today,average_prep_time:c.average_prep_time}:{total_orders_today:0,orders_in_progress:0,orders_completed_today:0,average_prep_time:null},[c]),g=u.useMemo(()=>x!=null&&x.orders?x.orders.map(k=>({order_id:k.order_id,order_number:k.order_number,order_type:k.order_type,customer_name:k.customer_name,items_summary:`${k.items.length} item${k.items.length!==1?"s":""}`,collection_time_slot:k.collection_time_slot,time_remaining:vM(k.collection_time_slot)})):[],[x]),j=u.useMemo(()=>c!=null&&c.low_stock_items?c.low_stock_items.filter(k=>!a.has(k.item_id)).map(k=>({item_id:k.item_id,item_name:k.name,current_stock:Number(k.current_stock||0),low_stock_threshold:Number(k.low_stock_threshold||0),alert_level:Number(k.current_stock||0)===0?"critical":"warning"})):[],[c,a]);u.useEffect(()=>{(c||x)&&l(new Date().toISOString())},[c,x]);const y=()=>{m(),h()},w=(k,S)=>{p.mutate({orderId:k,newStatus:S})},M=k=>{i(S=>new Set(S).add(k))},T=()=>{t("/staff/orders")},N=k=>{t(`/staff/orders/${k}`)},E=()=>{t("/staff/stock")},L=k=>k==="collection"?{text:"Collection",color:"bg-blue-100 text-blue-800"}:{text:"Delivery",color:"bg-purple-100 text-purple-800"};return!r||!n?(t("/staff/login"),null):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",n.first_name,"! Here's your operational overview."]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last updated"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:new Date(o).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("button",{onClick:y,disabled:d||f,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Refresh dashboard",children:[e.jsx(ls,{className:`size-5 mr-2 ${d||f?"animate-spin":""}`}),"Refresh"]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):v.total_orders_today}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Today"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(pt,{className:"size-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):v.orders_in_progress}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active orders"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Ke,{className:"size-8 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):v.orders_completed_today}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Today"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Oe,{className:"size-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Prep Time"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):v.average_prep_time!==null?`${Math.round(v.average_prep_time)}m`:"N/A"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minutes"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(AS,{className:"size-8 text-purple-600"})})]})})]}),j.length>0&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ts,{className:"size-6 text-orange-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[j.length," alert",j.length!==1?"s":""]})]}),e.jsx("button",{onClick:E,className:"text-sm font-medium text-orange-600 hover:text-orange-700 transition-colors",children:"View Stock "})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(k=>e.jsxs("div",{className:`px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${k.alert_level==="critical"?"bg-red-50":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${k.alert_level==="critical"?"bg-red-100":"bg-yellow-100"}`,children:e.jsx(Je,{className:`size-5 ${k.alert_level==="critical"?"text-red-600":"text-yellow-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:k.item_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:["Current stock: ",e.jsx("span",{className:`font-semibold ${k.alert_level==="critical"?"text-red-600":"text-yellow-600"}`,children:k.current_stock})," / Threshold: ",k.low_stock_threshold]})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${k.alert_level==="critical"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:k.alert_level==="critical"?"Out of Stock":"Low Stock"})]}),e.jsx("button",{onClick:()=>M(k.item_id),className:"ml-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all","aria-label":"Acknowledge alert",children:e.jsx(Ae,{className:"size-5"})})]},k.item_id))})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Jt,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Next Orders"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[g.length," active"]})]}),e.jsxs("button",{onClick:T,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:["View All Orders",e.jsx(We,{className:"size-4 ml-1"})]})]})}),b?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(ts,{className:"size-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load orders"}),e.jsx("button",{onClick:()=>h(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Try Again"})]}):f?e.jsx("div",{className:"divide-y divide-gray-200",children:[1,2,3].map(k=>e.jsx("div",{className:"px-6 py-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded"})]})},k))}):g.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Oe,{className:"size-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"All caught up!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No active orders at the moment."})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:g.map(k=>{const S=L(k.order_type),F=wM(k.time_remaining);return e.jsx("div",{className:"px-6 py-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Order #",k.order_number]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.color}`,children:S.text})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Rn,{className:"size-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:k.customer_name})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Je,{className:"size-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:k.items_summary})]}),k.collection_time_slot&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ke,{className:`size-4 mr-2 flex-shrink-0 ${F}`}),e.jsx("span",{className:"text-gray-600",children:new Date(k.collection_time_slot).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("span",{className:`ml-2 font-semibold ${F}`,children:["(",jM(k.time_remaining),")"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[e.jsx("button",{onClick:()=>N(k.order_id),className:"px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200",children:"View Details"}),e.jsx("button",{onClick:()=>w(k.order_id,"preparing"),disabled:p.isPending,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:p.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx(ls,{className:"size-4 mr-2 animate-spin"}),"Updating..."]}):"Start Preparing"})]})]})},k.order_id)})})]})]})]})})},_M=async(t,s)=>{const r=new URLSearchParams;s.status&&r.append("status",s.status),s.order_type&&r.append("order_type",s.order_type),r.append("sort_by",s.sort_by);const n=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}}),a=new Date,o=(Array.isArray(n.data.orders)?n.data.orders:[]).map(c=>({...c,items:Array.isArray(c.items)?c.items:[],time_since_received:Math.floor((a.getTime()-new Date(c.created_at).getTime())/6e4)})),l={total_active:o.length,new_count:o.filter(c=>c.status==="received").length,preparing_count:o.filter(c=>c.status==="preparing").length,ready_count:o.filter(c=>c.status==="ready").length,out_for_delivery_count:o.filter(c=>c.status==="out_for_delivery").length};return{orders:o,stats:l}},kM=async(t,s)=>{const{order_id:r,status:n,notes:a}=s;return(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${r}/status`,{status:n,notes:a},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data},CM=t=>{if(t<1)return"Just now";if(t===1)return"1 minute ago";if(t<60)return`${t} minutes ago`;const s=Math.floor(t/60);return s===1?"1 hour ago":`${s} hours ago`},O1=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}catch{return t}},SM=t=>{if(!t)return null;try{const s=new Date(t),r=new Date;return Math.floor((s.getTime()-r.getTime())/6e4)}catch{return null}},EM=t=>{switch(t){case"received":return"bg-gray-100 text-gray-800 border-gray-300";case"preparing":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"ready":return"bg-green-100 text-green-800 border-green-300";case"out_for_delivery":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_y=t=>{switch(t){case"received":return"New";case"preparing":return"Preparing";case"ready":return"Ready";case"out_for_delivery":return"Out for Delivery";case"completed":return"Completed";default:return t}},PM=t=>{switch(t.status){case"received":return{label:"Start Preparing",status:"preparing"};case"preparing":return{label:"Mark as Ready",status:"ready"};case"ready":return t.order_type==="collection"?{label:"Mark Completed",status:"completed"}:{label:"Out for Delivery",status:"out_for_delivery"};case"out_for_delivery":return{label:"Mark Completed",status:"completed"};default:return null}},AM=t=>{const s=t.items.map(r=>{let n="";return r.selected_customizations&&Object.entries(r.selected_customizations).forEach(([a,i])=>{n+=`
   - ${a}: ${i}`}),`${r.quantity}x ${r.item_name}${n}`}).join(`
`);return`

  SALAMA LAMA FOOD TRUCK


ORDER #${t.order_number}

[${t.order_type.toUpperCase()}]${t.collection_time_slot?` - ${O1(t.collection_time_slot)}`:""}

Customer: ${t.customer_name}
Phone: ${t.customer_phone}


ITEMS:


${s}

${t.special_instructions?`
  SPECIAL INSTRUCTIONS:

${t.special_instructions}
`:""}

Received: ${new Date(t.created_at).toLocaleString("en-IE")}

  `.trim()},FM=t=>{const s=AM(t),r=window.open("","","width=600,height=800");r&&(r.document.write(`
      <html>
        <head>
          <title>Kitchen Ticket - ${t.order_number}</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 20px;
              white-space: pre-wrap;
            }
            @media print {
              body { margin: 0; }
            }
          </style>
        </head>
        <body>
          ${s.replace(/\n/g,"<br>")}
        </body>
      </html>
    `),r.document.close(),r.focus(),r.print(),r.close())},TM=()=>{const[t,s]=ct(),r=Ue(),n=Z(S=>S.authentication_state.auth_token),a=Z(S=>S.authentication_state.current_user),i=Z(S=>S.websocket_state.connected),o=Z(S=>S.subscribe_to_staff_events),[l,c]=u.useState({status:t.get("status")||null,order_type:t.get("order_type")||null,sort_by:"created_at"}),[d,m]=u.useState(()=>localStorage.getItem("staff_order_view_mode")||"list"),[x,f]=u.useState({audio_enabled:!0,muted_until:null}),{data:b,isLoading:h,isError:p,error:v,refetch:g}=ue({queryKey:["staff","orders",l],queryFn:()=>_M(n,l),enabled:!!n,staleTime:1e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:2}),j=Array.isArray(b==null?void 0:b.orders)?b.orders:[],y=(b==null?void 0:b.stats)||{total_active:0,new_count:0,preparing_count:0,ready_count:0,out_for_delivery_count:0},w=ce({mutationFn:S=>kM(n,S),onMutate:async S=>{await r.cancelQueries({queryKey:["staff","orders"]});const F=r.getQueryData(["staff","orders",l]);return r.setQueryData(["staff","orders",l],P=>P&&{...P,orders:P.orders.map(I=>I.order_id===S.order_id?{...I,status:S.status}:I)}),{previousData:F}},onError:(S,F,P)=>{var H,z;P!=null&&P.previousData&&r.setQueryData(["staff","orders",l],P.previousData);const I=Q.isAxiosError(S)?((z=(H=S.response)==null?void 0:H.data)==null?void 0:z.message)||S.message:S instanceof Error?S.message:"Unknown error";console.error("[Order Status Update] Error:",{orderId:F.order_id,targetStatus:F.status,error:I,fullError:S}),Nh({variant:"destructive",title:"Failed to update order status",description:I})},onSuccess:(S,F)=>{r.invalidateQueries({queryKey:["staff","orders"]}),console.log("[Order Status Update] Success:",{orderId:S.order_id,orderNumber:S.order_number,newStatus:F.status}),Nh({title:"Order status updated",description:`Order #${S.order_number} moved to ${_y(F.status)}`})}}),M=(S,F)=>{console.log("[Order Status Update] Initiating update:",{orderId:S.order_id,orderNumber:S.order_number,currentStatus:S.status,targetStatus:F}),w.mutate({order_id:S.order_id,status:F})};u.useEffect(()=>{n&&a&&(a.role==="staff"||a.role==="manager"||a.role==="admin")&&o()},[n,a,o]),u.useEffect(()=>()=>{},[r,x]),u.useEffect(()=>{const S=new URLSearchParams;l.status&&S.set("status",l.status),l.order_type&&S.set("order_type",l.order_type),s(S,{replace:!0})},[l,s]),u.useEffect(()=>{localStorage.setItem("staff_order_view_mode",d)},[d]);const T=(S,F)=>{c(P=>({...P,[S]:F}))},N=()=>{f(S=>({...S,audio_enabled:!S.audio_enabled}))},E=()=>{const S=new Date;S.setMinutes(S.getMinutes()+15),f(F=>({...F,muted_until:S.toISOString()}))},L=u.useMemo(()=>{const S=Array.isArray(j)?j:[];return{received:S.filter(F=>F.status==="received"),preparing:S.filter(F=>F.status==="preparing"),ready:S.filter(F=>F.status==="ready"),out_for_delivery:S.filter(F=>F.status==="out_for_delivery")}},[j]),k=S=>{const F=PM(S),P=SM(S.collection_time_slot),I=P!==null&&P<0,H=P!==null&&P>0&&P<=10;return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border-l-4 p-4 space-y-3 ${S.status==="received"?"border-l-gray-400":S.status==="preparing"?"border-l-yellow-400":S.status==="ready"?"border-l-green-400":"border-l-blue-400"}`,children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["#",S.order_number]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full border ${S.order_type==="collection"?"bg-purple-100 text-purple-800 border-purple-300":"bg-orange-100 text-orange-800 border-orange-300"}`,children:S.order_type==="collection"?"COLLECTION":"DELIVERY"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full border ${EM(S.status)}`,children:_y(S.status)})]})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-700",children:e.jsx("span",{className:"font-medium",children:S.customer_name})}),e.jsxs("a",{href:`tel:${S.customer_phone}`,className:"flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx($t,{className:"w-4 h-4 mr-1"}),S.customer_phone]})]}),S.order_type==="collection"&&S.collection_time_slot&&e.jsxs("div",{className:`flex items-center text-sm ${I?"text-red-600 font-semibold":H?"text-orange-600 font-semibold":"text-gray-600"}`,children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Collection: ",O1(S.collection_time_slot)]}),P!==null&&e.jsxs("span",{className:"ml-2",children:["(",P>0?`in ${P} min`:`${Math.abs(P)} min overdue`,")"]})]}),S.order_type==="delivery"&&S.delivery_address_snapshot&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Delivery to:"})," ",S.delivery_address_snapshot.address_line1,", ",S.delivery_address_snapshot.city]}),e.jsx("div",{className:"border-t pt-3",children:e.jsx("div",{className:"space-y-2",children:Array.isArray(S.items)&&S.items.length>0?S.items.map(z=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[z.quantity,"x ",z.item_name]}),z.selected_customizations&&Object.keys(z.selected_customizations).length>0&&e.jsx("div",{className:"ml-4 text-xs text-gray-600 space-y-0.5",children:Object.entries(z.selected_customizations).map(([B,C],R)=>e.jsxs("div",{children:["- ",B,": ",e.jsx("span",{className:"font-medium",children:String(C)})]},R))})]},z.order_item_id)):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No items available"})})}),S.special_instructions&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-2",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"w-4 h-4 text-red-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Special:"})," ",S.special_instructions]})]})}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Received ",CM(S.time_since_received)]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[F&&e.jsx("button",{onClick:()=>M(S,F.status),disabled:w.isPending,className:`flex-1 flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${F.status==="preparing"?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500":F.status==="ready"?"bg-orange-600 hover:bg-orange-700 text-white focus:ring-orange-500":F.status==="completed"?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500":F.status==="out_for_delivery"?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500":"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500"}`,children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),F.label]})}),e.jsx("button",{onClick:()=>FM(S),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx(Ol,{className:"w-4 h-4"})}),e.jsx(X,{to:`/staff/orders/${S.order_id}`,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx(We,{className:"w-4 h-4"})})]})]},S.order_id)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(kg,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Queue"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time kitchen management"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(DS,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Kw,{className:"w-5 h-5 text-red-600 animate-pulse"}),e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Reconnecting..."})]})}),e.jsx("button",{onClick:N,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500",title:x.audio_enabled?"Mute notifications":"Enable notifications",children:x.audio_enabled?e.jsx(Tn,{className:"w-5 h-5 text-gray-700"}):e.jsx(hS,{className:"w-5 h-5 text-gray-400"})}),x.audio_enabled&&e.jsx("button",{onClick:E,className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md text-gray-700 transition-colors",children:"Mute 15 min"}),e.jsx("button",{onClick:()=>g(),disabled:h,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50",title:"Refresh orders",children:e.jsx(ls,{className:`w-5 h-5 text-gray-700 ${h?"animate-spin":""}`})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("button",{onClick:()=>T("status",null),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${l.status===null?"border-orange-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.total_active}),e.jsx("div",{className:"text-sm text-gray-600",children:"All Active"})]}),e.jsxs("button",{onClick:()=>T("status","received"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${l.status==="received"?"border-gray-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:y.new_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"New"})]}),e.jsxs("button",{onClick:()=>T("status","preparing"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${l.status==="preparing"?"border-yellow-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:y.preparing_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Preparing"})]}),e.jsxs("button",{onClick:()=>T("status","ready"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${l.status==="ready"?"border-green-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:y.ready_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ready"})]}),e.jsxs("button",{onClick:()=>T("status","out_for_delivery"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${l.status==="out_for_delivery"?"border-blue-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:y.out_for_delivery_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Out for Delivery"})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("select",{value:l.order_type||"",onChange:S=>T("order_type",S.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"",children:"All Order Types"}),e.jsx("option",{value:"collection",children:"Collection Only"}),e.jsx("option",{value:"delivery",children:"Delivery Only"})]}),e.jsxs("select",{value:l.sort_by,onChange:S=>T("sort_by",S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"created_at",children:"Sort by: Oldest First"}),e.jsx("option",{value:"updated_at",children:"Sort by: Recently Updated"}),e.jsx("option",{value:"order_number",children:"Sort by: Order Number"}),e.jsx("option",{value:"total_amount",children:"Sort by: Total Amount"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-lg transition-colors ${d==="list"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(wS,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>m("kanban"),className:`p-2 rounded-lg transition-colors ${d==="kanban"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(yS,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:[h&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}),p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(me,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to load orders"}),e.jsx("p",{className:"text-red-700 mb-4",children:v instanceof Error?v.message:"Unknown error"}),e.jsx("button",{onClick:()=>g(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}),!h&&!p&&j.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[e.jsx(kg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders in queue"}),e.jsx("p",{className:"text-gray-600",children:l.status||l.order_type?"Try adjusting your filters to see more orders":"All orders are up to date!"})]}),!h&&!p&&j.length>0&&e.jsxs(e.Fragment,{children:[d==="list"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(S=>k(S))}),d==="kanban"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),"New (",L.received.length,")"]}),e.jsx("div",{className:"space-y-3",children:L.received.map(S=>k(S))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full mr-2"}),"Preparing (",L.preparing.length,")"]}),e.jsx("div",{className:"space-y-3",children:L.preparing.map(S=>k(S))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full mr-2"}),"Ready (",L.ready.length,")"]}),e.jsx("div",{className:"space-y-3",children:L.ready.map(S=>k(S))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-400 rounded-full mr-2"}),"Out for Delivery (",L.out_for_delivery.length,")"]}),e.jsx("div",{className:"space-y-3",children:L.out_for_delivery.map(S=>k(S))})]})]})]})]})]})})},MM=async(t,s)=>{const r=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return{...r.data,status_history:r.data.status_history||[]}},RM=async(t,s)=>{const{order_id:r,...n}=t,a=await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${r}/status`,n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return{...a.data,status_history:a.data.status_history||[]}},Qn=t=>`${Number(t||0).toFixed(2)}`,ky=t=>{const s=new Date,r=new Date(t),n=s.getTime()-r.getTime(),a=Math.floor(n/6e4),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"Just now":a<60?`${a} min${a>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`},Om=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Cy=t=>{switch(t){case"received":return"bg-gray-100 text-gray-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-green-100 text-green-800";case"out_for_delivery":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$m=t=>{switch(t){case"received":return"Received";case"preparing":return"Preparing";case"ready":return"Ready for Collection";case"out_for_delivery":return"Out for Delivery";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t}},LM=t=>{switch(t){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},DM=()=>{var N,E;const{order_id:t}=Rs(),s=Be(),r=Ue(),n=Z(L=>L.authentication_state.auth_token),a=Z(L=>L.websocket_state.socket),i=Z(L=>L.add_notification),[o,l]=u.useState(!1),[c,d]=u.useState(""),{data:m,isLoading:x,error:f,refetch:b}=ue({queryKey:["staff-order-detail",t],queryFn:()=>MM(t,n),enabled:!!t&&!!n,staleTime:3e4,refetchOnWindowFocus:!0,retry:1}),h=f?((E=(N=f.response)==null?void 0:N.data)==null?void 0:E.message)||f.message||"Failed to load order":null,p=ce({mutationFn:L=>RM(L,n),onSuccess:L=>{r.setQueryData(["staff-order-detail",t],L),i({type:"order_status_update",message:`Order status updated to ${$m(L.status)}`}),d("")},onError:L=>{var S,F;const k=((F=(S=L.response)==null?void 0:S.data)==null?void 0:F.message)||L.message||"Failed to update status";i({type:"error",message:k})}}),v=p.isPending;u.useEffect(()=>{if(!a||!t)return;const L=k=>{k.data.order_id===t&&(b(),i({type:"order_status_update",message:`Order status updated by ${k.data.changed_by_name||"another staff member"}`}))};return a.on("order_status_updated",L),()=>{a.off("order_status_updated",L)}},[a,t,b,i]);const g=()=>{s("/staff/orders")},j=()=>{m!=null&&m.customer_phone&&(window.location.href=`tel:${m.customer_phone}`)},y=()=>{if(!m)return;const L=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Kitchen Ticket - ${m.order_number}</title>
        <style>
          @media print {
            @page { margin: 0.5cm; }
            body { 
              font-family: monospace; 
              font-size: 12pt; 
              line-height: 1.4;
              color: #000;
            }
          }
          body {
            font-family: monospace;
            max-width: 80mm;
            margin: 0 auto;
            padding: 10px;
          }
          .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 10px;
          }
          .order-number {
            font-size: 24pt;
            font-weight: bold;
            margin: 10px 0;
          }
          .section {
            margin: 15px 0;
            border-bottom: 1px dashed #000;
            padding-bottom: 10px;
          }
          .item {
            margin: 10px 0;
          }
          .item-name {
            font-weight: bold;
            font-size: 14pt;
          }
          .customization {
            margin-left: 20px;
            font-size: 11pt;
          }
          .instructions {
            border: 2px solid #000;
            padding: 10px;
            margin: 15px 0;
            font-weight: bold;
          }
          .phone {
            font-size: 14pt;
            font-weight: bold;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div>SALAMA LAMA FOOD TRUCK</div>
          <div class="order-number">#${m.order_number}</div>
        </div>
        
        <div class="section">
          <div><strong>TYPE:</strong> ${m.order_type.toUpperCase()}</div>
          ${m.order_type==="collection"&&m.collection_time_slot?`<div><strong>TIME:</strong> ${Om(m.collection_time_slot)}</div>`:""}
          ${m.order_type==="delivery"&&m.delivery_address_snapshot?`<div><strong>ADDRESS:</strong> ${m.delivery_address_snapshot.address_line1}, ${m.delivery_address_snapshot.city}</div>`:""}
        </div>
        
        <div class="section">
          <div><strong>ITEMS:</strong></div>
          ${m.items.map(S=>`
            <div class="item">
              <div class="item-name">${S.quantity}x ${S.item_name}</div>
              ${S.selected_customizations?Object.entries(S.selected_customizations).map(([F,P])=>`
                <div class="customization"> ${F}: ${P}</div>
              `).join(""):""}
            </div>
          `).join("")}
        </div>
        
        ${m.special_instructions?`
          <div class="instructions">
            <div><strong>SPECIAL INSTRUCTIONS:</strong></div>
            <div>${m.special_instructions}</div>
          </div>
        `:""}
        
        <div class="section">
          <div class="phone">Customer: ${m.customer_phone}</div>
          <div><strong>Received:</strong> ${Om(m.created_at)}</div>
        </div>
      </body>
      </html>
    `,k=window.open("","_blank");k&&(k.document.write(L),k.document.close(),k.focus(),setTimeout(()=>{k.print(),k.close()},250))},w=L=>{m&&p.mutate({order_id:m.order_id,status:L,notes:c.trim()||void 0})},M=()=>{if(!m)return null;const L=m.status;return L==="received"?e.jsx("button",{onClick:()=>w("preparing"),disabled:v,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:"Start Preparing"})}):L==="preparing"?e.jsx("button",{onClick:()=>w(m.order_type==="delivery"?"out_for_delivery":"ready"),disabled:v,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:m.order_type==="delivery"?"Mark Out for Delivery":"Mark as Ready"})}):L==="ready"||L==="out_for_delivery"?e.jsx("button",{onClick:()=>w("completed"),disabled:v,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:"Mark as Completed"})}):null},T=({current_status:L,order_type:k})=>{const S=k==="delivery"?["received","preparing","out_for_delivery","completed"]:["received","preparing","ready","completed"],F={received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed"},P=S.indexOf(L);return e.jsx("div",{className:"flex items-center justify-between w-full",children:S.map((I,H)=>{const z=I===L,B=H<P;return e.jsxs(St.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${z?"bg-blue-600 text-white scale-110":B?"bg-green-600 text-white":"bg-gray-200 text-gray-400"}`,children:B?e.jsx(Oe,{className:"w-5 h-5"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-current"})}),e.jsx("span",{className:`text-xs mt-2 text-center ${z?"text-blue-700 font-semibold":B?"text-green-700 font-medium":"text-gray-400"}`,children:F[I]})]}),H<S.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded transition-all duration-200 ${H<P?"bg-green-600":"bg-gray-200"}`})]},I)})})};return x?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading order details..."})]})})})})}):h||!m?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ts,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Order"}),e.jsx("p",{className:"text-red-700 mb-4",children:h||"Order not found"}),e.jsxs(X,{to:"/staff/orders",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Back to Order Queue"]})]})]})})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-6 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to order queue",children:e.jsx(Ft,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Order Number"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["#",m.order_number]})]})]}),e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[e.jsx(Ol,{className:"w-4 h-4"}),e.jsx("span",{children:"Print Ticket"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${Cy(m.status)}`,children:$m(m.status)}),e.jsxs("span",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),ky(m.created_at)]})]}),e.jsx(T,{current_status:m.status,order_type:m.order_type})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("div",{className:"text-base font-medium text-gray-900",children:m.customer_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Phone"}),e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsx("span",{children:m.customer_phone})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("div",{className:"text-base text-gray-700",children:m.customer_email})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-semibold ${m.order_type==="collection"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:m.order_type.toUpperCase()})}),m.order_type==="collection"&&m.collection_time_slot&&e.jsxs("div",{className:"flex items-start space-x-3 bg-blue-50 p-4 rounded-lg",children:[e.jsx(Ke,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Collection Time"}),e.jsx("div",{className:"text-lg font-bold text-blue-700",children:Om(m.collection_time_slot)})]})]}),m.order_type==="delivery"&&m.delivery_address_snapshot&&e.jsxs("div",{className:"flex items-start space-x-3 bg-blue-50 p-4 rounded-lg",children:[e.jsx(gt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"Delivery Address"}),e.jsxs("div",{className:"text-base text-blue-800",children:[m.delivery_address_snapshot.address_line1,m.delivery_address_snapshot.address_line2&&`, ${m.delivery_address_snapshot.address_line2}`]}),e.jsxs("div",{className:"text-base text-blue-800",children:[m.delivery_address_snapshot.city,", ",m.delivery_address_snapshot.postal_code]}),m.delivery_address_snapshot.delivery_instructions&&e.jsxs("div",{className:"mt-2 text-sm text-blue-700 italic",children:["Note: ",m.delivery_address_snapshot.delivery_instructions]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-6",children:m.items.map(L=>e.jsxs("div",{className:"border-b border-gray-200 last:border-b-0 pb-4 last:pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[L.quantity," ",L.item_name]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Qn(L.unit_price)," each"]})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:Qn(L.line_total)})]}),L.selected_customizations&&Object.keys(L.selected_customizations).length>0&&e.jsxs("div",{className:"mt-3 bg-orange-50 border-l-4 border-orange-400 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-900 mb-2",children:"Customizations:"}),e.jsx("div",{className:"space-y-1",children:Object.entries(L.selected_customizations).map(([k,S])=>e.jsxs("div",{className:"text-sm font-medium text-orange-800",children:[" ",k,": ",e.jsx("span",{className:"font-bold",children:String(S)})]},k))})]})]},L.order_item_id))})]}),m.special_instructions&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ts,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-900 mb-2",children:"Special Instructions"}),e.jsx("p",{className:"text-base font-medium text-yellow-800 leading-relaxed",children:m.special_instructions})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:Qn(m.subtotal)})]}),m.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount ",m.discount_code&&`(${m.discount_code})`]}),e.jsxs("span",{className:"font-medium",children:["-",Qn(m.discount_amount)]})]}),m.delivery_fee&&m.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:Qn(m.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsx("span",{className:"font-medium",children:Qn(m.tax_amount)})]}),e.jsx("div",{className:"pt-3 border-t-2 border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:Qn(m.total_amount)})]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Payment Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${LM(m.payment_status)}`,children:m.payment_status.toUpperCase()})]}),m.payment_method_type&&e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Payment Method"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:m.payment_method_type})]})]})]})]}),m.status!=="completed"&&m.status!=="cancelled"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Update Order Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{id:"status_notes",value:c,onChange:L=>d(L.target.value),placeholder:"Add any notes about this status update...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{children:M()})]})]}),m.status_history.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("button",{onClick:()=>l(!o),className:"flex items-center justify-between w-full text-left",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Status History"}),o?e.jsx(Jn,{className:"w-5 h-5 text-gray-400"}):e.jsx(lr,{className:"w-5 h-5 text-gray-400"})]}),o&&e.jsx("div",{className:"mt-4 space-y-4",children:m.status_history.map(L=>e.jsx("div",{className:"flex items-start space-x-3 border-l-2 border-gray-300 pl-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Cy(L.status)}`,children:$m(L.status)}),e.jsx("span",{className:"text-sm text-gray-500",children:ky(L.changed_at)})]}),L.notes&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 italic",children:L.notes})]})},L.history_id))})]})]})})})},OM=async(t,s,r)=>{var a,i,o,l;if(!t)throw new Error("Authentication token is required");const n=new URLSearchParams;s&&n.append("category",s),r&&r!=="all"&&n.append("status",r);try{const c=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/stock",{headers:{Authorization:`Bearer ${t}`},params:n});if(!c.data||!c.data.items)throw console.error("[StaffStock] Invalid response structure:",c.data),new Error("Invalid response structure from server");const d=c.data.items;let m=0,x=0,f=0;return{stock_items:d.map(h=>{let p="ok";return h.stock_tracked?h.current_stock===0?(p="out_of_stock",x++):h.current_stock!==null&&h.low_stock_threshold!==null&&h.current_stock<=h.low_stock_threshold?(p="low_stock",m++):f++:f++,{item_id:h.item_id,name:h.name,category_id:h.category_id,category_name:h.category_name,current_stock:h.current_stock,low_stock_threshold:h.low_stock_threshold,stock_tracked:h.stock_tracked,stock_status:p,is_active:h.is_active??!0,image_url:h.image_url??null}}),stock_summary:{total_items_tracked:d.filter(h=>h.stock_tracked).length,low_stock_count:m,out_of_stock_count:x,items_ok_count:f}}}catch(c){throw Q.isAxiosError(c)&&console.error("[StaffStock] API Error:",{status:(a=c.response)==null?void 0:a.status,message:(o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message,url:(l=c.config)==null?void 0:l.url}),c}},Sy=async(t,s)=>{const{item_id:r,...n}=s;return(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/stock/${r}`,n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data},$M=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories,IM=()=>{var q,O;const[t,s]=ct(),r=Z(V=>V.authentication_state.auth_token),[n,a]=u.useState(t.get("category")||"all"),[i,o]=u.useState(t.get("status")||"all"),[l,c]=u.useState({}),[d,m]=u.useState(null),[x,f]=u.useState({}),[b,h]=u.useState(null),[p,v]=u.useState(null),g=Ue(),{data:j=[]}=ue({queryKey:["staff-categories"],queryFn:()=>$M(r),enabled:!!r,staleTime:5*60*1e3}),{data:y,isLoading:w,error:M,refetch:T}=ue({queryKey:["staff-stock",n==="all"?null:n,i],queryFn:()=>OM(r,n==="all"?null:n,i),enabled:!!r,staleTime:60*1e3,refetchOnWindowFocus:!1}),N=(y==null?void 0:y.stock_items)||[],E=(y==null?void 0:y.stock_summary)||{total_items_tracked:0,low_stock_count:0,out_of_stock_count:0,items_ok_count:0},L=ce({mutationFn:V=>Sy(r,V),onSuccess:(V,D)=>{g.invalidateQueries({queryKey:["staff-stock"]}),c(G=>({...G,[D.item_id]:!1})),m(null),f(G=>{const se={...G};return delete se[D.item_id],se})},onError:(V,D)=>{c(G=>({...G,[D.item_id]:!1})),console.error("Stock update failed:",V)}}),k=ce({mutationFn:V=>Sy(r,{item_id:V,change_type:"adjustment",quantity:0,reason:"ran_out_during_service",notes:"Marked out of stock by staff during service"}),onSuccess:()=>{g.invalidateQueries({queryKey:["staff-stock"]})}});u.useEffect(()=>{const V=new URLSearchParams;n!=="all"&&V.set("category",n),i!=="all"&&V.set("status",i),s(V)},[n,i,s]),u.useEffect(()=>{const V=Z.getState().websocket_state.socket;if(V!=null&&V.connected){const D=()=>{g.invalidateQueries({queryKey:["staff-stock"]})};return V.on("stock.updated",D),V.on("stock.low",D),()=>{V.off("stock.updated",D),V.off("stock.low",D)}}},[g]);const S=V=>{a(V.target.value)},F=V=>{o(V.target.value)},P=()=>{a("all"),o("all")},I=V=>{d===V?m(null):(m(V),x[V]||f(D=>({...D,[V]:{change_type:"restock",quantity:"",reason:"",notes:""}})))},H=(V,D,G)=>{f(se=>({...se,[V]:{...se[V],[D]:G}}))},z=V=>{const D=x[V];if(!D||!D.quantity)return;const G=parseInt(D.quantity,10);if(isNaN(G)||G<=0){h({type:"error",message:"Please enter a valid quantity"}),setTimeout(()=>h(null),3e3);return}c(se=>({...se,[V]:!0})),L.mutate({item_id:V,change_type:D.change_type,quantity:G,reason:D.reason||void 0,notes:D.notes||void 0})},B=(V,D)=>{v({isOpen:!0,itemId:V,itemName:D})},C=()=>{p&&(k.mutate(p.itemId),v(null))},R=V=>{switch(V){case"ok":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),"In Stock"]});case"low_stock":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(ts,{className:"w-3.5 h-3.5"}),"Low Stock"]});case"out_of_stock":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(jt,{className:"w-3.5 h-3.5"}),"Out of Stock"]});default:return null}},_=V=>{switch(V){case"ok":return"border-green-200";case"low_stock":return"border-yellow-200";case"out_of_stock":return"border-red-200";default:return"border-gray-200"}};return w&&!y?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading stock levels..."})]})})})})}):M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Stock Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:Q.isAxiosError(M)?((O=(q=M.response)==null?void 0:q.data)==null?void 0:O.message)||M.message:"An unexpected error occurred"}),e.jsxs("button",{onClick:()=>T(),className:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:[e.jsx(ls,{className:"w-4 h-4"}),"Retry"]})]})})})}):e.jsxs(e.Fragment,{children:[b&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${b.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:b.message}),(p==null?void 0:p.isOpen)&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>v(null)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"mt-3 text-center sm:mt-5",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Mark Out of Stock?"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:['Mark "',p.itemName,'" as out of stock? This will notify the admin.']})})]})}),e.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[e.jsx("button",{type:"button",onClick:C,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm",children:"Confirm"}),e.jsx("button",{type:"button",onClick:()=>v(null),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Monitor and update inventory levels in real-time"})]}),e.jsxs("button",{onClick:()=>T(),disabled:w,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ls,{className:`w-4 h-4 ${w?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl border-2 border-blue-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Items Tracked"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:E.total_items_tracked})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(zw,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-green-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-green-700",children:E.items_ok_count})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Oe,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-yellow-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-700",children:E.low_stock_count})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(ts,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-red-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-red-700",children:E.out_of_stock_count})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(jt,{className:"w-6 h-6 text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(mu,{className:"w-5 h-5 text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category-filter",value:n,onChange:S,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Categories"}),j.map(V=>e.jsx("option",{value:V.category_id,children:V.name},V.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),e.jsxs("select",{id:"status-filter",value:i,onChange:F,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"low_stock",children:"Low Stock Only"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock Only"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:P,disabled:n==="all"&&i==="all",className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Filters"})})]})]})]}),N.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center shadow-sm",children:[e.jsx(Je,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Items Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n!=="all"||i!=="all"?"Try adjusting your filters to see more items.":"No stock items are currently being tracked."}),(n!=="all"||i!=="all")&&e.jsx("button",{onClick:P,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(V=>{const D=d===V.item_id,G=x[V.item_id]||{change_type:"restock",quantity:"",reason:"",notes:""},se=l[V.item_id]||!1;return e.jsxs("div",{className:`bg-white rounded-xl border-2 ${_(V.stock_status)} shadow-sm overflow-hidden transition-all hover:shadow-lg`,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:V.name}),e.jsx("p",{className:"text-sm text-gray-600",children:V.category_name})]}),e.jsx("div",{className:"ml-4",children:R(V.stock_status)})]}),V.stock_tracked?e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:V.current_stock!==null?V.current_stock:"N/A"})]}),V.low_stock_threshold!==null&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Low threshold:"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:V.low_stock_threshold})]})]}):e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Stock not tracked for this item"})}),V.stock_tracked&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>I(V.item_id),disabled:se,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Cancel Update":"Update Stock"}),V.stock_status!=="out_of_stock"&&e.jsx("button",{onClick:()=>B(V.item_id,V.name),disabled:se||k.isPending,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Out of Stock"})]})]}),D&&V.stock_tracked&&e.jsxs("div",{className:"border-t-2 border-gray-100 p-6 bg-gray-50",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Update Stock Level"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Type"}),e.jsxs("select",{value:G.change_type,onChange:le=>H(V.item_id,"change_type",le.target.value),disabled:se,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"restock",children:"Restock"}),e.jsx("option",{value:"adjustment",children:"Adjustment"}),e.jsx("option",{value:"waste",children:"Waste"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",min:"0",value:G.quantity,onChange:le=>H(V.item_id,"quantity",le.target.value),disabled:se,placeholder:"Enter quantity",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (optional)"}),e.jsx("input",{type:"text",value:G.reason,onChange:le=>H(V.item_id,"reason",le.target.value),disabled:se,placeholder:"e.g., Delivery received",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:G.notes,onChange:le=>H(V.item_id,"notes",le.target.value),disabled:se,placeholder:"Additional details...",rows:2,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsx("button",{onClick:()=>z(V.item_id),disabled:se||!G.quantity,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Submit Update"})]})]})]},V.item_id)})})]})})]})},zM=()=>{const[t,s]=ct(),[r,n]=u.useState(t.get("period")||"today"),[a,i]=u.useState("daily"),o=Z(T=>T.authentication_state.auth_token);u.useEffect(()=>{const T=t.get("period");T&&n(T)},[t]);const l=T=>{const N=new Date;switch(T){case"today":return N.toISOString().split("T")[0];case"yesterday":{const E=new Date(N);return E.setDate(E.getDate()-1),E.toISOString().split("T")[0]}case"last_7_days":return"last_7_days";default:return N.toISOString().split("T")[0]}},c=T=>`${Number(T||0).toFixed(2)}`,d=T=>new Date(T).toLocaleDateString("en-IE",{weekday:"short",month:"short",day:"numeric"}),{data:m,isLoading:x,error:f,refetch:b}=ue({queryKey:["staff-daily-report",r],queryFn:async()=>{const T=l(r),N=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/reports/daily",{headers:{Authorization:`Bearer ${o}`},params:{date:T}});return{total_orders:N.data.total_orders||0,total_revenue:Number(N.data.total_revenue||0),average_order_value:Number(N.data.average_order_value||0),top_items:(N.data.top_items||[]).map(E=>({item_name:E.item_name||E.name||"",quantity_sold:Number(E.quantity_sold||E.quantity||0)}))}},enabled:!!o&&a==="daily",staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:h,isLoading:p,error:v,refetch:g}=ue({queryKey:["staff-weekly-report"],queryFn:async()=>{const T=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/reports/daily",{headers:{Authorization:`Bearer ${o}`},params:{period:"last_7_days"}});return{total_orders:T.data.total_orders||0,total_revenue:Number(T.data.total_revenue||0),daily_breakdown:T.data.daily_data||T.data.daily_breakdown||[]}},enabled:!!o&&a==="weekly",staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),j=T=>{n(T),s({period:T})},y=T=>{i(T)},w=a==="daily"?x:p,M=a==="daily"?f:v;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Reports"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"View daily and weekly operational metrics"})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",role:"tablist",children:[e.jsx("button",{onClick:()=>y("daily"),role:"tab","aria-selected":a==="daily",className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="daily"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Daily Report"}),e.jsx("button",{onClick:()=>y("weekly"),role:"tab","aria-selected":a==="weekly",className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="weekly"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Weekly Report"})]})}),a==="daily"&&e.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"}].map(({value:T,label:N})=>e.jsx("button",{onClick:()=>j(T),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${r===T?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:N},T))}),M&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Failed to load report data."}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:M instanceof Error?M.message:"Please try again later."})]})]}),e.jsx("button",{onClick:()=>a==="daily"?b():g(),className:"mt-3 px-4 py-2 bg-red-100 text-red-800 rounded-md hover:bg-red-200 transition-colors text-sm font-medium",children:"Retry"})]}),w&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading report data..."})]})}),a==="daily"&&!w&&m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Orders"}),e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:m.total_orders}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders processed"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Revenue"}),e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(m.total_revenue)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sales generated"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Average Order Value"}),e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(m.average_order_value)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Per order"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Top Selling Items"}),m.top_items.length>0?e.jsx("div",{className:"space-y-3",children:m.top_items.map((T,N)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 border-b border-gray-100 last:border-0 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold text-sm ${N===0?"bg-yellow-100 text-yellow-800":N===1?"bg-gray-200 text-gray-800":N===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:N+1}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:T.item_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:T.quantity_sold}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"sold"})]})]},N))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No item sales data available for this period"})]})]})]}),a==="weekly"&&!w&&h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Orders (7 Days)"}),e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:h.total_orders}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Average: ",e.jsx("span",{className:"font-semibold text-gray-700",children:(h.total_orders/7).toFixed(1)})," orders/day"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Revenue (7 Days)"}),e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(h.total_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Average: ",e.jsx("span",{className:"font-semibold text-gray-700",children:c(h.total_revenue/7)}),"/day"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Daily Breakdown"}),h.daily_breakdown.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Date"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Orders"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Revenue"})]})}),e.jsx("tbody",{children:h.daily_breakdown.map((T,N)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:d(T.date)}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900 font-semibold text-lg",children:T.orders}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900 font-semibold text-lg",children:c(Number(T.revenue||0))})]},N))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-200 bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4 font-bold text-gray-900 uppercase tracking-wide",children:"Total"}),e.jsx("td",{className:"py-4 px-4 text-right font-bold text-gray-900 text-xl",children:h.total_orders}),e.jsx("td",{className:"py-4 px-4 text-right font-bold text-gray-900 text-xl",children:c(h.total_revenue)})]})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No daily breakdown data available"})]})]})]}),!w&&!M&&e.jsxs(e.Fragment,{children:[a==="daily"&&!m&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-16 text-center",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Report Data"}),e.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]}),a==="weekly"&&!h&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-16 text-center",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Report Data"}),e.jsx("p",{className:"text-gray-500",children:"No weekly data available"})]})]})]})})})},vp="https://123salama-lama-food-truck.launchpulse.ai",BM=async t=>(await Q.get(`${vp}/api/staff/profile`,{headers:{Authorization:`Bearer ${t}`}})).data,qM=async t=>(await Q.put(`${vp}/api/staff/profile`,t.data,{headers:{Authorization:`Bearer ${t.token}`}})).data,UM=async t=>{await Q.put(`${vp}/api/profile/password`,t.data,{headers:{Authorization:`Bearer ${t.token}`}})},WM=()=>{const t=Z(P=>P.authentication_state.auth_token),[s,r]=u.useState({first_name:"",last_name:"",phone:""}),[n,a]=u.useState({audio_notifications:!0,new_order_alerts:!0,low_stock_alerts:!0,mute_duration_minutes:0}),[i,o]=u.useState({current_password:"",new_password:"",confirm_password:""}),[l,c]=u.useState(!1),[d,m]=u.useState({}),[x,f]=u.useState(null),[b,h]=u.useState("weak"),p=Ue(),{data:v,isLoading:g}=ue({queryKey:["staff-profile"],queryFn:()=>BM(t),enabled:!!t,staleTime:5*60*1e3}),j=ce({mutationFn:qM,onSuccess:P=>{p.setQueryData(["staff-profile"],P),f("Profile updated successfully!"),m({}),setTimeout(()=>f(null),5e3)},onError:P=>{var H,z;const I=((z=(H=P.response)==null?void 0:H.data)==null?void 0:z.message)||"Failed to update profile";m({general:I})}}),y=ce({mutationFn:UM,onSuccess:()=>{o({current_password:"",new_password:"",confirm_password:""}),c(!1),f("Password changed successfully!"),m({}),setTimeout(()=>f(null),5e3)},onError:P=>{var H,z;const I=((z=(H=P.response)==null?void 0:H.data)==null?void 0:z.message)||"Failed to change password";m({password:I})}});u.useEffect(()=>{v&&(r({first_name:v.first_name,last_name:v.last_name,phone:v.phone}),v.staff_permissions&&a({audio_notifications:v.staff_permissions.audio_notifications??!0,new_order_alerts:v.staff_permissions.new_order_alerts??!0,low_stock_alerts:v.staff_permissions.low_stock_alerts??!0,mute_duration_minutes:v.staff_permissions.mute_duration_minutes??0}))},[v]),u.useEffect(()=>{if(x){const P=setTimeout(()=>f(null),5e3);return()=>clearTimeout(P)}},[x]),u.useEffect(()=>{const P=i.new_password;if(P.length===0){h("weak");return}let I=0;P.length>=8&&I++,/[a-z]/.test(P)&&/[A-Z]/.test(P)&&I++,/\d/.test(P)&&I++,/[^a-zA-Z0-9]/.test(P)&&I++,I<=1?h("weak"):I<=3?h("medium"):h("strong")},[i.new_password]);const w=()=>{const P={};return s.first_name.trim()||(P.first_name="First name is required"),s.last_name.trim()||(P.last_name="Last name is required"),s.phone.trim()?s.phone.trim().length<10&&(P.phone="Phone number must be at least 10 characters"):P.phone="Phone number is required",m(P),Object.keys(P).length===0},M=()=>{const P={};return i.current_password||(P.current_password="Current password is required"),i.new_password?i.new_password.length<8?P.new_password="Password must be at least 8 characters":(!/[a-zA-Z]/.test(i.new_password)||!/\d/.test(i.new_password))&&(P.new_password="Password must include letters and numbers"):P.new_password="New password is required",i.confirm_password?i.new_password!==i.confirm_password&&(P.confirm_password="Passwords do not match"):P.confirm_password="Please confirm your password",m(P),Object.keys(P).length===0},T=(P,I)=>{r(H=>({...H,[P]:I})),m(H=>{const z={...H};return delete z[P],z})},N=(P,I)=>{o(H=>({...H,[P]:I})),m(H=>{const z={...H};return delete z[P],delete z.password,z})},E=P=>{a(I=>({...I,[P]:typeof I[P]=="boolean"?!I[P]:I[P]}))},L=P=>{a(I=>({...I,mute_duration_minutes:P}))},k=()=>{w()&&j.mutate({token:t,data:{first_name:s.first_name,last_name:s.last_name,phone:s.phone}})},S=()=>{j.mutate({token:t,data:{staff_permissions:n}})},F=()=>{M()&&y.mutate({token:t,data:{current_password:i.current_password,new_password:i.new_password}})};return g?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xc,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading profile..."})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),x&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-start",children:[e.jsx(Oe,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-green-800 font-medium",children:x})})]}),d.general&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-800 font-medium",children:d.general})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Profile Information"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.first_name,onChange:P=>T("first_name",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.first_name?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your first name"}),d.first_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.first_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.last_name,onChange:P=>T("last_name",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.last_name?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your last name"}),d.last_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:(v==null?void 0:v.email)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:s.phone,onChange:P=>T("phone",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.phone?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your phone number"}),d.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:(v==null?void 0:v.role)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed capitalize"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:k,disabled:j.isPending,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xc,{className:"w-5 h-5 animate-spin mr-2"}),"Saving..."]}):"Save Profile"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vs,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Password"})]}),!l&&e.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-blue-100 text-sm font-medium transition-colors",children:"Change Password"})]})}),l?e.jsxs("div",{className:"p-6",children:[d.password&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:d.password})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.current_password,onChange:P=>N("current_password",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.current_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Enter current password"}),d.current_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.current_password})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.new_password,onChange:P=>N("new_password",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.new_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Enter new password"}),d.new_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.new_password}),i.new_password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${b==="weak"?"w-1/3 bg-red-500":b==="medium"?"w-2/3 bg-yellow-500":"w-full bg-green-500"}`})}),e.jsx("span",{className:`text-xs font-medium ${b==="weak"?"text-red-600":b==="medium"?"text-yellow-600":"text-green-600"}`,children:b==="weak"?"Weak":b==="medium"?"Medium":"Strong"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters with letters and numbers"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.confirm_password,onChange:P=>N("confirm_password",P.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.confirm_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Confirm new password"}),d.confirm_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.confirm_password})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{c(!1),o({current_password:"",new_password:"",confirm_password:""}),m({})},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:y.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xc,{className:"w-5 h-5 animate-spin mr-2"}),"Changing..."]}):"Change Password"})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Keep your account secure by using a strong password."})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tn,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Notification Preferences"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Audio Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Play sound alerts for new orders"})]}),e.jsx("button",{onClick:()=>E("audio_notifications"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${n.audio_notifications?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.audio_notifications?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"New Order Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when new orders arrive"})]}),e.jsx("button",{onClick:()=>E("new_order_alerts"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${n.new_order_alerts?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.new_order_alerts?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Low Stock Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when items are running low"})]}),e.jsx("button",{onClick:()=>E("low_stock_alerts"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${n.low_stock_alerts?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.low_stock_alerts?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"pt-3",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-gray-600 mr-2"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Temporary Mute"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Mute all notifications for a set duration during busy periods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[0,15,30,60].map(P=>e.jsx("button",{onClick:()=>L(P),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${n.mute_duration_minutes===P?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:P===0?"Unmuted":`${P} min`},P))}),n.mute_duration_minutes>0&&e.jsxs("p",{className:"mt-3 text-sm text-purple-600 font-medium",children:["Notifications will be muted for ",n.mute_duration_minutes," minutes"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:S,disabled:j.isPending,className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-4 focus:ring-purple-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xc,{className:"w-5 h-5 animate-spin mr-2"}),"Saving..."]}):"Save Preferences"})})]})]})]})})})},VM=()=>{const[t,s]=u.useState({email:"",password:"",remember_me:!1}),[r,n]=u.useState(""),[a,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState(null),[m,x]=u.useState(!1),[f,b]=u.useState(0),[h,p]=u.useState(null),[v,g]=u.useState(0),j=Z(z=>z.authentication_state.current_user),y=Z(z=>z.authentication_state.authentication_status.is_authenticated),w=Z(z=>z.authentication_state.authentication_status.is_loading),M=Z(z=>z.authentication_state.error_message),T=Z(z=>z.login_user),N=Z(z=>z.clear_auth_error),E=Be();u.useEffect(()=>{y&&j&&j.role==="admin"&&E("/admin/dashboard",{replace:!0})},[y,j,E]),u.useEffect(()=>{if(h){const z=setInterval(()=>{const B=new Date,C=Math.max(0,Math.floor((h.getTime()-B.getTime())/1e3));g(C),C===0&&(p(null),b(0),d(null))},1e3);return()=>clearInterval(z)}},[h]),u.useEffect(()=>{M&&d(M)},[M]);const L=z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z),k=z=>{const B=Math.floor(z/60),C=z%60;return`${B}:${C.toString().padStart(2,"0")}`},S=(z,B)=>{s(C=>({...C,[z]:B})),c&&(d(null),N())},F=()=>{const z=f+1;if(b(z),z>=5){const B=new Date;B.setMinutes(B.getMinutes()+15),p(B),d("Too many failed login attempts. Your account has been temporarily locked for security.")}},P=()=>t.email.trim()?L(t.email)?t.password.trim()?t.password.length<8?(d("Password must be at least 8 characters"),!1):!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email address is required"),!1),I=async z=>{if(z.preventDefault(),h){d("Account temporarily locked. Please try again later.");return}if(P()){l(!0),d(null);try{await T(t.email.trim().toLowerCase(),t.password,t.remember_me);const B=Z.getState().authentication_state.current_user;B&&B.role==="admin"?(b(0),p(null)):B&&(d("Access denied. Administrator privileges required."),Z.getState().logout_user(),F())}catch(B){console.error("Admin login error:",B),F();const C=B.message||"Invalid email or password. Please try again.";d(C)}finally{l(!1)}}},H=async z=>{if(z.preventDefault(),!r.trim()||r.length!==6){d("Please enter a valid 6-digit verification code");return}l(!0),d(null);try{console.log("2FA code submitted:",r),await new Promise(B=>setTimeout(B,1e3)),x(!1),E("/admin/dashboard")}catch{d("Invalid verification code. Please try again."),F()}finally{l(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-3 rounded-full shadow-lg",children:e.jsx(Ho,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Administrator Portal"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Secure access to business management"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-10",children:[y&&j&&j.role==="customer"&&e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"You are currently logged in as a customer"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please log out of your customer account before accessing the admin portal."})]})]}),c&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:c}),h&&v>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Time remaining: ",k(v)]})]})]}),f>0&&f<5&&e.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[f===1&&"Failed login attempt. 4 attempts remaining.",f===2&&"Failed login attempt. 3 attempts remaining.",f===3&&"Warning: 2 attempts remaining before lockout.",f===4&&"Final attempt remaining. Account will be locked after next failure."]})}),!m&&e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Nt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"admin-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:z=>S("email",z.target.value),disabled:o||w||!!h,placeholder:"admin@salamalama.ie",className:`block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 
                                 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                                 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Vs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"admin-password",name:"password",type:a?"text":"password",autoComplete:"current-password",required:!0,value:t.password,onChange:z=>S("password",z.target.value),disabled:o||w||!!h,placeholder:"Enter your secure password",className:`block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 
                                 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                                 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`}),e.jsx("button",{type:"button",onClick:()=>i(!a),disabled:o||w||!!h,className:`absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 
                                 disabled:cursor-not-allowed transition-colors`,"aria-label":a?"Hide password":"Show password",children:a?e.jsx(pr,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:t.remember_me,onChange:z=>S("remember_me",z.target.checked),disabled:o||w||!!h,className:`h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 
                               disabled:cursor-not-allowed`}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Keep me signed in"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:o||w||!!h,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg
                               text-base font-semibold text-white bg-gradient-to-r from-orange-600 to-red-600
                               hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                               focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed
                               transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
                               shadow-lg hover:shadow-xl`,children:o||w?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Sign In to Admin Portal"})})]}),m&&e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mb-4",children:e.jsx(Ho,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter the 6-digit code from your authenticator app"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-code",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Verification Code"}),e.jsx("input",{id:"two-factor-code",name:"two-factor-code",type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,required:!0,value:r,onChange:z=>{const B=z.target.value.replace(/\D/g,"");n(B),c&&d(null)},disabled:o,placeholder:"000000",className:`block w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-2xl tracking-widest
                               text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 
                               focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:o||r.length!==6,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg
                               text-base font-semibold text-white bg-gradient-to-r from-orange-600 to-red-600
                               hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                               focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed
                               transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
                               shadow-lg hover:shadow-xl`,children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify and Sign In"}),e.jsx("button",{type:"button",onClick:()=>{x(!1),n(""),d(null)},disabled:o,className:`w-full py-2 px-4 text-sm font-medium text-gray-700 hover:text-gray-900 
                               disabled:cursor-not-allowed transition-colors`,children:"Back to password"})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Secure administrator access"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Protected by advanced security measures"})})]})})})},HM=async(t,s)=>{var x,f,b,h,p,v,g,j,y;const n=(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/dashboard",{headers:{Authorization:`Bearer ${t}`},params:{date_range:s}})).data,a=Number(n.orders_today??((x=n.today)==null?void 0:x.orders_today)??0),i=Number(n.revenue_today??((f=n.today)==null?void 0:f.revenue_today)??0),o=Number(n.new_customers_today??((b=n.today)==null?void 0:b.new_customers_today)??0),l=Number(n.collection_count??((h=n.today)==null?void 0:h.collection_count)??((p=n.orders_breakdown)==null?void 0:p.collection_count)??0),c=Number(n.delivery_count??((v=n.today)==null?void 0:v.delivery_count)??((g=n.orders_breakdown)==null?void 0:g.delivery_count)??0);let d=Number(((j=n.orders_breakdown)==null?void 0:j.collection_percentage)??0),m=Number(((y=n.orders_breakdown)==null?void 0:y.delivery_percentage)??0);return d===0&&m===0&&a>0&&(d=l/a*100,m=c/a*100),{orders_today:isNaN(a)?0:a,revenue_today:isNaN(i)?0:i,new_customers_today:isNaN(o)?0:o,collection_count:isNaN(l)?0:l,delivery_count:isNaN(c)?0:c,collection_percentage:isNaN(d)?0:Math.round(d*100)/100,delivery_percentage:isNaN(m)?0:Math.round(m*100)/100}},QM=async t=>{const s=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/dashboard/alerts",{headers:{Authorization:`Bearer ${t}`}});return{low_stock_items_count:s.data.low_stock_items_count||0,new_catering_inquiries_count:s.data.new_catering_inquiries_count||0,low_stock_items:s.data.low_stock_items||[]}},KM=async t=>{const s=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders",{headers:{Authorization:`Bearer ${t}`},params:{limit:10,sort_by:"created_at",sort_order:"desc"}}),r=n=>{if(!n)return"Unknown";try{const a=document.createElement("textarea");a.innerHTML=n;let i=a.value;return i=i.replace(/=\s/g," "),i=i.replace(//g,"'"),i=i.replace(/"/g,"-"),i=i.trim(),i}catch{return n}};return(s.data.orders||[]).map(n=>({order_id:n.order_id,order_number:n.order_number,customer_name:r(n.customer_name),order_type:n.order_type,total_amount:Number(n.total_amount||0),status:n.status,created_at:n.created_at}))},YM=async(t,s)=>{try{return((await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/dashboard/revenue-trend",{headers:{Authorization:`Bearer ${t}`},params:{range:s}})).data.revenue_trend||[]).map(a=>({date:a.date,value:Number(a.revenue??0)}))}catch(r){console.warn("Revenue trend endpoint failed, falling back to analytics/sales:",r);try{return((await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{headers:{Authorization:`Bearer ${t}`},params:{date_range:s}})).data.revenue_by_day||[]).map(a=>({date:a.date,value:Number(a.revenue??0)}))}catch{return[]}}},GM=async t=>{try{return(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/content-settings",{headers:{Authorization:`Bearer ${t}`},params:{category:"dashboard"}})).data.settings||{}}catch{return{}}},XM=async(t,s)=>{await Q.put("https://123salama-lama-food-truck.launchpulse.ai/api/admin/delivery/settings",{delivery_enabled:s},{headers:{Authorization:`Bearer ${t}`}})},JM=({data:t,height:s=280,color:r="#10b981"})=>{const[n,a]=St.useState(null),i=St.useRef(null);if(t.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("svg",{className:"w-16 h-16 mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-base font-medium",children:"No revenue data for this period"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Revenue data will appear here once orders are completed"})]});const o=Math.max(...t.map(k=>k.value),1),l=Math.min(...t.map(k=>k.value),0),c=o-l||1,d=600,m=s,x=70,f=30,b=30,h=50,p=d-x-f,v=m-b-h,g=Array.from({length:5},(k,S)=>{const F=l+c*(4-S)/4;return Math.round(F)}),j=t.map((k,S)=>{const F=t.length===1?x+p/2:S/(t.length-1)*p+x,P=(k.value-l)/c,I=b+v-P*v;return`${F},${I}`}).join(" "),y=t.length>0?(()=>{const k=t.length===1?x+p/2:x,S=t.length===1?x+p/2:(t.length-1)/(t.length-1)*p+x;let F=`M ${k} ${b+v}`;return t.forEach((P,I)=>{const H=t.length===1?x+p/2:I/(t.length-1)*p+x,z=(P.value-l)/c,B=b+v-z*v;F+=` L ${H} ${B}`}),F+=` L ${S} ${b+v} Z`,F})():"",w=k=>k>=1e3?`${(k/1e3).toFixed(1)}k`:new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(k),M=k=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(k),T=k=>{try{return new Intl.DateTimeFormat("en-IE",{month:"short",day:"numeric"}).format(new Date(k))}catch{return k}},N=k=>{try{return new Intl.DateTimeFormat("en-IE",{weekday:"short",month:"short",day:"numeric",year:"numeric"}).format(new Date(k))}catch{return k}},E=t.length<=10?t.length:7,L=Math.ceil(t.length/E);return e.jsxs("div",{ref:i,className:"relative w-full h-full",style:{minHeight:s},children:[e.jsxs("svg",{viewBox:`0 0 ${d} ${m}`,className:"w-full h-full",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:r,stopOpacity:"0.05"})]})}),g.map((k,S)=>{const F=b+v*S/(g.length-1);return e.jsx("line",{x1:x,y1:F,x2:d-f,y2:F,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},`grid-${S}`)}),g.map((k,S)=>{const F=b+v*S/(g.length-1);return e.jsx("text",{x:x-12,y:F,textAnchor:"end",alignmentBaseline:"middle",fontSize:"14",fontWeight:"500",fill:"#6b7280",children:w(k)},`y-label-${S}`)}),t.map((k,S)=>{if(S%L!==0&&S!==t.length-1)return null;const F=t.length===1?x+p/2:S/(t.length-1)*p+x;return e.jsx("text",{x:F,y:m-h+25,textAnchor:"middle",fontSize:"12",fontWeight:"500",fill:"#6b7280",children:T(k.date)},`x-label-${S}`)}),y&&e.jsx("path",{d:y,fill:"url(#areaGradient)"}),e.jsx("polyline",{fill:"none",stroke:r,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",points:j}),t.map((k,S)=>{const F=t.length===1?x+p/2:S/(t.length-1)*p+x,P=(k.value-l)/c,I=b+v-P*v,H=(n==null?void 0:n.index)===S;return e.jsxs("g",{children:[e.jsx("circle",{cx:F,cy:I,r:"20",fill:"transparent",style:{cursor:"pointer"},onMouseEnter:z=>{a({index:S,x:F,y:I,clientX:z.clientX,clientY:z.clientY})},onMouseLeave:()=>a(null)}),H&&e.jsx("circle",{cx:F,cy:I,r:"12",fill:r,opacity:"0.2"}),e.jsx("circle",{cx:F,cy:I,r:H?"8":"6",fill:"white",stroke:r,strokeWidth:"3",style:{cursor:"pointer",transition:"all 0.2s ease"}})]},`point-${S}`)})]}),n!==null&&t[n.index]&&e.jsxs("div",{className:"absolute z-50 px-4 py-3 bg-gray-900 text-white rounded-xl shadow-2xl pointer-events-none transform -translate-x-1/2",style:{left:`${(n.x-x)/p*100}%`,top:`${Math.max(10,(n.y-b)/v*100-20)}%`,minWidth:"140px"},children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:M(t[n.index].value)}),e.jsx("div",{className:"text-sm text-gray-300 mt-1",children:N(t[n.index].date)}),e.jsx("div",{className:"absolute w-3 h-3 bg-gray-900 transform rotate-45",style:{bottom:"-6px",left:"calc(50% - 6px)"}})]})]})},ZM=()=>{const[t,s]=ct(),r=Ue(),n=Z(C=>C.authentication_state.auth_token),a=Z(C=>C.authentication_state.current_user),i=Z(C=>C.business_settings.delivery_enabled),o=Z(C=>C.update_business_settings),[l,c]=u.useState(t.get("date_range")||"today"),[d,m]=u.useState("last_7_days"),[x,f]=u.useState(null),{data:b}=ue({queryKey:["admin-content-settings"],queryFn:()=>GM(n),enabled:!!n,staleTime:5*60*1e3}),h=(C,R)=>(b==null?void 0:b[C])||R;u.useEffect(()=>{s(l!=="today"?{date_range:l}:{})},[l,s]);const{data:p,isLoading:v,error:g,refetch:j}=ue({queryKey:["admin-dashboard-metrics",l],queryFn:()=>HM(n,l),enabled:!!n,staleTime:6e4,refetchOnWindowFocus:!1}),{data:y,isLoading:w,refetch:M}=ue({queryKey:["admin-dashboard-alerts"],queryFn:()=>QM(n),enabled:!!n,staleTime:3e4,refetchInterval:6e4,refetchOnWindowFocus:!1}),{data:T,isLoading:N,error:E,refetch:L}=ue({queryKey:["admin-recent-orders"],queryFn:()=>KM(n),enabled:!!n,staleTime:3e4,refetchOnWindowFocus:!1}),{data:k,isLoading:S,error:F}=ue({queryKey:["admin-revenue-chart",d],queryFn:()=>YM(n,d),enabled:!!n,staleTime:6e4,refetchOnWindowFocus:!1}),P=ce({mutationFn:C=>XM(n,C),onSuccess:(C,R)=>{o({delivery_enabled:R}),r.invalidateQueries({queryKey:["admin-dashboard-metrics"]})}}),I=()=>{j(),M(),L(),f(new Date().toISOString())},H=C=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(C),z=C=>new Intl.DateTimeFormat("en-IE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(C)),B=v||w||N||S;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 w-full max-w-full overflow-x-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 w-full",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 truncate",children:"Dashboard"}),e.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-600 truncate",children:["Welcome back, ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]})]}),e.jsxs("div",{className:"flex flex-row items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs("select",{value:l,onChange:C=>c(C.target.value),className:"px-2 sm:px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-xs sm:text-sm flex-shrink-0",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"last_7_days",children:"7 Days"}),e.jsx("option",{value:"last_30_days",children:"30 Days"}),e.jsx("option",{value:"this_month",children:"Month"})]}),e.jsxs("button",{onClick:I,disabled:B,className:"inline-flex items-center justify-center p-2 sm:px-4 sm:py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex-shrink-0","aria-label":"Refresh",children:[e.jsx("svg",{className:`w-4 h-4 sm:mr-2 ${B?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),x&&e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",z(x)]})]})}),e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-4 sm:mb-6 lg:mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:h("dashboard_label_orders_today","Orders")}),v?e.jsx("div",{className:"mt-1 sm:mt-2 h-8 sm:h-10 w-16 sm:w-20 bg-gradient-to-r from-gray-200 to-gray-100 animate-pulse rounded"}):g?e.jsx("p",{className:"mt-1 sm:mt-2 text-xs sm:text-sm text-red-600",children:"Error"}):e.jsx("p",{className:"mt-1 sm:mt-2 text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:(p==null?void 0:p.orders_today)??0})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:h("dashboard_label_revenue_today","Revenue")}),v?e.jsx("div",{className:"mt-1 sm:mt-2 h-8 sm:h-10 w-16 sm:w-24 bg-gradient-to-r from-gray-200 to-gray-100 animate-pulse rounded"}):g?e.jsx("p",{className:"mt-1 sm:mt-2 text-xs sm:text-sm text-red-600",children:"Error"}):e.jsx("p",{className:"mt-1 sm:mt-2 text-xl sm:text-2xl lg:text-4xl font-bold text-green-600 truncate",children:H((p==null?void 0:p.revenue_today)??0)})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:h("dashboard_label_new_customers","New Customers")}),v?e.jsx("div",{className:"mt-1 sm:mt-2 h-8 sm:h-10 w-12 sm:w-16 bg-gradient-to-r from-gray-200 to-gray-100 animate-pulse rounded"}):g?e.jsx("p",{className:"mt-1 sm:mt-2 text-xs sm:text-sm text-red-600",children:"Error"}):e.jsx("p",{className:"mt-1 sm:mt-2 text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:(p==null?void 0:p.new_customers_today)??0})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-2 sm:mb-4",children:h("dashboard_label_order_types","Order Types")}),v?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 to-gray-100 animate-pulse rounded"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 to-gray-100 animate-pulse rounded"})]}):g?e.jsx("p",{className:"text-sm text-red-600",children:"Error loading"}):e.jsx(e.Fragment,{children:((p==null?void 0:p.orders_today)??0)===0?e.jsx("div",{className:"flex items-center justify-center h-20 text-center",children:e.jsx("p",{className:"text-xs text-gray-400 italic",children:"No orders yet today"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Collection"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[(p==null?void 0:p.collection_count)??0," (",((p==null?void 0:p.collection_percentage)??0).toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.max((p==null?void 0:p.collection_percentage)??0,0)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Delivery"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[(p==null?void 0:p.delivery_count)??0," (",((p==null?void 0:p.delivery_percentage)??0).toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.max((p==null?void 0:p.delivery_percentage)??0,0)}%`}})})]})]})})]})]}),y&&(y.low_stock_items_count>0||y.new_catering_inquiries_count>0)&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 sm:p-4 lg:p-6 mb-4 sm:mb-6 lg:mb-8 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:h("dashboard_title_pending_alerts","Pending Alerts")}),e.jsxs("div",{className:"space-y-2",children:[y.low_stock_items_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-semibold",children:y.low_stock_items_count})," items are low in stock"]}),e.jsx(X,{to:"/admin/stock?status=low_stock",className:"text-sm font-medium text-yellow-800 hover:text-yellow-900 underline",children:"View Stock"})]}),y.new_catering_inquiries_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-semibold",children:y.new_catering_inquiries_count})," new catering inquiries"]}),e.jsx(X,{to:"/admin/catering?status=new",className:"text-sm font-medium text-yellow-800 hover:text-yellow-900 underline",children:"View Inquiries"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 mb-4 sm:mb-6 lg:mb-8",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between mb-3 sm:mb-4 lg:mb-6 gap-2 sm:gap-4",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 truncate",children:h("dashboard_title_revenue_trend","Revenue Trend")}),e.jsxs("select",{value:d,onChange:C=>m(C.target.value),className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white font-medium text-gray-700 cursor-pointer hover:bg-gray-50 transition-colors flex-shrink-0",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"last_7_days",children:"7 Days"}),e.jsx("option",{value:"last_30_days",children:"30 Days"}),e.jsx("option",{value:"this_month",children:"Month"})]})]}),S?e.jsx("div",{className:"h-80 bg-gradient-to-r from-gray-100 to-gray-200 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:"Loading chart data..."})}):F?e.jsxs("div",{className:"h-80 flex flex-col items-center justify-center text-red-500 bg-red-50 rounded-lg",children:[e.jsx("svg",{className:"w-12 h-12 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"font-medium",children:"Failed to load chart data"}),e.jsx("button",{onClick:()=>r.invalidateQueries({queryKey:["admin-revenue-chart"]}),className:"mt-3 px-4 py-2 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-100 transition-colors",children:"Try Again"})]}):e.jsx("div",{className:"h-80 min-h-[320px]",children:e.jsx(JM,{data:k||[],height:320,color:"#10b981"})})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 mb-3 sm:mb-4",children:h("dashboard_title_quick_actions","Quick Actions")}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Delivery Status"}),e.jsx("button",{onClick:()=>P.mutate(!i),disabled:P.isPending,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${i?"bg-green-600":"bg-gray-300"} ${P.isPending?"opacity-50 cursor-not-allowed":""}`,"aria-label":`Turn delivery ${i?"off":"on"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${i?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium ${i?"text-green-700":"text-gray-600"}`,children:i?"Online":"Offline"})]})]}),e.jsx(X,{to:"/admin/menu/item",className:"block w-full px-4 py-3 text-center text-sm font-semibold text-white bg-gray-900 hover:bg-gray-800 rounded-lg transition-colors duration-200 shadow-sm",children:h("quick_action_add_menu_item","Add Menu Item")}),e.jsx(X,{to:"/admin/discounts/code",className:"block w-full px-4 py-3 text-center text-sm font-medium text-gray-700 border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:h("quick_action_create_discount","Create Discount")}),e.jsx(X,{to:"/admin/analytics",className:"block w-full px-4 py-3 text-center text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:h("quick_action_view_analytics","View Analytics")}),e.jsx(X,{to:"/admin/content",className:"block w-full px-4 py-3 text-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200 border border-blue-200",children:"Edit Dashboard Labels"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm sm:shadow-lg border border-gray-100 overflow-hidden w-full max-w-full",children:[e.jsxs("div",{className:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900",children:h("dashboard_title_recent_orders","Recent Orders")}),e.jsx(X,{to:"/admin/orders",className:"text-xs sm:text-sm font-medium text-blue-600 hover:text-blue-700 flex-shrink-0",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto w-full",children:N?e.jsx("div",{className:"p-6 space-y-3",children:[1,2,3,4,5].map(C=>e.jsx("div",{className:"h-12 bg-gray-200 animate-pulse rounded"},C))}):E?e.jsx("div",{className:"p-6 text-center text-red-600",children:"Failed to load recent orders"}):T&&T.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center cursor-pointer hover:text-gray-700 transition-colors group",children:["Amount",e.jsx("svg",{className:"w-3 h-3 ml-1 text-gray-400 group-hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center cursor-pointer hover:text-gray-700 transition-colors group",children:["Status",e.jsx("svg",{className:"w-3 h-3 ml-1 text-gray-400 group-hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center cursor-pointer hover:text-gray-700 transition-colors group",children:["Time",e.jsx("svg",{className:"w-3 h-3 ml-1 text-gray-400 group-hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(X,{to:`/admin/orders/${C.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:C.order_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:C.customer_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.order_type==="delivery"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:C.order_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:H(C.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.status==="completed"?"bg-green-100 text-green-800":C.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z(C.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(X,{to:`/admin/orders/${C.order_id}`,className:"text-blue-600 hover:text-blue-900",children:"View"})})]},C.order_id))})]}):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No recent orders"})})]})]})]})})},Zi="https://123salama-lama-food-truck.launchpulse.ai",eR=async(t,s,r,n)=>{const a=new URLSearchParams;s&&a.append("category",s),r&&a.append("is_active",r),n&&a.append("search",n),a.append("_t",Date.now().toString());const i=await Q.get(`${Zi}/api/admin/menu/items?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return{...i.data,items:i.data.items.map(o=>({...o,price:Number(o.price||0),current_stock:o.current_stock!==null?Number(o.current_stock):null,low_stock_threshold:o.low_stock_threshold!==null?Number(o.low_stock_threshold):null,sort_order:Number(o.sort_order||0)}))}},tR=async t=>(await Q.get(`${Zi}/api/admin/menu/categories`,{headers:{Authorization:`Bearer ${t}`}})).data,sR=async(t,s,r)=>{await Q.put(`${Zi}/api/admin/menu/items/${s}`,{is_active:r},{headers:{Authorization:`Bearer ${t}`}})},rR=async(t,s)=>{const r=await Q.delete(`${Zi}/api/admin/menu/items/${s}`,{headers:{Authorization:`Bearer ${t}`}});if(r.status===200||r.status===204)return{success:!0,deletedId:s};throw new Error("Failed to delete item")},nR=async(t,s)=>{const r=await Q.post(`${Zi}/api/admin/menu/items/${s}/duplicate`,{},{headers:{Authorization:`Bearer ${t}`}});return{item:{...r.data.item,price:Number(r.data.item.price||0),current_stock:r.data.item.current_stock!==null?Number(r.data.item.current_stock):null,sort_order:Number(r.data.item.sort_order||0)}}},aR=async(t,s,r)=>{await Q.put(`${Zi}/api/admin/menu/items/${s}`,{sort_order:r},{headers:{Authorization:`Bearer ${t}`}})},iR=()=>{const t=Z(te=>te.authentication_state.auth_token),[s,r]=ct(),n=Be(),a=Ue(),i=s.get("category"),o=s.get("status"),[l,c]=u.useState(i),[d,m]=u.useState(o),[x,f]=u.useState(""),[b,h]=u.useState(""),[p,v]=u.useState([]),[g,j]=u.useState(!1),[y,w]=u.useState(null),[M,T]=u.useState(null),[N,E]=u.useState(null),[L,k]=u.useState(null),[S,F]=u.useState(null);u.useEffect(()=>{const te=setTimeout(()=>{h(x)},500);return()=>clearTimeout(te)},[x]),u.useEffect(()=>{const te=new URLSearchParams;l&&te.set("category",l),d&&te.set("status",d),r(te,{replace:!0})},[l,d,r]);const{data:P,isLoading:I,error:H}=ue({queryKey:["admin-categories"],queryFn:()=>tR(t),enabled:!!t,staleTime:5*60*1e3}),{data:z,isLoading:B,error:C,refetch:R}=ue({queryKey:["admin-menu-items",l,d,b],queryFn:async()=>{console.log("[AdminMenuList] Fetching menu items with filters:",{category:l,status:d,search:b});const te=await eR(t,l,d,b);return console.log("[AdminMenuList] Fetched items:",te.items.length,"items"),te.items.length>0&&console.log("[AdminMenuList] Sample prices:",te.items.slice(0,3).map(Ne=>({name:Ne.name,price:Ne.price}))),te},enabled:!!t,staleTime:0,gcTime:0,refetchOnMount:"always",refetchOnWindowFocus:!1,refetchOnReconnect:!0}),_=ce({mutationFn:({itemId:te,isActive:Ne})=>sR(t,te,Ne),onSuccess:()=>{a.invalidateQueries({queryKey:["admin-menu-items"]}),T("Item status updated successfully"),setTimeout(()=>T(null),3e3)}}),q=ce({mutationFn:te=>rR(t,te),onMutate:async te=>(F(te),await a.cancelQueries({queryKey:["admin-menu-items"]}),{previousData:a.getQueryData(["admin-menu-items",l,d,b])}),onSuccess:(te,Ne)=>{a.setQueryData(["admin-menu-items",l,d,b],J=>J&&{...J,items:J.items.filter(he=>he.item_id!==Ne),total:J.total-1}),a.invalidateQueries({queryKey:["admin-menu-items"]}),v(J=>J.filter(he=>he!==Ne)),k(null),F(null),T("Item deleted successfully"),setTimeout(()=>T(null),3e3)},onError:(te,Ne,J)=>{var _e,Fe;J!=null&&J.previousData&&a.setQueryData(["admin-menu-items",l,d,b],J.previousData),F(null),k(null);const he=((Fe=(_e=te==null?void 0:te.response)==null?void 0:_e.data)==null?void 0:Fe.message)||(te==null?void 0:te.message)||"Failed to delete item";E(he),setTimeout(()=>E(null),5e3)}}),O=ce({mutationFn:te=>nR(t,te),onSuccess:te=>{a.invalidateQueries({queryKey:["admin-menu-items"]}),n(`/admin/menu/item?item_id=${te.item.item_id}`)}}),V=ce({mutationFn:({itemId:te,sortOrder:Ne})=>aR(t,te,Ne),onSuccess:()=>{a.invalidateQueries({queryKey:["admin-menu-items"]}),T("Items reordered successfully"),setTimeout(()=>T(null),3e3)}}),D=te=>{c(te),v([])},G=te=>{m(te),v([])},se=te=>{f(te.target.value),v([])},le=te=>{v(Ne=>Ne.includes(te)?Ne.filter(J=>J!==te):[...Ne,te])},K=()=>{p.length===(z==null?void 0:z.items.length)?v([]):v((z==null?void 0:z.items.map(te=>te.item_id))||[])},A=(te,Ne)=>{_.mutate({itemId:te,isActive:!Ne})},$=te=>{k(te)},re=()=>{L&&q.mutate(L)},ve=te=>{O.mutate(te)},xe=async()=>{for(const te of p)await _.mutateAsync({itemId:te,isActive:!0});v([]),T(`${p.length} items enabled successfully`),setTimeout(()=>T(null),3e3)},ke=async()=>{for(const te of p)await _.mutateAsync({itemId:te,isActive:!1});v([]),T(`${p.length} items disabled successfully`),setTimeout(()=>T(null),3e3)},Ce=async()=>{if(window.confirm(`Delete ${p.length} items? This cannot be undone.`)){const te=[...p];let Ne=0,J=0;for(const he of te)try{await q.mutateAsync(he),Ne++}catch(_e){J++,console.error(`Failed to delete item ${he}:`,_e)}v([]),J===0?(T(`${Ne} items deleted successfully`),setTimeout(()=>T(null),3e3)):Ne===0?(E(`Failed to delete ${J} items`),setTimeout(()=>E(null),5e3)):(T(`${Ne} items deleted successfully`),E(`Failed to delete ${J} items`),setTimeout(()=>{T(null),E(null)},5e3))}},Pe=(te,Ne)=>{w(Ne),te.dataTransfer.effectAllowed="move"},ne=te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},be=(te,Ne)=>{if(te.preventDefault(),!y||y===Ne){w(null);return}const J=(z==null?void 0:z.items)||[],he=J.findIndex(Se=>Se.item_id===y),_e=J.findIndex(Se=>Se.item_id===Ne);if(he===-1||_e===-1)return;const Fe=[...J],[ae]=Fe.splice(he,1);Fe.splice(_e,0,ae);const fe=[];Fe.forEach((Se,He)=>{Se.sort_order!==He&&fe.push({itemId:Se.item_id,sortOrder:He})}),Promise.all(fe.map(Se=>V.mutateAsync(Se))).then(()=>{R()}),w(null)},U=te=>{const Ne=P==null?void 0:P.categories.find(J=>J.category_id===te);return(Ne==null?void 0:Ne.name)||"Unknown"},W=te=>te.stock_tracked?te.current_stock===null||te.current_stock===0?{status:"Out of Stock",color:"red"}:te.low_stock_threshold!==null&&te.current_stock<=te.low_stock_threshold?{status:"Low Stock",color:"yellow"}:{status:"In Stock",color:"green"}:{status:"Not Tracked",color:"gray"};if(I||B)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"h-12 w-12 animate-spin text-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading menu items..."})]})})});if(H||C)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Failed to Load Data"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(H==null?void 0:H.message)||(C==null?void 0:C.message)}),e.jsx("button",{onClick:()=>{a.invalidateQueries({queryKey:["admin-categories"]}),a.invalidateQueries({queryKey:["admin-menu-items"]})},className:"bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Retry"})]})})});const oe=(P==null?void 0:P.categories)||[],je=(z==null?void 0:z.items)||[],Ve=p.length===je.length&&je.length>0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Menu Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your menu items, categories, and availability"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(X,{to:"/admin/menu/categories",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(bS,{className:"h-4 w-4 mr-2"}),"Manage Categories"]}),e.jsxs(X,{to:"/admin/menu/item",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors shadow-lg hover:shadow-xl",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Add New Item"]})]})]})})}),M&&e.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-600 text-white px-6 py-4 rounded-lg shadow-xl flex items-center gap-3 animate-fade-in",children:[e.jsx(Oe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:M})]}),N&&e.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-600 text-white px-6 py-4 rounded-lg shadow-xl flex items-center gap-3 animate-fade-in",children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:N})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:x,onChange:se,placeholder:"Search menu items...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),e.jsx("div",{className:"sm:w-64",children:e.jsxs("select",{value:l||"",onChange:te=>D(te.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),oe.map(te=>e.jsx("option",{value:te.category_id,children:te.name},te.category_id))]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>G(null),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d===null?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>G("true"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Active"}),e.jsx("button",{onClick:()=>G("false"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="false"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Inactive"})]})]})}),p.length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-orange-900",children:[p.length," item",p.length!==1?"s":""," selected"]}),e.jsx("button",{onClick:()=>v([]),className:"text-orange-700 hover:text-orange-900 text-sm font-medium",children:"Clear selection"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:xe,disabled:_.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Enable All"}),e.jsx("button",{onClick:ke,disabled:_.isPending,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Disable All"}),e.jsx("button",{onClick:Ce,disabled:q.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete All"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Drag & Drop Reordering"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable to reorder items by dragging them"})]}),e.jsx("button",{onClick:()=>j(!g),className:`px-6 py-2 rounded-lg font-medium transition-colors ${g?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:g?"Disable Reordering":"Enable Reordering"})]}),je.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Je,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No menu items found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x||l||d?"Try adjusting your filters or search query":"Get started by adding your first menu item"}),e.jsxs(X,{to:"/admin/menu/item",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Add First Item"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("input",{type:"checkbox",checked:Ve,onChange:K,className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),je.map(te=>{const Ne=W(te),J=p.includes(te.item_id);return e.jsx("div",{draggable:g,onDragStart:he=>Pe(he,te.item_id),onDragOver:g?ne:void 0,onDrop:g?he=>be(he,te.item_id):void 0,className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 transition-all ${g?"cursor-move":""} ${y===te.item_id?"opacity-50":""} ${J?"ring-2 ring-orange-500":""}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[g&&e.jsx(Ed,{className:"h-6 w-6 text-gray-400"}),e.jsx("input",{type:"checkbox",checked:J,onChange:()=>le(te.item_id),className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"})]}),e.jsx("div",{className:"flex-shrink-0",children:te.image_url?e.jsx("img",{src:te.image_url,alt:te.name,className:"h-24 w-24 object-cover rounded-lg"}):e.jsx("div",{className:"h-24 w-24 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Je,{className:"h-10 w-10 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:te.name}),te.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:te.description})]}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",te.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:U(te.category_id)}),te.dietary_tags&&te.dietary_tags.map(he=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:he},he))]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${te.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:te.is_active?"Active":"Inactive"}),te.is_featured&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded",children:"Featured"}),te.is_limited_edition&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded",children:"Limited Edition"}),te.stock_tracked&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${Ne.color==="red"?"bg-red-100 text-red-800":Ne.color==="yellow"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[Ne.status,te.current_stock!==null&&` (${te.current_stock})`]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>A(te.item_id,te.is_active),disabled:_.isPending,className:"inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:te.is_active?e.jsxs(e.Fragment,{children:[e.jsx(FS,{className:"h-4 w-4 mr-1"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(TS,{className:"h-4 w-4 mr-1"}),"Enable"]})}),e.jsxs(X,{to:`/admin/menu/item?item_id=${te.item_id}`,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(Qw,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>ve(te.item_id),disabled:O.isPending,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(W0,{className:"h-4 w-4 mr-1"}),"Duplicate"]}),e.jsx("button",{onClick:()=>$(te.item_id),disabled:S===te.item_id||q.isPending,className:"inline-flex items-center px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S===te.item_id?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-4 w-4 mr-1 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"h-4 w-4 mr-1"}),"Delete"]})})]})]})]})},te.item_id)})]})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(me,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Menu Item"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Are you sure you want to delete this item? This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:S!==null||q.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:S!==null?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete Item"})]})]})})]})})},oR=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data,lR=async(t,s)=>{console.log("[AdminMenuItemForm] Fetching item:",t);const r=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items/${t}`,{headers:{Authorization:`Bearer ${s}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});console.log("[AdminMenuItemForm] Fetched item response:",r.data);const n=r.data.item||r.data;return console.log("[AdminMenuItemForm] Extracted item price:",n.price),n},cR=async(t,s)=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,dR=async(t,s,r)=>{var a;console.log("[AdminMenuItemForm] PUT request to update item:",t),console.log("[AdminMenuItemForm] Update payload:",JSON.stringify(s,null,2));const n=await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});return console.log("[AdminMenuItemForm] PUT response:",n.data),console.log("[AdminMenuItemForm] Updated item price from response:",(a=n.data.item)==null?void 0:a.price),n.data.item||n.data},uR=[{value:"vegan",label:"Vegan",icon:"V"},{value:"vegetarian",label:"Vegetarian",icon:"VG"},{value:"gluten_free",label:"Gluten-Free",icon:"GF"},{value:"halal",label:"Halal",icon:"H"},{value:"dairy_free",label:"Dairy-Free",icon:"DF"},{value:"nut_free",label:"Nut-Free",icon:"NF"}],mR=()=>{var J,he,_e,Fe;const t=Be(),s=Ue(),[r]=ct(),n=r.get("item_id"),a=!!n,i=Z(ae=>ae.authentication_state.auth_token),[o,l]=u.useState(""),[c,d]=u.useState(""),[m,x]=u.useState(""),[f,b]=u.useState(0),[h,p]=u.useState(""),[v,g]=u.useState([]),[j,y]=u.useState([]),[w,M]=u.useState(!1),[T,N]=u.useState(""),[E,L]=u.useState(!0),[k,S]=u.useState(!0),[F,P]=u.useState(!0),[I,H]=u.useState(!1),[z,B]=u.useState(null),[C,R]=u.useState(null),[_,q]=u.useState(!1),[O,V]=u.useState(""),[D,G]=u.useState(""),[se,le]=u.useState([]),[K,A]=u.useState(""),{data:$,isLoading:re,error:ve}=ue({queryKey:["admin-categories"],queryFn:()=>oR(i),enabled:!!i,staleTime:5*60*1e3}),{data:xe,isLoading:ke,error:Ce}=ue({queryKey:["admin-menu-item",n],queryFn:()=>lR(n,i),enabled:a&&!!i&&!!n,staleTime:60*1e3});u.useEffect(()=>{xe&&a&&(console.log("[AdminMenuItemForm] Populating form with item data:",xe),console.log("[AdminMenuItemForm] Setting price to:",xe.price,"type:",typeof xe.price),l(xe.name||""),d(xe.description||""),x(xe.category_id||""),b(Number(xe.price)||0),p(xe.image_url||""),g(xe.image_urls||[]),y(xe.dietary_tags||[]),M(xe.is_limited_edition||!1),N(xe.limited_edition_end_date||""),L(xe.is_active),S(xe.available_for_collection),P(xe.available_for_delivery),H(xe.stock_tracked||!1),B(xe.current_stock),R(xe.low_stock_threshold),q(xe.is_featured||!1),V(xe.meta_description||""),G(xe.image_alt_text||""))},[xe,a]);const Pe=ce({mutationFn:ae=>cR(ae,i),onSuccess:async ae=>{console.log("[AdminMenuItemForm] Create successful, item:",ae),await s.cancelQueries({queryKey:["admin-menu-items"]}),s.removeQueries({queryKey:["admin-menu-items"]}),s.invalidateQueries({queryKey:["admin-menu-items"]}),A("Menu item created successfully!"),await new Promise(fe=>setTimeout(fe,300));try{await s.prefetchQuery({queryKey:["admin-menu-items",null,null,""],queryFn:()=>{const fe=new URLSearchParams;return fe.append("_t",Date.now().toString()),Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items?${fe.toString()}`,{headers:{Authorization:`Bearer ${i}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}).then(Se=>({...Se.data,items:Se.data.items.map(He=>({...He,price:Number(He.price||0)}))}))}})}catch(fe){console.error("[AdminMenuItemForm] Pre-fetch error:",fe)}t("/admin/menu",{replace:!0})},onError:ae=>{var Se,He;const fe=((He=(Se=ae.response)==null?void 0:Se.data)==null?void 0:He.message)||ae.message||"Failed to create menu item";le([fe]),console.error("[AdminMenuItemForm] Create error:",ae)}}),ne=ce({mutationFn:ae=>(console.log("[AdminMenuItemForm] Submitting update for item:",n,"with payload:",ae),dR(n,ae,i)),onSuccess:async ae=>{console.log("[AdminMenuItemForm] Update successful, item:",ae),console.log("[AdminMenuItemForm] Updated price:",ae.price),await s.cancelQueries({queryKey:["admin-menu-items"]}),await s.cancelQueries({queryKey:["admin-menu-item"]}),s.removeQueries({queryKey:["admin-menu-items"]}),s.removeQueries({queryKey:["admin-menu-item",n]}),s.invalidateQueries({queryKey:["admin-menu-items"]}),s.invalidateQueries({queryKey:["admin-menu-item"]}),A("Menu item updated successfully!"),await new Promise(fe=>setTimeout(fe,500));try{await s.prefetchQuery({queryKey:["admin-menu-items",null,null,""],queryFn:()=>{const fe=new URLSearchParams;return fe.append("_t",Date.now().toString()),Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items?${fe.toString()}`,{headers:{Authorization:`Bearer ${i}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}).then(Se=>({...Se.data,items:Se.data.items.map(He=>({...He,price:Number(He.price||0)}))}))}})}catch(fe){console.error("[AdminMenuItemForm] Pre-fetch error:",fe)}t("/admin/menu",{replace:!0})},onError:ae=>{var Se,He;const fe=((He=(Se=ae.response)==null?void 0:Se.data)==null?void 0:He.message)||ae.message||"Failed to update menu item";le([fe]),console.error("[AdminMenuItemForm] Update error:",ae)}}),be=()=>{const ae=[];return o.trim()||ae.push("Item name is required"),m||ae.push("Please select a category"),f<=0&&ae.push("Price must be greater than 0"),w&&!T&&ae.push("Limited edition end date is required"),I&&((z===null||z<0)&&ae.push("Current stock must be a non-negative number"),C!==null&&C<0&&ae.push("Low stock threshold must be a non-negative number")),le(ae),ae.length===0},U=ae=>{if(ae.preventDefault(),le([]),A(""),console.log("[AdminMenuItemForm] Form submitted, isEditMode:",a),console.log("[AdminMenuItemForm] Current price value:",f,"type:",typeof f),!be()){console.log("[AdminMenuItemForm] Form validation failed");return}const fe={name:o.trim(),description:c.trim()||null,category_id:m,price:Number(f),image_url:h.trim()||null,image_urls:v.filter(Se=>Se.trim()).length>0?v.filter(Se=>Se.trim()):null,dietary_tags:j.length>0?j:null,is_limited_edition:w,limited_edition_end_date:w&&T?T:null,is_active:E,available_for_collection:k,available_for_delivery:F,stock_tracked:I,current_stock:I?z:null,low_stock_threshold:I?C:null,is_featured:_,meta_description:O.trim()||null,image_alt_text:D.trim()||null};console.log("[AdminMenuItemForm] Submitting payload:",fe),a?(console.log("[AdminMenuItemForm] Calling updateMutation.mutate"),ne.mutate(fe)):(console.log("[AdminMenuItemForm] Calling createMutation.mutate"),Pe.mutate(fe))},W=ae=>{y(fe=>fe.includes(ae)?fe.filter(Se=>Se!==ae):[...fe,ae])},oe=()=>{g(ae=>[...ae,""])},je=(ae,fe)=>{g(Se=>Se.map((He,jr)=>jr===ae?fe:He))},Ve=ae=>{g(fe=>fe.filter((Se,He)=>He!==ae))};if(re||a&&ke)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading..."})]})})});if(ve||a&&Ce)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6 max-w-md",children:[e.jsx("h2",{className:"text-red-800 font-bold text-lg mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:((he=(J=ve==null?void 0:ve.response)==null?void 0:J.data)==null?void 0:he.message)||((Fe=(_e=Ce==null?void 0:Ce.response)==null?void 0:_e.data)==null?void 0:Fe.message)||"Failed to load required data"}),e.jsx(X,{to:"/admin/menu",className:"inline-block bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Back to Menu"})]})})});const te=($==null?void 0:$.categories)||[],Ne=Pe.isPending||ne.isPending;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(X,{to:"/admin/menu",className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Menu"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Menu Item":"Create New Menu Item"}),e.jsx("p",{className:"text-gray-600 mt-2",children:a?"Update menu item details and settings":"Add a new item to your menu"})]}),K&&e.jsx("div",{className:"mb-6 bg-green-50 border-2 border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-green-800 font-medium",children:K})]})}),se.length>0&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:se.map((ae,fe)=>e.jsx("li",{className:"text-red-700 text-sm",children:ae},fe))})]})]})}),e.jsxs("form",{onSubmit:U,className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:o,onChange:ae=>l(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., Chicken Burrito",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:c,onChange:ae=>d(ae.target.value),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"Describe your menu item..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category",value:m,onChange:ae=>x(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),te.map(ae=>e.jsx("option",{value:ae.category_id,children:ae.name},ae.category_id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"price",value:f,onChange:ae=>{const fe=Number(ae.target.value);console.log("[AdminMenuItemForm] Price changed from",f,"to",fe),b(fe)},step:"0.01",min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"0.00",required:!0})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Images"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Image URL"}),e.jsx("input",{type:"url",id:"imageUrl",value:h,onChange:ae=>p(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"https://example.com/image.jpg"}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:h,alt:"Primary preview",className:"h-32 w-32 object-cover rounded-lg border-2 border-gray-200",onError:ae=>{ae.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3ENo Image%3C/text%3E%3C/svg%3E'}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Images (Gallery)"}),e.jsxs("div",{className:"space-y-2",children:[v.map((ae,fe)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"url",value:ae,onChange:Se=>je(fe,Se.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"https://example.com/image.jpg"}),e.jsx("button",{type:"button",onClick:()=>Ve(fe),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Remove"})]},fe)),e.jsx("button",{type:"button",onClick:oe,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"+ Add Image URL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageAltText",className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Alt Text (for accessibility)"}),e.jsx("input",{type:"text",id:"imageAltText",value:D,onChange:ae=>G(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., Delicious chicken burrito with fresh ingredients"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dietary Information"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:uR.map(ae=>e.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${j.includes(ae.value)?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:j.includes(ae.value),onChange:()=>W(ae.value),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsxs("span",{className:"ml-2 text-sm font-medium text-gray-700",children:[ae.icon," ",ae.label]})]},ae.value))})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Availability Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:ae=>L(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Item is Active (visible to customers)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:ae=>S(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Available for Collection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:ae=>P(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Available for Delivery"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:ae=>q(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Featured Item (show on homepage)"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Limited Edition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:ae=>M(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"This is a Limited Edition item"})]}),w&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"endDate",value:T,onChange:ae=>N(ae.target.value),className:"w-full md:w-1/2 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",required:w})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Stock Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:ae=>H(ae.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Track stock for this item"})]}),I&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"currentStock",value:z??"",onChange:ae=>B(ae.target.value?Number(ae.target.value):null),min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"0",required:I})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Alert Threshold"}),e.jsx("input",{type:"number",id:"threshold",value:C??"",onChange:ae=>R(ae.target.value?Number(ae.target.value):null),min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., 10"})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"SEO (Optional)"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),e.jsx("textarea",{id:"metaDescription",value:O,onChange:ae=>V(ae.target.value),rows:2,maxLength:160,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"Brief description for search engines (max 160 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[O.length,"/160 characters"]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 flex items-center justify-between gap-4",children:[e.jsx(X,{to:"/admin/menu",className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Ne,className:"px-8 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:Ne?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Updating...":"Creating..."]}):a?"Update Item":"Create Item"})]})]})]})})})},Eu="https://123salama-lama-food-truck.launchpulse.ai",xR=async t=>(await Q.get(`${Eu}/api/admin/menu/categories`,{headers:{Authorization:`Bearer ${t}`}})).data.categories,hR=async(t,s)=>(await Q.post(`${Eu}/api/admin/menu/categories`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,Ey=async(t,s,r)=>(await Q.put(`${Eu}/api/admin/menu/categories/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,pR=async(t,s)=>{await Q.delete(`${Eu}/api/admin/menu/categories/${t}`,{headers:{Authorization:`Bearer ${s}`}})},fR=()=>{var B;const t=Z(C=>C.authentication_state.auth_token),s=Ue(),[r,n]=u.useState(!1),[a,i]=u.useState("create"),[o,l]=u.useState({category_id:null,name:"",description:null,sort_order:0}),[c,d]=u.useState(null),[m,x]=u.useState(!1),[f,b]=u.useState(null),[h,p]=u.useState(null),[v,g]=u.useState(null),{data:j=[],isLoading:y}=ue({queryKey:["admin-categories"],queryFn:()=>xR(t||""),enabled:!!t,select:C=>C.sort((R,_)=>R.sort_order-_.sort_order),staleTime:3e4}),w=ce({mutationFn:C=>hR(C,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),n(!1),N(),d(null)},onError:C=>{var R,_;d(((_=(R=C.response)==null?void 0:R.data)==null?void 0:_.message)||"Failed to create category")}}),M=ce({mutationFn:({categoryId:C,data:R})=>Ey(C,R,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),n(!1),N(),d(null)},onError:C=>{var R,_;d(((_=(R=C.response)==null?void 0:R.data)==null?void 0:_.message)||"Failed to update category")}}),T=ce({mutationFn:C=>pR(C,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),x(!1),b(null),d(null)},onError:C=>{var R,_;d(((_=(R=C.response)==null?void 0:R.data)==null?void 0:_.message)||"Failed to delete category. It may have assigned items."),x(!1),b(null)}}),N=()=>{l({category_id:null,name:"",description:null,sort_order:0}),i("create")},E=()=>{N();const C=j.length>0?Math.max(...j.map(R=>R.sort_order))+1:0;l(R=>({...R,sort_order:C})),i("create"),n(!0),d(null)},L=C=>{l({category_id:C.category_id,name:C.name,description:C.description,sort_order:C.sort_order}),i("edit"),n(!0),d(null)},k=C=>{var _;if(C.preventDefault(),d(null),!o.name.trim()){d("Category name is required");return}if(o.name.length>100){d("Category name must be 100 characters or less");return}if(o.description&&o.description.length>500){d("Description must be 500 characters or less");return}const R={name:o.name.trim(),description:((_=o.description)==null?void 0:_.trim())||null,sort_order:o.sort_order};a==="create"?w.mutate(R):a==="edit"&&o.category_id&&M.mutate({categoryId:o.category_id,data:R})},S=C=>{b(C),x(!0),d(null)},F=()=>{f&&T.mutate(f.category_id)},P=(C,R)=>{p(R),C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/html",C.currentTarget.outerHTML),C.currentTarget.style.opacity="0.5"},I=C=>{C.currentTarget.style.opacity="1",p(null),g(null)},H=(C,R)=>{C.preventDefault(),C.dataTransfer.dropEffect="move",h!==R&&g(R)},z=async(C,R)=>{var V;if(C.preventDefault(),C.stopPropagation(),h===null||h===R){p(null),g(null);return}const _=[...j],[q]=_.splice(h,1);_.splice(R,0,q);const O=_.map((D,G)=>({...D,sort_order:G}));s.setQueryData(["admin-categories"],O);try{for(const D of O)D.sort_order!==((V=j.find(G=>G.category_id===D.category_id))==null?void 0:V.sort_order)&&await Ey(D.category_id,{name:D.name,description:D.description,sort_order:D.sort_order},t||"");s.invalidateQueries({queryKey:["admin-categories"]})}catch{d("Failed to reorder categories"),s.invalidateQueries({queryKey:["admin-categories"]})}p(null),g(null)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Menu Categories"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Organize your menu structure and manage category display order"})]}),e.jsxs("button",{onClick:E,className:"mt-4 sm:mt-0 inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx(xm,{className:"w-5 h-5 mr-2"}),"Add New Category"]})]})}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:c})]}),e.jsx("button",{onClick:()=>d(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(Ae,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:y?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600"})}):j.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:e.jsx(xm,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first menu category to get started"}),e.jsxs("button",{onClick:E,className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(xm,{className:"w-5 h-5 mr-2"}),"Add Category"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"w-32 px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((C,R)=>e.jsxs("tr",{draggable:!0,onDragStart:_=>P(_,R),onDragEnd:I,onDragOver:_=>H(_,R),onDrop:_=>z(_,R),className:`hover:bg-gray-50 transition-colors cursor-move ${h===R?"opacity-50":""} ${v===R?"border-t-2 border-orange-500":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-gray-400 hover:text-gray-600",children:[e.jsx(Ed,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:C.sort_order})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:C.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:C.description||e.jsx("span",{className:"italic text-gray-400",children:"No description"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:new Date(C.created_at).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>L(C),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":`Edit ${C.name}`,children:e.jsx(fa,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(C),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors","aria-label":`Delete ${C.name}`,children:e.jsx(It,{className:"w-4 h-4"})})]})})]},C.category_id))})]})})}),j.length>0&&e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ed,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Drag and drop categories to reorder them. The order here will be reflected in the customer menu."]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a==="create"?"Create New Category":"Edit Category"}),e.jsx("button",{onClick:()=>{n(!1),N(),d(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ae,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"category-name",type:"text",value:o.name,onChange:C=>{d(null),l(R=>({...R,name:C.target.value}))},placeholder:"e.g., Mains, Sides, Drinks",maxLength:100,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[o.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"category-description",value:o.description||"",onChange:C=>{d(null),l(R=>({...R,description:C.target.value||null}))},placeholder:"Brief description of this category",rows:3,maxLength:500,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none resize-none"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[((B=o.description)==null?void 0:B.length)||0,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-sort-order",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{id:"category-sort-order",type:"number",value:o.sort_order,onChange:C=>{d(null),l(R=>({...R,sort_order:parseInt(C.target.value)||0}))},min:0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first in the menu. You can also drag and drop to reorder."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),N(),d(null)},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w.isPending||M.isPending,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:w.isPending||M.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a==="create"?"Creating...":"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),a==="create"?"Create Category":"Update Category"]})})]})]})]})}),m&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx("div",{className:"flex-shrink-0 inline-flex items-center justify-center w-12 h-12 bg-red-100 rounded-full",children:e.jsx(ts,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete Category"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete ",e.jsx("strong",{children:f.name}),"? This action cannot be undone."]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," If this category has menu items assigned to it, deletion will fail. Please reassign or delete those items first."]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{x(!1),b(null)},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:T.isPending,className:"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:T.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"Delete Category"]})})]})]})})})]})})})},gR=async(t,s,r)=>{const n=new URLSearchParams;return s&&n.append("category",s),r&&n.append("status",r),(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/stock?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},yR=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/stock/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,bR=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories||[],vR=()=>{const t=Z(z=>z.authentication_state.auth_token),[s,r]=ct(),n=s.get("category"),a=s.get("status"),[i,o]=u.useState(n),[l,c]=u.useState(a),[d,m]=u.useState(null),[x,f]=u.useState(!1),[b,h]=u.useState({change_type:"restock",quantity:0,reason:"",notes:""}),[p,v]=u.useState({}),[g,j]=u.useState(""),y=Ue(),{data:w=[]}=ue({queryKey:["admin-categories"],queryFn:()=>bR(t),enabled:!!t,staleTime:5*60*1e3}),{data:M,isLoading:T,isError:N,error:E}=ue({queryKey:["admin-stock-overview",i,l],queryFn:()=>gR(t,i,l),enabled:!!t,staleTime:60*1e3,select:z=>{if(!z||typeof z!="object")return console.error("[AdminStock] Invalid data structure received:",z),{total_items_tracked:0,low_stock_count:0,out_of_stock_count:0,items:[]};const B=Array.isArray(z.items)?z.items:[];try{return{total_items_tracked:z.total_items_tracked||0,low_stock_count:z.low_stock_count||0,out_of_stock_count:z.out_of_stock_count||0,items:B.map(C=>({...C,current_stock:C.current_stock!==null&&C.current_stock!==void 0?Number(C.current_stock):null,low_stock_threshold:C.low_stock_threshold!==null&&C.low_stock_threshold!==void 0?Number(C.low_stock_threshold):null}))}}catch(C){return console.error("[AdminStock] Error transforming stock data:",C),{total_items_tracked:0,low_stock_count:0,out_of_stock_count:0,items:[]}}}}),L=ce({mutationFn:({item_id:z,payload:B})=>yR(t,z,B),onSuccess:()=>{y.invalidateQueries({queryKey:["admin-stock-overview"]}),f(!1),k(),m(null)},onError:z=>{var B,C;console.error("Stock adjustment failed:",z),v({submit:((C=(B=z.response)==null?void 0:B.data)==null?void 0:C.message)||"Failed to adjust stock"})}});u.useEffect(()=>{const z=new URLSearchParams;i&&z.set("category",i),l&&z.set("status",l),r(z,{replace:!0})},[i,l,r]);const k=()=>{h({change_type:"restock",quantity:0,reason:"",notes:""}),v({})},S=z=>{m(z),f(!0),k()},F=()=>{f(!1),m(null),k()},P=z=>{var R,_,q;z.preventDefault(),v({});const B={};if(b.quantity<=0&&(B.quantity="Quantity must be greater than 0"),b.change_type==="waste"&&!((R=b.reason)!=null&&R.trim())&&(B.reason="Reason is required for waste adjustments"),Object.keys(B).length>0){v(B);return}if(!d)return;const C={change_type:b.change_type,quantity:b.quantity,reason:((_=b.reason)==null?void 0:_.trim())||null,notes:((q=b.notes)==null?void 0:q.trim())||null};L.mutate({item_id:d.item_id,payload:C})},I=z=>{switch(z){case"ok":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 mr-1.5"}),"In Stock"]});case"low_stock":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),"Low Stock"]});case"out_of_stock":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(jt,{className:"w-3 h-3 mr-1"}),"Out of Stock"]});default:return null}},H=(M==null?void 0:M.items.filter(z=>z.name.toLowerCase().includes(g.toLowerCase())))||[];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor inventory levels, adjust stock, and manage reorder alerts"})]}),e.jsxs(X,{to:"/admin/menu",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Manage Menu"]})]})}),T?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(z=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]},z))}):M?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items Tracked"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:M.total_items_tracked})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(Je,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Alert"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-600",children:M.low_stock_count})]}),e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:e.jsx(ts,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-red-600",children:M.out_of_stock_count})]}),e.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:e.jsx(jt,{className:"w-8 h-8 text-red-600"})})]})})]}):null,e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category-filter",value:i||"",onChange:z=>o(z.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Categories"}),w.map(z=>e.jsx("option",{value:z.category_id,children:z.name},z.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),e.jsxs("select",{id:"status-filter",value:l||"",onChange:z=>c(z.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Items"}),e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"search",type:"text",placeholder:"Search by name...",value:g,onChange:z=>j(z.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]})]}),(i||l||g)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{o(null),c(null),j("")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:T?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading stock data..."})]}):N?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load stock data"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:E instanceof Error?E.message:"Unknown error"})]}):H.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No items found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:(M==null?void 0:M.items.length)===0?"No stock items are being tracked yet.":"Try adjusting your filters or search query."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Threshold"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:z.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:z.category_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`font-bold ${z.stock_status==="out_of_stock"?"text-red-600":z.stock_status==="low_stock"?"text-yellow-600":"text-green-600"}`,children:z.current_stock!==null?z.current_stock:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:z.low_stock_threshold!==null?z.low_stock_threshold:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:I(z.stock_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>S(z),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Sg,{className:"w-4 h-4 mr-1.5"}),"Adjust"]}),e.jsx(X,{to:`/admin/stock/${z.item_id}/history`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"History"})]})})]},z.item_id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:H.map(z=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:z.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:z.category_name})]}),e.jsx("div",{className:"ml-4",children:I(z.stock_status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Stock"}),e.jsx("p",{className:`text-lg font-bold ${z.stock_status==="out_of_stock"?"text-red-600":z.stock_status==="low_stock"?"text-yellow-600":"text-green-600"}`,children:z.current_stock!==null?z.current_stock:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Threshold"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:z.low_stock_threshold!==null?z.low_stock_threshold:"N/A"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>S(z),className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Sg,{className:"w-4 h-4 mr-2"}),"Adjust Stock"]}),e.jsx(X,{to:`/admin/stock/${z.item_id}/history`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"History"})]})]},z.item_id))})]})})]})}),x&&d&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"adjustment-modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:F}),e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{id:"adjustment-modal-title",className:"text-xl font-bold text-gray-900",children:"Adjust Stock"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.name})]}),e.jsx("button",{onClick:F,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:d.current_stock!==null?d.current_stock:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Threshold"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:d.low_stock_threshold!==null?d.low_stock_threshold:"N/A"})]})]})}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"change-type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Change Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"change-type",value:b.change_type,onChange:z=>{h(B=>({...B,change_type:z.target.value})),v(B=>({...B,change_type:""}))},className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"restock",children:"Restock (Add Inventory)"}),e.jsx("option",{value:"adjustment",children:"Adjustment (Correct Count)"}),e.jsx("option",{value:"waste",children:"Waste (Remove Spoiled)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[b.change_type==="restock"?e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"}):e.jsx(Pd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-red-500"}),e.jsx("input",{id:"quantity",type:"number",min:"1",value:b.quantity||"",onChange:z=>{h(B=>({...B,quantity:parseInt(z.target.value)||0})),v(B=>({...B,quantity:""}))},className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:ring-4 transition-all ${p.quantity?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,placeholder:"Enter quantity"})]}),p.quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.quantity})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason ",b.change_type==="waste"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"reason",type:"text",value:b.reason,onChange:z=>{h(B=>({...B,reason:z.target.value})),v(B=>({...B,reason:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:ring-4 transition-all ${p.reason?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,placeholder:"e.g., Weekly delivery, End of day count"}),p.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.reason})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),e.jsx("textarea",{id:"notes",rows:3,value:b.notes,onChange:z=>h(B=>({...B,notes:z.target.value})),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Optional internal notes..."})]}),p.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:p.submit})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:F,className:"flex-1 px-6 py-3 border-2 border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all",disabled:L.isPending,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:L.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:L.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adjusting..."]}):"Confirm Adjustment"})]})]})]})})]})]})},jR=()=>{var L,k,S,F;const{item_id:t}=Rs(),s=Z(P=>P.authentication_state.auth_token),[r,n]=u.useState({limit:50,offset:0,total:0}),a="https://123salama-lama-food-truck.launchpulse.ai",{data:i,isLoading:o,isError:l,error:c,refetch:d}=ue({queryKey:["admin","menu-item",t],queryFn:async()=>{const P=await Q.get(`${a}/api/admin/menu/items/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});let I="Unknown Category";if(P.data.category_id)try{I=(await Q.get(`${a}/api/admin/menu/categories/${P.data.category_id}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.name}catch(H){console.error("Failed to fetch category name:",H)}return{item_id:P.data.item_id,name:P.data.name,current_stock:P.data.current_stock!==void 0?P.data.current_stock:null,category_name:I}},enabled:!!t&&!!s,staleTime:5*60*1e3,retry:1}),{data:m,isLoading:x,isError:f,error:b,refetch:h}=ue({queryKey:["admin","stock-history",t,r.limit,r.offset],queryFn:async()=>{const P=await Q.get(`${a}/api/admin/stock/${t}/history`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},params:{limit:r.limit,offset:r.offset}}),I=P.data.history.map(H=>({history_id:H.history_id,change_type:H.change_type,previous_stock:Number(H.previous_stock||0),new_stock:Number(H.new_stock||0),quantity_changed:H.quantity_changed,reason:H.reason,notes:H.notes,changed_by_user_id:H.changed_by_user_id,changed_by_name:H.changed_by_user_id,changed_at:H.changed_at}));return n(H=>({...H,total:P.data.total})),{history:I,total:P.data.total}},enabled:!!t&&!!s,staleTime:30*1e3,retry:1}),p=u.useMemo(()=>Math.floor(r.offset/r.limit)+1,[r.offset,r.limit]),v=u.useMemo(()=>Math.ceil(r.total/r.limit),[r.total,r.limit]),g=u.useMemo(()=>r.offset+r.limit<r.total,[r.offset,r.limit,r.total]),j=u.useMemo(()=>r.offset>0,[r.offset]),y=()=>{g&&n(P=>({...P,offset:P.offset+P.limit}))},w=()=>{j&&n(P=>({...P,offset:Math.max(0,P.offset-P.limit)}))},M=()=>{if(!m||!i)return;const P=["Date","Time","Change Type","Previous Stock","New Stock","Quantity Changed","Reason","Changed By","Notes"],I=m.history.map(R=>{const _=new Date(R.changed_at);return[_.toLocaleDateString(),_.toLocaleTimeString(),R.change_type,R.previous_stock.toString(),R.new_stock.toString(),R.quantity_changed.toString(),R.reason||"",R.changed_by_name,R.notes||""]}),H=[P.join(","),...I.map(R=>R.map(_=>`"${_}"`).join(","))].join(`
`),z=new Blob([H],{type:"text/csv;charset=utf-8;"}),B=document.createElement("a"),C=URL.createObjectURL(z);B.setAttribute("href",C),B.setAttribute("download",`stock-history-${i.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.csv`),B.style.visibility="hidden",document.body.appendChild(B),B.click(),document.body.removeChild(B)},T=P=>{switch(P){case"restock":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"sale":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};case"adjustment":return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"};case"waste":return{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},N=P=>P.charAt(0).toUpperCase()+P.slice(1),E=P=>{const I=new Date(P),z=new Date().getTime()-I.getTime(),B=Math.floor(z/(1e3*60*60)),C=Math.floor(B/24);let R="";return C===0?B===0?R="Less than an hour ago":B===1?R="1 hour ago":R=`${B} hours ago`:C===1?R="Yesterday":C<7?R=`${C} days ago`:R=I.toLocaleDateString(),{date:I.toLocaleDateString(),time:I.toLocaleTimeString(),relative:R}};if(o||x)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 animate-pulse",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 animate-pulse",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((P,I)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},I))})})]})})});if(l||f){const P=l?((k=(L=c==null?void 0:c.response)==null?void 0:L.data)==null?void 0:k.message)||"Failed to load item details":((F=(S=b==null?void 0:b.response)==null?void 0:S.data)==null?void 0:F.message)||"Failed to load stock history";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(X,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx(me,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Stock History"}),e.jsx("p",{className:"text-gray-600 mb-6",children:P}),e.jsxs("button",{onClick:()=>{d(),h()},className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ls,{className:"w-5 h-5 mr-2"}),"Retry"]})]})]})})})}return!(m!=null&&m.history)||m.history.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(X,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),i&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:i.name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[i.category_name,"  Current Stock: "," ",e.jsx("span",{className:"font-semibold",children:i.current_stock!==null?i.current_stock:"N/A"})]})]}),e.jsx(Je,{className:"w-12 h-12 text-gray-400"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Stock History"}),e.jsx("p",{className:"text-gray-600",children:"There are no stock movements recorded for this item yet."})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(X,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),i&&e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-blue-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Stock History: ",i.name]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",i.category_name]}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Current Stock:"})," ",e.jsx("span",{className:`font-bold ${i.current_stock===null?"text-gray-500":i.current_stock===0?"text-red-600":i.current_stock<10?"text-yellow-600":"text-green-600"}`,children:i.current_stock!==null?i.current_stock:"N/A"})]})]})]}),e.jsxs("button",{onClick:M,className:"flex items-center px-4 py-2 bg-white text-blue-700 font-medium rounded-lg border-2 border-blue-600 hover:bg-blue-50 transition-colors shadow-md",children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Export to CSV"]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Stock Movement History (",m.total," records)"]})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previous"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Changed By"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.history.map(P=>{const I=T(P.change_type),H=E(P.changed_at),z=P.quantity_changed>0;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:H.date}),e.jsx("div",{className:"text-gray-500",children:H.time}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H.relative})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${I.bg} ${I.text} ${I.border}`,children:N(P.change_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.previous_stock})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.new_stock})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-4 h-4 text-green-600 mr-1"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",P.quantity_changed]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pd,{className:"w-4 h-4 text-red-600 mr-1"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:P.quantity_changed})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:P.reason||"No reason provided"}),P.notes&&e.jsx("div",{className:"text-gray-500 text-xs mt-1 italic",children:P.notes})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.changed_by_name})]},P.history_id)})})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:m.history.map(P=>{const I=T(P.change_type),H=E(P.changed_at),z=P.quantity_changed>0;return e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${I.bg} ${I.text} ${I.border}`,children:N(P.change_type)}),e.jsx("span",{className:"text-xs text-gray-500",children:H.relative})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Previous"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:P.previous_stock})]}),e.jsx("div",{className:"text-center flex items-center justify-center",children:z?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Jt,{className:"w-5 h-5 text-green-600 mb-1"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",P.quantity_changed]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Pd,{className:"w-5 h-5 text-red-600 mb-1"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:P.quantity_changed})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"New"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:P.new_stock})]})]}),e.jsxs("div",{className:"text-sm border-t border-gray-200 pt-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Reason:"})," ",e.jsx("span",{className:"text-gray-900",children:P.reason||"No reason provided"})]}),P.notes&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Notes:"})," ",e.jsx("span",{className:"text-gray-900 italic",children:P.notes})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Changed by: ",P.changed_by_name]}),e.jsxs("span",{children:[H.date," ",H.time]})]})]})]},P.history_id)})}),v>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:r.offset+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.offset+r.limit,r.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:r.total})," ","records"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:w,disabled:!j,className:`inline-flex items-center px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${j?"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Fi,{className:"w-5 h-5 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-gray-700 px-3",children:["Page ",e.jsx("span",{className:"font-medium",children:p})," of"," ",e.jsx("span",{className:"font-medium",children:v})]}),e.jsxs("button",{onClick:y,disabled:!g,className:`inline-flex items-center px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${g?"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["Next",e.jsx(We,{className:"w-5 h-5 ml-1"})]})]})]})]})]})})})};function Js(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Ea(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}const $1=6048e5,wR=864e5;let NR={};function Pu(){return NR}function jl(t,s){var l,c,d,m;const r=Pu(),n=(s==null?void 0:s.weekStartsOn)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=Js(t),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Id(t){return jl(t,{weekStartsOn:1})}function I1(t){const s=Js(t),r=s.getFullYear(),n=Ea(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Id(n),i=Ea(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Id(i);return s.getTime()>=a.getTime()?r+1:s.getTime()>=o.getTime()?r:r-1}function Py(t){const s=Js(t);return s.setHours(0,0,0,0),s}function Ay(t){const s=Js(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function _R(t,s){const r=Py(t),n=Py(s),a=+r-Ay(r),i=+n-Ay(n);return Math.round((a-i)/wR)}function kR(t){const s=I1(t),r=Ea(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Id(r)}function CR(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SR(t){if(!CR(t)&&typeof t!="number")return!1;const s=Js(t);return!isNaN(Number(s))}function ER(t){const s=Js(t),r=Ea(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}const PR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},AR=(t,s,r)=>{let n;const a=PR[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Im(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const FR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},TR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},MR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RR={date:Im({formats:FR,defaultWidth:"full"}),time:Im({formats:TR,defaultWidth:"full"}),dateTime:Im({formats:MR,defaultWidth:"full"})},LR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DR=(t,s,r,n)=>LR[t];function go(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const OR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$R={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UR=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},WR={ordinalNumber:UR,era:go({values:OR,defaultWidth:"wide"}),quarter:go({values:$R,defaultWidth:"wide",argumentCallback:t=>t-1}),month:go({values:IR,defaultWidth:"wide"}),day:go({values:zR,defaultWidth:"wide"}),dayPeriod:go({values:BR,defaultWidth:"wide",formattingValues:qR,defaultFormattingWidth:"wide"})};function yo(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?HR(l,x=>x.test(o)):VR(l,x=>x.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const m=s.slice(o.length);return{value:d,rest:m}}}function VR(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function HR(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function QR(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],i=s.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=s.slice(a.length);return{value:o,rest:l}}}const KR=/^(\d+)(th|st|nd|rd)?/i,YR=/\d+/i,GR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XR={any:[/^b/i,/^(a|c)/i]},JR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ZR={any:[/1/i,/2/i,/3/i,/4/i]},eL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iL={ordinalNumber:QR({matchPattern:KR,parsePattern:YR,valueCallback:t=>parseInt(t,10)}),era:yo({matchPatterns:GR,defaultMatchWidth:"wide",parsePatterns:XR,defaultParseWidth:"any"}),quarter:yo({matchPatterns:JR,defaultMatchWidth:"wide",parsePatterns:ZR,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yo({matchPatterns:eL,defaultMatchWidth:"wide",parsePatterns:tL,defaultParseWidth:"any"}),day:yo({matchPatterns:sL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any"}),dayPeriod:yo({matchPatterns:nL,defaultMatchWidth:"any",parsePatterns:aL,defaultParseWidth:"any"})},oL={code:"en-US",formatDistance:AR,formatLong:RR,formatRelative:DR,localize:WR,match:iL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lL(t){const s=Js(t);return _R(s,ER(s))+1}function cL(t){const s=Js(t),r=+Id(s)-+kR(s);return Math.round(r/$1)+1}function z1(t,s){var m,x,f,b;const r=Js(t),n=r.getFullYear(),a=Pu(),i=(s==null?void 0:s.firstWeekContainsDate)??((x=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(f=a.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,o=Ea(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=jl(o,s),c=Ea(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=jl(c,s);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function dL(t,s){var l,c,d,m;const r=Pu(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(l=s==null?void 0:s.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=z1(t,s),i=Ea(t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),jl(i,s)}function uL(t,s){const r=Js(t),n=+jl(r,s)-+dL(r,s);return Math.round(n/$1)+1}function Ye(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const Xr={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return Ye(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):Ye(r+1,2)},d(t,s){return Ye(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return Ye(t.getHours()%12||12,s.length)},H(t,s){return Ye(t.getHours(),s.length)},m(t,s){return Ye(t.getMinutes(),s.length)},s(t,s){return Ye(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ye(a,s.length)}},Ba={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fy={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Xr.y(t,s)},Y:function(t,s,r,n){const a=z1(t,n),i=a>0?a:1-a;if(s==="YY"){const o=i%100;return Ye(o,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):Ye(i,s.length)},R:function(t,s){const r=I1(t);return Ye(r,s.length)},u:function(t,s){const r=t.getFullYear();return Ye(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return Ye(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return Ye(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return Xr.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return Ye(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=uL(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):Ye(a,s.length)},I:function(t,s,r){const n=cL(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):Ye(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Xr.d(t,s)},D:function(t,s,r){const n=lL(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ye(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Ye(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Ye(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return Ye(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=Ba.noon:n===0?a=Ba.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=Ba.evening:n>=12?a=Ba.afternoon:n>=4?a=Ba.morning:a=Ba.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Xr.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Xr.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Xr.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Xr.s(t,s)},S:function(t,s){return Xr.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return My(n);case"XXXX":case"XX":return Gn(n);case"XXXXX":case"XXX":default:return Gn(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return My(n);case"xxxx":case"xx":return Gn(n);case"xxxxx":case"xxx":default:return Gn(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Ty(n,":");case"OOOO":default:return"GMT"+Gn(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Ty(n,":");case"zzzz":default:return"GMT"+Gn(n,":")}},t:function(t,s,r){const n=Math.trunc(t.getTime()/1e3);return Ye(n,s.length)},T:function(t,s,r){const n=t.getTime();return Ye(n,s.length)}};function Ty(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+s+Ye(i,2)}function My(t,s){return t%60===0?(t>0?"-":"+")+Ye(Math.abs(t)/60,2):Gn(t,s)}function Gn(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ye(Math.trunc(n/60),2),i=Ye(n%60,2);return r+a+s+i}const Ry=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},B1=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},mL=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Ry(t,s);let i;switch(n){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",Ry(n,s)).replace("{{time}}",B1(a,s))},xL={p:B1,P:mL},hL=/^D+$/,pL=/^Y+$/,fL=["D","DD","YY","YYYY"];function gL(t){return hL.test(t)}function yL(t){return pL.test(t)}function bL(t,s,r){const n=vL(t,s,r);if(console.warn(n),fL.includes(t))throw new RangeError(n)}function vL(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NL=/^'([^]*?)'?$/,_L=/''/g,kL=/[a-zA-Z]/;function Ly(t,s,r){var m,x,f,b;const n=Pu(),a=n.locale??oL,i=n.firstWeekContainsDate??((x=(m=n.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,o=n.weekStartsOn??((b=(f=n.locale)==null?void 0:f.options)==null?void 0:b.weekStartsOn)??0,l=Js(t);if(!SR(l))throw new RangeError("Invalid time value");let c=s.match(wL).map(h=>{const p=h[0];if(p==="p"||p==="P"){const v=xL[p];return v(h,a.formatLong)}return h}).join("").match(jL).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:CL(h)};if(Fy[p])return{isToken:!0,value:h};if(p.match(kL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(h=>{if(!h.isToken)return h.value;const p=h.value;(yL(p)||gL(p))&&bL(p,s,String(t));const v=Fy[p[0]];return v(l,p,a.localize,d)}).join("")}function CL(t){const s=t.match(NL);return s?s[1].replace(_L,"'"):t}const SL=async t=>{const{data:s}=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders",{params:{status:t.status||void 0,order_type:t.order_type||void 0,payment_status:t.payment_status||void 0,date_range:t.date_range||void 0,customer_search:t.customer_search||void 0,limit:t.limit,offset:t.offset,sort_by:t.sort_by,sort_order:t.sort_order},headers:{Authorization:`Bearer ${t.auth_token}`}});return s},EL=async t=>{const{data:s}=await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}`,{status:t.status},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},PL=async t=>{const{data:s}=await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}/refund`,{refund_amount:t.refund_amount,refund_reason:t.refund_reason},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},AL=async t=>{const{data:s}=await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}/cancel`,{cancellation_reason:t.cancellation_reason,issue_refund:t.issue_refund},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},Dy=t=>({received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-green-100 text-green-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",Oy=t=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",FL=()=>{var ne,be;const t=Be(),[s,r]=ct(),n=Ue(),a=Z(U=>U.authentication_state.auth_token),[i,o]=u.useState(s.get("status")),[l,c]=u.useState(s.get("order_type")),[d,m]=u.useState(s.get("payment_status")),[x,f]=u.useState(s.get("date_range")),[b,h]=u.useState(s.get("customer_search")||""),[p,v]=u.useState(b),[g,j]=u.useState({current_page:1,limit:50,offset:0,total:0,total_pages:0}),[y,w]=u.useState({sort_by:"created_at",sort_order:"desc"}),[M,T]=u.useState([]),[N,E]=u.useState({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""}),[L,k]=u.useState({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1}),[S,F]=u.useState(!1);u.useEffect(()=>{const U=setTimeout(()=>{h(p),j(W=>({...W,current_page:1,offset:0}))},500);return()=>clearTimeout(U)},[p]),u.useEffect(()=>{const U={};i&&(U.status=i),l&&(U.order_type=l),d&&(U.payment_status=d),x&&(U.date_range=x),b&&(U.customer_search=b),r(U)},[i,l,d,x,b,r]);const{data:P,isLoading:I,error:H,refetch:z}=ue({queryKey:["admin","orders",i,l,d,x,b,g.limit,g.offset,y.sort_by,y.sort_order],queryFn:()=>SL({status:i,order_type:l,payment_status:d,date_range:x,customer_search:b,limit:g.limit,offset:g.offset,sort_by:y.sort_by,sort_order:y.sort_order,auth_token:a||""}),enabled:!!a,staleTime:3e4,select:U=>({orders:U.orders.map(W=>({order_id:W.order_id,order_number:W.order_number,user_id:W.user_id,customer_name:W.customer_name,customer_email:W.customer_email,order_type:W.order_type,status:W.status,payment_status:W.payment_status,total_amount:Number(W.total_amount||0),created_at:W.created_at})),total:U.total})});u.useEffect(()=>{P&&j(U=>({...U,total:P.total,total_pages:Math.ceil(P.total/U.limit)}))},[P]);const B=(P==null?void 0:P.orders)||[],C=ce({mutationFn:EL,onSuccess:()=>{n.invalidateQueries({queryKey:["admin","orders"]})}}),R=ce({mutationFn:PL,onSuccess:()=>{n.invalidateQueries({queryKey:["admin","orders"]}),E({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""})}}),_=ce({mutationFn:AL,onSuccess:()=>{n.invalidateQueries({queryKey:["admin","orders"]}),k({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1})}}),q=U=>{o(U),j(W=>({...W,current_page:1,offset:0}))},O=U=>{c(U),j(W=>({...W,current_page:1,offset:0}))},V=U=>{m(U),j(W=>({...W,current_page:1,offset:0}))},D=U=>{f(U),j(W=>({...W,current_page:1,offset:0}))},G=()=>{o(null),c(null),m(null),f(null),h(""),v(""),j(U=>({...U,current_page:1,offset:0}))},se=U=>{const W=(U-1)*g.limit;j(oe=>({...oe,current_page:U,offset:W})),T([])},le=U=>{y.sort_by===U?w(W=>({sort_by:U,sort_order:W.sort_order==="asc"?"desc":"asc"})):w({sort_by:U,sort_order:"desc"})},K=U=>{T(W=>W.includes(U)?W.filter(oe=>oe!==U):[...W,U])},A=()=>{M.length===B.length?T([]):T(B.map(U=>U.order_id))},$=(U,W)=>{a&&C.mutate({order_id:U,status:W,auth_token:a})},re=U=>{E({visible:!0,order_id:U.order_id,order_number:U.order_number,total_amount:U.total_amount,refund_amount:U.total_amount,refund_reason:""})},ve=()=>{!a||!N.refund_reason.trim()||R.mutate({order_id:N.order_id,refund_amount:N.refund_amount,refund_reason:N.refund_reason,auth_token:a})},xe=U=>{k({visible:!0,order_id:U.order_id,order_number:U.order_number,cancellation_reason:"",issue_refund:U.payment_status==="paid"})},ke=()=>{!a||!L.cancellation_reason.trim()||_.mutate({order_id:L.order_id,cancellation_reason:L.cancellation_reason,issue_refund:L.issue_refund,auth_token:a})},Ce=[i,l,d,x,b].filter(Boolean).length,Pe=H?((be=(ne=H.response)==null?void 0:ne.data)==null?void 0:be.message)||H.message||"Failed to load orders":null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-6 lg:py-8 px-3 sm:px-4 lg:px-6 xl:px-8 w-full max-w-full overflow-x-hidden",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto overflow-hidden",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 truncate",children:"Order Management"}),e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-600",children:"Manage and process all customer orders"})]}),e.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"self-start sm:self-auto inline-flex items-center px-3 py-1.5 sm:px-4 sm:py-2 border border-gray-300 rounded-lg text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors flex-shrink-0",children:"Back to Dashboard"})]}),P&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 lg:gap-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mt-0.5 sm:mt-1",children:P.total})]}),e.jsx(pt,{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-600 flex-shrink-0"})]})})}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[e.jsx("div",{className:"flex flex-col gap-3 sm:gap-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customer...",value:p,onChange:U=>v(U.target.value),className:"w-full pl-9 sm:pl-10 pr-9 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),p&&e.jsx("button",{onClick:()=>{v(""),h("")},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1",children:e.jsx(Ae,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>F(!S),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(mu,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Ce>0&&e.jsx("span",{className:"ml-1 sm:ml-2 px-1.5 py-0.5 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:Ce}),S?e.jsx(Jn,{className:"w-4 h-4 ml-1"}):e.jsx(lr,{className:"w-4 h-4 ml-1"})]}),e.jsx("button",{onClick:()=>z(),disabled:I,className:"inline-flex items-center justify-center p-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50","aria-label":"Refresh",children:e.jsx(ls,{className:`w-4 h-4 sm:w-5 sm:h-5 ${I?"animate-spin":""}`})}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",onClick:()=>alert("Export functionality requires backend endpoint implementation"),children:[e.jsx(ys,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]})}),S&&e.jsxs("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 lg:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Status"}),e.jsxs("select",{value:i||"",onChange:U=>q(U.target.value||null),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Delivering"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Type"}),e.jsxs("select",{value:l||"",onChange:U=>O(U.target.value||null),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"collection",children:"Collection"}),e.jsx("option",{value:"delivery",children:"Delivery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Payment"}),e.jsxs("select",{value:d||"",onChange:U=>V(U.target.value||null),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Date"}),e.jsxs("select",{value:x||"",onChange:U=>D(U.target.value||null),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"last_7_days",children:"7 Days"}),e.jsx("option",{value:"last_30_days",children:"30 Days"}),e.jsx("option",{value:"this_month",children:"This Month"})]})]})]}),Ce>0&&e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:[i&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-full",children:[i,e.jsx("button",{onClick:()=>q(null),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(Ae,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),l&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-full",children:[l,e.jsx("button",{onClick:()=>O(null),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(Ae,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),d&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-full",children:[d,e.jsx("button",{onClick:()=>V(null),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(Ae,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),x&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-full",children:[x,e.jsx("button",{onClick:()=>D(null),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(Ae,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),b&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm rounded-full",children:['"',b,'"',e.jsx("button",{onClick:()=>{v(""),h("")},className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(Ae,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),e.jsx("button",{onClick:G,className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium self-start sm:self-auto",children:"Clear all"})]})]})]})]}),M.length>0&&e.jsx("div",{className:"mb-3 sm:mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-blue-900",children:[M.length," selected"]}),e.jsx("button",{onClick:()=>T([]),className:"px-3 py-1.5 text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear"})]})}),Pe&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-red-800",children:"Error loading orders"}),e.jsx("p",{className:"text-xs sm:text-sm text-red-700 mt-1 break-words",children:Pe}),e.jsx("button",{onClick:()=>z(),className:"mt-2 text-xs sm:text-sm text-red-600 hover:text-red-700 font-medium",children:"Try again"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-100 overflow-hidden w-full max-w-full",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto w-full",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:M.length===B.length&&B.length>0,onChange:A,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>le("order_number"),children:e.jsxs("div",{className:"flex items-center",children:["Order #",y.sort_by==="order_number"&&(y.sort_order==="asc"?e.jsx(Jn,{className:"w-4 h-4 ml-1"}):e.jsx(lr,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>le("customer_name"),children:e.jsxs("div",{className:"flex items-center",children:["Customer",y.sort_by==="customer_name"&&(y.sort_order==="asc"?e.jsx(Jn,{className:"w-4 h-4 ml-1"}):e.jsx(lr,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>le("total_amount"),children:e.jsxs("div",{className:"flex items-center",children:["Total",y.sort_by==="total_amount"&&(y.sort_order==="asc"?e.jsx(Jn,{className:"w-4 h-4 ml-1"}):e.jsx(lr,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>le("created_at"),children:e.jsxs("div",{className:"flex items-center",children:["Date",y.sort_by==="created_at"&&(y.sort_order==="asc"?e.jsx(Jn,{className:"w-4 h-4 ml-1"}):e.jsx(lr,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-4 lg:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I?Array.from({length:5}).map((U,W)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-20 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-20 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})})]},W)):B.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[e.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:Ce>0?"Try adjusting your filters":"Orders will appear here once customers place them"}),Ce>0&&e.jsx("button",{onClick:G,className:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]})}):B.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:M.includes(U.order_id),onChange:()=>K(U.order_id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:e.jsx(X,{to:`/admin/orders/${U.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:U.order_number})}),e.jsx("td",{className:"px-4 lg:px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate max-w-[150px] lg:max-w-none",children:U.customer_name}),e.jsx("div",{className:"text-gray-500 truncate max-w-[150px] lg:max-w-none",children:U.customer_email})]})}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${U.order_type==="delivery"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[U.order_type==="delivery"?e.jsx(zr,{className:"w-3 h-3 mr-1"}):e.jsx(pt,{className:"w-3 h-3 mr-1"}),U.order_type==="delivery"?"Delivery":"Collection"]})}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:U.status,onChange:W=>$(U.order_id,W.target.value),disabled:U.status==="completed"||U.status==="cancelled",className:`text-xs font-medium rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500 ${Dy(U.status)} disabled:cursor-not-allowed`,children:[e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Delivering"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Oy(U.payment_status)}`,children:U.payment_status})}),e.jsxs("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",U.total_amount.toFixed(2)]}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ly(new Date(U.created_at),"MMM dd, HH:mm")}),e.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(X,{to:`/admin/orders/${U.order_id}`,className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded",title:"View Details",children:e.jsx(Ps,{className:"w-4 h-4"})}),U.status!=="cancelled"&&U.status!=="completed"&&e.jsxs(e.Fragment,{children:[U.payment_status==="paid"&&e.jsx("button",{onClick:()=>re(U),className:"p-1.5 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded",title:"Refund Order",children:e.jsx(Vo,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>xe(U),className:"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 rounded",title:"Cancel Order",children:e.jsx(Wo,{className:"w-4 h-4"})})]})]})})]},U.order_id))})]})}),e.jsx("div",{className:"md:hidden",children:I?e.jsx("div",{className:"divide-y divide-gray-200",children:Array.from({length:3}).map((U,W)=>e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 w-20 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-6 w-16 bg-gray-200 rounded animate-pulse"})]})]},W))}):B.length===0?e.jsxs("div",{className:"px-4 py-12 text-center",children:[e.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:Ce>0?"Try adjusting your filters":"Orders will appear here"}),Ce>0&&e.jsx("button",{onClick:G,className:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:B.map(U=>e.jsxs("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:M.includes(U.order_id),onChange:()=>K(U.order_id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(X,{to:`/admin/orders/${U.order_id}`,className:"text-sm font-semibold text-blue-600 hover:text-blue-700",children:U.order_number})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",U.total_amount.toFixed(2)]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:U.customer_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:U.customer_email})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${U.order_type==="delivery"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[U.order_type==="delivery"?e.jsx(zr,{className:"w-3 h-3 mr-1"}):e.jsx(pt,{className:"w-3 h-3 mr-1"}),U.order_type==="delivery"?"Delivery":"Collection"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Dy(U.status)}`,children:U.status.replace(/_/g," ")}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Oy(U.payment_status)}`,children:U.payment_status})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Ly(new Date(U.created_at),"MMM dd, HH:mm")}),e.jsxs("div",{className:"flex items-center gap-1",children:[U.status!=="completed"&&U.status!=="cancelled"&&e.jsxs("select",{value:U.status,onChange:W=>$(U.order_id,W.target.value),className:"text-xs font-medium rounded px-2 py-1 border border-gray-300 focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Delivering"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(X,{to:`/admin/orders/${U.order_id}`,className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded",children:e.jsx(Ps,{className:"w-4 h-4"})}),U.status!=="cancelled"&&U.status!=="completed"&&U.payment_status==="paid"&&e.jsx("button",{onClick:()=>re(U),className:"p-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded",children:e.jsx(Vo,{className:"w-4 h-4"})}),U.status!=="cancelled"&&U.status!=="completed"&&e.jsx("button",{onClick:()=>xe(U),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(Wo,{className:"w-4 h-4"})})]})]})]},U.order_id))})}),!I&&B.length>0&&e.jsx("div",{className:"bg-white px-3 sm:px-4 lg:px-6 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 order-2 sm:order-1",children:[e.jsx("span",{className:"font-medium",children:g.offset+1})," - ",e.jsx("span",{className:"font-medium",children:Math.min(g.offset+g.limit,g.total)})," of ",e.jsx("span",{className:"font-medium",children:g.total})]}),e.jsxs("div",{className:"flex items-center gap-1 order-1 sm:order-2",children:[e.jsx("button",{onClick:()=>se(g.current_page-1),disabled:g.current_page===1,className:"inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-md text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Prev"}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:g.total_pages},(U,W)=>W+1).map(U=>U===1||U===g.total_pages||U>=g.current_page-1&&U<=g.current_page+1?e.jsx("button",{onClick:()=>se(U),className:`inline-flex items-center px-3 py-1.5 border text-sm font-medium rounded-md ${U===g.current_page?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:U},U):U===g.current_page-2||U===g.current_page+2?e.jsx("span",{className:"px-2 text-gray-400",children:"..."},U):null)}),e.jsxs("span",{className:"sm:hidden px-3 py-1.5 text-xs font-medium text-gray-700",children:[g.current_page,"/",g.total_pages]}),e.jsx("button",{onClick:()=>se(g.current_page+1),disabled:g.current_page===g.total_pages,className:"inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-md text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}),N.visible&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end sm:items-center justify-center min-h-screen p-0 sm:p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>E({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""})}),e.jsxs("div",{className:"relative bg-white rounded-t-xl sm:rounded-lg text-left overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start",children:[e.jsx("div",{className:"mx-auto sm:mx-0 flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 mb-3 sm:mb-0",children:e.jsx(Vo,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"text-center sm:text-left sm:ml-4 flex-1",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-900",id:"modal-title",children:["Refund #",N.order_number]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount ()"}),e.jsx("input",{type:"number",id:"refund_amount",step:"0.01",min:"0",max:N.total_amount,value:N.refund_amount,onChange:U=>E(W=>({...W,refund_amount:parseFloat(U.target.value)||0})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500",children:["Order total: ",N.total_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"refund_reason",className:"block text-sm font-medium text-gray-700 mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"refund_reason",value:N.refund_reason,onChange:U=>E(W=>({...W,refund_reason:U.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"customer_request",children:"Customer Request"}),e.jsx("option",{value:"order_error",children:"Order Error"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"delivery_issue",children:"Delivery Issue"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>E({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""}),disabled:R.isPending,className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:ve,disabled:!N.refund_reason||R.isPending,className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-600 text-sm font-medium text-white hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?"Processing...":"Confirm Refund"})]})]})]})}),L.visible&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end sm:items-center justify-center min-h-screen p-0 sm:p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>k({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1})}),e.jsxs("div",{className:"relative bg-white rounded-t-xl sm:rounded-lg text-left overflow-hidden shadow-xl transform transition-all w-full sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start",children:[e.jsx("div",{className:"mx-auto sm:mx-0 flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-3 sm:mb-0",children:e.jsx(Wo,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"text-center sm:text-left sm:ml-4 flex-1",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-900",id:"modal-title",children:["Cancel #",L.order_number]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-gray-700 mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"cancellation_reason",value:L.cancellation_reason,onChange:U=>k(W=>({...W,cancellation_reason:U.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"customer_request",children:"Customer Request"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"payment_issue",children:"Payment Issue"}),e.jsx("option",{value:"duplicate_order",children:"Duplicate Order"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start",children:[e.jsx("input",{type:"checkbox",id:"issue_refund",checked:L.issue_refund,onChange:U=>k(W=>({...W,issue_refund:U.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"issue_refund",className:"ml-2 block text-sm text-gray-900",children:"Issue refund"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>k({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1}),disabled:_.isPending,className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Go Back"}),e.jsx("button",{type:"button",onClick:ke,disabled:!L.cancellation_reason||_.isPending,className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:_.isPending?"Processing...":"Cancel Order"})]})]})]})})]})},wl="https://123salama-lama-food-truck.launchpulse.ai",TL=async(t,s)=>{const r=await Q.get(`${wl}/api/admin/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}}),{order:n,items:a,status_history:i}=r.data;return{...n,items:a||[],status_history:i||[]}},$y=async(t,s,r)=>s.status&&!s.internal_notes?(await Q.patch(`${wl}/api/admin/orders/${t}/status`,{status:s.status},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data:(await Q.put(`${wl}/api/admin/orders/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,ML=async(t,s,r)=>(await Q.post(`${wl}/api/admin/orders/${t}/refund`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,RL=async(t,s,r)=>(await Q.post(`${wl}/api/admin/orders/${t}/cancel`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,sr=t=>t==null?"0.00":`${Number(t).toFixed(2)}`,bo=t=>{if(!t)return"N/A";const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{dateStyle:"medium",timeStyle:"short"}).format(s)},Iy=t=>({received:"bg-blue-100 text-blue-800 border-blue-200",preparing:"bg-yellow-100 text-yellow-800 border-yellow-200",ready:"bg-green-100 text-green-800 border-green-200",out_for_delivery:"bg-purple-100 text-purple-800 border-purple-200",completed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",LL=t=>({paid:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",failed:"bg-red-100 text-red-800 border-red-200",refunded:"bg-gray-100 text-gray-800 border-gray-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",DL=t=>({received:e.jsx(Ke,{className:"w-5 h-5"}),preparing:e.jsx(Je,{className:"w-5 h-5"}),ready:e.jsx(Oe,{className:"w-5 h-5"}),out_for_delivery:e.jsx(zr,{className:"w-5 h-5"}),completed:e.jsx(Oe,{className:"w-5 h-5"}),cancelled:e.jsx(jt,{className:"w-5 h-5"})})[t]||e.jsx(Ke,{className:"w-5 h-5"}),OL=()=>{const{order_id:t}=Rs(),s=Ue(),r=Z(R=>R.authentication_state.auth_token),[n,a]=u.useState(""),[i,o]=u.useState(""),[l,c]=u.useState(!1),[d,m]=u.useState(!1),[x,f]=u.useState(""),[b,h]=u.useState(""),[p,v]=u.useState(""),[g,j]=u.useState(!1),{data:y,isLoading:w,isError:M,error:T,refetch:N}=ue({queryKey:["adminOrderDetail",t],queryFn:()=>TL(t,r),enabled:!!t&&!!r,staleTime:3e4,refetchOnWindowFocus:!1,retry:1});u.useEffect(()=>{y&&(a(y.status),o(y.internal_notes||""),f(String(y.refund_amount||y.total_amount)))},[y]);const E=ce({mutationFn:R=>$y(t,R,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),alert("Order status updated successfully")},onError:R=>{var _,q;alert(`Failed to update status: ${((q=(_=R.response)==null?void 0:_.data)==null?void 0:q.message)||R.message}`)}}),L=ce({mutationFn:R=>ML(t,R,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),c(!1),f(""),h(""),alert("Refund processed successfully")},onError:R=>{var _,q;alert(`Failed to process refund: ${((q=(_=R.response)==null?void 0:_.data)==null?void 0:q.message)||R.message}`)}}),k=ce({mutationFn:R=>RL(t,R,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),m(!1),v(""),j(!1),alert("Order cancelled successfully")},onError:R=>{var _,q;alert(`Failed to cancel order: ${((q=(_=R.response)==null?void 0:_.data)==null?void 0:q.message)||R.message}`)}}),S=ce({mutationFn:R=>$y(t,{status:y.status,internal_notes:R},r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),alert("Internal notes saved successfully")},onError:R=>{var _,q;alert(`Failed to save notes: ${((q=(_=R.response)==null?void 0:_.data)==null?void 0:q.message)||R.message}`)}}),F=()=>{n!==(y==null?void 0:y.status)&&E.mutate({status:n})},P=R=>{R.preventDefault();const _=parseFloat(x);if(isNaN(_)||_<=0){alert("Please enter a valid refund amount");return}if(y&&_>y.total_amount){alert("Refund amount cannot exceed order total");return}if(!b.trim()){alert("Please provide a refund reason");return}L.mutate({refund_amount:_,refund_reason:b.trim()})},I=R=>{if(R.preventDefault(),!p.trim()){alert("Please provide a cancellation reason");return}k.mutate({cancellation_reason:p.trim(),issue_refund:g})},H=()=>{S.mutate(i)},z=()=>{window.print()},B=u.useMemo(()=>y?y.payment_status==="paid"&&y.status!=="cancelled"&&!y.refund_amount:!1,[y]),C=u.useMemo(()=>y?y.status!=="completed"&&y.status!=="cancelled":!1,[y]);return w?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading order details..."})]})})}):M||!y?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Order"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(T==null?void 0:T.message)||"Failed to load order details. Please try again."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>N(),className:"w-full px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Retry"}),e.jsx(X,{to:"/admin/orders",className:"block w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Orders"})]})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(X,{to:"/admin/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to orders",children:e.jsx(Ft,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",y.order_number]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",y.order_id]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-lg border flex items-center space-x-2 ${Iy(y.status)}`,children:[DL(y.status),e.jsx("span",{className:"font-semibold capitalize",children:y.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:z,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[e.jsx(Ol,{className:"w-5 h-5"}),e.jsx("span",{children:"Print"})]}),B&&e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors flex items-center space-x-2",children:[e.jsx(ls,{className:"w-5 h-5"}),e.jsx("span",{children:"Refund"})]}),C&&e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(Wo,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancel Order"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Customer Information"})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:y.customer_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx(X,{to:`/admin/customers/${y.user_id}`,className:"text-lg font-semibold text-blue-600 hover:text-blue-700 hover:underline",children:y.customer_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Customer ID: ",y.user_id]})]})]}),e.jsxs("div",{className:"space-y-2 pl-15",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(Nt,{className:"w-5 h-5 text-gray-400"}),e.jsx("a",{href:`mailto:${y.customer_email}`,className:"hover:text-blue-600 hover:underline",children:y.customer_email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx($t,{className:"w-5 h-5 text-gray-400"}),e.jsx("a",{href:`tel:${y.customer_phone}`,className:"hover:text-blue-600 hover:underline",children:y.customer_phone})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("a",{href:`mailto:${y.customer_email}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-center text-sm",children:"Send Email"}),e.jsx("a",{href:`tel:${y.customer_phone}`,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors text-center text-sm",children:"Call Customer"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Details"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Order Type"}),e.jsx("p",{className:"text-base font-semibold text-gray-900 capitalize",children:y.order_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Created At"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:bo(y.created_at)})]})]}),y.order_type==="collection"&&y.collection_time_slot&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Collection Time"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:bo(y.collection_time_slot)})]}),y.order_type==="delivery"&&y.delivery_address_snapshot&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center space-x-2",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Delivery Address"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900",children:y.delivery_address_snapshot.address_line1}),y.delivery_address_snapshot.address_line2&&e.jsx("p",{className:"text-sm text-gray-700",children:y.delivery_address_snapshot.address_line2}),e.jsxs("p",{className:"text-sm text-gray-700",children:[y.delivery_address_snapshot.city,", ",y.delivery_address_snapshot.postal_code]}),y.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 italic mt-2 border-t border-gray-200 pt-2",children:["Instructions: ",y.delivery_address_snapshot.delivery_instructions]})]})]}),y.special_instructions&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center space-x-2",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{children:"Special Instructions"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:y.special_instructions})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-orange-50 to-red-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Items"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.items.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:R.item_name}),R.selected_customizations&&Object.keys(R.selected_customizations).length>0&&e.jsx("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:Object.entries(R.selected_customizations).map(([_,q])=>e.jsxs("p",{className:"italic",children:[_,": ",JSON.stringify(q)]},_))})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full font-semibold text-gray-900",children:R.quantity})}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-900 font-medium",children:sr(R.unit_price)}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-900 font-semibold",children:sr(R.line_total)})]},R.order_item_id))})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3 max-w-md ml-auto",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:sr(y.subtotal)})]}),y.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount ",y.discount_code&&`(${y.discount_code})`,":"]}),e.jsxs("span",{className:"font-medium",children:["-",sr(y.discount_amount)]})]}),y.delivery_fee!==null&&y.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee:"}),e.jsx("span",{className:"font-medium",children:sr(y.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT):"}),e.jsx("span",{className:"font-medium",children:sr(y.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-3 border-t border-gray-300",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:sr(y.total_amount)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-green-50 to-teal-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Information"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Status"}),e.jsx("div",{className:`inline-flex px-3 py-1 rounded-lg border font-semibold text-sm ${LL(y.payment_status)}`,children:y.payment_status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Method"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900 capitalize flex items-center space-x-2",children:[e.jsx(hr,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{children:y.payment_method_type||"N/A"})]})]})]}),y.sumup_transaction_id&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Transaction ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-900 bg-gray-50 px-3 py-2 rounded",children:y.sumup_transaction_id})]}),y.refund_amount&&e.jsx("div",{className:"border-t border-gray-200 pt-4 bg-yellow-50 -mx-6 -mb-6 px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Refund Amount:"}),e.jsx("p",{className:"text-lg font-bold text-yellow-900",children:sr(y.refund_amount)})]}),y.refund_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 mb-1",children:"Reason:"}),e.jsx("p",{className:"text-sm text-yellow-900 italic",children:y.refund_reason})]}),y.refunded_at&&e.jsxs("p",{className:"text-xs text-yellow-700",children:["Refunded at: ",bo(y.refunded_at)]})]})}),y.cancelled_at&&y.cancellation_reason&&e.jsx("div",{className:"border-t border-gray-200 pt-4 bg-red-50 -mx-6 -mb-6 px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Cancellation Reason:"}),e.jsx("p",{className:"text-sm text-red-900 italic",children:y.cancellation_reason}),e.jsxs("p",{className:"text-xs text-red-700",children:["Cancelled at: ",bo(y.cancelled_at)]})]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden sticky top-6",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Manage Status"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Order Status"}),e.jsxs("select",{id:"status-select",value:n,onChange:R=>a(R.target.value),disabled:y.status==="completed"||y.status==="cancelled",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready for Collection"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsx("button",{onClick:F,disabled:n===y.status||E.isPending||y.status==="completed"||y.status==="cancelled",className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{children:"Update Status"})]})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Status History"}),e.jsx("div",{className:"space-y-3",children:y.status_history.map((R,_)=>e.jsxs("div",{className:`relative pl-6 ${_!==y.status_history.length-1?"pb-3 border-l-2 border-gray-300":""}`,children:[e.jsx("div",{className:"absolute left-0 top-0 w-3 h-3 bg-blue-600 rounded-full -translate-x-[7px]"}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Iy(R.status)}`,children:R.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:bo(R.changed_at)})]}),R.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-2 italic",children:R.notes})]})]},R.history_id))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Internal Notes"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin-only notes (not visible to customer)"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("textarea",{value:i,onChange:R=>o(R.target.value),placeholder:"Add internal notes about this order...",rows:6,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 resize-none"}),e.jsx("button",{onClick:H,disabled:S.isPending,className:"w-full px-6 py-3 bg-gray-700 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{children:"Save Notes"})]})})]})]})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Process Refund"})}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Amount ()"}),e.jsx("input",{id:"refund-amount",type:"number",step:"0.01",min:"0.01",max:y.total_amount,value:x,onChange:R=>f(R.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500",placeholder:"Enter refund amount"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Order total: ",sr(y.total_amount)]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Reason"}),e.jsx("textarea",{id:"refund-reason",value:b,onChange:R=>h(R.target.value),required:!0,rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500 resize-none",placeholder:"Explain reason for refund..."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Warning:"})," This action will process a refund through the payment system and cannot be undone."]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),f(""),h("")},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:L.isPending,className:"flex-1 px-4 py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(gn,{className:"w-5 h-5"}),e.jsx("span",{children:"Process Refund"})]})})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-red-50 to-pink-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cancel Order"})}),e.jsxs("form",{onSubmit:I,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),e.jsx("textarea",{id:"cancel-reason",value:p,onChange:R=>v(R.target.value),required:!0,rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-red-500 resize-none",placeholder:"Explain reason for cancellation..."})]}),y.payment_status==="paid"&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:R=>j(R.target.checked),className:"mt-1 w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Issue refund"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Automatically refund ",sr(y.total_amount)," to customer"]})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-900",children:[e.jsx("strong",{children:"Warning:"})," Cancelling this order cannot be undone. The customer will be notified."]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),v(""),j(!1)},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:k.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Cancelling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wo,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancel Order"})]})})]})]})]})})]})})},eo="https://123salama-lama-food-truck.launchpulse.ai",$L=async t=>{const s=await Q.get(`${eo}/api/admin/delivery/settings`,{headers:{Authorization:`Bearer ${t}`}}),r=(s.data.zones||[]).map(n=>({...n,delivery_fee:Number(n.delivery_fee||0),minimum_order_value:n.minimum_order_value?Number(n.minimum_order_value):null,estimated_delivery_time:Number(n.estimated_delivery_time||0),priority:Number(n.priority||0)}));return{delivery_enabled:s.data.delivery_enabled??!1,minimum_order_value:s.data.minimum_order_delivery?Number(s.data.minimum_order_delivery):null,free_delivery_threshold:s.data.free_delivery_threshold?Number(s.data.free_delivery_threshold):null,zones:r}},IL=async(t,s)=>{const r={delivery_enabled:s.delivery_enabled,minimum_order_delivery:s.minimum_order_value,free_delivery_threshold:s.free_delivery_threshold};await Q.put(`${eo}/api/admin/delivery/settings`,r,{headers:{Authorization:`Bearer ${t}`}})},zL=async(t,s)=>(await Q.post(`${eo}/api/admin/delivery/zones`,s,{headers:{Authorization:`Bearer ${t}`}})).data,BL=async(t,s,r)=>(await Q.put(`${eo}/api/admin/delivery/zones/${s}`,r,{headers:{Authorization:`Bearer ${t}`}})).data,qL=async(t,s)=>{await Q.delete(`${eo}/api/admin/delivery/zones/${s}`,{headers:{Authorization:`Bearer ${t}`}})},UL=async(t,s,r)=>{const n=await Q.post(`${eo}/api/admin/delivery/validate-address`,{address:s,postal_code:r},{headers:{Authorization:`Bearer ${t}`}});return{...n.data,delivery_fee:n.data.delivery_fee?Number(n.data.delivery_fee):void 0,estimated_delivery_time:n.data.estimated_delivery_time?Number(n.data.estimated_delivery_time):void 0}},WL=()=>{const t=Z(K=>K.authentication_state.auth_token),[s,r]=u.useState(!1),[n,a]=u.useState(""),[i,o]=u.useState(""),[l,c]=u.useState(null),[d,m]=u.useState(!1),[x,f]=u.useState({zone_name:"",zone_type:"polygon",zone_boundaries:"{}",delivery_fee:"",minimum_order_value:"",estimated_delivery_time:"30",is_active:!0,priority:"0"}),[b,h]=u.useState(null),[p,v]=u.useState(""),[g,j]=u.useState(""),[y,w]=u.useState(null),[M,T]=u.useState(null),N=Ue(),{data:E,isLoading:L,error:k}=ue({queryKey:["delivery_settings"],queryFn:()=>$L(t),enabled:!!t,staleTime:5*60*1e3,retry:1}),S=(E==null?void 0:E.zones)||[],F=L,P=k,I=ce({mutationFn:K=>IL(t,K),onSuccess:()=>{N.invalidateQueries({queryKey:["delivery_settings"]}),R("success","Delivery settings updated successfully")},onError:K=>{var A,$;R("error",(($=(A=K.response)==null?void 0:A.data)==null?void 0:$.message)||"Failed to update settings")}}),H=ce({mutationFn:K=>zL(t,K),onSuccess:()=>{N.invalidateQueries({queryKey:["delivery_zones"]}),m(!1),_(),R("success","Delivery zone created successfully")},onError:K=>{var A,$;R("error",(($=(A=K.response)==null?void 0:A.data)==null?void 0:$.message)||"Failed to create zone")}}),z=ce({mutationFn:({zoneId:K,zoneData:A})=>BL(t,K,A),onSuccess:()=>{N.invalidateQueries({queryKey:["delivery_zones"]}),m(!1),c(null),_(),R("success","Delivery zone updated successfully")},onError:K=>{var A,$;R("error",(($=(A=K.response)==null?void 0:A.data)==null?void 0:$.message)||"Failed to update zone")}}),B=ce({mutationFn:K=>qL(t,K),onSuccess:()=>{N.invalidateQueries({queryKey:["delivery_zones"]}),h(null),R("success","Delivery zone deleted successfully")},onError:K=>{var A,$;R("error",(($=(A=K.response)==null?void 0:A.data)==null?void 0:$.message)||"Failed to delete zone")}}),C=ce({mutationFn:({address:K,postalCode:A})=>UL(t,K,A),onSuccess:K=>{w(K)},onError:K=>{var A,$;R("error",(($=(A=K.response)==null?void 0:A.data)==null?void 0:$.message)||"Validation failed")}});u.useEffect(()=>{E&&(r(E.delivery_enabled),a(E.minimum_order_value!==null?String(E.minimum_order_value):""),o(E.free_delivery_threshold!==null?String(E.free_delivery_threshold):""))},[E]),u.useEffect(()=>{if(M){const K=setTimeout(()=>{T(null)},5e3);return()=>clearTimeout(K)}},[M]);const R=(K,A)=>{T({type:K,message:A})},_=()=>{f({zone_name:"",zone_type:"polygon",zone_boundaries:"{}",delivery_fee:"",minimum_order_value:"",estimated_delivery_time:"30",is_active:!0,priority:"0"})},q=()=>{_(),c(null),m(!0)},O=K=>{c(K),f({zone_name:K.zone_name,zone_type:K.zone_type,zone_boundaries:JSON.stringify(K.zone_boundaries,null,2),delivery_fee:String(K.delivery_fee),minimum_order_value:K.minimum_order_value!==null?String(K.minimum_order_value):"",estimated_delivery_time:String(K.estimated_delivery_time),is_active:K.is_active,priority:String(K.priority)}),m(!0)},V=()=>{const K={delivery_enabled:s,minimum_order_value:n?Number(n):null,free_delivery_threshold:i?Number(i):null};I.mutate(K)},D=K=>{K.preventDefault();let A;try{A=JSON.parse(x.zone_boundaries)}catch{R("error","Invalid zone boundaries JSON format");return}const $={zone_name:x.zone_name,zone_type:x.zone_type,zone_boundaries:A,delivery_fee:Number(x.delivery_fee),minimum_order_value:x.minimum_order_value?Number(x.minimum_order_value):null,estimated_delivery_time:Number(x.estimated_delivery_time),is_active:x.is_active,priority:Number(x.priority)};l?z.mutate({zoneId:l.zone_id,zoneData:$}):H.mutate($)},G=K=>{B.mutate(K)},se=()=>{if(!p.trim()||!g.trim()){R("error","Please enter both address and postal code");return}C.mutate({address:p,postalCode:g})},le=K=>{const A={zone_name:K.zone_name,zone_boundaries:K.zone_boundaries,delivery_fee:K.delivery_fee,minimum_order_value:K.minimum_order_value,estimated_delivery_time:K.estimated_delivery_time,is_active:!K.is_active,priority:K.priority};z.mutate({zoneId:K.zone_id,zoneData:A})};return L||F?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading delivery settings..."})]})})})})}):k||P?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to Load Delivery Settings"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:(k==null?void 0:k.message)||(P==null?void 0:P.message)||"Please try again later"})]})]})})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(gt,{className:"h-8 w-8 text-blue-600 mr-3"}),"Delivery Configuration"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage delivery zones, fees, and operational settings"})]}),M&&e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md rounded-lg shadow-lg p-4 ${M.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[M.type==="success"?e.jsx(Ge,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):e.jsx(me,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm font-medium ${M.type==="success"?"text-green-800":"text-red-800"}`,children:M.message})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pl,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Global Delivery Settings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vw,{className:`h-6 w-6 mr-3 ${s?"text-green-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Delivery Service ",s?"Enabled":"Disabled"]}),e.jsx("p",{className:"text-sm text-gray-600",children:s?"Customers can select delivery at checkout":"Only collection is available"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${s?"bg-green-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${s?"translate-x-7":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(gn,{className:"inline h-4 w-4 mr-1"}),"Minimum Order Value ()"]}),e.jsx("input",{type:"number",id:"minimum_order_value",value:n,onChange:K=>a(K.target.value),placeholder:"e.g., 15.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no minimum order requirement"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"free_delivery_threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(gn,{className:"inline h-4 w-4 mr-1"}),"Free Delivery Threshold ()"]}),e.jsx("input",{type:"number",id:"free_delivery_threshold",value:i,onChange:K=>o(K.target.value),placeholder:"e.g., 50.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Orders above this amount qualify for free delivery"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:V,disabled:I.isPending,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:I.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cg,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Zones"})]}),e.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Add New Zone"]})]}),S&&S.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(K=>e.jsxs("div",{className:`border rounded-lg p-4 transition-all ${K.is_active?"border-gray-200 bg-white hover:shadow-md":"border-gray-300 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:K.zone_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 uppercase",children:K.zone_type})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.is_active?"bg-green-100 text-green-800":"bg-gray-200 text-gray-600"}`,children:K.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(gn,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Delivery Fee:"}),e.jsxs("span",{className:"ml-auto",children:["",Number(K.delivery_fee).toFixed(2)]})]}),K.minimum_order_value!==null&&e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(gn,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Min Order:"}),e.jsxs("span",{className:"ml-auto",children:["",Number(K.minimum_order_value).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Est. Time:"}),e.jsxs("span",{className:"ml-auto",children:[K.estimated_delivery_time," mins"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>O(K),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>le(K),disabled:z.isPending,className:`flex-1 flex items-center justify-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${K.is_active?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:K.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-1"}),"Enable"]})}),e.jsx("button",{onClick:()=>h(K.zone_id),className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]})]},K.zone_id))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Cg,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No delivery zones configured"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first zone to start delivering"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(yr,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Address Validation Tester"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",id:"test_address",value:p,onChange:K=>v(K.target.value),placeholder:"123 Main Street, Dublin",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_postal_code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",id:"test_postal_code",value:g,onChange:K=>j(K.target.value),placeholder:"D01 F5P2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("button",{onClick:se,disabled:C.isPending,className:"w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Validating..."]}):"Validate Address"}),y&&e.jsx("div",{className:`mt-4 p-4 rounded-lg border ${y.valid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[y.valid?e.jsx(Ge,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):e.jsx(Ae,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold ${y.valid?"text-green-800":"text-red-800"}`,children:y.valid?"Valid Delivery Address":"Cannot Deliver to Address"}),y.valid&&e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-green-700",children:[y.delivery_fee!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery Fee:"})," ",Number(y.delivery_fee).toFixed(2)]}),y.estimated_delivery_time!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Estimated Time:"})," ",y.estimated_delivery_time," minutes"]})]}),!y.valid&&y.message&&e.jsx("p",{className:"mt-1 text-sm text-red-700",children:y.message})]})]})})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Edit Delivery Zone":"Create New Delivery Zone"}),e.jsx("button",{onClick:()=>{m(!1),c(null),_()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ae,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"zone_name",required:!0,value:x.zone_name,onChange:K=>f(A=>({...A,zone_name:K.target.value})),placeholder:"e.g., Dublin City Centre",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"zone_type",required:!0,value:x.zone_type,onChange:K=>f(A=>({...A,zone_type:K.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"polygon",children:"Polygon"}),e.jsx("option",{value:"radius",children:"Radius"}),e.jsx("option",{value:"postal_code",children:"Postal Code"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_boundaries",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Boundaries (JSON) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"zone_boundaries",required:!0,value:x.zone_boundaries,onChange:K=>f(A=>({...A,zone_boundaries:K.target.value})),placeholder:'{"center": {"lat": 53.35, "lng": -6.26}, "radius": 5}',rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter zone boundaries as JSON. Example for radius: ",'{"center": {"lat": 53.35, "lng": -6.26}, "radius": 5}']})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"delivery_fee",className:"block text-sm font-medium text-gray-700 mb-2",children:["Delivery Fee () ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"delivery_fee",required:!0,value:x.delivery_fee,onChange:K=>f(A=>({...A,delivery_fee:K.target.value})),placeholder:"e.g., 3.50",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zone_minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value ()"}),e.jsx("input",{type:"number",id:"zone_minimum_order_value",value:x.minimum_order_value,onChange:K=>f(A=>({...A,minimum_order_value:K.target.value})),placeholder:"e.g., 20.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"estimated_delivery_time",className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Delivery Time (minutes) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"estimated_delivery_time",required:!0,value:x.estimated_delivery_time,onChange:K=>f(A=>({...A,estimated_delivery_time:K.target.value})),placeholder:"e.g., 30",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority (for overlapping zones)"}),e.jsx("input",{type:"number",id:"priority",value:x.priority,onChange:K=>f(A=>({...A,priority:K.target.value})),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority zones take precedence"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:K=>f(A=>({...A,is_active:K.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active Zone (available for delivery)"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),c(null),_()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H.isPending||z.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:H.isPending||z.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l?"Updating...":"Creating..."]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),l?"Update Zone":"Create Zone"]})})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(me,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Delivery Zone"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this delivery zone? This action cannot be undone."}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>G(b),disabled:B.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Zone"})]})]})})]})})},VL=async(t,s)=>{const r="https://123salama-lama-food-truck.launchpulse.ai",n=new URLSearchParams;t.status&&n.append("status",t.status),t.query&&n.append("query",t.query),n.append("limit",t.limit.toString()),n.append("offset",t.offset.toString()),n.append("sort_by",t.sort_by),n.append("sort_order",t.sort_order);const a=await Q.get(`${r}/api/admin/discounts?${n.toString()}`,{headers:{Authorization:`Bearer ${s}`}});return{discount_codes:a.data.discounts||a.data.discount_codes||[],total:a.data.total||0}},HL=async(t,s,r)=>{await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{status:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})},QL=async(t,s)=>{await Q.delete(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})},zy=(t,s)=>t==="percentage"?`${s}%`:t==="fixed"?`${s.toFixed(2)}`:t==="delivery_fee"?"Free Delivery":`${s.toFixed(2)}`,zm=t=>t?new Date(t).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}):"No expiry",By=t=>{switch(t){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},qy=t=>{switch(t){case"percentage":return"Percentage";case"fixed":return"Fixed Amount";case"delivery_fee":return"Free Delivery";default:return t}},KL=()=>{const t=Z(D=>D.authentication_state.auth_token),[s,r]=ct(),[n,a]=u.useState(s.get("status")||null),[i,o]=u.useState(""),[l,c]=u.useState([]),[d]=u.useState("created_at"),[m]=u.useState("desc"),[x,f]=u.useState({limit:50,offset:0,total:0}),[b,h]=u.useState(!1),[p,v]=u.useState(null),[g,j]=u.useState(null),y=Ue(),{data:w,isLoading:M,isError:T,error:N,refetch:E}=ue({queryKey:["admin-discount-codes",n,i,x.limit,x.offset,d,m],queryFn:()=>VL({status:n,query:i,limit:x.limit,offset:x.offset,sort_by:d,sort_order:m},t||""),enabled:!!t,staleTime:6e4});u.useEffect(()=>{w&&f(D=>({...D,total:w.total}))},[w]);const L=ce({mutationFn:({code_id:D,status:G})=>HL(D,G,t||""),onSuccess:()=>{y.invalidateQueries({queryKey:["admin-discount-codes"]})}}),k=ce({mutationFn:D=>QL(D,t||""),onSuccess:()=>{y.invalidateQueries({queryKey:["admin-discount-codes"]}),h(!1),v(null)}}),S=D=>{a(D),f(se=>({...se,offset:0}));const G=new URLSearchParams(s);D?G.set("status",D):G.delete("status"),r(G)},F=D=>{o(D.target.value),f(G=>({...G,offset:0}))},P=D=>{const G=D.status==="active"?"inactive":"active";L.mutate({code_id:D.code_id,status:G})},I=D=>{v(D),h(!0)},H=()=>{p&&k.mutate(p.code_id)},z=D=>{navigator.clipboard.writeText(D),j(D),setTimeout(()=>j(null),2e3)},B=D=>{D.target.checked&&w?c(w.discount_codes.map(G=>G.code_id)):c([])},C=D=>{c(G=>G.includes(D)?G.filter(se=>se!==D):[...G,D])},R=D=>{f(G=>({...G,offset:D}))},_=u.useMemo(()=>(w==null?void 0:w.discount_codes)||[],[w]),q=u.useMemo(()=>Math.ceil(x.total/x.limit),[x.total,x.limit]),O=u.useMemo(()=>Math.floor(x.offset/x.limit)+1,[x.offset,x.limit]),V=[{label:"All",value:null},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Expired",value:"expired"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Discount Codes"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage promotional codes and track campaign performance"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs(X,{to:"/admin/discounts/code",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Discount Code"]})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:V.map(D=>e.jsx("button",{onClick:()=>S(D.value),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${n===D.value?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:D.label},D.label))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search discount codes...",value:i,onChange:F,className:"w-full px-4 py-3 pl-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"}),e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:M?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading discount codes..."})]})}):T?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load discount codes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:N instanceof Error?N.message:"An error occurred"}),e.jsx("button",{onClick:()=>E(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Try Again"})]})}):_.length===0?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i||n?"No discount codes found":"No discount codes yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i||n?"Try adjusting your filters or search term":"Create your first discount code to start promoting your business"}),!i&&!n&&e.jsxs(X,{to:"/admin/discounts/code",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Discount Code"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:l.length===_.length,onChange:B,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type & Value"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Min Order"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Validity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:l.includes(D.code_id),onChange:()=>C(D.code_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:D.code}),e.jsx("button",{onClick:()=>z(D.code),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Copy code",children:g===D.code?e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:zy(D.discount_type,D.discount_value)}),e.jsx("div",{className:"text-xs text-gray-500",children:qy(D.discount_type)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.minimum_order_value?`${D.minimum_order_value.toFixed(2)}`:"None"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[D.total_used_count," ",D.total_usage_limit?`/ ${D.total_usage_limit}`:""]}),e.jsx("div",{className:"text-xs text-gray-500",children:D.total_usage_limit?"uses":"unlimited"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{children:zm(D.valid_from)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["to ",zm(D.valid_until)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${By(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(X,{to:`/admin/discounts/code?code_id=${D.code_id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(X,{to:`/admin/discounts/${D.code_id}/usage`,className:"text-gray-600 hover:text-gray-900 transition-colors",title:"View Usage",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),D.status!=="expired"&&e.jsx("button",{onClick:()=>P(D),disabled:L.isPending,className:`${D.status==="active"?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"} transition-colors disabled:opacity-50`,title:D.status==="active"?"Deactivate":"Activate",children:L.isPending?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}):D.status==="active"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx("button",{onClick:()=>I(D),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},D.code_id))})]})}),e.jsx("div",{className:"lg:hidden",children:_.map(D=>e.jsxs("div",{className:"border-b border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:l.includes(D.code_id),onChange:()=>C(D.code_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:D.code}),e.jsx("button",{onClick:()=>z(D.code),className:"text-gray-400 hover:text-blue-600 transition-colors",children:g===D.code?e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),e.jsx("span",{className:`inline-flex items-center mt-1 px-2 py-0.5 rounded-full text-xs font-medium border ${By(D.status)}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{to:`/admin/discounts/code?code_id=${D.code_id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>I(D),className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Discount:"}),e.jsx("div",{className:"font-medium text-gray-900",children:zy(D.discount_type,D.discount_value)}),e.jsx("div",{className:"text-xs text-gray-500",children:qy(D.discount_type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Usage:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:[D.total_used_count," ",D.total_usage_limit?`/ ${D.total_usage_limit}`:""]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Min Order:"}),e.jsx("div",{className:"font-medium text-gray-900",children:D.minimum_order_value?`${D.minimum_order_value.toFixed(2)}`:"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Valid Until:"}),e.jsx("div",{className:"font-medium text-gray-900",children:zm(D.valid_until)})]})]})]},D.code_id))}),q>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:x.offset+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(x.offset+x.limit,x.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:x.total})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(Math.max(0,x.offset-x.limit)),disabled:O===1,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",O," of ",q]}),e.jsx("button",{onClick:()=>R(x.offset+x.limit),disabled:O===q,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})})]})}),b&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Delete Discount Code"}),e.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete the discount code ",e.jsx("strong",{children:p.code}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{h(!1),v(null)},className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:k.isPending,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete"})]})]})})]})},YL=async(t,s)=>(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,GL=async t=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories||[],XL=async(t,s)=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,JL=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,ZL=()=>{const t=Be(),[s]=ct(),r=s.get("code_id"),n=Z(k=>k.authentication_state.auth_token),[a,i]=u.useState({code:"",discount_type:"percentage",discount_value:"",applicable_order_types:[],applicable_category_ids:[],minimum_order_value:"",total_usage_limit:"",per_customer_usage_limit:"",valid_from:new Date().toISOString().slice(0,16),valid_until:"",status:"active",internal_notes:""}),[o,l]=u.useState({}),[c,d]=u.useState(!1),[m,x]=u.useState(null),f=!!r,{data:b,isLoading:h,error:p}=ue({queryKey:["admin-discount-code",r],queryFn:()=>YL(r,n),enabled:!!r&&!!n,staleTime:0}),{data:v=[],isLoading:g}=ue({queryKey:["admin-categories"],queryFn:()=>GL(n),enabled:!!n,staleTime:5*60*1e3}),j=ce({mutationFn:k=>XL(k,n),onSuccess:()=>{t("/admin/discounts",{state:{successMessage:"Discount code created successfully!"}})},onError:k=>{var F,P;const S=((P=(F=k.response)==null?void 0:F.data)==null?void 0:P.message)||k.message||"Failed to create discount code";x(S)}}),y=ce({mutationFn:k=>JL(r,k,n),onSuccess:()=>{t("/admin/discounts",{state:{successMessage:"Discount code updated successfully!"}})},onError:k=>{var F,P;const S=((P=(F=k.response)==null?void 0:F.data)==null?void 0:P.message)||k.message||"Failed to update discount code";x(S)}});u.useEffect(()=>{var k,S,F,P;b&&f&&i({code:b.code,discount_type:b.discount_type,discount_value:b.discount_value.toString(),applicable_order_types:b.applicable_order_types||[],applicable_category_ids:b.applicable_category_ids||[],minimum_order_value:((k=b.minimum_order_value)==null?void 0:k.toString())||"",total_usage_limit:((S=b.total_usage_limit)==null?void 0:S.toString())||"",per_customer_usage_limit:((F=b.per_customer_usage_limit)==null?void 0:F.toString())||"",valid_from:b.valid_from.slice(0,16),valid_until:((P=b.valid_until)==null?void 0:P.slice(0,16))||"",status:b.status,internal_notes:b.internal_notes||""})},[b,f]);const w=()=>{d(!0);const k="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",S=8;let F="PROMO";for(let P=0;P<S;P++)F+=k.charAt(Math.floor(Math.random()*k.length));i(P=>({...P,code:F})),l(P=>({...P,code:""})),setTimeout(()=>d(!1),300)},M=k=>{const{name:S,value:F}=k.target;i(P=>({...P,[S]:F})),o[S]&&l(P=>({...P,[S]:""})),m&&x(null)},T=(k,S,F)=>{i(P=>{const I=P[k],H=F?[...I,S]:I.filter(z=>z!==S);return{...P,[k]:H}}),o[k]&&l(P=>({...P,[k]:""}))},N=()=>{const k={};if(a.code.trim()?/^[A-Z0-9]+$/.test(a.code)?(a.code.length<4||a.code.length>50)&&(k.code="Code must be between 4 and 50 characters"):k.code="Code must be uppercase alphanumeric characters only":k.code="Discount code is required",!a.discount_value)k.discount_value="Discount value is required";else{const S=parseFloat(a.discount_value);isNaN(S)||S<=0?k.discount_value="Discount value must be a positive number":a.discount_type==="percentage"&&(S<1||S>100)&&(k.discount_value="Percentage must be between 1 and 100")}if(a.valid_from||(k.valid_from="Start date is required"),a.valid_until&&a.valid_from){const S=new Date(a.valid_from);new Date(a.valid_until)<=S&&(k.valid_until="End date must be after start date")}return a.minimum_order_value&&parseFloat(a.minimum_order_value)<0&&(k.minimum_order_value="Minimum order value cannot be negative"),a.total_usage_limit&&parseInt(a.total_usage_limit)<1&&(k.total_usage_limit="Total usage limit must be at least 1"),a.per_customer_usage_limit&&parseInt(a.per_customer_usage_limit)<1&&(k.per_customer_usage_limit="Per-customer limit must be at least 1"),l(k),Object.keys(k).length===0},E=async k=>{if(k.preventDefault(),x(null),!N())return;const S=parseFloat(a.discount_value);if(f){const F={discount_value:S,minimum_order_value:a.minimum_order_value?parseFloat(a.minimum_order_value):null,total_usage_limit:a.total_usage_limit?parseInt(a.total_usage_limit):null,per_customer_usage_limit:a.per_customer_usage_limit?parseInt(a.per_customer_usage_limit):null,valid_until:a.valid_until||null,status:a.status,internal_notes:a.internal_notes||null};y.mutate(F)}else{const F={code:a.code.toUpperCase(),discount_type:a.discount_type,discount_value:S,applicable_order_types:a.applicable_order_types.length>0?a.applicable_order_types:null,applicable_category_ids:a.applicable_category_ids.length>0?a.applicable_category_ids:null,minimum_order_value:a.minimum_order_value?parseFloat(a.minimum_order_value):null,total_usage_limit:a.total_usage_limit?parseInt(a.total_usage_limit):null,per_customer_usage_limit:a.per_customer_usage_limit?parseInt(a.per_customer_usage_limit):null,valid_from:a.valid_from,valid_until:a.valid_until||null,status:a.status,internal_notes:a.internal_notes||null};j.mutate(F)}},L=h||j.isPending||y.isPending;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[e.jsx(X,{to:"/admin/dashboard",className:"hover:text-orange-600 transition-colors",children:"Dashboard"}),e.jsx("span",{children:"/"}),e.jsx(X,{to:"/admin/discounts",className:"hover:text-orange-600 transition-colors",children:"Discount Codes"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 font-medium",children:f?"Edit Code":"Create Code"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:f?"Edit Discount Code":"Create Discount Code"}),e.jsx(X,{to:"/admin/discounts",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:" Back to Discounts"})]})]}),p&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:"Failed to load discount code. Please try again."})}),m&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:m})}),h?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})}):e.jsxs("form",{onSubmit:E,className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",id:"code",name:"code",value:a.code,onChange:M,disabled:f,placeholder:"Enter code or generate",className:`flex-1 px-4 py-3 border rounded-lg font-mono uppercase focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.code?"border-red-300 bg-red-50":"border-gray-300"} ${f?"bg-gray-100 cursor-not-allowed":""}`}),!f&&e.jsx("button",{type:"button",onClick:w,disabled:c,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Generating..."})]}):e.jsx("span",{children:"Generate Code"})})]}),o.code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.code}),f&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Code cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"discount_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"discount_type",name:"discount_type",value:a.discount_type,onChange:M,disabled:f,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${f?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"percentage",children:"Percentage Off"}),e.jsx("option",{value:"fixed",children:"Fixed Amount Off"}),e.jsx("option",{value:"delivery_fee",children:"Free Delivery"})]}),f&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"discount_value",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[a.discount_type==="percentage"&&e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500",children:"%"}),a.discount_type==="fixed"&&e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",id:"discount_value",name:"discount_value",value:a.discount_value,onChange:M,disabled:a.discount_type==="delivery_fee",placeholder:a.discount_type==="percentage"?"10":"5.00",step:a.discount_type==="percentage"?"1":"0.01",min:"0",max:a.discount_type==="percentage"?"100":void 0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.discount_type==="fixed"?"pl-10":""} ${o.discount_value?"border-red-300 bg-red-50":"border-gray-300"} ${a.discount_type==="delivery_fee"?"bg-gray-100 cursor-not-allowed":""}`})]}),o.discount_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.discount_value}),a.discount_type==="delivery_fee"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Delivery fee will be waived"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Applicability Rules"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Leave empty to apply discount to all orders and items"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Applicable Order Types"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.applicable_order_types.includes("collection"),onChange:k=>T("applicable_order_types","collection",k.target.checked),disabled:f,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Collection Orders"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.applicable_order_types.includes("delivery"),onChange:k=>T("applicable_order_types","delivery",k.target.checked),disabled:f,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Delivery Orders"})]})]}),f&&e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Order type restrictions cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Applicable Categories"}),g?e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:v.map(k=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.applicable_category_ids.includes(k.category_id),onChange:S=>T("applicable_category_ids",k.category_id,S.target.checked),disabled:f,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:k.name})]},k.category_id))}),f&&e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Category restrictions cannot be changed when editing"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Usage Constraints"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",id:"minimum_order_value",name:"minimum_order_value",value:a.minimum_order_value,onChange:M,placeholder:"0.00",step:"0.01",min:"0",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.minimum_order_value?"border-red-300 bg-red-50":"border-gray-300"}`})]}),o.minimum_order_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.minimum_order_value}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty for no minimum"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"total_usage_limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Usage Limit"}),e.jsx("input",{type:"number",id:"total_usage_limit",name:"total_usage_limit",value:a.total_usage_limit,onChange:M,placeholder:"Unlimited",min:"1",step:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.total_usage_limit?"border-red-300 bg-red-50":"border-gray-300"}`}),o.total_usage_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.total_usage_limit}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum total redemptions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"per_customer_usage_limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Per-Customer Limit"}),e.jsx("input",{type:"number",id:"per_customer_usage_limit",name:"per_customer_usage_limit",value:a.per_customer_usage_limit,onChange:M,placeholder:"Unlimited",min:"1",step:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.per_customer_usage_limit?"border-red-300 bg-red-50":"border-gray-300"}`}),o.per_customer_usage_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.per_customer_usage_limit}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Uses per customer"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Validity Period"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"valid_from",className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",id:"valid_from",name:"valid_from",value:a.valid_from,onChange:M,disabled:f,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.valid_from?"border-red-300 bg-red-50":"border-gray-300"} ${f?"bg-gray-100 cursor-not-allowed":""}`}),o.valid_from&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.valid_from}),f&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Start date cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"valid_until",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",id:"valid_until",name:"valid_until",value:a.valid_until,onChange:M,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.valid_until?"border-red-300 bg-red-50":"border-gray-300"}`}),o.valid_until&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.valid_until}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty for no expiration"})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status & Notes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"status",name:"status",value:a.status,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"expired",children:"Expired"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Active codes can be used, inactive codes are disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"internal_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes"}),e.jsx("textarea",{id:"internal_notes",name:"internal_notes",value:a.internal_notes,onChange:M,rows:4,placeholder:"Add notes for internal reference (not visible to customers)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"These notes are only visible to administrators"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsx(X,{to:"/admin/discounts",className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:L,className:"px-8 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:f?"Updating...":"Creating..."})]}):e.jsx("span",{children:f?"Update Discount Code":"Create Discount Code"})})]})]})]})})})},eD=async(t,s)=>(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,tD=async(t,s,r)=>{const n=new URLSearchParams;r!=null&&r.from&&n.append("date_from",r.from),r!=null&&r.to&&n.append("date_to",r.to);const a=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}/usage${n.toString()?"?"+n.toString():""}`,{headers:{Authorization:`Bearer ${s}`}}),i=a.data.total_usage_limit,o=i?i-a.data.total_uses:null;return{usage_analytics:{total_uses:a.data.total_uses||0,total_discount_given:Number(a.data.total_discount_given||0),remaining_uses:o,conversion_rate:Number(a.data.conversion_rate||0),average_order_value:Number(a.data.average_order_value||0)},usage_details:(a.data.usage_details||[]).map(l=>({usage_id:l.usage_id,order_id:l.order_id,user_id:l.user_id,discount_amount_applied:Number(l.discount_amount_applied||0),used_at:l.used_at,customer_email:l.customer_email||"",order_total:Number(l.order_total||0)}))}},vo=t=>`${t.toFixed(2)}`,Uy=t=>new Date(t).toLocaleDateString("en-IE",{day:"2-digit",month:"short",year:"numeric"}),q1=t=>new Date(t).toLocaleString("en-IE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),sD=(t,s)=>{const r=["Date/Time","Order ID","Customer Email","Discount Applied ()","Order Total ()"],n=t.map(c=>[q1(c.used_at),c.order_id,c.customer_email,c.discount_amount_applied.toFixed(2),c.order_total.toFixed(2)]),a=[[`Discount Code: ${s.code}`],[`Export Date: ${new Date().toLocaleDateString("en-IE")}`],[],r,...n].map(c=>c.join(",")).join(`
`),i=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(i);o.setAttribute("href",l),o.setAttribute("download",`discount_${s.code}_usage_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},rD=()=>{const{code_id:t}=Rs(),s=Be(),r=Z(E=>E.authentication_state.auth_token),n=Z(E=>E.authentication_state.current_user),[a,i]=u.useState({from:null,to:null}),[o,l]=u.useState({from:null,to:null}),[c,d]=u.useState(!1);St.useEffect(()=>{(!r||(n==null?void 0:n.role)!=="admin")&&s("/admin/login")},[r,n,s]);const{data:m,isLoading:x,isError:f,error:b}=ue({queryKey:["admin-discount-code",t],queryFn:()=>eD(t,r),enabled:!!t&&!!r,staleTime:5*60*1e3}),{data:h,isLoading:p,isError:v,error:g}=ue({queryKey:["admin-discount-usage",t,a],queryFn:()=>tD(t,r,a),enabled:!!t&&!!r,staleTime:2*60*1e3}),j=x||p;if(f||v)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(b==null?void 0:b.message)||(g==null?void 0:g.message)||"Failed to load discount code analytics"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/admin/discounts"),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium transition-colors",children:"Back to Discounts"}),e.jsx("button",{onClick:()=>{window.location.reload()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Retry"})]})]})})})});const y=()=>{m&&(navigator.clipboard.writeText(m.code),d(!0),setTimeout(()=>d(!1),2e3))},w=()=>{i(o)},M=()=>{l({from:null,to:null}),i({from:null,to:null})},T=()=>{m&&(h!=null&&h.usage_details)&&sD(h.usage_details,m)},N=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(X,{to:"/admin/discounts",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ft,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Discount Code Analytics"}),m&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Performance insights for ",e.jsx("span",{className:"font-semibold",children:m.code})]})]})]}),e.jsxs("button",{onClick:T,disabled:!(h!=null&&h.usage_details)||h.usage_details.length===0,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ys,{className:"h-5 w-5"}),e.jsx("span",{children:"Export CSV"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:j?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(E=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"})]},E))})]}):e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Code Details"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${N(m.status)}`,children:m.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Discount Code"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"text-2xl font-mono font-bold text-blue-600 bg-white px-4 py-2 rounded-lg",children:m.code}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-white/50 rounded-lg transition-colors",title:"Copy code",children:c?e.jsx(Ge,{className:"h-5 w-5 text-green-600"}):e.jsx(W0,{className:"h-5 w-5 text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Discount Type & Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:m.discount_type==="percentage"?`${m.discount_value}% OFF`:m.discount_type==="fixed"?`${m.discount_value.toFixed(2)} OFF`:"Free Delivery"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Minimum Order Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:m.minimum_order_value?vo(m.minimum_order_value):"None"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valid From"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Uy(m.valid_from)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valid Until"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m.valid_until?Uy(m.valid_until):"No expiry"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Usage Limit"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m.total_usage_limit?`${m.total_used_count} / ${m.total_usage_limit}`:"Unlimited"})]})]})]})})}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Rn,{className:"h-6 w-6 text-blue-600"})}),h.usage_analytics.total_uses>0&&e.jsxs("span",{className:"text-green-600 text-sm font-semibold flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1"}),"Active"]})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Uses"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:h.usage_analytics.total_uses.toLocaleString()}),(m==null?void 0:m.total_usage_limit)&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",m.total_usage_limit.toLocaleString()," limit"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(gn,{className:"h-6 w-6 text-green-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Discount Given"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:vo(h.usage_analytics.total_discount_given)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Savings for customers"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Pd,{className:"h-6 w-6 text-purple-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Remaining Uses"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:h.usage_analytics.remaining_uses!==null?h.usage_analytics.remaining_uses.toLocaleString():""}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.usage_analytics.remaining_uses!==null?"Left before limit":"Unlimited"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ps,{className:"h-6 w-6 text-orange-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Average Order Value"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:vo(h.usage_analytics.average_order_value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"With this code"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Mn,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filter by Date Range"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx("input",{type:"date",value:o.from||"",onChange:E=>l({...o,from:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx("input",{type:"date",value:o.to||"",onChange:E=>l({...o,to:E.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Apply"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg text-sm font-medium transition-colors",children:"Clear"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(os,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Usage Details"})]}),(h==null?void 0:h.usage_details)&&e.jsxs("span",{className:"text-sm text-gray-600",children:[h.usage_details.length," ",h.usage_details.length===1?"use":"uses"]})]})}),h!=null&&h.usage_details&&h.usage_details.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.usage_details.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q1(E.used_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx(X,{to:`/admin/orders/${E.order_id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:E.order_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx(X,{to:`/admin/customers/${E.user_id}`,className:"text-blue-600 hover:text-blue-800",children:E.customer_email})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["-",vo(E.discount_amount_applied)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:vo(E.order_total)})]},E.usage_id))})]})}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(os,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Usage Data"}),e.jsxs("p",{className:"text-gray-600",children:["This discount code hasn't been used yet",a.from||a.to?" in the selected date range":"","."]})]})]})]})})]})})},nD=()=>{const t=Z($=>$.authentication_state.auth_token),[s,r]=ct(),n=Be(),[a,i]=u.useState(s.get("search")||""),[o,l]=u.useState(s.get("registration_date")||"all_time"),[c,d]=u.useState(s.get("total_orders")||"all"),[m]=u.useState(parseInt(s.get("limit")||"50",10)),[x,f]=u.useState(parseInt(s.get("offset")||"0",10)),[b,h]=u.useState([]),[p,v]=u.useState(a);u.useEffect(()=>{const $=setTimeout(()=>{v(a)},500);return()=>clearTimeout($)},[a]),u.useEffect(()=>{const $=new URLSearchParams;p&&$.set("search",p),o!=="all_time"&&$.set("registration_date",o),c!=="all"&&$.set("total_orders",c),$.set("limit",m.toString()),$.set("offset",x.toString()),r($,{replace:!0})},[p,o,c,m,x,r]);const g=async()=>{const $=new URLSearchParams;p&&$.append("search",p),o!=="all_time"&&$.append("registration_date",o),c!=="all"&&$.append("total_orders",c),$.append("limit",m.toString()),$.append("offset",x.toString());const re=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/customers?${$.toString()}`,{headers:{Authorization:`Bearer ${t}`}});return{customers_list:re.data.customers.map(xe=>{var ke,Ce,Pe;return{user_id:xe.user_id,email:xe.email,first_name:xe.first_name,last_name:xe.last_name,phone:xe.phone,created_at:xe.created_at,total_orders:((ke=xe.stats)==null?void 0:ke.total_orders)||0,total_spend:((Ce=xe.stats)==null?void 0:Ce.total_spent)||0,current_points_balance:((Pe=xe.loyalty_account)==null?void 0:Pe.current_points_balance)||0,status:xe.status}}),total_customers_count:re.data.total}},{data:j={customers_list:[],total_customers_count:0},isLoading:y,isError:w,error:M,refetch:T}=ue({queryKey:["admin","customers",s.toString()],queryFn:g,staleTime:6e4,refetchOnWindowFocus:!1,placeholderData:$=>$}),N=j.customers_list,E=j.total_customers_count,L=u.useCallback($=>{i($.target.value),f(0)},[]),k=u.useCallback($=>{l($.target.value),f(0)},[]),S=u.useCallback($=>{d($.target.value),f(0)},[]),F=u.useCallback($=>{h(re=>re.includes($)?re.filter(ve=>ve!==$):[...re,$])},[]),P=u.useCallback(()=>{b.length===N.length&&N.length>0?h([]):h(N.map($=>$.user_id))},[N,b.length]),I=u.useCallback($=>b.includes($),[b]),H=N.length>0&&b.length===N.length,z=b.length>0&&b.length<N.length,B=u.useCallback(()=>{x>0&&f($=>Math.max(0,$-m))},[x,m]),C=u.useCallback(()=>{x+m<E&&f($=>$+m)},[x,m,E]),R=u.useCallback($=>{f(($-1)*m)},[m]),_=u.useCallback(async()=>{try{const $=new URLSearchParams;p&&$.append("query",p),o!=="all_time"&&$.append("registration_date",o),c!=="all"&&$.append("total_orders",c),$.append("format","csv");const re=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/customers/export?${$.toString()}`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),ve=new Blob([re.data],{type:"text/csv"}),xe=window.URL.createObjectURL(ve),ke=document.createElement("a");ke.href=xe,ke.download=`customers-export-${new Date().toISOString().split("T")[0]}.csv`,ke.click(),window.URL.revokeObjectURL(xe)}catch($){console.error("Export failed:",$),alert("Failed to export customer data. Please try again.")}},[t,p,o,c]),q=u.useCallback($=>{n(`/admin/customers/${$}`)},[n]),O=$=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format($),V=$=>new Date($).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),D=$=>{switch($){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"suspended":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},G=Math.floor(x/m)+1,se=Math.ceil(E/m),le=x>0,K=x+m<E,A=()=>{const $=[];if(se<=5)for(let ve=1;ve<=se;ve++)$.push(ve);else if(G<=3){for(let ve=1;ve<=4;ve++)$.push(ve);$.push(-1),$.push(se)}else if(G>=se-2){$.push(1),$.push(-1);for(let ve=se-3;ve<=se;ve++)$.push(ve)}else $.push(1),$.push(-1),$.push(G-1),$.push(G),$.push(G+1),$.push(-1),$.push(se);return $};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customer Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage customer relationships, view profiles, and track loyalty status"})]}),e.jsxs("button",{onClick:_,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100 shadow-md",children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Export CSV"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Customers"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(yr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"search",value:a,onChange:L,placeholder:"Name, email, or phone...",className:"block w-full pl-10 pr-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"registration_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Date"}),e.jsxs("select",{id:"registration_date",value:o,onChange:k,className:"block w-full px-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"all_time",children:"All Time"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_90_days",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"total_orders",className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Count"}),e.jsxs("select",{id:"total_orders",value:c,onChange:S,className:"block w-full px-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"more_than_10",children:"10+ Orders"}),e.jsx("option",{value:"more_than_50",children:"50+ Orders"})]})]})]})}),e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_g,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Customers:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:E})]}),b.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[b.length," customer",b.length!==1?"s":""," selected"]})})]})}),y&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading customers..."})]})}),w&&e.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customers"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:M instanceof Error?M.message:"An error occurred"}),e.jsx("button",{onClick:()=>T(),className:"mt-3 inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})]})}),!y&&!w&&N.length===0&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_g,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No customers found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:p||o!=="all_time"||c!=="all"?"Try adjusting your filters to see more results.":"No customers have registered yet."})]})}),!y&&!w&&N.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:H,ref:$=>{$&&($.indeterminate=z)},onChange:P,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total Spend"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Loyalty Points"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map($=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:I($.user_id),onChange:()=>F($.user_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold",children:[$.first_name.charAt(0),$.last_name.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("button",{onClick:()=>q($.user_id),className:"text-sm font-medium text-blue-600 hover:text-blue-800 focus:outline-none focus:underline transition-colors",children:[$.first_name," ",$.last_name]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Joined ",V($.created_at)]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-gray-400"}),$.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx($t,{className:"w-4 h-4 mr-2 text-gray-400"}),$.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(pt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$.total_orders})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:O($.total_spend)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{className:"w-4 h-4 mr-2 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$.current_points_balance})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${D($.status)}`,children:$.status.charAt(0).toUpperCase()+$.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(X,{to:`/admin/customers/${$.user_id}`,className:"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:["View Details",e.jsx(yn,{className:"w-4 h-4 ml-1"})]})})]},$.user_id))})]})})}),se>1&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:x+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(x+m,E)})," ","of ",e.jsx("span",{className:"font-medium",children:E})," customers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:B,disabled:!le,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"hidden sm:flex items-center space-x-1",children:A().map(($,re)=>$===-1?e.jsx("span",{className:"px-3 py-2 text-gray-500",children:"..."},`ellipsis-${re}`):e.jsx("button",{onClick:()=>R($),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${G===$?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:$},$))}),e.jsxs("button",{onClick:C,disabled:!K,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx(We,{className:"w-4 h-4 ml-1"})]})]})]})})]})]})]})})},aD=()=>{const{customer_id:t}=Rs(),s=Be(),r=Ue(),{toast:n}=Xi(),a=Z(ne=>ne.authentication_state.auth_token),[i,o]=u.useState(!1),[l,c]=u.useState({}),[d,m]=u.useState(!1),[x,f]=u.useState(""),[b,h]=u.useState(""),[p,v]=u.useState(!1),[g,j]=u.useState(null),[y,w]=u.useState(""),[M,T]=u.useState(null),[N,E]=u.useState(!1),[L,k]=u.useState(""),S="https://123salama-lama-food-truck.launchpulse.ai",{data:F,isLoading:P,error:I}=ue({queryKey:["admin","customer",t],queryFn:async()=>{var U,W,oe;const be=(await Q.get(`${S}/api/admin/customers/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data;return{user:be.customer||be.user,loyalty_account:be.loyalty_account||{loyalty_account_id:"",current_points_balance:0,total_points_earned:0,total_points_redeemed:0,total_points_expired:0,referral_count:0},recent_orders:be.recent_orders||[],recent_points_transactions:be.recent_points_transactions||[],catering_inquiries:be.catering_inquiries||[],total_orders:((U=be.stats)==null?void 0:U.total_orders)||be.total_orders||0,total_spend:((W=be.stats)==null?void 0:W.total_spend)||be.total_spend||0,average_order_value:((oe=be.stats)==null?void 0:oe.average_order_value)||be.average_order_value||0}},enabled:!!t&&!!a,staleTime:3e4,refetchOnWindowFocus:!0}),H=ce({mutationFn:async ne=>(await Q.put(`${S}/api/admin/customers/${t}`,ne,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:ne=>{r.setQueryData(["admin","customer",t],be=>be&&{...be,user:ne}),o(!1),c({})}}),z=ce({mutationFn:async ne=>(await Q.post(`${S}/api/admin/customers/${t}/adjust-points`,ne,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:ne=>{r.setQueryData(["admin","customer",t],be=>be&&{...be,loyalty_account:ne}),m(!1),f(""),h(""),r.invalidateQueries({queryKey:["admin","customer",t]})}}),B=ce({mutationFn:async ne=>(await Q.put(`${S}/api/admin/customers/${t}/status`,ne,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:ne=>{r.setQueryData(["admin","customer",t],be=>be&&{...be,user:{...be.user,status:ne.status}}),r.invalidateQueries({queryKey:["admin","customer",t]}),r.invalidateQueries({queryKey:["admin","customers"]}),v(!1),j(null),w(""),T(null),n({title:ne.status==="suspended"?"Account Suspended":"Account Activated",description:ne.status==="suspended"?"The customer account has been suspended. They will no longer be able to log in or place orders.":"The customer account has been activated. They can now log in and place orders.",variant:ne.status==="suspended"?"destructive":"default"})},onError:ne=>{var U,W;console.error("Status update error:",ne);let be="Failed to update account status. Please try again.";Q.isAxiosError(ne)&&((W=(U=ne.response)==null?void 0:U.data)!=null&&W.message)&&(be=ne.response.data.message),T(be),n({title:"Error",description:be,variant:"destructive"})}}),C=ce({mutationFn:async()=>(await Q.delete(`${S}/api/admin/customers/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s("/admin/customers")}}),R=()=>{i?c({}):F!=null&&F.user&&c({first_name:F.user.first_name,last_name:F.user.last_name,email:F.user.email,phone:F.user.phone}),o(!i)},_=()=>{l.first_name&&l.last_name&&l.email&&l.phone&&H.mutate({first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone})},q=()=>{const ne=parseInt(x);!isNaN(ne)&&b.trim()&&z.mutate({points_amount:ne,reason:b.trim()})},O=()=>{g&&y.trim()&&B.mutate({status:g==="activate"?"active":"suspended",reason:y.trim()})},V=()=>{L==="DELETE"&&C.mutate()},D=ne=>{j(ne),v(!0),T(null),w("")},G=ne=>new Date(ne).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),se=ne=>`${Number(ne).toFixed(2)}`,le=ne=>{const be={active:"bg-green-100 text-green-800 border-green-200",suspended:"bg-red-100 text-red-800 border-red-200",inactive:"bg-gray-100 text-gray-800 border-gray-200"};return be[ne]||be.inactive},K=ne=>({completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-purple-100 text-purple-800"})[ne]||"bg-gray-100 text-gray-800";if(P)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading customer profile..."})]})})});if(I||!F)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Customer Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load customer profile. The customer may not exist or you may not have permission."}),e.jsxs(X,{to:"/admin/customers",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Back to Customers"]})]})})});const{user:A,loyalty_account:$,recent_orders:re,recent_points_transactions:ve,catering_inquiries:xe,total_orders:ke,total_spend:Ce,average_order_value:Pe}=F;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(X,{to:"/admin/customers",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Back to Customers"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[A.first_name," ",A.last_name]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Customer ID: ",A.user_id]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${le(A.status)}`,children:A.status.charAt(0).toUpperCase()+A.status.slice(1)}),A.status==="active"&&e.jsx("button",{onClick:()=>D("suspend"),className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Suspend Account"}),A.status==="suspended"&&e.jsx("button",{onClick:()=>D("activate"),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"Activate Account"}),e.jsx("button",{onClick:()=>E(!0),className:"p-2 bg-gray-100 text-red-600 rounded-lg hover:bg-red-50 transition-colors",title:"Delete Account",children:e.jsx(It,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ke})]}),e.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:e.jsx(pt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spend"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:se(Ce)})]}),e.jsx("div",{className:"bg-green-100 rounded-full p-3",children:e.jsx(gn,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Order Value"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:se(Pe)})]}),e.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:e.jsx(Jt,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile"}),e.jsx("button",{onClick:R,className:"p-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors",children:i?e.jsx(Ae,{className:"w-5 h-5 text-white"}):e.jsx(Qw,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[A.profile_photo_url?e.jsx("img",{src:A.profile_photo_url,alt:`${A.first_name} ${A.last_name}`,className:"w-24 h-24 rounded-full object-cover border-4 border-orange-100"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-orange-100 flex items-center justify-center border-4 border-orange-200",children:e.jsx(cs,{className:"w-12 h-12 text-orange-600"})}),A.email_verified&&e.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 rounded-full p-1",children:e.jsx(Oe,{className:"w-5 h-5 text-white"})})]})}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:l.first_name||"",onChange:ne=>c({...l,first_name:ne.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:l.last_name||"",onChange:ne=>c({...l,last_name:ne.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l.email||"",onChange:ne=>c({...l,email:ne.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone||"",onChange:ne=>c({...l,phone:ne.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsx("button",{onClick:_,disabled:H.isPending,className:"w-full flex items-center justify-center px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50",children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Nt,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.email})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx($t,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.phone})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Mn,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:G(A.created_at)})]})]}),A.last_login_at&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ke,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Login"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:G(A.last_login_at)})]})]}),A.dietary_preferences&&A.dietary_preferences.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Dietary Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.dietary_preferences.map((ne,be)=>e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:ne},be))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Marketing Opt-in"}),e.jsx("span",{className:`text-sm font-medium ${A.marketing_opt_in?"text-green-600":"text-gray-400"}`,children:A.marketing_opt_in?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email Verified"}),e.jsx("span",{className:`text-sm font-medium ${A.email_verified?"text-green-600":"text-red-600"}`,children:A.email_verified?"Yes":"No"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:"Loyalty Account"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-purple-100 rounded-full mb-3",children:e.jsx(ka,{className:"w-10 h-10 text-purple-600"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Points Balance"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:$.current_points_balance.toLocaleString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Earned"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:$.total_points_earned.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Redeemed"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:$.total_points_redeemed.toLocaleString()})]})]}),A.referral_code&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Referral Code"}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:A.referral_code})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Rn,{className:"w-4 h-4 mr-1"}),$.referral_count," successful referrals"]})]}),e.jsxs("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:[e.jsx(Ti,{className:"w-5 h-5 mr-2"}),"Adjust Points"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"}),e.jsx(X,{to:`/admin/orders?customer_id=${A.user_id}`,className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:re.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.map(ne=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(X,{to:`/admin/orders/${ne.order_id}`,className:"text-sm font-medium text-orange-600 hover:text-orange-700",children:ne.order_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:ne.order_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K(ne.status)}`,children:ne.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:se(ne.total_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(ne.created_at)})]},ne.order_id))})]}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No orders yet"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Points Transaction History"})}),e.jsx("div",{className:"overflow-x-auto",children:ve.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ve.map(ne=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:ne.transaction_type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-medium ${ne.points_amount>=0?"text-green-600":"text-red-600"}`,children:[ne.points_amount>=0?"+":"",ne.points_amount]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ne.reason||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ne.running_balance}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(ne.created_at)})]},ne.transaction_id))})]}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No transactions yet"})]})})]}),xe.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Catering Inquiries"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:xe.map(ne=>e.jsxs(X,{to:`/admin/catering/${ne.inquiry_id}`,className:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:ne.inquiry_number}),e.jsxs("p",{className:"text-sm text-gray-900 capitalize",children:[ne.event_type," - ",ne.guest_count," guests"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:G(ne.event_date)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K(ne.status)}`,children:ne.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:G(ne.submitted_at)})]})]},ne.inquiry_id))})]})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Adjust Loyalty Points"}),e.jsx("button",{onClick:()=>{m(!1),f(""),h("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:$.current_points_balance})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Points Amount ",e.jsx("span",{className:"text-gray-500",children:"(use negative for deduction)"})]}),e.jsx("input",{type:"number",value:x,onChange:ne=>f(ne.target.value),placeholder:"e.g., 100 or -50",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsxs("select",{value:b,onChange:ne=>h(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 mb-2",children:[e.jsx("option",{value:"",children:"Select reason..."}),e.jsx("option",{value:"Compensation for service issue",children:"Compensation for service issue"}),e.jsx("option",{value:"Correction of system error",children:"Correction of system error"}),e.jsx("option",{value:"Promotional bonus",children:"Promotional bonus"}),e.jsx("option",{value:"Manual adjustment by admin",children:"Manual adjustment by admin"})]}),b==="Manual adjustment by admin"&&e.jsx("input",{type:"text",placeholder:"Additional details...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",onChange:ne=>h(`Manual adjustment: ${ne.target.value}`)})]}),x&&!isNaN(parseInt(x))&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"New balance after adjustment:"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:$.current_points_balance+parseInt(x)})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{m(!1),f(""),h("")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:!x||!b||z.isPending,className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z.isPending?"Adjusting...":"Confirm Adjustment"})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g==="suspend"?"Suspend Account":"Activate Account"}),e.jsx("button",{onClick:()=>{v(!1),j(null),w(""),T(null)},disabled:B.isPending,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:`rounded-lg p-4 ${g==="suspend"?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:`w-5 h-5 mt-0.5 mr-3 ${g==="suspend"?"text-red-600":"text-green-600"}`}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-medium ${g==="suspend"?"text-red-900":"text-green-900"}`,children:g==="suspend"?"This will prevent the customer from logging in and placing orders.":"This will restore the customer's ability to login and place orders."})})]})}),M&&e.jsx("div",{className:"rounded-lg p-4 bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"w-5 h-5 mt-0.5 mr-3 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700",children:M})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason (required)"}),e.jsx("textarea",{value:y,onChange:ne=>{w(ne.target.value),T(null)},placeholder:"Enter reason for status change...",rows:3,disabled:B.isPending,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{v(!1),j(null),w(""),T(null)},disabled:B.isPending,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:!y.trim()||B.isPending,className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center ${g==="suspend"?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:B.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):`Confirm ${g==="suspend"?"Suspend":"Activate"}`})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Delete Customer Account"}),e.jsx("button",{onClick:()=>{E(!1),k("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ts,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-2",children:"GDPR-Compliant Account Deletion"}),e.jsxs("ul",{className:"text-xs text-red-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Customer data will be anonymized"}),e.jsx("li",{children:"Order history will be retained for legal compliance"}),e.jsx("li",{children:"Personal identifiable information will be removed"}),e.jsx("li",{children:"This action cannot be undone"})]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-bold text-red-600",children:"DELETE"})," to confirm"]}),e.jsx("input",{type:"text",value:L,onChange:ne=>k(ne.target.value),placeholder:"DELETE",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{E(!1),k("")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:L!=="DELETE"||C.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?"Deleting...":"Delete Account Permanently"})]})]})})]})},iD=()=>e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Staff management functionality coming soon..."})]}),Bm={staff_basic:{name:"Staff - Basic",permissions:{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}},staff_advanced:{name:"Staff - Advanced",permissions:{view_orders:!0,update_order_status:!0,view_stock:!0,update_stock:!0,view_reports:!1,manage_customers:!1}},manager:{name:"Manager - Full Access",permissions:{view_orders:!0,update_order_status:!0,view_stock:!0,update_stock:!0,view_reports:!0,manage_customers:!0}}},oD=async(t,s)=>(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,lD=async(t,s)=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,cD=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,dD=()=>{var L,k;const t=Be(),[s]=ct(),r=s.get("staff_id"),n=!!r,a=Z(S=>S.authentication_state.auth_token),[i,o]=u.useState({email:"",password:"",first_name:"",last_name:"",phone:"",role:"staff",status:"active",staff_permissions:{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}}),[l,c]=u.useState(!0),[d,m]=u.useState({}),[x,f]=u.useState(!1),{data:b,isLoading:h,error:p}=ue({queryKey:["staff",r],queryFn:()=>oD(r,a),enabled:n&&!!r&&!!a,staleTime:0});u.useEffect(()=>{b&&n&&o({email:b.email,password:"",first_name:b.first_name,last_name:b.last_name,phone:b.phone,role:b.role,status:b.status,staff_permissions:b.staff_permissions||{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}})},[b,n]);const v=ce({mutationFn:S=>lD(S,a),onSuccess:S=>{t(`/admin/staff?created=${S.user_id}`)},onError:S=>{var P,I;const F=((I=(P=S.response)==null?void 0:P.data)==null?void 0:I.message)||"Failed to create staff account";m({submit:F})}}),g=ce({mutationFn:S=>cD(r,S,a),onSuccess:S=>{t(`/admin/staff?updated=${S.user_id}`)},onError:S=>{var P,I;const F=((I=(P=S.response)==null?void 0:P.data)==null?void 0:I.message)||"Failed to update staff account";m({submit:F})}}),j=u.useCallback(()=>{const S={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(S.email="Invalid email format"):S.email="Email is required",n||(i.password?i.password.length<8&&(S.password="Password must be at least 8 characters"):S.password="Password is required"),i.first_name?i.first_name.length>100&&(S.first_name="First name must be less than 100 characters"):S.first_name="First name is required",i.last_name?i.last_name.length>100&&(S.last_name="Last name must be less than 100 characters"):S.last_name="Last name is required",i.phone?(i.phone.length<10||i.phone.length>20)&&(S.phone="Phone number must be between 10 and 20 characters"):S.phone="Phone number is required",m(S),Object.keys(S).length===0},[i,n]),y=S=>{if(S.preventDefault(),!!j())if(n){const{email:F,password:P,...I}=i;g.mutate(I)}else v.mutate(i)},w=(S,F)=>{o(P=>({...P,[S]:F})),d[S]&&m(P=>{const I={...P};return delete I[S],I})},M=S=>{o(F=>({...F,staff_permissions:{...F.staff_permissions,[S]:!F.staff_permissions[S]}}))},T=S=>{o(F=>({...F,staff_permissions:Bm[S].permissions}))},N=()=>{const F="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let P="";for(let I=0;I<12;I++)P+=F.charAt(Math.floor(Math.random()*F.length));w("password",P),f(!0)},E=v.isPending||g.isPending||h;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(X,{to:"/admin/dashboard",className:"hover:text-gray-700 transition-colors",children:"Dashboard"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(X,{to:"/admin/staff",className:"hover:text-gray-700 transition-colors",children:"Staff"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:n?"Edit Staff Member":"Create Staff Member"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n?"Edit Staff Member":"Create New Staff Member"}),e.jsx("p",{className:"mt-2 text-gray-600",children:n?"Update staff member information and permissions":"Add a new staff member with role and permissions"})]})})]}),h&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading staff data..."})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to load staff data"}),e.jsx("p",{className:"text-red-700 mt-1 text-sm",children:((k=(L=p==null?void 0:p.response)==null?void 0:L.data)==null?void 0:k.message)||"An error occurred while loading staff data"})]})]})}),!h&&e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[d.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-red-800 font-semibold",children:"Error"}),e.jsx("p",{className:"text-red-700 mt-1 text-sm",children:d.submit})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Personal Information"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",value:i.email,onChange:S=>w("email",S.target.value),onBlur:j,disabled:n,className:`w-full px-4 py-3 rounded-lg border-2 ${d.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all ${n?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,placeholder:"staff@salamalama.ie"}),d.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.email}),n&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Email cannot be changed after account creation"})]}),!n&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password *"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:x?"text":"password",id:"password",value:i.password,onChange:S=>w("password",S.target.value),onBlur:j,className:`w-full px-4 py-3 rounded-lg border-2 ${d.password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"Minimum 8 characters"}),e.jsx("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:x?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("button",{type:"button",onClick:N,className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Generate"})]}),d.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.password}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Password must be at least 8 characters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",id:"first_name",value:i.first_name,onChange:S=>w("first_name",S.target.value),onBlur:j,className:`w-full px-4 py-3 rounded-lg border-2 ${d.first_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"John"}),d.first_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",id:"last_name",value:i.last_name,onChange:S=>w("last_name",S.target.value),onBlur:j,className:`w-full px-4 py-3 rounded-lg border-2 ${d.last_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"Smith"}),d.last_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",id:"phone",value:i.phone,onChange:S=>w("phone",S.target.value),onBlur:j,className:`w-full px-4 py-3 rounded-lg border-2 ${d.phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"+353 1 234 5678"}),d.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Role & Status"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-900 mb-2",children:"Role *"}),e.jsxs("select",{id:"role",value:i.role,onChange:S=>w("role",S.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"manager",children:"Manager"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i.role==="staff"?"Basic operational access":"Advanced access with management capabilities"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-900",children:"Account Status"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i.status==="active"?"Staff member can log in and access the system":"Staff member cannot access the system"})]}),e.jsx("button",{type:"button",onClick:()=>w("status",i.status==="active"?"inactive":"active"),className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${i.status==="active"?"bg-green-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${i.status==="active"?"translate-x-7":"translate-x-1"}`})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Permissions"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Quick Permission Templates"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Bm).map(S=>e.jsx("button",{type:"button",onClick:()=>T(S),className:"px-4 py-2 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-lg font-medium transition-colors border border-orange-200",children:Bm[S].name},S))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Individual Permissions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_orders,onChange:()=>M("view_orders"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Orders"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to view order queue and details"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.update_order_status,onChange:()=>M("update_order_status"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Update Order Status"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Change order status (preparing, ready, etc.)"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_stock,onChange:()=>M("view_stock"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Stock"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to view inventory levels"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.update_stock,onChange:()=>M("update_stock"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Update Stock"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Adjust inventory quantities"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_reports,onChange:()=>M("view_reports"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Reports"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to daily/weekly sales reports"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.manage_customers,onChange:()=>M("manage_customers"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Manage Customers"}),e.jsx("span",{className:"text-sm text-gray-500",children:"View and modify customer information"})]})]})})]})]})]})]}),!n&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Options"})}),e.jsx("div",{className:"p-6",children:e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:S=>c(S.target.checked),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Send Welcome Email"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Staff member will receive login credentials via email"})]})]})})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t-2 border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/admin/staff"),disabled:E,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:E,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"Updating...":"Creating..."]}):n?"Update Staff Member":"Create Staff Member"})]})]})]})})})};function uD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const qm=u.forwardRef(uD);function mD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const xD=u.forwardRef(mD);function hD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const pD=u.forwardRef(hD);function fD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Wy=u.forwardRef(fD);function gD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Um=u.forwardRef(gD);function yD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const U1=u.forwardRef(yD);function bD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const W1=u.forwardRef(bD);function vD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Eh=u.forwardRef(vD);function jD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"}))}const Vy=u.forwardRef(jD);function wD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const jo=u.forwardRef(wD);function ND({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Hy=u.forwardRef(ND);function _D({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const V1=u.forwardRef(_D);function kD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const CD=u.forwardRef(kD);function SD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const ED=u.forwardRef(SD);function PD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Qy=u.forwardRef(PD);function AD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Ky=u.forwardRef(AD);function FD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const TD=u.forwardRef(FD);function MD({title:t,titleId:s,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},r),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Yy=u.forwardRef(MD),RD=async(t,s)=>{const r=new URLSearchParams;return s.status&&s.status!=="all"&&r.append("status",s.status),s.event_type&&s.event_type!=="all"&&r.append("event_type",s.event_type),s.date_from&&r.append("date_from",s.date_from),s.date_to&&r.append("date_to",s.date_to),s.limit&&r.append("limit",s.limit.toString()),s.offset&&r.append("offset",s.offset.toString()),(await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries${r.toString()?`?${r.toString()}`:""}`,{headers:{Authorization:`Bearer ${t}`}})).data},LD=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,Gy=t=>({new:"bg-yellow-100 text-yellow-800 border-yellow-200",in_progress:"bg-blue-100 text-blue-800 border-blue-200",quoted:"bg-purple-100 text-purple-800 border-purple-200",confirmed:"bg-green-100 text-green-800 border-green-200",completed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",Xy=t=>({corporate:"Corporate",wedding:"Wedding",birthday:"Birthday",meeting:"Meeting",other:"Other"})[t]||t,Jy=t=>new Date(t).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),Zy=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),DD=()=>{const t=Be(),[s,r]=ct(),n=Ue(),a=Z(D=>D.authentication_state.auth_token),[i,o]=u.useState(s.get("status")||"all"),[l,c]=u.useState(s.get("event_type")||"all"),[d,m]=u.useState(s.get("date_range")||"all"),[x,f]=u.useState(1),[b,h]=u.useState([]),[p,v]=u.useState(""),g=20,y=(D=>{const G=new Date;let se,le;switch(D){case"next_month":se=G,le=new Date(G.getFullYear(),G.getMonth()+1,G.getDate());break;case"next_3_months":se=G,le=new Date(G.getFullYear(),G.getMonth()+3,G.getDate());break;default:return{}}return{date_from:se==null?void 0:se.toISOString().split("T")[0],date_to:le==null?void 0:le.toISOString().split("T")[0]}})(d),{data:w,isLoading:M,error:T,refetch:N}=ue({queryKey:["admin-catering-inquiries",i,l,d,x],queryFn:()=>RD(a,{status:i!=="all"?i:void 0,event_type:l!=="all"?l:void 0,date_from:y.date_from,date_to:y.date_to,limit:g,offset:(x-1)*g}),enabled:!!a,staleTime:3e4,refetchOnWindowFocus:!1}),E=(w==null?void 0:w.inquiries)||[],L=(w==null?void 0:w.total)||E.length,k=Math.ceil(L/g),S=E.filter(D=>D.status==="new").length,F=ce({mutationFn:({inquiry_id:D,payload:G})=>LD(a,D,G),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-catering-inquiries"]})}});u.useEffect(()=>{const D=new URLSearchParams;i!=="all"&&D.set("status",i),l!=="all"&&D.set("event_type",l),d!=="all"&&D.set("date_range",d),r(D)},[i,l,d,r]);const P=D=>{o(D),f(1)},I=D=>{c(D),f(1)},H=D=>{m(D),f(1)},z=D=>{h(G=>G.includes(D)?G.filter(se=>se!==D):[...G,D])},B=()=>{b.length===E.length?h([]):h(E.map(D=>D.inquiry_id))},C=async()=>{if(!(!p||b.length===0||!window.confirm(`Are you sure you want to update ${b.length} inquiries to status: ${p}?`)))try{await Promise.all(b.map(G=>F.mutateAsync({inquiry_id:G,payload:{status:p}}))),h([]),v("")}catch(G){console.error("Bulk update failed:",G)}},R=async(D,G)=>{try{await F.mutateAsync({inquiry_id:D,payload:{status:G}})}catch(se){console.error("Status update failed:",se)}},_=D=>{t(`/admin/catering/${D}`)},q=()=>{alert(`Export functionality requires backend endpoint implementation.
Endpoint: GET /api/admin/catering/inquiries/export`)},O=()=>{x>1&&f(x-1)},V=()=>{x<k&&f(x+1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catering Inquiries"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage catering inquiries and generate quotes"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[S>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx("span",{className:"mr-1",children:S})," New"]}),e.jsxs("button",{onClick:q,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(xD,{className:"h-5 w-5 mr-2 text-gray-500"}),"Export"]})]})]})})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(V1,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status-filter",value:i,onChange:D=>P(D.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"event-type-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),e.jsxs("select",{id:"event-type-filter",value:l,onChange:D=>I(D.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"corporate",children:"Corporate"}),e.jsx("option",{value:"wedding",children:"Wedding"}),e.jsx("option",{value:"birthday",children:"Birthday"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-range-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),e.jsxs("select",{id:"date-range-filter",value:d,onChange:D=>H(D.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"next_month",children:"Next Month"}),e.jsx("option",{value:"next_3_months",children:"Next 3 Months"})]})]})]})]}),b.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[b.length," inquiries selected"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:p,onChange:D=>v(D.target.value),className:"block w-48 px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select action..."}),e.jsx("option",{value:"in_progress",children:"Mark as In Progress"}),e.jsx("option",{value:"cancelled",children:"Cancel Inquiries"})]}),e.jsx("button",{onClick:C,disabled:!p||F.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:F.isPending?"Applying...":"Apply"})]})]})}),M?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading inquiries..."})]})}):T?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(TD,{className:"h-12 w-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Failed to load inquiries"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:T instanceof Error?T.message:"Unknown error"}),e.jsx("button",{onClick:()=>N(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Retry"})]})}):E.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Um,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No inquiries found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:b.length===E.length&&E.length>0,onChange:B,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry #"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guests"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>_(D.inquiry_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:G=>G.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:b.includes(D.inquiry_id),onChange:()=>z(D.inquiry_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:D.inquiry_number})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.contact_name}),D.company_name&&e.jsx("div",{className:"text-gray-500",children:D.company_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Wy,{className:"h-4 w-4 text-gray-400 mr-2"}),Xy(D.event_type)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Um,{className:"h-4 w-4 text-gray-400 mr-2"}),Jy(D.event_date)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Qy,{className:"h-4 w-4 text-gray-400 mr-2"}),D.guest_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:G=>G.stopPropagation(),children:e.jsxs("select",{value:D.status,onChange:G=>R(D.inquiry_id,G.target.value),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${Gy(D.status)} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Eh,{className:"h-4 w-4 mr-1"}),Zy(D.submitted_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:G=>G.stopPropagation(),children:e.jsxs("button",{onClick:()=>_(D.inquiry_id),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Hy,{className:"h-4 w-4 mr-1"}),"View"]})})]},D.inquiry_id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:E.map(D=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:b.includes(D.inquiry_id),onChange:()=>z(D.inquiry_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:D.inquiry_number}),e.jsx("div",{className:`inline-flex items-center ml-2 px-2 py-1 rounded-full text-xs font-medium border ${Gy(D.status)}`,children:D.status.replace("_"," ")})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:D.contact_name}),D.company_name&&e.jsxs("span",{className:"text-gray-500",children:[" ",D.company_name]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Wy,{className:"h-4 w-4 text-gray-400 mr-2"}),Xy(D.event_type)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Um,{className:"h-4 w-4 text-gray-400 mr-2"}),Jy(D.event_date)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Qy,{className:"h-4 w-4 text-gray-400 mr-2"}),D.guest_count," guests"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Eh,{className:"h-4 w-4 mr-1"}),"Submitted ",Zy(D.submitted_at)]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-200",children:[e.jsxs("select",{value:D.status,onChange:G=>R(D.inquiry_id,G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("button",{onClick:()=>_(D.inquiry_id),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Hy,{className:"h-4 w-4 mr-1"}),"View"]})]})]},D.inquiry_id))}),k>1&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:O,disabled:x===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:V,disabled:x===k,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(x-1)*g+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(x*g,L)})," ","of"," ",e.jsx("span",{className:"font-medium",children:L})," ","inquiries"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:O,disabled:x===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(U1,{className:"h-5 w-5"})]}),Array.from({length:k},(D,G)=>G+1).map(D=>e.jsx("button",{onClick:()=>f(D),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${D===x?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:D},D)),e.jsxs("button",{onClick:V,disabled:x===k,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(W1,{className:"h-5 w-5"})]})]})})]})]})]})]})})]})})},OD=async(t,s)=>{const r=await Q.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}`,{headers:{Authorization:`Bearer ${s}`}}),{inquiry:n,quotes:a}=r.data;return{...n,quotes:a}},$D=async(t,s,r)=>(await Q.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,ID=async(t,s,r)=>{var f,b,h,p,v;if(!s.line_items||s.line_items.length===0)throw new Error("Quote must have at least one line item");const n=s.line_items.map(g=>({item:String(g.item||""),quantity:Number(g.quantity)||0,unit_price:Number(g.unit_price)||0,total:Number(g.total)||0})),a=(f=s.additional_fees)!=null&&f.length?s.additional_fees.map(g=>({name:String(g.name||""),amount:Number(g.amount)||0})):null,i=n.reduce((g,j)=>g+Number(j.total),0),o=(a==null?void 0:a.reduce((g,j)=>g+Number(j.amount),0))||0,l=(i+o)*.23,c=i+o+l,d=s.valid_until||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],m=`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}/quote`,x={line_items:n,additional_fees:a,subtotal:Number(i.toFixed(2)),tax_amount:Number(l.toFixed(2)),grand_total:Number(c.toFixed(2)),valid_until:d,terms:s.terms||null};console.log(" Generate Quote Request:",{url:m,method:"POST",headers:{Authorization:`Bearer ${r==null?void 0:r.substring(0,20)}...`,"Content-Type":"application/json"},payload:x});try{const g=await Q.post(m,x,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},timeout:3e4});return console.log(" Generate Quote Response:",g.data),g.data}catch(g){throw console.error(" Generate Quote Error:",{message:g.message,status:(b=g.response)==null?void 0:b.status,statusText:(h=g.response)==null?void 0:h.statusText,data:(p=g.response)==null?void 0:p.data,headers:(v=g.response)==null?void 0:v.headers}),g}},zD=async(t,s)=>(await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/quotes/${t}/send`,{},{headers:{Authorization:`Bearer ${s}`}})).data,BD=()=>{const{inquiry_id:t}=Rs(),s=Ue(),{toast:r}=Xi(),n=Z(_=>_.authentication_state.auth_token),[a,i]=u.useState(""),[o,l]=u.useState(""),[c,d]=u.useState(!1),[m,x]=u.useState({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null}),[f,b]=u.useState(null),{data:h,isLoading:p,isError:v,error:g}=ue({queryKey:["admin","catering","inquiry",t],queryFn:()=>OD(t,n),enabled:!!t&&!!n,staleTime:3e4,retry:1});u.useEffect(()=>{h&&(i(h.admin_notes||""),l(h.status))},[h]);const j=ce({mutationFn:_=>$D(t,_,n),onSuccess:()=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]}),r({title:"Changes Saved",description:"Inquiry status and notes have been updated successfully.",variant:"default"})},onError:_=>{var O,V;console.error("Failed to update inquiry:",_);const q=((V=(O=_==null?void 0:_.response)==null?void 0:O.data)==null?void 0:V.message)||(_==null?void 0:_.message)||"Failed to update inquiry";r({title:"Failed to Save Changes",description:q,variant:"destructive"})}}),y=ce({mutationFn:_=>ID(t,_,n),onSuccess:_=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]}),d(!1),x({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null}),r({title:"Quote Generated Successfully",description:`Quote ${_.quote_number} has been created and the inquiry has been marked as quoted.`,variant:"default"}),window.scrollTo({top:0,behavior:"smooth"})},onError:_=>{var $,re,ve,xe,ke,Ce,Pe,ne,be,U;console.error(" Failed to generate quote - Full error:",_),console.error(" Error response:",_==null?void 0:_.response),console.error(" Error request:",_==null?void 0:_.request);const q=(($=_==null?void 0:_.response)==null?void 0:$.status)||"Unknown",O=((re=_==null?void 0:_.response)==null?void 0:re.statusText)||"",V=(ve=_==null?void 0:_.response)==null?void 0:ve.data,D=(xe=_==null?void 0:_.response)==null?void 0:xe.headers,G=(D==null?void 0:D["cf-ray"])||(D==null?void 0:D["CF-RAY"]),se=G||typeof V=="string"&&V.includes("cloudflare"),le=`Generate Quote Error - Debug Information


Request Details:
- URL: ${((ke=_==null?void 0:_.config)==null?void 0:ke.url)||"N/A"}
- Method: ${((Pe=(Ce=_==null?void 0:_.config)==null?void 0:Ce.method)==null?void 0:Pe.toUpperCase())||"N/A"}
- Timestamp: ${new Date().toISOString()}

Response Details:
- Status: ${q} ${O}
- Cloudflare Detected: ${se?"Yes":"No"}
- CF-Ray ID: ${G||"N/A"}
- Response Type: ${typeof V}

Error Details:
- Error Message: ${(_==null?void 0:_.message)||"N/A"}
- Error Code: ${(_==null?void 0:_.code)||"N/A"}

Response Body (first 1000 chars):
${typeof V=="string"?V.substring(0,1e3):((ne=JSON.stringify(V,null,2))==null?void 0:ne.substring(0,1e3))||"N/A"}

Headers:
${JSON.stringify(D,null,2)||"N/A"}


To resolve this issue:
${q===530||q==="530"?`
1. Verify the backend server is running and accessible
2. Check Cloudflare DNS settings (if using Cloudflare)
3. Verify SSL/TLS certificates are valid
4. Check firewall rules and origin IP settings
5. Review backend server logs for errors
`:`
1. Check the error message above
2. Verify the request payload is valid
3. Check backend server logs
4. Ensure authentication token is valid
`}`;b(le),console.error(" Full Debug Info:",le);let K="",A="Failed to Generate Quote";q===530||q==="530"?se?(A="Connection Error (530)",K=`Cloudflare cannot reach the backend server. Possible causes:

 Backend server is down or unreachable
 DNS misconfiguration
 SSL/TLS certificate issues
 Origin IP address changed

CF-Ray: ${G||"N/A"}

Click "Copy Debug Info" below to get detailed diagnostic information.`):(A="Server Error (530)",K=`The server returned an unexpected 530 error. This is not a standard HTTP status code.

Click "Copy Debug Info" below for more details.`):K=((U=(be=_==null?void 0:_.response)==null?void 0:be.data)==null?void 0:U.message)||(_==null?void 0:_.message)||`HTTP ${q}: ${O||"Unknown error"}`,r({title:A,description:K,variant:"destructive",duration:15e3})}}),w=ce({mutationFn:_=>zD(_,n),onSuccess:()=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]}),r({title:"Quote Sent",description:"Quote has been sent to the customer via email.",variant:"default"})},onError:_=>{var O,V;console.error("Failed to send quote:",_);const q=((V=(O=_==null?void 0:_.response)==null?void 0:O.data)==null?void 0:V.message)||(_==null?void 0:_.message)||"Failed to send quote";r({title:"Failed to Send Quote",description:q,variant:"destructive"})}}),M=_=>{l(_)},T=()=>{j.mutate({status:o,admin_notes:a||null})},N=()=>{x(_=>({..._,line_items:[..._.line_items,{item:"",quantity:1,unit_price:0,total:0}]}))},E=(_,q,O)=>{x(V=>{const D=[...V.line_items];return D[_]={...D[_],[q]:O},(q==="quantity"||q==="unit_price")&&(D[_].total=D[_].quantity*D[_].unit_price),P({...V,line_items:D})})},L=_=>{x(q=>{const O=q.line_items.filter((V,D)=>D!==_);return P({...q,line_items:O})})},k=()=>{x(_=>({..._,additional_fees:[..._.additional_fees||[],{name:"",amount:0}]}))},S=(_,q,O)=>{x(V=>{const D=[...V.additional_fees||[]];return D[_]={...D[_],[q]:O},P({...V,additional_fees:D})})},F=_=>{x(q=>{const O=(q.additional_fees||[]).filter((V,D)=>D!==_);return P({...q,additional_fees:O})})},P=_=>{const q=_.line_items.reduce((G,se)=>G+se.total,0),O=(_.additional_fees||[]).reduce((G,se)=>G+Number(se.amount),0),V=(q+O)*.23,D=q+O+V;return{..._,subtotal:q,tax_amount:V,grand_total:D}},I=()=>{if(m.line_items.length===0){r({title:"Validation Error",description:"Please add at least one line item to the quote.",variant:"destructive"});return}if(m.line_items.filter(V=>!V.item.trim()||V.quantity<=0||V.unit_price<=0).length>0){r({title:"Validation Error",description:"All line items must have a name, quantity greater than 0, and a unit price greater than 0.",variant:"destructive"});return}if(!m.valid_until){r({title:"Validation Error",description:"Please set a valid until date for the quote.",variant:"destructive"});return}const q=new Date(m.valid_until),O=new Date;if(O.setHours(0,0,0,0),q<O){r({title:"Validation Error",description:"Valid until date must be today or in the future.",variant:"destructive"});return}y.mutate({line_items:m.line_items,additional_fees:m.additional_fees,valid_until:m.valid_until,terms:m.terms})},H=_=>{switch(_){case"new":return"bg-gray-100 text-gray-800 border-gray-300";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"quoted":return"bg-blue-100 text-blue-800 border-blue-300";case"confirmed":return"bg-green-100 text-green-800 border-green-300";case"completed":return"bg-green-200 text-green-900 border-green-400";case"cancelled":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},z=_=>({corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:"Other"})[_]||_,B=_=>new Date(_).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}),C=_=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(_);if(p)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"h-12 w-12 animate-spin text-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading catering inquiry..."})]})})});if(v)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx(me,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Inquiry"}),e.jsx("p",{className:"text-gray-600 mb-6",children:g instanceof Error?g.message:"Failed to load inquiry details"}),e.jsxs(X,{to:"/admin/catering",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(Fi,{className:"h-5 w-5 mr-2"}),"Back to Inquiries"]})]})})})});if(!h)return null;const R=h.quotes&&h.quotes.length>0?h.quotes[0]:null;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(X,{to:"/admin/catering",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Fi,{className:"h-5 w-5 mr-1"}),"Back to Inquiries"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Inquiry #",h.inquiry_number]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${H(h.status)}`,children:h.status.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["Submitted ",B(h.submitted_at)]})]})]}),e.jsx("button",{onClick:T,disabled:j.isPending,className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Iw,{className:"h-6 w-6 mr-2 text-orange-600"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Contact Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:h.contact_name})]}),h.company_name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Company"}),e.jsx("p",{className:"text-gray-900 font-medium",children:h.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${h.contact_email}`,className:"text-orange-600 hover:text-orange-700 flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 mr-1"}),h.contact_email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${h.contact_phone}`,className:"text-orange-600 hover:text-orange-700 flex items-center",children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),h.contact_phone]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Mn,{className:"h-6 w-6 mr-2 text-orange-600"}),"Event Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Type"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[z(h.event_type),h.event_type_other&&` - ${h.event_type_other}`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Date"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(Mn,{className:"h-4 w-4 mr-1 text-gray-400"}),B(h.event_date)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Time"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1 text-gray-400"}),h.event_start_time," - ",h.event_end_time]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Guest Count"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(Rn,{className:"h-4 w-4 mr-1 text-gray-400"}),h.guest_count_min&&h.guest_count_max?`${h.guest_count_min} - ${h.guest_count_max}`:h.guest_count]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Location"}),e.jsxs("p",{className:"text-gray-900 flex items-start",children:[e.jsx(gt,{className:"h-4 w-4 mr-1 text-gray-400 mt-0.5"}),e.jsxs("span",{children:[h.event_location_address,e.jsx("br",{}),h.event_location_city,", ",h.event_location_postal_code,e.jsx("br",{}),e.jsxs("span",{className:"text-gray-500 text-sm capitalize",children:["(",h.event_location_type,")"]})]})]})]}),h.dietary_requirements&&h.dietary_requirements.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Dietary Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.dietary_requirements.map((_,q)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:_},q))})]}),h.dietary_notes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Dietary Notes"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3",children:h.dietary_notes})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(os,{className:"h-6 w-6 mr-2 text-orange-600"}),"Menu Preferences"]}),e.jsxs("div",{className:"space-y-4",children:[h.preferred_package&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Preferred Package"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:h.preferred_package})]}),h.budget_range&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Budget Range"}),e.jsx("p",{className:"text-gray-900 font-medium",children:h.budget_range})]}),h.menu_preferences&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Menu Preferences"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:h.menu_preferences})]}),h.additional_details&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Additional Details"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:h.additional_details})]})]})]}),R&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(os,{className:"h-6 w-6 mr-2 text-orange-600"}),"Quote #",R.quote_number]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[R.quote_pdf_url&&e.jsxs("a",{href:R.quote_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),!R.sent_at&&e.jsx("button",{onClick:()=>w.mutate(R.quote_id),disabled:w.isPending,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hw,{className:"h-4 w-4 mr-2"}),"Send to Customer"]})})]})]}),R.sent_at&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4 flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsxs("span",{className:"text-green-800 text-sm font-medium",children:["Sent to customer on ",B(R.sent_at)]})]}),R.accepted_at&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4 flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-blue-800 text-sm font-medium",children:["Accepted by customer on ",B(R.accepted_at)]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.line_items.map((_,q)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:_.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:_.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:C(_.unit_price)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:C(_.total)})]},q))})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(R.subtotal)})]}),R.additional_fees&&R.additional_fees.length>0&&e.jsx(e.Fragment,{children:R.additional_fees.map((_,q)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:_.name}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(_.amount)})]},q))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(R.tax_amount)})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:C(R.grand_total)})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Valid Until:"})," ",B(R.valid_until)]}),R.terms&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Terms & Conditions:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:R.terms})]})]})]}),!R&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Generate Quote"}),!c&&e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Create Quote"]})]}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Line Items"}),e.jsxs("button",{onClick:N,className:"inline-flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),m.line_items.length===0?e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"No line items added yet"})}):e.jsx("div",{className:"space-y-3",children:m.line_items.map((_,q)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",placeholder:"Item name",value:_.item,onChange:O=>E(q,"item",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Qty",value:_.quantity,onChange:O=>E(q,"quantity",Number(O.target.value)),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Price",value:_.unit_price,onChange:O=>E(q,"unit_price",Number(O.target.value)),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2 flex items-center justify-end",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:C(_.total)})}),e.jsx("div",{className:"col-span-1 flex items-center justify-end",children:e.jsx("button",{onClick:()=>L(q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})})]},q))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Fees"}),e.jsxs("button",{onClick:k,className:"inline-flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),"Add Fee"]})]}),m.additional_fees&&m.additional_fees.length>0&&e.jsx("div",{className:"space-y-3",children:m.additional_fees.map((_,q)=>e.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"text",placeholder:"Fee name (e.g., Service Fee)",value:_.name,onChange:O=>S(q,"name",O.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("input",{type:"number",placeholder:"Amount",value:_.amount,onChange:O=>S(q,"amount",Number(O.target.value)),min:"0",step:"0.01",className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>F(q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]},q))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(m.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(m.tax_amount)})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"font-bold text-gray-900",children:C(m.grand_total)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valid Until"}),e.jsx("input",{type:"date",value:m.valid_until,onChange:_=>x(q=>({...q,valid_until:_.target.value})),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),e.jsx("textarea",{value:m.terms||"",onChange:_=>x(q=>({...q,terms:_.target.value})),rows:4,placeholder:"Enter quote terms and conditions...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{d(!1),x({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null}),b(null)},className:"px-6 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:y.isPending,className:"inline-flex items-center px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):"Generate Quote"})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"An error occurred while generating the quote"}),e.jsx("p",{className:"text-xs text-red-600",children:"Click the button to copy diagnostic information for debugging"})]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(f),r({title:"Debug Info Copied",description:"Diagnostic information has been copied to your clipboard.",variant:"default"})},className:"ml-4 inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Debug Info"]})]})})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Inquiry Status"}),e.jsxs("select",{value:o,onChange:_=>M(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent font-medium",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Admin Notes"}),e.jsx("textarea",{value:a,onChange:_=>i(_.target.value),rows:6,placeholder:"Add internal notes about this inquiry...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These notes are only visible to admin and staff"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Info"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Inquiry ID"}),e.jsx("span",{className:"text-gray-900 font-medium",children:h.inquiry_id.substring(0,8)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted"}),e.jsx("span",{className:"text-gray-900 font-medium",children:B(h.submitted_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated"}),e.jsx("span",{className:"text-gray-900 font-medium",children:B(h.updated_at)})]}),h.user_id&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer Account"}),e.jsx(X,{to:`/admin/customers/${h.user_id}`,className:"text-orange-600 hover:text-orange-700 font-medium",children:"View Profile"})]})]})]})]})]})]})})})},qD=()=>{const[t,s]=ct(),r=Z(O=>O.authentication_state.auth_token),n=Ue(),[a,i]=u.useState(t.get("status")||"all"),[o,l]=u.useState(t.get("date_range")||"all_time"),[c,d]=u.useState(t.get("customer_search")||""),[m,x]=u.useState(1),[f,b]=u.useState(!1),[h,p]=u.useState({user_id:"",customer_name:"",customer_email:"",customer_phone:"",customer_address:null,line_items:[],subtotal:0,discount_amount:0,delivery_fee:null,tax_amount:0,grand_total:0,issue_date:new Date().toISOString().split("T")[0],due_date:null,notes:null}),[v,g]=u.useState({item:"",quantity:1,unit_price:0,total:0}),j=20,y=(m-1)*j,w=O=>{const V=new Date,D=G=>G.toISOString().split("T")[0];switch(O){case"today":return{date_from:D(V),date_to:D(V)};case"this_week":{const G=new Date(V);return G.setDate(V.getDate()-V.getDay()),{date_from:D(G),date_to:D(V)}}case"this_month":{const G=new Date(V.getFullYear(),V.getMonth(),1);return{date_from:D(G),date_to:D(V)}}case"last_month":{const G=new Date(V.getFullYear(),V.getMonth()-1,1),se=new Date(V.getFullYear(),V.getMonth(),0);return{date_from:D(G),date_to:D(se)}}case"all_time":default:return{}}},M=O=>`${Number(O||0).toFixed(2)}`,T=O=>new Date(O).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),N=O=>{const V={paid:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",overdue:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"},D={paid:"Paid",pending:"Pending",overdue:"Overdue",cancelled:"Cancelled"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${V[O]||V.pending}`,children:D[O]||O})},E=()=>{p({user_id:"",customer_name:"",customer_email:"",customer_phone:"",customer_address:null,line_items:[],subtotal:0,discount_amount:0,delivery_fee:null,tax_amount:0,grand_total:0,issue_date:new Date().toISOString().split("T")[0],due_date:null,notes:null}),g({item:"",quantity:1,unit_price:0,total:0})},L=async()=>{const{date_from:O,date_to:V}=w(o),D={limit:j,offset:y};return a!=="all"&&(D.status=a),O&&(D.date_from=O),V&&(D.date_to=V),c&&(D.query=c),(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",{params:D,headers:{Authorization:`Bearer ${r}`}})).data},{data:k,isLoading:S,error:F,refetch:P}=ue({queryKey:["admin-invoices",a,o,c,m],queryFn:L,staleTime:3e4,enabled:!!r}),I=ce({mutationFn:async O=>(await Q.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",O,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-invoices"]}),b(!1),E()}}),H=ce({mutationFn:async O=>(await Q.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices/${O}/send`,{},{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-invoices"]})}}),z=async()=>{const{date_from:O,date_to:V}=w(o),D={format:"csv"};a!=="all"&&(D.status=a),O&&(D.date_from=O),V&&(D.date_to=V),c&&(D.query=c);try{const G=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",{params:D,headers:{Authorization:`Bearer ${r}`},responseType:"blob"}),se=window.URL.createObjectURL(new Blob([G.data])),le=document.createElement("a");le.href=se,le.setAttribute("download",`invoices_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(le),le.click(),le.remove()}catch(G){console.error("CSV export failed:",G)}},B=()=>{if(!v.item||v.quantity<=0||v.unit_price<=0)return;const O=v.quantity*v.unit_price,V=[...h.line_items,{...v,total:O}],D=V.reduce((se,le)=>se+le.total,0),G=D-h.discount_amount+(h.delivery_fee||0)+h.tax_amount;p({...h,line_items:V,subtotal:D,grand_total:G}),g({item:"",quantity:1,unit_price:0,total:0})},C=O=>{const V=h.line_items.filter((se,le)=>le!==O),D=V.reduce((se,le)=>se+le.total,0),G=D-h.discount_amount+(h.delivery_fee||0)+h.tax_amount;p({...h,line_items:V,subtotal:D,grand_total:G})},R=O=>{const V={...h,...O},D=V.line_items.reduce((se,le)=>se+le.total,0),G=D-V.discount_amount+(V.delivery_fee||0)+V.tax_amount;p({...V,subtotal:D,grand_total:G})},_=O=>{if(O.preventDefault(),h.line_items.length===0){alert("Please add at least one line item");return}if(!h.customer_name||!h.customer_email||!h.customer_phone){alert("Please fill in all required customer information");return}I.mutate(h)};u.useEffect(()=>{const O={};a!=="all"&&(O.status=a),o!=="all_time"&&(O.date_range=o),c&&(O.customer_search=c),s(O)},[a,o,c,s]);const q=Math.ceil(((k==null?void 0:k.total)||0)/j);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoice Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage invoices, track payments, and generate custom billing"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{id:"status-filter",value:a,onChange:O=>{i(O.target.value),x(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-range-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("select",{id:"date-range-filter",value:o,onChange:O=>{l(O.target.value),x(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all_time",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"customer-search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Customer"}),e.jsx("input",{id:"customer-search",type:"text",value:c,onChange:O=>{d(O.target.value),x(1)},placeholder:"Search by name, email, or phone...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Custom Invoice"]}),e.jsxs("button",{onClick:z,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center border border-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to CSV"]}),e.jsxs("button",{onClick:()=>P(),disabled:S,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center border border-gray-300 disabled:opacity-50",children:[e.jsx("svg",{className:`w-5 h-5 mr-2 ${S?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),S?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading invoices..."})]})}):F?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Invoices"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load invoices. Please try again."}),e.jsx("button",{onClick:()=>P(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})}):!(k!=null&&k.invoices)||k.invoices.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Invoices Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c||a!=="all"||o!=="all_time"?"No invoices match your current filters.":"No invoices have been created yet."}),e.jsx("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Create First Invoice"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.invoices.map(O=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(X,{to:`/admin/invoices/${O.invoice_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:O.invoice_number})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[O.customer_name||"Unknown customer",!O.user_id&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"Guest"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:O.customer_email||"-"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T(O.issue_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.due_date?T(O.due_date):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M(O.grand_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(O.payment_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{to:`/admin/invoices/${O.invoice_id}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:"View"}),O.payment_status==="pending"&&e.jsx("button",{onClick:()=>H.mutate(O.invoice_id),disabled:H.isPending,className:"text-green-600 hover:text-green-700 font-medium disabled:opacity-50",children:"Send"}),O.invoice_pdf_url&&e.jsx("a",{href:O.invoice_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-700 font-medium",children:"PDF"})]})})]},O.invoice_id))})]})})}),q>1&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:y+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(y+j,(k==null?void 0:k.total)||0)})," ","of ",e.jsx("span",{className:"font-medium",children:(k==null?void 0:k.total)||0})," invoices"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(Math.max(1,m-1)),disabled:m===1,className:"px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",m," of ",q]}),e.jsx("button",{onClick:()=>x(Math.min(q,m+1)),disabled:m===q,className:"px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-0 md:p-4 z-50",children:e.jsxs("div",{className:"bg-white md:rounded-lg shadow-xl w-full md:max-w-5xl h-full md:h-auto md:max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-4 md:px-6 py-4 flex justify-between items-center md:rounded-t-lg",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Create Custom Invoice"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),E()},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-6 py-6",children:e.jsxs("form",{id:"create-invoice-form",onSubmit:_,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Customer Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:h.customer_name,onChange:O=>p({...h,customer_name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:h.customer_email,onChange:O=>p({...h,customer_email:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,value:h.customer_phone,onChange:O=>p({...h,customer_phone:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"+353 1 234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:h.customer_address||"",onChange:O=>p({...h,customer_address:O.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"123 Main Street, Dublin"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Invoice Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:h.issue_date,onChange:O=>p({...h,issue_date:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:h.due_date||"",onChange:O=>p({...h,due_date:O.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Internal)"}),e.jsx("textarea",{rows:3,value:h.notes||"",onChange:O=>p({...h,notes:O.target.value||null}),placeholder:"Add any internal notes about this invoice...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Line Items",h.line_items.length>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:h.line_items.length})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add New Item"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Description"}),e.jsx("input",{type:"text",value:v.item,onChange:O=>g({...v,item:O.target.value}),placeholder:"e.g., Catering Service, Consultation Fee",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:v.quantity,onChange:O=>g({...v,quantity:Math.max(1,Number(O.target.value))}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:v.unit_price,onChange:O=>g({...v,unit_price:Math.max(0,Number(O.target.value))}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]})]}),e.jsxs("button",{type:"button",onClick:B,disabled:!v.item.trim()||v.quantity<1||v.unit_price<0,className:"mt-3 w-full md:w-auto bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Line Item"]})]}),h.line_items.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.line_items.map((O,V)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:O.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:O.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M(O.unit_price)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:M(O.total)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{type:"button",onClick:()=>C(V),className:"text-red-600 hover:text-red-700 transition-colors","aria-label":"Remove item",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},V))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:h.line_items.map((O,V)=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:O.item})}),e.jsx("button",{type:"button",onClick:()=>C(V),className:"text-red-600 hover:text-red-700 ml-2","aria-label":"Remove item",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Qty:"}),e.jsx("p",{className:"font-medium text-gray-900",children:O.quantity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Price:"}),e.jsx("p",{className:"font-medium text-gray-900",children:M(O.unit_price)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Total:"}),e.jsx("p",{className:"font-medium text-gray-900",children:M(O.total)})]})]})]},V))})]}):e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No line items added yet"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Add at least one item to continue"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Totals Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Fee ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:h.delivery_fee||0,onChange:O=>R({delivery_fee:Number(O.target.value)||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax/VAT ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:h.tax_amount,onChange:O=>R({tax_amount:Number(O.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:h.discount_amount,onChange:O=>R({discount_amount:Number(O.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-100 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-gray-900",children:M(h.subtotal)})]}),h.delivery_fee&&h.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Delivery Fee"}),e.jsx("span",{className:"font-medium text-gray-900",children:M(h.delivery_fee)})]}),h.tax_amount>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Tax/VAT"}),e.jsx("span",{className:"font-medium text-gray-900",children:M(h.tax_amount)})]}),h.discount_amount>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Discount"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",M(h.discount_amount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-orange-200",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:M(h.grand_total)})]})]})]})]})}),e.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-t border-gray-200 px-4 md:px-6 py-4 md:rounded-b-lg",children:e.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:justify-between md:items-center gap-3",children:[e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:h.line_items.length===0?e.jsx("span",{className:"text-red-600 font-medium",children:" Add at least one line item to continue"}):e.jsxs("span",{children:[h.line_items.length," item",h.line_items.length!==1?"s":"","  Total: ",e.jsx("span",{className:"font-semibold",children:M(h.grand_total)})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{b(!1),E()},className:"flex-1 md:flex-none px-4 md:px-6 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",form:"create-invoice-form",disabled:I.isPending||h.line_items.length===0,className:"flex-1 md:flex-none px-4 md:px-6 py-2.5 bg-orange-600 text-white rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:I.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Create Invoice"]})})]})]})})]})})]})},Au="https://123salama-lama-food-truck.launchpulse.ai",UD=async(t,s)=>{const r=await Q.get(`${Au}/api/admin/invoices/${t}`,{headers:{Authorization:`Bearer ${s}`}});return r.data.invoice||r.data},WD=async(t,s,r)=>{const n=await Q.put(`${Au}/api/admin/invoices/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});return n.data.invoice||n.data},VD=async(t,s,r)=>{const n=await fetch(`${Au}/api/admin/invoices/${t}/pdf`,{method:"GET",headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!n.ok){const l=await n.json().catch(()=>({}));throw new Error(l.message||`Failed to download PDF: ${n.status}`)}const a=await n.blob(),i=window.URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.download=`${s}.pdf`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o)},HD=async(t,s)=>{await Q.post(`${Au}/api/admin/invoices/${t}/send`,{},{headers:{Authorization:`Bearer ${s}`}})},QD=()=>{var H,z;const{invoice_id:t}=Rs(),s=Be(),r=Ue(),n=Z(B=>B.authentication_state.auth_token),a=Z(B=>B.add_notification),[i,o]=u.useState("pending"),[l,c]=u.useState(""),[d,m]=u.useState(null),[x,f]=u.useState(!1),{data:b,isLoading:h,isError:p,error:v}=ue({queryKey:["admin-invoice-detail",t],queryFn:()=>UD(t,n),enabled:!!t&&!!n,staleTime:3e4,retry:1});u.useEffect(()=>{b&&(o(b.payment_status),c(b.notes||""))},[b]);const g=ce({mutationFn:B=>WD(t,B,n),onSuccess:B=>{r.setQueryData(["admin-invoice-detail",t],B),a({type:"success",message:"Invoice updated successfully"}),m(null)},onError:B=>{var R,_;const C=((_=(R=B.response)==null?void 0:R.data)==null?void 0:_.message)||B.message||"Failed to update invoice";m(C),a({type:"error",message:C})}}),j=ce({mutationFn:()=>HD(t,n),onSuccess:()=>{a({type:"success",message:"Invoice sent successfully to customer"}),f(!1)},onError:B=>{var R,_;const C=((_=(R=B.response)==null?void 0:R.data)==null?void 0:_.message)||B.message||"Failed to send invoice";m(C),a({type:"error",message:C}),f(!1)}}),y=()=>{if(!b)return;const B={payment_status:i,notes:l||null};g.mutate(B)},[w,M]=u.useState(!1),T=async()=>{if(!b||!n){m("Unable to download PDF");return}M(!0);try{await VD(b.invoice_id,b.invoice_number,n),a({type:"success",message:"Invoice PDF downloaded successfully"})}catch(B){const C=B.message||"Failed to download invoice PDF";m(C),a({type:"error",message:C})}finally{M(!1)}},N=()=>{f(!0),j.mutate()},E=()=>{b!=null&&b.user_id&&s(`/admin/customers/${b.user_id}`)},L=()=>{b!=null&&b.order_id&&s(`/admin/orders/${b.order_id}`)},k=B=>{switch(B){case"paid":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"cancelled":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=B=>{switch(B){case"paid":return e.jsx(Oe,{className:"w-4 h-4"});case"pending":return e.jsx(Ke,{className:"w-4 h-4"});case"overdue":return e.jsx(me,{className:"w-4 h-4"});case"cancelled":return e.jsx(jt,{className:"w-4 h-4"});default:return e.jsx(os,{className:"w-4 h-4"})}},F=B=>`${Number(B||0).toFixed(2)}`,P=B=>B?new Date(B).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}):"N/A",I=B=>B?new Date(B).toLocaleString("en-IE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(X,{to:"/admin/invoices",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Back to Invoices"})]})}),h&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}),p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-6 h-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-1",children:"Failed to Load Invoice"}),e.jsx("p",{className:"text-red-700",children:((z=(H=v==null?void 0:v.response)==null?void 0:H.data)==null?void 0:z.message)||(v==null?void 0:v.message)||"An error occurred while loading the invoice."})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(X,{to:"/admin/invoices",className:"text-red-600 hover:text-red-700 font-medium",children:"Return to Invoices List"})})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-700 text-sm",children:d}),e.jsx("button",{onClick:()=>m(null),className:"ml-auto text-red-600 hover:text-red-700",children:e.jsx(jt,{className:"w-5 h-5"})})]})}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Invoice ",b.invoice_number]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${k(b.payment_status)}`,children:[S(b.payment_status),e.jsx("span",{className:"ml-2 capitalize",children:b.payment_status})]}),b.order_id&&e.jsxs("button",{onClick:L,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(yn,{className:"w-4 h-4 mr-1"}),"View Related Order"]})]})]}),e.jsxs("div",{className:"mt-4 lg:mt-0 flex flex-wrap gap-3",children:[e.jsx("button",{onClick:T,disabled:w,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-700 mr-2"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Download PDF"]})}),e.jsx("button",{onClick:N,disabled:x||j.isPending,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x||j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"w-5 h-5 mr-2"}),"Email Invoice"]})}),e.jsx("button",{onClick:y,disabled:g.isPending,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(cs,{className:"w-5 h-5 mr-2 text-gray-600"}),"Customer Information"]}),e.jsx("button",{onClick:E,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View Profile "})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Name"}),b.user_id?e.jsx("button",{onClick:E,className:"text-lg font-semibold text-blue-600 hover:text-blue-700",children:b.customer_name||"Unknown customer"}):e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.customer_name||"Unknown customer"}),e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"Guest"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${b.customer_email}`,className:"text-gray-900 hover:text-blue-600 flex items-center",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-gray-500"}),b.customer_email]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${b.customer_phone}`,className:"text-gray-900 hover:text-blue-600 flex items-center",children:[e.jsx($t,{className:"w-4 h-4 mr-2 text-gray-500"}),b.customer_phone]})]})]}),b.customer_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Address"}),e.jsxs("p",{className:"text-gray-900 flex items-start",children:[e.jsx(gt,{className:"w-4 h-4 mr-2 text-gray-500 mt-0.5"}),b.customer_address]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Mn,{className:"w-5 h-5 mr-2 text-gray-600"}),"Dates & Timeline"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Issue Date"}),e.jsx("p",{className:"text-gray-900 font-medium",children:P(b.issue_date)})]}),b.due_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"text-gray-900 font-medium",children:P(b.due_date)})]}),b.paid_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Paid At"}),e.jsx("p",{className:"text-gray-900 font-medium",children:I(b.paid_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Created"}),e.jsx("p",{className:"text-gray-900 font-medium",children:I(b.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900 font-medium",children:I(b.updated_at)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Line Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.line_items.map((B,C)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:B.item}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 text-right",children:B.quantity}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 text-right",children:F(B.unit_price)}),e.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900 text-right",children:F(B.total)})]},C))})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:F(b.subtotal)})]}),b.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["-",F(b.discount_amount)]})]}),b.delivery_fee!==null&&b.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fee"}),e.jsx("span",{className:"text-gray-900 font-medium",children:F(b.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (VAT)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:F(b.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-orange-600",children:F(b.grand_total)})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(hr,{className:"w-5 h-5 mr-2 text-gray-600"}),"Payment Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsxs("select",{id:"payment_status",value:i,onChange:B=>o(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),b.payment_method&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:b.payment_method})]}),b.sumup_transaction_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Transaction ID"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:b.sumup_transaction_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(b.grand_total)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Internal Notes"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoice_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Admin Only)"}),e.jsx("textarea",{id:"invoice_notes",value:l,onChange:B=>c(B.target.value),rows:6,placeholder:"Add internal notes about this invoice...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[l.length," characters"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600 italic",children:"Notes are for internal use only and will not be visible to customers on the invoice."})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg border border-orange-200 p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Invoice Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Status"}),e.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:b.payment_status})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Total Amount"}),e.jsx("span",{className:"font-semibold text-gray-900",children:F(b.grand_total)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Items"}),e.jsx("span",{className:"font-semibold text-gray-900",children:b.line_items.length})]}),b.order_id&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Order-Based"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Yes"})]}),b.catering_inquiry_id&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Catering"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"Yes"})]})]})]})]})]})]})]})})})})},H1="https://123salama-lama-food-truck.launchpulse.ai",KD=async(t,s)=>{const r=new URLSearchParams;return s.status&&s.status!=="all"&&r.append("status",s.status),s.q&&r.append("q",s.q),s.limit&&r.append("limit",s.limit.toString()),s.offset&&r.append("offset",s.offset.toString()),(await Q.get(`${H1}/api/admin/contact-messages${r.toString()?`?${r.toString()}`:""}`,{headers:{Authorization:`Bearer ${t}`}})).data},YD=async(t,s,r)=>(await Q.patch(`${H1}/api/admin/contact-messages/${s}`,{status:r},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.message,eb=t=>({new:"bg-yellow-100 text-yellow-800 border-yellow-200",read:"bg-blue-100 text-blue-800 border-blue-200",archived:"bg-gray-100 text-gray-800 border-gray-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",Q1=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),GD=t=>{const s=new Date(t),n=Math.floor((new Date().getTime()-s.getTime())/1e3);return n<60?"Just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:Q1(t)},XD=()=>{const[t,s]=ct(),r=Ue(),n=Z(P=>P.authentication_state.auth_token),[a,i]=u.useState(t.get("status")||"all"),[o,l]=u.useState(t.get("q")||""),[c,d]=u.useState(1),[m,x]=u.useState(null),[f,b]=u.useState(!1),h=20;u.useEffect(()=>{const P=new URLSearchParams;a!=="all"&&P.set("status",a),o&&P.set("q",o),c>1&&P.set("page",c.toString()),s(P,{replace:!0})},[a,o,c,s]);const{data:p,isLoading:v,isError:g,refetch:j}=ue({queryKey:["admin-contact-messages",a,o,c],queryFn:()=>KD(n||"",{status:a!=="all"?a:void 0,q:o||void 0,limit:h,offset:(c-1)*h}),enabled:!!n,staleTime:3e4,refetchInterval:6e4}),y=ce({mutationFn:({message_id:P,status:I})=>YD(n||"",P,I),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-contact-messages"]}),r.invalidateQueries({queryKey:["admin-notifications-summary"]})}}),w=async P=>{x(P),b(!0),P.status==="new"&&y.mutate({message_id:P.message_id,status:"read"})},M=P=>{y.mutate({message_id:P,status:"read"})},T=P=>{y.mutate({message_id:P,status:"new"})},N=P=>{y.mutate({message_id:P,status:"archived"}),(m==null?void 0:m.message_id)===P&&(b(!1),x(null))},E=P=>{P.preventDefault(),d(1)},L=()=>{i("all"),l(""),d(1)},k=(p==null?void 0:p.total)||0,S=Math.ceil(k/h),F=(p==null?void 0:p.messages)||[];return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contact Messages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer contact form submissions"})]}),e.jsxs("button",{onClick:()=>j(),className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(pD,{className:"h-5 w-5 mr-2 text-gray-600"}),"Refresh"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("form",{onSubmit:E,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(CD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, subject...",value:o,onChange:P=>l(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V1,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{value:a,onChange:P=>{i(P.target.value),d(1)},className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Messages"}),e.jsx("option",{value:"new",children:"New / Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),(a!=="all"||o)&&e.jsxs("button",{onClick:L,className:"inline-flex items-center px-3 py-2 text-gray-600 hover:text-gray-800",children:[e.jsx(Yy,{className:"h-5 w-5 mr-1"}),"Clear"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600",children:"Error loading messages. Please try again."}),e.jsx("button",{onClick:()=>j(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jo,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No messages found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"From"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Received"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(P=>e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer transition-colors ${P.status==="new"?"bg-yellow-50/50":""}`,onClick:()=>w(P),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${eb(P.status)}`,children:[P.status==="new"&&e.jsx(jo,{className:"h-3 w-3 mr-1"}),P.status==="read"&&e.jsx(Vy,{className:"h-3 w-3 mr-1"}),P.status==="archived"&&e.jsx(qm,{className:"h-3 w-3 mr-1"}),P.status.charAt(0).toUpperCase()+P.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Ky,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm ${P.status==="new"?"font-semibold":"font-medium"} text-gray-900`,children:P.name}),e.jsx("p",{className:"text-sm text-gray-500",children:P.email})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:`text-sm ${P.status==="new"?"font-semibold":""} text-gray-900 max-w-xs truncate`,children:P.subject}),e.jsxs("p",{className:"text-sm text-gray-500 max-w-xs truncate",children:[P.message.substring(0,60),"..."]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Eh,{className:"h-4 w-4 mr-1"}),GD(P.created_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:I=>I.stopPropagation(),children:[P.status==="new"&&e.jsx("button",{onClick:()=>M(P.message_id),className:"text-blue-600 hover:text-blue-800 p-1",title:"Mark as read",children:e.jsx(Vy,{className:"h-5 w-5"})}),P.status==="read"&&e.jsx("button",{onClick:()=>T(P.message_id),className:"text-yellow-600 hover:text-yellow-800 p-1",title:"Mark as unread",children:e.jsx(jo,{className:"h-5 w-5"})}),P.status!=="archived"&&e.jsx("button",{onClick:()=>N(P.message_id),className:"text-gray-600 hover:text-gray-800 p-1",title:"Archive",children:e.jsx(qm,{className:"h-5 w-5"})})]})})]},P.message_id))})]})}),S>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(c-1)*h+1," to"," ",Math.min(c*h,k)," of ",k," messages"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(P=>Math.max(1,P-1)),disabled:c===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(U1,{className:"h-5 w-5"})}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",c," of ",S]}),e.jsx("button",{onClick:()=>d(P=>Math.min(S,P+1)),disabled:c===S,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(W1,{className:"h-5 w-5"})})]})]})]})}),f&&m&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>b(!1)}),e.jsxs("div",{className:"relative inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m.subject}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${eb(m.status)}`,children:m.status.charAt(0).toUpperCase()+m.status.slice(1)}),e.jsx("span",{className:"text-sm text-gray-500",children:Q1(m.created_at)})]})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Yy,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Ky,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.email}),m.phone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[e.jsx(ED,{className:"h-4 w-4 mr-1"}),m.phone]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Message"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:m.message})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex gap-2",children:[m.status!=="archived"&&e.jsxs("button",{onClick:()=>N(m.message_id),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(qm,{className:"h-5 w-5 mr-2"}),"Archive"]}),m.status==="read"&&e.jsxs("button",{onClick:()=>{T(m.message_id),x({...m,status:"new"})},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(jo,{className:"h-5 w-5 mr-2"}),"Mark Unread"]})]}),e.jsxs("a",{href:`mailto:${m.email}?subject=Re: ${m.subject}`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(jo,{className:"h-5 w-5 mr-2"}),"Reply via Email"]})]})]})]})})]})},JD=async(t,s,r)=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{params:{date_range:s,report_type:r},headers:{Authorization:`Bearer ${t}`}})).data,ZD=async(t,s)=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/customers",{params:{date_range:s},headers:{Authorization:`Bearer ${t}`}})).data,eO=async(t,s)=>(await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/time-analysis",{params:{date_range:s},headers:{Authorization:`Bearer ${t}`}})).data,Nr=({title:t,value:s,icon:r,trend:n,color:a})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${a}`,children:r}),n&&e.jsxs("div",{className:`flex items-center text-sm font-medium ${n.isPositive?"text-green-600":"text-red-600"}`,children:[n.isPositive?e.jsx($w,{className:"w-4 h-4 mr-1"}):e.jsx(xS,{className:"w-4 h-4 mr-1"}),Math.abs(n.value),"%"]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),tO=({data:t})=>{if(!t||t.length===0)return e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"});const s=Math.max(...t.map(l=>l.revenue)),r=800,n=250,a=40,i=t.map((l,c)=>({x:a+c*(r-2*a)/(t.length-1),y:n-a-l.revenue/s*(n-2*a)})),o=i.map((l,c)=>`${c===0?"M":"L"} ${l.x} ${l.y}`).join(" ");return e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-64",children:[[0,.25,.5,.75,1].map((l,c)=>e.jsx("line",{x1:a,y1:a+l*(n-2*a),x2:r-a,y2:a+l*(n-2*a),stroke:"#e5e7eb",strokeWidth:"1"},c)),e.jsx("path",{d:o,fill:"none",stroke:"#3b82f6",strokeWidth:"3"}),i.map((l,c)=>e.jsx("circle",{cx:l.x,cy:l.y,r:"4",fill:"#3b82f6"},c)),t.map((l,c)=>e.jsx("text",{x:i[c].x,y:n-10,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:new Date(l.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})},c))]})})},tb=({data:t})=>{if(!t||t.length===0)return e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"});const s=Math.max(...t.map(l=>l.value)),r=60,n=20,a=t.length*(r+n)+40,i=250,o=40;return e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("svg",{viewBox:`0 0 ${a} ${i}`,className:"w-full h-64",children:t.map((l,c)=>{const d=l.value/s*(i-2*o),m=o+c*(r+n),x=i-o-d;return e.jsxs("g",{children:[e.jsx("rect",{x:m,y:x,width:r,height:d,fill:"#3b82f6",rx:"4"}),e.jsx("text",{x:m+r/2,y:x-5,textAnchor:"middle",fontSize:"12",fill:"#1f2937",fontWeight:"600",children:l.value}),e.jsx("text",{x:m+r/2,y:i-10,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:l.label})]},c)})})})},sO=()=>{var S,F,P,I,H,z,B,C,R;const[t,s]=ct(),[r,n]=u.useState(t.get("date_range")||"last_30_days"),[a,i]=u.useState(t.get("report_type")||"overview"),[o,l]=u.useState(!1),c=Z(_=>_.authentication_state.auth_token),d=Z(_=>_.authentication_state.current_user);u.useEffect(()=>{const _={};r!=="last_30_days"&&(_.date_range=r),a!=="overview"&&(_.report_type=a),s(_,{replace:!0})},[r,a,s]);const{data:m,isLoading:x,error:f,refetch:b}=ue({queryKey:["admin-analytics-sales",r,a],queryFn:()=>JD(c,r,a),enabled:!!c,staleTime:5*60*1e3}),{data:h,isLoading:p,error:v,refetch:g}=ue({queryKey:["admin-analytics-customers",r],queryFn:()=>ZD(c,r),enabled:!!c&&a==="customers",staleTime:5*60*1e3}),{data:j,isLoading:y,error:w,refetch:M}=ue({queryKey:["admin-analytics-time",r],queryFn:()=>eO(c,r),enabled:!!c&&a==="time",staleTime:5*60*1e3}),T=_=>{n(_)},N=_=>{i(_)},E=async()=>{if(c){l(!0);try{const _=await Q.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{params:{date_range:r,format:"csv"},headers:{Authorization:`Bearer ${c}`},responseType:"blob"}),q=new Blob([_.data],{type:"text/csv"}),O=window.URL.createObjectURL(q),V=document.createElement("a");V.href=O,V.download=`analytics_${r}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(O)}catch(_){console.error("Export failed:",_),alert("Failed to export analytics data. Please try again.")}finally{l(!1)}}},L=_=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(_),k=_=>`${(_*100).toFixed(1)}%`;return!c||!d||d.role!=="admin"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need admin privileges to view analytics."}),e.jsx(X,{to:"/admin/dashboard",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Return to Dashboard"})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Analytics"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive insights into your business performance"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:r,onChange:_=>T(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"}),e.jsx("option",{value:"this_year",children:"This Year"})]}),e.jsx("button",{onClick:E,disabled:o||x,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Export CSV"]})})]})]}),e.jsxs("div",{className:"flex space-x-2 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>N("overview"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${a==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Jt,{className:"w-5 h-5 inline-block mr-2"}),"Sales Overview"]}),e.jsxs("button",{onClick:()=>N("customers"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${a==="customers"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Rn,{className:"w-5 h-5 inline-block mr-2"}),"Customer Insights"]}),e.jsxs("button",{onClick:()=>N("time"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${a==="time"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Ke,{className:"w-5 h-5 inline-block mr-2"}),"Time Analysis"]})]})]}),a==="overview"&&e.jsx(e.Fragment,{children:x?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Re,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading analytics..."})]}):f?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load sales analytics"}),e.jsx("button",{onClick:()=>b(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Nr,{title:"Total Revenue",value:L(((S=m.summary)==null?void 0:S.revenue)||0),icon:e.jsx(gn,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"}),e.jsx(Nr,{title:"Total Orders",value:(((F=m.summary)==null?void 0:F.orders)||0).toLocaleString(),icon:e.jsx(pt,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Nr,{title:"Average Order Value",value:L(((P=m.summary)==null?void 0:P.average_order_value)||0),icon:e.jsx(Jt,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-50"})]}),m.revenue_by_day&&m.revenue_by_day.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),e.jsx(tO,{data:m.revenue_by_day})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Orders Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[(I=m.breakdown_by_type)==null?void 0:I.map(_=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-4 h-4 rounded mr-3 ${_.order_type==="collection"?"bg-blue-600":"bg-green-600"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:_.order_type})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[_.orders," orders"]})]},_.order_type)),m.breakdown_by_type&&m.breakdown_by_type.length>0&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:m.breakdown_by_type.map(_=>{var q;return e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2 first:mt-0",children:[e.jsxs("span",{className:"capitalize",children:[_.order_type," Rate"]}),e.jsxs("span",{className:"font-medium",children:[(q=m.summary)!=null&&q.orders?(_.orders/m.summary.orders*100).toFixed(1):"0.0","%"]})]},_.order_type)})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Items"}),e.jsx("div",{className:"space-y-3",children:(H=m.top_items)==null?void 0:H.slice(0,5).map((_,q)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-50 text-blue-600 font-semibold text-sm",children:q+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.item_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[_.quantity_sold," sold"]})]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:L(_.revenue)})]},_.item_id||_.item_name))})]})]})]}):null}),a==="customers"&&e.jsx(e.Fragment,{children:p?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Re,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading customer analytics..."})]}):v?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load customer analytics"}),e.jsx("button",{onClick:()=>g(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Nr,{title:"New Customers",value:(h.new_customers||0).toLocaleString(),icon:e.jsx(Rn,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Nr,{title:"Repeat Customer Rate",value:k(h.repeat_customer_rate||0),icon:e.jsx(Jt,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"}),e.jsx(Nr,{title:"Customer Lifetime Value",value:L(h.customer_lifetime_value||0),icon:e.jsx(ka,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers"}),e.jsx("div",{className:"space-y-3",children:h.top_customers&&h.top_customers.length>0?h.top_customers.slice(0,5).map((_,q)=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-purple-50 text-purple-600 font-semibold text-sm",children:q+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.customer_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[_.total_orders," orders"]})]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:L(_.total_spend)})]},_.user_id)):e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No customer data available"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loyalty Program Engagement"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Participants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((z=h.loyalty_engagement)==null?void 0:z.active_participants)||0).toLocaleString()})]}),e.jsx(ka,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Issued"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((B=h.loyalty_engagement)==null?void 0:B.points_issued)||0).toLocaleString()})]}),e.jsx(Jt,{className:"w-8 h-8 text-green-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Redeemed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((C=h.loyalty_engagement)==null?void 0:C.points_redeemed)||0).toLocaleString()})]}),e.jsx(pt,{className:"w-8 h-8 text-purple-600"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Redemption Rate"}),e.jsxs("span",{className:"font-medium",children:[(R=h.loyalty_engagement)!=null&&R.points_issued&&h.loyalty_engagement.points_issued>0?(h.loyalty_engagement.points_redeemed/h.loyalty_engagement.points_issued*100).toFixed(1):"0.0","%"]})]})})]})]})]})]}):null}),a==="time"&&e.jsx(e.Fragment,{children:y?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Re,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading time analytics..."})]}):w?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load time analytics"}),e.jsx("button",{onClick:()=>M(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Nr,{title:"Average Fulfillment Time",value:`${j.average_fulfillment_time||0} min`,icon:e.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Nr,{title:"Peak Order Hour",value:j.peak_order_hours&&j.peak_order_hours.length>0?`${j.peak_order_hours[0].hour}:00`:"N/A",icon:e.jsx(Mn,{className:"w-6 h-6 text-orange-600"}),color:"bg-orange-50"}),e.jsx(Nr,{title:"Busiest Day",value:j.orders_by_day_of_week&&j.orders_by_day_of_week.length>0?j.orders_by_day_of_week[0].day:"N/A",icon:e.jsx(Jt,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Peak Order Hours"}),j.peak_order_hours&&j.peak_order_hours.length>0?e.jsx(tb,{data:j.peak_order_hours.map(_=>({label:`${_.hour}:00`,value:_.order_count}))}):e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Orders by Day of Week"}),j.orders_by_day_of_week&&j.orders_by_day_of_week.length>0?e.jsx(tb,{data:j.orders_by_day_of_week.map(_=>({label:_.day,value:_.order_count}))}):e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"})]})]}):null})]})})})},Oi="https://123salama-lama-food-truck.launchpulse.ai",rO=async t=>(await Q.get(`${Oi}/api/admin/settings`,{headers:{Authorization:`Bearer ${t}`}})).data,nO=async(t,s)=>{await Q.put(`${Oi}/api/admin/settings/business`,s,{headers:{Authorization:`Bearer ${t}`}})},aO=async(t,s)=>{await Q.put(`${Oi}/api/admin/settings/operating-hours`,s,{headers:{Authorization:`Bearer ${t}`}})},iO=async(t,s)=>{await Q.put(`${Oi}/api/admin/settings/loyalty`,s,{headers:{Authorization:`Bearer ${t}`}})},oO=()=>{const[t,s]=ct(),r=Ue(),n=Z(A=>A.authentication_state.auth_token),a=Z(A=>A.update_business_settings),i=Z(A=>A.fetch_business_settings),[o,l]=u.useState(t.get("section")||"business_info"),[c,d]=u.useState({name:"",phone:"",email:"",address:"",logo_url:null}),[m,x]=u.useState({weekly_schedule:{monday:{open:"11:00",close:"20:00",closed:!1},tuesday:{open:"11:00",close:"20:00",closed:!1},wednesday:{open:"11:00",close:"20:00",closed:!1},thursday:{open:"11:00",close:"20:00",closed:!1},friday:{open:"11:00",close:"20:00",closed:!1},saturday:{open:"12:00",close:"22:00",closed:!1},sunday:{open:"12:00",close:"20:00",closed:!1}},special_hours:[]}),[f,b]=u.useState({vat_rate:23,tax_registration_number:null,apply_tax_to_all:!0}),[h,p]=u.useState({order_notifications_enabled:!0,notification_emails:[],catering_notifications_enabled:!0,customer_email_notifications:!0,customer_sms_notifications:!1}),[v,g]=u.useState({earning_rate:1,points_expiry_enabled:!1,points_expiry_months:12,referral_enabled:!0,referrer_reward_points:100,referee_reward_points:50,gamification_enabled:!0}),[j,y]=u.useState({sumup_api_key:null,sumup_merchant_id:null,test_mode_enabled:!0,saved_methods_enabled:!0}),[w,M]=u.useState({email_provider:"sendgrid",smtp_host:null,smtp_port:null,api_key:null,sender_email:"",sender_name:""}),[T,N]=u.useState({business_info:!1,operating_hours:!1,tax:!1,notifications:!1,loyalty:!1,payment:!1,email:!1}),[E,L]=u.useState({sumup:!1,email:!1}),[k,S]=u.useState(null),[F,P]=u.useState(!1),[I,H]=u.useState(null),{data:z,isLoading:B}=ue({queryKey:["adminSettings"],queryFn:()=>rO(n),enabled:!!n,staleTime:30*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1});u.useEffect(()=>{if(z){const A={...z.business_info};A.address&&typeof A.address=="object"&&(A.address=`${A.address.line1}${A.address.line2?", "+A.address.line2:""}, ${A.address.city}, ${A.address.postal_code}`),d(A),H(A.logo_url||null),x(z.operating_hours),b(z.tax_settings),p(z.notification_settings),g(z.loyalty_settings),y(z.payment_settings),M(z.email_settings)}},[z]),u.useEffect(()=>{s({section:o})},[o,s]);const C=ce({mutationFn:A=>nO(n,A),onSuccess:async()=>{await r.invalidateQueries({queryKey:["adminSettings"]}),await r.refetchQueries({queryKey:["adminSettings"]}),N(A=>({...A,business_info:!1})),S({type:"success",message:"Business information updated successfully!"}),a({business_info:{name:c.name,phone:c.phone,email:c.email,address:c.address,logo_url:c.logo_url}}),await i()},onError:A=>{var $,re;S({type:"error",message:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to update business information"})}}),R=ce({mutationFn:A=>aO(n,A),onSuccess:()=>{r.invalidateQueries({queryKey:["adminSettings"]}),N(A=>({...A,operating_hours:!1})),S({type:"success",message:"Operating hours updated successfully!"}),a({operating_hours:m.weekly_schedule})},onError:A=>{var $,re;S({type:"error",message:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to update operating hours"})}}),_=ce({mutationFn:A=>iO(n,A),onSuccess:()=>{r.invalidateQueries({queryKey:["adminSettings"]}),N(A=>({...A,loyalty:!1})),S({type:"success",message:"Loyalty settings updated successfully!"}),a({loyalty_settings:{earning_rate:v.earning_rate,referral_enabled:v.referral_enabled}})},onError:A=>{var $,re;S({type:"error",message:((re=($=A.response)==null?void 0:$.data)==null?void 0:re.message)||"Failed to update loyalty settings"})}}),q=A=>{switch(A){case"business_info":C.mutate(c);break;case"operating_hours":R.mutate(m);break;case"loyalty":_.mutate(v);break;case"tax":case"notifications":case"payment":case"email":S({type:"error",message:`${A.replace("_"," ").toUpperCase()} settings endpoint not yet implemented in backend`});break}},O=A=>{T[o]?window.confirm("You have unsaved changes. Are you sure you want to leave this section?")&&l(A):l(A)},V=()=>{x(A=>({...A,special_hours:[...A.special_hours,{date:"",status:"closed",custom_hours:null}]})),N(A=>({...A,operating_hours:!0}))},D=A=>{x($=>({...$,special_hours:$.special_hours.filter((re,ve)=>ve!==A)})),N($=>({...$,operating_hours:!0}))};u.useEffect(()=>{if(k){const A=setTimeout(()=>S(null),5e3);return()=>clearTimeout(A)}},[k]);const G=async A=>{var re,ve,xe;const $=(re=A.target.files)==null?void 0:re[0];if($){if(!$.type.startsWith("image/")){S({type:"error",message:"Please select an image file"});return}if($.size>5*1024*1024){S({type:"error",message:"Image size must be less than 5MB"});return}P(!0);try{const ke=new FormData;ke.append("image",$);const Ce=await Q.post(`${Oi}/api/admin/upload/image`,ke,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),Pe=`${Oi}${Ce.data.url}`;d({...c,logo_url:Pe}),H(Pe),N(ne=>({...ne,business_info:!0})),S({type:"success",message:"Logo uploaded successfully! Remember to save changes."})}catch(ke){S({type:"error",message:((xe=(ve=ke.response)==null?void 0:ve.data)==null?void 0:xe.message)||"Failed to upload logo"})}finally{P(!1)}}},se=()=>{d({...c,logo_url:null}),H(null),N(A=>({...A,business_info:!0}))},le=[{id:"business_info",label:"Business Info",icon:Iw},{id:"operating_hours",label:"Operating Hours",icon:Ke},{id:"tax",label:"Tax Settings",icon:CS},{id:"notifications",label:"Notifications",icon:Tn},{id:"loyalty",label:"Loyalty Program",icon:Ti},{id:"payment",label:"Payment Integration",icon:hr},{id:"email",label:"Email Configuration",icon:Nt}],K=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return B?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading settings..."})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pl,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your business settings and integrations"})]})]}),T[o]&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600 bg-yellow-50 px-4 py-2 rounded-lg",children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Unsaved changes"})]})]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex space-x-1 overflow-x-auto",children:le.map(({id:A,label:$,icon:re})=>e.jsxs("button",{onClick:()=>O(A),className:`flex items-center space-x-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${o===A?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:$}),T[A]&&e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]},A))})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[o==="business_info"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Business Information"}),e.jsx("p",{className:"text-gray-600",children:"Update your business details and contact information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.name,onChange:A=>{d({...c,name:A.target.value}),N($=>({...$,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Salama Lama Food Truck"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:c.phone,onChange:A=>{d({...c,phone:A.target.value}),N($=>({...$,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"+353-1-234-5678"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:c.email,onChange:A=>{d({...c,email:A.target.value}),N($=>({...$,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"hello@salamalama.ie"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:typeof c.address=="string"?c.address:c.address?`${c.address.line1}${c.address.line2?", "+c.address.line2:""}, ${c.address.city}, ${c.address.postal_code}`:"",onChange:A=>{d({...c,address:A.target.value}),N($=>({...$,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Dublin, Ireland"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Business Logo"}),I&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Logo:"}),e.jsxs("button",{type:"button",onClick:se,className:"text-sm text-red-600 hover:text-red-800 font-medium flex items-center space-x-1",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]}),e.jsx("div",{className:"flex items-center justify-center bg-white p-4 rounded-lg border border-gray-200",children:e.jsx("img",{src:I,alt:"Business Logo Preview",className:"max-h-24 max-w-full object-contain"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("label",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-center w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-colors cursor-pointer",children:e.jsx("div",{className:"flex items-center space-x-3",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(MS,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:I?"Upload New Logo":"Upload Logo"})]})})}),e.jsx("input",{type:"file",accept:"image/*",onChange:G,disabled:F,className:"hidden"})]})}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-start space-x-2",children:[e.jsx(vS,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Recommended: PNG or SVG format, transparent background, max 5MB. Logo will be displayed in the navigation header."})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Or enter logo URL manually:"}),e.jsx("input",{type:"url",value:c.logo_url||"",onChange:A=>{const $=A.target.value||null;d({...c,logo_url:$}),H($),N(re=>({...re,business_info:!0}))},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>q("business_info"),disabled:C.isPending||!T.business_info,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:C.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Business Info"})]})})})]}),o==="operating_hours"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Operating Hours"}),e.jsx("p",{className:"text-gray-600",children:"Set your weekly schedule and special hours"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Schedule"}),e.jsx("div",{className:"space-y-4",children:K.map(A=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-32",children:e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:A})}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.weekly_schedule[A].closed,onChange:$=>{x(re=>({...re,weekly_schedule:{...re.weekly_schedule,[A]:{...re.weekly_schedule[A],closed:$.target.checked}}})),N(re=>({...re,operating_hours:!0}))},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Closed"})]}),!m.weekly_schedule[A].closed&&e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("input",{type:"time",value:m.weekly_schedule[A].open,onChange:$=>{x(re=>({...re,weekly_schedule:{...re.weekly_schedule,[A]:{...re.weekly_schedule[A],open:$.target.value}}})),N(re=>({...re,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"time",value:m.weekly_schedule[A].close,onChange:$=>{x(re=>({...re,weekly_schedule:{...re.weekly_schedule,[A]:{...re.weekly_schedule[A],close:$.target.value}}})),N(re=>({...re,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]},A))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Special Hours / Closures"}),e.jsxs("button",{onClick:V,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Special Hours"})]})]}),m.special_hours.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No special hours configured"})]}):e.jsx("div",{className:"space-y-3",children:m.special_hours.map((A,$)=>{var re,ve;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"date",value:A.date,onChange:xe=>{const ke=[...m.special_hours];ke[$].date=xe.target.value,x(Ce=>({...Ce,special_hours:ke})),N(Ce=>({...Ce,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("select",{value:A.status,onChange:xe=>{const ke=[...m.special_hours];ke[$].status=xe.target.value,xe.target.value==="closed"&&(ke[$].custom_hours=null),x(Ce=>({...Ce,special_hours:ke})),N(Ce=>({...Ce,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"custom",children:"Custom Hours"})]}),A.status==="custom"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"time",value:((re=A.custom_hours)==null?void 0:re.open)||"",onChange:xe=>{var Ce;const ke=[...m.special_hours];ke[$].custom_hours={open:xe.target.value,close:((Ce=ke[$].custom_hours)==null?void 0:Ce.close)||""},x(Pe=>({...Pe,special_hours:ke})),N(Pe=>({...Pe,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"time",value:((ve=A.custom_hours)==null?void 0:ve.close)||"",onChange:xe=>{var Ce;const ke=[...m.special_hours];ke[$].custom_hours={open:((Ce=ke[$].custom_hours)==null?void 0:Ce.open)||"",close:xe.target.value},x(Pe=>({...Pe,special_hours:ke})),N(Pe=>({...Pe,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("button",{onClick:()=>D($),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]},$)})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>q("operating_hours"),disabled:R.isPending||!T.operating_hours,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Operating Hours"})]})})})]}),o==="tax"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tax Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure VAT and tax policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VAT Rate (%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:f.vat_rate,onChange:A=>{b({...f,vat_rate:parseFloat(A.target.value)}),N($=>({...$,tax:!0}))},min:"0",max:"100",step:"0.1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Registration Number"}),e.jsx("input",{type:"text",value:f.tax_registration_number||"",onChange:A=>{b({...f,tax_registration_number:A.target.value||null}),N($=>({...$,tax:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"IE1234567T"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:f.apply_tax_to_all,onChange:A=>{b({...f,apply_tax_to_all:A.target.checked}),N($=>({...$,tax:!0}))},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Apply tax to all items"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for tax settings (PUT /api/admin/settings/tax) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>q("tax"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Tax Settings"})]})})]}),o==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure email and SMS notification preferences"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Order Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Receive notifications for new orders"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.order_notifications_enabled,onChange:A=>{p({...h,order_notifications_enabled:A.target.checked}),N($=>({...$,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Catering Inquiry Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Receive notifications for new catering inquiries"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.catering_notifications_enabled,onChange:A=>{p({...h,catering_notifications_enabled:A.target.checked}),N($=>({...$,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customer Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send email notifications to customers"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.customer_email_notifications,onChange:A=>{p({...h,customer_email_notifications:A.target.checked}),N($=>({...$,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customer SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send SMS notifications to customers"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.customer_sms_notifications,onChange:A=>{p({...h,customer_sms_notifications:A.target.checked}),N($=>({...$,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for notification settings (PUT /api/admin/settings/notifications) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>q("notifications"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Notification Settings"})]})})]}),o==="loyalty"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loyalty Program Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure loyalty points, rewards, and referral program"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Points Earning Rate ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"1 ="}),e.jsx("input",{type:"number",value:v.earning_rate,onChange:A=>{g({...v,earning_rate:parseFloat(A.target.value)}),N($=>({...$,loyalty:!0}))},min:"0",step:"0.1",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-sm text-gray-600",children:"points"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Points Expiry"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable automatic expiry of unused points"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.points_expiry_enabled,onChange:A=>{g({...v,points_expiry_enabled:A.target.checked}),N($=>({...$,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),v.points_expiry_enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points Expiry Period (months)"}),e.jsx("input",{type:"number",value:v.points_expiry_months,onChange:A=>{g({...v,points_expiry_months:parseInt(A.target.value)}),N($=>({...$,loyalty:!0}))},min:"1",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Referral Program"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable customer referral rewards"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.referral_enabled,onChange:A=>{g({...v,referral_enabled:A.target.checked}),N($=>({...$,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),v.referral_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referrer Reward (points)"}),e.jsx("input",{type:"number",value:v.referrer_reward_points,onChange:A=>{g({...v,referrer_reward_points:parseInt(A.target.value)}),N($=>({...$,loyalty:!0}))},min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referee Reward (points)"}),e.jsx("input",{type:"number",value:v.referee_reward_points,onChange:A=>{g({...v,referee_reward_points:parseInt(A.target.value)}),N($=>({...$,loyalty:!0}))},min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Gamification Features"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable spin wheel, badges, and achievements"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.gamification_enabled,onChange:A=>{g({...v,gamification_enabled:A.target.checked}),N($=>({...$,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>q("loyalty"),disabled:_.isPending||!T.loyalty,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Loyalty Settings"})]})})})]}),o==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Integration"}),e.jsx("p",{className:"text-gray-600",children:"Configure SumUp payment processing"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SumUp API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E.sumup?"text":"password",value:j.sumup_api_key||"",onChange:A=>{y({...j,sumup_api_key:A.target.value||null}),N($=>({...$,payment:!0}))},className:"w-full px-4 py-2 pr-24 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono text-sm",placeholder:"sk_test_..."}),e.jsx("button",{type:"button",onClick:()=>L({...E,sumup:!E.sumup}),className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 text-sm text-orange-600 hover:text-orange-700 font-medium",children:E.sumup?"Hide":"Show"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SumUp Merchant ID"}),e.jsx("input",{type:"text",value:j.sumup_merchant_id||"",onChange:A=>{y({...j,sumup_merchant_id:A.target.value||null}),N($=>({...$,payment:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"mer_..."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Test Mode"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use test API keys for development"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.test_mode_enabled,onChange:A=>{y({...j,test_mode_enabled:A.target.checked}),N($=>({...$,payment:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Save Payment Methods"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Allow customers to save cards for future use"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.saved_methods_enabled,onChange:A=>{y({...j,saved_methods_enabled:A.target.checked}),N($=>({...$,payment:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for payment settings (PUT /api/admin/settings/payment) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>q("payment"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Payment Settings"})]})})]}),o==="email"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Configuration"}),e.jsx("p",{className:"text-gray-600",children:"Configure email service provider"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Provider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:w.email_provider,onChange:A=>{M({...w,email_provider:A.target.value}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sendgrid",children:"SendGrid"}),e.jsx("option",{value:"mailgun",children:"Mailgun"}),e.jsx("option",{value:"smtp",children:"SMTP"})]})]}),w.email_provider==="smtp"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SMTP Host ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:w.smtp_host||"",onChange:A=>{M({...w,smtp_host:A.target.value||null}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"smtp.example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SMTP Port ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:w.smtp_port||"",onChange:A=>{M({...w,smtp_port:parseInt(A.target.value)||null}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"587"})]})]})}),w.email_provider!=="smtp"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["API Key ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E.email?"text":"password",value:w.api_key||"",onChange:A=>{M({...w,api_key:A.target.value||null}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 pr-24 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono text-sm",placeholder:"SG...."}),e.jsx("button",{type:"button",onClick:()=>L({...E,email:!E.email}),className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 text-sm text-orange-600 hover:text-orange-700 font-medium",children:E.email?"Hide":"Show"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sender Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:w.sender_email,onChange:A=>{M({...w,sender_email:A.target.value}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"hello@salamalama.ie"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sender Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:w.sender_name,onChange:A=>{M({...w,sender_name:A.target.value}),N($=>({...$,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Salama Lama Food Truck"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for email settings (PUT /api/admin/settings/email) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end space-x-4 pt-4",children:e.jsxs("button",{onClick:()=>q("email"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Email Settings"})]})})]})]})}),k&&e.jsx("div",{className:"fixed bottom-8 right-8 z-50 animate-slide-up",children:e.jsxs("div",{className:`flex items-center space-x-3 px-6 py-4 rounded-lg shadow-lg ${k.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[k.type==="success"?e.jsx(Oe,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(me,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:k.message}),e.jsx("button",{onClick:()=>S(null),className:"ml-4 hover:opacity-70 transition-opacity",children:e.jsx(Ae,{className:"h-4 w-4"})})]})})]})})},lO=async(t,s)=>{const r="https://123salama-lama-food-truck.launchpulse.ai",n=new URLSearchParams;return n.append("limit",t.limit.toString()),n.append("offset",t.offset.toString()),t.user_id&&n.append("user_id",t.user_id),t.action_type&&n.append("action_type",t.action_type),t.entity_type&&n.append("entity_type",t.entity_type),(await Q.get(`${r}/api/admin/activity-logs?${n.toString()}`,{headers:{Authorization:`Bearer ${s}`}})).data},sb=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),rb=t=>({create:"bg-green-100 text-green-800 border-green-200",update:"bg-blue-100 text-blue-800 border-blue-200",delete:"bg-red-100 text-red-800 border-red-200",login:"bg-purple-100 text-purple-800 border-purple-200",logout:"bg-gray-100 text-gray-800 border-gray-200"})[t.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-200",nb=t=>{const s={user:e.jsx(cs,{className:"w-4 h-4"}),order:e.jsx(os,{className:"w-4 h-4"}),menu_item:e.jsx(os,{className:"w-4 h-4"}),discount:e.jsx(os,{className:"w-4 h-4"}),default:e.jsx(Sd,{className:"w-4 h-4"})};return s[t]||s.default},cO=()=>{const t=Z(w=>w.authentication_state.auth_token),[s,r]=u.useState({limit:50,offset:0}),[n,a]=u.useState({user_id:"",action_type:"",entity_type:""}),[i,o]=u.useState(n),{data:l,isLoading:c,isError:d,error:m,refetch:x}=ue({queryKey:["admin-activity-logs",s.limit,s.offset,i.user_id,i.action_type,i.entity_type],queryFn:()=>lO({limit:s.limit,offset:s.offset,user_id:i.user_id||void 0,action_type:i.action_type||void 0,entity_type:i.entity_type||void 0},t||""),enabled:!!t,staleTime:3e4}),f=(l==null?void 0:l.logs)||[],b=(l==null?void 0:l.total)||0,h=Math.ceil(b/s.limit),p=Math.floor(s.offset/s.limit)+1,v=()=>{o(n),r(w=>({...w,offset:0}))},g=()=>{a({user_id:"",action_type:"",entity_type:""}),o({user_id:"",action_type:"",entity_type:""}),r(w=>({...w,offset:0}))},j=w=>{r(M=>({...M,offset:w}))},y=()=>{if(!f.length)return;const w=[["Timestamp","User","Action","Entity Type","Entity ID","Description","IP Address"].join(","),...f.map(E=>[E.created_at,E.user_name,E.action_type,E.entity_type,E.entity_id,E.description||"",E.ip_address||""].map(L=>`"${L}"`).join(","))].join(`
`),M=new Blob([w],{type:"text/csv"}),T=window.URL.createObjectURL(M),N=document.createElement("a");N.href=T,N.download=`activity-logs-${new Date().toISOString()}.csv`,N.click(),window.URL.revokeObjectURL(T)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Sd,{className:"w-8 h-8 mr-3 text-blue-600"}),"Activity Logs"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor and audit all administrative actions"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>x(),className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:y,disabled:f.length===0,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(mu,{className:"w-5 h-5 text-gray-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Type"}),e.jsxs("select",{value:n.action_type,onChange:w=>a({...n,action_type:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"create",children:"Create"}),e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"delete",children:"Delete"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entity Type"}),e.jsxs("select",{value:n.entity_type,onChange:w=>a({...n,entity_type:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Entities"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"menu_item",children:"Menu Item"}),e.jsx("option",{value:"discount",children:"Discount"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"catering",children:"Catering"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User ID"}),e.jsx("input",{type:"text",value:n.user_id,onChange:w=>a({...n,user_id:w.target.value}),placeholder:"Filter by user ID",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Apply Filters"}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:"Clear Filters"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading activity logs..."})]})}):d?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load activity logs"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m instanceof Error?m.message:"An error occurred"}),e.jsx("button",{onClick:()=>x(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Try Again"})]})}):f.length===0?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-gray-600",children:i.action_type||i.entity_type||i.user_id?"Try adjusting your filters":"Activity logs will appear here as actions are performed"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Entity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"IP Address"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:sb(w.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.user_name}),e.jsx("div",{className:"text-xs text-gray-500",children:w.user_id})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${rb(w.action_type)}`,children:w.action_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[nb(w.entity_type),e.jsx("span",{className:"ml-2",children:w.entity_type})]}),e.jsx("div",{className:"text-xs text-gray-500",children:w.entity_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-md truncate",children:w.description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.ip_address||"-"})]},w.log_id))})]})}),e.jsx("div",{className:"lg:hidden divide-y divide-gray-200",children:f.map(w=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.user_name}),e.jsx("div",{className:"text-xs text-gray-500",children:sb(w.created_at)})]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${rb(w.action_type)}`,children:w.action_type})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[nb(w.entity_type),e.jsxs("span",{className:"ml-2",children:[w.entity_type,": ",w.entity_id]})]}),w.description&&e.jsx("div",{className:"text-gray-600",children:w.description}),w.ip_address&&e.jsxs("div",{className:"text-xs text-gray-500",children:["IP: ",w.ip_address]})]})]},w.log_id))}),h>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:s.offset+1})," -"," ",e.jsx("span",{className:"font-medium",children:Math.min(s.offset+s.limit,b)})," ","of ",e.jsx("span",{className:"font-medium",children:b})," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(Math.max(0,s.offset-s.limit)),disabled:p===1,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",p," of ",h]}),e.jsx("button",{onClick:()=>j(s.offset+s.limit),disabled:p===h,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})})]})})};function dO(t){const s=uO(t),r=u.forwardRef((n,a)=>{const{children:i,...o}=n,l=u.Children.toArray(i),c=l.find(xO);if(c){const d=c.props.children,m=l.map(x=>x===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...o,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,m):null})}return e.jsx(s,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function uO(t){const s=u.forwardRef((r,n)=>{const{children:a,...i}=r;if(u.isValidElement(a)){const o=pO(a),l=hO(i,a.props);return a.type!==u.Fragment&&(l.ref=n?qn(n,o):o),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var mO=Symbol("radix.slottable");function xO(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mO}function hO(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function pO(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Fu="Dialog",[K1]=Ta(Fu),[fO,Zs]=K1(Fu),Y1=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=u.useRef(null),c=u.useRef(null),[d,m]=xu({prop:n,defaultProp:a??!1,onChange:i,caller:Fu});return e.jsx(fO,{scope:s,triggerRef:l,contentRef:c,contentId:oi(),titleId:oi(),descriptionId:oi(),open:d,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(x=>!x),[m]),modal:o,children:r})};Y1.displayName=Fu;var G1="DialogTrigger",gO=u.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Zs(G1,r),i=_t(s,a.triggerRef);return e.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Np(a.open),...n,ref:i,onClick:Ee(t.onClick,a.onOpenToggle)})});gO.displayName=G1;var jp="DialogPortal",[yO,X1]=K1(jp,{forceMount:void 0}),J1=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,i=Zs(jp,s);return e.jsx(yO,{scope:s,forceMount:r,children:u.Children.map(n,o=>e.jsx(Vr,{present:r||i.open,children:e.jsx(bu,{asChild:!0,container:a,children:o})}))})};J1.displayName=jp;var zd="DialogOverlay",Z1=u.forwardRef((t,s)=>{const r=X1(zd,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Zs(zd,t.__scopeDialog);return i.modal?e.jsx(Vr,{present:n||i.open,children:e.jsx(vO,{...a,ref:s})}):null});Z1.displayName=zd;var bO=dO("DialogOverlay.RemoveScroll"),vO=u.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Zs(zd,r);return e.jsx(rp,{as:bO,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Ze.div,{"data-state":Np(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),Pa="DialogContent",e_=u.forwardRef((t,s)=>{const r=X1(Pa,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Zs(Pa,t.__scopeDialog);return e.jsx(Vr,{present:n||i.open,children:i.modal?e.jsx(jO,{...a,ref:s}):e.jsx(wO,{...a,ref:s})})});e_.displayName=Pa;var jO=u.forwardRef((t,s)=>{const r=Zs(Pa,t.__scopeDialog),n=u.useRef(null),a=_t(s,r.contentRef,n);return u.useEffect(()=>{const i=n.current;if(i)return A2(i)},[]),e.jsx(t_,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ee(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ee(t.onFocusOutside,i=>i.preventDefault())})}),wO=u.forwardRef((t,s)=>{const r=Zs(Pa,t.__scopeDialog),n=u.useRef(!1),a=u.useRef(!1);return e.jsx(t_,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),t_=u.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=t,l=Zs(Pa,r),c=u.useRef(null),d=_t(s,c);return Zw(),e.jsxs(e.Fragment,{children:[e.jsx(K0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(hu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Np(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(NO,{titleId:l.titleId}),e.jsx(kO,{contentRef:c,descriptionId:l.descriptionId})]})]})}),wp="DialogTitle",s_=u.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Zs(wp,r);return e.jsx(Ze.h2,{id:a.titleId,...n,ref:s})});s_.displayName=wp;var r_="DialogDescription",n_=u.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Zs(r_,r);return e.jsx(Ze.p,{id:a.descriptionId,...n,ref:s})});n_.displayName=r_;var a_="DialogClose",i_=u.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Zs(a_,r);return e.jsx(Ze.button,{type:"button",...n,ref:s,onClick:Ee(t.onClick,()=>a.onOpenChange(!1))})});i_.displayName=a_;function Np(t){return t?"open":"closed"}var o_="DialogTitleWarning",[x$,l_]=OS(o_,{contentName:Pa,titleName:wp,docsSlug:"dialog"}),NO=({titleId:t})=>{const s=l_(o_),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return u.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},_O="DialogDescriptionWarning",kO=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l_(_O).contentName}}.`;return u.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},CO=Y1,SO=J1,c_=Z1,d_=e_,u_=s_,m_=n_,EO=i_;const _c=CO,PO=SO,x_=u.forwardRef(({className:t,...s},r)=>e.jsx(c_,{ref:r,className:Ie("fixed inset-0 z-50 bg-black/60 backdrop-blur-[2px]","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));x_.displayName=c_.displayName;const Ao=u.forwardRef(({className:t,children:s,showClose:r=!0,...n},a)=>e.jsxs(PO,{children:[e.jsx(x_,{}),e.jsxs(d_,{ref:a,className:Ie("fixed left-[50%] top-[50%] z-50 translate-x-[-50%] translate-y-[-50%]","w-[calc(100vw-2rem)] max-w-[900px]","max-h-[90vh]","bg-white rounded-[1.5rem] shadow-[0_12px_32px_0_rgba(44,26,22,0.15)]","sm:max-h-[90vh]","max-[640px]:w-[100vw] max-[640px]:h-[100vh] max-[640px]:max-h-[100vh] max-[640px]:rounded-none","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","flex flex-col","focus:outline-none",t),...n,children:[s,r&&e.jsxs(EO,{className:"absolute right-4 top-4 rounded-lg p-2 opacity-70 transition-all hover:opacity-100 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100",children:[e.jsx(Ae,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ao.displayName=d_.displayName;const Fo=({className:t,...s})=>e.jsx("div",{className:Ie("flex flex-col space-y-1.5 px-6 py-5 border-b border-gray-200 shrink-0","max-[640px]:px-4 max-[640px]:py-4",t),...s});Fo.displayName="DialogHeader";const To=({className:t,...s})=>e.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 gap-3 sm:gap-0","px-6 py-5 border-t border-gray-200 shrink-0 bg-gray-50","max-[640px]:px-4 max-[640px]:py-4",t),...s});To.displayName="DialogFooter";const Ph=({className:t,...s})=>e.jsx("div",{className:Ie("flex-1 overflow-y-auto px-6 py-6","max-[640px]:px-4 max-[640px]:py-4",t),...s});Ph.displayName="DialogBody";const Mo=u.forwardRef(({className:t,...s},r)=>e.jsx(u_,{ref:r,className:Ie("text-xl font-semibold text-gray-900 leading-tight",t),...s}));Mo.displayName=u_.displayName;const Ro=u.forwardRef(({className:t,...s},r)=>e.jsx(m_,{ref:r,className:Ie("text-sm text-gray-600",t),...s}));Ro.displayName=m_.displayName;const Xn=({title:t,description:s,className:r,children:n,...a})=>e.jsxs("div",{className:Ie("space-y-4",r),...a,children:[(t||s)&&e.jsxs("div",{className:"space-y-1",children:[t&&e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:t}),s&&e.jsx("p",{className:"text-sm text-gray-600",children:s})]}),e.jsx("div",{className:"space-y-4",children:n})]});Xn.displayName="DialogSection";const Hr="https://123salama-lama-food-truck.launchpulse.ai",AO=async t=>(await Q.get(`${Hr}/api/admin/menu/builder-config`,{headers:{Authorization:`Bearer ${t}`}})).data.config||null,FO=async t=>(await Q.get(`${Hr}/api/admin/menu/builder-steps`,{headers:{Authorization:`Bearer ${t}`}})).data.steps||[],TO=async t=>(await Q.get(`${Hr}/api/admin/menu/categories`,{headers:{Authorization:`Bearer ${t}`}})).data.categories||[],MO=async t=>(await Q.get(`${Hr}/api/admin/menu/items`,{headers:{Authorization:`Bearer ${t}`}})).data.items||[],RO=async(t,s)=>{await Q.put(`${Hr}/api/admin/menu/builder-config`,s,{headers:{Authorization:`Bearer ${t}`}})},LO=async(t,s)=>(await Q.post(`${Hr}/api/admin/menu/builder-steps`,s,{headers:{Authorization:`Bearer ${t}`}})).data,DO=async(t,s)=>{await Q.delete(`${Hr}/api/admin/menu/builder-steps/${s}`,{headers:{Authorization:`Bearer ${t}`}})},OO=async(t,s)=>(await Q.post(`${Hr}/api/admin/menu/builder-step-items`,s,{headers:{Authorization:`Bearer ${t}`}})).data,$O=async(t,s)=>{await Q.delete(`${Hr}/api/admin/menu/builder-step-items/${s}`,{headers:{Authorization:`Bearer ${t}`}})},IO=()=>{const t=Z(U=>U.authentication_state.auth_token),[s,r]=u.useState(!1),[n,a]=u.useState([]),[i,o]=u.useState(!1),[l,c]=u.useState(!1),[d,m]=u.useState(null),[x,f]=u.useState({step_name:"",step_key:"",step_type:"single",is_required:!0,min_selections:1,max_selections:1,sort_order:0}),[b,h]=u.useState(!1),[p,v]=u.useState(null),[g,j]=u.useState({item_id:"",override_price:"",sort_order:0,is_active:!0}),[y,w]=u.useState(new Set),[M,T]=u.useState(null),[N,E]=u.useState(null),[L,k]=u.useState(null),S=Ue(),{data:F,isLoading:P,error:I}=ue({queryKey:["builder_config"],queryFn:()=>AO(t),enabled:!!t,staleTime:5*60*1e3}),{data:H,isLoading:z,error:B}=ue({queryKey:["builder_steps"],queryFn:()=>FO(t),enabled:!!t,staleTime:5*60*1e3}),{data:C}=ue({queryKey:["admin_categories"],queryFn:()=>TO(t),enabled:!!t,staleTime:5*60*1e3}),{data:R}=ue({queryKey:["admin_menu_items"],queryFn:()=>MO(t),enabled:!!t,staleTime:5*60*1e3}),_=ce({mutationFn:U=>RO(t,U),onSuccess:()=>{S.invalidateQueries({queryKey:["builder_config"]}),G("success","Builder configuration updated successfully")},onError:U=>{var W,oe;G("error",((oe=(W=U.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to update configuration")}}),q=ce({mutationFn:U=>LO(t,U),onSuccess:()=>{S.invalidateQueries({queryKey:["builder_steps"]}),c(!1),m(null),se(),G("success","Builder step saved successfully")},onError:U=>{var W,oe;G("error",((oe=(W=U.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to save step")}}),O=ce({mutationFn:U=>DO(t,U),onSuccess:()=>{S.invalidateQueries({queryKey:["builder_steps"]}),T(null),G("success","Builder step deleted successfully")},onError:U=>{var W,oe;G("error",((oe=(W=U.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to delete step")}}),V=ce({mutationFn:U=>OO(t,U),onSuccess:()=>{S.invalidateQueries({queryKey:["builder_steps"]}),h(!1),v(null),le(),G("success","Item added to step successfully")},onError:U=>{var W,oe;G("error",((oe=(W=U.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to add item")}}),D=ce({mutationFn:U=>$O(t,U),onSuccess:()=>{S.invalidateQueries({queryKey:["builder_steps"]}),E(null),G("success","Item removed from step successfully")},onError:U=>{var W,oe;G("error",((oe=(W=U.response)==null?void 0:W.data)==null?void 0:oe.message)||"Failed to remove item")}});u.useEffect(()=>{F&&(r(F.enabled),a(F.builder_category_ids||[]),o(F.include_base_item_price))},[F]),u.useEffect(()=>{if(L){const U=setTimeout(()=>k(null),5e3);return()=>clearTimeout(U)}},[L]);const G=(U,W)=>{k({type:U,message:W})},se=()=>{f({step_name:"",step_key:"",step_type:"single",is_required:!0,min_selections:1,max_selections:1,sort_order:((H==null?void 0:H.length)||0)+1})},le=()=>{j({item_id:"",override_price:"",sort_order:0,is_active:!0})},K=U=>{w(W=>{const oe=new Set(W);return oe.has(U)?oe.delete(U):oe.add(U),oe})},A=()=>{se(),m(null),c(!0)},$=U=>{m(U),f({step_name:U.step_name,step_key:U.step_key,step_type:U.step_type,is_required:U.is_required,min_selections:U.min_selections,max_selections:U.max_selections,sort_order:U.sort_order}),c(!0)},re=U=>{var W;v(U),j({item_id:"",override_price:"",sort_order:(((W=U.items)==null?void 0:W.length)||0)+1,is_active:!0}),h(!0)},ve=()=>{_.mutate({enabled:s,builder_category_ids:n,include_base_item_price:i})},xe=U=>{a(W=>W.includes(U)?W.filter(oe=>oe!==U):[...W,U])},ke=U=>{U.preventDefault();const W={...d!=null&&d.step_id?{step_id:d.step_id}:{},step_name:x.step_name,step_key:x.step_key,step_type:x.step_type,is_required:x.is_required,min_selections:x.min_selections,max_selections:x.step_type==="single"?1:x.max_selections,sort_order:x.sort_order};q.mutate(W)},Ce=U=>{if(U.preventDefault(),!p)return;const W={step_id:p.step_id,item_id:g.item_id,override_price:g.override_price?Number(g.override_price):null,sort_order:g.sort_order,is_active:g.is_active};V.mutate(W)},Pe=U=>{O.mutate(U)},ne=U=>{D.mutate(U)},be=U=>{var oe;const W=new Set(((oe=U.items)==null?void 0:oe.map(je=>je.item_id))||[]);return(R||[]).filter(je=>!W.has(je.item_id)&&je.is_active)};return P||z?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading menu builder settings..."})]})})})}):I||B?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to Load Builder Settings"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:(I==null?void 0:I.message)||(B==null?void 0:B.message)||"Please try again later"})]})]})})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Vc,{className:"h-8 w-8 text-orange-600 mr-3"}),"Menu Builder Configuration"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure the step-by-step builder for Subs and Wraps"})]}),L&&e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md rounded-lg shadow-lg p-4 ${L.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[L.type==="success"?e.jsx(Ge,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):e.jsx(me,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm font-medium ${L.type==="success"?"text-green-800":"text-red-800"}`,children:L.message})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pl,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Builder Settings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vw,{className:`h-6 w-6 mr-3 ${s?"text-green-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Builder ",s?"Enabled":"Disabled"]}),e.jsx("p",{className:"text-sm text-gray-600",children:s?"Subs & Wraps will open the step-by-step builder":"All items use standard add-to-cart behavior"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${s?"bg-green-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${s?"translate-x-7":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(Mi,{className:"inline h-4 w-4 mr-1"}),"Categories that trigger the builder"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:(C||[]).map(U=>e.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${n.includes(U.category_id)?"border-orange-500 bg-orange-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:n.includes(U.category_id),onChange:()=>xe(U.category_id),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:U.name})]},U.category_id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Items in selected categories will show "Customize & Add" instead of direct add-to-cart'})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"include_base_price",checked:i,onChange:U=>o(U.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"include_base_price",className:"ml-2 text-sm font-medium text-gray-700",children:"Include original item price in total (add to builder selections)"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:ve,disabled:_.isPending,className:"flex items-center px-6 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vc,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Builder Steps"})]}),e.jsxs("button",{onClick:A,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Add Step"]})]}),(H||[]).length>0?e.jsx("div",{className:"space-y-4",children:(H||[]).sort((U,W)=>U.sort_order-W.sort_order).map(U=>{var W;return e.jsxs("div",{className:"border rounded-lg bg-white overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-b cursor-pointer",onClick:()=>K(U.step_id),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ed,{className:"h-5 w-5 text-gray-400 mr-2"}),y.has(U.step_id)?e.jsx(lr,{className:"h-5 w-5 text-gray-500 mr-2"}):e.jsx(We,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[U.sort_order,". ",U.step_name]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 uppercase",children:["Key: ",U.step_key]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${U.step_type==="single"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:U.step_type==="single"?"Single Select":"Multi Select"}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${U.is_required?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:U.is_required?"Required":"Optional"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[((W=U.items)==null?void 0:W.length)||0," items"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:oe=>oe.stopPropagation(),children:[e.jsx("button",{onClick:()=>$(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Step",children:e.jsx(fa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(U.step_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Step",children:e.jsx(It,{className:"h-4 w-4"})})]})]}),y.has(U.step_id)&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Items in this step"}),e.jsxs("button",{onClick:()=>re(U),className:"flex items-center px-3 py-1.5 text-sm bg-orange-100 text-orange-700 rounded-lg font-medium hover:bg-orange-200 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),(U.items||[]).length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(U.items||[]).sort((oe,je)=>oe.sort_order-je.sort_order).map(oe=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${oe.is_active&&oe.item_is_active!==!1?"border-gray-200 bg-white":"border-gray-300 bg-gray-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:oe.name}),e.jsx("p",{className:"text-xs text-gray-500",children:oe.override_price!==null?`${Number(oe.override_price).toFixed(2)} (override)`:`${Number(oe.effective_price).toFixed(2)}`})]}),e.jsx("button",{onClick:()=>E({step_item_id:oe.step_item_id,step_id:U.step_id}),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors ml-2",title:"Remove from step",children:e.jsx(Ae,{className:"h-4 w-4"})})]},oe.step_item_id))}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No items in this step"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Add items that customers can choose from"})]})]})]},U.step_id)})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Vc,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No builder steps configured"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create steps like Base, Protein, Toppings, Sauce"})]})]})]}),e.jsx(_c,{open:l,onOpenChange:U=>{U||(c(!1),m(null),se())},children:e.jsxs(Ao,{className:"max-w-[900px]",children:[e.jsxs(Fo,{children:[e.jsx(Mo,{children:d?"Edit Builder Step":"Create Builder Step"}),e.jsx(Ro,{children:"Configure a step in the menu builder workflow (e.g., Base, Protein, Toppings, Sauce)"})]}),e.jsxs("form",{onSubmit:ke,children:[e.jsxs(Ph,{className:"space-y-6",children:[e.jsx(Xn,{title:"Step Details",description:"Basic information about this builder step",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"step_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Step Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"step_name",required:!0,value:x.step_name,onChange:U=>f(W=>({...W,step_name:U.target.value})),placeholder:"e.g., Choose Your Base",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Customer-facing name displayed in the builder"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"step_key",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Step Key ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"step_key",required:!0,value:x.step_key,onChange:U=>f(W=>({...W,step_key:U.target.value.toLowerCase().replace(/\s+/g,"_")})),placeholder:"e.g., base, protein, toppings",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Internal identifier (lowercase, underscores only)"})]})]})}),e.jsx(Xn,{title:"Selection Rules",description:"Configure how customers can select items in this step",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"step_type",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Selection Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"step_type",required:!0,value:x.step_type,onChange:U=>f(W=>({...W,step_type:U.target.value,max_selections:U.target.value==="single"?1:W.max_selections})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",children:[e.jsx("option",{value:"single",children:"Single Selection (choose one)"}),e.jsx("option",{value:"multiple",children:"Multiple Selection (choose many)"})]})]}),x.step_type==="multiple"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min_selections",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Min Selections"}),e.jsx("input",{type:"number",id:"min_selections",value:x.min_selections,onChange:U=>f(W=>({...W,min_selections:Number(U.target.value)})),min:"0",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum items required"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max_selections",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Max Selections"}),e.jsx("input",{type:"number",id:"max_selections",value:x.max_selections||"",onChange:U=>f(W=>({...W,max_selections:U.target.value?Number(U.target.value):null})),min:"1",placeholder:"Unlimited",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Maximum items allowed (blank for unlimited)"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"is_required",checked:x.is_required,onChange:U=>f(W=>({...W,is_required:U.target.checked})),className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-gray-300 rounded mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"is_required",className:"block text-sm font-semibold text-gray-900 cursor-pointer",children:"Required Step"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Customer must make a selection to continue"})]})]})]})}),e.jsx(Xn,{title:"Display Order",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort_order",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",id:"sort_order",value:x.sort_order,onChange:U=>f(W=>({...W,sort_order:Number(U.target.value)})),min:"0",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Lower numbers appear first in the builder flow"})]})})]}),e.jsxs(To,{children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),m(null),se()},className:"w-full sm:w-auto px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:q.isPending,className:"w-full sm:w-auto px-6 py-2.5 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:q.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),d?"Update Step":"Create Step"]})})]})]})]})}),e.jsx(_c,{open:b,onOpenChange:U=>{U||(h(!1),v(null),le())},children:e.jsxs(Ao,{className:"max-w-[900px]",children:[e.jsxs(Fo,{children:[e.jsxs(Mo,{children:['Add Item to "',p==null?void 0:p.step_name,'"']}),e.jsx(Ro,{children:"Select a menu item and configure how it appears in this builder step"})]}),e.jsxs("form",{onSubmit:Ce,children:[e.jsxs(Ph,{className:"space-y-6",children:[e.jsx(Xn,{title:"Item Selection",description:"Choose which menu item to add to this step",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"item_id",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Menu Item ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"item_id",required:!0,value:g.item_id,onChange:U=>j(W=>({...W,item_id:U.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",children:[e.jsx("option",{value:"",children:"-- Select an item --"}),p&&be(p).map(U=>e.jsxs("option",{value:U.item_id,children:[U.name," - ",Number(U.price).toFixed(2)]},U.item_id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Only active items not already in this step are shown"})]})}),e.jsx(Xn,{title:"Display & Pricing",description:"Configure price and display order",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"override_price",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Override Price ()"}),e.jsx("input",{type:"number",id:"override_price",value:g.override_price,onChange:U=>j(W=>({...W,override_price:U.target.value})),placeholder:"Leave empty for default",step:"0.01",min:"0",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Set a custom price for this builder step"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"item_sort_order",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",id:"item_sort_order",value:g.sort_order,onChange:U=>j(W=>({...W,sort_order:Number(U.target.value)})),min:"0",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Lower numbers appear first"})]})]})}),e.jsx(Xn,{title:"Availability",children:e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"item_is_active",checked:g.is_active,onChange:U=>j(W=>({...W,is_active:U.target.checked})),className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-gray-300 rounded mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"item_is_active",className:"block text-sm font-semibold text-gray-900 cursor-pointer",children:"Active in Builder"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"When enabled, customers will see this item as an option in the builder"})]})]})})]}),e.jsxs(To,{children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),v(null),le()},className:"w-full sm:w-auto px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:V.isPending||!g.item_id,className:"w-full sm:w-auto px-6 py-2.5 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:V.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Add Item"]})})]})]})]})}),e.jsx(_c,{open:!!M,onOpenChange:U=>{U||T(null)},children:e.jsxs(Ao,{className:"max-w-[500px]",children:[e.jsxs(Fo,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-red-600"})}),e.jsx(Mo,{children:"Delete Builder Step"})]}),e.jsx(Ro,{children:"Are you sure you want to delete this step? All items assigned to it will also be removed. This action cannot be undone."})]}),e.jsxs(To,{children:[e.jsx("button",{onClick:()=>T(null),className:"w-full sm:w-auto px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>M&&Pe(M),disabled:O.isPending,className:"w-full sm:w-auto px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:O.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Step"})]})]})}),e.jsx(_c,{open:!!N,onOpenChange:U=>{U||E(null)},children:e.jsxs(Ao,{className:"max-w-[500px]",children:[e.jsxs(Fo,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-red-600"})}),e.jsx(Mo,{children:"Remove Item from Step"})]}),e.jsx(Ro,{children:"Are you sure you want to remove this item from the step? The menu item itself will not be deleted."})]}),e.jsxs(To,{children:[e.jsx("button",{onClick:()=>E(null),className:"w-full sm:w-auto px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>N&&ne(N.step_item_id),disabled:D.isPending,className:"w-full sm:w-auto px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:D.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Removing..."]}):"Remove Item"})]})]})})]})},zO=new p6({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),Tu=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F2EFE9]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-pulse-slow",children:e.jsx("img",{src:"/salama-lama-logo.png",alt:"Salama Lama Logo",className:"h-32 w-auto object-contain mx-auto",style:{filter:"sepia(0.3) saturate(1.2) hue-rotate(-5deg) drop-shadow(0 4px 6px rgba(44, 26, 22, 0.1))"}})}),e.jsx("p",{className:"mt-6 text-[#2C1A16] font-medium text-lg",children:"Loading Salama Lama..."}),e.jsx("style",{children:`
        @keyframes pulse-slow {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.7;
            transform: scale(0.95);
          }
        }
        .animate-pulse-slow {
          animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}),_r=({children:t})=>{const s=js(),r=Z(i=>i.authentication_state.authentication_status.is_authenticated),n=Z(i=>i.authentication_state.authentication_status.is_loading),a=Z(i=>{var o;return(o=i.authentication_state.current_user)==null?void 0:o.role});if(n)return e.jsx(Tu,{});if(!r){const i=encodeURIComponent(s.pathname+s.search);return e.jsx(es,{to:`/login?${Dw}=${i}`,replace:!0})}return a!=="customer"&&a!=="guest"?a==="staff"||a==="manager"?e.jsx(es,{to:"/staff/dashboard",replace:!0}):a==="admin"?e.jsx(es,{to:"/admin/dashboard",replace:!0}):e.jsx(es,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t})},qa=({children:t})=>{const s=Z(a=>a.authentication_state.authentication_status.is_authenticated),r=Z(a=>a.authentication_state.authentication_status.is_loading),n=Z(a=>{var i;return(i=a.authentication_state.current_user)==null?void 0:i.role});return r?e.jsx(Tu,{}):s?n!=="staff"&&n!=="manager"?n==="customer"?e.jsx(es,{to:"/dashboard",replace:!0}):n==="admin"?e.jsx(es,{to:"/admin/dashboard",replace:!0}):e.jsx(es,{to:"/staff/login",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(es,{to:"/staff/login",replace:!0})},st=({children:t})=>{const s=Z(a=>a.authentication_state.authentication_status.is_authenticated),r=Z(a=>a.authentication_state.authentication_status.is_loading),n=Z(a=>{var i;return(i=a.authentication_state.current_user)==null?void 0:i.role});return r?e.jsx(Tu,{}):s?n!=="admin"?n==="customer"?e.jsx(es,{to:"/dashboard",replace:!0}):n==="staff"||n==="manager"?e.jsx(es,{to:"/staff/dashboard",replace:!0}):e.jsx(es,{to:"/admin/login",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(es,{to:"/admin/login",replace:!0})},BO=({children:t})=>{const s=js(),r=Z(b=>b.authentication_state.authentication_status.is_authenticated),n=Z(b=>{var h;return(h=b.authentication_state.current_user)==null?void 0:h.role}),a=s.pathname.startsWith("/admin"),i=s.pathname.startsWith("/staff"),o=s.pathname==="/admin/login",c=["/","/menu","/catering","/dashboard","/cart","/about","/contact","/faqs","/terms","/privacy","/track-order","/orders","/rewards","/profile","/addresses","/payment-methods"].includes(s.pathname)||s.pathname.startsWith("/catering/")||s.pathname.startsWith("/orders/"),d=a||i,m=!a&&!i&&!r,x=a&&r&&n==="admin"&&!o;let f=null;return i&&r&&(n==="staff"||n==="manager")?f=fF:!a&&!i&&(f=BA),e.jsxs("div",{className:`min-h-screen flex flex-col ${x?"overflow-hidden max-w-full":""}`,children:[f&&e.jsx(f,{}),x?e.jsxs("div",{className:"admin-app-shell flex-1 flex flex-col lg:flex-row min-h-0 bg-gray-50 overflow-hidden",children:[e.jsx(bF,{}),e.jsx("main",{className:"admin-main-content flex-1 min-w-0 w-full pt-14 lg:pt-0 lg:ml-64 overflow-y-auto overflow-x-hidden",children:e.jsx("div",{className:"min-h-full w-full max-w-full",children:t})})]}):e.jsx("div",{className:`flex-1 flex ${a?"bg-gray-50":""}`,children:e.jsx("main",{className:"flex-1 w-full",children:t})}),!d&&e.jsx(_F,{}),c&&e.jsx(SF,{}),m&&e.jsx(kF,{})]})},qO=()=>e.jsx(BO,{children:e.jsxs(Rk,{children:[e.jsx(ge,{path:"/",element:e.jsx(i9,{})}),e.jsx(ge,{path:"/about",element:e.jsx(eM,{})}),e.jsx(ge,{path:"/contact",element:e.jsx(tM,{})}),e.jsx(ge,{path:"/faqs",element:e.jsx(sM,{})}),e.jsx(ge,{path:"/terms",element:e.jsx(mM,{})}),e.jsx(ge,{path:"/privacy",element:e.jsx(pM,{})}),e.jsx(ge,{path:"/track-order",element:e.jsx(uM,{})}),e.jsx(ge,{path:"/menu",element:e.jsx(N9,{})}),e.jsx(ge,{path:"/menu-old",element:e.jsx(j9,{})}),e.jsx(ge,{path:"/cart",element:e.jsx(_9,{})}),e.jsx(ge,{path:"/catering",element:e.jsx(zT,{})}),e.jsx(ge,{path:"/catering/inquiry",element:e.jsx(qT,{})}),e.jsx(ge,{path:"/login",element:e.jsx(H9,{})}),e.jsx(ge,{path:"/signup",element:e.jsx(V9,{})}),e.jsx(ge,{path:"/forgot-password",element:e.jsx(K9,{})}),e.jsx(ge,{path:"/reset-password/:token",element:e.jsx(G9,{})}),e.jsx(ge,{path:"/verify-email/:token",element:e.jsx(X9,{})}),e.jsx(ge,{path:"/dashboard",element:e.jsx(_r,{children:e.jsx(tT,{})})}),e.jsx(ge,{path:"/profile",element:e.jsx(_r,{children:e.jsx(oT,{})})}),e.jsx(ge,{path:"/addresses",element:e.jsx(_r,{children:e.jsx(xT,{})})}),e.jsx(ge,{path:"/payment-methods",element:e.jsx(_r,{children:e.jsx(wT,{})})}),e.jsx(ge,{path:"/orders",element:e.jsx(_r,{children:e.jsx(kT,{})})}),e.jsx(ge,{path:"/orders/:order_id",element:e.jsx(_r,{children:e.jsx(AT,{})})}),e.jsx(ge,{path:"/track/:ticketNumber",element:e.jsx(W9,{})}),e.jsx(ge,{path:"/order-confirmation",element:e.jsx(cy,{fallbackRoute:"/menu",fallbackMessage:"We encountered an error loading your order confirmation. Please check your order history or contact support if you need assistance.",children:e.jsx(q9,{})})}),e.jsx(ge,{path:"/checkout",element:e.jsx(es,{to:"/checkout/order-type",replace:!0})}),e.jsx(ge,{path:"/checkout/order-type",element:e.jsx(T9,{})}),e.jsx(ge,{path:"/checkout/contact",element:e.jsx(L9,{})}),e.jsx(ge,{path:"/checkout/payment",element:e.jsx($9,{})}),e.jsx(ge,{path:"/checkout/review",element:e.jsx(B9,{})}),e.jsx(ge,{path:"/rewards",element:e.jsx(_r,{children:e.jsx($T,{})})}),e.jsx(ge,{path:"/catering/inquiries",element:e.jsx(_r,{children:e.jsx(WT,{})})}),e.jsx(ge,{path:"/catering/inquiries/:inquiry_id",element:e.jsx(_r,{children:e.jsx(JT,{})})}),e.jsx(ge,{path:"/staff/login",element:e.jsx(fM,{})}),e.jsx(ge,{path:"/staff/dashboard",element:e.jsx(qa,{children:e.jsx(NM,{})})}),e.jsx(ge,{path:"/staff/orders",element:e.jsx(qa,{children:e.jsx(TM,{})})}),e.jsx(ge,{path:"/staff/orders/:order_id",element:e.jsx(qa,{children:e.jsx(DM,{})})}),e.jsx(ge,{path:"/staff/stock",element:e.jsx(qa,{children:e.jsx(IM,{})})}),e.jsx(ge,{path:"/staff/reports",element:e.jsx(qa,{children:e.jsx(zM,{})})}),e.jsx(ge,{path:"/staff/profile",element:e.jsx(qa,{children:e.jsx(WM,{})})}),e.jsx(ge,{path:"/admin/login",element:e.jsx(VM,{})}),e.jsx(ge,{path:"/admin/dashboard",element:e.jsx(st,{children:e.jsx(ZM,{})})}),e.jsx(ge,{path:"/admin/menu",element:e.jsx(st,{children:e.jsx(iR,{})})}),e.jsx(ge,{path:"/admin/menu/item",element:e.jsx(st,{children:e.jsx(mR,{})})}),e.jsx(ge,{path:"/admin/menu/categories",element:e.jsx(st,{children:e.jsx(fR,{})})}),e.jsx(ge,{path:"/admin/menu/builder",element:e.jsx(st,{children:e.jsx(IO,{})})}),e.jsx(ge,{path:"/admin/stock",element:e.jsx(st,{children:e.jsx(vR,{})})}),e.jsx(ge,{path:"/admin/stock/:item_id/history",element:e.jsx(st,{children:e.jsx(jR,{})})}),e.jsx(ge,{path:"/admin/orders",element:e.jsx(st,{children:e.jsx(FL,{})})}),e.jsx(ge,{path:"/admin/orders/:order_id",element:e.jsx(st,{children:e.jsx(OL,{})})}),e.jsx(ge,{path:"/admin/delivery",element:e.jsx(st,{children:e.jsx(WL,{})})}),e.jsx(ge,{path:"/admin/discounts",element:e.jsx(st,{children:e.jsx(KL,{})})}),e.jsx(ge,{path:"/admin/discounts/code",element:e.jsx(st,{children:e.jsx(ZL,{})})}),e.jsx(ge,{path:"/admin/discounts/:code_id/usage",element:e.jsx(st,{children:e.jsx(rD,{})})}),e.jsx(ge,{path:"/admin/customers",element:e.jsx(st,{children:e.jsx(nD,{})})}),e.jsx(ge,{path:"/admin/customers/:customer_id",element:e.jsx(st,{children:e.jsx(aD,{})})}),e.jsx(ge,{path:"/admin/staff",element:e.jsx(st,{children:e.jsx(iD,{})})}),e.jsx(ge,{path:"/admin/staff/member",element:e.jsx(st,{children:e.jsx(dD,{})})}),e.jsx(ge,{path:"/admin/catering",element:e.jsx(st,{children:e.jsx(DD,{})})}),e.jsx(ge,{path:"/admin/catering/:inquiry_id",element:e.jsx(st,{children:e.jsx(cy,{fallbackRoute:"/admin/catering",fallbackMessage:"We encountered an error loading this catering inquiry. Please try again or return to the inquiries list.",children:e.jsx(BD,{})})})}),e.jsx(ge,{path:"/admin/invoices",element:e.jsx(st,{children:e.jsx(qD,{})})}),e.jsx(ge,{path:"/admin/invoices/:invoice_id",element:e.jsx(st,{children:e.jsx(QD,{})})}),e.jsx(ge,{path:"/admin/messages",element:e.jsx(st,{children:e.jsx(XD,{})})}),e.jsx(ge,{path:"/admin/analytics",element:e.jsx(st,{children:e.jsx(sO,{})})}),e.jsx(ge,{path:"/admin/settings",element:e.jsx(st,{children:e.jsx(oO,{})})}),e.jsx(ge,{path:"/admin/activity-logs",element:e.jsx(st,{children:e.jsx(cO,{})})}),e.jsx(ge,{path:"*",element:e.jsx(es,{to:"/",replace:!0})})]})}),UO=()=>{const t=Z(n=>n.authentication_state.authentication_status.is_loading),s=Z(n=>n.initialize_auth),r=Z(n=>n.fetch_business_settings);return u.useEffect(()=>{s(),r()},[]),t?e.jsx(Tu,{}):e.jsx(f6,{client:zO,children:e.jsxs(qk,{children:[e.jsx(qO,{}),e.jsx(t9,{})]})})},WO=()=>e.jsx(e.Fragment,{children:e.jsx(UO,{})});Pj(document.getElementById("root")).render(e.jsx(WO,{}));
