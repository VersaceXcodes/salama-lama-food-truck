var Xm=t=>{throw TypeError(t)};var hc=(t,s,r)=>s.has(t)||Xm("Cannot "+r);var V=(t,s,r)=>(hc(t,s,"read from private field"),r?r.call(t):s.get(t)),me=(t,s,r)=>s.has(t)?Xm("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),oe=(t,s,r,a)=>(hc(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),pe=(t,s,r)=>(hc(t,s,"access private method"),r);var cl=(t,s,r,a)=>({set _(n){oe(t,s,n,r)},get _(){return V(t,s,a)}});function Ty(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function Ay(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G0={exports:{}},$o={},X0={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=Symbol.for("react.element"),My=Symbol.for("react.portal"),Ly=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Ry=Symbol.for("react.profiler"),Oy=Symbol.for("react.provider"),Dy=Symbol.for("react.context"),Iy=Symbol.for("react.forward_ref"),qy=Symbol.for("react.suspense"),zy=Symbol.for("react.memo"),By=Symbol.for("react.lazy"),Jm=Symbol.iterator;function Uy(t){return t===null||typeof t!="object"?null:(t=Jm&&t[Jm]||t["@@iterator"],typeof t=="function"?t:null)}var J0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z0=Object.assign,eg={};function Tn(t,s,r){this.props=t,this.context=s,this.refs=eg,this.updater=r||J0}Tn.prototype.isReactComponent={};Tn.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Tn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tg(){}tg.prototype=Tn.prototype;function Lu(t,s,r){this.props=t,this.context=s,this.refs=eg,this.updater=r||J0}var $u=Lu.prototype=new tg;$u.constructor=Lu;Z0($u,Tn.prototype);$u.isPureReactComponent=!0;var Zm=Array.isArray,sg=Object.prototype.hasOwnProperty,Ru={current:null},rg={key:!0,ref:!0,__self:!0,__source:!0};function ag(t,s,r){var a,n={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)sg.call(s,a)&&!rg.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Yi,type:t,key:i,ref:l,props:n,_owner:Ru.current}}function Vy(t,s){return{$$typeof:Yi,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Ou(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yi}function Wy(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var eh=/\/+/g;function xc(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Wy(""+t.key):s.toString(36)}function Ml(t,s,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Yi:case My:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+xc(l,0):a,Zm(n)?(r="",t!=null&&(r=t.replace(eh,"$&/")+"/"),Ml(n,s,r,"",function(d){return d})):n!=null&&(Ou(n)&&(n=Vy(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(eh,"$&/")+"/")+t)),s.push(n)),1;if(l=0,a=a===""?".":a+":",Zm(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+xc(i,o);l+=Ml(i,s,r,c,n)}else if(c=Uy(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+xc(i,o++),l+=Ml(i,s,r,c,n);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function dl(t,s,r){if(t==null)return t;var a=[],n=0;return Ml(t,a,"","",function(i){return s.call(r,i,n++)}),a}function Hy(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Ll={transition:null},Qy={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:Ru};function ng(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:dl,forEach:function(t,s,r){dl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return dl(t,function(){s++}),s},toArray:function(t){return dl(t,function(s){return s})||[]},only:function(t){if(!Ou(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Tn;be.Fragment=Ly;be.Profiler=Ry;be.PureComponent=Lu;be.StrictMode=$y;be.Suspense=qy;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy;be.act=ng;be.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Z0({},t.props),n=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=Ru.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)sg.call(s,c)&&!rg.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:Yi,type:t.type,key:n,ref:i,props:a,_owner:l}};be.createContext=function(t){return t={$$typeof:Dy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Oy,_context:t},t.Consumer=t};be.createElement=ag;be.createFactory=function(t){var s=ag.bind(null,t);return s.type=t,s};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:Iy,render:t}};be.isValidElement=Ou;be.lazy=function(t){return{$$typeof:By,_payload:{_status:-1,_result:t},_init:Hy}};be.memo=function(t,s){return{$$typeof:zy,type:t,compare:s===void 0?null:s}};be.startTransition=function(t){var s=Ll.transition;Ll.transition={};try{t()}finally{Ll.transition=s}};be.unstable_act=ng;be.useCallback=function(t,s){return kt.current.useCallback(t,s)};be.useContext=function(t){return kt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};be.useEffect=function(t,s){return kt.current.useEffect(t,s)};be.useId=function(){return kt.current.useId()};be.useImperativeHandle=function(t,s,r){return kt.current.useImperativeHandle(t,s,r)};be.useInsertionEffect=function(t,s){return kt.current.useInsertionEffect(t,s)};be.useLayoutEffect=function(t,s){return kt.current.useLayoutEffect(t,s)};be.useMemo=function(t,s){return kt.current.useMemo(t,s)};be.useReducer=function(t,s,r){return kt.current.useReducer(t,s,r)};be.useRef=function(t){return kt.current.useRef(t)};be.useState=function(t){return kt.current.useState(t)};be.useSyncExternalStore=function(t,s,r){return kt.current.useSyncExternalStore(t,s,r)};be.useTransition=function(){return kt.current.useTransition()};be.version="18.3.1";X0.exports=be;var x=X0.exports;const ia=Ay(x),Ky=Ty({__proto__:null,default:ia},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy=x,Gy=Symbol.for("react.element"),Xy=Symbol.for("react.fragment"),Jy=Object.prototype.hasOwnProperty,Zy=Yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eb={key:!0,ref:!0,__self:!0,__source:!0};function ig(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)Jy.call(s,a)&&!eb.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Gy,type:t,key:i,ref:l,props:n,_owner:Zy.current}}$o.Fragment=Xy;$o.jsx=ig;$o.jsxs=ig;G0.exports=$o;var e=G0.exports,lg={exports:{}},Gt={},og={exports:{}},cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(w,$){var B=w.length;w.push($);e:for(;0<B;){var I=B-1>>>1,q=w[I];if(0<n(q,$))w[I]=$,w[B]=q,B=I;else break e}}function r(w){return w.length===0?null:w[0]}function a(w){if(w.length===0)return null;var $=w[0],B=w.pop();if(B!==$){w[0]=B;e:for(var I=0,q=w.length,A=q>>>1;I<A;){var L=2*(I+1)-1,U=w[L],Y=L+1,Q=w[Y];if(0>n(U,B))Y<q&&0>n(Q,U)?(w[I]=Q,w[Y]=B,I=Y):(w[I]=U,w[L]=B,I=L);else if(Y<q&&0>n(Q,B))w[I]=Q,w[Y]=B,I=Y;else break e}}return $}function n(w,$){var B=w.sortIndex-$.sortIndex;return B!==0?B:w.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,b=3,p=!1,g=!1,h=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(w){for(var $=r(d);$!==null;){if($.callback===null)a(d);else if($.startTime<=w)a(d),$.sortIndex=$.expirationTime,s(c,$);else break;$=r(d)}}function k(w){if(h=!1,f(w),!g)if(r(c)!==null)g=!0,S(T);else{var $=r(d);$!==null&&E(k,$.startTime-w)}}function T(w,$){g=!1,h&&(h=!1,j(_),_=-1),p=!0;var B=b;try{for(f($),m=r(c);m!==null&&(!(m.expirationTime>$)||w&&!O());){var I=m.callback;if(typeof I=="function"){m.callback=null,b=m.priorityLevel;var q=I(m.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?m.callback=q:m===r(c)&&a(c),f($)}else a(c);m=r(c)}if(m!==null)var A=!0;else{var L=r(d);L!==null&&E(k,L.startTime-$),A=!1}return A}finally{m=null,b=B,p=!1}}var M=!1,P=null,_=-1,F=5,v=-1;function O(){return!(t.unstable_now()-v<F)}function R(){if(P!==null){var w=t.unstable_now();v=w;var $=!0;try{$=P(!0,w)}finally{$?C():(M=!1,P=null)}}else M=!1}var C;if(typeof y=="function")C=function(){y(R)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,D=z.port2;z.port1.onmessage=R,C=function(){D.postMessage(null)}}else C=function(){N(R,0)};function S(w){P=w,M||(M=!0,C())}function E(w,$){_=N(function(){w(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,S(T))},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(w){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var B=b;b=$;try{return w()}finally{b=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(w,$){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var B=b;b=w;try{return $()}finally{b=B}},t.unstable_scheduleCallback=function(w,$,B){var I=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?I+B:I):B=I,w){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=B+q,w={id:u++,callback:$,priorityLevel:w,startTime:B,expirationTime:q,sortIndex:-1},B>I?(w.sortIndex=B,s(d,w),r(c)===null&&w===r(d)&&(h?(j(_),_=-1):h=!0,E(k,B-I))):(w.sortIndex=q,s(c,w),g||p||(g=!0,S(T))),w},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(w){var $=b;return function(){var B=b;b=$;try{return w.apply(this,arguments)}finally{b=B}}}})(cg);og.exports=cg;var tb=og.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb=x,Yt=tb;function ae(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dg=new Set,Ni={};function $a(t,s){Nn(t,s),Nn(t+"Capture",s)}function Nn(t,s){for(Ni[t]=s,t=0;t<s.length;t++)dg.add(s[t])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,rb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,th={},sh={};function ab(t){return od.call(sh,t)?!0:od.call(th,t)?!1:rb.test(t)?sh[t]=!0:(th[t]=!0,!1)}function nb(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ib(t,s,r,a){if(s===null||typeof s>"u"||nb(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Ct(t,s,r,a,n,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ut[s]=new Ct(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Du=/[\-:]([a-z])/g;function Iu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Du,Iu);ut[s]=new Ct(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Du,Iu);ut[s]=new Ct(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Du,Iu);ut[s]=new Ct(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function qu(t,s,r,a){var n=ut.hasOwnProperty(s)?ut[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(ib(s,r,n,a)&&(r=null),a||n===null?ab(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var dr=sb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),Va=Symbol.for("react.portal"),Wa=Symbol.for("react.fragment"),zu=Symbol.for("react.strict_mode"),cd=Symbol.for("react.profiler"),ug=Symbol.for("react.provider"),mg=Symbol.for("react.context"),Bu=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),ud=Symbol.for("react.suspense_list"),Uu=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),hg=Symbol.for("react.offscreen"),rh=Symbol.iterator;function Un(t){return t===null||typeof t!="object"?null:(t=rh&&t[rh]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,gc;function ni(t){if(gc===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);gc=s&&s[1]||""}return`
`+gc+t}var pc=!1;function fc(t,s){if(!t||pc)return"";pc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{pc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ni(t):""}function lb(t){switch(t.tag){case 5:return ni(t.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return t=fc(t.type,!1),t;case 11:return t=fc(t.type.render,!1),t;case 1:return t=fc(t.type,!0),t;default:return""}}function md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wa:return"Fragment";case Va:return"Portal";case cd:return"Profiler";case zu:return"StrictMode";case dd:return"Suspense";case ud:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mg:return(t.displayName||"Context")+".Consumer";case ug:return(t._context.displayName||"Context")+".Provider";case Bu:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uu:return s=t.displayName||null,s!==null?s:md(t.type)||"Memo";case gr:s=t._payload,t=t._init;try{return md(t(s))}catch{}}return null}function ob(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return md(s);case 8:return s===zu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xg(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cb(t){var s=xg(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ml(t){t._valueTracker||(t._valueTracker=cb(t))}function gg(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=xg(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function to(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hd(t,s){var r=s.checked;return Ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ah(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Ur(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function pg(t,s){s=s.checked,s!=null&&qu(t,"checked",s,!1)}function xd(t,s){pg(t,s);var r=Ur(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?gd(t,s.type,r):s.hasOwnProperty("defaultValue")&&gd(t,s.type,Ur(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function nh(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function gd(t,s,r){(s!=="number"||to(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ii=Array.isArray;function sn(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Ur(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function pd(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ue({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ih(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ae(92));if(ii(r)){if(1<r.length)throw Error(ae(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Ur(r)}}function fg(t,s){var r=Ur(s.value),a=Ur(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function lh(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function yg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?yg(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,bg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function wi(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},db=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){db.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),ui[s]=ui[t]})});function jg(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||ui.hasOwnProperty(t)&&ui[t]?(""+s).trim():s+"px"}function vg(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=jg(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var ub=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yd(t,s){if(s){if(ub[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ae(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ae(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ae(62))}}function bd(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jd=null;function Vu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vd=null,rn=null,an=null;function oh(t){if(t=Ji(t)){if(typeof vd!="function")throw Error(ae(280));var s=t.stateNode;s&&(s=qo(s),vd(t.stateNode,t.type,s))}}function Ng(t){rn?an?an.push(t):an=[t]:rn=t}function wg(){if(rn){var t=rn,s=an;if(an=rn=null,oh(t),s)for(t=0;t<s.length;t++)oh(s[t])}}function _g(t,s){return t(s)}function kg(){}var yc=!1;function Cg(t,s,r){if(yc)return t(s,r);yc=!0;try{return _g(t,s,r)}finally{yc=!1,(rn!==null||an!==null)&&(kg(),wg())}}function _i(t,s){var r=t.stateNode;if(r===null)return null;var a=qo(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,s,typeof r));return r}var Nd=!1;if(ar)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){Nd=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Nd=!1}function mb(t,s,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var mi=!1,so=null,ro=!1,wd=null,hb={onError:function(t){mi=!0,so=t}};function xb(t,s,r,a,n,i,l,o,c){mi=!1,so=null,mb.apply(hb,arguments)}function gb(t,s,r,a,n,i,l,o,c){if(xb.apply(this,arguments),mi){if(mi){var d=so;mi=!1,so=null}else throw Error(ae(198));ro||(ro=!0,wd=d)}}function Ra(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Sg(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ch(t){if(Ra(t)!==t)throw Error(ae(188))}function pb(t){var s=t.alternate;if(!s){if(s=Ra(t),s===null)throw Error(ae(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return ch(n),t;if(i===a)return ch(n),s;i=i.sibling}throw Error(ae(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(ae(189))}}if(r.alternate!==a)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:s}function Pg(t){return t=pb(t),t!==null?Eg(t):null}function Eg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Eg(t);if(s!==null)return s;t=t.sibling}return null}var Fg=Yt.unstable_scheduleCallback,dh=Yt.unstable_cancelCallback,fb=Yt.unstable_shouldYield,yb=Yt.unstable_requestPaint,Ke=Yt.unstable_now,bb=Yt.unstable_getCurrentPriorityLevel,Wu=Yt.unstable_ImmediatePriority,Tg=Yt.unstable_UserBlockingPriority,ao=Yt.unstable_NormalPriority,jb=Yt.unstable_LowPriority,Ag=Yt.unstable_IdlePriority,Ro=null,Ds=null;function vb(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Ro,t,void 0,(t.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:_b,Nb=Math.log,wb=Math.LN2;function _b(t){return t>>>=0,t===0?32:31-(Nb(t)/wb|0)|0}var xl=64,gl=4194304;function li(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function no(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=li(o):(i&=l,i!==0&&(a=li(i)))}else l=r&~n,l!==0?a=li(l):i!==0&&(a=li(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,i=s&-s,n>=i||n===16&&(i&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-js(s),n=1<<r,a|=t[r],s&=~n;return a}function kb(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cb(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-js(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=kb(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function _d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mg(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function bc(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Gi(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-js(s),t[s]=r}function Sb(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-js(r),i=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function Hu(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-js(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Me=0;function Lg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $g,Qu,Rg,Og,Dg,kd=!1,pl=[],Ar=null,Mr=null,Lr=null,ki=new Map,Ci=new Map,fr=[],Pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uh(t,s){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ki.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(s.pointerId)}}function Wn(t,s,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},s!==null&&(s=Ji(s),s!==null&&Qu(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function Eb(t,s,r,a,n){switch(s){case"focusin":return Ar=Wn(Ar,t,s,r,a,n),!0;case"dragenter":return Mr=Wn(Mr,t,s,r,a,n),!0;case"mouseover":return Lr=Wn(Lr,t,s,r,a,n),!0;case"pointerover":var i=n.pointerId;return ki.set(i,Wn(ki.get(i)||null,t,s,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Ci.set(i,Wn(Ci.get(i)||null,t,s,r,a,n)),!0}return!1}function Ig(t){var s=la(t.target);if(s!==null){var r=Ra(s);if(r!==null){if(s=r.tag,s===13){if(s=Sg(r),s!==null){t.blockedOn=s,Dg(t.priority,function(){Rg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $l(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Cd(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);jd=a,r.target.dispatchEvent(a),jd=null}else return s=Ji(r),s!==null&&Qu(s),t.blockedOn=r,!1;s.shift()}return!0}function mh(t,s,r){$l(t)&&r.delete(s)}function Fb(){kd=!1,Ar!==null&&$l(Ar)&&(Ar=null),Mr!==null&&$l(Mr)&&(Mr=null),Lr!==null&&$l(Lr)&&(Lr=null),ki.forEach(mh),Ci.forEach(mh)}function Hn(t,s){t.blockedOn===s&&(t.blockedOn=null,kd||(kd=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Fb)))}function Si(t){function s(n){return Hn(n,t)}if(0<pl.length){Hn(pl[0],t);for(var r=1;r<pl.length;r++){var a=pl[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Ar!==null&&Hn(Ar,t),Mr!==null&&Hn(Mr,t),Lr!==null&&Hn(Lr,t),ki.forEach(s),Ci.forEach(s),r=0;r<fr.length;r++)a=fr[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<fr.length&&(r=fr[0],r.blockedOn===null);)Ig(r),r.blockedOn===null&&fr.shift()}var nn=dr.ReactCurrentBatchConfig,io=!0;function Tb(t,s,r,a){var n=Me,i=nn.transition;nn.transition=null;try{Me=1,Ku(t,s,r,a)}finally{Me=n,nn.transition=i}}function Ab(t,s,r,a){var n=Me,i=nn.transition;nn.transition=null;try{Me=4,Ku(t,s,r,a)}finally{Me=n,nn.transition=i}}function Ku(t,s,r,a){if(io){var n=Cd(t,s,r,a);if(n===null)Ec(t,s,a,lo,r),uh(t,a);else if(Eb(n,t,s,r,a))a.stopPropagation();else if(uh(t,a),s&4&&-1<Pb.indexOf(t)){for(;n!==null;){var i=Ji(n);if(i!==null&&$g(i),i=Cd(t,s,r,a),i===null&&Ec(t,s,a,lo,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else Ec(t,s,a,null,r)}}var lo=null;function Cd(t,s,r,a){if(lo=null,t=Vu(a),t=la(t),t!==null)if(s=Ra(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Sg(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return lo=t,null}function qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bb()){case Wu:return 1;case Tg:return 4;case ao:case jb:return 16;case Ag:return 536870912;default:return 16}default:return 16}}var Pr=null,Yu=null,Rl=null;function zg(){if(Rl)return Rl;var t,s=Yu,r=s.length,a,n="value"in Pr?Pr.value:Pr.textContent,i=n.length;for(t=0;t<r&&s[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&s[r-a]===n[i-a];a++);return Rl=n.slice(t,1<a?1-a:void 0)}function Ol(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function fl(){return!0}function hh(){return!1}function Xt(t){function s(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fl:hh,this.isPropagationStopped=hh,this}return Ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),s}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gu=Xt(An),Xi=Ue({},An,{view:0,detail:0}),Mb=Xt(Xi),jc,vc,Qn,Oo=Ue({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qn&&(Qn&&t.type==="mousemove"?(jc=t.screenX-Qn.screenX,vc=t.screenY-Qn.screenY):vc=jc=0,Qn=t),jc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),xh=Xt(Oo),Lb=Ue({},Oo,{dataTransfer:0}),$b=Xt(Lb),Rb=Ue({},Xi,{relatedTarget:0}),Nc=Xt(Rb),Ob=Ue({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),Db=Xt(Ob),Ib=Ue({},An,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qb=Xt(Ib),zb=Ue({},An,{data:0}),gh=Xt(zb),Bb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wb(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Vb[t])?!!s[t]:!1}function Xu(){return Wb}var Hb=Ue({},Xi,{key:function(t){if(t.key){var s=Bb[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ub[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(t){return t.type==="keypress"?Ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qb=Xt(Hb),Kb=Ue({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ph=Xt(Kb),Yb=Ue({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),Gb=Xt(Yb),Xb=Ue({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jb=Xt(Xb),Zb=Ue({},Oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ej=Xt(Zb),tj=[9,13,27,32],Ju=ar&&"CompositionEvent"in window,hi=null;ar&&"documentMode"in document&&(hi=document.documentMode);var sj=ar&&"TextEvent"in window&&!hi,Bg=ar&&(!Ju||hi&&8<hi&&11>=hi),fh=" ",yh=!1;function Ug(t,s){switch(t){case"keyup":return tj.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function rj(t,s){switch(t){case"compositionend":return Vg(s);case"keypress":return s.which!==32?null:(yh=!0,fh);case"textInput":return t=s.data,t===fh&&yh?null:t;default:return null}}function aj(t,s){if(Ha)return t==="compositionend"||!Ju&&Ug(t,s)?(t=zg(),Rl=Yu=Pr=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bg&&s.locale!=="ko"?null:s.data;default:return null}}var nj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!nj[t.type]:s==="textarea"}function Wg(t,s,r,a){Ng(a),s=oo(s,"onChange"),0<s.length&&(r=new Gu("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var xi=null,Pi=null;function ij(t){sp(t,0)}function Do(t){var s=Ya(t);if(gg(s))return t}function lj(t,s){if(t==="change")return s}var Hg=!1;if(ar){var wc;if(ar){var _c="oninput"in document;if(!_c){var jh=document.createElement("div");jh.setAttribute("oninput","return;"),_c=typeof jh.oninput=="function"}wc=_c}else wc=!1;Hg=wc&&(!document.documentMode||9<document.documentMode)}function vh(){xi&&(xi.detachEvent("onpropertychange",Qg),Pi=xi=null)}function Qg(t){if(t.propertyName==="value"&&Do(Pi)){var s=[];Wg(s,Pi,t,Vu(t)),Cg(ij,s)}}function oj(t,s,r){t==="focusin"?(vh(),xi=s,Pi=r,xi.attachEvent("onpropertychange",Qg)):t==="focusout"&&vh()}function cj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Do(Pi)}function dj(t,s){if(t==="click")return Do(s)}function uj(t,s){if(t==="input"||t==="change")return Do(s)}function mj(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ws=typeof Object.is=="function"?Object.is:mj;function Ei(t,s){if(ws(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!od.call(s,n)||!ws(t[n],s[n]))return!1}return!0}function Nh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wh(t,s){var r=Nh(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nh(r)}}function Kg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Kg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Yg(){for(var t=window,s=to();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=to(t.document)}return s}function Zu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function hj(t){var s=Yg(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Kg(r.ownerDocument.documentElement,r)){if(a!==null&&Zu(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=wh(r,i);var l=wh(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xj=ar&&"documentMode"in document&&11>=document.documentMode,Qa=null,Sd=null,gi=null,Pd=!1;function _h(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pd||Qa==null||Qa!==to(a)||(a=Qa,"selectionStart"in a&&Zu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),gi&&Ei(gi,a)||(gi=a,a=oo(Sd,"onSelect"),0<a.length&&(s=new Gu("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Qa)))}function yl(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ka={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},kc={},Gg={};ar&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Io(t){if(kc[t])return kc[t];if(!Ka[t])return t;var s=Ka[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Gg)return kc[t]=s[r];return t}var Xg=Io("animationend"),Jg=Io("animationiteration"),Zg=Io("animationstart"),ep=Io("transitionend"),tp=new Map,kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,s){tp.set(t,s),$a(s,[t])}for(var Cc=0;Cc<kh.length;Cc++){var Sc=kh[Cc],gj=Sc.toLowerCase(),pj=Sc[0].toUpperCase()+Sc.slice(1);Qr(gj,"on"+pj)}Qr(Xg,"onAnimationEnd");Qr(Jg,"onAnimationIteration");Qr(Zg,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(ep,"onTransitionEnd");Nn("onMouseEnter",["mouseout","mouseover"]);Nn("onMouseLeave",["mouseout","mouseover"]);Nn("onPointerEnter",["pointerout","pointerover"]);Nn("onPointerLeave",["pointerout","pointerover"]);$a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$a("onBeforeInput",["compositionend","keypress","textInput","paste"]);$a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fj=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function Ch(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,gb(a,s,void 0,t),t.currentTarget=null}function sp(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;Ch(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;Ch(n,o,d),i=c}}}if(ro)throw t=wd,ro=!1,wd=null,t}function Oe(t,s){var r=s[Md];r===void 0&&(r=s[Md]=new Set);var a=t+"__bubble";r.has(a)||(rp(s,t,2,!1),r.add(a))}function Pc(t,s,r){var a=0;s&&(a|=4),rp(r,t,a,s)}var bl="_reactListening"+Math.random().toString(36).slice(2);function Fi(t){if(!t[bl]){t[bl]=!0,dg.forEach(function(r){r!=="selectionchange"&&(fj.has(r)||Pc(r,!1,t),Pc(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[bl]||(s[bl]=!0,Pc("selectionchange",!1,s))}}function rp(t,s,r,a){switch(qg(s)){case 1:var n=Tb;break;case 4:n=Ab;break;default:n=Ku}r=n.bind(null,s,r,t),n=void 0,!Nd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function Ec(t,s,r,a,n){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=la(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Cg(function(){var d=i,u=Vu(r),m=[];e:{var b=tp.get(t);if(b!==void 0){var p=Gu,g=t;switch(t){case"keypress":if(Ol(r)===0)break e;case"keydown":case"keyup":p=Qb;break;case"focusin":g="focus",p=Nc;break;case"focusout":g="blur",p=Nc;break;case"beforeblur":case"afterblur":p=Nc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Gb;break;case Xg:case Jg:case Zg:p=Db;break;case ep:p=Jb;break;case"scroll":p=Mb;break;case"wheel":p=ej;break;case"copy":case"cut":case"paste":p=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ph}var h=(s&4)!==0,N=!h&&t==="scroll",j=h?b!==null?b+"Capture":null:b;h=[];for(var y=d,f;y!==null;){f=y;var k=f.stateNode;if(f.tag===5&&k!==null&&(f=k,j!==null&&(k=_i(y,j),k!=null&&h.push(Ti(y,k,f)))),N)break;y=y.return}0<h.length&&(b=new p(b,g,null,r,u),m.push({event:b,listeners:h}))}}if(!(s&7)){e:{if(b=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",b&&r!==jd&&(g=r.relatedTarget||r.fromElement)&&(la(g)||g[nr]))break e;if((p||b)&&(b=u.window===u?u:(b=u.ownerDocument)?b.defaultView||b.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=d,g=g?la(g):null,g!==null&&(N=Ra(g),g!==N||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=d),p!==g)){if(h=xh,k="onMouseLeave",j="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(h=ph,k="onPointerLeave",j="onPointerEnter",y="pointer"),N=p==null?b:Ya(p),f=g==null?b:Ya(g),b=new h(k,y+"leave",p,r,u),b.target=N,b.relatedTarget=f,k=null,la(u)===d&&(h=new h(j,y+"enter",g,r,u),h.target=f,h.relatedTarget=N,k=h),N=k,p&&g)t:{for(h=p,j=g,y=0,f=h;f;f=qa(f))y++;for(f=0,k=j;k;k=qa(k))f++;for(;0<y-f;)h=qa(h),y--;for(;0<f-y;)j=qa(j),f--;for(;y--;){if(h===j||j!==null&&h===j.alternate)break t;h=qa(h),j=qa(j)}h=null}else h=null;p!==null&&Sh(m,b,p,h,!1),g!==null&&N!==null&&Sh(m,N,g,h,!0)}}e:{if(b=d?Ya(d):window,p=b.nodeName&&b.nodeName.toLowerCase(),p==="select"||p==="input"&&b.type==="file")var T=lj;else if(bh(b))if(Hg)T=uj;else{T=cj;var M=oj}else(p=b.nodeName)&&p.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(T=dj);if(T&&(T=T(t,d))){Wg(m,T,r,u);break e}M&&M(t,b,d),t==="focusout"&&(M=b._wrapperState)&&M.controlled&&b.type==="number"&&gd(b,"number",b.value)}switch(M=d?Ya(d):window,t){case"focusin":(bh(M)||M.contentEditable==="true")&&(Qa=M,Sd=d,gi=null);break;case"focusout":gi=Sd=Qa=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,_h(m,r,u);break;case"selectionchange":if(xj)break;case"keydown":case"keyup":_h(m,r,u)}var P;if(Ju)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ha?Ug(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Bg&&r.locale!=="ko"&&(Ha||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ha&&(P=zg()):(Pr=u,Yu="value"in Pr?Pr.value:Pr.textContent,Ha=!0)),M=oo(d,_),0<M.length&&(_=new gh(_,t,null,r,u),m.push({event:_,listeners:M}),P?_.data=P:(P=Vg(r),P!==null&&(_.data=P)))),(P=sj?rj(t,r):aj(t,r))&&(d=oo(d,"onBeforeInput"),0<d.length&&(u=new gh("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=P))}sp(m,s)})}function Ti(t,s,r){return{instance:t,listener:s,currentTarget:r}}function oo(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=_i(t,r),i!=null&&a.unshift(Ti(t,i,n)),i=_i(t,s),i!=null&&a.push(Ti(t,i,n))),t=t.return}return a}function qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sh(t,s,r,a,n){for(var i=s._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=_i(r,i),c!=null&&l.unshift(Ti(r,c,o))):n||(c=_i(r,i),c!=null&&l.push(Ti(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var yj=/\r\n?/g,bj=/\u0000|\uFFFD/g;function Ph(t){return(typeof t=="string"?t:""+t).replace(yj,`
`).replace(bj,"")}function jl(t,s,r){if(s=Ph(s),Ph(t)!==s&&r)throw Error(ae(425))}function co(){}var Ed=null,Fd=null;function Td(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ad=typeof setTimeout=="function"?setTimeout:void 0,jj=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,vj=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(t){return Eh.resolve(null).then(t).catch(Nj)}:Ad;function Nj(t){setTimeout(function(){throw t})}function Fc(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Si(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Si(s)}function $r(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Fh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),Rs="__reactFiber$"+Mn,Ai="__reactProps$"+Mn,nr="__reactContainer$"+Mn,Md="__reactEvents$"+Mn,wj="__reactListeners$"+Mn,_j="__reactHandles$"+Mn;function la(t){var s=t[Rs];if(s)return s;for(var r=t.parentNode;r;){if(s=r[nr]||r[Rs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Fh(t);t!==null;){if(r=t[Rs])return r;t=Fh(t)}return s}t=r,r=t.parentNode}return null}function Ji(t){return t=t[Rs]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ya(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function qo(t){return t[Ai]||null}var Ld=[],Ga=-1;function Kr(t){return{current:t}}function De(t){0>Ga||(t.current=Ld[Ga],Ld[Ga]=null,Ga--)}function Re(t,s){Ga++,Ld[Ga]=t.current,t.current=s}var Vr={},pt=Kr(Vr),Mt=Kr(!1),ka=Vr;function wn(t,s){var r=t.type.contextTypes;if(!r)return Vr;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function Lt(t){return t=t.childContextTypes,t!=null}function uo(){De(Mt),De(pt)}function Th(t,s,r){if(pt.current!==Vr)throw Error(ae(168));Re(pt,s),Re(Mt,r)}function ap(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(ae(108,ob(t)||"Unknown",n));return Ue({},r,a)}function mo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,ka=pt.current,Re(pt,t),Re(Mt,Mt.current),!0}function Ah(t,s,r){var a=t.stateNode;if(!a)throw Error(ae(169));r?(t=ap(t,s,ka),a.__reactInternalMemoizedMergedChildContext=t,De(Mt),De(pt),Re(pt,t)):De(Mt),Re(Mt,r)}var Ys=null,zo=!1,Tc=!1;function np(t){Ys===null?Ys=[t]:Ys.push(t)}function kj(t){zo=!0,np(t)}function Yr(){if(!Tc&&Ys!==null){Tc=!0;var t=0,s=Me;try{var r=Ys;for(Me=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ys=null,zo=!1}catch(n){throw Ys!==null&&(Ys=Ys.slice(t+1)),Fg(Wu,Yr),n}finally{Me=s,Tc=!1}}return null}var Xa=[],Ja=0,ho=null,xo=0,ss=[],rs=0,Ca=null,er=1,tr="";function sa(t,s){Xa[Ja++]=xo,Xa[Ja++]=ho,ho=t,xo=s}function ip(t,s,r){ss[rs++]=er,ss[rs++]=tr,ss[rs++]=Ca,Ca=t;var a=er;t=tr;var n=32-js(a)-1;a&=~(1<<n),r+=1;var i=32-js(s)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,er=1<<32-js(s)+n|r<<n|a,tr=i+t}else er=1<<i|r<<n|a,tr=t}function em(t){t.return!==null&&(sa(t,1),ip(t,1,0))}function tm(t){for(;t===ho;)ho=Xa[--Ja],Xa[Ja]=null,xo=Xa[--Ja],Xa[Ja]=null;for(;t===Ca;)Ca=ss[--rs],ss[rs]=null,tr=ss[--rs],ss[rs]=null,er=ss[--rs],ss[rs]=null}var Wt=null,Ut=null,Ie=!1,ys=null;function lp(t,s){var r=ns(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Mh(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Wt=t,Ut=$r(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Wt=t,Ut=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Ca!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=ns(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Wt=t,Ut=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rd(t){if(Ie){var s=Ut;if(s){var r=s;if(!Mh(t,s)){if($d(t))throw Error(ae(418));s=$r(r.nextSibling);var a=Wt;s&&Mh(t,s)?lp(a,r):(t.flags=t.flags&-4097|2,Ie=!1,Wt=t)}}else{if($d(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Ie=!1,Wt=t}}}function Lh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function vl(t){if(t!==Wt)return!1;if(!Ie)return Lh(t),Ie=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Td(t.type,t.memoizedProps)),s&&(s=Ut)){if($d(t))throw op(),Error(ae(418));for(;s;)lp(t,s),s=$r(s.nextSibling)}if(Lh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Ut=$r(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Ut=null}}else Ut=Wt?$r(t.stateNode.nextSibling):null;return!0}function op(){for(var t=Ut;t;)t=$r(t.nextSibling)}function _n(){Ut=Wt=null,Ie=!1}function sm(t){ys===null?ys=[t]:ys.push(t)}var Cj=dr.ReactCurrentBatchConfig;function Kn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var a=r.stateNode}if(!a)throw Error(ae(147,t));var n=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Nl(t,s){throw t=Object.prototype.toString.call(s),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function $h(t){var s=t._init;return s(t._payload)}function cp(t){function s(j,y){if(t){var f=j.deletions;f===null?(j.deletions=[y],j.flags|=16):f.push(y)}}function r(j,y){if(!t)return null;for(;y!==null;)s(j,y),y=y.sibling;return null}function a(j,y){for(j=new Map;y!==null;)y.key!==null?j.set(y.key,y):j.set(y.index,y),y=y.sibling;return j}function n(j,y){return j=Ir(j,y),j.index=0,j.sibling=null,j}function i(j,y,f){return j.index=f,t?(f=j.alternate,f!==null?(f=f.index,f<y?(j.flags|=2,y):f):(j.flags|=2,y)):(j.flags|=1048576,y)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function o(j,y,f,k){return y===null||y.tag!==6?(y=Dc(f,j.mode,k),y.return=j,y):(y=n(y,f),y.return=j,y)}function c(j,y,f,k){var T=f.type;return T===Wa?u(j,y,f.props.children,k,f.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gr&&$h(T)===y.type)?(k=n(y,f.props),k.ref=Kn(j,y,f),k.return=j,k):(k=Vl(f.type,f.key,f.props,null,j.mode,k),k.ref=Kn(j,y,f),k.return=j,k)}function d(j,y,f,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==f.containerInfo||y.stateNode.implementation!==f.implementation?(y=Ic(f,j.mode,k),y.return=j,y):(y=n(y,f.children||[]),y.return=j,y)}function u(j,y,f,k,T){return y===null||y.tag!==7?(y=wa(f,j.mode,k,T),y.return=j,y):(y=n(y,f),y.return=j,y)}function m(j,y,f){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Dc(""+y,j.mode,f),y.return=j,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ul:return f=Vl(y.type,y.key,y.props,null,j.mode,f),f.ref=Kn(j,null,y),f.return=j,f;case Va:return y=Ic(y,j.mode,f),y.return=j,y;case gr:var k=y._init;return m(j,k(y._payload),f)}if(ii(y)||Un(y))return y=wa(y,j.mode,f,null),y.return=j,y;Nl(j,y)}return null}function b(j,y,f,k){var T=y!==null?y.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return T!==null?null:o(j,y,""+f,k);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ul:return f.key===T?c(j,y,f,k):null;case Va:return f.key===T?d(j,y,f,k):null;case gr:return T=f._init,b(j,y,T(f._payload),k)}if(ii(f)||Un(f))return T!==null?null:u(j,y,f,k,null);Nl(j,f)}return null}function p(j,y,f,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return j=j.get(f)||null,o(y,j,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ul:return j=j.get(k.key===null?f:k.key)||null,c(y,j,k,T);case Va:return j=j.get(k.key===null?f:k.key)||null,d(y,j,k,T);case gr:var M=k._init;return p(j,y,f,M(k._payload),T)}if(ii(k)||Un(k))return j=j.get(f)||null,u(y,j,k,T,null);Nl(y,k)}return null}function g(j,y,f,k){for(var T=null,M=null,P=y,_=y=0,F=null;P!==null&&_<f.length;_++){P.index>_?(F=P,P=null):F=P.sibling;var v=b(j,P,f[_],k);if(v===null){P===null&&(P=F);break}t&&P&&v.alternate===null&&s(j,P),y=i(v,y,_),M===null?T=v:M.sibling=v,M=v,P=F}if(_===f.length)return r(j,P),Ie&&sa(j,_),T;if(P===null){for(;_<f.length;_++)P=m(j,f[_],k),P!==null&&(y=i(P,y,_),M===null?T=P:M.sibling=P,M=P);return Ie&&sa(j,_),T}for(P=a(j,P);_<f.length;_++)F=p(P,j,_,f[_],k),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?_:F.key),y=i(F,y,_),M===null?T=F:M.sibling=F,M=F);return t&&P.forEach(function(O){return s(j,O)}),Ie&&sa(j,_),T}function h(j,y,f,k){var T=Un(f);if(typeof T!="function")throw Error(ae(150));if(f=T.call(f),f==null)throw Error(ae(151));for(var M=T=null,P=y,_=y=0,F=null,v=f.next();P!==null&&!v.done;_++,v=f.next()){P.index>_?(F=P,P=null):F=P.sibling;var O=b(j,P,v.value,k);if(O===null){P===null&&(P=F);break}t&&P&&O.alternate===null&&s(j,P),y=i(O,y,_),M===null?T=O:M.sibling=O,M=O,P=F}if(v.done)return r(j,P),Ie&&sa(j,_),T;if(P===null){for(;!v.done;_++,v=f.next())v=m(j,v.value,k),v!==null&&(y=i(v,y,_),M===null?T=v:M.sibling=v,M=v);return Ie&&sa(j,_),T}for(P=a(j,P);!v.done;_++,v=f.next())v=p(P,j,_,v.value,k),v!==null&&(t&&v.alternate!==null&&P.delete(v.key===null?_:v.key),y=i(v,y,_),M===null?T=v:M.sibling=v,M=v);return t&&P.forEach(function(R){return s(j,R)}),Ie&&sa(j,_),T}function N(j,y,f,k){if(typeof f=="object"&&f!==null&&f.type===Wa&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ul:e:{for(var T=f.key,M=y;M!==null;){if(M.key===T){if(T=f.type,T===Wa){if(M.tag===7){r(j,M.sibling),y=n(M,f.props.children),y.return=j,j=y;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gr&&$h(T)===M.type){r(j,M.sibling),y=n(M,f.props),y.ref=Kn(j,M,f),y.return=j,j=y;break e}r(j,M);break}else s(j,M);M=M.sibling}f.type===Wa?(y=wa(f.props.children,j.mode,k,f.key),y.return=j,j=y):(k=Vl(f.type,f.key,f.props,null,j.mode,k),k.ref=Kn(j,y,f),k.return=j,j=k)}return l(j);case Va:e:{for(M=f.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===f.containerInfo&&y.stateNode.implementation===f.implementation){r(j,y.sibling),y=n(y,f.children||[]),y.return=j,j=y;break e}else{r(j,y);break}else s(j,y);y=y.sibling}y=Ic(f,j.mode,k),y.return=j,j=y}return l(j);case gr:return M=f._init,N(j,y,M(f._payload),k)}if(ii(f))return g(j,y,f,k);if(Un(f))return h(j,y,f,k);Nl(j,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,y!==null&&y.tag===6?(r(j,y.sibling),y=n(y,f),y.return=j,j=y):(r(j,y),y=Dc(f,j.mode,k),y.return=j,j=y),l(j)):r(j,y)}return N}var kn=cp(!0),dp=cp(!1),go=Kr(null),po=null,Za=null,rm=null;function am(){rm=Za=po=null}function nm(t){var s=go.current;De(go),t._currentValue=s}function Od(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function ln(t,s){po=t,rm=Za=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Tt=!0),t.firstContext=null)}function os(t){var s=t._currentValue;if(rm!==t)if(t={context:t,memoizedValue:s,next:null},Za===null){if(po===null)throw Error(ae(308));Za=t,po.dependencies={lanes:0,firstContext:t}}else Za=Za.next=t;return s}var oa=null;function im(t){oa===null?oa=[t]:oa.push(t)}function up(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,im(s)):(r.next=n.next,n.next=r),s.interleaved=r,ir(t,a)}function ir(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var pr=!1;function lm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mp(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Rr(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Ce&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,ir(t,r)}return n=a.interleaved,n===null?(s.next=s,im(a)):(s.next=n.next,n.next=s),a.interleaved=s,ir(t,r)}function Dl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Hu(t,r)}}function Rh(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=s:i=i.next=s}else n=i=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function fo(t,s,r,a){var n=t.updateQueue;pr=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=n.baseState;l=0,u=d=c=null,o=i;do{var b=o.lane,p=o.eventTime;if((a&b)===b){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,h=o;switch(b=s,p=r,h.tag){case 1:if(g=h.payload,typeof g=="function"){m=g.call(p,m,b);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=h.payload,b=typeof g=="function"?g.call(p,m,b):g,b==null)break e;m=Ue({},m,b);break e;case 2:pr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,b=n.effects,b===null?n.effects=[o]:b.push(o))}else p={eventTime:p,lane:b,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,l|=b;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;b=o,o=b.next,b.next=null,n.lastBaseUpdate=b,n.shared.pending=null}}while(!0);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do l|=n.lane,n=n.next;while(n!==s)}else i===null&&(n.shared.lanes=0);Pa|=l,t.lanes=l,t.memoizedState=m}}function Oh(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ae(191,n));n.call(a)}}}var Zi={},Is=Kr(Zi),Mi=Kr(Zi),Li=Kr(Zi);function ca(t){if(t===Zi)throw Error(ae(174));return t}function om(t,s){switch(Re(Li,s),Re(Mi,t),Re(Is,Zi),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:fd(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=fd(s,t)}De(Is),Re(Is,s)}function Cn(){De(Is),De(Mi),De(Li)}function hp(t){ca(Li.current);var s=ca(Is.current),r=fd(s,t.type);s!==r&&(Re(Mi,t),Re(Is,r))}function cm(t){Mi.current===t&&(De(Is),De(Mi))}var ze=Kr(0);function yo(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ac=[];function dm(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var Il=dr.ReactCurrentDispatcher,Mc=dr.ReactCurrentBatchConfig,Sa=0,Be=null,et=null,at=null,bo=!1,pi=!1,$i=0,Sj=0;function mt(){throw Error(ae(321))}function um(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!ws(t[r],s[r]))return!1;return!0}function mm(t,s,r,a,n,i){if(Sa=i,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?Tj:Aj,t=r(a,n),pi){i=0;do{if(pi=!1,$i=0,25<=i)throw Error(ae(301));i+=1,at=et=null,s.updateQueue=null,Il.current=Mj,t=r(a,n)}while(pi)}if(Il.current=jo,s=et!==null&&et.next!==null,Sa=0,at=et=Be=null,bo=!1,s)throw Error(ae(300));return t}function hm(){var t=$i!==0;return $i=0,t}function As(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Be.memoizedState=at=t:at=at.next=t,at}function cs(){if(et===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var s=at===null?Be.memoizedState:at.next;if(s!==null)at=s,et=t;else{if(t===null)throw Error(ae(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},at===null?Be.memoizedState=at=t:at=at.next=t}return at}function Ri(t,s){return typeof s=="function"?s(t):s}function Lc(t){var s=cs(),r=s.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var a=et,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Sa&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=a):c=c.next=m,Be.lanes|=u,Pa|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,ws(a,s.memoizedState)||(Tt=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Be.lanes|=i,Pa|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function $c(t){var s=cs(),r=s.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=s.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);ws(i,s.memoizedState)||(Tt=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function xp(){}function gp(t,s){var r=Be,a=cs(),n=s(),i=!ws(a.memoizedState,n);if(i&&(a.memoizedState=n,Tt=!0),a=a.queue,xm(yp.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,Oi(9,fp.bind(null,r,a,n,s),void 0,null),nt===null)throw Error(ae(349));Sa&30||pp(r,s,n)}return n}function pp(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Be.updateQueue,s===null?(s={lastEffect:null,stores:null},Be.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function fp(t,s,r,a){s.value=r,s.getSnapshot=a,bp(s)&&jp(t)}function yp(t,s,r){return r(function(){bp(s)&&jp(t)})}function bp(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!ws(t,r)}catch{return!0}}function jp(t){var s=ir(t,1);s!==null&&vs(s,t,1,-1)}function Dh(t){var s=As();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},s.queue=t,t=t.dispatch=Fj.bind(null,Be,t),[s.memoizedState,t]}function Oi(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Be.updateQueue,s===null?(s={lastEffect:null,stores:null},Be.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function vp(){return cs().memoizedState}function ql(t,s,r,a){var n=As();Be.flags|=t,n.memoizedState=Oi(1|s,r,void 0,a===void 0?null:a)}function Bo(t,s,r,a){var n=cs();a=a===void 0?null:a;var i=void 0;if(et!==null){var l=et.memoizedState;if(i=l.destroy,a!==null&&um(a,l.deps)){n.memoizedState=Oi(s,r,i,a);return}}Be.flags|=t,n.memoizedState=Oi(1|s,r,i,a)}function Ih(t,s){return ql(8390656,8,t,s)}function xm(t,s){return Bo(2048,8,t,s)}function Np(t,s){return Bo(4,2,t,s)}function wp(t,s){return Bo(4,4,t,s)}function _p(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function kp(t,s,r){return r=r!=null?r.concat([t]):null,Bo(4,4,_p.bind(null,s,t),r)}function gm(){}function Cp(t,s){var r=cs();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&um(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Sp(t,s){var r=cs();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&um(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function Pp(t,s,r){return Sa&21?(ws(r,s)||(r=Mg(),Be.lanes|=r,Pa|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=r)}function Pj(t,s){var r=Me;Me=r!==0&&4>r?r:4,t(!0);var a=Mc.transition;Mc.transition={};try{t(!1),s()}finally{Me=r,Mc.transition=a}}function Ep(){return cs().memoizedState}function Ej(t,s,r){var a=Dr(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Fp(t))Tp(s,r);else if(r=up(t,s,r,a),r!==null){var n=_t();vs(r,t,a,n),Ap(r,s,a)}}function Fj(t,s,r){var a=Dr(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fp(t))Tp(s,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,ws(o,l)){var c=s.interleaved;c===null?(n.next=n,im(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=up(t,s,n,a),r!==null&&(n=_t(),vs(r,t,a,n),Ap(r,s,a))}}function Fp(t){var s=t.alternate;return t===Be||s!==null&&s===Be}function Tp(t,s){pi=bo=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Ap(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Hu(t,r)}}var jo={readContext:os,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Tj={readContext:os,useCallback:function(t,s){return As().memoizedState=[t,s===void 0?null:s],t},useContext:os,useEffect:Ih,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,ql(4194308,4,_p.bind(null,s,t),r)},useLayoutEffect:function(t,s){return ql(4194308,4,t,s)},useInsertionEffect:function(t,s){return ql(4,2,t,s)},useMemo:function(t,s){var r=As();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=As();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Ej.bind(null,Be,t),[a.memoizedState,t]},useRef:function(t){var s=As();return t={current:t},s.memoizedState=t},useState:Dh,useDebugValue:gm,useDeferredValue:function(t){return As().memoizedState=t},useTransition:function(){var t=Dh(!1),s=t[0];return t=Pj.bind(null,t[1]),As().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Be,n=As();if(Ie){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=s(),nt===null)throw Error(ae(349));Sa&30||pp(a,s,r)}n.memoizedState=r;var i={value:r,getSnapshot:s};return n.queue=i,Ih(yp.bind(null,a,i,t),[t]),a.flags|=2048,Oi(9,fp.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=As(),s=nt.identifierPrefix;if(Ie){var r=tr,a=er;r=(a&~(1<<32-js(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=$i++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Sj++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Aj={readContext:os,useCallback:Cp,useContext:os,useEffect:xm,useImperativeHandle:kp,useInsertionEffect:Np,useLayoutEffect:wp,useMemo:Sp,useReducer:Lc,useRef:vp,useState:function(){return Lc(Ri)},useDebugValue:gm,useDeferredValue:function(t){var s=cs();return Pp(s,et.memoizedState,t)},useTransition:function(){var t=Lc(Ri)[0],s=cs().memoizedState;return[t,s]},useMutableSource:xp,useSyncExternalStore:gp,useId:Ep,unstable_isNewReconciler:!1},Mj={readContext:os,useCallback:Cp,useContext:os,useEffect:xm,useImperativeHandle:kp,useInsertionEffect:Np,useLayoutEffect:wp,useMemo:Sp,useReducer:$c,useRef:vp,useState:function(){return $c(Ri)},useDebugValue:gm,useDeferredValue:function(t){var s=cs();return et===null?s.memoizedState=t:Pp(s,et.memoizedState,t)},useTransition:function(){var t=$c(Ri)[0],s=cs().memoizedState;return[t,s]},useMutableSource:xp,useSyncExternalStore:gp,useId:Ep,unstable_isNewReconciler:!1};function hs(t,s){if(t&&t.defaultProps){s=Ue({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Dd(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Ue({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Uo={isMounted:function(t){return(t=t._reactInternals)?Ra(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=_t(),n=Dr(t),i=sr(a,n);i.payload=s,r!=null&&(i.callback=r),s=Rr(t,i,n),s!==null&&(vs(s,t,n,a),Dl(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=_t(),n=Dr(t),i=sr(a,n);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Rr(t,i,n),s!==null&&(vs(s,t,n,a),Dl(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=_t(),a=Dr(t),n=sr(r,a);n.tag=2,s!=null&&(n.callback=s),s=Rr(t,n,a),s!==null&&(vs(s,t,a,r),Dl(s,t,a))}};function qh(t,s,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!Ei(r,a)||!Ei(n,i):!0}function Mp(t,s,r){var a=!1,n=Vr,i=s.contextType;return typeof i=="object"&&i!==null?i=os(i):(n=Lt(s)?ka:pt.current,a=s.contextTypes,i=(a=a!=null)?wn(t,n):Vr),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Uo,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),s}function zh(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Uo.enqueueReplaceState(s,s.state,null)}function Id(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},lm(t);var i=s.contextType;typeof i=="object"&&i!==null?n.context=os(i):(i=Lt(s)?ka:pt.current,n.context=wn(t,i)),n.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Dd(t,s,i,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Uo.enqueueReplaceState(n,n.state,null),fo(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Sn(t,s){try{var r="",a=s;do r+=lb(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:n,digest:null}}function Rc(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function qd(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Lj=typeof WeakMap=="function"?WeakMap:Map;function Lp(t,s,r){r=sr(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){No||(No=!0,Gd=a),qd(t,s)},r}function $p(t,s,r){r=sr(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){qd(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){qd(t,s),typeof a!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function Bh(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Lj;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Kj.bind(null,t,s,r),s.then(t,t))}function Uh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Vh(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=sr(-1,1),s.tag=2,Rr(r,s,1))),r.lanes|=1),t)}var $j=dr.ReactCurrentOwner,Tt=!1;function vt(t,s,r,a){s.child=t===null?dp(s,null,r,a):kn(s,t.child,r,a)}function Wh(t,s,r,a,n){r=r.render;var i=s.ref;return ln(s,n),a=mm(t,s,r,a,i,n),r=hm(),t!==null&&!Tt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,lr(t,s,n)):(Ie&&r&&em(s),s.flags|=1,vt(t,s,a,n),s.child)}function Hh(t,s,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!wm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Rp(t,s,i,a,n)):(t=Vl(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ei,r(l,a)&&t.ref===s.ref)return lr(t,s,n)}return s.flags|=1,t=Ir(i,a),t.ref=s.ref,t.return=s,s.child=t}function Rp(t,s,r,a,n){if(t!==null){var i=t.memoizedProps;if(Ei(i,a)&&t.ref===s.ref)if(Tt=!1,s.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(Tt=!0);else return s.lanes=t.lanes,lr(t,s,n)}return zd(t,s,r,a,n)}function Op(t,s,r){var a=s.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(tn,Bt),Bt|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Re(tn,Bt),Bt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Re(tn,Bt),Bt|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Re(tn,Bt),Bt|=a;return vt(t,s,n,r),s.child}function Dp(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function zd(t,s,r,a,n){var i=Lt(r)?ka:pt.current;return i=wn(s,i),ln(s,n),r=mm(t,s,r,a,i,n),a=hm(),t!==null&&!Tt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,lr(t,s,n)):(Ie&&a&&em(s),s.flags|=1,vt(t,s,r,n),s.child)}function Qh(t,s,r,a,n){if(Lt(r)){var i=!0;mo(s)}else i=!1;if(ln(s,n),s.stateNode===null)zl(t,s),Mp(s,r,a),Id(s,r,a,n),a=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=os(d):(d=Lt(r)?ka:pt.current,d=wn(s,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&zh(s,l,a,d),pr=!1;var b=s.memoizedState;l.state=b,fo(s,a,l,n),c=s.memoizedState,o!==a||b!==c||Mt.current||pr?(typeof u=="function"&&(Dd(s,r,u,a),c=s.memoizedState),(o=pr||qh(s,r,o,a,b,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,mp(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:hs(s.type,o),l.props=d,m=s.pendingProps,b=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=os(c):(c=Lt(r)?ka:pt.current,c=wn(s,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||b!==c)&&zh(s,l,a,c),pr=!1,b=s.memoizedState,l.state=b,fo(s,a,l,n);var g=s.memoizedState;o!==m||b!==g||Mt.current||pr?(typeof p=="function"&&(Dd(s,r,p,a),g=s.memoizedState),(d=pr||qh(s,r,d,a,b,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,g,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&b===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&b===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=g),l.props=a,l.state=g,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&b===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&b===t.memoizedState||(s.flags|=1024),a=!1)}return Bd(t,s,r,a,i,n)}function Bd(t,s,r,a,n,i){Dp(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return n&&Ah(s,r,!1),lr(t,s,i);a=s.stateNode,$j.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=kn(s,t.child,null,i),s.child=kn(s,null,o,i)):vt(t,s,o,i),s.memoizedState=a.state,n&&Ah(s,r,!0),s.child}function Ip(t){var s=t.stateNode;s.pendingContext?Th(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Th(t,s.context,!1),om(t,s.containerInfo)}function Kh(t,s,r,a,n){return _n(),sm(n),s.flags|=256,vt(t,s,r,a),s.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function qp(t,s,r){var a=s.pendingProps,n=ze.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Re(ze,n&1),t===null)return Rd(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ho(l,a,0,null),t=wa(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Vd(r),s.memoizedState=Ud,t):pm(s,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Rj(t,s,l,a,o,n,r);if(i){i=a.fallback,l=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=Ir(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=Ir(o,i):(i=wa(i,l,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?Vd(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=Ud,a}return i=t.child,t=i.sibling,a=Ir(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function pm(t,s){return s=Ho({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function wl(t,s,r,a){return a!==null&&sm(a),kn(s,t.child,null,r),t=pm(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Rj(t,s,r,a,n,i,l){if(r)return s.flags&256?(s.flags&=-257,a=Rc(Error(ae(422))),wl(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=Ho({mode:"visible",children:a.children},n,0,null),i=wa(i,n,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&kn(s,t.child,null,l),s.child.memoizedState=Vd(l),s.memoizedState=Ud,i);if(!(s.mode&1))return wl(t,s,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(ae(419)),a=Rc(i,a,void 0),wl(t,s,l,a)}if(o=(l&t.childLanes)!==0,Tt||o){if(a=nt,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,ir(t,n),vs(a,t,n,-1))}return Nm(),a=Rc(Error(ae(421))),wl(t,s,l,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Yj.bind(null,t),n._reactRetry=s,null):(t=i.treeContext,Ut=$r(n.nextSibling),Wt=s,Ie=!0,ys=null,t!==null&&(ss[rs++]=er,ss[rs++]=tr,ss[rs++]=Ca,er=t.id,tr=t.overflow,Ca=s),s=pm(s,a.children),s.flags|=4096,s)}function Yh(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),Od(t.return,s,r)}function Oc(t,s,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function zp(t,s,r){var a=s.pendingProps,n=a.revealOrder,i=a.tail;if(vt(t,s,a.children,r),a=ze.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yh(t,r,s);else if(t.tag===19)Yh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Re(ze,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&yo(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),Oc(s,!1,n,r,i);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&yo(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Oc(s,!0,r,null,i);break;case"together":Oc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function lr(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Pa|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ae(153));if(s.child!==null){for(t=s.child,r=Ir(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Ir(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Oj(t,s,r){switch(s.tag){case 3:Ip(s),_n();break;case 5:hp(s);break;case 1:Lt(s.type)&&mo(s);break;case 4:om(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Re(go,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Re(ze,ze.current&1),s.flags|=128,null):r&s.child.childLanes?qp(t,s,r):(Re(ze,ze.current&1),t=lr(t,s,r),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return zp(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Re(ze,ze.current),a)break;return null;case 22:case 23:return s.lanes=0,Op(t,s,r)}return lr(t,s,r)}var Bp,Wd,Up,Vp;Bp=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wd=function(){};Up=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,ca(Is.current);var i=null;switch(r){case"input":n=hd(t,n),a=hd(t,a),i=[];break;case"select":n=Ue({},n,{value:void 0}),a=Ue({},a,{value:void 0}),i=[];break;case"textarea":n=pd(t,n),a=pd(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=co)}yd(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ni.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Oe("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};Vp=function(t,s,r,a){r!==a&&(s.flags|=4)};function Yn(t,s){if(!Ie)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ht(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Dj(t,s,r){var a=s.pendingProps;switch(tm(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return Lt(s.type)&&uo(),ht(s),null;case 3:return a=s.stateNode,Cn(),De(Mt),De(pt),dm(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ys!==null&&(Zd(ys),ys=null))),Wd(t,s),ht(s),null;case 5:cm(s);var n=ca(Li.current);if(r=s.type,t!==null&&s.stateNode!=null)Up(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(ae(166));return ht(s),null}if(t=ca(Is.current),vl(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[Rs]=s,a[Ai]=i,t=(s.mode&1)!==0,r){case"dialog":Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":case"embed":Oe("load",a);break;case"video":case"audio":for(n=0;n<oi.length;n++)Oe(oi[n],a);break;case"source":Oe("error",a);break;case"img":case"image":case"link":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"input":ah(a,i),Oe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",a);break;case"textarea":ih(a,i),Oe("invalid",a)}yd(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&jl(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&jl(a.textContent,o,t),n=["children",""+o]):Ni.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Oe("scroll",a)}switch(r){case"input":ml(a),nh(a,i,!0);break;case"textarea":ml(a),lh(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=co)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yg(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[Rs]=s,t[Ai]=a,Bp(t,s,!1,!1),s.stateNode=t;e:{switch(l=bd(r,a),r){case"dialog":Oe("cancel",t),Oe("close",t),n=a;break;case"iframe":case"object":case"embed":Oe("load",t),n=a;break;case"video":case"audio":for(n=0;n<oi.length;n++)Oe(oi[n],t);n=a;break;case"source":Oe("error",t),n=a;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),n=a;break;case"details":Oe("toggle",t),n=a;break;case"input":ah(t,a),n=hd(t,a),Oe("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Ue({},a,{value:void 0}),Oe("invalid",t);break;case"textarea":ih(t,a),n=pd(t,a),Oe("invalid",t);break;default:n=a}yd(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?vg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bg(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wi(t,c):typeof c=="number"&&wi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ni.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Oe("scroll",t):c!=null&&qu(t,i,c,l))}switch(r){case"input":ml(t),nh(t,a,!1);break;case"textarea":ml(t),lh(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Ur(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?sn(t,!!a.multiple,i,!1):a.defaultValue!=null&&sn(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=co)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ht(s),null;case 6:if(t&&s.stateNode!=null)Vp(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(ae(166));if(r=ca(Li.current),ca(Is.current),vl(s)){if(a=s.stateNode,r=s.memoizedProps,a[Rs]=s,(i=a.nodeValue!==r)&&(t=Wt,t!==null))switch(t.tag){case 3:jl(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jl(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Rs]=s,s.stateNode=a}return ht(s),null;case 13:if(De(ze),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ut!==null&&s.mode&1&&!(s.flags&128))op(),_n(),s.flags|=98560,i=!1;else if(i=vl(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Rs]=s}else _n(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ht(s),i=!1}else ys!==null&&(Zd(ys),ys=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||ze.current&1?st===0&&(st=3):Nm())),s.updateQueue!==null&&(s.flags|=4),ht(s),null);case 4:return Cn(),Wd(t,s),t===null&&Fi(s.stateNode.containerInfo),ht(s),null;case 10:return nm(s.type._context),ht(s),null;case 17:return Lt(s.type)&&uo(),ht(s),null;case 19:if(De(ze),i=s.memoizedState,i===null)return ht(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)Yn(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=yo(t),l!==null){for(s.flags|=128,Yn(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Re(ze,ze.current&1|2),s.child}t=t.sibling}i.tail!==null&&Ke()>Pn&&(s.flags|=128,a=!0,Yn(i,!1),s.lanes=4194304)}else{if(!a)if(t=yo(l),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ie)return ht(s),null}else 2*Ke()-i.renderingStartTime>Pn&&r!==1073741824&&(s.flags|=128,a=!0,Yn(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=Ke(),s.sibling=null,r=ze.current,Re(ze,a?r&1|2:r&1),s):(ht(s),null);case 22:case 23:return vm(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?Bt&1073741824&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),null;case 24:return null;case 25:return null}throw Error(ae(156,s.tag))}function Ij(t,s){switch(tm(s),s.tag){case 1:return Lt(s.type)&&uo(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Cn(),De(Mt),De(pt),dm(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return cm(s),null;case 13:if(De(ze),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ae(340));_n()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return De(ze),null;case 4:return Cn(),null;case 10:return nm(s.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var _l=!1,xt=!1,qj=typeof WeakSet=="function"?WeakSet:Set,de=null;function en(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Qe(t,s,a)}else r.current=null}function Hd(t,s,r){try{r()}catch(a){Qe(t,s,a)}}var Gh=!1;function zj(t,s){if(Ed=io,t=Yg(),Zu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,b=null;t:for(;;){for(var p;m!==r||n!==0&&m.nodeType!==3||(o=l+n),m!==i||a!==0&&m.nodeType!==3||(c=l+a),m.nodeType===3&&(l+=m.nodeValue.length),(p=m.firstChild)!==null;)b=m,m=p;for(;;){if(m===t)break t;if(b===r&&++d===n&&(o=l),b===i&&++u===a&&(c=l),(p=m.nextSibling)!==null)break;m=b,b=m.parentNode}m=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fd={focusedElem:t,selectionRange:r},io=!1,de=s;de!==null;)if(s=de,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,de=t;else for(;de!==null;){s=de;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var h=g.memoizedProps,N=g.memoizedState,j=s.stateNode,y=j.getSnapshotBeforeUpdate(s.elementType===s.type?h:hs(s.type,h),N);j.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var f=s.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(k){Qe(s,s.return,k)}if(t=s.sibling,t!==null){t.return=s.return,de=t;break}de=s.return}return g=Gh,Gh=!1,g}function fi(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Hd(s,r,i)}n=n.next}while(n!==a)}}function Vo(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function Qd(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Wp(t){var s=t.alternate;s!==null&&(t.alternate=null,Wp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Rs],delete s[Ai],delete s[Md],delete s[wj],delete s[_j])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hp(t){return t.tag===5||t.tag===3||t.tag===4}function Xh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=co));else if(a!==4&&(t=t.child,t!==null))for(Kd(t,s,r),t=t.sibling;t!==null;)Kd(t,s,r),t=t.sibling}function Yd(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Yd(t,s,r),t=t.sibling;t!==null;)Yd(t,s,r),t=t.sibling}var ot=null,ps=!1;function mr(t,s,r){for(r=r.child;r!==null;)Qp(t,s,r),r=r.sibling}function Qp(t,s,r){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Ro,r)}catch{}switch(r.tag){case 5:xt||en(r,s);case 6:var a=ot,n=ps;ot=null,mr(t,s,r),ot=a,ps=n,ot!==null&&(ps?(t=ot,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ot.removeChild(r.stateNode));break;case 18:ot!==null&&(ps?(t=ot,r=r.stateNode,t.nodeType===8?Fc(t.parentNode,r):t.nodeType===1&&Fc(t,r),Si(t)):Fc(ot,r.stateNode));break;case 4:a=ot,n=ps,ot=r.stateNode.containerInfo,ps=!0,mr(t,s,r),ot=a,ps=n;break;case 0:case 11:case 14:case 15:if(!xt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Hd(r,s,l),n=n.next}while(n!==a)}mr(t,s,r);break;case 1:if(!xt&&(en(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Qe(r,s,o)}mr(t,s,r);break;case 21:mr(t,s,r);break;case 22:r.mode&1?(xt=(a=xt)||r.memoizedState!==null,mr(t,s,r),xt=a):mr(t,s,r);break;default:mr(t,s,r)}}function Jh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qj),s.forEach(function(a){var n=Gj.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function ms(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:ot=o.stateNode,ps=!1;break e;case 3:ot=o.stateNode.containerInfo,ps=!0;break e;case 4:ot=o.stateNode.containerInfo,ps=!0;break e}o=o.return}if(ot===null)throw Error(ae(160));Qp(i,l,n),ot=null,ps=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Qe(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Kp(s,t),s=s.sibling}function Kp(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ms(s,t),Es(t),a&4){try{fi(3,t,t.return),Vo(3,t)}catch(h){Qe(t,t.return,h)}try{fi(5,t,t.return)}catch(h){Qe(t,t.return,h)}}break;case 1:ms(s,t),Es(t),a&512&&r!==null&&en(r,r.return);break;case 5:if(ms(s,t),Es(t),a&512&&r!==null&&en(r,r.return),t.flags&32){var n=t.stateNode;try{wi(n,"")}catch(h){Qe(t,t.return,h)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&pg(n,i),bd(o,l);var d=bd(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?vg(n,m):u==="dangerouslySetInnerHTML"?bg(n,m):u==="children"?wi(n,m):qu(n,u,m,d)}switch(o){case"input":xd(n,i);break;case"textarea":fg(n,i);break;case"select":var b=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?sn(n,!!i.multiple,p,!1):b!==!!i.multiple&&(i.defaultValue!=null?sn(n,!!i.multiple,i.defaultValue,!0):sn(n,!!i.multiple,i.multiple?[]:"",!1))}n[Ai]=i}catch(h){Qe(t,t.return,h)}}break;case 6:if(ms(s,t),Es(t),a&4){if(t.stateNode===null)throw Error(ae(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(h){Qe(t,t.return,h)}}break;case 3:if(ms(s,t),Es(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Si(s.containerInfo)}catch(h){Qe(t,t.return,h)}break;case 4:ms(s,t),Es(t);break;case 13:ms(s,t),Es(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(bm=Ke())),a&4&&Jh(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(xt=(d=xt)||u,ms(s,t),xt=d):ms(s,t),Es(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(de=t,u=t.child;u!==null;){for(m=de=u;de!==null;){switch(b=de,p=b.child,b.tag){case 0:case 11:case 14:case 15:fi(4,b,b.return);break;case 1:en(b,b.return);var g=b.stateNode;if(typeof g.componentWillUnmount=="function"){a=b,r=b.return;try{s=a,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(h){Qe(a,r,h)}}break;case 5:en(b,b.return);break;case 22:if(b.memoizedState!==null){ex(m);continue}}p!==null?(p.return=b,de=p):ex(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=jg("display",l))}catch(h){Qe(t,t.return,h)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(h){Qe(t,t.return,h)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ms(s,t),Es(t),a&4&&Jh(t);break;case 21:break;default:ms(s,t),Es(t)}}function Es(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Hp(r)){var a=r;break e}r=r.return}throw Error(ae(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(wi(n,""),a.flags&=-33);var i=Xh(t);Yd(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Xh(t);Kd(t,o,l);break;default:throw Error(ae(161))}}catch(c){Qe(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Bj(t,s,r){de=t,Yp(t)}function Yp(t,s,r){for(var a=(t.mode&1)!==0;de!==null;){var n=de,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||_l;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||xt;o=_l;var d=xt;if(_l=l,(xt=c)&&!d)for(de=n;de!==null;)l=de,c=l.child,l.tag===22&&l.memoizedState!==null?tx(n):c!==null?(c.return=l,de=c):tx(n);for(;i!==null;)de=i,Yp(i),i=i.sibling;de=n,_l=o,xt=d}Zh(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,de=i):Zh(t)}}function Zh(t){for(;de!==null;){var s=de;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:xt||Vo(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!xt)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:hs(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&Oh(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Oh(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Si(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}xt||s.flags&512&&Qd(s)}catch(b){Qe(s,s.return,b)}}if(s===t){de=null;break}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}}function ex(t){for(;de!==null;){var s=de;if(s===t){de=null;break}var r=s.sibling;if(r!==null){r.return=s.return,de=r;break}de=s.return}}function tx(t){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Vo(4,s)}catch(c){Qe(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){Qe(s,n,c)}}var i=s.return;try{Qd(s)}catch(c){Qe(s,i,c)}break;case 5:var l=s.return;try{Qd(s)}catch(c){Qe(s,l,c)}}}catch(c){Qe(s,s.return,c)}if(s===t){de=null;break}var o=s.sibling;if(o!==null){o.return=s.return,de=o;break}de=s.return}}var Uj=Math.ceil,vo=dr.ReactCurrentDispatcher,fm=dr.ReactCurrentOwner,is=dr.ReactCurrentBatchConfig,Ce=0,nt=null,Je=null,ct=0,Bt=0,tn=Kr(0),st=0,Di=null,Pa=0,Wo=0,ym=0,yi=null,Ft=null,bm=0,Pn=1/0,Ks=null,No=!1,Gd=null,Or=null,kl=!1,Er=null,wo=0,bi=0,Xd=null,Bl=-1,Ul=0;function _t(){return Ce&6?Ke():Bl!==-1?Bl:Bl=Ke()}function Dr(t){return t.mode&1?Ce&2&&ct!==0?ct&-ct:Cj.transition!==null?(Ul===0&&(Ul=Mg()),Ul):(t=Me,t!==0||(t=window.event,t=t===void 0?16:qg(t.type)),t):1}function vs(t,s,r,a){if(50<bi)throw bi=0,Xd=null,Error(ae(185));Gi(t,r,a),(!(Ce&2)||t!==nt)&&(t===nt&&(!(Ce&2)&&(Wo|=r),st===4&&yr(t,ct)),$t(t,a),r===1&&Ce===0&&!(s.mode&1)&&(Pn=Ke()+500,zo&&Yr()))}function $t(t,s){var r=t.callbackNode;Cb(t,s);var a=no(t,t===nt?ct:0);if(a===0)r!==null&&dh(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&dh(r),s===1)t.tag===0?kj(sx.bind(null,t)):np(sx.bind(null,t)),vj(function(){!(Ce&6)&&Yr()}),r=null;else{switch(Lg(a)){case 1:r=Wu;break;case 4:r=Tg;break;case 16:r=ao;break;case 536870912:r=Ag;break;default:r=ao}r=rf(r,Gp.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Gp(t,s){if(Bl=-1,Ul=0,Ce&6)throw Error(ae(327));var r=t.callbackNode;if(on()&&t.callbackNode!==r)return null;var a=no(t,t===nt?ct:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=_o(t,a);else{s=a;var n=Ce;Ce|=2;var i=Jp();(nt!==t||ct!==s)&&(Ks=null,Pn=Ke()+500,Na(t,s));do try{Hj();break}catch(o){Xp(t,o)}while(!0);am(),vo.current=i,Ce=n,Je!==null?s=0:(nt=null,ct=0,s=st)}if(s!==0){if(s===2&&(n=_d(t),n!==0&&(a=n,s=Jd(t,n))),s===1)throw r=Di,Na(t,0),yr(t,a),$t(t,Ke()),r;if(s===6)yr(t,a);else{if(n=t.current.alternate,!(a&30)&&!Vj(n)&&(s=_o(t,a),s===2&&(i=_d(t),i!==0&&(a=i,s=Jd(t,i))),s===1))throw r=Di,Na(t,0),yr(t,a),$t(t,Ke()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(ae(345));case 2:ra(t,Ft,Ks);break;case 3:if(yr(t,a),(a&130023424)===a&&(s=bm+500-Ke(),10<s)){if(no(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){_t(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Ad(ra.bind(null,t,Ft,Ks),s);break}ra(t,Ft,Ks);break;case 4:if(yr(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var l=31-js(a);i=1<<l,l=s[l],l>n&&(n=l),a&=~i}if(a=n,a=Ke()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Uj(a/1960))-a,10<a){t.timeoutHandle=Ad(ra.bind(null,t,Ft,Ks),a);break}ra(t,Ft,Ks);break;case 5:ra(t,Ft,Ks);break;default:throw Error(ae(329))}}}return $t(t,Ke()),t.callbackNode===r?Gp.bind(null,t):null}function Jd(t,s){var r=yi;return t.current.memoizedState.isDehydrated&&(Na(t,s).flags|=256),t=_o(t,s),t!==2&&(s=Ft,Ft=r,s!==null&&Zd(s)),t}function Zd(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function Vj(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!ws(i(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yr(t,s){for(s&=~ym,s&=~Wo,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-js(s),a=1<<r;t[r]=-1,s&=~a}}function sx(t){if(Ce&6)throw Error(ae(327));on();var s=no(t,0);if(!(s&1))return $t(t,Ke()),null;var r=_o(t,s);if(t.tag!==0&&r===2){var a=_d(t);a!==0&&(s=a,r=Jd(t,a))}if(r===1)throw r=Di,Na(t,0),yr(t,s),$t(t,Ke()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ra(t,Ft,Ks),$t(t,Ke()),null}function jm(t,s){var r=Ce;Ce|=1;try{return t(s)}finally{Ce=r,Ce===0&&(Pn=Ke()+500,zo&&Yr())}}function Ea(t){Er!==null&&Er.tag===0&&!(Ce&6)&&on();var s=Ce;Ce|=1;var r=is.transition,a=Me;try{if(is.transition=null,Me=1,t)return t()}finally{Me=a,is.transition=r,Ce=s,!(Ce&6)&&Yr()}}function vm(){Bt=tn.current,De(tn)}function Na(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,jj(r)),Je!==null)for(r=Je.return;r!==null;){var a=r;switch(tm(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&uo();break;case 3:Cn(),De(Mt),De(pt),dm();break;case 5:cm(a);break;case 4:Cn();break;case 13:De(ze);break;case 19:De(ze);break;case 10:nm(a.type._context);break;case 22:case 23:vm()}r=r.return}if(nt=t,Je=t=Ir(t.current,null),ct=Bt=s,st=0,Di=null,ym=Wo=Pa=0,Ft=yi=null,oa!==null){for(s=0;s<oa.length;s++)if(r=oa[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}oa=null}return t}function Xp(t,s){do{var r=Je;try{if(am(),Il.current=jo,bo){for(var a=Be.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}bo=!1}if(Sa=0,at=et=Be=null,pi=!1,$i=0,fm.current=null,r===null||r.return===null){st=1,Di=s,Je=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=ct,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var b=u.alternate;b?(u.updateQueue=b.updateQueue,u.memoizedState=b.memoizedState,u.lanes=b.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Uh(l);if(p!==null){p.flags&=-257,Vh(p,l,o,i,s),p.mode&1&&Bh(i,d,s),s=p,c=d;var g=s.updateQueue;if(g===null){var h=new Set;h.add(c),s.updateQueue=h}else g.add(c);break e}else{if(!(s&1)){Bh(i,d,s),Nm();break e}c=Error(ae(426))}}else if(Ie&&o.mode&1){var N=Uh(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Vh(N,l,o,i,s),sm(Sn(c,o));break e}}i=c=Sn(c,o),st!==4&&(st=2),yi===null?yi=[i]:yi.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var j=Lp(i,c,s);Rh(i,j);break e;case 1:o=c;var y=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Or===null||!Or.has(f)))){i.flags|=65536,s&=-s,i.lanes|=s;var k=$p(i,o,s);Rh(i,k);break e}}i=i.return}while(i!==null)}ef(r)}catch(T){s=T,Je===r&&r!==null&&(Je=r=r.return);continue}break}while(!0)}function Jp(){var t=vo.current;return vo.current=jo,t===null?jo:t}function Nm(){(st===0||st===3||st===2)&&(st=4),nt===null||!(Pa&268435455)&&!(Wo&268435455)||yr(nt,ct)}function _o(t,s){var r=Ce;Ce|=2;var a=Jp();(nt!==t||ct!==s)&&(Ks=null,Na(t,s));do try{Wj();break}catch(n){Xp(t,n)}while(!0);if(am(),Ce=r,vo.current=a,Je!==null)throw Error(ae(261));return nt=null,ct=0,st}function Wj(){for(;Je!==null;)Zp(Je)}function Hj(){for(;Je!==null&&!fb();)Zp(Je)}function Zp(t){var s=sf(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,s===null?ef(t):Je=s,fm.current=null}function ef(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=Ij(r,s),r!==null){r.flags&=32767,Je=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Je=null;return}}else if(r=Dj(r,s,Bt),r!==null){Je=r;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=t}while(s!==null);st===0&&(st=5)}function ra(t,s,r){var a=Me,n=is.transition;try{is.transition=null,Me=1,Qj(t,s,r,a)}finally{is.transition=n,Me=a}return null}function Qj(t,s,r,a){do on();while(Er!==null);if(Ce&6)throw Error(ae(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Sb(t,i),t===nt&&(Je=nt=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kl||(kl=!0,rf(ao,function(){return on(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=is.transition,is.transition=null;var l=Me;Me=1;var o=Ce;Ce|=4,fm.current=null,zj(t,r),Kp(r,t),hj(Fd),io=!!Ed,Fd=Ed=null,t.current=r,Bj(r),yb(),Ce=o,Me=l,is.transition=i}else t.current=r;if(kl&&(kl=!1,Er=t,wo=n),i=t.pendingLanes,i===0&&(Or=null),vb(r.stateNode),$t(t,Ke()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(No)throw No=!1,t=Gd,Gd=null,t;return wo&1&&t.tag!==0&&on(),i=t.pendingLanes,i&1?t===Xd?bi++:(bi=0,Xd=t):bi=0,Yr(),null}function on(){if(Er!==null){var t=Lg(wo),s=is.transition,r=Me;try{if(is.transition=null,Me=16>t?16:t,Er===null)var a=!1;else{if(t=Er,Er=null,wo=0,Ce&6)throw Error(ae(331));var n=Ce;for(Ce|=4,de=t.current;de!==null;){var i=de,l=i.child;if(de.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(de=d;de!==null;){var u=de;switch(u.tag){case 0:case 11:case 15:fi(8,u,i)}var m=u.child;if(m!==null)m.return=u,de=m;else for(;de!==null;){u=de;var b=u.sibling,p=u.return;if(Wp(u),u===d){de=null;break}if(b!==null){b.return=p,de=b;break}de=p}}}var g=i.alternate;if(g!==null){var h=g.child;if(h!==null){g.child=null;do{var N=h.sibling;h.sibling=null,h=N}while(h!==null)}}de=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,de=l;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fi(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,de=j;break e}de=i.return}}var y=t.current;for(de=y;de!==null;){l=de;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,de=f;else e:for(l=y;de!==null;){if(o=de,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vo(9,o)}}catch(T){Qe(o,o.return,T)}if(o===l){de=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,de=k;break e}de=o.return}}if(Ce=n,Yr(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Ro,t)}catch{}a=!0}return a}finally{Me=r,is.transition=s}}return!1}function rx(t,s,r){s=Sn(r,s),s=Lp(t,s,1),t=Rr(t,s,1),s=_t(),t!==null&&(Gi(t,1,s),$t(t,s))}function Qe(t,s,r){if(t.tag===3)rx(t,t,r);else for(;s!==null;){if(s.tag===3){rx(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Or===null||!Or.has(a))){t=Sn(r,t),t=$p(s,t,1),s=Rr(s,t,1),t=_t(),s!==null&&(Gi(s,1,t),$t(s,t));break}}s=s.return}}function Kj(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=_t(),t.pingedLanes|=t.suspendedLanes&r,nt===t&&(ct&r)===r&&(st===4||st===3&&(ct&130023424)===ct&&500>Ke()-bm?Na(t,0):ym|=r),$t(t,s)}function tf(t,s){s===0&&(t.mode&1?(s=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):s=1);var r=_t();t=ir(t,s),t!==null&&(Gi(t,s,r),$t(t,r))}function Yj(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),tf(t,r)}function Gj(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(ae(314))}a!==null&&a.delete(s),tf(t,r)}var sf;sf=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Mt.current)Tt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Tt=!1,Oj(t,s,r);Tt=!!(t.flags&131072)}else Tt=!1,Ie&&s.flags&1048576&&ip(s,xo,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;zl(t,s),t=s.pendingProps;var n=wn(s,pt.current);ln(s,r),n=mm(null,s,a,t,n,r);var i=hm();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Lt(a)?(i=!0,mo(s)):i=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,lm(s),n.updater=Uo,s.stateNode=n,n._reactInternals=s,Id(s,a,t,r),s=Bd(null,s,a,!0,i,r)):(s.tag=0,Ie&&i&&em(s),vt(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(zl(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Jj(a),t=hs(a,t),n){case 0:s=zd(null,s,a,t,r);break e;case 1:s=Qh(null,s,a,t,r);break e;case 11:s=Wh(null,s,a,t,r);break e;case 14:s=Hh(null,s,a,hs(a.type,t),r);break e}throw Error(ae(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:hs(a,n),zd(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:hs(a,n),Qh(t,s,a,n,r);case 3:e:{if(Ip(s),t===null)throw Error(ae(387));a=s.pendingProps,i=s.memoizedState,n=i.element,mp(t,s),fo(s,a,null,r);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){n=Sn(Error(ae(423)),s),s=Kh(t,s,a,r,n);break e}else if(a!==n){n=Sn(Error(ae(424)),s),s=Kh(t,s,a,r,n);break e}else for(Ut=$r(s.stateNode.containerInfo.firstChild),Wt=s,Ie=!0,ys=null,r=dp(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_n(),a===n){s=lr(t,s,r);break e}vt(t,s,a,r)}s=s.child}return s;case 5:return hp(s),t===null&&Rd(s),a=s.type,n=s.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,Td(a,n)?l=null:i!==null&&Td(a,i)&&(s.flags|=32),Dp(t,s),vt(t,s,l,r),s.child;case 6:return t===null&&Rd(s),null;case 13:return qp(t,s,r);case 4:return om(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=kn(s,null,a,r):vt(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:hs(a,n),Wh(t,s,a,n,r);case 7:return vt(t,s,s.pendingProps,r),s.child;case 8:return vt(t,s,s.pendingProps.children,r),s.child;case 12:return vt(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Re(go,a._currentValue),a._currentValue=l,i!==null)if(ws(i.value,l)){if(i.children===n.children&&!Mt.current){s=lr(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=sr(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Od(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ae(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Od(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}vt(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,ln(s,r),n=os(n),a=a(n),s.flags|=1,vt(t,s,a,r),s.child;case 14:return a=s.type,n=hs(a,s.pendingProps),n=hs(a.type,n),Hh(t,s,a,n,r);case 15:return Rp(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:hs(a,n),zl(t,s),s.tag=1,Lt(a)?(t=!0,mo(s)):t=!1,ln(s,r),Mp(s,a,n),Id(s,a,n,r),Bd(null,s,a,!0,t,r);case 19:return zp(t,s,r);case 22:return Op(t,s,r)}throw Error(ae(156,s.tag))};function rf(t,s){return Fg(t,s)}function Xj(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,s,r,a){return new Xj(t,s,r,a)}function wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jj(t){if(typeof t=="function")return wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bu)return 11;if(t===Uu)return 14}return 2}function Ir(t,s){var r=t.alternate;return r===null?(r=ns(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Vl(t,s,r,a,n,i){var l=2;if(a=t,typeof t=="function")wm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Wa:return wa(r.children,n,i,s);case zu:l=8,n|=8;break;case cd:return t=ns(12,r,s,n|2),t.elementType=cd,t.lanes=i,t;case dd:return t=ns(13,r,s,n),t.elementType=dd,t.lanes=i,t;case ud:return t=ns(19,r,s,n),t.elementType=ud,t.lanes=i,t;case hg:return Ho(r,n,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ug:l=10;break e;case mg:l=9;break e;case Bu:l=11;break e;case Uu:l=14;break e;case gr:l=16,a=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return s=ns(l,r,s,n),s.elementType=t,s.type=a,s.lanes=i,s}function wa(t,s,r,a){return t=ns(7,t,a,s),t.lanes=r,t}function Ho(t,s,r,a){return t=ns(22,t,a,s),t.elementType=hg,t.lanes=r,t.stateNode={isHidden:!1},t}function Dc(t,s,r){return t=ns(6,t,null,s),t.lanes=r,t}function Ic(t,s,r){return s=ns(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Zj(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bc(0),this.expirationTimes=bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function _m(t,s,r,a,n,i,l,o,c){return t=new Zj(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=ns(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lm(i),t}function ev(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function af(t){if(!t)return Vr;t=t._reactInternals;e:{if(Ra(t)!==t||t.tag!==1)throw Error(ae(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Lt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(Lt(r))return ap(t,r,s)}return s}function nf(t,s,r,a,n,i,l,o,c){return t=_m(r,a,!0,t,n,i,l,o,c),t.context=af(null),r=t.current,a=_t(),n=Dr(r),i=sr(a,n),i.callback=s??null,Rr(r,i,n),t.current.lanes=n,Gi(t,n,a),$t(t,a),t}function Qo(t,s,r,a){var n=s.current,i=_t(),l=Dr(n);return r=af(r),s.context===null?s.context=r:s.pendingContext=r,s=sr(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Rr(n,s,l),t!==null&&(vs(t,n,l,i),Dl(t,n,l)),l}function ko(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ax(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function km(t,s){ax(t,s),(t=t.alternate)&&ax(t,s)}function tv(){return null}var lf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cm(t){this._internalRoot=t}Ko.prototype.render=Cm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ae(409));Qo(t,s,null,null)};Ko.prototype.unmount=Cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ea(function(){Qo(null,t,null,null)}),s[nr]=null}};function Ko(t){this._internalRoot=t}Ko.prototype.unstable_scheduleHydration=function(t){if(t){var s=Og();t={blockedOn:null,target:t,priority:s};for(var r=0;r<fr.length&&s!==0&&s<fr[r].priority;r++);fr.splice(r,0,t),r===0&&Ig(t)}};function Sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nx(){}function sv(t,s,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=ko(l);i.call(d)}}var l=nf(s,a,t,0,null,!1,!1,"",nx);return t._reactRootContainer=l,t[nr]=l.current,Fi(t.nodeType===8?t.parentNode:t),Ea(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=ko(c);o.call(d)}}var c=_m(t,0,!1,null,null,!1,!1,"",nx);return t._reactRootContainer=c,t[nr]=c.current,Fi(t.nodeType===8?t.parentNode:t),Ea(function(){Qo(s,c,r,a)}),c}function Go(t,s,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=ko(l);o.call(c)}}Qo(s,l,t,n)}else l=sv(r,s,t,n,a);return ko(l)}$g=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=li(s.pendingLanes);r!==0&&(Hu(s,r|1),$t(s,Ke()),!(Ce&6)&&(Pn=Ke()+500,Yr()))}break;case 13:Ea(function(){var a=ir(t,1);if(a!==null){var n=_t();vs(a,t,1,n)}}),km(t,1)}};Qu=function(t){if(t.tag===13){var s=ir(t,134217728);if(s!==null){var r=_t();vs(s,t,134217728,r)}km(t,134217728)}};Rg=function(t){if(t.tag===13){var s=Dr(t),r=ir(t,s);if(r!==null){var a=_t();vs(r,t,s,a)}km(t,s)}};Og=function(){return Me};Dg=function(t,s){var r=Me;try{return Me=t,s()}finally{Me=r}};vd=function(t,s,r){switch(s){case"input":if(xd(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=qo(a);if(!n)throw Error(ae(90));gg(a),xd(a,n)}}}break;case"textarea":fg(t,r);break;case"select":s=r.value,s!=null&&sn(t,!!r.multiple,s,!1)}};_g=jm;kg=Ea;var rv={usingClientEntryPoint:!1,Events:[Ji,Ya,qo,Ng,wg,jm]},Gn={findFiberByHostInstance:la,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},av={bundleType:Gn.bundleType,version:Gn.version,rendererPackageName:Gn.rendererPackageName,rendererConfig:Gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pg(t),t===null?null:t.stateNode},findFiberByHostInstance:Gn.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Ro=Cl.inject(av),Ds=Cl}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rv;Gt.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(s))throw Error(ae(200));return ev(t,s,null,r)};Gt.createRoot=function(t,s){if(!Sm(t))throw Error(ae(299));var r=!1,a="",n=lf;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=_m(t,1,!1,null,null,r,!1,a,n),t[nr]=s.current,Fi(t.nodeType===8?t.parentNode:t),new Cm(s)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=Pg(s),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return Ea(t)};Gt.hydrate=function(t,s,r){if(!Yo(s))throw Error(ae(200));return Go(null,t,s,!0,r)};Gt.hydrateRoot=function(t,s,r){if(!Sm(t))throw Error(ae(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=lf;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=nf(s,null,t,1,r??null,n,!1,i,l),t[nr]=s.current,Fi(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new Ko(s)};Gt.render=function(t,s,r){if(!Yo(s))throw Error(ae(200));return Go(null,t,s,!1,r)};Gt.unmountComponentAtNode=function(t){if(!Yo(t))throw Error(ae(40));return t._reactRootContainer?(Ea(function(){Go(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Gt.unstable_batchedUpdates=jm;Gt.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Yo(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Go(t,s,r,!1,a)};Gt.version="18.3.1-next-f1338f8080-20240426";function of(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(of)}catch(t){console.error(t)}}of(),lg.exports=Gt;var nv=lg.exports,cf,ix=nv;cf=ix.createRoot,ix.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ii(){return Ii=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ii.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const lx="popstate";function iv(t){t===void 0&&(t={});function s(a,n){let{pathname:i,search:l,hash:o}=a.location;return eu("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Co(n)}return ov(s,r,null,t)}function Ye(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Pm(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function lv(){return Math.random().toString(36).substr(2,8)}function ox(t,s){return{usr:t.state,key:t.key,idx:s}}function eu(t,s,r,a){return r===void 0&&(r=null),Ii({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Ln(s):s,{state:r,key:s&&s.key||a||lv()})}function Co(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Ln(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function ov(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=Fr.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ii({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=Fr.Pop;let N=u(),j=N==null?null:N-d;d=N,c&&c({action:o,location:h.location,delta:j})}function b(N,j){o=Fr.Push;let y=eu(h.location,N,j);d=u()+1;let f=ox(y,d),k=h.createHref(y);try{l.pushState(f,"",k)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(k)}i&&c&&c({action:o,location:h.location,delta:1})}function p(N,j){o=Fr.Replace;let y=eu(h.location,N,j);d=u();let f=ox(y,d),k=h.createHref(y);l.replaceState(f,"",k),i&&c&&c({action:o,location:h.location,delta:0})}function g(N){let j=n.location.origin!=="null"?n.location.origin:n.location.href,y=typeof N=="string"?N:Co(N);return y=y.replace(/ $/,"%20"),Ye(j,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,j)}let h={get action(){return o},get location(){return t(n,l)},listen(N){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(lx,m),c=N,()=>{n.removeEventListener(lx,m),c=null}},createHref(N){return s(n,N)},createURL:g,encodeLocation(N){let j=g(N);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:b,replace:p,go(N){return l.go(N)}};return h}var cx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cx||(cx={}));function cv(t,s,r){return r===void 0&&(r="/"),dv(t,s,r)}function dv(t,s,r,a){let n=typeof s=="string"?Ln(s):s,i=Em(n.pathname||"/",r);if(i==null)return null;let l=df(t);uv(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=wv(i);o=jv(l[c],d)}return o}function df(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Ye(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=qr([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),df(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:yv(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of uf(i.path))n(i,l,c)}),s}function uf(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=uf(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function uv(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:bv(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const mv=/^:[\w-]+$/,hv=3,xv=2,gv=1,pv=10,fv=-2,dx=t=>t==="*";function yv(t,s){let r=t.split("/"),a=r.length;return r.some(dx)&&(a+=fv),s&&(a+=xv),r.filter(n=>!dx(n)).reduce((n,i)=>n+(mv.test(i)?hv:i===""?gv:pv),a)}function bv(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function jv(t,s,r){let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",m=vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),b=c.route;if(!m)return null;Object.assign(n,m.params),l.push({params:n,pathname:qr([i,m.pathname]),pathnameBase:Pv(qr([i,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(i=qr([i,m.pathnameBase]))}return l}function vv(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=Nv(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,m)=>{let{paramName:b,isOptional:p}=u;if(b==="*"){let h=o[m]||"";l=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const g=o[m];return p&&!g?d[b]=void 0:d[b]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function Nv(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Pm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function wv(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Pm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Em(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const _v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kv=t=>_v.test(t);function Cv(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?Ln(t):t,i;if(r)if(kv(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),Pm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=ux(r.substring(1),"/"):i=ux(r,s)}else i=s;return{pathname:i,search:Ev(a),hash:Fv(n)}}function ux(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function qc(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sv(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Fm(t,s){let r=Sv(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Tm(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=Ln(t):(n=Ii({},t),Ye(!n.pathname||!n.pathname.includes("?"),qc("?","pathname","search",n)),Ye(!n.pathname||!n.pathname.includes("#"),qc("#","pathname","hash",n)),Ye(!n.search||!n.search.includes("#"),qc("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let m=s.length-1;if(!a&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),m-=1;n.pathname=b.join("/")}o=m>=0?s[m]:"/"}let c=Cv(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),Pv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ev=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mf=["post","put","patch","delete"];new Set(mf);const Av=["get",...mf];new Set(Av);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qi(){return qi=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},qi.apply(this,arguments)}const Am=x.createContext(null),Mv=x.createContext(null),Gr=x.createContext(null),Xo=x.createContext(null),ur=x.createContext({outlet:null,matches:[],isDataRoute:!1}),hf=x.createContext(null);function Lv(t,s){let{relative:r}=s===void 0?{}:s;$n()||Ye(!1);let{basename:a,navigator:n}=x.useContext(Gr),{hash:i,pathname:l,search:o}=gf(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:qr([a,l])),n.createHref({pathname:c,search:o,hash:i})}function $n(){return x.useContext(Xo)!=null}function Vs(){return $n()||Ye(!1),x.useContext(Xo).location}function xf(t){x.useContext(Gr).static||x.useLayoutEffect(t)}function je(){let{isDataRoute:t}=x.useContext(ur);return t?Qv():$v()}function $v(){$n()||Ye(!1);let t=x.useContext(Am),{basename:s,future:r,navigator:a}=x.useContext(Gr),{matches:n}=x.useContext(ur),{pathname:i}=Vs(),l=JSON.stringify(Fm(n,r.v7_relativeSplatPath)),o=x.useRef(!1);return xf(()=>{o.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let m=Tm(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:qr([s,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[s,a,l,i,t])}function Jt(){let{matches:t}=x.useContext(ur),s=t[t.length-1];return s?s.params:{}}function gf(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=x.useContext(Gr),{matches:n}=x.useContext(ur),{pathname:i}=Vs(),l=JSON.stringify(Fm(n,a.v7_relativeSplatPath));return x.useMemo(()=>Tm(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function Rv(t,s){return Ov(t,s)}function Ov(t,s,r,a){$n()||Ye(!1);let{navigator:n}=x.useContext(Gr),{matches:i}=x.useContext(ur),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Vs(),u;if(s){var m;let N=typeof s=="string"?Ln(s):s;c==="/"||(m=N.pathname)!=null&&m.startsWith(c)||Ye(!1),u=N}else u=d;let b=u.pathname||"/",p=b;if(c!=="/"){let N=c.replace(/^\//,"").split("/");p="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let g=cv(t,{pathname:p}),h=Bv(g&&g.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:qr([c,n.encodeLocation?n.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:qr([c,n.encodeLocation?n.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,r,a);return s&&h?x.createElement(Xo.Provider,{value:{location:qi({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fr.Pop}},h):h}function Dv(){let t=Hv(),s=Tv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),r?x.createElement("pre",{style:n},r):null,null)}const Iv=x.createElement(Dv,null);class qv extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?x.createElement(ur.Provider,{value:this.props.routeContext},x.createElement(hf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zv(t){let{routeContext:s,match:r,children:a}=t,n=x.useContext(Am);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(ur.Provider,{value:s},a)}function Bv(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||Ye(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:b,errors:p}=r,g=m.route.loader&&b[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,b)=>{let p,g=!1,h=null,N=null;r&&(p=o&&m.route.id?o[m.route.id]:void 0,h=m.route.errorElement||Iv,c&&(d<0&&b===0?(Kv("route-fallback"),g=!0,N=null):d===b&&(g=!0,N=m.route.hydrateFallbackElement||null)));let j=s.concat(l.slice(0,b+1)),y=()=>{let f;return p?f=h:g?f=N:m.route.Component?f=x.createElement(m.route.Component,null):m.route.element?f=m.route.element:f=u,x.createElement(zv,{match:m,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:f})};return r&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?x.createElement(qv,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:y(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):y()},null)}var pf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pf||{}),ff=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ff||{});function Uv(t){let s=x.useContext(Am);return s||Ye(!1),s}function Vv(t){let s=x.useContext(Mv);return s||Ye(!1),s}function Wv(t){let s=x.useContext(ur);return s||Ye(!1),s}function yf(t){let s=Wv(),r=s.matches[s.matches.length-1];return r.route.id||Ye(!1),r.route.id}function Hv(){var t;let s=x.useContext(hf),r=Vv(),a=yf();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function Qv(){let{router:t}=Uv(pf.UseNavigateStable),s=yf(ff.UseNavigateStable),r=x.useRef(!1);return xf(()=>{r.current=!0}),x.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,qi({fromRouteId:s},i)))},[t,s])}const mx={};function Kv(t,s,r){mx[t]||(mx[t]=!0)}function Yv(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vt(t){let{to:s,replace:r,state:a,relative:n}=t;$n()||Ye(!1);let{future:i,static:l}=x.useContext(Gr),{matches:o}=x.useContext(ur),{pathname:c}=Vs(),d=je(),u=Tm(s,Fm(o,i.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return x.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:n}),[d,m,n,r,a]),null}function ue(t){Ye(!1)}function Gv(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Fr.Pop,navigator:i,static:l=!1,future:o}=t;$n()&&Ye(!1);let c=s.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:l,future:qi({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Ln(a));let{pathname:u="/",search:m="",hash:b="",state:p=null,key:g="default"}=a,h=x.useMemo(()=>{let N=Em(u,c);return N==null?null:{location:{pathname:N,search:m,hash:b,state:p,key:g},navigationType:n}},[c,u,m,b,p,g,n]);return h==null?null:x.createElement(Gr.Provider,{value:d},x.createElement(Xo.Provider,{children:r,value:h}))}function Xv(t){let{children:s,location:r}=t;return Rv(tu(s),r)}new Promise(()=>{});function tu(t,s){s===void 0&&(s=[]);let r=[];return x.Children.forEach(t,(a,n)=>{if(!x.isValidElement(a))return;let i=[...s,n];if(a.type===x.Fragment){r.push.apply(r,tu(a.props.children,i));return}a.type!==ue&&Ye(!1),!a.props.index||!a.props.children||Ye(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=tu(a.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},su.apply(this,arguments)}function Jv(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Zv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eN(t,s){return t.button===0&&(!s||s==="_self")&&!Zv(t)}function ru(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function tN(t,s){let r=ru(t);return s&&s.forEach((a,n)=>{r.has(n)||s.getAll(n).forEach(i=>{r.append(n,i)})}),r}const sN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rN="6";try{window.__reactRouterVersion=rN}catch{}const aN="startTransition",hx=Ky[aN];function nN(t){let{basename:s,children:r,future:a,window:n}=t,i=x.useRef();i.current==null&&(i.current=iv({window:n,v5Compat:!0}));let l=i.current,[o,c]=x.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=x.useCallback(m=>{d&&hx?hx(()=>c(m)):c(m)},[c,d]);return x.useLayoutEffect(()=>l.listen(u),[l,u]),x.useEffect(()=>Yv(a),[a]),x.createElement(Gv,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:l,future:a})}const iN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H=x.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=s,b=Jv(s,sN),{basename:p}=x.useContext(Gr),g,h=!1;if(typeof d=="string"&&lN.test(d)&&(g=d,iN))try{let f=new URL(window.location.href),k=d.startsWith("//")?new URL(f.protocol+d):new URL(d),T=Em(k.pathname,p);k.origin===f.origin&&T!=null?d=T+k.search+k.hash:h=!0}catch{}let N=Lv(d,{relative:n}),j=oN(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:m});function y(f){a&&a(f),f.defaultPrevented||j(f)}return x.createElement("a",su({},b,{href:g||N,onClick:h||i?a:y,ref:r,target:c}))});var xx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xx||(xx={}));var gx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gx||(gx={}));function oN(t,s){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=je(),d=Vs(),u=gf(t,{relative:l});return x.useCallback(m=>{if(eN(m,r)){m.preventDefault();let b=a!==void 0?a:Co(d)===Co(u);c(t,{replace:b,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}function Xe(t){let s=x.useRef(ru(t)),r=x.useRef(!1),a=Vs(),n=x.useMemo(()=>tN(a.search,r.current?null:s.current),[a.search]),i=je(),l=x.useCallback((o,c)=>{const d=ru(typeof o=="function"?o(n):o);r.current=!0,i("?"+d,c)},[i,n]);return[n,l]}var Rn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cN={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},br,Mu,I0,dN=(I0=class{constructor(){me(this,br,cN);me(this,Mu,!1)}setTimeoutProvider(t){oe(this,br,t)}setTimeout(t,s){return V(this,br).setTimeout(t,s)}clearTimeout(t){V(this,br).clearTimeout(t)}setInterval(t,s){return V(this,br).setInterval(t,s)}clearInterval(t){V(this,br).clearInterval(t)}},br=new WeakMap,Mu=new WeakMap,I0),da=new dN;function uN(t){setTimeout(t,0)}var Fa=typeof window>"u"||"Deno"in globalThis;function Nt(){}function mN(t,s){return typeof t=="function"?t(s):t}function au(t){return typeof t=="number"&&t>=0&&t!==1/0}function bf(t,s){return Math.max(t+(s||0)-Date.now(),0)}function zr(t,s){return typeof t=="function"?t(s):t}function ts(t,s){return typeof t=="function"?t(s):t}function px(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:l,stale:o}=t;if(l){if(a){if(s.queryHash!==Mm(l,s.options))return!1}else if(!zi(s.queryKey,l))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||n&&n!==s.state.fetchStatus||i&&!i(s))}function fx(t,s){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Ta(s.options.mutationKey)!==Ta(i))return!1}else if(!zi(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function Mm(t,s){return((s==null?void 0:s.queryKeyHashFn)||Ta)(t)}function Ta(t){return JSON.stringify(t,(s,r)=>nu(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function zi(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>zi(t[r],s[r])):!1}var hN=Object.prototype.hasOwnProperty;function jf(t,s){if(t===s)return t;const r=yx(t)&&yx(s);if(!r&&!(nu(t)&&nu(s)))return s;const n=(r?t:Object.keys(t)).length,i=r?s:Object.keys(s),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=r?d:i[d],m=t[u],b=s[u];if(m===b){o[u]=m,(r?d<n:hN.call(t,u))&&c++;continue}if(m===null||b===null||typeof m!="object"||typeof b!="object"){o[u]=b;continue}const p=jf(m,b);o[u]=p,p===m&&c++}return n===l&&c===n?t:o}function So(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function yx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function nu(t){if(!bx(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!bx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bx(t){return Object.prototype.toString.call(t)==="[object Object]"}function xN(t){return new Promise(s=>{da.setTimeout(s,t)})}function iu(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?jf(t,s):s}function gN(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function pN(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var Lm=Symbol();function vf(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===Lm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Nf(t,s){return typeof t=="function"?t(...s):!!t}var ha,jr,dn,q0,fN=(q0=class extends Rn{constructor(){super();me(this,ha);me(this,jr);me(this,dn);oe(this,dn,s=>{if(!Fa&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){V(this,jr)||this.setEventListener(V(this,dn))}onUnsubscribe(){var s;this.hasListeners()||((s=V(this,jr))==null||s.call(this),oe(this,jr,void 0))}setEventListener(s){var r;oe(this,dn,s),(r=V(this,jr))==null||r.call(this),oe(this,jr,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){V(this,ha)!==s&&(oe(this,ha,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof V(this,ha)=="boolean"?V(this,ha):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},ha=new WeakMap,jr=new WeakMap,dn=new WeakMap,q0),$m=new fN;function lu(){let t,s;const r=new Promise((n,i)=>{t=n,s=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var yN=uN;function bN(){let t=[],s=0,r=o=>{o()},a=o=>{o()},n=yN;const i=o=>{s?t.push(o):n(()=>{r(o)})},l=()=>{const o=t;t=[],o.length&&n(()=>{a(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{n=o}}}var tt=bN(),un,vr,mn,z0,jN=(z0=class extends Rn{constructor(){super();me(this,un,!0);me(this,vr);me(this,mn);oe(this,mn,s=>{if(!Fa&&window.addEventListener){const r=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){V(this,vr)||this.setEventListener(V(this,mn))}onUnsubscribe(){var s;this.hasListeners()||((s=V(this,vr))==null||s.call(this),oe(this,vr,void 0))}setEventListener(s){var r;oe(this,mn,s),(r=V(this,vr))==null||r.call(this),oe(this,vr,s(this.setOnline.bind(this)))}setOnline(s){V(this,un)!==s&&(oe(this,un,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return V(this,un)}},un=new WeakMap,vr=new WeakMap,mn=new WeakMap,z0),Po=new jN;function vN(t){return Math.min(1e3*2**t,3e4)}function wf(t){return(t??"online")==="online"?Po.isOnline():!0}var ou=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function _f(t){let s=!1,r=0,a;const n=lu(),i=()=>n.status!=="pending",l=h=>{var N;if(!i()){const j=new ou(h);b(j),(N=t.onCancel)==null||N.call(t,j)}},o=()=>{s=!0},c=()=>{s=!1},d=()=>$m.isFocused()&&(t.networkMode==="always"||Po.isOnline())&&t.canRun(),u=()=>wf(t.networkMode)&&t.canRun(),m=h=>{i()||(a==null||a(),n.resolve(h))},b=h=>{i()||(a==null||a(),n.reject(h))},p=()=>new Promise(h=>{var N;a=j=>{(i()||d())&&h(j)},(N=t.onPause)==null||N.call(t)}).then(()=>{var h;a=void 0,i()||(h=t.onContinue)==null||h.call(t)}),g=()=>{if(i())return;let h;const N=r===0?t.initialPromise:void 0;try{h=N??t.fn()}catch(j){h=Promise.reject(j)}Promise.resolve(h).then(m).catch(j=>{var M;if(i())return;const y=t.retry??(Fa?0:3),f=t.retryDelay??vN,k=typeof f=="function"?f(r,j):f,T=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,j);if(s||!T){b(j);return}r++,(M=t.onFail)==null||M.call(t,r,j),xN(k).then(()=>d()?void 0:p()).then(()=>{s?b(j):g()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(a==null||a(),n),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?g():p().then(g),n)}}var xa,B0,kf=(B0=class{constructor(){me(this,xa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),au(this.gcTime)&&oe(this,xa,da.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Fa?1/0:5*60*1e3))}clearGcTimeout(){V(this,xa)&&(da.clearTimeout(V(this,xa)),oe(this,xa,void 0))}},xa=new WeakMap,B0),ga,hn,es,pa,rt,Vi,fa,xs,Qs,U0,NN=(U0=class extends kf{constructor(s){super();me(this,xs);me(this,ga);me(this,hn);me(this,es);me(this,pa);me(this,rt);me(this,Vi);me(this,fa);oe(this,fa,!1),oe(this,Vi,s.defaultOptions),this.setOptions(s.options),this.observers=[],oe(this,pa,s.client),oe(this,es,V(this,pa).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,oe(this,ga,vx(this.options)),this.state=s.state??V(this,ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=V(this,rt))==null?void 0:s.promise}setOptions(s){if(this.options={...V(this,Vi),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=vx(this.options);r.data!==void 0&&(this.setState(jx(r.data,r.dataUpdatedAt)),oe(this,ga,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,es).remove(this)}setData(s,r){const a=iu(this.state.data,s,this.options);return pe(this,xs,Qs).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(s,r){pe(this,xs,Qs).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var a,n;const r=(a=V(this,rt))==null?void 0:a.promise;return(n=V(this,rt))==null||n.cancel(s),r?r.then(Nt).catch(Nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,ga))}isActive(){return this.observers.some(s=>ts(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Lm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>zr(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!bf(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=V(this,rt))==null||r.continue()}onOnline(){var r;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=V(this,rt))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),V(this,es).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(V(this,rt)&&(V(this,fa)?V(this,rt).cancel({revert:!0}):V(this,rt).cancelRetry()),this.scheduleGc()),V(this,es).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,xs,Qs).call(this,{type:"invalidate"})}async fetch(s,r){var c,d,u,m,b,p,g,h,N,j,y,f;if(this.state.fetchStatus!=="idle"&&((c=V(this,rt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(V(this,rt))return V(this,rt).continueRetry(),V(this,rt).promise}if(s&&this.setOptions(s),!this.options.queryFn){const k=this.observers.find(T=>T.options.queryFn);k&&this.setOptions(k.options)}const a=new AbortController,n=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(oe(this,fa,!0),a.signal)})},i=()=>{const k=vf(this.options,r),M=(()=>{const P={client:V(this,pa),queryKey:this.queryKey,meta:this.meta};return n(P),P})();return oe(this,fa,!1),this.options.persister?this.options.persister(k,M,this):k(M)},o=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:V(this,pa),state:this.state,fetchFn:i};return n(k),k})();(d=this.options.behavior)==null||d.onFetch(o,this),oe(this,hn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&pe(this,xs,Qs).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta}),oe(this,rt,_f({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:k=>{k instanceof ou&&k.revert&&this.setState({...V(this,hn),fetchStatus:"idle"}),a.abort()},onFail:(k,T)=>{pe(this,xs,Qs).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{pe(this,xs,Qs).call(this,{type:"pause"})},onContinue:()=>{pe(this,xs,Qs).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const k=await V(this,rt).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(p=(b=V(this,es).config).onSuccess)==null||p.call(b,k,this),(h=(g=V(this,es).config).onSettled)==null||h.call(g,k,this.state.error,this),k}catch(k){if(k instanceof ou){if(k.silent)return V(this,rt).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw pe(this,xs,Qs).call(this,{type:"error",error:k}),(j=(N=V(this,es).config).onError)==null||j.call(N,k,this),(f=(y=V(this,es).config).onSettled)==null||f.call(y,this.state.data,k,this),k}finally{this.scheduleGc()}}},ga=new WeakMap,hn=new WeakMap,es=new WeakMap,pa=new WeakMap,rt=new WeakMap,Vi=new WeakMap,fa=new WeakMap,xs=new WeakSet,Qs=function(s){const r=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Cf(a.data,this.options),fetchMeta:s.meta??null};case"success":const n={...a,...jx(s.data,s.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return oe(this,hn,s.manual?n:void 0),n;case"error":const i=s.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=r(this.state),tt.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),V(this,es).notify({query:this,type:"updated",action:s})})},U0);function Cf(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wf(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jx(t,s){return{data:t,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function vx(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var St,ve,Wi,bt,ya,xn,Gs,Nr,Hi,gn,pn,ba,ja,wr,fn,Ee,ci,cu,du,uu,mu,hu,xu,gu,Sf,V0,wN=(V0=class extends Rn{constructor(s,r){super();me(this,Ee);me(this,St);me(this,ve);me(this,Wi);me(this,bt);me(this,ya);me(this,xn);me(this,Gs);me(this,Nr);me(this,Hi);me(this,gn);me(this,pn);me(this,ba);me(this,ja);me(this,wr);me(this,fn,new Set);this.options=r,oe(this,St,s),oe(this,Nr,null),oe(this,Gs,lu()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,ve).addObserver(this),Nx(V(this,ve),this.options)?pe(this,Ee,ci).call(this):this.updateResult(),pe(this,Ee,mu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return pu(V(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return pu(V(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,Ee,hu).call(this),pe(this,Ee,xu).call(this),V(this,ve).removeObserver(this)}setOptions(s){const r=this.options,a=V(this,ve);if(this.options=V(this,St).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ts(this.options.enabled,V(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,Ee,gu).call(this),V(this,ve).setOptions(this.options),r._defaulted&&!So(this.options,r)&&V(this,St).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,ve),observer:this});const n=this.hasListeners();n&&wx(V(this,ve),a,this.options,r)&&pe(this,Ee,ci).call(this),this.updateResult(),n&&(V(this,ve)!==a||ts(this.options.enabled,V(this,ve))!==ts(r.enabled,V(this,ve))||zr(this.options.staleTime,V(this,ve))!==zr(r.staleTime,V(this,ve)))&&pe(this,Ee,cu).call(this);const i=pe(this,Ee,du).call(this);n&&(V(this,ve)!==a||ts(this.options.enabled,V(this,ve))!==ts(r.enabled,V(this,ve))||i!==V(this,wr))&&pe(this,Ee,uu).call(this,i)}getOptimisticResult(s){const r=V(this,St).getQueryCache().build(V(this,St),s),a=this.createResult(r,s);return kN(this,a)&&(oe(this,bt,a),oe(this,xn,this.options),oe(this,ya,V(this,ve).state)),a}getCurrentResult(){return V(this,bt)}trackResult(s,r){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&V(this,Gs).status==="pending"&&V(this,Gs).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(s){V(this,fn).add(s)}getCurrentQuery(){return V(this,ve)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=V(this,St).defaultQueryOptions(s),a=V(this,St).getQueryCache().build(V(this,St),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return pe(this,Ee,ci).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,bt)))}createResult(s,r){var F;const a=V(this,ve),n=this.options,i=V(this,bt),l=V(this,ya),o=V(this,xn),d=s!==a?s.state:V(this,Wi),{state:u}=s;let m={...u},b=!1,p;if(r._optimisticResults){const v=this.hasListeners(),O=!v&&Nx(s,r),R=v&&wx(s,a,r,n);(O||R)&&(m={...m,...Cf(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:h,status:N}=m;p=m.data;let j=!1;if(r.placeholderData!==void 0&&p===void 0&&N==="pending"){let v;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(v=i.data,j=!0):v=typeof r.placeholderData=="function"?r.placeholderData((F=V(this,pn))==null?void 0:F.state.data,V(this,pn)):r.placeholderData,v!==void 0&&(N="success",p=iu(i==null?void 0:i.data,v,r),b=!0)}if(r.select&&p!==void 0&&!j)if(i&&p===(l==null?void 0:l.data)&&r.select===V(this,Hi))p=V(this,gn);else try{oe(this,Hi,r.select),p=r.select(p),p=iu(i==null?void 0:i.data,p,r),oe(this,gn,p),oe(this,Nr,null)}catch(v){oe(this,Nr,v)}V(this,Nr)&&(g=V(this,Nr),p=V(this,gn),h=Date.now(),N="error");const y=m.fetchStatus==="fetching",f=N==="pending",k=N==="error",T=f&&y,M=p!==void 0,_={status:N,fetchStatus:m.fetchStatus,isPending:f,isSuccess:N==="success",isError:k,isInitialLoading:T,isLoading:T,data:p,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:h,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!f,isLoadingError:k&&!M,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:k&&M,isStale:Rm(s,r),refetch:this.refetch,promise:V(this,Gs),isEnabled:ts(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const v=C=>{_.status==="error"?C.reject(_.error):_.data!==void 0&&C.resolve(_.data)},O=()=>{const C=oe(this,Gs,_.promise=lu());v(C)},R=V(this,Gs);switch(R.status){case"pending":s.queryHash===a.queryHash&&v(R);break;case"fulfilled":(_.status==="error"||_.data!==R.value)&&O();break;case"rejected":(_.status!=="error"||_.error!==R.reason)&&O();break}}return _}updateResult(){const s=V(this,bt),r=this.createResult(V(this,ve),this.options);if(oe(this,ya,V(this,ve).state),oe(this,xn,this.options),V(this,ya).data!==void 0&&oe(this,pn,V(this,ve)),So(r,s))return;oe(this,bt,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!V(this,fn).size)return!0;const l=new Set(i??V(this,fn));return this.options.throwOnError&&l.add("error"),Object.keys(V(this,bt)).some(o=>{const c=o;return V(this,bt)[c]!==s[c]&&l.has(c)})};pe(this,Ee,Sf).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,Ee,mu).call(this)}},St=new WeakMap,ve=new WeakMap,Wi=new WeakMap,bt=new WeakMap,ya=new WeakMap,xn=new WeakMap,Gs=new WeakMap,Nr=new WeakMap,Hi=new WeakMap,gn=new WeakMap,pn=new WeakMap,ba=new WeakMap,ja=new WeakMap,wr=new WeakMap,fn=new WeakMap,Ee=new WeakSet,ci=function(s){pe(this,Ee,gu).call(this);let r=V(this,ve).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Nt)),r},cu=function(){pe(this,Ee,hu).call(this);const s=zr(this.options.staleTime,V(this,ve));if(Fa||V(this,bt).isStale||!au(s))return;const a=bf(V(this,bt).dataUpdatedAt,s)+1;oe(this,ba,da.setTimeout(()=>{V(this,bt).isStale||this.updateResult()},a))},du=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,ve)):this.options.refetchInterval)??!1},uu=function(s){pe(this,Ee,xu).call(this),oe(this,wr,s),!(Fa||ts(this.options.enabled,V(this,ve))===!1||!au(V(this,wr))||V(this,wr)===0)&&oe(this,ja,da.setInterval(()=>{(this.options.refetchIntervalInBackground||$m.isFocused())&&pe(this,Ee,ci).call(this)},V(this,wr)))},mu=function(){pe(this,Ee,cu).call(this),pe(this,Ee,uu).call(this,pe(this,Ee,du).call(this))},hu=function(){V(this,ba)&&(da.clearTimeout(V(this,ba)),oe(this,ba,void 0))},xu=function(){V(this,ja)&&(da.clearInterval(V(this,ja)),oe(this,ja,void 0))},gu=function(){const s=V(this,St).getQueryCache().build(V(this,St),this.options);if(s===V(this,ve))return;const r=V(this,ve);oe(this,ve,s),oe(this,Wi,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},Sf=function(s){tt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(V(this,bt))}),V(this,St).getQueryCache().notify({query:V(this,ve),type:"observerResultsUpdated"})})},V0);function _N(t,s){return ts(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Nx(t,s){return _N(t,s)||t.state.data!==void 0&&pu(t,s,s.refetchOnMount)}function pu(t,s,r){if(ts(s.enabled,t)!==!1&&zr(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&Rm(t,s)}return!1}function wx(t,s,r,a){return(t!==s||ts(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Rm(t,r)}function Rm(t,s){return ts(s.enabled,t)!==!1&&t.isStaleByTime(zr(s.staleTime,t))}function kN(t,s){return!So(t.getCurrentResult(),s)}function _x(t){return{onFetch:(s,r)=>{var u,m,b,p,g;const a=s.options,n=(b=(m=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:b.direction,i=((p=s.state.data)==null?void 0:p.pages)||[],l=((g=s.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let h=!1;const N=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(s.signal.aborted?h=!0:s.signal.addEventListener("abort",()=>{h=!0}),s.signal)})},j=vf(s.options,s.fetchOptions),y=async(f,k,T)=>{if(h)return Promise.reject();if(k==null&&f.pages.length)return Promise.resolve(f);const P=(()=>{const O={client:s.client,queryKey:s.queryKey,pageParam:k,direction:T?"backward":"forward",meta:s.options.meta};return N(O),O})(),_=await j(P),{maxPages:F}=s.options,v=T?pN:gN;return{pages:v(f.pages,_,F),pageParams:v(f.pageParams,k,F)}};if(n&&i.length){const f=n==="backward",k=f?CN:kx,T={pages:i,pageParams:l},M=k(a,T);o=await y(T,M,f)}else{const f=t??i.length;do{const k=c===0?l[0]??a.initialPageParam:kx(a,o);if(c>0&&k==null)break;o=await y(o,k),c++}while(c<f)}return o};s.options.persister?s.fetchFn=()=>{var h,N;return(N=(h=s.options).persister)==null?void 0:N.call(h,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function kx(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function CN(t,{pages:s,pageParams:r}){var a;return s.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,s[0],s,r[0],r):void 0}var Qi,Ms,jt,va,Ls,xr,W0,SN=(W0=class extends kf{constructor(s){super();me(this,Ls);me(this,Qi);me(this,Ms);me(this,jt);me(this,va);oe(this,Qi,s.client),this.mutationId=s.mutationId,oe(this,jt,s.mutationCache),oe(this,Ms,[]),this.state=s.state||Pf(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){V(this,Ms).includes(s)||(V(this,Ms).push(s),this.clearGcTimeout(),V(this,jt).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){oe(this,Ms,V(this,Ms).filter(r=>r!==s)),this.scheduleGc(),V(this,jt).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){V(this,Ms).length||(this.state.status==="pending"?this.scheduleGc():V(this,jt).remove(this))}continue(){var s;return((s=V(this,va))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var l,o,c,d,u,m,b,p,g,h,N,j,y,f,k,T,M,P,_,F;const r=()=>{pe(this,Ls,xr).call(this,{type:"continue"})},a={client:V(this,Qi),meta:this.options.meta,mutationKey:this.options.mutationKey};oe(this,va,_f({fn:()=>this.options.mutationFn?this.options.mutationFn(s,a):Promise.reject(new Error("No mutationFn found")),onFail:(v,O)=>{pe(this,Ls,xr).call(this,{type:"failed",failureCount:v,error:O})},onPause:()=>{pe(this,Ls,xr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,jt).canRun(this)}));const n=this.state.status==="pending",i=!V(this,va).canStart();try{if(n)r();else{pe(this,Ls,xr).call(this,{type:"pending",variables:s,isPaused:i}),await((o=(l=V(this,jt).config).onMutate)==null?void 0:o.call(l,s,this,a));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,s,a));O!==this.state.context&&pe(this,Ls,xr).call(this,{type:"pending",context:O,variables:s,isPaused:i})}const v=await V(this,va).start();return await((m=(u=V(this,jt).config).onSuccess)==null?void 0:m.call(u,v,s,this.state.context,this,a)),await((p=(b=this.options).onSuccess)==null?void 0:p.call(b,v,s,this.state.context,a)),await((h=(g=V(this,jt).config).onSettled)==null?void 0:h.call(g,v,null,this.state.variables,this.state.context,this,a)),await((j=(N=this.options).onSettled)==null?void 0:j.call(N,v,null,s,this.state.context,a)),pe(this,Ls,xr).call(this,{type:"success",data:v}),v}catch(v){try{throw await((f=(y=V(this,jt).config).onError)==null?void 0:f.call(y,v,s,this.state.context,this,a)),await((T=(k=this.options).onError)==null?void 0:T.call(k,v,s,this.state.context,a)),await((P=(M=V(this,jt).config).onSettled)==null?void 0:P.call(M,void 0,v,this.state.variables,this.state.context,this,a)),await((F=(_=this.options).onSettled)==null?void 0:F.call(_,void 0,v,s,this.state.context,a)),v}finally{pe(this,Ls,xr).call(this,{type:"error",error:v})}}finally{V(this,jt).runNext(this)}}},Qi=new WeakMap,Ms=new WeakMap,jt=new WeakMap,va=new WeakMap,Ls=new WeakSet,xr=function(s){const r=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),tt.batch(()=>{V(this,Ms).forEach(a=>{a.onMutationUpdate(s)}),V(this,jt).notify({mutation:this,type:"updated",action:s})})},W0);function Pf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xs,gs,Ki,H0,PN=(H0=class extends Rn{constructor(s={}){super();me(this,Xs);me(this,gs);me(this,Ki);this.config=s,oe(this,Xs,new Set),oe(this,gs,new Map),oe(this,Ki,0)}build(s,r,a){const n=new SN({client:s,mutationCache:this,mutationId:++cl(this,Ki)._,options:s.defaultMutationOptions(r),state:a});return this.add(n),n}add(s){V(this,Xs).add(s);const r=Sl(s);if(typeof r=="string"){const a=V(this,gs).get(r);a?a.push(s):V(this,gs).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(V(this,Xs).delete(s)){const r=Sl(s);if(typeof r=="string"){const a=V(this,gs).get(r);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&V(this,gs).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Sl(s);if(typeof r=="string"){const a=V(this,gs).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===s}else return!0}runNext(s){var a;const r=Sl(s);if(typeof r=="string"){const n=(a=V(this,gs).get(r))==null?void 0:a.find(i=>i!==s&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tt.batch(()=>{V(this,Xs).forEach(s=>{this.notify({type:"removed",mutation:s})}),V(this,Xs).clear(),V(this,gs).clear()})}getAll(){return Array.from(V(this,Xs))}find(s){const r={exact:!0,...s};return this.getAll().find(a=>fx(r,a))}findAll(s={}){return this.getAll().filter(r=>fx(s,r))}notify(s){tt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return tt.batch(()=>Promise.all(s.map(r=>r.continue().catch(Nt))))}},Xs=new WeakMap,gs=new WeakMap,Ki=new WeakMap,H0);function Sl(t){var s;return(s=t.options.scope)==null?void 0:s.id}var Js,_r,Pt,Zs,rr,Wl,fu,Q0,EN=(Q0=class extends Rn{constructor(r,a){super();me(this,rr);me(this,Js);me(this,_r);me(this,Pt);me(this,Zs);oe(this,Js,r),this.setOptions(a),this.bindMethods(),pe(this,rr,Wl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=V(this,Js).defaultMutationOptions(r),So(this.options,a)||V(this,Js).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,Pt),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Ta(a.mutationKey)!==Ta(this.options.mutationKey)?this.reset():((n=V(this,Pt))==null?void 0:n.state.status)==="pending"&&V(this,Pt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=V(this,Pt))==null||r.removeObserver(this)}onMutationUpdate(r){pe(this,rr,Wl).call(this),pe(this,rr,fu).call(this,r)}getCurrentResult(){return V(this,_r)}reset(){var r;(r=V(this,Pt))==null||r.removeObserver(this),oe(this,Pt,void 0),pe(this,rr,Wl).call(this),pe(this,rr,fu).call(this)}mutate(r,a){var n;return oe(this,Zs,a),(n=V(this,Pt))==null||n.removeObserver(this),oe(this,Pt,V(this,Js).getMutationCache().build(V(this,Js),this.options)),V(this,Pt).addObserver(this),V(this,Pt).execute(r)}},Js=new WeakMap,_r=new WeakMap,Pt=new WeakMap,Zs=new WeakMap,rr=new WeakSet,Wl=function(){var a;const r=((a=V(this,Pt))==null?void 0:a.state)??Pf();oe(this,_r,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},fu=function(r){tt.batch(()=>{var a,n,i,l,o,c,d,u;if(V(this,Zs)&&this.hasListeners()){const m=V(this,_r).variables,b=V(this,_r).context,p={client:V(this,Js),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(a=V(this,Zs)).onSuccess)==null||n.call(a,r.data,m,b,p),(l=(i=V(this,Zs)).onSettled)==null||l.call(i,r.data,null,m,b,p)):(r==null?void 0:r.type)==="error"&&((c=(o=V(this,Zs)).onError)==null||c.call(o,r.error,m,b,p),(u=(d=V(this,Zs)).onSettled)==null||u.call(d,void 0,r.error,m,b,p))}this.listeners.forEach(m=>{m(V(this,_r))})})},Q0),$s,K0,FN=(K0=class extends Rn{constructor(s={}){super();me(this,$s);this.config=s,oe(this,$s,new Map)}build(s,r,a){const n=r.queryKey,i=r.queryHash??Mm(n,r);let l=this.get(i);return l||(l=new NN({client:s,queryKey:n,queryHash:i,options:s.defaultQueryOptions(r),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(l)),l}add(s){V(this,$s).has(s.queryHash)||(V(this,$s).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=V(this,$s).get(s.queryHash);r&&(s.destroy(),r===s&&V(this,$s).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){tt.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return V(this,$s).get(s)}getAll(){return[...V(this,$s).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(a=>px(r,a))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(a=>px(s,a)):r}notify(s){tt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){tt.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){tt.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},$s=new WeakMap,K0),He,kr,Cr,yn,bn,Sr,jn,vn,Y0,TN=(Y0=class{constructor(t={}){me(this,He);me(this,kr);me(this,Cr);me(this,yn);me(this,bn);me(this,Sr);me(this,jn);me(this,vn);oe(this,He,t.queryCache||new FN),oe(this,kr,t.mutationCache||new PN),oe(this,Cr,t.defaultOptions||{}),oe(this,yn,new Map),oe(this,bn,new Map),oe(this,Sr,0)}mount(){cl(this,Sr)._++,V(this,Sr)===1&&(oe(this,jn,$m.subscribe(async t=>{t&&(await this.resumePausedMutations(),V(this,He).onFocus())})),oe(this,vn,Po.subscribe(async t=>{t&&(await this.resumePausedMutations(),V(this,He).onOnline())})))}unmount(){var t,s;cl(this,Sr)._--,V(this,Sr)===0&&((t=V(this,jn))==null||t.call(this),oe(this,jn,void 0),(s=V(this,vn))==null||s.call(this),oe(this,vn,void 0))}isFetching(t){return V(this,He).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return V(this,kr).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=V(this,He).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=V(this,He).build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(zr(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return V(this,He).findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),n=V(this,He).get(a.queryHash),i=n==null?void 0:n.state.data,l=mN(s,i);if(l!==void 0)return V(this,He).build(this,a).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return tt.batch(()=>V(this,He).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=V(this,He).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=V(this,He);tt.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=V(this,He);return tt.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=tt.batch(()=>V(this,He).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(Nt).catch(Nt)}invalidateQueries(t,s={}){return tt.batch(()=>(V(this,He).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=tt.batch(()=>V(this,He).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(Nt)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Nt)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=V(this,He).build(this,s);return r.isStaleByTime(zr(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Nt).catch(Nt)}fetchInfiniteQuery(t){return t.behavior=_x(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Nt).catch(Nt)}ensureInfiniteQueryData(t){return t.behavior=_x(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Po.isOnline()?V(this,kr).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,He)}getMutationCache(){return V(this,kr)}getDefaultOptions(){return V(this,Cr)}setDefaultOptions(t){oe(this,Cr,t)}setQueryDefaults(t,s){V(this,yn).set(Ta(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...V(this,yn).values()],r={};return s.forEach(a=>{zi(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){V(this,bn).set(Ta(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...V(this,bn).values()],r={};return s.forEach(a=>{zi(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...V(this,Cr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Mm(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Lm&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...V(this,Cr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){V(this,He).clear(),V(this,kr).clear()}},He=new WeakMap,kr=new WeakMap,Cr=new WeakMap,yn=new WeakMap,bn=new WeakMap,Sr=new WeakMap,jn=new WeakMap,vn=new WeakMap,Y0),Ef=x.createContext(void 0),Fe=t=>{const s=x.useContext(Ef);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},AN=({client:t,children:s})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Ef.Provider,{value:t,children:s})),Ff=x.createContext(!1),MN=()=>x.useContext(Ff);Ff.Provider;function LN(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $N=x.createContext(LN()),RN=()=>x.useContext($N),ON=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},DN=t=>{x.useEffect(()=>{t.clearReset()},[t])},IN=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Nf(r,[t.error,a])),qN=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},zN=(t,s)=>t.isLoading&&t.isFetching&&!s,BN=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,Cx=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function UN(t,s,r){var m,b,p,g,h;const a=MN(),n=RN(),i=Fe(),l=i.defaultQueryOptions(t);(b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||b.call(m,l),l._optimisticResults=a?"isRestoring":"optimistic",qN(l),ON(l,n),DN(n);const o=!i.getQueryCache().get(l.queryHash),[c]=x.useState(()=>new s(i,l)),d=c.getOptimisticResult(l),u=!a&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(N=>{const j=u?c.subscribe(tt.batchCalls(N)):Nt;return c.updateResult(),j},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(l)},[l,c]),BN(l,d))throw Cx(l,c,n);if(IN({result:d,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((g=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||g.call(p,l,d),l.experimental_prefetchInRender&&!Fa&&zN(d,a)){const N=o?Cx(l,c,n):(h=i.getQueryCache().get(l.queryHash))==null?void 0:h.promise;N==null||N.catch(Nt).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function le(t,s){return UN(t,wN)}function ie(t,s){const r=Fe(),[a]=x.useState(()=>new EN(r,t));x.useEffect(()=>{a.setOptions(t)},[a,t]);const n=x.useSyncExternalStore(x.useCallback(l=>a.subscribe(tt.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=x.useCallback((l,o)=>{a.mutate(l,o).catch(Nt)},[a]);if(n.error&&Nf(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const Sx=t=>{let s;const r=new Set,a=(d,u)=>{const m=typeof d=="function"?d(s):d;if(!Object.is(m,s)){const b=s;s=u??(typeof m!="object"||m===null)?m:Object.assign({},s,m),r.forEach(p=>p(s,b))}},n=()=>s,o={setState:a,getState:n,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=s=t(a,n,o);return o},VN=t=>t?Sx(t):Sx,WN=t=>t;function HN(t,s=WN){const r=ia.useSyncExternalStore(t.subscribe,ia.useCallback(()=>s(t.getState()),[t,s]),ia.useCallback(()=>s(t.getInitialState()),[t,s]));return ia.useDebugValue(r),r}const QN=t=>{const s=VN(t),r=a=>HN(s,a);return Object.assign(r,s),r},KN=t=>QN;function YN(t,s){let r;try{r=t()}catch{return}return{getItem:n=>{var i;const l=c=>c===null?null:JSON.parse(c,void 0),o=(i=r.getItem(n))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>r.removeItem(n)}}const yu=t=>s=>{try{const r=t(s);return r instanceof Promise?r:{then(a){return yu(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return yu(a)(r)}}}},GN=(t,s)=>(r,a,n)=>{let i={storage:YN(()=>localStorage),partialize:h=>h,version:0,merge:(h,N)=>({...N,...h}),...s},l=!1;const o=new Set,c=new Set;let d=i.storage;if(!d)return t((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...h)},a,n);const u=()=>{const h=i.partialize({...a()});return d.setItem(i.name,{state:h,version:i.version})},m=n.setState;n.setState=(h,N)=>(m(h,N),u());const b=t((...h)=>(r(...h),u()),a,n);n.getInitialState=()=>b;let p;const g=()=>{var h,N;if(!d)return;l=!1,o.forEach(y=>{var f;return y((f=a())!=null?f:b)});const j=((N=i.onRehydrateStorage)==null?void 0:N.call(i,(h=a())!=null?h:b))||void 0;return yu(d.getItem.bind(d))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const f=i.migrate(y.state,y.version);return f instanceof Promise?f.then(k=>[!0,k]):[!0,f]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var f;const[k,T]=y;if(p=i.merge(T,(f=a())!=null?f:b),r(p,!0),k)return u()}).then(()=>{j==null||j(p,void 0),p=a(),l=!0,c.forEach(y=>y(p))}).catch(y=>{j==null||j(void 0,y)})};return n.persist={setOptions:h=>{i={...i,...h},h.storage&&(d=h.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:h=>(o.add(h),()=>{o.delete(h)}),onFinishHydration:h=>(c.add(h),()=>{c.delete(h)})},i.skipHydration||g(),p||b},XN=GN;function Tf(t,s){return function(){return t.apply(s,arguments)}}const{toString:JN}=Object.prototype,{getPrototypeOf:Om}=Object,{iterator:Jo,toStringTag:Af}=Symbol,Zo=(t=>s=>{const r=JN.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Cs=t=>(t=t.toLowerCase(),s=>Zo(s)===t),ec=t=>s=>typeof s===t,{isArray:On}=Array,En=ec("undefined");function el(t){return t!==null&&!En(t)&&t.constructor!==null&&!En(t.constructor)&&Rt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mf=Cs("ArrayBuffer");function ZN(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Mf(t.buffer),s}const ew=ec("string"),Rt=ec("function"),Lf=ec("number"),tl=t=>t!==null&&typeof t=="object",tw=t=>t===!0||t===!1,Hl=t=>{if(Zo(t)!=="object")return!1;const s=Om(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Af in t)&&!(Jo in t)},sw=t=>{if(!tl(t)||el(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},rw=Cs("Date"),aw=Cs("File"),nw=Cs("Blob"),iw=Cs("FileList"),lw=t=>tl(t)&&Rt(t.pipe),ow=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Rt(t.append)&&((s=Zo(t))==="formdata"||s==="object"&&Rt(t.toString)&&t.toString()==="[object FormData]"))},cw=Cs("URLSearchParams"),[dw,uw,mw,hw]=["ReadableStream","Request","Response","Headers"].map(Cs),xw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sl(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),On(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(el(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(a=0;a<l;a++)o=i[a],s.call(null,t[o],o,t)}}function $f(t,s){if(el(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const ua=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rf=t=>!En(t)&&t!==ua;function bu(){const{caseless:t,skipUndefined:s}=Rf(this)&&this||{},r={},a=(n,i)=>{const l=t&&$f(r,i)||i;Hl(r[l])&&Hl(n)?r[l]=bu(r[l],n):Hl(n)?r[l]=bu({},n):On(n)?r[l]=n.slice():(!s||!En(n))&&(r[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&sl(arguments[n],a);return r}const gw=(t,s,r,{allOwnKeys:a}={})=>(sl(s,(n,i)=>{r&&Rt(n)?t[i]=Tf(n,r):t[i]=n},{allOwnKeys:a}),t),pw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),fw=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},yw=(t,s,r,a)=>{let n,i,l;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=r!==!1&&Om(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},bw=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},jw=t=>{if(!t)return null;if(On(t))return t;let s=t.length;if(!Lf(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},vw=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Om(Uint8Array)),Nw=(t,s)=>{const a=(t&&t[Jo]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},ww=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},_w=Cs("HTMLFormElement"),kw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),Px=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Cw=Cs("RegExp"),Of=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};sl(r,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},Sw=t=>{Of(t,(s,r)=>{if(Rt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(Rt(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Pw=(t,s)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return On(t)?a(t):a(String(t).split(s)),r},Ew=()=>{},Fw=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Tw(t){return!!(t&&Rt(t.append)&&t[Af]==="FormData"&&t[Jo])}const Aw=t=>{const s=new Array(10),r=(a,n)=>{if(tl(a)){if(s.indexOf(a)>=0)return;if(el(a))return a;if(!("toJSON"in a)){s[n]=a;const i=On(a)?[]:{};return sl(a,(l,o)=>{const c=r(l,n+1);!En(c)&&(i[o]=c)}),s[n]=void 0,i}}return a};return r(t,0)},Mw=Cs("AsyncFunction"),Lw=t=>t&&(tl(t)||Rt(t))&&Rt(t.then)&&Rt(t.catch),Df=((t,s)=>t?setImmediate:s?((r,a)=>(ua.addEventListener("message",({source:n,data:i})=>{n===ua&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),ua.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rt(ua.postMessage)),$w=typeof queueMicrotask<"u"?queueMicrotask.bind(ua):typeof process<"u"&&process.nextTick||Df,Rw=t=>t!=null&&Rt(t[Jo]),ee={isArray:On,isArrayBuffer:Mf,isBuffer:el,isFormData:ow,isArrayBufferView:ZN,isString:ew,isNumber:Lf,isBoolean:tw,isObject:tl,isPlainObject:Hl,isEmptyObject:sw,isReadableStream:dw,isRequest:uw,isResponse:mw,isHeaders:hw,isUndefined:En,isDate:rw,isFile:aw,isBlob:nw,isRegExp:Cw,isFunction:Rt,isStream:lw,isURLSearchParams:cw,isTypedArray:vw,isFileList:iw,forEach:sl,merge:bu,extend:gw,trim:xw,stripBOM:pw,inherits:fw,toFlatObject:yw,kindOf:Zo,kindOfTest:Cs,endsWith:bw,toArray:jw,forEachEntry:Nw,matchAll:ww,isHTMLForm:_w,hasOwnProperty:Px,hasOwnProp:Px,reduceDescriptors:Of,freezeMethods:Sw,toObjectSet:Pw,toCamelCase:kw,noop:Ew,toFiniteNumber:Fw,findKey:$f,global:ua,isContextDefined:Rf,isSpecCompliantForm:Tw,toJSONObject:Aw,isAsyncFn:Mw,isThenable:Lw,setImmediate:Df,asap:$w,isIterable:Rw};function ge(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}ee.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const If=ge.prototype,qf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qf[t]={value:t}});Object.defineProperties(ge,qf);Object.defineProperty(If,"isAxiosError",{value:!0});ge.from=(t,s,r,a,n,i)=>{const l=Object.create(If);ee.toFlatObject(t,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return ge.call(l,o,c,r,a,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const Ow=null;function ju(t){return ee.isPlainObject(t)||ee.isArray(t)}function zf(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function Ex(t,s,r){return t?t.concat(s).map(function(n,i){return n=zf(n),!r&&i?"["+n+"]":n}).join(r?".":""):s}function Dw(t){return ee.isArray(t)&&!t.some(ju)}const Iw=ee.toFlatObject(ee,{},null,function(s){return/^is[A-Z]/.test(s)});function tc(t,s,r){if(!ee.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,N){return!ee.isUndefined(N[h])});const a=r.metaTokens,n=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(s);if(!ee.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(ee.isDate(g))return g.toISOString();if(ee.isBoolean(g))return g.toString();if(!c&&ee.isBlob(g))throw new ge("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(g)||ee.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,h,N){let j=g;if(g&&!N&&typeof g=="object"){if(ee.endsWith(h,"{}"))h=a?h:h.slice(0,-2),g=JSON.stringify(g);else if(ee.isArray(g)&&Dw(g)||(ee.isFileList(g)||ee.endsWith(h,"[]"))&&(j=ee.toArray(g)))return h=zf(h),j.forEach(function(f,k){!(ee.isUndefined(f)||f===null)&&s.append(l===!0?Ex([h],k,i):l===null?h:h+"[]",d(f))}),!1}return ju(g)?!0:(s.append(Ex(N,h,i),d(g)),!1)}const m=[],b=Object.assign(Iw,{defaultVisitor:u,convertValue:d,isVisitable:ju});function p(g,h){if(!ee.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(g),ee.forEach(g,function(j,y){(!(ee.isUndefined(j)||j===null)&&n.call(s,j,ee.isString(y)?y.trim():y,h,b))===!0&&p(j,h?h.concat(y):[y])}),m.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return p(t),s}function Fx(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Dm(t,s){this._pairs=[],t&&tc(t,this,s)}const Bf=Dm.prototype;Bf.append=function(s,r){this._pairs.push([s,r])};Bf.toString=function(s){const r=s?function(a){return s.call(this,a,Fx)}:Fx;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function qw(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Uf(t,s,r){if(!s)return t;const a=r&&r.encode||qw;ee.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(s,r):i=ee.isURLSearchParams(s)?s.toString():new Dm(s,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Tx{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ee.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Vf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zw=typeof URLSearchParams<"u"?URLSearchParams:Dm,Bw=typeof FormData<"u"?FormData:null,Uw=typeof Blob<"u"?Blob:null,Vw={isBrowser:!0,classes:{URLSearchParams:zw,FormData:Bw,Blob:Uw},protocols:["http","https","file","blob","url","data"]},Im=typeof window<"u"&&typeof document<"u",vu=typeof navigator=="object"&&navigator||void 0,Ww=Im&&(!vu||["ReactNative","NativeScript","NS"].indexOf(vu.product)<0),Hw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qw=Im&&window.location.href||"http://localhost",Kw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Im,hasStandardBrowserEnv:Ww,hasStandardBrowserWebWorkerEnv:Hw,navigator:vu,origin:Qw},Symbol.toStringTag,{value:"Module"})),gt={...Kw,...Vw};function Yw(t,s){return tc(t,new gt.classes.URLSearchParams,{visitor:function(r,a,n,i){return gt.isNode&&ee.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function Gw(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Xw(t){const s={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],s[i]=t[i];return s}function Wf(t){function s(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&ee.isArray(n)?n.length:l,c?(ee.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!ee.isObject(n[l]))&&(n[l]=[]),s(r,a,n[l],i)&&ee.isArray(n[l])&&(n[l]=Xw(n[l])),!o)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const r={};return ee.forEachEntry(t,(a,n)=>{s(Gw(a),n,r,0)}),r}return null}function Jw(t,s,r){if(ee.isString(t))try{return(s||JSON.parse)(t),ee.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const rl={transitional:Vf,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=ee.isObject(s);if(i&&ee.isHTMLForm(s)&&(s=new FormData(s)),ee.isFormData(s))return n?JSON.stringify(Wf(s)):s;if(ee.isArrayBuffer(s)||ee.isBuffer(s)||ee.isStream(s)||ee.isFile(s)||ee.isBlob(s)||ee.isReadableStream(s))return s;if(ee.isArrayBufferView(s))return s.buffer;if(ee.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Yw(s,this.formSerializer).toString();if((o=ee.isFileList(s))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return tc(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),Jw(s)):s}],transformResponse:[function(s){const r=this.transitional||rl.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ee.isResponse(s)||ee.isReadableStream(s))return s;if(s&&ee.isString(s)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?ge.from(o,ge.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gt.classes.FormData,Blob:gt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{rl.headers[t]={}});const Zw=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e2=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||s[r]&&Zw[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},Ax=Symbol("internals");function Xn(t){return t&&String(t).trim().toLowerCase()}function Ql(t){return t===!1||t==null?t:ee.isArray(t)?t.map(Ql):String(t)}function t2(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const s2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zc(t,s,r,a,n){if(ee.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!ee.isString(s)){if(ee.isString(a))return s.indexOf(a)!==-1;if(ee.isRegExp(a))return a.test(s)}}function r2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function a2(t,s){const r=ee.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,s,n,i,l)},configurable:!0})})}let Ot=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function i(o,c,d){const u=Xn(c);if(!u)throw new Error("header name must be a non-empty string");const m=ee.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=Ql(o))}const l=(o,c)=>ee.forEach(o,(d,u)=>i(d,u,c));if(ee.isPlainObject(s)||s instanceof this.constructor)l(s,r);else if(ee.isString(s)&&(s=s.trim())&&!s2(s))l(e2(s),r);else if(ee.isObject(s)&&ee.isIterable(s)){let o={},c,d;for(const u of s){if(!ee.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?ee.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else s!=null&&i(r,s,a);return this}get(s,r){if(s=Xn(s),s){const a=ee.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return t2(n);if(ee.isFunction(r))return r.call(this,n,a);if(ee.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Xn(s),s){const a=ee.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||zc(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function i(l){if(l=Xn(l),l){const o=ee.findKey(a,l);o&&(!r||zc(a,a[o],o,r))&&(delete a[o],n=!0)}}return ee.isArray(s)?s.forEach(i):i(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!s||zc(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const r=this,a={};return ee.forEach(this,(n,i)=>{const l=ee.findKey(a,i);if(l){r[l]=Ql(n),delete r[i];return}const o=s?r2(i):String(i).trim();o!==i&&delete r[i],r[o]=Ql(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return ee.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&ee.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[Ax]=this[Ax]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=Xn(l);a[o]||(a2(n,l),a[o]=!0)}return ee.isArray(s)?s.forEach(i):i(s),this}};Ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Ot.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});ee.freezeMethods(Ot);function Bc(t,s){const r=this||rl,a=s||r,n=Ot.from(a.headers);let i=a.data;return ee.forEach(t,function(o){i=o.call(r,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function Hf(t){return!!(t&&t.__CANCEL__)}function Dn(t,s,r){ge.call(this,t??"canceled",ge.ERR_CANCELED,s,r),this.name="CanceledError"}ee.inherits(Dn,ge,{__CANCEL__:!0});function Qf(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new ge("Request failed with status code "+r.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function n2(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function i2(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),u=a[i];l||(l=d),r[n]=c,a[n]=d;let m=i,b=0;for(;m!==n;)b+=r[m++],m=m%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-l<s)return;const p=u&&d-u;return p?Math.round(b*1e3/p):void 0}}function l2(t,s){let r=0,a=1e3/s,n,i;const l=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=a?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},a-m)))},()=>n&&l(n)]}const Eo=(t,s,r=3)=>{let a=0;const n=i2(50,250);return l2(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-a,d=n(c),u=l<=o;a=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(m)},r)},Mx=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Lx=t=>(...s)=>ee.asap(()=>t(...s)),o2=gt.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,gt.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(gt.origin),gt.navigator&&/(msie|trident)/i.test(gt.navigator.userAgent)):()=>!0,c2=gt.hasStandardBrowserEnv?{write(t,s,r,a,n,i,l){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(s)}`];ee.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),ee.isString(a)&&o.push(`path=${a}`),ee.isString(n)&&o.push(`domain=${n}`),i===!0&&o.push("secure"),ee.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function d2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function u2(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Kf(t,s,r){let a=!d2(s);return t&&(a||r==!1)?u2(t,s):s}const $x=t=>t instanceof Ot?{...t}:t;function Aa(t,s){s=s||{};const r={};function a(d,u,m,b){return ee.isPlainObject(d)&&ee.isPlainObject(u)?ee.merge.call({caseless:b},d,u):ee.isPlainObject(u)?ee.merge({},u):ee.isArray(u)?u.slice():u}function n(d,u,m,b){if(ee.isUndefined(u)){if(!ee.isUndefined(d))return a(void 0,d,m,b)}else return a(d,u,m,b)}function i(d,u){if(!ee.isUndefined(u))return a(void 0,u)}function l(d,u){if(ee.isUndefined(u)){if(!ee.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function o(d,u,m){if(m in s)return a(d,u);if(m in t)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,m)=>n($x(d),$x(u),m,!0)};return ee.forEach(Object.keys({...t,...s}),function(u){const m=c[u]||n,b=m(t[u],s[u],u);ee.isUndefined(b)&&m!==o||(r[u]=b)}),r}const Yf=t=>{const s=Aa({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=Ot.from(l),s.url=Uf(Kf(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ee.isFormData(r)){if(gt.hasStandardBrowserEnv||gt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ee.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&l.set(u,m)})}}if(gt.hasStandardBrowserEnv&&(a&&ee.isFunction(a)&&(a=a(s)),a||a!==!1&&o2(s.url))){const c=n&&i&&c2.read(i);c&&l.set(n,c)}return s},m2=typeof XMLHttpRequest<"u",h2=m2&&function(t){return new Promise(function(r,a){const n=Yf(t);let i=n.data;const l=Ot.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,m,b,p,g;function h(){p&&p(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let N=new XMLHttpRequest;N.open(n.method.toUpperCase(),n.url,!0),N.timeout=n.timeout;function j(){if(!N)return;const f=Ot.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:f,config:t,request:N};Qf(function(P){r(P),h()},function(P){a(P),h()},T),N=null}"onloadend"in N?N.onloadend=j:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(j)},N.onabort=function(){N&&(a(new ge("Request aborted",ge.ECONNABORTED,t,N)),N=null)},N.onerror=function(k){const T=k&&k.message?k.message:"Network Error",M=new ge(T,ge.ERR_NETWORK,t,N);M.event=k||null,a(M),N=null},N.ontimeout=function(){let k=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const T=n.transitional||Vf;n.timeoutErrorMessage&&(k=n.timeoutErrorMessage),a(new ge(k,T.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,t,N)),N=null},i===void 0&&l.setContentType(null),"setRequestHeader"in N&&ee.forEach(l.toJSON(),function(k,T){N.setRequestHeader(T,k)}),ee.isUndefined(n.withCredentials)||(N.withCredentials=!!n.withCredentials),o&&o!=="json"&&(N.responseType=n.responseType),d&&([b,g]=Eo(d,!0),N.addEventListener("progress",b)),c&&N.upload&&([m,p]=Eo(c),N.upload.addEventListener("progress",m),N.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(u=f=>{N&&(a(!f||f.type?new Dn(null,t,N):f),N.abort(),N=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const y=n2(n.url);if(y&&gt.protocols.indexOf(y)===-1){a(new ge("Unsupported protocol "+y+":",ge.ERR_BAD_REQUEST,t));return}N.send(i||null)})},x2=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;a.abort(u instanceof ge?u:new Dn(u instanceof Error?u.message:u))}};let l=s&&setTimeout(()=>{l=null,i(new ge(`timeout ${s} of ms exceeded`,ge.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>ee.asap(o),c}},g2=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},p2=async function*(t,s){for await(const r of f2(t))yield*g2(r,s)},f2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},Rx=(t,s,r,a)=>{const n=p2(t,s);let i=0,l,o=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let m=u.byteLength;if(r){let b=i+=m;r(b)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Ox=64*1024,{isFunction:Pl}=ee,y2=(({Request:t,Response:s})=>({Request:t,Response:s}))(ee.global),{ReadableStream:Dx,TextEncoder:Ix}=ee.global,qx=(t,...s)=>{try{return!!t(...s)}catch{return!1}},b2=t=>{t=ee.merge.call({skipUndefined:!0},y2,t);const{fetch:s,Request:r,Response:a}=t,n=s?Pl(s):typeof fetch=="function",i=Pl(r),l=Pl(a);if(!n)return!1;const o=n&&Pl(Dx),c=n&&(typeof Ix=="function"?(g=>h=>g.encode(h))(new Ix):async g=>new Uint8Array(await new r(g).arrayBuffer())),d=i&&o&&qx(()=>{let g=!1;const h=new r(gt.origin,{body:new Dx,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!h}),u=l&&o&&qx(()=>ee.isReadableStream(new a("").body)),m={stream:u&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!m[g]&&(m[g]=(h,N)=>{let j=h&&h[g];if(j)return j.call(h);throw new ge(`Response type '${g}' is not supported`,ge.ERR_NOT_SUPPORT,N)})});const b=async g=>{if(g==null)return 0;if(ee.isBlob(g))return g.size;if(ee.isSpecCompliantForm(g))return(await new r(gt.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(g)||ee.isArrayBuffer(g))return g.byteLength;if(ee.isURLSearchParams(g)&&(g=g+""),ee.isString(g))return(await c(g)).byteLength},p=async(g,h)=>{const N=ee.toFiniteNumber(g.getContentLength());return N??b(h)};return async g=>{let{url:h,method:N,data:j,signal:y,cancelToken:f,timeout:k,onDownloadProgress:T,onUploadProgress:M,responseType:P,headers:_,withCredentials:F="same-origin",fetchOptions:v}=Yf(g),O=s||fetch;P=P?(P+"").toLowerCase():"text";let R=x2([y,f&&f.toAbortSignal()],k),C=null;const z=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let D;try{if(M&&d&&N!=="get"&&N!=="head"&&(D=await p(_,j))!==0){let I=new r(h,{method:"POST",body:j,duplex:"half"}),q;if(ee.isFormData(j)&&(q=I.headers.get("content-type"))&&_.setContentType(q),I.body){const[A,L]=Mx(D,Eo(Lx(M)));j=Rx(I.body,Ox,A,L)}}ee.isString(F)||(F=F?"include":"omit");const S=i&&"credentials"in r.prototype,E={...v,signal:R,method:N.toUpperCase(),headers:_.normalize().toJSON(),body:j,duplex:"half",credentials:S?F:void 0};C=i&&new r(h,E);let w=await(i?O(C,v):O(h,E));const $=u&&(P==="stream"||P==="response");if(u&&(T||$&&z)){const I={};["status","statusText","headers"].forEach(U=>{I[U]=w[U]});const q=ee.toFiniteNumber(w.headers.get("content-length")),[A,L]=T&&Mx(q,Eo(Lx(T),!0))||[];w=new a(Rx(w.body,Ox,A,()=>{L&&L(),z&&z()}),I)}P=P||"text";let B=await m[ee.findKey(m,P)||"text"](w,g);return!$&&z&&z(),await new Promise((I,q)=>{Qf(I,q,{data:B,headers:Ot.from(w.headers),status:w.status,statusText:w.statusText,config:g,request:C})})}catch(S){throw z&&z(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,g,C),{cause:S.cause||S}):ge.from(S,S&&S.code,g,C)}}},j2=new Map,Gf=t=>{let s=t&&t.env||{};const{fetch:r,Request:a,Response:n}=s,i=[a,n,r];let l=i.length,o=l,c,d,u=j2;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:b2(s)),u=d;return d};Gf();const qm={http:Ow,xhr:h2,fetch:{get:Gf}};ee.forEach(qm,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const zx=t=>`- ${t}`,v2=t=>ee.isFunction(t)||t===null||t===!1;function N2(t,s){t=ee.isArray(t)?t:[t];const{length:r}=t;let a,n;const i={};for(let l=0;l<r;l++){a=t[l];let o;if(n=a,!v2(a)&&(n=qm[(o=String(a)).toLowerCase()],n===void 0))throw new ge(`Unknown adapter '${o}'`);if(n&&(ee.isFunction(n)||(n=n.get(s))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(zx).join(`
`):" "+zx(l[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n}const Xf={getAdapter:N2,adapters:qm};function Uc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dn(null,t)}function Bx(t){return Uc(t),t.headers=Ot.from(t.headers),t.data=Bc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Xf.getAdapter(t.adapter||rl.adapter,t)(t).then(function(a){return Uc(t),a.data=Bc.call(t,t.transformResponse,a),a.headers=Ot.from(a.headers),a},function(a){return Hf(a)||(Uc(t),a&&a.response&&(a.response.data=Bc.call(t,t.transformResponse,a.response),a.response.headers=Ot.from(a.response.headers))),Promise.reject(a)})}const Jf="1.13.2",sc={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{sc[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Ux={};sc.transitional=function(s,r,a){function n(i,l){return"[Axios v"+Jf+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(s===!1)throw new ge(n(l," has been removed"+(r?" in "+r:"")),ge.ERR_DEPRECATED);return r&&!Ux[l]&&(Ux[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,l,o):!0}};sc.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function w2(t,s,r){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=s[i];if(l){const o=t[i],c=o===void 0||l(o,i,t);if(c!==!0)throw new ge("option "+i+" must be "+c,ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ge("Unknown option "+i,ge.ERR_BAD_OPTION)}}const Kl={assertOptions:w2,validators:sc},Fs=Kl.validators;let _a=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Tx,response:new Tx}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Aa(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&Kl.assertOptions(a,{silentJSONParsing:Fs.transitional(Fs.boolean),forcedJSONParsing:Fs.transitional(Fs.boolean),clarifyTimeoutError:Fs.transitional(Fs.boolean)},!1),n!=null&&(ee.isFunction(n)?r.paramsSerializer={serialize:n}:Kl.assertOptions(n,{encode:Fs.function,serialize:Fs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Kl.assertOptions(r,{baseUrl:Fs.spelling("baseURL"),withXsrfToken:Fs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&ee.merge(i.common,i[r.method]);i&&ee.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=Ot.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(c=c&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let u,m=0,b;if(!c){const g=[Bx.bind(this),void 0];for(g.unshift(...o),g.push(...d),b=g.length,u=Promise.resolve(r);m<b;)u=u.then(g[m++],g[m++]);return u}b=o.length;let p=r;for(;m<b;){const g=o[m++],h=o[m++];try{p=g(p)}catch(N){h.call(this,N);break}}try{u=Bx.call(this,p)}catch(g){return Promise.reject(g)}for(m=0,b=d.length;m<b;)u=u.then(d[m++],d[m++]);return u}getUri(s){s=Aa(this.defaults,s);const r=Kf(s.baseURL,s.url,s.allowAbsoluteUrls);return Uf(r,s.params,s.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(s){_a.prototype[s]=function(r,a){return this.request(Aa(a||{},{method:s,url:r,data:(a||{}).data}))}});ee.forEach(["post","put","patch"],function(s){function r(a){return function(i,l,o){return this.request(Aa(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}_a.prototype[s]=r(),_a.prototype[s+"Form"]=r(!0)});let _2=class Zf{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},s(function(i,l,o){a.reason||(a.reason=new Dn(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new Zf(function(n){s=n}),cancel:s}}};function k2(t){return function(r){return t.apply(null,r)}}function C2(t){return ee.isObject(t)&&t.isAxiosError===!0}const Nu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Nu).forEach(([t,s])=>{Nu[s]=t});function ey(t){const s=new _a(t),r=Tf(_a.prototype.request,s);return ee.extend(r,_a.prototype,s,{allOwnKeys:!0}),ee.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return ey(Aa(t,n))},r}const W=ey(rl);W.Axios=_a;W.CanceledError=Dn;W.CancelToken=_2;W.isCancel=Hf;W.VERSION=Jf;W.toFormData=tc;W.AxiosError=ge;W.Cancel=W.CanceledError;W.all=function(s){return Promise.all(s)};W.spread=k2;W.isAxiosError=C2;W.mergeConfig=Aa;W.AxiosHeaders=Ot;W.formToJSON=t=>Wf(ee.isHTMLForm(t)?new FormData(t):t);W.getAdapter=Xf.getAdapter;W.HttpStatusCode=Nu;W.default=W;const{Axios:V3,AxiosError:W3,CanceledError:H3,isCancel:Q3,CancelToken:K3,VERSION:Y3,all:G3,Cancel:X3,isAxiosError:J3,spread:Z3,toFormData:eC,AxiosHeaders:tC,HttpStatusCode:sC,formToJSON:rC,getAdapter:aC,mergeConfig:nC}=W,Bs=Object.create(null);Bs.open="0";Bs.close="1";Bs.ping="2";Bs.pong="3";Bs.message="4";Bs.upgrade="5";Bs.noop="6";const Yl=Object.create(null);Object.keys(Bs).forEach(t=>{Yl[Bs[t]]=t});const wu={type:"error",data:"parser error"},ty=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sy=typeof ArrayBuffer=="function",ry=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,zm=({type:t,data:s},r,a)=>ty&&s instanceof Blob?r?a(s):Vx(s,a):sy&&(s instanceof ArrayBuffer||ry(s))?r?a(s):Vx(new Blob([s]),a):a(Bs[t]+(s||"")),Vx=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function Wx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Vc;function S2(t,s){if(ty&&t.data instanceof Blob)return t.data.arrayBuffer().then(Wx).then(s);if(sy&&(t.data instanceof ArrayBuffer||ry(t.data)))return s(Wx(t.data));zm(t,!1,r=>{Vc||(Vc=new TextEncoder),s(Vc.encode(r))})}const Hx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",di=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Hx.length;t++)di[Hx.charCodeAt(t)]=t;const P2=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),u=new Uint8Array(d);for(a=0;a<r;a+=4)i=di[t.charCodeAt(a)],l=di[t.charCodeAt(a+1)],o=di[t.charCodeAt(a+2)],c=di[t.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|c&63;return d},E2=typeof ArrayBuffer=="function",Bm=(t,s)=>{if(typeof t!="string")return{type:"message",data:ay(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:F2(t.substring(1),s)}:Yl[r]?t.length>1?{type:Yl[r],data:t.substring(1)}:{type:Yl[r]}:wu},F2=(t,s)=>{if(E2){const r=P2(t);return ay(r,s)}else return{base64:!0,data:t}},ay=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},ny="",T2=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{zm(i,!1,o=>{a[l]=o,++n===r&&s(a.join(ny))})})},A2=(t,s)=>{const r=t.split(ny),a=[];for(let n=0;n<r.length;n++){const i=Bm(r[n],s);if(a.push(i),i.type==="error")break}return a};function M2(){return new TransformStream({transform(t,s){S2(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let Wc;function El(t){return t.reduce((s,r)=>s+r.length,0)}function Fl(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function L2(t,s){Wc||(Wc=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(El(r)<1)break;const c=Fl(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(El(r)<2)break;const c=Fl(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(El(r)<8)break;const c=Fl(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(wu);break}n=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(El(r)<n)break;const c=Fl(r,n);o.enqueue(Bm(i?c:Wc.decode(c),s)),a=0}if(n===0||n>t){o.enqueue(wu);break}}}})}const iy=4;function Ze(t){if(t)return $2(t)}function $2(t){for(var s in Ze.prototype)t[s]=Ze.prototype[s];return t}Ze.prototype.on=Ze.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};Ze.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};Ze.prototype.off=Ze.prototype.removeListener=Ze.prototype.removeAllListeners=Ze.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Ze.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};Ze.prototype.emitReserved=Ze.prototype.emit;Ze.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ze.prototype.hasListeners=function(t){return!!this.listeners(t).length};const rc=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),as=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),R2="arraybuffer";function ly(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const O2=as.setTimeout,D2=as.clearTimeout;function ac(t,s){s.useNativeTimers?(t.setTimeoutFn=O2.bind(as),t.clearTimeoutFn=D2.bind(as)):(t.setTimeoutFn=as.setTimeout.bind(as),t.clearTimeoutFn=as.clearTimeout.bind(as))}const I2=1.33;function q2(t){return typeof t=="string"?z2(t):Math.ceil((t.byteLength||t.size)*I2)}function z2(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function oy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function B2(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function U2(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class V2 extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class Um extends Ze{constructor(s){super(),this.writable=!1,ac(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new V2(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=Bm(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=B2(s);return r.length?"?"+r:""}}class W2 extends Um{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};A2(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,T2(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=oy()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let cy=!1;try{cy=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const H2=cy;function Q2(){}class K2 extends W2{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}class qs extends Ze{constructor(s,r,a){super(),this.createRequest=s,ac(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=ly(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=qs.requestsCount++,qs.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Q2,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qs.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qs.requestsCount=0;qs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Qx);else if(typeof addEventListener=="function"){const t="onpagehide"in as?"pagehide":"unload";addEventListener(t,Qx,!1)}}function Qx(){for(let t in qs.requests)qs.requests.hasOwnProperty(t)&&qs.requests[t].abort()}const Y2=function(){const t=dy({xdomain:!1});return t&&t.responseType!==null}();class G2 extends K2{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=Y2&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new qs(dy,this.uri(),s)}}function dy(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||H2))return new XMLHttpRequest}catch{}if(!s)try{return new as[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const uy=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class X2 extends Um{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=uy?{}:ly(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;zm(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&rc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=oy()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const Hc=as.WebSocket||as.MozWebSocket;class J2 extends X2{createSocket(s,r,a){return uy?new Hc(s,r,a):r?new Hc(s,r):new Hc(s)}doWrite(s,r){this.ws.send(r)}}class Z2 extends Um{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=L2(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=M2();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&rc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const e1={websocket:J2,webtransport:Z2,polling:G2},t1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _u(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=t1.exec(t||""),i={},l=14;for(;l--;)i[s1[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=r1(i,i.path),i.queryKey=a1(i,i.query),i}function r1(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function a1(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const ku=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gl=[];ku&&addEventListener("offline",()=>{Gl.forEach(t=>t())},!1);class Br extends Ze{constructor(s,r){if(super(),this.binaryType=R2,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=_u(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=_u(r.host).host);ac(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=U2(this.opts.query)),ku&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=iy,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Br.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Br.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=q2(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,rc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(Br.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ku&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Gl.indexOf(this._offlineEventListener);a!==-1&&Gl.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}Br.protocol=iy;class n1 extends Br{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;Br.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!a)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Br.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=r.name,this.emitReserved("upgradeError",b)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=m=>{const b=new Error("probe error: "+m);b.transport=r.name,i(),this.emitReserved("upgradeError",b)};function o(){l("transport closed")}function c(){l("socket closed")}function d(m){r&&m.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let i1=class extends n1{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>e1[n]).filter(n=>!!n)),super(s,a)}};function l1(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=_u(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const o1=typeof ArrayBuffer=="function",c1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,my=Object.prototype.toString,d1=typeof Blob=="function"||typeof Blob<"u"&&my.call(Blob)==="[object BlobConstructor]",u1=typeof File=="function"||typeof File<"u"&&my.call(File)==="[object FileConstructor]";function Vm(t){return o1&&(t instanceof ArrayBuffer||c1(t))||d1&&t instanceof Blob||u1&&t instanceof File}function Xl(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Xl(t[r]))return!0;return!1}if(Vm(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Xl(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Xl(t[r]))return!0;return!1}function m1(t){const s=[],r=t.data,a=t;return a.data=Cu(r,s),a.attachments=s.length,{packet:a,buffers:s}}function Cu(t,s){if(!t)return t;if(Vm(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=Cu(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=Cu(t[a],s));return r}return t}function h1(t,s){return t.data=Su(t.data,s),delete t.attachments,t}function Su(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Su(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Su(t[r],s));return t}const x1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],g1=5;var Ne;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ne||(Ne={}));class p1{constructor(s){this.replacer=s}encode(s){return(s.type===Ne.EVENT||s.type===Ne.ACK)&&Xl(s)?this.encodeAsBinary({type:s.type===Ne.EVENT?Ne.BINARY_EVENT:Ne.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===Ne.BINARY_EVENT||s.type===Ne.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=m1(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function Kx(t){return Object.prototype.toString.call(t)==="[object Object]"}class Wm extends Ze{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===Ne.BINARY_EVENT;a||r.type===Ne.BINARY_ACK?(r.type=a?Ne.EVENT:Ne.ACK,this.reconstructor=new f1(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Vm(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(Ne[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Ne.BINARY_EVENT||a.type===Ne.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(Wm.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case Ne.CONNECT:return Kx(r);case Ne.DISCONNECT:return r===void 0;case Ne.CONNECT_ERROR:return typeof r=="string"||Kx(r);case Ne.EVENT:case Ne.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&x1.indexOf(r[0])===-1);case Ne.ACK:case Ne.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class f1{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=h1(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const y1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wm,Encoder:p1,get PacketType(){return Ne},protocol:g1},Symbol.toStringTag,{value:"Module"}));function fs(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const b1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hy extends Ze{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[fs(s,"open",this.onopen.bind(this)),fs(s,"packet",this.onpacket.bind(this)),fs(s,"error",this.onerror.bind(this)),fs(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(b1.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Ne.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),l.id=u}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Ne.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Ne.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ne.EVENT:case Ne.BINARY_EVENT:this.onevent(s);break;case Ne.ACK:case Ne.BINARY_ACK:this.onack(s);break;case Ne.DISCONNECT:this.ondisconnect();break;case Ne.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:Ne.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ne.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function In(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}In.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};In.prototype.reset=function(){this.attempts=0};In.prototype.setMin=function(t){this.ms=t};In.prototype.setMax=function(t){this.max=t};In.prototype.setJitter=function(t){this.jitter=t};class Pu extends Ze{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ac(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new In({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||y1;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new i1(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=fs(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=fs(r,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(fs(s,"ping",this.onping.bind(this)),fs(s,"data",this.ondata.bind(this)),fs(s,"error",this.onerror.bind(this)),fs(s,"close",this.onclose.bind(this)),fs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){rc(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new hy(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Jn={};function Jl(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=l1(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=Jn[n]&&i in Jn[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new Pu(a,s):(Jn[n]||(Jn[n]=new Pu(a,s)),c=Jn[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(Jl,{Manager:Pu,Socket:hy,io:Jl,connect:Jl});const Zn="https://123salama-lama-food-truck.launchpulse.ai",j1=()=>{if(typeof window<"u"){const t=window.location.protocol==="https:"?"wss:":"ws:",s=window.location.host;return`${t}//${s}`}return"ws://localhost:3000"},v1=j1(),N1=()=>`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,X=KN()(XN((t,s)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0},business_settings:{delivery_enabled:!1,operating_hours:{},business_info:{name:"",phone:"",email:"",address:""},tax_settings:{vat_rate:0},loyalty_settings:{earning_rate:1,referral_enabled:!1}},notification_state:{notifications:[],unread_count:0},websocket_state:{socket:null,connected:!1,subscribed_channels:[]},login_user:async(r,a,n=!1)=>{var i,l;t(o=>({authentication_state:{...o.authentication_state,authentication_status:{...o.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const o=await W.post(`${Zn}/api/auth/login`,{email:r,password:a,remember_me:n},{headers:{"Content-Type":"application/json"}}),{user:c,token:d}=o.data;t(()=>({authentication_state:{current_user:c,auth_token:d,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket()}catch(o){const c=((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||o.message||"Login failed";throw t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:c}})),new Error(c)}},register_user:async r=>{var a,n;t(i=>({authentication_state:{...i.authentication_state,authentication_status:{...i.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const i=await W.post(`${Zn}/api/auth/register`,r,{headers:{"Content-Type":"application/json"}}),{user:l,token:o,first_order_discount_code:c}=i.data;return t(()=>({authentication_state:{current_user:l,auth_token:o,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket(),{user:l,token:o,first_order_discount_code:c}}catch(i){const l=((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||i.message||"Registration failed";throw t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:l}})),new Error(l)}},logout_user:async()=>{const{auth_token:r}=s().authentication_state;try{r&&await W.post(`${Zn}/api/auth/logout`,{},{headers:{Authorization:`Bearer ${r}`}})}catch(a){console.error("Logout API call failed:",a)}s().disconnect_websocket(),t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0},notification_state:{notifications:[],unread_count:0}}))},initialize_auth:async()=>{const{authentication_state:r}=s(),a=r.auth_token;if(!a){t(n=>({authentication_state:{...n.authentication_state,authentication_status:{...n.authentication_state.authentication_status,is_loading:!1}}}));return}try{const i=(await W.get(`${Zn}/api/profile`,{headers:{Authorization:`Bearer ${a}`}})).data;t(()=>({authentication_state:{current_user:i,auth_token:a,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),s().connect_websocket()}catch(n){console.error("Token verification failed:",n),t(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null}}))}},update_auth_user:r=>{t(a=>({authentication_state:{...a.authentication_state,current_user:a.authentication_state.current_user?{...a.authentication_state.current_user,...r}:null}}))},clear_auth_error:()=>{t(r=>({authentication_state:{...r.authentication_state,error_message:null}}))},add_to_cart:r=>{t(a=>{const n=a.cart_state.items.findIndex(o=>o.item_id===r.item_id&&JSON.stringify(o.customizations)===JSON.stringify(r.customizations));let i;return n>=0?i=a.cart_state.items.map((o,c)=>c===n?{...o,quantity:o.quantity+r.quantity,line_total:(o.quantity+r.quantity)*o.unit_price}:o):i=[...a.cart_state.items,r],{cart_state:{...a.cart_state,items:i}}}),s().recalculate_totals()},update_cart_quantity:(r,a)=>{t(n=>{if(a<=0)return{cart_state:{...n.cart_state,items:n.cart_state.items.filter(l=>l.item_id!==r)}};const i=n.cart_state.items.map(l=>l.item_id===r?{...l,quantity:a,line_total:a*l.unit_price}:l);return{cart_state:{...n.cart_state,items:i}}}),s().recalculate_totals()},remove_from_cart:r=>{t(a=>({cart_state:{...a.cart_state,items:a.cart_state.items.filter(n=>n.item_id!==r)}})),s().recalculate_totals()},apply_discount:(r,a)=>{t(n=>({cart_state:{...n.cart_state,discount_code:r,discount_amount:a}})),s().recalculate_totals()},remove_discount:()=>{t(r=>({cart_state:{...r.cart_state,discount_code:null,discount_amount:0}})),s().recalculate_totals()},update_cart_fees:(r,a)=>{t(n=>({cart_state:{...n.cart_state,delivery_fee:r,tax_amount:a}})),s().recalculate_totals()},clear_cart:()=>{t(()=>({cart_state:{items:[],subtotal:0,discount_code:null,discount_amount:0,delivery_fee:0,tax_amount:0,total:0}}))},recalculate_totals:()=>{t(r=>{const a=r.cart_state.items.reduce((i,l)=>i+l.line_total,0),n=a-r.cart_state.discount_amount+r.cart_state.delivery_fee+r.cart_state.tax_amount;return{cart_state:{...r.cart_state,subtotal:a,total:n}}})},fetch_business_settings:async()=>{try{const r=await W.get(`${Zn}/api/business/info`),{name:a,phone:n,email:i,address:l,operating_hours:o,delivery_enabled:c}=r.data;t(d=>({business_settings:{...d.business_settings,delivery_enabled:c||!1,operating_hours:o||{},business_info:{name:a||"",phone:n||"",email:i||"",address:l||""}}}))}catch(r){console.error("Failed to fetch business settings:",r)}},update_business_settings:r=>{t(a=>({business_settings:{...a.business_settings,...r}}))},add_notification:r=>{const a={...r,id:N1(),created_at:new Date().toISOString(),read:!1};t(n=>({notification_state:{notifications:[a,...n.notification_state.notifications],unread_count:n.notification_state.unread_count+1}}))},mark_notification_read:r=>{t(a=>{const n=a.notification_state.notifications.map(l=>l.id===r?{...l,read:!0}:l),i=n.filter(l=>!l.read).length;return{notification_state:{notifications:n,unread_count:i}}})},mark_all_notifications_read:()=>{t(r=>({notification_state:{notifications:r.notification_state.notifications.map(a=>({...a,read:!0})),unread_count:0}}))},clear_notifications:()=>{t(()=>({notification_state:{notifications:[],unread_count:0}}))},remove_notification:r=>{t(a=>{const n=a.notification_state.notifications.filter(l=>l.id!==r),i=n.filter(l=>!l.read).length;return{notification_state:{notifications:n,unread_count:i}}})},connect_websocket:()=>{const{auth_token:r,current_user:a}=s().authentication_state,{socket:n}=s().websocket_state;if(!(n!=null&&n.connected)){if(n&&n.disconnect(),!r){console.warn("Cannot connect WebSocket: No auth token");return}try{const i=Jl(v1,{auth:{token:r},transports:["websocket","polling"]});i.on("connect",()=>{console.log("WebSocket connected"),t(l=>({websocket_state:{...l.websocket_state,socket:i,connected:!0}})),a&&(a.role==="customer"?s().subscribe_to_user_notifications(a.user_id):a.role==="staff"||a.role==="manager"?s().subscribe_to_staff_events():a.role==="admin"&&s().subscribe_to_admin_events())}),i.on("disconnect",()=>{console.log("WebSocket disconnected"),t(l=>({websocket_state:{...l.websocket_state,connected:!1,subscribed_channels:[]}}))}),i.on("connect_error",l=>{console.error("WebSocket connection error:",l)}),i.on("new_order",l=>{s().add_notification({type:"new_order",message:`New order #${l.data.order_number} received`})}),i.on("order_status_updated",l=>{const{order_number:o,new_status:c}=l.data;s().add_notification({type:"order_status_update",message:`Order #${o} status: ${c}`})}),i.on("low_stock_alert",l=>{const{item_name:o,status:c}=l.data;s().add_notification({type:"stock_alert",message:`${o} is ${c==="out_of_stock"?"out of stock":"running low"}`})}),i.on("loyalty.points_updated",l=>{const{points_amount:o,transaction_type:c}=l.data;s().add_notification({type:"loyalty_points",message:`You ${c==="earned"?"earned":"redeemed"} ${Math.abs(o)} points!`});const d=s().authentication_state.current_user}),i.on("loyalty.badge_unlocked",l=>{const{badge_name:o}=l.data;s().add_notification({type:"badge_unlocked",message:`Achievement unlocked: ${o}!`})}),i.on("new_catering_inquiry",l=>{const{contact_name:o,event_type:c}=l.data;s().add_notification({type:"new_catering_inquiry",message:`New ${c} catering inquiry from ${o}`})}),i.on("admin.metrics_updated",l=>{console.log("Dashboard metrics updated:",l.data.metrics)}),t(l=>({websocket_state:{...l.websocket_state,socket:i,connected:!1}}))}catch(i){console.error("Failed to create WebSocket connection:",i)}}},disconnect_websocket:()=>{const{socket:r}=s().websocket_state;r&&(r.disconnect(),t(()=>({websocket_state:{socket:null,connected:!1,subscribed_channels:[]}})))},subscribe_to_order_updates:r=>{const{socket:a}=s().websocket_state;if(!(a!=null&&a.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const n=`orders/${r}/tracking`;a.emit("subscribe",{channel:n}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:[...i.websocket_state.subscribed_channels,n]}}))},unsubscribe_from_order_updates:r=>{const{socket:a}=s().websocket_state;if(!(a!=null&&a.connected))return;const n=`orders/${r}/tracking`;a.emit("unsubscribe",{channel:n}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:i.websocket_state.subscribed_channels.filter(l=>l!==n)}}))},subscribe_to_user_notifications:r=>{const{socket:a}=s().websocket_state;if(!(a!=null&&a.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const n=`notifications/${r}`;a.emit("subscribe",{channel:n}),t(i=>({websocket_state:{...i.websocket_state,subscribed_channels:[...i.websocket_state.subscribed_channels,n]}}))},subscribe_to_staff_events:()=>{const{socket:r}=s().websocket_state;if(!(r!=null&&r.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const a=["orders/new","staff/queue/updates","stock/alerts"];a.forEach(n=>{r.emit("subscribe",{channel:n})}),t(n=>({websocket_state:{...n.websocket_state,subscribed_channels:[...n.websocket_state.subscribed_channels,...a]}}))},subscribe_to_admin_events:()=>{const{socket:r}=s().websocket_state;if(!(r!=null&&r.connected)){console.warn("Cannot subscribe: WebSocket not connected");return}const a=["orders/new","staff/queue/updates","stock/alerts","catering/inquiries/new","admin/dashboard/metrics"];a.forEach(n=>{r.emit("subscribe",{channel:n})}),t(n=>({websocket_state:{...n.websocket_state,subscribed_channels:[...n.websocket_state.subscribed_channels,...a]}}))}}),{name:"salama-lama-store",partialize:t=>({authentication_state:{current_user:t.authentication_state.current_user,auth_token:t.authentication_state.auth_token,authentication_status:{is_authenticated:t.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},cart_state:t.cart_state})}));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xy=(...t)=>t.filter((s,r,a)=>!!s&&a.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=x.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>x.createElement("svg",{ref:c,..._1,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:xy("lucide",n),...o},[...l.map(([d,u])=>x.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,s)=>{const r=x.forwardRef(({className:a,...n},i)=>x.createElement(k1,{ref:i,iconNode:s,className:xy(`lucide-${w1(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=re("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=re("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=re("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=re("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=re("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=re("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=re("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=re("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=re("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=re("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=re("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=re("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=re("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=re("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=re("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=re("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=re("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=re("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=re("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=re("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=re("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=re("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=re("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=re("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=re("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=re("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K1=()=>{const[t,s]=x.useState(!1),[r,a]=x.useState(!1),n=X(p=>p.cart_state.items),i=X(p=>p.authentication_state.authentication_status.is_authenticated),l=(n==null?void 0:n.length)||0,o=Vs();x.useEffect(()=>{const p=()=>{window.scrollY>10?a(!0):a(!1)};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),x.useEffect(()=>{s(!1)},[o.pathname]),x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),x.useEffect(()=>{const p=g=>{g.key==="Escape"&&t&&s(!1)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t]);const c=()=>{s(!t)},d=()=>{s(!1)},u=p=>o.pathname===p,m=()=>l===0?"":l>99?"99+":l.toString(),b=[{path:"/menu",label:"Menu"},{path:"/catering",label:"Catering"},{path:"/about",label:"About"},{path:"/contact",label:"Contact"},{path:"/faqs",label:"FAQs"}];return i?null:e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 bg-white transition-shadow duration-200 ${r?"shadow-md":"shadow-sm"}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(H,{to:"/",className:"flex items-center space-x-2 group","aria-label":"Salama Lama Home",children:e.jsx("div",{className:"text-2xl font-bold text-orange-600 group-hover:text-orange-700 transition-colors duration-200",children:"Salama Lama"})})}),e.jsx("div",{className:"hidden md:flex md:items-center md:space-x-8",children:b.map(p=>e.jsx(H,{to:p.path,className:`text-base font-medium transition-colors duration-200 ${u(p.path)?"text-orange-600 border-b-2 border-orange-600":"text-gray-700 hover:text-orange-600"}`,children:p.label},p.path))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(H,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-orange-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-lg","aria-label":`Shopping cart with ${l} items`,children:[e.jsx(Qt,{className:"h-6 w-6"}),l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 min-w-[20px] flex items-center justify-center px-1 animate-bounce-subtle",children:m()})]}),e.jsx(H,{to:"/login",className:"hidden md:inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all duration-200",children:"Log In"}),e.jsx(H,{to:"/signup",className:"hidden md:inline-flex items-center px-6 py-2 border border-transparent text-sm font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105",children:"Sign Up"}),e.jsx("button",{onClick:c,className:"md:hidden p-2 text-gray-700 hover:text-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-lg transition-colors duration-200","aria-label":"Open navigation menu","aria-expanded":t,children:t?e.jsx(_e,{className:"h-6 w-6"}):e.jsx(nc,{className:"h-6 w-6"})})]})]})})}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden transition-opacity duration-300",onClick:d,"aria-hidden":"true"}),e.jsx("div",{className:"fixed top-16 right-0 bottom-0 w-full max-w-sm bg-white z-50 md:hidden shadow-2xl overflow-y-auto animate-slide-in-right",children:e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsx("div",{className:"space-y-1",children:b.map(p=>e.jsxs(H,{to:p.path,onClick:d,className:`flex items-center justify-between px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 ${u(p.path)?"bg-orange-50 text-orange-600":"text-gray-700 hover:bg-gray-50 hover:text-orange-600"}`,children:[e.jsx("span",{children:p.label}),e.jsx($e,{className:"h-5 w-5"})]},p.path))}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(H,{to:"/login",onClick:d,className:"flex items-center justify-center w-full px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200",children:"Log In"}),e.jsx(H,{to:"/signup",onClick:d,className:"flex items-center justify-center w-full px-6 py-3 border border-transparent text-base font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200",children:"Sign Up"})]}),l>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs(H,{to:"/cart",onClick:d,className:"flex items-center justify-between px-4 py-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-600 text-white rounded-full p-2",children:e.jsx(Qt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Your Cart"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[l," ",l===1?"item":"items"]})]})]}),e.jsx($e,{className:"h-5 w-5 text-orange-600"})]})]})]})})]}),e.jsx("div",{className:"h-16","aria-hidden":"true"}),e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes bounce-subtle {
          0%, 100% {
            transform: scale(1);
          }
          50% {
            transform: scale(1.1);
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
        
        .animate-bounce-subtle {
          animation: bounce-subtle 0.5s ease-in-out;
        }
      `})]})},Y1=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/loyalty",{headers:{Authorization:`Bearer ${t}`}})).data,G1=()=>{const t=je(),s=X(T=>T.authentication_state.current_user),r=X(T=>T.authentication_state.auth_token),a=X(T=>T.cart_state.items),n=X(T=>T.logout_user),i=(s==null?void 0:s.first_name)||"Customer",l=a.length,[o,c]=x.useState(!1),[d,u]=x.useState(!1),[m,b]=x.useState(!1),p=x.useRef(null),{data:g}=le({queryKey:["loyalty",s==null?void 0:s.user_id],queryFn:()=>Y1(r),enabled:!!r&&!!s,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),h=(g==null?void 0:g.current_points_balance)||0,N=async()=>{b(!0);try{await n(),t("/")}catch(T){console.error("Logout failed:",T),b(!1)}},j=()=>{c(!o)},y=()=>{c(!1)},f=()=>{u(!d)},k=()=>{u(!1)};return x.useEffect(()=>{const T=M=>{p.current&&!p.current.contains(M.target)&&y()};return o&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[o]),x.useEffect(()=>{const T=M=>{M.key==="Escape"&&(y(),k())};return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white shadow-md",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs(H,{to:"/dashboard",className:"flex items-center space-x-2 text-orange-600 hover:text-orange-700 transition-colors",children:[e.jsx(eo,{className:"h-8 w-8"}),e.jsx("span",{className:"text-xl font-bold hidden sm:block",children:"Salama Lama"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(H,{to:"/menu",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Menu"}),e.jsx(H,{to:"/orders",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"My Orders"}),e.jsx(H,{to:"/rewards",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Rewards"}),e.jsx(H,{to:"/catering",className:"text-gray-700 hover:text-orange-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Catering"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(H,{to:"/rewards",className:"hidden md:flex items-center space-x-2 bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-full hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(or,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:h}),e.jsx("span",{className:"text-sm",children:"pts"})]}),e.jsxs(H,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-orange-600 transition-colors","aria-label":"Shopping cart",children:[e.jsx(Qt,{className:"h-6 w-6"}),l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:l})]}),e.jsxs("div",{className:"hidden md:block relative",ref:p,children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-md px-3 py-2","aria-label":"User profile menu","aria-expanded":o,children:[e.jsx("div",{className:"h-8 w-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(At,{className:"h-5 w-5 text-orange-600"})}),e.jsx("span",{className:"font-medium",children:i}),e.jsx(Os,{className:`h-4 w-4 transition-transform duration-200 ${o?"rotate-180":""}`})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50 animate-fadeIn",children:[e.jsxs(H,{to:"/dashboard",onClick:y,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition-colors",children:[e.jsx(Tu,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Dashboard"})]}),e.jsxs(H,{to:"/profile",onClick:y,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition-colors",children:[e.jsx(At,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"My Profile"})]}),e.jsxs(H,{to:"/orders",onClick:y,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition-colors",children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"My Orders"})]}),e.jsxs(H,{to:"/addresses",onClick:y,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition-colors",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Saved Addresses"})]}),e.jsxs(H,{to:"/payment-methods",onClick:y,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition-colors",children:[e.jsx(ls,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Payment Methods"})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:N,disabled:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(To,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:m?"Logging out...":"Logout"})]})]})]}),e.jsx("button",{onClick:f,className:"md:hidden p-2 text-gray-700 hover:text-orange-600 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-md","aria-label":"Toggle mobile menu","aria-expanded":d,children:d?e.jsx(_e,{className:"h-6 w-6"}):e.jsx(nc,{className:"h-6 w-6"})})]})]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:k}),e.jsx("div",{className:"fixed top-0 right-0 bottom-0 w-80 max-w-full bg-white shadow-2xl z-50 md:hidden overflow-y-auto animate-slideInRight",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Menu"}),e.jsx("button",{onClick:k,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close mobile menu",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"h-12 w-12 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(At,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:i}),e.jsx("p",{className:"text-sm text-gray-600",children:s==null?void 0:s.email})]})]}),e.jsxs(H,{to:"/rewards",onClick:k,className:"flex items-center justify-between p-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(or,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Loyalty Points"})]}),e.jsx("span",{className:"text-lg font-bold",children:h})]})]}),e.jsxs("nav",{className:"space-y-2 mb-6",children:[e.jsxs(H,{to:"/dashboard",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg transition-colors",children:[e.jsx(Tu,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Dashboard"})]}),e.jsxs(H,{to:"/menu",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg transition-colors",children:[e.jsx(eo,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Menu"})]}),e.jsxs(H,{to:"/orders",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg transition-colors",children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"My Orders"})]}),e.jsxs(H,{to:"/rewards",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg transition-colors",children:[e.jsx(Fn,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Rewards"})]}),e.jsxs(H,{to:"/catering",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-orange-50 hover:text-orange-600 rounded-lg transition-colors",children:[e.jsx(eo,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Catering"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-2",children:[e.jsxs(H,{to:"/profile",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(At,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"My Profile"})]}),e.jsxs(H,{to:"/addresses",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Saved Addresses"})]}),e.jsxs(H,{to:"/payment-methods",onClick:k,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(ls,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Payment Methods"})]}),e.jsxs("button",{onClick:N,disabled:m,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(To,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:m?"Logging out...":"Logout"})]})]})]})})]})]}),e.jsx("div",{className:"h-16"})]})},X1=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/dashboard",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.low_stock_items.map(a=>({notification_id:`stock_${a.item_id}`,type:"low_stock_alert",message:`${a.name} is running low (${a.current_stock} left)`,created_at:new Date().toISOString(),item_id:a.item_id})),J1=async t=>{await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/logout",{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},Z1=()=>{const t=je(),s=X(y=>y.authentication_state.current_user),r=X(y=>y.authentication_state.auth_token),a=X(y=>y.logout_user),[n,i]=x.useState(!1),[l,o]=x.useState(!1),{data:c=[],isLoading:d,refetch:u}=le({queryKey:["staff-notifications"],queryFn:()=>X1(r||""),enabled:!!r,staleTime:3e4,refetchInterval:6e4,retry:1}),m=c.length,b=(s==null?void 0:s.first_name)||"Staff",p=()=>{i(!n),o(!1),n||u()},g=()=>{o(!l),i(!1)},h=async()=>{try{r&&await J1(r),await a(),t("/staff/login")}catch(y){console.error("Logout error:",y),await a(),t("/staff/login")}},N=y=>{y.type==="low_stock_alert"&&y.item_id?(t("/staff/stock"),i(!1)):y.order_id&&(t(`/staff/orders/${y.order_id}`),i(!1))},j=()=>{i(!1),o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-orange-600 to-orange-700 shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(H,{to:"/staff/dashboard",className:"flex items-center space-x-2 text-white font-bold text-xl hover:opacity-90 transition-opacity","aria-label":"Staff Dashboard Home",children:[e.jsx(Qt,{className:"h-7 w-7"}),e.jsx("span",{className:"hidden sm:inline",children:"Salama Lama Staff"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsxs(H,{to:"/staff/orders",className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium hover:bg-orange-800 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-orange-600","aria-label":"View Orders",children:[e.jsx(Qt,{className:"h-5 w-5"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(H,{to:"/staff/stock",className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium hover:bg-orange-800 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-orange-600","aria-label":"View Stock",children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("span",{children:"Stock"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:p,className:"relative p-2 rounded-lg text-white hover:bg-orange-800 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-orange-600","aria-label":"Notifications","aria-expanded":n,children:[e.jsx(Wr,{className:"h-6 w-6"}),m>0&&e.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center h-5 w-5 text-xs font-bold text-white bg-red-600 rounded-full border-2 border-orange-700",children:m>9?"9+":m})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["Notifications (",m,")"]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded","aria-label":"Close notifications",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading notifications..."})]}):c.length===0?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx(Wr,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No notifications"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You're all caught up!"})]}):e.jsx("ul",{className:"divide-y divide-gray-100",children:c.map(y=>e.jsx("li",{children:e.jsx("button",{onClick:()=>N(y),className:"w-full px-4 py-3 hover:bg-gray-50 transition-colors text-left focus:outline-none focus:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 mt-2 rounded-full ${y.type==="low_stock_alert"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:y.type==="low_stock_alert"?"Low Stock Alert":"Order Update"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(y.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})})},y.notification_id))})}),c.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsx(H,{to:"/staff/dashboard",onClick:j,className:"text-sm text-orange-600 hover:text-orange-700 font-medium focus:outline-none focus:underline",children:"View Dashboard"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-white hover:bg-orange-800 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-orange-600","aria-label":"Staff Profile Menu","aria-expanded":l,children:[e.jsx(At,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:b})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s==null?void 0:s.email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:(s==null?void 0:s.role)||"Staff"})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(H,{to:"/staff/profile",onClick:j,className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(At,{className:"h-4 w-4"}),e.jsx("span",{children:"My Profile"})]}),e.jsxs(H,{to:"/staff/reports",onClick:j,className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Reports"})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:h,className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors text-left focus:outline-none focus:bg-red-50",children:[e.jsx(To,{className:"h-4 w-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})]})]})]}),e.jsx("div",{className:"md:hidden border-t border-orange-800 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{to:"/staff/orders",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-white text-sm font-medium hover:bg-orange-800 transition-all duration-200",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(H,{to:"/staff/stock",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-white text-sm font-medium hover:bg-orange-800 transition-all duration-200",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Stock"})]})]})})]})}),e.jsx("div",{className:"h-16"}),(n||l)&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:j,"aria-hidden":"true"})]})},e_=()=>{const t=X(P=>P.authentication_state.current_user),s=X(P=>P.authentication_state.auth_token),r=X(P=>P.logout_user),[a,n]=x.useState(""),[i,l]=x.useState(!1),[o,c]=x.useState(!1),[d,u]=x.useState(!1),m=x.useRef(null),b=x.useRef(null),p=x.useRef(null),g=je(),h="https://123salama-lama-food-truck.launchpulse.ai",{data:N,isLoading:j,error:y,refetch:f}=le({queryKey:["admin-notifications"],queryFn:async()=>{const _=(await W.get(`${h}/api/admin/dashboard/alerts`,{headers:{Authorization:`Bearer ${s}`}})).data,F=[];return _.low_stock_items&&_.low_stock_items.length>0&&_.low_stock_items.forEach(v=>{F.push({notification_id:`stock_${v.item_id}`,type:"low_stock",message:`${v.item_name} is low in stock (${v.current_stock} remaining)`,created_at:new Date().toISOString()})}),_.new_catering_inquiries_count>0&&F.push({notification_id:`catering_${Date.now()}`,type:"new_catering_inquiry",message:`${_.new_catering_inquiries_count} new catering inquir${_.new_catering_inquiries_count===1?"y":"ies"}`,created_at:new Date().toISOString()}),{notification_count:F.length,admin_notifications:F}},enabled:!!s,staleTime:30*1e3,refetchInterval:60*1e3,retry:1}),k=async()=>{try{await r(),g("/admin/login")}catch(P){console.error("Logout error:",P),g("/admin/login")}};x.useEffect(()=>{const P=_=>{m.current&&!m.current.contains(_.target)&&l(!1),b.current&&!b.current.contains(_.target)&&c(!1),p.current&&!p.current.contains(_.target)&&u(!1)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const T=P=>{const _=P.target.value;n(_),_.length>0?l(!0):l(!1)},M=(t==null?void 0:t.first_name)||"Admin";return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center flex-shrink-0",children:e.jsxs(H,{to:"/admin/dashboard",className:"flex items-center space-x-2 text-gray-900 hover:text-orange-600 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"SL"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm leading-none",children:"Salama Lama"}),e.jsx("span",{className:"text-xs text-gray-500 leading-none",children:"Admin Panel"})]})]})}),e.jsxs("div",{className:"flex-1 max-w-2xl mx-8 relative",ref:m,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Us,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:T,onFocus:()=>{a.length>0&&l(!0)},placeholder:"Search orders, customers, menu items...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-orange-500 focus:border-transparent sm:text-sm transition-all"})]}),i&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white rounded-lg shadow-lg border border-gray-200 py-2 max-h-96 overflow-y-auto z-50",children:a.length>0?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(Us,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Global search feature"}),e.jsx("p",{className:"text-xs text-gray-400",children:"The search endpoint is not yet implemented."}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Will search across orders, customers, and menu items."})]}):e.jsx("div",{className:"px-4 py-4 text-sm text-gray-500",children:"Type to search across all admin data..."})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",ref:b,children:[e.jsxs("button",{onClick:()=>c(!o),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":"Notifications",children:[e.jsx(Wr,{className:"h-6 w-6"}),N&&N.notification_count>0&&e.jsx("span",{className:"absolute top-1 right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full min-w-[20px]",children:N.notification_count})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),N&&N.notification_count>0&&e.jsx("button",{onClick:()=>f(),className:"text-xs text-orange-600 hover:text-orange-700 font-medium",children:"Refresh"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:j?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):y?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("p",{className:"text-sm text-red-600 mb-2",children:"Failed to load notifications"}),e.jsx("button",{onClick:()=>f(),className:"text-xs text-orange-600 hover:text-orange-700 font-medium",children:"Try Again"})]}):N&&N.admin_notifications.length>0?e.jsxs(e.Fragment,{children:[N.admin_notifications.map(P=>e.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 mt-1.5 rounded-full ${P.type==="low_stock"?"bg-yellow-500":P.type==="new_catering_inquiry"?"bg-blue-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:P.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(P.created_at).toLocaleTimeString()})]})]})},P.notification_id)),e.jsx("div",{className:"px-4 py-2 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{c(!1),g("/admin/dashboard")},className:"text-sm text-orange-600 hover:text-orange-700 font-medium w-full text-center",children:"View Dashboard"})})]}):e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(Wr,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You're all caught up!"})]})})]})]}),e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{onClick:()=>u(!d),className:"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-orange-100 rounded-full",children:e.jsx(At,{className:"h-5 w-5 text-orange-600"})}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline-block",children:M}),e.jsx(Os,{className:`h-4 w-4 text-gray-500 transition-transform ${d?"transform rotate-180":""}`})]}),d&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]}),e.jsx("div",{className:"py-1",children:e.jsxs(H,{to:"/admin/settings",onClick:()=>u(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(ic,{className:"h-4 w-4 mr-3 text-gray-500"}),"Admin Settings"]})}),e.jsx("div",{className:"border-t border-gray-200 py-1",children:e.jsxs("button",{onClick:k,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50 transition-colors",children:[e.jsx(To,{className:"h-4 w-4 mr-3 text-red-600"}),"Logout"]})})]})]})]})]})})}),e.jsx("div",{className:"h-16"})]})},t_=()=>{var m,b,p,g;const t=Vs(),[s,r]=x.useState(!1),[a,n]=x.useState({menu:!1}),i=X(h=>h.authentication_state.current_user);if(!X(h=>h.authentication_state.authentication_status.is_authenticated)||(i==null?void 0:i.role)!=="admin")return null;const o=()=>{r(!s)},c=h=>{n(N=>({...N,[h]:!N[h]}))},d=h=>t.pathname===h||t.pathname.startsWith(h+"/"),u=[{name:"Dashboard",path:"/admin/dashboard",icon:$1},{name:"Orders",path:"/admin/orders",icon:Dt},{name:"Menu",icon:Q1,hasSubmenu:!0,section:"menu",submenu:[{name:"Menu Items",path:"/admin/menu"},{name:"Categories",path:"/admin/menu/categories"}]},{name:"Stock",path:"/admin/stock",icon:Pe},{name:"Delivery",path:"/admin/delivery",icon:Ma},{name:"Discounts",path:"/admin/discounts",icon:jy},{name:"Customers",path:"/admin/customers",icon:Hr},{name:"Staff",path:"/admin/staff",icon:H1},{name:"Catering",path:"/admin/catering",icon:cr},{name:"Invoices",path:"/admin/invoices",icon:_s},{name:"Analytics",path:"/admin/analytics",icon:fy},{name:"Settings",path:"/admin/settings",icon:ic}];return e.jsx(e.Fragment,{children:e.jsxs("aside",{className:`fixed left-0 top-0 h-screen bg-gray-900 text-white z-30 transition-all duration-300 flex flex-col ${s?"w-16":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-800 flex-shrink-0",children:[!s&&e.jsx("h2",{className:"text-xl font-bold text-orange-500",children:"Salama Lama"}),e.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":s?"Expand sidebar":"Collapse sidebar",children:s?e.jsx(nc,{className:"w-5 h-5"}):e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:e.jsx("ul",{className:"space-y-1 px-2",children:u.map(h=>{if(h.hasSubmenu&&h.submenu){const N=a[h.section||""],j=h.submenu.some(y=>d(y.path));return e.jsxs("li",{children:[e.jsxs("button",{onClick:()=>c(h.section||""),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 ${j?"bg-orange-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,"aria-expanded":N,title:s?h.name:void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h.icon,{className:"w-5 h-5 flex-shrink-0"}),!s&&e.jsx("span",{className:"font-medium",children:h.name})]}),!s&&e.jsx("span",{children:N?e.jsx(Os,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"})})]}),!s&&N&&e.jsx("ul",{className:"mt-1 ml-4 space-y-1",children:h.submenu.map(y=>e.jsx("li",{children:e.jsx(H,{to:y.path,className:`block px-4 py-2 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 ${d(y.path)?"bg-orange-600 text-white font-medium":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:y.name})},y.path))})]},h.name)}return e.jsx("li",{children:e.jsxs(H,{to:h.path||"#",className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 ${d(h.path||"")?"bg-orange-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,title:s?h.name:void 0,children:[e.jsx(h.icon,{className:"w-5 h-5 flex-shrink-0"}),!s&&e.jsx("span",{className:"font-medium",children:h.name})]})},h.name)})})}),!s&&e.jsx("div",{className:"border-t border-gray-800 p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 flex items-center justify-center text-white font-semibold text-lg",children:((b=(m=i==null?void 0:i.first_name)==null?void 0:m.charAt(0))==null?void 0:b.toUpperCase())||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-white truncate",children:[i==null?void 0:i.first_name," ",i==null?void 0:i.last_name]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:"Administrator"})]})]})}),s&&e.jsx("div",{className:"border-t border-gray-800 p-2 flex-shrink-0 flex justify-center",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 flex items-center justify-center text-white font-semibold text-lg",title:`${i==null?void 0:i.first_name} ${i==null?void 0:i.last_name}`,children:((g=(p=i==null?void 0:i.first_name)==null?void 0:p.charAt(0))==null?void 0:g.toUpperCase())||"A"})})]})})},s_=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})}),r_=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})}),a_=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})}),n_=({className:t="w-6 h-6"})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"})}),i_="https://123salama-lama-food-truck.launchpulse.ai",l_=()=>{const t=X(p=>p.business_settings.business_info),s=X(p=>p.authentication_state.authentication_status.is_authenticated),[r,a]=x.useState(""),[n,i]=x.useState(""),[l,o]=x.useState(!1),[c,d]=x.useState(!1),u=ie({mutationFn:async p=>(await W.post(`${i_}/api/newsletter/subscribe`,p,{headers:{"Content-Type":"application/json"}})).data,onSuccess:p=>{i(p.message||"Successfully subscribed!"),o(!0),d(!1),a("")},onError:p=>{var h,N;const g=((N=(h=p.response)==null?void 0:h.data)==null?void 0:N.message)||p.message||"Subscription failed. Please try again.";i(g),o(!1),d(!0)}}),m=p=>{if(p.preventDefault(),i(""),o(!1),d(!1),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){i("Please enter a valid email address."),d(!0);return}u.mutate({email:r})};x.useEffect(()=>{if(n){const p=setTimeout(()=>{i(""),o(!1),d(!1)},5e3);return()=>clearTimeout(p)}},[n]);const b={instagram:"https://www.instagram.com/salamalama",facebook:"https://www.facebook.com/SalamaLamaFoodTruck",twitter:"https://twitter.com/SalamaLamaIE",tiktok:"https://www.tiktok.com/@salamalama"};return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"bg-gray-900 border-t border-gray-800","aria-labelledby":"footer-heading",children:[e.jsx("h2",{id:"footer-heading",className:"sr-only",children:"Footer"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:t.name||"Salama Lama Food Truck"}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-300",children:[t.phone&&e.jsx("li",{children:e.jsxs("a",{href:`tel:${t.phone}`,className:"hover:text-white transition-colors duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.phone]})}),t.email&&e.jsx("li",{children:e.jsxs("a",{href:`mailto:${t.email}`,className:"hover:text-white transition-colors duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.email]})}),t.address&&e.jsxs("li",{className:"flex items-start",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:typeof t.address=="string"?t.address:`${t.address.line1}${t.address.line2?", "+t.address.line2:""}, ${t.address.city}, ${t.address.postal_code}`})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx("a",{href:b.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white hover:opacity-75 transition-all duration-200","aria-label":"Visit our Instagram",children:e.jsx(s_,{className:"w-6 h-6"})}),e.jsx("a",{href:b.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white hover:opacity-75 transition-all duration-200","aria-label":"Visit our Facebook",children:e.jsx(r_,{className:"w-6 h-6"})}),e.jsx("a",{href:b.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white hover:opacity-75 transition-all duration-200","aria-label":"Visit our Twitter",children:e.jsx(a_,{className:"w-6 h-6"})}),e.jsx("a",{href:b.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white hover:opacity-75 transition-all duration-200","aria-label":"Visit our TikTok",children:e.jsx(n_,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:"Quick Links"}),e.jsx("nav",{"aria-label":"Quick links navigation",children:e.jsxs("ul",{className:"space-y-3 text-sm text-gray-300",children:[e.jsx("li",{children:e.jsx(H,{to:"/menu",className:"hover:text-white transition-colors duration-200",children:"Menu"})}),e.jsx("li",{children:e.jsx(H,{to:"/catering",className:"hover:text-white transition-colors duration-200",children:"Catering"})}),e.jsx("li",{children:e.jsx(H,{to:"/about",className:"hover:text-white transition-colors duration-200",children:"About Us"})}),e.jsx("li",{children:e.jsx(H,{to:"/contact",className:"hover:text-white transition-colors duration-200",children:"Contact"})}),e.jsx("li",{children:e.jsx(H,{to:"/faqs",className:"hover:text-white transition-colors duration-200",children:"FAQs"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:"Legal & Account"}),e.jsx("nav",{"aria-label":"Legal and account navigation",children:e.jsxs("ul",{className:"space-y-3 text-sm text-gray-300",children:[e.jsx("li",{children:e.jsx(H,{to:"/terms",className:"hover:text-white transition-colors duration-200",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx(H,{to:"/privacy",className:"hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),s&&e.jsx("li",{className:"pt-2 border-t border-gray-700",children:e.jsxs(H,{to:"/dashboard",className:"hover:text-white transition-colors duration-200 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"My Account"]})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white",children:"Stay Updated"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Get exclusive offers, new menu items, and location updates."}),e.jsxs("form",{onSubmit:m,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newsletter-email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"newsletter-email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>a(p.target.value),placeholder:"Enter your email",disabled:u.isPending,className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsx("button",{type:"submit",disabled:u.isPending||!r,className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Subscribing..."]}):"Subscribe"}),n&&e.jsx("div",{role:"status","aria-live":"polite",className:`text-sm p-3 rounded-lg ${l?"bg-green-900/50 text-green-200 border border-green-700":c?"bg-red-900/50 text-red-200 border border-red-700":""}`,children:e.jsxs("div",{className:"flex items-start",children:[l&&e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c&&e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:n})]})})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["We respect your privacy. See our"," ",e.jsx(H,{to:"/privacy",className:"text-blue-400 hover:text-blue-300 underline transition-colors duration-200",children:"Privacy Policy"}),"."]})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-800",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[" ",new Date().getFullYear()," ",t.name||"Salama Lama Food Truck",". All rights reserved."]})})]})]})})},o_=()=>{const[t,s]=x.useState(!1),[r,a]=x.useState(!1),[n,i]=x.useState({essential:!0,analytics:!1,marketing:!1});x.useEffect(()=>{const b=localStorage.getItem("cookie_consent");if(b)try{const p=JSON.parse(b);i(p),s(!1)}catch(p){console.error("Error parsing stored consent:",p),s(!0)}else s(!0)},[]);const l=()=>{const b={essential:!0,analytics:!0,marketing:!0};localStorage.setItem("cookie_consent",JSON.stringify(b)),i(b),s(!1)},o=()=>{const b={essential:!0,analytics:!1,marketing:!1};localStorage.setItem("cookie_consent",JSON.stringify(b)),i(b),s(!1)},c=()=>{a(!0)},d=()=>{localStorage.setItem("cookie_consent",JSON.stringify(n)),a(!1),s(!1)},u=()=>{i(b=>({...b,analytics:!b.analytics}))},m=()=>{i(b=>({...b,marketing:!b.marketing}))};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t-2 border-gray-200 shadow-2xl shadow-gray-900/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-orange-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"We Value Your Privacy"})]}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["We use cookies to enhance your browsing experience, analyze site traffic, and personalize content. Essential cookies are always enabled to ensure the website functions properly. You can choose to accept all cookies or customize your preferences."," ",e.jsx(H,{to:"/privacy",className:"text-orange-600 hover:text-orange-700 font-medium underline focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded",children:"Learn more in our Privacy Policy"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto lg:flex-shrink-0",children:[e.jsx("button",{onClick:o,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg border border-gray-300 transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-gray-100","aria-label":"Reject non-essential cookies",children:"Reject Non-Essential"}),e.jsx("button",{onClick:c,className:"px-6 py-3 bg-white hover:bg-gray-50 text-gray-900 font-medium rounded-lg border-2 border-gray-300 transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-gray-100","aria-label":"Customize cookie preferences",children:"Customize"}),e.jsx("button",{onClick:l,className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-sm focus:outline-none focus:ring-4 focus:ring-orange-100","aria-label":"Accept all cookies",children:"Accept All"})]})]})})}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity duration-200",onClick:()=>a(!1),"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:b=>b.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:"Cookie Preferences"}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-lg p-1","aria-label":"Close preferences modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Essential Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Always Enabled"})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("div",{className:"w-12 h-6 bg-green-600 rounded-full relative","aria-label":"Essential cookies enabled",children:e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-6 bg-white rounded-full shadow-md"})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies are necessary for the website to function properly. They enable core functionality such as security, authentication, and session management. The website cannot function properly without these cookies."})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Analytics Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full",children:"Optional"})]}),e.jsx("button",{onClick:u,className:"ml-4 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-full","aria-label":`${n.analytics?"Disable":"Enable"} analytics cookies`,"aria-pressed":n.analytics,children:e.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${n.analytics?"bg-orange-600":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0 bottom-0 w-6 bg-white rounded-full shadow-md transition-transform duration-200 ${n.analytics?"right-0":"left-0"}`})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously. This helps us improve our services and provide a better user experience. We use this data to analyze traffic patterns, identify popular content, and optimize the website's performance."})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Marketing Cookies"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-full",children:"Optional"})]}),e.jsx("button",{onClick:m,className:"ml-4 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-full","aria-label":`${n.marketing?"Disable":"Enable"} marketing cookies`,"aria-pressed":n.marketing,children:e.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${n.marketing?"bg-orange-600":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0 bottom-0 w-6 bg-white rounded-full shadow-md transition-transform duration-200 ${n.marketing?"right-0":"left-0"}`})})})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"These cookies are used to deliver relevant advertisements and track campaign effectiveness. They may be set by our advertising partners to build a profile of your interests and show you relevant ads on other sites. These cookies help us understand which marketing campaigns are most effective."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed",children:["For more detailed information about how we use cookies and process your data, please read our"," ",e.jsx(H,{to:"/privacy",className:"font-medium text-blue-700 hover:text-blue-800 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",children:"Privacy Policy"})," ","and"," ",e.jsx(H,{to:"/terms",className:"font-medium text-blue-700 hover:text-blue-800 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",children:"Terms & Conditions"}),"."]})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Your Current Preferences:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Essential Cookies"}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-green-700 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Analytics Cookies"}),e.jsx("span",{className:`inline-flex items-center gap-1 font-medium ${n.analytics?"text-orange-600":"text-gray-500"}`,children:n.analytics?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Disabled"]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Marketing Cookies"}),e.jsx("span",{className:`inline-flex items-center gap-1 font-medium ${n.marketing?"text-orange-600":"text-gray-500"}`,children:n.marketing?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Disabled"]})})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-gray-100",children:"Cancel"}),e.jsx("button",{onClick:d,className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Save Preferences"})]})]})})})]})]}):null},c_=()=>{const t=X(o=>o.cart_state.items),s=X(o=>o.cart_state.subtotal),r=X(o=>o.cart_state.total),[a,n]=x.useState(!1),i=t.reduce((o,c)=>o+c.quantity,0),l=i===0;return x.useEffect(()=>{if(i>0){n(!0);const o=setTimeout(()=>n(!1),600);return()=>clearTimeout(o)}},[i,r]),l?null:e.jsxs(e.Fragment,{children:[e.jsxs(H,{to:"/cart",className:`
          fixed bottom-6 right-6 
          bg-orange-600 text-white 
          rounded-full shadow-2xl 
          hover:bg-orange-700 
          transition-all duration-200 
          hover:scale-105 
          z-50 
          hidden lg:flex 
          items-center space-x-3 
          px-5 py-4
          ${a?"animate-bounce":""}
        `,"aria-label":`View cart with ${i} ${i===1?"item":"items"}, total ${r.toFixed(2)}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"h-6 w-6","aria-hidden":"true"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center shadow-md",children:i})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("span",{className:"text-xs font-medium opacity-90",children:[i," ",i===1?"item":"items"]}),e.jsxs("span",{className:"text-lg font-bold",children:["",r.toFixed(2)]})]})]}),e.jsx(H,{to:"/cart",className:`
          fixed bottom-0 left-0 right-0 
          bg-orange-600 text-white 
          shadow-2xl 
          z-50 
          lg:hidden
          ${a?"animate-pulse":""}
        `,"aria-label":`View cart with ${i} ${i===1?"item":"items"}, total ${r.toFixed(2)}`,children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"h-7 w-7","aria-hidden":"true"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center shadow-md",children:i})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("span",{className:"text-sm font-medium",children:[i," ",i===1?"item":"items"]}),e.jsxs("span",{className:"text-xs opacity-90",children:["Subtotal: ",s.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs font-medium opacity-90",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold",children:["",r.toFixed(2)]})]})]})})]})},lc="https://123salama-lama-food-truck.launchpulse.ai",d_=async()=>(await W.get(`${lc}/api/menu/items`,{params:{is_featured:!0,limit:6,is_active:!0}})).data.items.map(s=>{var r,a;return{item_id:s.item_id,name:s.name,description:((r=s.description)==null?void 0:r.substring(0,100))+(((a=s.description)==null?void 0:a.length)>100?"...":"")||"",price:Number(s.price||0),image_url:s.image_url||"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=300&h=300&fit=crop&q=80",is_limited_edition:s.is_limited_edition||!1}}),u_=async()=>{const t=await W.get(`${lc}/api/business/info`);return{name:t.data.name||"Salama Lama Food Truck",phone:t.data.phone||"",email:t.data.email||"",address:t.data.address||"",operating_hours:t.data.operating_hours||{},delivery_enabled:t.data.delivery_enabled||!1,social_links:t.data.social_links||{}}},m_=async()=>{const t=await W.get(`${lc}/api/business/reviews`,{params:{limit:5}});return{aggregate_rating:Number(t.data.aggregate_rating||0),total_count:t.data.total_count||0,reviews:(t.data.reviews||[]).map(s=>{var r,a;return{author_name:s.author_name||"Anonymous",rating:s.rating||5,text:((r=s.text)==null?void 0:r.substring(0,200))+(((a=s.text)==null?void 0:a.length)>200?"...":"")||"",time:s.time||new Date().toISOString(),profile_photo_url:s.profile_photo_url}})}},h_=async t=>{await W.post(`${lc}/api/newsletter/subscribe`,{email:t})},x_=()=>{const[t,s]=x.useState(""),[r,a]=x.useState(null),n=X(h=>h.authentication_state.current_user),{data:i=[],isLoading:l,isError:o}=le({queryKey:["featured-items"],queryFn:d_,staleTime:5*60*1e3,retry:1}),{data:c,isLoading:d}=le({queryKey:["business-info"],queryFn:u_,staleTime:10*60*1e3,retry:1}),{data:u,isLoading:m}=le({queryKey:["google-reviews"],queryFn:m_,staleTime:15*60*1e3,retry:1}),b=ie({mutationFn:h_,onSuccess:()=>{s(""),a(null)},onError:h=>{var j,y;const N=((y=(j=h.response)==null?void 0:j.data)==null?void 0:y.message)||"Subscription failed. Please try again.";a(N)}}),p=h=>{if(h.preventDefault(),a(null),!t||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){a("Please enter a valid email address");return}b.mutate(t)},g=h=>{const N=[],j=Math.floor(h),y=h%1>=.5;for(let f=0;f<5;f++)f<j?N.push(e.jsx(Zl,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},f)):f===j&&y?N.push(e.jsx(Zl,{className:"w-5 h-5 fill-yellow-400 text-yellow-400",style:{clipPath:"inset(0 50% 0 0)"}},f)):N.push(e.jsx(Zl,{className:"w-5 h-5 text-gray-300"},f));return N};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"relative bg-gradient-to-br from-orange-50 via-white to-orange-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=1920&q=80')] bg-cover bg-center opacity-10"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32",children:e.jsxs("div",{className:"text-center",children:[!d&&c&&e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white rounded-full shadow-lg mb-8",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:c.delivery_enabled?"Collection & Delivery Available":"Collection Only"})]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Dublin's Favorite",e.jsx("br",{}),e.jsx("span",{className:"text-orange-600",children:"Food Truck Experience"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Fresh, delicious food made with love. Order now and taste the difference."}),e.jsxs(H,{to:"/menu",className:"inline-flex items-center px-8 py-4 bg-orange-600 text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-orange-700 hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:["Order Now",e.jsx($e,{className:"ml-2 w-5 h-5"})]}),n&&e.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Welcome back, ",n.first_name,"! "]})]})})]}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Featured Items"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Try our most popular dishes"})]}),l?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4].map(h=>e.jsx("div",{className:"bg-gray-100 rounded-xl h-80 animate-pulse"},h))}):o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Unable to load featured items. Please try again later."})]}):i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(h=>e.jsxs("div",{className:"group bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:h.image_url,alt:h.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-200"}),h.is_limited_edition&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"Limited Edition"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:h.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["",h.price.toFixed(2)]}),e.jsx(H,{to:"/menu",className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:"Add to Order"})]})]})]},h.item_id))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No featured items available at the moment."})}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(H,{to:"/menu",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:["View Full Menu",e.jsx($e,{className:"ml-2 w-5 h-5"})]})})]})}),!m&&u&&u.reviews.length>0&&e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"What Our Customers Say"}),u.aggregate_rating>0&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("div",{className:"flex",children:g(u.aggregate_rating)}),e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:u.aggregate_rating.toFixed(1)})]}),e.jsxs("p",{className:"text-gray-600",children:["Based on ",u.total_count," reviews"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.reviews.slice(0,3).map((h,N)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[h.profile_photo_url?e.jsx("img",{src:h.profile_photo_url,alt:h.author_name,className:"w-12 h-12 rounded-full mr-4"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-orange-600 font-semibold text-lg",children:h.author_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:h.author_name}),e.jsx("div",{className:"flex mt-1",children:g(h.rating)})]})]}),e.jsxs("p",{className:"text-gray-600 leading-relaxed",children:['"',h.text,'"']})]},N))}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("a",{href:`https://www.google.com/maps/search/${encodeURIComponent((c==null?void 0:c.name)||"Salama Lama Food Truck")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-orange-600 font-medium hover:text-orange-700 transition-colors",children:["See All Reviews",e.jsx($e,{className:"ml-1 w-5 h-5"})]})})]})}),!d&&c&&e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Find Us"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Come visit us at our location"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-gray-200 h-[400px]",children:e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(`${c.address.line1}, ${c.address.city}, ${c.address.postal_code}`)}`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Salama Lama Location"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Ge,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Address"}),e.jsxs("p",{className:"text-gray-600",children:[c.address.line1,c.address.line2&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),c.address.line2]}),e.jsx("br",{}),c.address.city,", ",c.address.postal_code]}),e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${c.address.line1}, ${c.address.city}, ${c.address.postal_code}`)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-orange-600 font-medium mt-2 hover:text-orange-700 transition-colors",children:["Get Directions",e.jsx($e,{className:"ml-1 w-4 h-4"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Le,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Operating Hours"}),Object.keys(c.operating_hours).length>0?e.jsx("div",{className:"space-y-1",children:Object.entries(c.operating_hours).map(([h,N])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[h,":"]}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[N.open," - ",N.close]})]},h))}):e.jsx("p",{className:"text-gray-600",children:"Hours not available"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(zt,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Contact"}),c.phone&&e.jsx("a",{href:`tel:${c.phone}`,className:"text-gray-600 hover:text-orange-600 transition-colors block mb-1",children:c.phone}),c.email&&e.jsx("a",{href:`mailto:${c.email}`,className:"text-gray-600 hover:text-orange-600 transition-colors block",children:c.email})]})]})})]})]})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-br from-orange-600 to-orange-700 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-6",children:"Let Us Cater Your Event"}),e.jsx("p",{className:"text-xl mb-8 text-orange-100",children:"From corporate events to weddings, we bring the flavor to your special occasion"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:["Corporate Events","Weddings","Private Parties","Festivals"].map(h=>e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:e.jsx("p",{className:"font-medium",children:h})},h))}),e.jsxs(H,{to:"/catering/inquiry",className:"inline-flex items-center px-8 py-4 bg-white text-orange-600 text-lg font-semibold rounded-lg shadow-lg hover:bg-gray-50 hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:["Request Catering Quote",e.jsx($e,{className:"ml-2 w-5 h-5"})]})]})})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8 lg:p-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Get exclusive offers, new menu items, and location updates"})]}),e.jsxs("form",{onSubmit:p,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"email",value:t,onChange:h=>{s(h.target.value),a(null)},placeholder:"Enter your email",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 focus:outline-none transition-all",disabled:b.isPending}),e.jsx("button",{type:"submit",disabled:b.isPending||!t,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 animate-spin"}),"Subscribing..."]}):"Subscribe"})]}),b.isSuccess&&e.jsxs("div",{className:"mt-4 flex items-center text-green-600 bg-green-50 px-4 py-3 rounded-lg",children:[e.jsx(qe,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:"Thanks for subscribing! Check your inbox."})]}),r&&e.jsxs("div",{className:"mt-4 flex items-center text-red-600 bg-red-50 px-4 py-3 rounded-lg",children:[e.jsx(ce,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:r})]}),e.jsxs("p",{className:"mt-4 text-xs text-gray-500 text-center",children:["By subscribing, you agree to our"," ",e.jsx(H,{to:"/privacy",className:"text-orange-600 hover:text-orange-700",children:"Privacy Policy"})]})]})]})})})]})},Km="https://123salama-lama-food-truck.launchpulse.ai",g_=async t=>{const s=new URLSearchParams;return t.category&&s.append("category",t.category),t.search&&s.append("search",t.search),t.dietary_filters&&t.dietary_filters.length>0&&t.dietary_filters.forEach(a=>s.append("dietary_filters",a)),t.sort&&s.append("sort",t.sort),s.append("is_active","true"),s.append("limit","50"),s.append("offset","0"),(await W.get(`${Km}/api/menu/items?${s.toString()}`)).data},p_=async()=>(await W.get(`${Km}/api/menu/categories`)).data,f_=async(t,s)=>{const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),(await W.post(`${Km}/api/cart/items`,t,{headers:r})).data},y_=()=>{var I,q;const[t,s]=Xe(),r=X(A=>A.authentication_state.auth_token),a=X(A=>A.add_to_cart),[n,i]=x.useState(t.get("category")||null),[l,o]=x.useState(t.get("search")||""),[c,d]=x.useState(((I=t.get("dietary_filters"))==null?void 0:I.split(",").filter(Boolean))||[]),[u,m]=x.useState(t.get("sort")||"default"),[b,p]=x.useState(!1),[g,h]=x.useState({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1}),{data:N}=le({queryKey:["categories"],queryFn:p_,staleTime:10*60*1e3}),j=x.useMemo(()=>(N==null?void 0:N.categories)||[],[N]),{data:y,isLoading:f,error:k}=le({queryKey:["menu-items",n,l,c,u],queryFn:()=>g_({category:n||void 0,search:l||void 0,dietary_filters:c.length>0?c:void 0,sort:u!=="default"?u:void 0}),staleTime:5*60*1e3}),T=x.useMemo(()=>y!=null&&y.items?y.items.map(A=>({...A,price:Number(A.price||0),current_stock:A.current_stock!==null?Number(A.current_stock):null,image_url:A.image_url||`https://picsum.photos/300/300?random=${A.item_id}`,dietary_tags:A.dietary_tags||[],customization_groups:(A.customization_groups||[]).map(L=>({...L,options:(L.options||[]).map(U=>({...U,additional_price:Number(U.additional_price||0)}))}))})):[],[y]),M=ie({mutationFn:A=>f_(A,r),onSuccess:()=>{if(g.item){const A=g.item,L={item_id:A.item_id,item_name:A.name,quantity:g.quantity,unit_price:Number(A.price),customizations:g.selected_customizations.map(U=>({group_name:U.group_name,option_name:U.option_name,additional_price:Number(U.additional_price)})),line_total:Number(g.total_price)*g.quantity};a(L)}h({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1}),alert("Item added to cart!")},onError:A=>{var L,U,Y;((L=A.response)==null?void 0:L.status)===401?(alert("Please log in or register to add items to your cart."),window.location.href="/login?redirect=/menu"):alert(((Y=(U=A.response)==null?void 0:U.data)==null?void 0:Y.message)||"Failed to add item to cart")}});x.useEffect(()=>{const A=new URLSearchParams;n&&A.set("category",n),l&&A.set("search",l),c.length>0&&A.set("dietary_filters",c.join(",")),u!=="default"&&A.set("sort",u),s(A,{replace:!0})},[n,l,c,u,s]);const P=A=>{i(A)},_=A=>{o(A.target.value)},F=()=>{o("")},v=A=>{d(L=>L.includes(A)?L.filter(U=>U!==A):[...L,A])},O=A=>{m(A.target.value)},R=()=>{i(null),o(""),d([]),m("default")},C=A=>{const L=[];A.customization_groups.forEach(K=>{const G=K.options.find(J=>J.is_default);G&&K.type==="single"&&L.push({group_id:K.group_id,group_name:K.name,option_id:G.option_id,option_name:G.name,additional_price:Number(G.additional_price)})});const U=Number(A.price),Y=L.reduce((K,G)=>K+Number(G.additional_price),0),Q=U+Y;h({is_open:!0,item:A,selected_customizations:L,total_price:Q,quantity:1})},z=()=>{h({is_open:!1,item:null,selected_customizations:[],total_price:0,quantity:1})},D=(A,L,U,Y)=>{h(Q=>{var ke;let K=[...Q.selected_customizations];if(U==="single")K=K.filter(he=>he.group_id!==A),K.push({group_id:A,group_name:L,option_id:Y.option_id,option_name:Y.name,additional_price:Number(Y.additional_price)});else{const he=K.findIndex(se=>se.group_id===A&&se.option_id===Y.option_id);he>=0?K.splice(he,1):K.push({group_id:A,group_name:L,option_id:Y.option_id,option_name:Y.name,additional_price:Number(Y.additional_price)})}const G=Number(((ke=Q.item)==null?void 0:ke.price)||0),J=K.reduce((he,se)=>he+Number(se.additional_price),0),xe=G+J;return{...Q,selected_customizations:K,total_price:xe}})},S=A=>{h(L=>({...L,quantity:Math.max(1,L.quantity+A)}))},E=()=>{if(!g.item)return;if(!r){alert("Please log in or register to add items to your cart."),window.location.href="/login?redirect=/menu";return}const A=g.item.customization_groups.filter(Y=>Y.is_required),L=new Set(g.selected_customizations.map(Y=>Y.group_id));for(const Y of A)if(!L.has(Y.group_id)){alert(`Please select an option for "${Y.name}"`);return}if(g.item.stock_tracked&&g.item.current_stock!==null&&g.item.current_stock<g.quantity){alert("Insufficient stock available");return}const U={};g.selected_customizations.forEach(Y=>{U[Y.group_id]||(U[Y.group_id]=[]),U[Y.group_id].push({option_id:Y.option_id,option_name:Y.option_name,additional_price:Y.additional_price})}),M.mutate({item_id:g.item.item_id,quantity:g.quantity,selected_customizations:U})},w=A=>{if(!r){alert("Please log in or register to add items to your cart."),window.location.href="/login?redirect=/menu";return}A.customization_groups.length===0||!A.customization_groups.some(L=>L.is_required)?M.mutate({item_id:A.item_id,quantity:1,selected_customizations:{}}):C(A)},$=[{value:"vegan",label:"Vegan",icon:""},{value:"vegetarian",label:"Vegetarian",icon:""},{value:"gluten_free",label:"Gluten-Free",icon:""},{value:"halal",label:"Halal",icon:""},{value:"dairy_free",label:"Dairy-Free",icon:""}],B=A=>!A.stock_tracked||A.current_stock===null?"in_stock":A.current_stock===0?"out_of_stock":A.current_stock<=5?"low_stock":"in_stock";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-b border-orange-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Our Menu"}),e.jsx("p",{className:"mt-2 text-base md:text-lg text-gray-600 leading-relaxed",children:"Discover our delicious selection of authentic dishes"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search menu items...",value:l,onChange:_,className:"w-full px-4 py-3 pl-11 pr-10 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all duration-200 outline-none"}),e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l&&e.jsx("button",{onClick:F,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("button",{onClick:()=>p(!0),className:"sm:hidden px-6 py-3 bg-white border-2 border-gray-200 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{children:"Filters"}),c.length>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-600 text-white text-xs font-medium rounded-full",children:c.length})]}),e.jsxs("select",{value:u,onChange:O,className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all duration-200 outline-none font-medium text-gray-700 bg-white",children:[e.jsx("option",{value:"default",children:"Sort by: Default"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"price_low_high",children:"Price (Low to High)"}),e.jsx("option",{value:"price_high_low",children:"Price (High to Low)"})]})]}),(n||c.length>0)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active filters:"}),n&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 bg-orange-100 text-orange-800 text-sm font-medium rounded-full",children:[((q=j.find(A=>A.category_id===n))==null?void 0:q.name)||n,e.jsx("button",{onClick:()=>P(null),className:"ml-2 text-orange-600 hover:text-orange-800","aria-label":"Remove category filter",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),c.map(A=>{var L;return e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-800 text-sm font-medium rounded-full",children:[((L=$.find(U=>U.value===A))==null?void 0:L.label)||A,e.jsx("button",{onClick:()=>v(A),className:"ml-2 text-green-600 hover:text-green-800","aria-label":`Remove ${A} filter`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},A)}),e.jsx("button",{onClick:R,className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"Clear all"})]})]}),e.jsx("div",{className:"mb-8 border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex space-x-8 min-w-max","aria-label":"Categories",children:[e.jsx("button",{onClick:()=>P(null),className:`pb-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${n===null?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All Items"}),j.map(A=>e.jsx("button",{onClick:()=>P(A.category_id),className:`pb-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${n===A.category_id?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:A.name},A.category_id))]})}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("aside",{className:"hidden sm:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-4 bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dietary Filters"}),e.jsx("div",{className:"space-y-3",children:$.map(A=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:c.includes(A.value),onChange:()=>v(A.value),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:A.icon}),e.jsx("span",{children:A.label})]})]},A.value))})]})}),e.jsx("div",{className:"flex-1",children:f?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((A,L)=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]},L))}):k?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load menu items"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please try again later or contact support if the problem persists."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Retry"})]}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No menu items found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or search terms"}),e.jsx("button",{onClick:R,className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(A=>{const L=B(A),U=L==="out_of_stock",Y=L==="low_stock";return e.jsxs("div",{className:`bg-white rounded-xl border border-gray-200 overflow-hidden transition-all duration-200 hover:shadow-lg ${U?"opacity-60":""}`,children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[e.jsx("img",{src:A.image_url||"",alt:A.name,className:"w-full h-full object-cover",loading:"lazy"}),e.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[A.is_limited_edition&&e.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white text-xs font-bold rounded-full shadow-lg",children:"Limited Edition"}),U&&e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg",children:"Sold Out"}),Y&&!U&&e.jsxs("span",{className:"px-3 py-1 bg-orange-500 text-white text-xs font-bold rounded-full shadow-lg",children:["Only ",A.current_stock," left"]})]}),A.dietary_tags&&A.dietary_tags.length>0&&e.jsx("div",{className:"absolute bottom-3 left-3 flex gap-1",children:A.dietary_tags.map(Q=>{const K=$.find(G=>G.value===Q);return K?e.jsx("span",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center text-lg shadow-md",title:K.label,children:K.icon},Q):null})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 leading-tight",children:A.name}),A.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:A.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",Number(A.price).toFixed(2)]}),A.customization_groups.length>0&&e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Customizable"})]}),e.jsx("button",{onClick:()=>{A.customization_groups.length>0?C(A):w(A)},disabled:U,className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 ${U?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-orange-600 text-white hover:bg-orange-700 hover:shadow-lg"}`,children:U?"Out of Stock":A.customization_groups.length>0?"Customize & Add":"Add to Cart"})]})]},A.item_id)})})})]})]}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 sm:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-80 max-w-full bg-white shadow-xl",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dietary Filters"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close filters",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-4",children:$.map(A=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.includes(A.value),onChange:()=>v(A.value),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2 transition-all"}),e.jsxs("span",{className:"text-base font-medium text-gray-700 flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:A.icon}),e.jsx("span",{children:A.label})]})]},A.value))})}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>p(!1),className:"w-full px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Apply Filters"})})]})})]}),g.is_open&&g.item&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:z}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:z,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:g.item.image_url||"",alt:g.item.name,className:"w-24 h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:g.item.name}),g.item.description&&e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:g.item.description})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[g.item.customization_groups.length===0?e.jsx("p",{className:"text-gray-600",children:"No customization options available for this item."}):g.item.customization_groups.map(A=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[A.name,A.is_required&&e.jsx("span",{className:"ml-2 text-red-600 text-sm",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:A.options.map(L=>{const U=g.selected_customizations.some(Y=>Y.group_id===A.group_id&&Y.option_id===L.option_id);return e.jsxs("label",{className:`flex items-center justify-between p-4 border-2 rounded-lg cursor-pointer transition-all ${U?"border-orange-600 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:A.type==="single"?"radio":"checkbox",name:A.group_id,checked:U,onChange:()=>D(A.group_id,A.name,A.type,L),className:`w-5 h-5 text-orange-600 border-gray-300 focus:ring-orange-500 focus:ring-2 transition-all ${A.type==="single"?"":"rounded"}`}),e.jsx("span",{className:"text-gray-900 font-medium",children:L.name})]}),Number(L.additional_price)>0&&e.jsxs("span",{className:"text-gray-600 font-medium",children:["+",Number(L.additional_price).toFixed(2)]})]},L.option_id)})})]},A.group_id)),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quantity"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>S(-1),disabled:g.quantity<=1,className:"w-10 h-10 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Decrease quantity",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M20 12H4"})})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 w-12 text-center",children:g.quantity}),e.jsx("button",{onClick:()=>S(1),className:"w-10 h-10 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-colors","aria-label":"Increase quantity",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M12 4v16m8-8H4"})})})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-3xl font-bold text-orange-600",children:["",(Number(g.total_price)*g.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:z,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:M.isPending,className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add to Cart"})]})]})]})})]})]})},b_=()=>{const t=je(),s=Fe(),r=X(S=>S.authentication_state.auth_token),[a,n]=x.useState(""),[i,l]=x.useState(null),[o,c]=x.useState({}),d="https://123salama-lama-food-truck.launchpulse.ai",{data:u,isLoading:m,error:b,refetch:p}=le({queryKey:["cart"],queryFn:async()=>(await W.get(`${d}/api/cart`,{headers:r?{Authorization:`Bearer ${r}`}:{}})).data,staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),g=ie({mutationFn:async({item_id:S,quantity:E})=>(c($=>({...$,[S]:!0})),(await W.put(`${d}/api/cart/items/${S}`,{quantity:E},{headers:r?{Authorization:`Bearer ${r}`}:{}})).data),onSuccess:()=>{s.invalidateQueries({queryKey:["cart"]})},onError:S=>{var E,w;console.error("Failed to update item quantity:",S),alert(((w=(E=S.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to update quantity. Please try again.")},onSettled:(S,E,w)=>{c($=>({...$,[w.item_id]:!1}))}}),h=ie({mutationFn:async S=>(await W.delete(`${d}/api/cart/items/${S}`,{headers:r?{Authorization:`Bearer ${r}`}:{}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["cart"]})},onError:S=>{var E,w;console.error("Failed to remove item:",S),alert(((w=(E=S.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to remove item. Please try again.")}}),N=ie({mutationFn:async S=>(await W.post(`${d}/api/discounts/validate`,S,{headers:r?{Authorization:`Bearer ${r}`}:{}})).data,onSuccess:S=>{S.valid?(l(null),n(""),s.invalidateQueries({queryKey:["cart"]})):l(S.message||"Invalid discount code")},onError:S=>{var E,w;l(((w=(E=S.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to validate discount code")}}),j=ie({mutationFn:async()=>(await W.post(`${d}/api/checkout/validate`,{order_type:"collection"},{headers:r?{Authorization:`Bearer ${r}`}:{}})).data,onSuccess:S=>{var E;if(S.valid)t("/checkout/order-type");else{const w=((E=S.errors)==null?void 0:E.map($=>$.message).join(", "))||"Cart validation failed";alert(w)}},onError:S=>{var E,w;alert(((w=(E=S.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to validate cart. Please try again.")}}),y=(S,E)=>{E<1||g.mutate({item_id:S,quantity:E})},f=(S,E)=>{confirm(`Remove ${E} from cart?`)&&h.mutate(S)},k=()=>{if(!a.trim()){l("Please enter a discount code");return}const S=Number((u==null?void 0:u.subtotal)||0);N.mutate({code:a.trim().toUpperCase(),order_type:"collection",order_value:S})},T=()=>{n(""),l(null),s.invalidateQueries({queryKey:["cart"]})},M=()=>{j.mutate()},P=S=>{n(S.target.value),l(null)},_=S=>{if(!S||Object.keys(S).length===0)return null;const E=Object.entries(S).map(([w,$])=>typeof $=="object"&&$!==null?`${w}: ${$.name||$}${$.additional_price?` (+${Number($.additional_price||0).toFixed(2)})`:""}`:`${w}: ${$}`);return e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:E.join(", ")})};if(m)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"h-12 w-12 text-orange-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your cart..."})]})})});if(b)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ce,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Failed to Load Cart"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't load your cart. Please try again."}),e.jsx("button",{onClick:()=>p(),className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors duration-200",children:"Retry"})]})})});const F=(u==null?void 0:u.items)||[];if(F.length===0)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(Dt,{className:"h-24 w-24 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Add some delicious items from our menu to get started!"}),e.jsxs(H,{to:"/menu",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:["Browse Menu",e.jsx(ji,{className:"ml-2 h-5 w-5"})]})]})})});const v=Number((u==null?void 0:u.subtotal)||0),O=Number((u==null?void 0:u.discount_amount)||0),R=Number((u==null?void 0:u.delivery_fee)||0),C=Number((u==null?void 0:u.tax_amount)||0),z=Number((u==null?void 0:u.total)||0),D=(u==null?void 0:u.discount_code)&&O>0;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Shopping Cart"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Review your items before checkout"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[F.map(S=>{const E=Number(S.unit_price||0),w=Number(S.line_total||0),$=o[S.item_id]||!1;return e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 transition-all duration-200 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.item_name}),_(S.selected_customizations),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["",E.toFixed(2)," each"]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>y(S.item_id,S.quantity-1),disabled:S.quantity<=1||$,className:"w-10 h-10 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-700 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Decrease quantity",children:$?e.jsx(Ae,{className:"h-4 w-4 animate-spin"}):e.jsx(I1,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",min:"1",value:S.quantity,onChange:B=>{const I=parseInt(B.target.value,10);!isNaN(I)&&I>0&&y(S.item_id,I)},disabled:$,className:"w-16 h-10 text-center border-2 border-gray-300 rounded-lg font-medium text-gray-900 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 disabled:opacity-50","aria-label":"Item quantity"}),e.jsx("button",{onClick:()=>y(S.item_id,S.quantity+1),disabled:$,className:"w-10 h-10 rounded-lg border-2 border-gray-300 flex items-center justify-center text-gray-700 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Increase quantity",children:$?e.jsx(Ae,{className:"h-4 w-4 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col items-end space-y-3",children:[e.jsx("button",{onClick:()=>f(S.item_id,S.item_name),disabled:h.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-2 rounded-lg transition-all duration-200 disabled:opacity-50","aria-label":"Remove item",children:e.jsx(It,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",w.toFixed(2)]})})]})]})},S.item_id)}),e.jsx("div",{className:"pt-4",children:e.jsxs(H,{to:"/menu",className:"inline-flex items-center text-orange-600 hover:text-orange-700 font-medium transition-colors duration-200",children:[e.jsx(ji,{className:"mr-2 h-5 w-5 rotate-180"}),"Continue Shopping"]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[e.jsx("label",{htmlFor:"discount-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Code"}),D?e.jsxs("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(jy,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-900",children:u.discount_code})]}),e.jsx("button",{onClick:T,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Remove"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{id:"discount-code",type:"text",value:a,onChange:P,placeholder:"Enter code",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200"}),e.jsx("button",{onClick:k,disabled:N.isPending||!a.trim(),className:"px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:N.isPending?e.jsx(Ae,{className:"h-5 w-5 animate-spin"}):"Apply"})]}),i&&e.jsxs("div",{className:"flex items-start text-sm text-red-600 bg-red-50 px-3 py-2 rounded-md",children:[e.jsx(ce,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:i})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["",v.toFixed(2)]})]}),D&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",O.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:R>0?`${R.toFixed(2)}`:"Free"})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsxs("span",{className:"font-medium",children:["",C.toFixed(2)]})]}),e.jsx("div",{className:"pt-3 border-t-2 border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["",z.toFixed(2)]})]})})]}),e.jsx("button",{onClick:M,disabled:j.isPending,className:"w-full py-4 bg-orange-600 text-white font-bold text-lg rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-5 w-5 animate-spin mr-2"}),"Validating..."]}):e.jsxs(e.Fragment,{children:["Proceed to Checkout",e.jsx(ji,{className:"ml-2 h-5 w-5"})]})}),e.jsx("p",{className:"mt-4 text-xs text-center text-gray-500",children:"Secure checkout powered by SumUp"})]})})]})]})})})},Kc="https://123salama-lama-food-truck.launchpulse.ai",j_=()=>{const t=je(),s=Fe(),r=X(E=>E.authentication_state.auth_token),a=X(E=>E.cart_state.items),n=X(E=>E.cart_state.subtotal),i=X(E=>E.business_settings.delivery_enabled),l=X(E=>E.update_cart_fees),[o,c]=x.useState(null),[d,u]=x.useState(null),[m,b]=x.useState(null),[p,g]=x.useState([]),[h,N]=x.useState({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:null}),[j,y]=x.useState({is_open:!1,address_line1:"",address_line2:"",city:"Dublin",postal_code:"",delivery_instructions:"",label:""}),[f,k]=x.useState({time_slots_loading:!1,addresses_loading:!1,delivery_validating:!1}),[T,M]=x.useState(null),{data:P}=le({queryKey:["addresses"],queryFn:async()=>(await W.get(`${Kc}/api/addresses`,{headers:{Authorization:`Bearer ${r}`}})).data,enabled:!!r&&o==="delivery",staleTime:6e4,refetchOnWindowFocus:!1,select:E=>E.addresses||[]}),_=P||[],F=ie({mutationFn:async E=>(await W.post(`${Kc}/api/admin/delivery/validate-address`,E,{headers:{Authorization:`Bearer ${r}`}})).data,onMutate:()=>{k(E=>({...E,delivery_validating:!0})),M(null)},onSuccess:E=>{N({is_valid:E.valid,delivery_fee:Number(E.delivery_fee||0),estimated_time:E.estimated_delivery_time?`${E.estimated_delivery_time} minutes`:null,zone_name:E.zone_id||null,error_message:E.valid?null:"Delivery not available to this address"}),k(w=>({...w,delivery_validating:!1}))},onError:E=>{var w,$;M((($=(w=E.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to validate delivery address"),N({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:"Failed to validate delivery address"}),k(B=>({...B,delivery_validating:!1}))}}),v=ie({mutationFn:async E=>(await W.post(`${Kc}/api/addresses`,E,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:E=>{s.invalidateQueries({queryKey:["addresses"]}),y({is_open:!1,address_line1:"",address_line2:"",city:"Dublin",postal_code:"",delivery_instructions:"",label:""}),b(E.address_id),F.mutate({address:E.address_line1,postal_code:E.postal_code})},onError:E=>{var w,$;M((($=(w=E.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to create address")}}),O=()=>{k(q=>({...q,time_slots_loading:!0}));const E=new Date,w=45,$=new Date(E.getTime()+w*6e4),B=[],I=2;for(let q=0;q<I;q++){const A=new Date(E);A.setDate(A.getDate()+q),A.setMinutes(0,0,0);const L=11,U=20;for(let Y=L;Y<U;Y++)for(let Q=0;Q<60;Q+=15){const K=new Date(A);K.setHours(Y,Q,0,0);const G=K.getTime()>$.getTime();B.push({slot_time:K.toISOString(),is_available:G,capacity_remaining:G?Math.floor(Math.random()*5)+1:0})}}g(B),k(q=>({...q,time_slots_loading:!1}))},R=E=>{const w=new Date(E),$=new Date,B=w.toDateString()===$.toDateString(),I=w.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit",hour12:!1});return B?`Today ${I}`:`${w.toLocaleDateString("en-IE",{weekday:"short",month:"short",day:"numeric"})} ${I}`},C=E=>{c(E),M(null),E==="collection"?(O(),b(null),N({is_valid:!1,delivery_fee:0,estimated_time:null,zone_name:null,error_message:null})):(u(null),g([]))},z=E=>{b(E.address_id),M(null),F.mutate({address:E.address_line1,postal_code:E.postal_code})},D=E=>{if(E.preventDefault(),M(null),!j.label||!j.address_line1||!j.postal_code){M("Please fill in all required address fields");return}v.mutate({label:j.label,address_line1:j.address_line1,address_line2:j.address_line2||null,city:j.city,postal_code:j.postal_code,delivery_instructions:j.delivery_instructions||null,is_default:!1})},S=()=>{if(M(null),!o){M("Please select an order type");return}if(o==="collection"&&!d){M("Please select a collection time slot");return}if(o==="delivery"){if(!m){M("Please select a delivery address");return}if(!h.is_valid){M(h.error_message||"Delivery address is not valid");return}}l(o==="delivery"?h.delivery_fee:0,0),t("/checkout/contact")};return x.useEffect(()=>{a.length===0&&t("/cart")},[a,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white font-semibold",children:"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Order Type"})]}),e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Contact"})]}),e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Payment"})]}),e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-600 font-semibold",children:"4"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8 sm:px-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Choose Order Type"}),e.jsx("p",{className:"mt-2 text-blue-100",children:"Select collection or delivery for your order"})]}),T&&e.jsxs("div",{className:"mx-6 mt-6 sm:mx-8 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:T})]}),e.jsxs("div",{className:"px-6 py-8 sm:px-8",children:[e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Order Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>C("collection"),className:`relative rounded-xl border-2 p-6 flex flex-col items-start transition-all duration-200 ${o==="collection"?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[e.jsx(Le,{className:`w-8 h-8 mb-3 ${o==="collection"?"text-blue-600":"text-gray-400"}`}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Collection"}),e.jsx("span",{className:"mt-1 text-sm text-gray-600",children:"Pick up your order from our food truck"}),o==="collection"&&e.jsx(qe,{className:"absolute top-4 right-4 w-6 h-6 text-blue-600"})]}),e.jsxs("button",{type:"button",onClick:()=>C("delivery"),disabled:!i,className:`relative rounded-xl border-2 p-6 flex flex-col items-start transition-all duration-200 ${o==="delivery"?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":i?"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md":"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60"}`,children:[e.jsx(Ge,{className:`w-8 h-8 mb-3 ${o==="delivery"?"text-blue-600":i?"text-gray-400":"text-gray-300"}`}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Delivery"}),e.jsx("span",{className:"mt-1 text-sm text-gray-600",children:i?"We'll deliver to your address":"Currently unavailable"}),o==="delivery"&&e.jsx(qe,{className:"absolute top-4 right-4 w-6 h-6 text-blue-600"})]})]})]}),o==="collection"&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Collection Time"}),f.time_slots_loading?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:p.map((E,w)=>e.jsx("button",{type:"button",onClick:()=>{E.is_available&&(u(E.slot_time),M(null))},disabled:!E.is_available,className:`px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${d===E.slot_time?"bg-blue-600 text-white shadow-lg ring-2 ring-blue-600 ring-offset-2":E.is_available?"bg-white border-2 border-gray-200 text-gray-900 hover:border-blue-300 hover:shadow-md":"bg-gray-100 text-gray-400 cursor-not-allowed border-2 border-gray-200"}`,children:R(E.slot_time)},w))})]}),o==="delivery"&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Delivery Address"}),e.jsxs("button",{type:"button",onClick:()=>y(E=>({...E,is_open:!0})),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}),_.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No saved addresses yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add an address to enable delivery"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:_.map(E=>e.jsx("button",{type:"button",onClick:()=>z(E),className:`relative rounded-xl border-2 p-6 text-left transition-all duration-200 ${m===E.address_id?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:E.label}),E.is_default&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Default"})]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[E.address_line1,E.address_line2&&`, ${E.address_line2}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[E.city,", ",E.postal_code]})]}),m===E.address_id&&e.jsx(qe,{className:"w-6 h-6 text-blue-600 flex-shrink-0 ml-4"})]})},E.address_id))}),m&&f.delivery_validating&&e.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg border border-gray-200 p-4 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Validating delivery address..."})]}),m&&!f.delivery_validating&&h.is_valid&&e.jsx("div",{className:"mt-4 bg-green-50 rounded-lg border border-green-200 p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(qe,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Delivery Available"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm text-green-700",children:["Delivery Fee: ",e.jsxs("span",{className:"font-semibold",children:["",Number(h.delivery_fee).toFixed(2)]})]}),h.estimated_time&&e.jsxs("p",{className:"text-sm text-green-700",children:["Estimated Time: ",e.jsx("span",{className:"font-semibold",children:h.estimated_time})]})]})]})]})}),m&&!f.delivery_validating&&!h.is_valid&&h.error_message&&e.jsxs("div",{className:"mt-4 bg-red-50 rounded-lg border border-red-200 p-4 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:h.error_message})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-6 sm:px-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(n).toFixed(2)]})]}),o==="delivery"&&h.is_valid&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fee"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(h.delivery_fee).toFixed(2)]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Current Total"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:["",(Number(n)+(o==="delivery"&&h.is_valid?Number(h.delivery_fee):0)).toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tax will be calculated at checkout"})]})]})]}),e.jsxs("div",{className:"bg-white px-6 py-6 sm:px-8 border-t border-gray-200 flex justify-between",children:[e.jsx(H,{to:"/cart",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors duration-200",children:"Back to Cart"}),e.jsxs("button",{type:"button",onClick:S,disabled:!o||o==="collection"&&!d||o==="delivery"&&(!m||!h.is_valid),className:"inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:["Continue to Contact Info",e.jsx($e,{className:"w-5 h-5 ml-2"})]})]})]})]})}),j.is_open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Delivery Address"}),e.jsx("button",{type:"button",onClick:()=>y(E=>({...E,is_open:!1})),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_e,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:D,className:"px-6 py-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-700 mb-1",children:["Label ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"label",value:j.label,onChange:E=>y(w=>({...w,label:E.target.value})),placeholder:"e.g., Home, Work",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address_line1",className:"block text-sm font-medium text-gray-700 mb-1",children:["Address Line 1 ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"address_line1",value:j.address_line1,onChange:E=>y(w=>({...w,address_line1:E.target.value})),placeholder:"Street address",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address_line2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),e.jsx("input",{type:"text",id:"address_line2",value:j.address_line2,onChange:E=>y(w=>({...w,address_line2:E.target.value})),placeholder:"Apartment, suite, etc.",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"city",value:j.city,onChange:E=>y(w=>({...w,city:E.target.value})),required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:["Eircode ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"postal_code",value:j.postal_code,onChange:E=>y(w=>({...w,postal_code:E.target.value})),placeholder:"D01 A123",required:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_instructions",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),e.jsx("textarea",{id:"delivery_instructions",value:j.delivery_instructions,onChange:E=>y(w=>({...w,delivery_instructions:E.target.value})),placeholder:"Any special instructions for delivery",rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>y(E=>({...E,is_open:!1})),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Address"})]})]})]})})]})},v_=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),N_=t=>{const s=t.replace(/[\s\-()]/g,"");return/^\+?\d{10,15}$/.test(s)},Yc=t=>!t||t.trim().length===0?"Full name is required":t.trim().length<2?"Name must be at least 2 characters":t.trim().length>100?"Name must not exceed 100 characters":null,Gc=t=>!t||t.trim().length===0?"Email address is required":v_(t)?t.length>255?"Email must not exceed 255 characters":null:"Please enter a valid email address",Xc=t=>{if(!t||t.trim().length===0)return"Phone number is required";const s=t.replace(/[\s\-()]/g,"");return s.length<10?"Phone number must be at least 10 digits":s.length>20?"Phone number must not exceed 20 characters":N_(t)?null:"Please enter a valid phone number"},w_=()=>{const t=je(),s=X(h=>h.authentication_state.current_user),r=X(h=>h.authentication_state.authentication_status.is_authenticated),[a,n]=x.useState({customer_name:"",customer_email:"",customer_phone:""}),[i,l]=x.useState({is_valid:!1,errors:{customer_name:null,customer_email:null,customer_phone:null}}),[o,c]=x.useState(!1),[d,u]=x.useState(!1);x.useEffect(()=>{if(r&&s){const h={customer_name:`${s.first_name} ${s.last_name}`.trim(),customer_email:s.email,customer_phone:s.phone};n(h);const N=Yc(h.customer_name),j=Gc(h.customer_email),y=Xc(h.customer_phone);l({is_valid:!N&&!j&&!y,errors:{customer_name:N,customer_email:j,customer_phone:y}})}},[r,s]);const m=(h,N)=>{n(j=>({...j,[h]:N})),l(j=>({...j,errors:{...j.errors,[h]:null}})),o||c(!0)},b=h=>{let N=null;switch(h){case"customer_name":N=Yc(a.customer_name);break;case"customer_email":N=Gc(a.customer_email);break;case"customer_phone":N=Xc(a.customer_phone);break}l(j=>({...j,errors:{...j.errors,[h]:N}}))},p=()=>{const h=Yc(a.customer_name),N=Gc(a.customer_email),j=Xc(a.customer_phone),y=!h&&!N&&!j;return l({is_valid:y,errors:{customer_name:h,customer_email:N,customer_phone:j}}),y},g=async()=>{if(u(!0),!p()){u(!1);const N=document.querySelector('[aria-invalid="true"]');N&&N.scrollIntoView({behavior:"smooth",block:"center"});return}try{sessionStorage.setItem("checkout_contact_info",JSON.stringify(a)),t("/checkout/payment")}catch(N){console.error("Error storing contact info:",N),u(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Contact Information"}),e.jsx("p",{className:"mt-3 text-base text-gray-600 leading-relaxed",children:"We'll use this information to contact you about your order"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Order Type"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-blue-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"2"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-blue-600",children:"Contact"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"3"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Payment"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"4"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 lg:p-8",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"customer_name",name:"customer_name",value:a.customer_name,onChange:h=>m("customer_name",h.target.value),onBlur:()=>b("customer_name"),"aria-invalid":!!i.errors.customer_name,"aria-describedby":i.errors.customer_name?"customer_name_error":void 0,placeholder:"Enter your full name",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_name&&e.jsxs("p",{id:"customer_name_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"customer_email",name:"customer_email",value:a.customer_email,onChange:h=>m("customer_email",h.target.value),onBlur:()=>b("customer_email"),"aria-invalid":!!i.errors.customer_email,"aria-describedby":i.errors.customer_email?"customer_email_error":void 0,placeholder:"your.email@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_email&&e.jsxs("p",{id:"customer_email_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_email]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"We'll send order updates to this email address"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",id:"customer_phone",name:"customer_phone",value:a.customer_phone,onChange:h=>m("customer_phone",h.target.value),onBlur:()=>b("customer_phone"),"aria-invalid":!!i.errors.customer_phone,"aria-describedby":i.errors.customer_phone?"customer_phone_error":void 0,placeholder:"+353 1 234 5678",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 
                      ${i.errors.customer_phone?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} 
                      text-base text-gray-900 placeholder-gray-400 
                      focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`,disabled:d}),i.errors.customer_phone&&e.jsxs("p",{id:"customer_phone_error",className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),i.errors.customer_phone]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"For delivery coordination and order updates"})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Your contact information is secure"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"We'll only use this to communicate about your order. We never share your details with third parties."})]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 lg:px-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs(H,{to:"/checkout/order-type",className:`inline-flex items-center justify-center px-6 py-3 rounded-lg 
                    bg-gray-100 hover:bg-gray-200 text-gray-900 
                    font-medium text-base transition-all duration-200 
                    border border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-200`,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Order Type"]}),e.jsx("button",{type:"button",onClick:g,disabled:d,className:`inline-flex items-center justify-center px-6 py-3 rounded-lg 
                    bg-blue-600 hover:bg-blue-700 text-white 
                    font-medium text-base transition-all duration-200 
                    shadow-lg hover:shadow-xl 
                    focus:outline-none focus:ring-4 focus:ring-blue-100 
                    disabled:opacity-50 disabled:cursor-not-allowed`,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Continue to Payment",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",e.jsx(H,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Contact our support team"})]})})]})})})},__=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",{headers:{Authorization:`Bearer ${t}`}})).data.payment_methods||[],k_=async(t,s)=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,C_=()=>{const t=je(),s=X(A=>A.authentication_state.auth_token),r=X(A=>A.authentication_state.current_user),a=X(A=>A.cart_state.total),n=X(A=>A.cart_state.subtotal),i=X(A=>A.cart_state.discount_amount),l=X(A=>A.cart_state.delivery_fee),o=X(A=>A.cart_state.tax_amount),c=X(A=>A.cart_state.items),[d,u]=x.useState(null),[m,b]=x.useState(""),[p,g]=x.useState("card"),[h,N]=x.useState(!1),[j,y]=x.useState(!1),[f,k]=x.useState({sumup_token:"",card_type:"",last_four_digits:"",expiry_month:"",expiry_year:"",cardholder_name:""}),[T,M]=x.useState([]),[P,_]=x.useState(!1),{data:F=[],isLoading:v}=le({queryKey:["payment-methods",r==null?void 0:r.user_id],queryFn:()=>__(s),enabled:!!s&&!!r,staleTime:5*60*1e3}),O=ie({mutationFn:A=>k_(s,A),onSuccess:A=>{u(A.payment_method_id),N(!1),k({sumup_token:"",card_type:"",last_four_digits:"",expiry_month:"",expiry_year:"",cardholder_name:""}),b(""),M([])},onError:A=>{var L,U;M([{field:"general",message:((U=(L=A.response)==null?void 0:L.data)==null?void 0:U.message)||"Failed to save payment method"}])}}),R=l>0?"delivery":"collection";x.useEffect(()=>{if(F.length>0&&!d){const A=F.find(L=>L.is_default);A&&u(A.payment_method_id)}},[F,d]);const C=A=>/^\d{3,4}$/.test(A),z=()=>{const A=[];return p==="card"&&(!d&&!h&&A.push({field:"payment_method",message:"Please select a payment method or add a new card"}),d&&!h&&(!m||!C(m))&&A.push({field:"cvv",message:"Please enter a valid CVV (3-4 digits)"}),h&&(f.sumup_token||A.push({field:"new_card",message:"Please complete the card information"}))),M(A),A.length===0},D=A=>{u(A),N(!1),g("card"),b(""),M([])},S=()=>{N(!0),u(null),g("card"),b(""),M([])},E=()=>{g("cash"),u(null),N(!1),b(""),M([])},w=A=>{const L=A.target.value.replace(/\D/g,"").slice(0,4);b(L),M(U=>U.filter(Y=>Y.field!=="cvv"))},$=async()=>{_(!0),M([]);try{await new Promise(U=>setTimeout(U,1500));const L={sumup_token:`sumup_tok_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,card_type:"Visa",last_four_digits:"4242",expiry_month:"12",expiry_year:"2025",cardholder_name:"John Doe"};k(L),j?O.mutate({...L,is_default:F.length===0}):u("new_card_temp")}catch{M([{field:"new_card",message:"Failed to process card details. Please try again."}])}finally{_(!1)}},B=()=>{z()&&t("/checkout/review")},I=()=>{t("/checkout/contact")},q=A=>{var L;return(L=T.find(U=>U.field===A))==null?void 0:L.message};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-600 text-white text-sm font-semibold",children:e.jsx(we,{className:"h-5 w-5"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Order Type"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-green-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-600 text-white text-sm font-semibold",children:e.jsx(we,{className:"h-5 w-5"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Contact"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-green-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 text-white text-sm font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-blue-600",children:"Payment"})]}),e.jsx("div",{className:"h-0.5 w-12 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-300 text-gray-600 text-sm font-semibold",children:"4"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Review"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Payment Method"}),e.jsx("p",{className:"mt-2 text-blue-100",children:"Select your payment method to complete your order"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[q("general")&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:q("general")})})]}),v&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading payment methods..."})]}),!v&&e.jsxs(e.Fragment,{children:[F.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Saved Payment Methods"})]}),F.map(A=>e.jsxs("div",{onClick:()=>D(A.payment_method_id),className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${d===A.payment_method_id&&!h?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:d===A.payment_method_id&&!h,onChange:()=>D(A.payment_method_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ls,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[A.card_type,"  ",A.last_four_digits]}),A.is_default&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Expires ",A.expiry_month,"/",A.expiry_year]})]})]}),d===A.payment_method_id&&!h&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("label",{htmlFor:"cvv",className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV / Security Code *"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",id:"cvv",value:m,onChange:w,maxLength:4,placeholder:"123",className:`block w-24 px-4 py-2 border-2 rounded-lg focus:ring-4 focus:ring-blue-100 focus:outline-none transition-all ${q("cvv")?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),e.jsx(bs,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"3-4 digits on back of card"})]}),q("cvv")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:q("cvv")})]})]},A.payment_method_id))]}),e.jsxs("div",{className:"space-y-4",children:[F.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),e.jsxs("div",{onClick:S,className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${h?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:h,onChange:S,className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx(ls,{className:"h-6 w-6 text-gray-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Add New Card"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay with a new credit or debit card"})]})]}),h&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bs,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Secure Payment Processing"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Your card details are encrypted and processed securely through SumUp. We never store your full card number or CVV."})]})]})}),e.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ls,{className:"h-12 w-12 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"SumUp Payment Form"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Secure card entry would appear here"})]}),!f.sumup_token&&e.jsx("button",{type:"button",onClick:$,disabled:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Processing..."]}):e.jsx(e.Fragment,{children:"Demo: Enter Card Details"})}),f.sumup_token&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Card details validated"})]})})]})}),e.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"save_card",checked:j,onChange:A=>y(A.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),e.jsx("label",{htmlFor:"save_card",className:"text-sm text-gray-700",children:"Save this card for future orders (secure and encrypted)"})]}),q("new_card")&&e.jsx("p",{className:"text-sm text-red-600",children:q("new_card")})]})]})]}),R==="collection"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),e.jsx("div",{onClick:E,className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${p==="cash"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"radio",name:"payment_method",checked:p==="cash",onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Pay with Cash at Pickup"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay when you collect your order"})]})]})})]}),q("payment_method")&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-600",children:q("payment_method")})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:I,className:"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all",children:" Back"}),e.jsx("button",{type:"button",onClick:B,disabled:v||O.isPending,className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),"Saving..."]}):e.jsx(e.Fragment,{children:"Continue to Review "})})]})]})]}),e.jsx("div",{className:"mt-6 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bs,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Secure Payment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your payment information is encrypted and secure. We use industry-standard security measures to protect your data."})]})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden sticky top-8",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Order Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"space-y-3",children:c.map(A=>e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[A.quantity,"x ",A.item_name]}),A.customizations&&A.customizations.length>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.customizations.map(L=>L.option_name).join(", ")})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 ml-4",children:["",Number(A.line_total||0).toFixed(2)]})]},A.item_id))}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(n||0).toFixed(2)]})]}),i>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Discount"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-",Number(i||0).toFixed(2)]})]}),l>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fee"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(l||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(o||0).toFixed(2)]})]})]}),e.jsx("div",{className:"border-t-2 border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["",Number(a||0).toFixed(2)]})]})})]})]})})]})]})})})},S_=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.random()*16|0;return(t==="x"?s:s&3|8).toString(16)}),Jr=t=>`${Number(t||0).toFixed(2)}`,P_=t=>{if(!t)return"Not specified";try{return new Date(t).toLocaleString("en-IE",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},E_=()=>{const t=je(),s="https://123salama-lama-food-truck.launchpulse.ai",r=X(_=>_.authentication_state.auth_token),a=X(_=>_.cart_state.items),n=X(_=>_.cart_state.discount_code),i=X(_=>_.clear_cart),[l,o]=x.useState({order_type:"collection",collection_time_slot:null,delivery_address_snapshot:null,customer_info:{customer_name:"",customer_email:"",customer_phone:""},payment_info:{payment_method_id:"",payment_method_type:"",last_four_digits:"",card_type:""},items:[],special_instructions:""}),[c,d]=x.useState({subtotal:0,discount_code:null,discount_amount:0,delivery_fee:null,tax_amount:0,total_amount:0}),[u,m]=x.useState(!1),[b,p]=x.useState(null),[g]=x.useState(S_());x.useEffect(()=>{const _=sessionStorage.getItem("checkout_order_type"),F=sessionStorage.getItem("checkout_collection_time_slot"),v=sessionStorage.getItem("checkout_delivery_address_data"),O=sessionStorage.getItem("checkout_customer_name"),R=sessionStorage.getItem("checkout_customer_email"),C=sessionStorage.getItem("checkout_customer_phone"),z=sessionStorage.getItem("checkout_payment_method_id"),D=sessionStorage.getItem("checkout_payment_method_type"),S=sessionStorage.getItem("checkout_last_four_digits"),E=sessionStorage.getItem("checkout_card_type"),w=sessionStorage.getItem("checkout_special_instructions");if(!_||!O||!z){t("/checkout/order-type");return}let $=null;if(v)try{$=JSON.parse(v)}catch(B){console.error("Failed to parse delivery address:",B)}o({order_type:_,collection_time_slot:F||null,delivery_address_snapshot:$,customer_info:{customer_name:O||"",customer_email:R||"",customer_phone:C||""},payment_info:{payment_method_id:z||"",payment_method_type:D||"card",last_four_digits:S||"",card_type:E||""},items:a,special_instructions:w||""})},[a,t]);const{data:h,isLoading:N}=le({queryKey:["calculate-checkout-totals",l.order_type],queryFn:async()=>{const _=sessionStorage.getItem("checkout_delivery_address_id");return(await W.post(`${s}/api/checkout/calculate`,{order_type:l.order_type,delivery_address_id:_||null,discount_code:n},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data},enabled:!!l.order_type&&!!r,staleTime:1/0,retry:1});x.useEffect(()=>{h&&d({subtotal:Number(h.subtotal||0),discount_code:h.discount_code,discount_amount:Number(h.discount_amount||0),delivery_fee:h.delivery_fee!==null?Number(h.delivery_fee):null,tax_amount:Number(h.tax_amount||0),total_amount:Number(h.total_amount||0)})},[h]);const j=ie({mutationFn:async()=>{const _=sessionStorage.getItem("checkout_delivery_address_id");return(await W.post(`${s}/api/checkout/validate`,{order_type:l.order_type,collection_time_slot:l.collection_time_slot,delivery_address_id:_||null,discount_code:n},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data}}),y=ie({mutationFn:async _=>(await W.post(`${s}/api/checkout/order`,_,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,onSuccess:_=>{i(),sessionStorage.removeItem("checkout_order_type"),sessionStorage.removeItem("checkout_collection_time_slot"),sessionStorage.removeItem("checkout_delivery_address_id"),sessionStorage.removeItem("checkout_delivery_address_data"),sessionStorage.removeItem("checkout_customer_name"),sessionStorage.removeItem("checkout_customer_email"),sessionStorage.removeItem("checkout_customer_phone"),sessionStorage.removeItem("checkout_payment_method_id"),sessionStorage.removeItem("checkout_payment_method_type"),sessionStorage.removeItem("checkout_last_four_digits"),sessionStorage.removeItem("checkout_card_type"),sessionStorage.removeItem("checkout_special_instructions"),t("/order/confirmation",{state:{order_id:_.order_id,order_number:_.order_number,status:_.status,total_amount:_.total_amount,estimated_ready_time:_.estimated_ready_time,loyalty_points_awarded:_.loyalty_points_awarded,invoice_url:_.invoice_url}})},onError:_=>{var v,O;const F=((O=(v=_.response)==null?void 0:v.data)==null?void 0:O.message)||_.message||"Failed to place order. Please try again.";p(F)}}),f=async()=>{var _;if(p(null),!u){p("Please accept the Terms & Conditions to continue.");return}try{const F=await j.mutateAsync();if(!F.valid){const C=((_=F.errors)==null?void 0:_.map(z=>z.message).join(", "))||"Order validation failed";p(C);return}const v=sessionStorage.getItem("checkout_delivery_address_id"),O=sessionStorage.getItem("checkout_cvv"),R={order_type:l.order_type,collection_time_slot:l.collection_time_slot,delivery_address_id:v||null,discount_code:n,special_instructions:l.special_instructions||null,customer_name:l.customer_info.customer_name,customer_email:l.customer_info.customer_email,customer_phone:l.customer_info.customer_phone,payment_method_id:l.payment_info.payment_method_id,cvv:O||void 0,idempotency_key:g};await y.mutateAsync(R)}catch(F){console.error("Order placement error:",F)}},k=()=>{t("/checkout/order-type")},T=()=>{t("/checkout/contact")},M=()=>{t("/checkout/payment")},P=y.isPending||j.isPending;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Checkout Progress"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Step 4 of 4"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-300",style:{width:"100%"}})})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Review Your Order"}),e.jsx("p",{className:"text-gray-600",children:"Please review your order details before completing your purchase"})]}),b&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-600 p-4 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"Order Placement Error"}),e.jsx("p",{className:"text-sm text-red-700",children:b})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:l.order_type==="collection"?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-5 w-5 text-orange-600 mr-2"}),"Collection Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-5 w-5 text-orange-600 mr-2"}),"Delivery Details"]})}),e.jsxs("button",{onClick:k,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Order Type"}),e.jsx("p",{className:"text-base font-medium text-gray-900 capitalize",children:l.order_type})]}),l.order_type==="collection"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Collection Time"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:P_(l.collection_time_slot)})]}),l.order_type==="delivery"&&l.delivery_address_snapshot&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Delivery Address"}),e.jsxs("div",{className:"text-base text-gray-900",children:[e.jsx("p",{className:"font-medium",children:l.delivery_address_snapshot.label}),e.jsx("p",{children:l.delivery_address_snapshot.address_line1}),l.delivery_address_snapshot.address_line2&&e.jsx("p",{children:l.delivery_address_snapshot.address_line2}),e.jsxs("p",{children:[l.delivery_address_snapshot.city,", ",l.delivery_address_snapshot.postal_code]}),l.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",l.delivery_address_snapshot.delivery_instructions]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(At,{className:"h-5 w-5 text-orange-600 mr-2"}),"Contact Information"]}),e.jsxs("button",{onClick:T,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Name"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:l.customer_info.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:l.customer_info.customer_email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:l.customer_info.customer_phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(ls,{className:"h-5 w-5 text-orange-600 mr-2"}),"Payment Method"]}),e.jsxs("button",{onClick:M,className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center transition-colors",children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-3 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Card Type"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:l.payment_info.card_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ending in"}),e.jsxs("p",{className:"text-base font-medium text-gray-900",children:[" ",l.payment_info.last_four_digits]})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Dt,{className:"h-5 w-5 text-orange-600 mr-2"}),"Order Items (",l.items.length,")"]}),e.jsx("div",{className:"space-y-4",children:l.items.map((_,F)=>e.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:_.item_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",_.quantity]})]}),e.jsx("p",{className:"font-semibold text-gray-900",children:Jr(_.line_total)})]}),_.customizations&&_.customizations.length>0&&e.jsxs("div",{className:"mt-2 pl-4 border-l-2 border-orange-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Customizations:"}),_.customizations.map((v,O)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[v.group_name,": ",v.option_name,v.additional_price>0&&e.jsxs("span",{className:"text-orange-600 ml-1",children:["+",Jr(v.additional_price)]})]},O))]})]},`${_.item_id}-${F}`))}),l.special_instructions&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Special Instructions:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:l.special_instructions})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ae,{className:"h-8 w-8 text-orange-600 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:Jr(c.subtotal)})]}),c.discount_code&&e.jsxs("div",{className:"flex justify-between text-green-700 bg-green-50 px-2 py-1 rounded",children:[e.jsxs("span",{className:"text-sm",children:["Discount (",c.discount_code,")"]}),e.jsxs("span",{className:"font-medium text-sm",children:["-",Jr(c.discount_amount)]})]}),c.delivery_fee!==null&&c.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:Jr(c.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsx("span",{className:"font-medium",children:Jr(c.tax_amount)})]}),e.jsx("div",{className:"border-t-2 border-gray-300 pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:Jr(c.total_amount)})]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("label",{className:"flex items-start cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:_=>{m(_.target.checked),_.target.checked&&p(null)},className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-2 focus:ring-orange-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:["I agree to the"," ",e.jsx(H,{to:"/terms",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium underline",children:"Terms & Conditions"})," ","and"," ",e.jsx(H,{to:"/privacy",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium underline",children:"Privacy Policy"})]})]})}),e.jsx("button",{onClick:f,disabled:!u||P||N,className:"w-full mt-6 bg-orange-600 text-white px-6 py-4 rounded-lg font-semibold text-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center",children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"animate-spin h-5 w-5 mr-2"}),"Processing Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),"Place Order"]})}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Your payment is secured via SumUp"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(H,{to:"/cart",className:"text-orange-600 hover:text-orange-700 font-medium text-sm inline-flex items-center transition-colors",children:" Back to Cart"})})]})})})},F_=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,T_=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/loyalty/badges",{headers:{Authorization:`Bearer ${t}`}})).data,A_=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`}})).data.invoice_url,M_=()=>{const{order_id:t}=Jt(),s=je(),r=X(p=>p.authentication_state.auth_token),a=X(p=>p.authentication_state.current_user),n=X(p=>p.clear_cart);x.useEffect(()=>{t||s("/orders")},[t,s]),x.useEffect(()=>{n()},[n]);const{data:i,isLoading:l,error:o}=le({queryKey:["order-confirmation",t],queryFn:()=>F_(t,r),enabled:!!t&&!!r,staleTime:0,retry:1}),{data:c,isLoading:d}=le({queryKey:["loyalty-badges-check"],queryFn:()=>T_(r),enabled:!!r&&!!i,staleTime:0,select:p=>{const g=p.earned.filter(h=>{const N=new Date(h.earned_at).getTime(),j=Date.now()-2*60*1e3;return N>j});return{...p,recentlyUnlocked:g.length>0?g[0]:null}}}),u=async()=>{if(!(!t||!r))try{const p=await A_(t,r);window.open(p,"_blank")}catch(p){console.error("Failed to download invoice:",p),alert("Failed to download invoice. Please try again.")}},m=p=>!p||Object.keys(p).length===0?"":Object.entries(p).map(([g,h])=>`${g}: ${h}`).join(", "),b=p=>{if(!p)return"Shortly";try{return new Date(p).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return p}};return l?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-700 font-medium text-lg",children:"Loading your order confirmation..."})]})})}):o||!i?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ce,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find the order you're looking for. It may have been cancelled or doesn't exist."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(H,{to:"/orders",className:"block w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:"View All Orders"}),e.jsx(H,{to:"/menu",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Back to Menu"})]})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 py-8 px-4 sm:py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg animate-scale-in",children:e.jsx(we,{className:"w-12 h-12 sm:w-14 sm:h-14 text-white",strokeWidth:2.5})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-green-400 rounded-full animate-ping opacity-20"})})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-3",children:"Order Confirmed!"}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-700 mb-2",children:["Thank you, ",(a==null?void 0:a.first_name)||"valued customer","!"]}),e.jsx("p",{className:"text-base text-gray-600",children:"We've received your order and will start preparing it shortly."})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-xl border-2 border-green-200 p-6 sm:p-8 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide mb-2",children:"Order Number"}),e.jsx("p",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-blue-600 mb-4 font-mono tracking-tight",children:i.order_number}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 text-gray-700",children:i.order_type==="collection"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Collection"})]}),i.collection_time_slot&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline text-gray-400",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{children:["Ready at ",e.jsx("strong",{children:b(i.collection_time_slot)})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Delivery"})]}),i.estimated_delivery_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline text-gray-400",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{children:["Estimated at ",e.jsx("strong",{children:b(i.estimated_delivery_time)})]})]})]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-600"}),"Your Order"]}),e.jsx("div",{className:"space-y-4",children:i.items.map(p=>e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[p.quantity,"x ",p.item_name]}),p.selected_customizations&&Object.keys(p.selected_customizations).length>0&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m(p.selected_customizations)})]}),e.jsxs("p",{className:"font-semibold text-gray-900 ml-4",children:["",Number(p.line_total).toFixed(2)]})]},p.order_item_id))}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-gray-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["",Number(i.subtotal).toFixed(2)]})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",Number(i.discount_amount).toFixed(2)]})]}),i.delivery_fee&&i.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsxs("span",{children:["",Number(i.delivery_fee).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsxs("span",{children:["",Number(i.tax_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-2 border-t border-gray-200",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",Number(i.total_amount).toFixed(2)]})]})]})]}),i.order_type==="delivery"&&i.delivery_address_snapshot&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600"}),"Delivery Address"]}),e.jsxs("div",{className:"text-gray-700 space-y-1",children:[e.jsx("p",{children:i.delivery_address_snapshot.address_line1}),i.delivery_address_snapshot.address_line2&&e.jsx("p",{children:i.delivery_address_snapshot.address_line2}),e.jsxs("p",{children:[i.delivery_address_snapshot.city,", ",i.delivery_address_snapshot.postal_code]})]})]}),i.special_instructions&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Special Instructions"}),e.jsx("p",{className:"text-gray-700",children:i.special_instructions})]})]}),e.jsxs("div",{className:"space-y-6",children:[i.loyalty_points_awarded>0&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(wt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-90",children:"You Earned"}),e.jsxs("p",{className:"text-3xl font-bold",children:[i.loyalty_points_awarded," Points"]})]})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Keep ordering to earn more rewards and unlock exclusive benefits!"}),e.jsx(H,{to:"/rewards",className:"mt-4 block w-full bg-white text-orange-600 px-4 py-2 rounded-lg font-medium text-center hover:bg-gray-100 transition-all duration-200",children:"View Rewards"})]}),!d&&(c==null?void 0:c.recentlyUnlocked)&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg p-6 text-white animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(or,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-90",children:"Achievement Unlocked!"}),e.jsx("p",{className:"text-xl font-bold",children:c.recentlyUnlocked.name})]})]}),e.jsx("p",{className:"text-sm opacity-90 mb-4",children:c.recentlyUnlocked.description}),e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-white/20 rounded-full mx-auto",children:e.jsx("span",{className:"text-4xl",children:""})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(H,{to:`/orders/${i.order_id}/track`,className:"flex items-center justify-center gap-2 w-full bg-blue-600 text-white px-6 py-4 rounded-xl font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Track Order",e.jsx(ji,{className:"w-5 h-5"})]}),i.invoice_url&&e.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 w-full bg-gray-100 text-gray-900 px-6 py-4 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200 border-2 border-gray-300",children:[e.jsx(qt,{className:"w-5 h-5"}),"Download Invoice"]}),e.jsxs(H,{to:"/menu",className:"flex items-center justify-center gap-2 w-full bg-white text-blue-600 px-6 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 border-2 border-blue-200",children:["Continue Shopping",e.jsx(ji,{className:"w-5 h-5"})]})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-blue-900 text-center",children:[e.jsx("strong",{children:"Confirmation sent!"}),e.jsx("br",{}),"We've sent order details to ",e.jsx("strong",{children:i.customer_email})," and ",e.jsx("strong",{children:i.customer_phone})]})})]})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-gray-600",children:["Need help? ",e.jsx("a",{href:"mailto:hello@salamalama.ie",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact Support"})]}),e.jsx(H,{to:"/orders",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"View All Orders "})]})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes scale-in {
          from {
            transform: scale(0.8);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }

        .animate-fade-in {
          animation: fade-in 0.6s ease-out;
        }

        .animate-scale-in {
          animation: scale-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
      `})]})},e0=t=>{if(!t)return{minutes_remaining:null,ready_at_time:null,is_overdue:!1};try{const s=new Date(t),r=new Date,a=s.getTime()-r.getTime(),n=Math.floor(a/6e4);return{minutes_remaining:n>0?n:0,ready_at_time:s.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit",hour12:!1}),is_overdue:a<0}}catch(s){return console.error("Error calculating time remaining:",s),{minutes_remaining:null,ready_at_time:null,is_overdue:!1}}},L_=t=>{switch(t){case"received":return"text-blue-600 bg-blue-50 border-blue-200";case"preparing":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"ready":case"out_for_delivery":return"text-green-600 bg-green-50 border-green-200";case"completed":return"text-green-700 bg-green-100 border-green-300";case"cancelled":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},$_=t=>t<=33?"bg-blue-600":t<=66?"bg-yellow-500":"bg-green-600",R_=()=>{const{order_id:t}=Jt(),s=je(),r=X(C=>C.authentication_state.auth_token),a=X(C=>C.authentication_state.authentication_status.is_authenticated),n=X(C=>C.websocket_state.connected),i=X(C=>C.subscribe_to_order_updates),l=X(C=>C.unsubscribe_from_order_updates),o=X(C=>C.add_notification),[c,d]=x.useState([]),[u,m]=x.useState(0),[b,p]=x.useState({minutes_remaining:null,ready_at_time:null,is_overdue:!1}),[g,h]=x.useState([]),[N,j]=x.useState(null),y="https://123salama-lama-food-truck.launchpulse.ai";x.useEffect(()=>{a||s("/login?redirect="+encodeURIComponent(window.location.pathname))},[a,s]);const{data:f,isLoading:k,isError:T,error:M,refetch:P,isFetching:_}=le({queryKey:["orderTracking",t],queryFn:async()=>{if(!t||!r)throw new Error("Missing order ID or authentication token");return(await W.get(`${y}/api/orders/${t}/track`,{headers:{Authorization:`Bearer ${r}`}})).data},enabled:!!t&&!!r,staleTime:n?5*60*1e3:30*1e3,refetchInterval:n?!1:3e4,retry:2});x.useEffect(()=>{if(!f)return;const C=[{name:"Order Received",status:"received"},{name:"Preparing",status:"preparing"},{name:f.order_type==="collection"?"Ready for Collection":"Out for Delivery",status:f.order_type==="collection"?"ready":"out_for_delivery"},{name:"Completed",status:"completed"}],z=C.findIndex(w=>w.status===f.status),D=C.map((w,$)=>{const B=f.status_history.find(I=>I.status===w.status);return{step_name:w.name,step_status:w.status,timestamp:(B==null?void 0:B.changed_at)||null,is_current:$===z,is_completed:$<z||$===z&&f.status!=="cancelled"}});d(D);const S=z>=0?Math.round((z+1)/C.length*100):0;m(S);const E=f.estimated_time||f.collection_time_slot;E&&p(e0(E)),j(null)},[f]),x.useEffect(()=>{if(!(!t||!r))return i(t),()=>{l(t)}},[t,r,i,l]);const F=X(C=>C.notification_state.notifications);x.useEffect(()=>{const z=F.filter(D=>D.type==="order_status_update"&&D.message.includes((f==null?void 0:f.order_number)||"")).map(D=>({message:D.message,type:"info",timestamp:D.created_at,dismissed:D.read,id:D.id}));h(D=>{const S=new Set(D.map(w=>w.id));return[...z.filter(w=>!S.has(w.id)),...D].slice(0,5)})},[F,f==null?void 0:f.order_number]),x.useEffect(()=>{if(!f)return;const C=f.estimated_time||f.collection_time_slot;if(!C)return;const z=setInterval(()=>{p(e0(C))},6e4);return()=>clearInterval(z)},[f]);const v=()=>{P(),o({type:"info",message:"Refreshing order status..."})},O=async()=>{if(!(!t||!r))try{const C=await W.get(`${y}/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${r}`}});C.data.invoice_url&&(window.open(C.data.invoice_url,"_blank"),o({type:"success",message:"Invoice opened in new tab"}))}catch(C){console.error("Error downloading invoice:",C),o({type:"error",message:"Failed to download invoice. Please try again."})}},R=C=>{h(z=>z.map(D=>D.id===C?{...D,dismissed:!0}:D))};return x.useEffect(()=>{var C,z;if(T){const D=W.isAxiosError(M)?((C=M.response)==null?void 0:C.status)===404?"Order not found or you do not have access to this order.":((z=M.response)==null?void 0:z.status)===401?"Please log in to view order tracking.":"Unable to load tracking data. Please check your connection.":"Something went wrong. Please try again later.";j(D)}},[T,M]),k?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading order tracking..."})]})})}):N||!f?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(ce,{className:"size-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Tracking"}),e.jsx("p",{className:"text-gray-600 mb-6",children:N||"Order tracking data is not available."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:v,className:"px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Try Again"}),e.jsx(H,{to:"/orders",className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Orders"})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:["Order ",f.order_number]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time tracking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ny,{className:"size-4 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-medium hidden sm:inline",children:"Live"})]}):e.jsxs(e.Fragment,{children:[e.jsx(vy,{className:"size-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium hidden sm:inline",children:"Offline"})]})}),e.jsxs("button",{onClick:v,disabled:_,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh tracking data",children:[e.jsx(ks,{className:`size-4 ${_?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[u,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ease-out rounded-full ${$_(u)}`,style:{width:`${u}%`}})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-4",children:e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold border ${L_(f.status)}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1).replace("_"," ")})})]}),g.filter(C=>!C.dismissed).length>0&&e.jsx("div",{className:"mb-6 space-y-2",children:g.filter(C=>!C.dismissed).slice(0,3).map(C=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"size-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Le,{className:"size-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-900 font-medium",children:C.message}),e.jsx("p",{className:"text-blue-600 text-xs mt-1",children:new Date(C.timestamp).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("button",{onClick:()=>R(C.id),className:"text-blue-400 hover:text-blue-600 transition-colors","aria-label":"Dismiss notification",children:e.jsx(it,{className:"size-5"})})]},C.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Status Timeline"}),e.jsx("ol",{className:"relative border-l-2 border-gray-200 ml-4 space-y-8",children:c.map((C,z)=>e.jsxs("li",{className:"ml-6 relative",children:[e.jsx("span",{className:`absolute -left-9 flex items-center justify-center size-8 rounded-full ${C.is_completed?"bg-green-100 border-4 border-green-600":C.is_current?"bg-yellow-100 border-4 border-yellow-500":"bg-gray-100 border-4 border-gray-300"}`,children:C.is_completed?e.jsx(we,{className:"size-4 text-green-600"}):C.is_current?e.jsx("div",{className:"size-3 bg-yellow-500 rounded-full animate-pulse"}):e.jsx(A1,{className:"size-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-1 ${C.is_current?"text-yellow-600":C.is_completed?"text-green-700":"text-gray-500"}`,children:C.step_name}),C.timestamp&&e.jsx("p",{className:"text-sm text-gray-600",children:new Date(C.timestamp).toLocaleString("en-IE",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),C.is_current&&!C.timestamp&&e.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"In progress..."})]})]},z))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"size-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"size-5 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:f.order_type==="collection"?"Pickup Time":"Delivery Time"})]}),b.ready_at_time?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center py-4 mb-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:b.ready_at_time}),b.minutes_remaining!==null&&b.minutes_remaining>0&&e.jsxs("p",{className:"text-gray-600 mt-1",children:[b.minutes_remaining," minutes remaining"]}),b.is_overdue&&e.jsx("p",{className:"text-red-600 font-medium mt-1",children:"Ready now!"})]})}):e.jsx("p",{className:"text-gray-600 text-sm",children:"We'll notify you when your order is ready"}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200",children:[e.jsx(Pe,{className:"size-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.order_type==="collection"?"Collection":"Delivery"})]}),f.order_type==="delivery"&&f.delivery_address_snapshot&&e.jsxs("div",{className:"flex items-start gap-2 mt-3",children:[e.jsx(Ge,{className:"size-5 text-gray-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("p",{children:f.delivery_address_snapshot.address_line1}),f.delivery_address_snapshot.address_line2&&e.jsx("p",{children:f.delivery_address_snapshot.address_line2}),e.jsxs("p",{children:[f.delivery_address_snapshot.city,", ",f.delivery_address_snapshot.postal_code]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[f.status==="completed"&&e.jsxs("button",{onClick:O,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(qt,{className:"size-5"}),"Download Invoice"]}),e.jsxs("a",{href:`tel:${f.customer_phone}`,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(zt,{className:"size-5"}),"Call Support"]}),e.jsxs("a",{href:"mailto:support@salamalama.ie",className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(lt,{className:"size-5"}),"Email Support"]}),e.jsx(H,{to:"/orders",className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Orders"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Order for"}),e.jsx("p",{className:"font-semibold text-gray-900",children:f.customer_name}),e.jsx("p",{className:"text-sm text-gray-600",children:f.customer_phone})]})]})]})]})})})},O_=()=>{const t=je(),[s]=Xe(),r=s.get("ref")||null,a=s.get("redirect_url")||"/menu",n=X(A=>A.register_user),i=X(A=>A.authentication_state.authentication_status.is_authenticated),[l,o]=x.useState({email:"",phone:"",password:"",first_name:"",last_name:"",marketing_opt_in:!1,terms_accepted:!1}),[c,d]=x.useState(""),[u,m]=x.useState(!1),[b,p]=x.useState(!1),[g,h]=x.useState(!1),[N,j]=x.useState(null),[y,f]=x.useState(!1),[k,T]=x.useState(null),[M,P]=x.useState(!1),[_,F]=x.useState({email:null,phone:null,password:null,password_confirmation:null,first_name:null,last_name:null,terms_accepted:null}),[v,O]=x.useState({score:0,feedback:[],isValid:!1});x.useEffect(()=>{i&&t("/dashboard")},[i,t]);const R=x.useCallback(A=>{const L=[];let U=0;A.length>=8?U+=1:L.push("At least 8 characters required"),/[a-zA-Z]/.test(A)?U+=1:L.push("Include at least one letter"),/\d/.test(A)?U+=1:L.push("Include at least one number"),/[A-Z]/.test(A)&&/[a-z]/.test(A)&&(U+=1),/[!@#$%^&*(),.?":{}|<>]/.test(A)&&(U+=1);const Y=A.length>=8&&/[a-zA-Z]/.test(A)&&/\d/.test(A);return O({score:U,feedback:L,isValid:Y}),Y},[]),C=(A,L)=>{o(U=>({...U,[A]:L})),A in _&&F(U=>({...U,[A]:null})),j(null),A==="password"&&typeof L=="string"&&R(L)},z=x.useCallback((A,L)=>{let U=null;switch(A){case"email":!L||typeof L!="string"?U="Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)||(U="Please enter a valid email address");break;case"phone":!L||typeof L!="string"?U="Phone number is required":L.length<10?U="Phone number must be at least 10 digits":L.length>20&&(U="Phone number is too long");break;case"password":!L||typeof L!="string"?U="Password is required":L.length<8?U="Password must be at least 8 characters":/[a-zA-Z]/.test(L)?/\d/.test(L)||(U="Password must contain at least one number"):U="Password must contain at least one letter";break;case"password_confirmation":L!==l.password&&(U="Passwords do not match");break;case"first_name":!L||typeof L!="string"?U="First name is required":L.length>100&&(U="First name is too long");break;case"last_name":!L||typeof L!="string"?U="Last name is required":L.length>100&&(U="Last name is too long");break;case"terms_accepted":L||(U="You must accept the Terms & Conditions");break}return F(Y=>({...Y,[A]:U})),U===null},[l.password]),D=A=>{A==="password_confirmation"?z("password_confirmation",c):A in l&&z(A,l[A])},S=x.useCallback(()=>{const A={};return A.email=z("email",l.email),A.phone=z("phone",l.phone),A.password=z("password",l.password),A.password_confirmation=z("password_confirmation",c),A.first_name=z("first_name",l.first_name),A.last_name=z("last_name",l.last_name),A.terms_accepted=z("terms_accepted",l.terms_accepted),Object.values(A).every(Boolean)},[l,c,z]),E=async A=>{var L,U;if(A.preventDefault(),j(null),!!S()){h(!0);try{const Y=await n({email:l.email,phone:l.phone,password:l.password,first_name:l.first_name,last_name:l.last_name,marketing_opt_in:l.marketing_opt_in,referred_by_user_id:r||void 0});T(Y.first_order_discount_code),f(!0),h(!1)}catch(Y){h(!1);const Q=Y.message||"Registration failed. Please try again.";if(j(Q),(U=(L=Y.response)==null?void 0:L.data)!=null&&U.errors){const K=Y.response.data.errors;F(G=>({...G,...K}))}}}},w=()=>{f(!1),t(a)},$=async()=>{if(k)try{await navigator.clipboard.writeText(k),P(!0),setTimeout(()=>P(!1),2e3)}catch(A){console.error("Failed to copy code:",A)}},B=x.useMemo(()=>v.score===0?"bg-gray-200":v.score<=2?"bg-red-500":v.score===3?"bg-yellow-500":v.score===4?"bg-blue-500":"bg-green-500",[v.score]),I=x.useMemo(()=>`${v.score/5*100}%`,[v.score]),q=x.useMemo(()=>v.score===0?"":v.score<=2?"Weak":v.score===3?"Fair":v.score===4?"Good":"Strong",[v.score]);return e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"success-modal",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-2xl px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 mb-6 animate-bounce",children:e.jsx(B1,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to Salama Lama!"}),e.jsxs("p",{className:"text-lg text-gray-600 mb-6",children:["Hi ",l.first_name,"! Your account has been created successfully."]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx(Fn,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("p",{className:"text-sm font-semibold text-orange-900 uppercase tracking-wide",children:"Your First Order Discount"})]}),e.jsx("div",{className:"bg-white rounded-lg px-6 py-4 mb-4",children:e.jsx("p",{className:"text-4xl font-bold text-orange-600 tracking-wider font-mono",children:k})}),e.jsx("button",{onClick:$,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:M?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hm,{className:"h-4 w-4 mr-2"}),"Copy Code"]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Bonus:"})," You've been automatically enrolled in our loyalty program! Start earning points with every order."]})}),e.jsx("button",{onClick:w,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 rounded-xl text-lg font-semibold hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200 transform hover:scale-105",children:"Start Ordering"})]})})]})}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Join Salama Lama and start earning rewards!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-8 sm:px-8",children:[r&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fn,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"You've been referred by a friend! You'll both earn bonus rewards."})]})}),N&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(_e,{className:"h-5 w-5 text-red-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:N})]})}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,value:l.first_name,onChange:A=>{C("first_name",A.target.value)},onBlur:()=>D("first_name"),className:`block w-full px-4 py-3 border ${_.first_name?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"John"}),_.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.first_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,value:l.last_name,onChange:A=>{C("last_name",A.target.value)},onBlur:()=>D("last_name"),className:`block w-full px-4 py-3 border ${_.last_name?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"Smith"}),_.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.last_name})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:A=>{C("email",A.target.value)},onBlur:()=>D("email"),className:`block w-full px-4 py-3 border ${_.email?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"you@example.com"}),_.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:l.phone,onChange:A=>{C("phone",A.target.value)},onBlur:()=>D("phone"),className:`block w-full px-4 py-3 border ${_.phone?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:"+353 1 234 5678"}),_.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:l.password,onChange:A=>{C("password",A.target.value)},onBlur:()=>D("password"),className:`block w-full px-4 py-3 pr-12 border ${_.password?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:""}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700",children:u?e.jsx(zs,{className:"h-5 w-5"}):e.jsx(Ns,{className:"h-5 w-5"})})]}),_.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password}),l.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-xs font-medium ${v.score<=2?"text-red-600":v.score===3?"text-yellow-600":v.score===4?"text-blue-600":"text-green-600"}`,children:q})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${B}`,style:{width:I}})}),v.feedback.length>0&&e.jsx("ul",{className:"mt-2 space-y-1",children:v.feedback.map((A,L)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-center",children:[e.jsx(_e,{className:"h-3 w-3 text-red-500 mr-1"}),A]},L))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:b?"text":"password",autoComplete:"new-password",required:!0,value:c,onChange:A=>{d(A.target.value),F(L=>({...L,password_confirmation:null}))},onBlur:()=>D("password_confirmation"),className:`block w-full px-4 py-3 pr-12 border ${_.password_confirmation?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all`,placeholder:""}),e.jsx("button",{type:"button",onClick:()=>p(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700",children:b?e.jsx(zs,{className:"h-5 w-5"}):e.jsx(Ns,{className:"h-5 w-5"})})]}),_.password_confirmation&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password_confirmation})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"marketing_opt_in",name:"marketing_opt_in",type:"checkbox",checked:l.marketing_opt_in,onChange:A=>{C("marketing_opt_in",A.target.checked)},className:"mt-1 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"marketing_opt_in",className:"ml-2 block text-sm text-gray-700",children:"I'd like to receive marketing emails and offers"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"terms_accepted",name:"terms_accepted",type:"checkbox",required:!0,checked:l.terms_accepted,onChange:A=>{C("terms_accepted",A.target.checked)},onBlur:()=>D("terms_accepted"),className:`mt-1 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded ${_.terms_accepted?"border-red-300":""}`}),e.jsxs("label",{htmlFor:"terms_accepted",className:"ml-2 block text-sm text-gray-700",children:["I agree to the"," ",e.jsx(H,{to:"/terms",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Terms & Conditions"})," ","and"," ",e.jsx(H,{to:"/privacy",target:"_blank",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Privacy Policy"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),_.terms_accepted&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.terms_accepted}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-4 rounded-xl text-lg font-semibold hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:g?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating your account..."]}):"Create Account"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(H,{to:"/login",className:"text-orange-600 hover:text-orange-700 font-semibold",children:"Sign in"})]})})]})]})})]})},D_=()=>{const[t,s]=x.useState(""),[r,a]=x.useState(""),[n,i]=x.useState(!1),[l,o]=x.useState(!1),[c,d]=x.useState(null),u=X(F=>F.authentication_state.authentication_status.is_loading),m=X(F=>F.authentication_state.error_message),b=X(F=>F.login_user),p=X(F=>F.clear_auth_error),g=X(F=>F.authentication_state.authentication_status.is_authenticated),h=je(),N=Vs(),y=new URLSearchParams(N.search).get("redirect_url")||"/dashboard";x.useEffect(()=>{g&&h(y)},[g,y,h]),x.useEffect(()=>{(t||r)&&(d(null),p())},[t,r,p]);const f=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),k=()=>t.trim()?f(t)?r?r.length<8?(d("Password must be at least 8 characters"),!1):!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email address is required"),!1),T=async F=>{if(F.preventDefault(),d(null),p(),!!k())try{await b(t,r,n)}catch(v){console.error("Login error:",v)}},M=()=>{t&&!f(t)&&d("Please enter a valid email address")},P=()=>{o(!l)},_=m||c;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-xl text-gray-600 font-semibold",children:"Sign in to continue"})]}),e.jsxs("div",{className:"bg-white shadow-xl rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 lg:p-8",children:[_&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",role:"alert","aria-live":"polite",children:[e.jsx(ce,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 font-medium",children:_})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:F=>s(F.target.value),onBlur:M,disabled:u,placeholder:"your.email@example.com",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400","aria-describedby":_?"error-message":void 0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:F=>a(F.target.value),disabled:u,placeholder:"Enter your password",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none disabled:opacity-50 disabled:cursor-not-allowed text-gray-900 placeholder-gray-400 pr-12","aria-describedby":_?"error-message":void 0}),e.jsx("button",{type:"button",onClick:P,disabled:u,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1 disabled:opacity-50","aria-label":l?"Hide password":"Show password",children:l?e.jsx(zs,{className:"h-5 w-5"}):e.jsx(Ns,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",checked:n,onChange:F=>i(F.target.checked),disabled:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-700 cursor-pointer select-none",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(H,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",children:"Forgot password?"})})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(O1,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Sign In"})]})})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(H,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",children:"Sign up"})]})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-500 leading-relaxed",children:["By signing in, you agree to our"," ",e.jsx(H,{to:"/terms",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Terms of Service"})," ","and"," ",e.jsx(H,{to:"/privacy",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Privacy Policy"})]})]})})})},I_=async t=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/password-reset-request",{email:t},{headers:{"Content-Type":"application/json"}})).data,q_=()=>{var d,u;const[t,s]=x.useState(""),[r,a]=x.useState(!1),n=ie({mutationFn:I_,onSuccess:()=>{a(!0)},onError:m=>{console.error("Password reset request error:",m)}}),i=n.isPending,l=n.error?((u=(d=n.error.response)==null?void 0:d.data)==null?void 0:u.message)||n.error.message||"Failed to send reset link. Please try again.":null,o=async m=>{m.preventDefault(),n.reset(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&n.mutate(t)},c=m=>{s(m.target.value),n.error&&n.reset()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[r?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg shadow-gray-200/50 p-8 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(we,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Check Your Email"}),e.jsxs("p",{className:"text-base text-gray-600 leading-relaxed",children:["If an account exists for ",e.jsx("span",{className:"font-medium text-gray-900",children:t}),", you'll receive a password reset link shortly."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"The reset link will expire in 1 hour for security reasons."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(lt,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Check your email inbox (and spam folder)"}),e.jsx("li",{children:"Click the reset link in the email"}),e.jsx("li",{children:"Create a new password"})]})]})]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs(H,{to:"/login",className:"inline-flex items-center justify-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Login"})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg shadow-gray-200/50 p-8 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:e.jsx(lt,{className:"h-10 w-10 text-blue-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Forgot Password?"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No worries! Enter your email and we'll send you a reset link."})]}),l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md px-4 py-3 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l})]})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:c,disabled:i,placeholder:"you@example.com",className:`w-full px-4 py-3 rounded-lg border-2 border-gray-200 placeholder-gray-400 text-gray-900 
                             focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100
                             disabled:bg-gray-50 disabled:cursor-not-allowed
                             transition-all duration-200`,"aria-required":"true","aria-invalid":l?"true":"false","aria-describedby":l?"email-error":void 0}),l&&e.jsx("p",{id:"email-error",className:"sr-only",children:l})]}),e.jsx("button",{type:"submit",disabled:i||!t.trim(),className:`w-full px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 
                           focus:outline-none focus:ring-4 focus:ring-blue-100
                           disabled:bg-gray-300 disabled:cursor-not-allowed
                           transition-all duration-200 shadow-lg hover:shadow-xl
                           flex items-center justify-center space-x-2`,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Sending..."})]}):e.jsx("span",{children:"Send Reset Link"})})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs(H,{to:"/login",className:"inline-flex items-center justify-center space-x-2 text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200 text-sm",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Login"})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Remember your password?"," ",e.jsx(H,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"Sign in here"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Need additional help?"," ",e.jsx(H,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200",children:"Contact Support"})]})})]})})})},z_=async t=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/auth/password-reset",t,{headers:{"Content-Type":"application/json"}})).data,B_=()=>{const{token:t}=Jt(),s=je(),[r,a]=x.useState(""),[n,i]=x.useState(""),[l,o]=x.useState(""),[c,d]=x.useState(!1),[u,m]=x.useState(!1),[b,p]=x.useState(!1),[g,h]=x.useState(null),[N,j]=x.useState(null),[y,f]=x.useState(5);x.useEffect(()=>{t?(a(t),h(null)):h("Invalid reset link. No token provided.")},[t]);const k=x.useMemo(()=>{const O=n.length>=8,R=/[a-zA-Z]/.test(n),C=/[0-9]/.test(n),z=[{met:O,text:"At least 8 characters"},{met:R,text:"Contains at least one letter"},{met:C,text:"Contains at least one number"}],D=z.filter(w=>w.met).length,S=D===z.length;let E="weak";return D===3&&n.length>=12?E="strong":D>=2&&(E="medium"),{is_valid:S,strength:E,requirements:z}},[n]),T=()=>{j(l&&n!==l?"Passwords do not match":null)},M=ie({mutationFn:z_,onSuccess:()=>{p(!0),h(null);const O=setInterval(()=>{f(R=>R<=1?(clearInterval(O),s("/login"),0):R-1)},1e3)},onError:O=>{var C,z;const R=((z=(C=O.response)==null?void 0:C.data)==null?void 0:z.message)||O.message||"Failed to reset password";h(R),p(!1)}}),P=O=>{if(O.preventDefault(),h(null),j(null),!r){h("Invalid reset link. Please request a new password reset.");return}if(!k.is_valid){h("Please meet all password requirements");return}if(n!==l){j("Passwords do not match");return}M.mutate({reset_token:r,new_password:n})},_=()=>{s("/login")},F=()=>k.strength==="strong"?"bg-green-500":k.strength==="medium"?"bg-yellow-500":"bg-red-500",v=()=>k.strength==="strong"?"w-full":k.strength==="medium"?"w-2/3":"w-1/3";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full",children:b?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been successfully reset. You can now log in with your new password."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["Redirecting to login in ",e.jsx("strong",{children:y})," seconds..."]})}),e.jsx("button",{onClick:_,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-100",children:"Continue to Login"}),e.jsx(H,{to:"/",className:"block text-sm text-gray-600 hover:text-gray-900",children:"Back to Home"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),g&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-800",children:g}),g.toLowerCase().includes("expired")&&e.jsx(H,{to:"/forgot-password",className:"text-sm text-red-700 underline hover:text-red-800 mt-2 inline-block",children:"Request a new reset link"})]})]}),e.jsxs("form",{onSubmit:P,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new_password",name:"new_password",type:c?"text":"password",required:!0,value:n,onChange:O=>{i(O.target.value),h(null)},placeholder:"Enter new password",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?e.jsx(zs,{className:"w-5 h-5"}):e.jsx(Ns,{className:"w-5 h-5"})})]}),n&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-xs font-semibold ${k.strength==="strong"?"text-green-600":k.strength==="medium"?"text-yellow-600":"text-red-600"}`,children:k.strength.toUpperCase()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${F()} ${v()} transition-all duration-300`})})]})]}),n&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Password requirements:"}),k.requirements.map((O,R)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[O.met?e.jsx(qe,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):e.jsx(_e,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${O.met?"text-green-700":"text-gray-600"}`,children:O.text})]},R))]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",name:"confirm_password",type:u?"text":"password",required:!0,value:l,onChange:O=>{o(O.target.value),j(null)},onBlur:T,placeholder:"Confirm new password",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?e.jsx(zs,{className:"w-5 h-5"}):e.jsx(Ns,{className:"w-5 h-5"})})]}),N&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:N})]})]}),e.jsx("button",{type:"submit",disabled:M.isPending||!r||!k.is_valid||n!==l||!n||!l,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Resetting Password..."})]}):e.jsx("span",{children:"Reset Password"})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(H,{to:"/login",className:"block text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Back to Login"}),e.jsx(H,{to:"/",className:"block text-sm text-gray-600 hover:text-gray-900",children:"Return to Home"})]})]})})})})},U_=()=>{const{token:t}=Jt(),s=je(),[r,a]=x.useState({status:"pending",message:"Verifying your email address..."}),n=X(g=>g.authentication_state.current_user),i=X(g=>g.authentication_state.auth_token),l=X(g=>g.update_auth_user),o=X(g=>g.authentication_state.authentication_status.is_authenticated),c="https://123salama-lama-food-truck.launchpulse.ai",d=ie({mutationFn:async g=>(await W.post(`${c}/api/auth/verify-email`,g,{headers:{"Content-Type":"application/json"}})).data,onSuccess:g=>{a({status:"success",message:g.message||"Your email has been verified successfully!"}),g.user&&n&&l({email_verified:!0})},onError:g=>{var N,j;const h=((j=(N=g.response)==null?void 0:N.data)==null?void 0:j.message)||g.message||"Verification failed. The link may be invalid or expired.";a({status:"failed",message:h})}}),u=ie({mutationFn:async()=>(await W.post(`${c}/api/auth/resend-verification`,{},{headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}}})).data,onSuccess:g=>{a({status:"pending",message:g.message||"New verification email sent! Please check your inbox."})},onError:g=>{var N,j;const h=((j=(N=g.response)==null?void 0:N.data)==null?void 0:j.message)||g.message||"Failed to resend verification email. Please try again.";a({status:"failed",message:h})}});x.useEffect(()=>{t?d.mutate({verification_token:t}):a({status:"failed",message:"Invalid verification link. No token provided."})},[t]);const m=()=>{u.mutate()},b=()=>{s("/dashboard")},p=()=>{s("/login")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 px-6 py-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-4 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Email Verification"}),e.jsx("p",{className:"text-orange-50 text-sm",children:"Confirming your email address"})]}),e.jsxs("div",{className:"px-6 py-8",children:[r.status==="pending"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6",children:e.jsxs("svg",{className:"animate-spin h-16 w-16 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Verifying Your Email"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:r.message}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-700 text-sm",children:"Please wait while we confirm your email address..."})})]}),r.status==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Email Verified Successfully!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:r.message}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-green-700 text-sm",children:[" Your email address has been confirmed",e.jsx("br",{}),"You can now enjoy all features of your Salama Lama account!"]})}),e.jsxs("div",{className:"space-y-3",children:[o?e.jsx("button",{onClick:b,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Continue to Dashboard"}):e.jsx("button",{onClick:p,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:"Sign In to Your Account"}),e.jsx(H,{to:"/",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Back to Home"})]})]}),r.status==="failed"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 mb-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:r.message}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-red-700 text-sm font-medium mb-2",children:"Common reasons for failure:"}),e.jsxs("ul",{className:"text-red-600 text-sm text-left space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"The verification link has expired (24 hours)"}),e.jsx("li",{children:"The link has already been used"}),e.jsx("li",{children:"The link is invalid or corrupted"}),e.jsx("li",{children:"Your email has already been verified"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:m,disabled:u.isPending,className:"w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-orange-100",children:u.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending New Email..."]}):"Resend Verification Email"}),e.jsx(H,{to:"/login",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Sign In Instead"}),e.jsx(H,{to:"/",className:"block w-full text-gray-600 hover:text-gray-900 px-6 py-2 rounded-lg font-medium transition-colors text-center text-sm",children:"Back to Home"})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Need help?"," ",e.jsx("a",{href:"mailto:support@salamalama.ie",className:"text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"Contact Support"})]})})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Verification links expire after 24 hours for security."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Check your spam folder if you don't see the email."})]})]})})})},Zr="https://123salama-lama-food-truck.launchpulse.ai",V_=t=>{const s=[500,1e3,2500,5e3];for(const a of s)if(t<a)return a-t;return Math.ceil(t/5e3)*5e3-t},W_=t=>{const s=[{name:"Bronze Reward",points:500},{name:"Silver Reward",points:1e3},{name:"Gold Reward",points:2500},{name:"Platinum Reward",points:5e3}];for(const a of s)if(t<a.points)return{name:a.name,points_required:a.points,points_remaining:a.points-t};const r=Math.ceil(t/5e3)*5e3;return{name:"Elite Reward",points_required:r,points_remaining:r-t}},t0=t=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(t),Au=t=>{const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric"}).format(s)},s0=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/6e4),i=Math.floor(a/36e5),l=Math.floor(a/864e5);return n<60?`${n} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:l<7?`${l} day${l>1?"s":""} ago`:Au(t)},r0=t=>({received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-green-100 text-green-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",a0=t=>({received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled"})[t]||t,H_=(t,s)=>`${t.charAt(0)}${s.charAt(0)}`.toUpperCase(),Q_=()=>{var $;const t=X(B=>B.authentication_state.current_user),s=X(B=>B.authentication_state.auth_token),r=X(B=>B.add_to_cart),[a,n]=x.useState(null),[i,l]=x.useState(null),[o,c]=x.useState(null),{data:d,isLoading:u,error:m,refetch:b}=le({queryKey:["dashboard-profile",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/profile`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1}),{data:p,isLoading:g,error:h,refetch:N}=le({queryKey:["loyalty-account",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/loyalty`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1,select:B=>({loyalty_account_id:B.loyalty_account_id,current_points_balance:Number(B.current_points_balance||0),total_points_earned:Number(B.total_points_earned||0),referral_count:Number(B.referral_count||0),next_milestone:W_(Number(B.current_points_balance||0))})}),{data:j,isLoading:y,error:f,refetch:k}=le({queryKey:["recent-orders",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/orders`,{headers:{Authorization:`Bearer ${s}`},params:{limit:5,sort_by:"created_at",sort_order:"desc"}})).data,enabled:!!s&&!!t,staleTime:2*60*1e3,retry:1,select:B=>({orders:B.orders.map(I=>({order_id:I.order_id,order_number:I.order_number,order_type:I.order_type,status:I.status,total_amount:Number(I.total_amount||0),created_at:I.created_at})),total:B.total})}),{data:T,isLoading:M,error:P,refetch:_}=le({queryKey:["active-orders",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/orders`,{headers:{Authorization:`Bearer ${s}`},params:{status:"received,preparing,ready,out_for_delivery",limit:10,sort_by:"created_at",sort_order:"desc"}})).data,enabled:!!s&&!!t,staleTime:1*60*1e3,refetchInterval:3e4,retry:1,select:B=>({orders:B.orders.map(I=>({order_id:I.order_id,order_number:I.order_number,status:I.status,collection_time_slot:I.collection_time_slot,estimated_delivery_time:I.estimated_delivery_time}))})}),{data:F}=le({queryKey:["points-history",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/loyalty/points/history`,{headers:{Authorization:`Bearer ${s}`},params:{limit:5}})).data,enabled:!!s&&!!t,staleTime:5*60*1e3,retry:1,select:B=>({transactions:B.transactions.map(I=>({transaction_id:I.transaction_id,transaction_type:I.transaction_type,points_amount:Number(I.points_amount||0),created_at:I.created_at,reason:I.reason}))})}),{data:v}=le({queryKey:["earned-badges",t==null?void 0:t.user_id],queryFn:async()=>(await W.get(`${Zr}/api/loyalty/badges`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&!!t,staleTime:10*60*1e3,retry:1,select:B=>(B.earned||[]).sort((q,A)=>new Date(A.earned_at).getTime()-new Date(q.earned_at).getTime()).slice(0,3)}),O=t,R={total_orders:(j==null?void 0:j.total)||0,total_spent:(($=d==null?void 0:d.stats)==null?void 0:$.total_spent)||0,current_points_balance:(p==null?void 0:p.current_points_balance)||0,next_reward_points_needed:V_((p==null?void 0:p.current_points_balance)||0)},C={current_points_balance:(p==null?void 0:p.current_points_balance)||0,total_points_earned:(p==null?void 0:p.total_points_earned)||0,next_milestone:(p==null?void 0:p.next_milestone)||null,recent_badges:v||[]},z=(j==null?void 0:j.orders)||[],D=(T==null?void 0:T.orders)||[],S=u||g||y||M,E=C.next_milestone?(C.next_milestone.points_required-C.next_milestone.points_remaining)/C.next_milestone.points_required*100:100,w=async B=>{var I,q;n(B),l(null),c(null);try{const L=(await W.get(`${Zr}/api/orders/${B}`,{headers:{Authorization:`Bearer ${s}`}})).data;if(L.items&&L.items.length>0){for(const U of L.items){const Y={item_id:U.item_id,item_name:U.item_name,quantity:Number(U.quantity||1),unit_price:Number(U.unit_price||0),customizations:U.selected_customizations?Object.entries(U.selected_customizations).map(([Q,K])=>({group_name:Q,option_name:typeof K=="string"?K:K.name,additional_price:typeof K=="object"&&K.price?Number(K.price):0})):[],line_total:Number(U.line_total||0)};r(Y)}c(`${L.items.length} item(s) added to cart!`),setTimeout(()=>{c(null)},3e3)}else l("No items found in this order")}catch(A){console.error("Reorder error:",A),l(((q=(I=A.response)==null?void 0:I.data)==null?void 0:q.message)||"Failed to add items to cart")}finally{n(null)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[S&&e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading your dashboard..."})]})}),!S&&(m||h||f||P)&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"h-6 w-6 text-red-500 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:(m==null?void 0:m.message)||(h==null?void 0:h.message)||(f==null?void 0:f.message)||(P==null?void 0:P.message)||"Failed to load dashboard data"}),e.jsxs("button",{onClick:()=>{b(),N(),k(),_()},className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx("span",{children:"Retry"})]})]})]})}),!S&&O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[O.profile_photo_url?e.jsx("img",{src:O.profile_photo_url,alt:`${O.first_name} ${O.last_name}`,className:"h-16 w-16 rounded-full object-cover border-4 border-blue-500"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold",children:H_(O.first_name,O.last_name)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",O.first_name,"! "]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("p",{className:"text-gray-600",children:O.email}),O.email_verified&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Verified"]})]})]})]})})}),o&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-green-500 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:o}),e.jsxs(H,{to:"/cart",className:"ml-auto text-green-700 hover:text-green-900 font-semibold flex items-center",children:["View Cart",e.jsx($e,{className:"h-4 w-4 ml-1"})]})]})}),i&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"h-5 w-5 text-red-500 mr-3"}),e.jsx("p",{className:"text-red-800 font-medium",children:i}),e.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-700 hover:text-red-900",children:"Dismiss"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Pe,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:R.total_orders})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(wt,{className:"h-6 w-6 text-green-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spent"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t0(R.total_spent)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-200 cursor-pointer",onClick:()=>window.location.href="/rewards",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur",children:e.jsx(or,{className:"h-6 w-6 text-white"})})}),e.jsx("p",{className:"text-sm text-white/90 mb-1",children:"Loyalty Points"}),e.jsx("p",{className:"text-4xl font-bold text-white",children:C.current_points_balance}),e.jsxs("p",{className:"text-xs text-white/80 mt-1",children:[R.next_reward_points_needed," more to next reward"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200",children:e.jsxs(H,{to:"/menu",className:"flex flex-col h-full items-center justify-center text-center group",children:[e.jsx("div",{className:"p-4 bg-blue-100 rounded-full mb-3 group-hover:bg-blue-200 transition-colors",children:e.jsx(Qt,{className:"h-8 w-8 text-blue-600"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:"Order Now"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Browse our menu"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Zl,{className:"h-6 w-6 text-yellow-500 mr-2"}),"Loyalty Progress"]}),e.jsxs(H,{to:"/rewards",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View All Rewards",e.jsx($e,{className:"h-4 w-4 ml-1"})]})]}),C.next_milestone&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Progress to ",C.next_milestone.name]}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[Math.round(E),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(E,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Only ",C.next_milestone.points_remaining," more points needed!"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:C.current_points_balance})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Earned"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:C.total_points_earned})]})]}),C.recent_badges.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Achievements"}),e.jsx("div",{className:"flex space-x-3",children:C.recent_badges.map(B=>e.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-lg p-3 text-center hover:scale-105 transition-transform",title:`${B.name} - Earned ${s0(B.earned_at)}`,children:[B.icon_url?e.jsx("img",{src:B.icon_url,alt:B.name,className:"h-10 w-10 mx-auto mb-1"}):e.jsx(Fn,{className:"h-10 w-10 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 truncate max-w-[60px]",children:B.name})]},B.badge_id))})]}),(F==null?void 0:F.transactions)&&F.transactions.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:F.transactions.slice(0,3).map(B=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[B.transaction_type==="earned"?e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}):e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:B.transaction_type==="earned"?"Earned":"Redeemed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`font-semibold ${B.transaction_type==="earned"?"text-green-600":"text-blue-600"}`,children:[B.transaction_type==="earned"?"+":"-",Math.abs(B.points_amount)]}),e.jsx("span",{className:"text-gray-500 text-xs",children:s0(B.created_at)})]})]},B.transaction_id))})]})]}),D.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Le,{className:"h-6 w-6 text-blue-600 mr-2"}),"Active Orders"]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:[D.length," in progress"]})]}),e.jsx("div",{className:"space-y-4",children:D.map(B=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded",children:B.collection_time_slot?e.jsx(Ge,{className:"h-5 w-5 text-blue-600"}):e.jsx(Ma,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:B.order_number}),e.jsx("p",{className:"text-xs text-gray-600",children:B.collection_time_slot?`Collection: ${Au(B.collection_time_slot)}`:`Delivery: ${B.estimated_delivery_time||"Processing"}`})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${r0(B.status)}`,children:a0(B.status)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{to:`/orders/${B.order_id}/track`,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-center text-sm font-medium",children:"Track Order"}),e.jsx(H,{to:`/orders/${B.order_id}`,className:"flex-1 bg-gray-100 text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors text-center text-sm font-medium",children:"View Details"})]})]},B.order_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Pe,{className:"h-6 w-6 text-gray-600 mr-2"}),"Recent Orders"]}),e.jsxs(H,{to:"/orders",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View All Orders",e.jsx($e,{className:"h-4 w-4 ml-1"})]})]}),z.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet"}),e.jsxs(H,{to:"/menu",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Browse Menu",e.jsx($e,{className:"h-4 w-4 ml-2"})]})]}):e.jsx("div",{className:"space-y-4",children:z.map(B=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:B.order_number}),e.jsx("p",{className:"text-sm text-gray-600",children:Au(B.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-gray-900",children:t0(B.total_amount)}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${r0(B.status)}`,children:a0(B.status)})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{to:`/orders/${B.order_id}`,className:"flex-1 bg-gray-100 text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors text-center text-sm font-medium",children:"View Details"}),e.jsx("button",{onClick:()=>w(B.order_id),disabled:a===B.order_id,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-center text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:a===B.order_id?e.jsxs(e.Fragment,{children:[e.jsx(ks,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Reorder"]})})]})]},B.order_id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(H,{to:"/menu",className:"flex items-center justify-between bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(Qt,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Order Now"})]}),e.jsx($e,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600"})]}),e.jsxs(H,{to:"/orders",className:"flex items-center justify-between bg-gray-50 hover:bg-gray-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"My Orders"})]}),e.jsx($e,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]}),e.jsxs(H,{to:"/rewards",className:"flex items-center justify-between bg-orange-50 hover:bg-orange-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-600 rounded-lg",children:e.jsx(or,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"My Rewards"})]}),e.jsx($e,{className:"h-5 w-5 text-gray-400 group-hover:text-orange-600"})]}),e.jsxs(H,{to:"/profile",className:"flex items-center justify-between bg-gray-50 hover:bg-gray-100 p-4 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(At,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"font-medium text-gray-900",children:"Edit Profile"})]}),e.jsx($e,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Account"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Member Since"}),e.jsx("span",{className:"font-semibold",children:new Date().getFullYear()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Total Orders"}),e.jsx("span",{className:"font-semibold",children:R.total_orders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-100",children:"Loyalty Points"}),e.jsx("span",{className:"font-semibold",children:C.current_points_balance})]})]})]})]})]})]})]})})})},nl="https://123salama-lama-food-truck.launchpulse.ai",K_=async t=>(await W.get(`${nl}/api/profile`,{headers:{Authorization:`Bearer ${t}`}})).data,Y_=async(t,s)=>(await W.put(`${nl}/api/profile`,t,{headers:{Authorization:`Bearer ${s}`}})).data,G_=async(t,s)=>(await W.put(`${nl}/api/profile/password`,t,{headers:{Authorization:`Bearer ${s}`}})).data,X_=async(t,s)=>(await W.delete(`${nl}/api/profile`,{data:{password:t},headers:{Authorization:`Bearer ${s}`}})).data,J_=async t=>(await W.post(`${nl}/api/auth/resend-verification`,{},{headers:{Authorization:`Bearer ${t}`}})).data,Z_=()=>{const t=je(),[s,r]=Xe(),a=Fe(),n=X(G=>G.authentication_state.current_user),i=X(G=>G.authentication_state.auth_token),l=X(G=>G.update_auth_user),o=X(G=>G.logout_user),[c,d]=x.useState(s.get("section")||"personal"),[u,m]=x.useState({first_name:"",last_name:"",phone:"",dietary_preferences:null,marketing_opt_in:!1,order_notifications_email:!0,order_notifications_sms:!1,marketing_emails:!1,marketing_sms:!1}),[b,p]=x.useState({current_password:"",new_password:"",confirm_password:""}),[g,h]=x.useState(!1),[N,j]=x.useState(!1),[y,f]=x.useState(!1),[k,T]=x.useState({}),[M,P]=x.useState(null),[_,F]=x.useState(!1),[v,O]=x.useState(""),R=["vegan","vegetarian","gluten-free","halal","dairy-free","nut-free"],{data:C,isLoading:z}=le({queryKey:["userProfile"],queryFn:()=>K_(i||""),enabled:!!i,staleTime:6e4}),D=ie({mutationFn:G=>Y_(G,i||""),onSuccess:G=>{l(G),a.invalidateQueries({queryKey:["userProfile"]}),P("Profile updated successfully!"),setTimeout(()=>P(null),3e3)},onError:G=>{var J,xe;T({submit:((xe=(J=G.response)==null?void 0:J.data)==null?void 0:xe.message)||"Failed to update profile"})}}),S=ie({mutationFn:G=>G_(G,i||""),onSuccess:()=>{p({current_password:"",new_password:"",confirm_password:""}),P("Password changed successfully!"),setTimeout(()=>P(null),3e3)},onError:G=>{var J,xe;T({submit:((xe=(J=G.response)==null?void 0:J.data)==null?void 0:xe.message)||"Failed to change password"})}}),E=ie({mutationFn:G=>X_(G,i||""),onSuccess:()=>{o(),t("/")},onError:G=>{var J,xe;T({submit:((xe=(J=G.response)==null?void 0:J.data)==null?void 0:xe.message)||"Failed to delete account"})}}),w=ie({mutationFn:()=>J_(i||""),onSuccess:()=>{P("Verification email sent! Check your inbox."),setTimeout(()=>P(null),3e3)},onError:G=>{var J,xe;T({submit:((xe=(J=G.response)==null?void 0:J.data)==null?void 0:xe.message)||"Failed to send verification email"})}});x.useEffect(()=>{C&&m({first_name:C.first_name,last_name:C.last_name,phone:C.phone,dietary_preferences:C.dietary_preferences,marketing_opt_in:C.marketing_opt_in,order_notifications_email:C.order_notifications_email,order_notifications_sms:C.order_notifications_sms,marketing_emails:C.marketing_emails,marketing_sms:C.marketing_sms})},[C]),x.useEffect(()=>{r({section:c})},[c,r]),x.useEffect(()=>{T({}),P(null)},[c]);const $=(G,J)=>{m(xe=>({...xe,[G]:J})),T(xe=>({...xe,[G]:""}))},B=(G,J)=>{p(xe=>({...xe,[G]:J})),T(xe=>({...xe,[G]:""}))},I=G=>{m(J=>{const xe=J.dietary_preferences||[],ke=xe.includes(G)?xe.filter(he=>he!==G):[...xe,G];return{...J,dietary_preferences:ke.length>0?ke:null}})},q=()=>{const G={};return u.first_name.trim()||(G.first_name="First name is required"),u.last_name.trim()||(G.last_name="Last name is required"),u.phone.trim()?/^[\d\s+\-()]+$/.test(u.phone)||(G.phone="Invalid phone number format"):G.phone="Phone number is required",T(G),Object.keys(G).length===0},A=()=>{const G={};return b.current_password||(G.current_password="Current password is required"),b.new_password?b.new_password.length<8?G.new_password="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*\d)/.test(b.new_password)||(G.new_password="Password must contain at least one letter and one number"):G.new_password="New password is required",b.new_password!==b.confirm_password&&(G.confirm_password="Passwords do not match"),T(G),Object.keys(G).length===0},L=G=>{G.preventDefault(),T({}),q()&&D.mutate(u)},U=G=>{G.preventDefault(),T({}),A()&&S.mutate({current_password:b.current_password,new_password:b.new_password})},Y=()=>{if(!v){T({submit:"Please enter your password to confirm deletion"});return}E.mutate(v)},K=(G=>G.length===0?{strength:"",color:"bg-gray-200",width:"w-0"}:G.length<8?{strength:"Weak",color:"bg-red-500",width:"w-1/3"}:/(?=.*[a-zA-Z])(?=.*\d)/.test(G)?{strength:"Strong",color:"bg-green-500",width:"w-full"}:{strength:"Medium",color:"bg-yellow-500",width:"w-2/3"})(b.new_password);return!n||!i?(t("/login"),null):z?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"w-12 h-12 animate-spin text-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences"})]}),C&&!C.email_verified&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Email not verified"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Please verify your email address to access all features."}),e.jsx("button",{onClick:()=>w.mutate(),disabled:w.isPending,className:"mt-2 text-sm font-medium text-yellow-800 hover:text-yellow-900 underline disabled:opacity-50",children:w.isPending?"Sending...":"Resend verification email"})]})]})}),M&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"ml-3 text-sm font-medium text-green-800",children:M})]})}),k.submit&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"ml-3 text-sm font-medium text-red-800",children:k.submit})]})}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("aside",{className:"lg:col-span-3",children:e.jsxs("nav",{className:"space-y-1 bg-white rounded-lg shadow p-2 sticky top-4",children:[e.jsxs("button",{onClick:()=>d("personal"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="personal"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(At,{className:"w-5 h-5 mr-3"}),"Personal Information"]}),e.jsxs("button",{onClick:()=>d("notifications"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="notifications"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Wr,{className:"w-5 h-5 mr-3"}),"Notifications"]}),e.jsxs("button",{onClick:()=>d("password"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="password"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(bs,{className:"w-5 h-5 mr-3"}),"Password & Security"]}),e.jsxs("button",{onClick:()=>d("account"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${c==="account"?"bg-orange-50 text-orange-700":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(eo,{className:"w-5 h-5 mr-3"}),"Dietary Preferences"]})]})}),e.jsx("main",{className:"mt-8 lg:mt-0 lg:col-span-9",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c==="personal"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"relative",children:C!=null&&C.profile_photo_url?e.jsx("img",{src:C.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-300",children:e.jsx(At,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{children:[e.jsxs("button",{disabled:!0,className:"px-4 py-2 bg-gray-100 text-gray-400 text-sm font-medium rounded-lg cursor-not-allowed flex items-center",children:[e.jsx(E1,{className:"w-4 h-4 mr-2"}),"Upload Photo (Coming Soon)"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(lt,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-900",children:C==null?void 0:C.email}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email changes require verification. Contact support to update."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{id:"first_name",type:"text",value:u.first_name,onChange:G=>$("first_name",G.target.value),className:`w-full px-4 py-3 rounded-lg border ${k.first_name?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"John"}),k.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{id:"last_name",type:"text",value:u.last_name,onChange:G=>$("last_name",G.target.value),className:`w-full px-4 py-3 rounded-lg border ${k.last_name?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Doe"}),k.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{id:"phone",type:"tel",value:u.phone,onChange:G=>$("phone",G.target.value),className:`w-full px-4 py-3 rounded-lg border ${k.phone?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"+353 1 234 5678"}),k.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.phone})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:D.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})})]})})]}),c==="notifications"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Updates"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive order status updates via email"})]}),e.jsx("button",{type:"button",onClick:()=>$("order_notifications_email",!u.order_notifications_email),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u.order_notifications_email?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.order_notifications_email?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive order status updates via SMS"})]}),e.jsx("button",{type:"button",onClick:()=>$("order_notifications_sms",!u.order_notifications_sms),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u.order_notifications_sms?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.order_notifications_sms?"translate-x-5":"translate-x-0"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Marketing & Promotions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive promotional offers and updates"})]}),e.jsx("button",{type:"button",onClick:()=>$("marketing_emails",!u.marketing_emails),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u.marketing_emails?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.marketing_emails?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Marketing SMS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive special offers via SMS"})]}),e.jsx("button",{type:"button",onClick:()=>$("marketing_sms",!u.marketing_sms),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u.marketing_sms?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.marketing_sms?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"General Marketing"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Opt in to all marketing communications"})]}),e.jsx("button",{type:"button",onClick:()=>$("marketing_opt_in",!u.marketing_opt_in),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u.marketing_opt_in?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.marketing_opt_in?"translate-x-5":"translate-x-0"}`})})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:D.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})})]})})]}),c==="password"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Password & Security"}),e.jsx("form",{onSubmit:U,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"current_password",type:g?"text":"password",value:b.current_password,onChange:G=>B("current_password",G.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${k.current_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>h(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(zs,{className:"w-5 h-5"}):e.jsx(Ns,{className:"w-5 h-5"})})]}),k.current_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.current_password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new_password",type:N?"text":"password",value:b.new_password,onChange:G=>B("new_password",G.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${k.new_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>j(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:N?e.jsx(zs,{className:"w-5 h-5"}):e.jsx(Ns,{className:"w-5 h-5"})})]}),k.new_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.new_password}),b.new_password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${K.color} transition-all duration-300 ${K.width}`})}),K.strength&&e.jsx("span",{className:"ml-3 text-xs font-medium text-gray-600",children:K.strength})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use at least 8 characters with letters and numbers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",type:y?"text":"password",value:b.confirm_password,onChange:G=>B("confirm_password",G.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border ${k.confirm_password?"border-red-300":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors`,placeholder:"Re-enter new password"}),e.jsx("button",{type:"button",onClick:()=>f(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?e.jsx(zs,{className:"w-5 h-5"}):e.jsx(Ns,{className:"w-5 h-5"})})]}),k.confirm_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.confirm_password})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:S.isPending,className:"w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Change Password"]})})})]})})]}),c==="account"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Dietary Preferences & Account"}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dietary Preferences"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select your dietary requirements to see personalized menu recommendations"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:R.map(G=>e.jsx("button",{type:"button",onClick:()=>I(G),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${(u.dietary_preferences||[]).includes(G)?"bg-orange-100 text-orange-700 border-2 border-orange-600":"bg-gray-100 text-gray-700 border-2 border-gray-300 hover:bg-gray-200"}`,children:G.charAt(0).toUpperCase()+G.slice(1).replace("-"," ")},G))}),e.jsx("button",{onClick:L,disabled:D.isPending,className:"mt-4 w-full sm:w-auto px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})]}),e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Created"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n!=null&&n.created_at?new Date(n.created_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Status"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email Verified"}),e.jsx("span",{className:`text-sm font-medium ${C!=null&&C.email_verified?"text-green-600":"text-yellow-600"}`,children:C!=null&&C.email_verified?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-red-900 mb-2 flex items-center",children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"Delete Account"]}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Your order history will be anonymized but retained for legal and accounting purposes in compliance with GDPR."}),e.jsxs("button",{onClick:()=>F(!0),className:"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors flex items-center",children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Delete My Account"]})]})]})]})})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>F(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-6 pt-6 pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(It,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Account"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Are you absolutely sure you want to delete your account? This action is permanent and cannot be undone."}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"All your personal data will be deleted, and your order history will be anonymized."}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"delete_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your password to confirm"}),e.jsx("input",{id:"delete_password",type:"password",value:v,onChange:G=>{O(G.target.value),T({})},className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter password"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse gap-3",children:[e.jsx("button",{onClick:Y,disabled:E.isPending||!v,className:"w-full sm:w-auto px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Yes, Delete My Account"}),e.jsx("button",{onClick:()=>{F(!1),O(""),T({})},disabled:E.isPending,className:"mt-3 sm:mt-0 w-full sm:w-auto px-6 py-3 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:"Cancel"})]})]})]})})]})},il="https://123salama-lama-food-truck.launchpulse.ai",e4=async t=>(await W.get(`${il}/api/addresses`,{headers:{Authorization:`Bearer ${t}`}})).data.addresses,t4=async(t,s)=>(await W.post(`${il}/api/addresses`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,s4=async(t,s,r)=>(await W.put(`${il}/api/addresses/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,r4=async(t,s)=>{await W.delete(`${il}/api/addresses/${t}`,{headers:{Authorization:`Bearer ${s}`}})},a4=async(t,s)=>(await W.put(`${il}/api/addresses/${t}/default`,{},{headers:{Authorization:`Bearer ${s}`}})).data,n4=()=>{const t=X(S=>S.authentication_state.current_user),s=X(S=>S.authentication_state.auth_token),[r,a]=x.useState(!1),[n,i]=x.useState(null),[l,o]=x.useState({label:"",address_line1:"",address_line2:null,city:"Dublin",postal_code:"",delivery_instructions:null,is_default:!1}),[c,d]=x.useState({}),[u,m]=x.useState(null),[b,p]=x.useState(null),g=Fe(),{data:h=[],isLoading:N,error:j}=le({queryKey:["addresses",t==null?void 0:t.user_id],queryFn:()=>e4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),y=ie({mutationFn:S=>t4(S,s),onSuccess:()=>{g.invalidateQueries({queryKey:["addresses"]}),a(!1),M(),P("Address added successfully!")},onError:S=>{var w,$;const E=(($=(w=S.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to add address";d({submit:E})}}),f=ie({mutationFn:({addressId:S,data:E})=>s4(S,E,s),onSuccess:()=>{g.invalidateQueries({queryKey:["addresses"]}),i(null),M(),P("Address updated successfully!")},onError:S=>{var w,$;const E=(($=(w=S.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to update address";d({submit:E})}}),k=ie({mutationFn:S=>r4(S,s),onSuccess:()=>{g.invalidateQueries({queryKey:["addresses"]}),m(null),P("Address deleted successfully!")},onError:S=>{var w,$;const E=(($=(w=S.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to delete address";alert(E)}}),T=ie({mutationFn:S=>a4(S,s),onSuccess:()=>{g.invalidateQueries({queryKey:["addresses"]}),P("Default address updated!")},onError:S=>{var w,$;const E=(($=(w=S.response)==null?void 0:w.data)==null?void 0:$.message)||"Failed to set default address";alert(E)}}),M=()=>{o({label:"",address_line1:"",address_line2:null,city:"Dublin",postal_code:"",delivery_instructions:null,is_default:!1}),d({})},P=S=>{p(S),setTimeout(()=>p(null),3e3)},_=()=>{const S={};return l.label.trim()?l.label.length>50&&(S.label="Label must be 50 characters or less"):S.label="Label is required",l.address_line1.trim()?l.address_line1.length>255&&(S.address_line1="Address must be 255 characters or less"):S.address_line1="Address line 1 is required",l.city.trim()||(S.city="City is required"),l.postal_code.trim()?l.postal_code.length>20&&(S.postal_code="Postal code must be 20 characters or less"):S.postal_code="Postal code is required",l.delivery_instructions&&l.delivery_instructions.length>500&&(S.delivery_instructions="Delivery instructions must be 500 characters or less"),d(S),Object.keys(S).length===0},F=S=>{S.preventDefault(),d({}),_()&&(n?f.mutate({addressId:n,data:l}):y.mutate(l))},v=S=>{i(S.address_id),o({label:S.label,address_line1:S.address_line1,address_line2:S.address_line2,city:S.city,postal_code:S.postal_code,delivery_instructions:S.delivery_instructions,is_default:S.is_default}),a(!0),d({})},O=()=>{a(!1),i(null),M()},R=S=>{m(S)},C=()=>{u&&k.mutate(u)},z=S=>{T.mutate(S)},D=S=>{const E=S.toLowerCase();return E.includes("home")?e.jsx(Tu,{className:"w-5 h-5"}):E.includes("work")||E.includes("office")?e.jsx(P1,{className:"w-5 h-5"}):e.jsx(Ge,{className:"w-5 h-5"})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"My Delivery Addresses"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Manage your saved delivery addresses for faster checkout"})]}),!r&&e.jsxs("button",{onClick:()=>{a(!0),i(null),M()},className:"inline-flex items-center justify-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ht,{className:"w-5 h-5 mr-2"}),"Add New Address"]})]})}),b&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"w-5 h-5 text-green-600 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:b})]}),e.jsx("button",{onClick:()=>p(null),className:"text-green-600 hover:text-green-800",children:e.jsx(_e,{className:"w-5 h-5"})})]}),j&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Error loading addresses"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:j.message||"Please try again later"})]})]}),r&&e.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:n?"Edit Address":"Add New Address"})}),e.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[c.submit&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-800 text-sm",children:c.submit})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-900 mb-2",children:["Label ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"label",value:l.label,onChange:S=>{o(E=>({...E,label:S.target.value})),c.label&&d(E=>{const w={...E};return delete w.label,w})},placeholder:"e.g., Home, Work, Office",className:`w-full px-4 py-3 border-2 ${c.label?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.label&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),c.label]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address_line1",className:"block text-sm font-medium text-gray-900 mb-2",children:["Address Line 1 ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"address_line1",value:l.address_line1,onChange:S=>{o(E=>({...E,address_line1:S.target.value})),c.address_line1&&d(E=>{const w={...E};return delete w.address_line1,w})},placeholder:"Street address, building number",className:`w-full px-4 py-3 border-2 ${c.address_line1?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.address_line1&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),c.address_line1]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address_line2",className:"block text-sm font-medium text-gray-900 mb-2",children:"Address Line 2 (Optional)"}),e.jsx("input",{type:"text",id:"address_line2",value:l.address_line2||"",onChange:S=>o(E=>({...E,address_line2:S.target.value||null})),placeholder:"Apartment, suite, floor (optional)",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-900 mb-2",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"city",value:l.city,onChange:S=>{o(E=>({...E,city:S.target.value})),c.city&&d(E=>{const w={...E};return delete w.city,w})},placeholder:"Dublin",className:`w-full px-4 py-3 border-2 ${c.city?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.city&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),c.city]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-900 mb-2",children:["Postal Code (Eircode) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"postal_code",value:l.postal_code,onChange:S=>{o(E=>({...E,postal_code:S.target.value})),c.postal_code&&d(E=>{const w={...E};return delete w.postal_code,w})},placeholder:"D02 X285",className:`w-full px-4 py-3 border-2 ${c.postal_code?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200`}),c.postal_code&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),c.postal_code]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_instructions",className:"block text-sm font-medium text-gray-900 mb-2",children:"Delivery Instructions (Optional)"}),e.jsx("textarea",{id:"delivery_instructions",value:l.delivery_instructions||"",onChange:S=>o(E=>({...E,delivery_instructions:S.target.value||null})),placeholder:"Gate code, buzzer number, or special instructions...",rows:3,className:`w-full px-4 py-3 border-2 ${c.delivery_instructions?"border-red-300":"border-gray-200"} rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 resize-none`}),c.delivery_instructions&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),c.delivery_instructions]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:l.is_default,onChange:S=>o(E=>({...E,is_default:S.target.checked})),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-4 focus:ring-orange-100"}),e.jsx("label",{htmlFor:"is_default",className:"ml-3 text-gray-900 font-medium",children:"Set as default address"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:y.isPending||f.isPending,className:"flex-1 sm:flex-none px-8 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:y.isPending||f.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"Updating...":"Saving..."]}):n?"Update Address":"Save Address"}),e.jsx("button",{type:"button",onClick:O,className:"flex-1 sm:flex-none px-8 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"})]})]})]}),N&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin h-12 w-12 text-orange-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading addresses..."})]})}),!N&&!r&&h.length===0&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ge,{className:"w-12 h-12 text-orange-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Addresses Yet"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"You haven't added any delivery addresses yet. Add your first address to enable delivery orders."}),e.jsxs("button",{onClick:()=>{a(!0),i(null),M()},className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ht,{className:"w-5 h-5 mr-2"}),"Add Your First Address"]})]})}),!N&&h.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(S=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:`px-6 py-4 ${S.is_default?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-100 to-gray-50"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${S.is_default?"bg-white/20":"bg-white"}`,children:e.jsx("span",{className:S.is_default?"text-white":"text-gray-700",children:D(S.label)})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${S.is_default?"text-white":"text-gray-900"}`,children:S.label}),S.is_default&&e.jsxs("span",{className:"text-xs text-white/90 flex items-center mt-1",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),"Default Address"]})]})]})})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:S.address_line1}),S.address_line2&&e.jsx("p",{className:"text-gray-700 leading-relaxed",children:S.address_line2}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[S.city,", ",S.postal_code]})]}),S.delivery_instructions&&e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",S.delivery_instructions]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-100",children:[!S.is_default&&e.jsx("button",{onClick:()=>z(S.address_id),disabled:T.isPending,className:"flex-1 px-4 py-2 bg-green-50 text-green-700 font-medium rounded-lg hover:bg-green-100 focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 text-sm disabled:opacity-50",children:"Set as Default"}),e.jsxs("button",{onClick:()=>v(S),className:"px-4 py-2 bg-blue-50 text-blue-700 font-medium rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm flex items-center",children:[e.jsx(cn,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>R(S.address_id),className:"px-4 py-2 bg-red-50 text-red-700 font-medium rounded-lg hover:bg-red-100 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 text-sm flex items-center",children:[e.jsx(It,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]},S.address_id))}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ce,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Delete Address?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Are you sure you want to delete this address? This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:k.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:k.isPending?"Deleting...":"Delete"})]})]})})]})})})},i4=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",{headers:{Authorization:`Bearer ${t}`}})).data.payment_methods,l4=async(t,s)=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,o4=async(t,s)=>{await W.delete(`https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods/${t}`,{headers:{Authorization:`Bearer ${s}`}})},c4=async(t,s)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/payment-methods/${t}/default`,{},{headers:{Authorization:`Bearer ${s}`}})).data,d4=t=>{switch(t){case"Visa":return"bg-blue-600";case"Mastercard":return"bg-red-600";case"Amex":return"bg-green-600";case"Discover":return"bg-orange-600";default:return"bg-gray-600"}},u4=t=>`   ${t}`,m4=t=>{const s=t.replace(/\s/g,"");return s.startsWith("4")?"Visa":/^5[1-5]/.test(s)?"Mastercard":/^3[47]/.test(s)?"Amex":s.startsWith("6")?"Discover":"Visa"},h4=()=>`sumup_token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x4=()=>{const t=X(R=>R.authentication_state.auth_token),[s,r]=x.useState(!1),[a,n]=x.useState(null),[i,l]=x.useState(!1),[o,c]=x.useState(null),[d,u]=x.useState(null),[m,b]=x.useState({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),p=Fe(),{data:g=[],isLoading:h,error:N}=le({queryKey:["payment-methods"],queryFn:()=>i4(t||""),enabled:!!t,staleTime:5*60*1e3,retry:1}),j=ie({mutationFn:R=>l4(R,t||""),onSuccess:()=>{p.invalidateQueries({queryKey:["payment-methods"]}),u("Payment method added successfully!"),r(!1),b({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),setTimeout(()=>u(null),5e3)},onError:R=>{var z,D;const C=((D=(z=R.response)==null?void 0:z.data)==null?void 0:D.message)||"Failed to add payment method";c(C),setTimeout(()=>c(null),5e3)}}),y=ie({mutationFn:R=>o4(R,t||""),onSuccess:()=>{p.invalidateQueries({queryKey:["payment-methods"]}),u("Payment method removed successfully!"),l(!1),n(null),setTimeout(()=>u(null),5e3)},onError:R=>{var z,D;const C=((D=(z=R.response)==null?void 0:z.data)==null?void 0:D.message)||"Failed to remove payment method";c(C),l(!1),setTimeout(()=>c(null),5e3)}}),f=ie({mutationFn:R=>c4(R,t||""),onSuccess:()=>{p.invalidateQueries({queryKey:["payment-methods"]}),u("Default payment method updated!"),setTimeout(()=>u(null),5e3)},onError:R=>{var z,D;const C=((D=(z=R.response)==null?void 0:z.data)==null?void 0:D.message)||"Failed to update default payment method";c(C),setTimeout(()=>c(null),5e3)}}),k=()=>{r(!0),c(null)},T=()=>{r(!1),b({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:"",is_default:!1}),c(null)},M=(R,C)=>{b(z=>({...z,[R]:C})),c(null)},P=R=>{if(R.preventDefault(),c(null),!m.card_number||m.card_number.replace(/\s/g,"").length<13){c("Please enter a valid card number");return}if(!m.expiry_month||!m.expiry_year){c("Please enter card expiry date");return}if(!m.cvv||m.cvv.length<3){c("Please enter a valid CVV");return}if(!m.cardholder_name.trim()){c("Please enter cardholder name");return}const C=m.card_number.replace(/\s/g,""),z=C.slice(-4),D=m4(C),E={sumup_token:h4(),card_type:D,last_four_digits:z,expiry_month:m.expiry_month,expiry_year:m.expiry_year,cardholder_name:m.cardholder_name,is_default:m.is_default};j.mutate(E)},_=R=>{if(g.length===1){c("Cannot remove your only saved payment method"),setTimeout(()=>c(null),5e3);return}n(R),l(!0)},F=()=>{a&&y.mutate(a)},v=()=>{l(!1),n(null)},O=R=>{f.mutate(R)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Methods"}),e.jsx("p",{className:"mt-2 text-gray-600 leading-relaxed",children:"Manage your saved payment methods for faster checkout"})]}),e.jsx(H,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition-colors duration-200 text-sm font-medium",children:" Back to Profile"})]})}),d&&e.jsxs("div",{className:"mb-6 bg-green-50 border-2 border-green-200 text-green-800 px-6 py-4 rounded-xl flex items-start shadow-lg shadow-green-100",children:[e.jsx(qe,{className:"size-5 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"font-medium",children:d})]}),o&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-6 py-4 rounded-xl flex items-start shadow-lg shadow-red-100",children:[e.jsx(ce,{className:"size-5 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"font-medium",children:o})]}),N&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load payment methods. Please try again."})}),!s&&e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:k,disabled:h,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ht,{className:"size-5 mr-2"}),"Add New Card"]})}),s&&e.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Add New Payment Method"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Enter your card details securely"})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"card_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),e.jsx("input",{type:"text",id:"card_number",value:m.card_number,onChange:R=>{var D;const C=R.target.value.replace(/\D/g,""),z=((D=C.match(/.{1,4}/g))==null?void 0:D.join(" "))||C;M("card_number",z)},placeholder:"1234 5678 9012 3456",maxLength:19,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:j.isPending})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry_month",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month"}),e.jsx("input",{type:"text",id:"expiry_month",value:m.expiry_month,onChange:R=>M("expiry_month",R.target.value.replace(/\D/g,"").slice(0,2)),placeholder:"MM",maxLength:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:j.isPending})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry_year",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year"}),e.jsx("input",{type:"text",id:"expiry_year",value:m.expiry_year,onChange:R=>M("expiry_year",R.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"YYYY",maxLength:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:j.isPending})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cvv",className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),e.jsx("input",{type:"text",id:"cvv",value:m.cvv,onChange:R=>M("cvv",R.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"123",maxLength:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:j.isPending})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cardholder_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),e.jsx("input",{type:"text",id:"cardholder_name",value:m.cardholder_name,onChange:R=>M("cardholder_name",R.target.value),placeholder:"John Smith",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",disabled:j.isPending})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:m.is_default,onChange:R=>M("is_default",R.target.checked),className:"size-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:j.isPending}),e.jsx("label",{htmlFor:"is_default",className:"ml-3 text-sm font-medium text-gray-700",children:"Set as default payment method"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Secure Payment:"})," Your card information is encrypted and tokenized. We never store your full card number or CVV."]})}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:j.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Card..."]}):"Add Card"}),e.jsx("button",{type:"button",onClick:T,disabled:j.isPending,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),h&&e.jsx("div",{className:"space-y-6",children:[1,2].map(R=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},R))}),!h&&g.length>0&&e.jsx("div",{className:"space-y-6",children:g.map(R=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:`${d4(R.card_type)} text-white rounded-lg p-3 flex items-center justify-center shadow-lg`,children:e.jsx(ls,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:R.card_type}),R.is_default&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx(qe,{className:"size-3 mr-1"}),"Default"]})]}),e.jsx("p",{className:"text-gray-600 text-base font-mono mb-1",children:u4(R.last_four_digits)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Expires ",R.expiry_month,"/",R.expiry_year.slice(-2),"  ",R.cardholder_name]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[!R.is_default&&e.jsx("button",{onClick:()=>O(R.payment_method_id),disabled:f.isPending,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting..."]}):"Set as Default"}),e.jsxs("button",{onClick:()=>_(R.payment_method_id),disabled:y.isPending,className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium hover:bg-red-100 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(It,{className:"size-4 mr-2"}),"Remove"]})]})]})})},R.payment_method_id))}),!h&&g.length===0&&!s&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(ls,{className:"size-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Payment Methods Saved"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto leading-relaxed",children:"Add your first payment method for faster checkout and a smoother ordering experience."}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ht,{className:"size-5 mr-2"}),"Add Your First Card"]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx(ce,{className:"size-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Remove Payment Method?"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Are you sure you want to remove this payment method? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:v,disabled:y.isPending,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:y.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Removing..."]}):"Remove"})]})]})}),e.jsxs("div",{className:"mt-12 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Your Payment Security"}),e.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(qe,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"All payment data is encrypted using industry-standard SSL/TLS protocols"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(qe,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"We never store your full card number or CVV - only secure tokens"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(qe,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"CVV is required fresh for each transaction for your security"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(qe,{className:"size-5 mr-2 flex-shrink-0 mt-0.5 text-blue-600"}),e.jsx("span",{children:"Payment processing powered by SumUp - PCI DSS Level 1 compliant"})]})]})]})]})})})},wy="https://123salama-lama-food-truck.launchpulse.ai/api",g4=async t=>{const s=new URLSearchParams;return t.status&&s.append("status",t.status),t.order_type&&s.append("order_type",t.order_type),t.date_range&&s.append("date_range",t.date_range),t.query&&s.append("query",t.query),s.append("limit",t.limit.toString()),s.append("offset",t.offset.toString()),(await W.get(`${wy}/orders?${s.toString()}`,{headers:{Authorization:`Bearer ${t.auth_token}`}})).data},p4=async(t,s)=>(await W.get(`${wy}/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`}})).data,n0=t=>{const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)},i0=t=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(t),l0=t=>{const s="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(t){case"received":return`${s} bg-blue-100 text-blue-800`;case"preparing":return`${s} bg-yellow-100 text-yellow-800`;case"ready":case"completed":return`${s} bg-green-100 text-green-800`;case"out_for_delivery":return`${s} bg-purple-100 text-purple-800`;case"cancelled":return`${s} bg-red-100 text-red-800`;default:return`${s} bg-gray-100 text-gray-800`}},o0=t=>{switch(t){case"completed":return e.jsx(Eu,{className:"w-4 h-4 mr-1"});case"cancelled":return e.jsx(it,{className:"w-4 h-4 mr-1"});case"preparing":return e.jsx(Le,{className:"w-4 h-4 mr-1"});default:return e.jsx(ce,{className:"w-4 h-4 mr-1"})}},c0=t=>t.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),f4=()=>{const t=X(D=>D.authentication_state.auth_token),s=X(D=>D.add_to_cart),r=X(D=>D.cart_state.items),a=X(D=>D.clear_cart),[n,i]=Xe(),l=je(),[o,c]=x.useState(""),[d,u]=x.useState(""),m=n.get("status"),b=n.get("date_range"),p=n.get("order_type"),g=parseInt(n.get("page")||"1",10),h=20,{data:N,isLoading:j,isError:y,error:f,refetch:k}=le({queryKey:["orders",m,b,p,o,g],queryFn:()=>g4({auth_token:t,status:m,order_type:p,date_range:b,query:o,limit:h,offset:(g-1)*h}),enabled:!!t,staleTime:6e4,retry:1}),T=(N==null?void 0:N.orders)||[],M=(N==null?void 0:N.total)||0,P=Math.ceil(M/h),_=ie({mutationFn:D=>p4(D,t),onSuccess:D=>{window.open(D.invoice_url,"_blank")},onError:D=>{console.error("Failed to download invoice:",D),alert("Failed to download invoice. Please try again.")}}),F=(D,S)=>{const E=new URLSearchParams(n);S?E.set(D,S):E.delete(D),E.delete("page"),i(E)},v=()=>{i(new URLSearchParams),c(""),u("")};x.useEffect(()=>{const D=setTimeout(()=>{c(d);const S=new URLSearchParams(n);S.delete("page"),i(S)},500);return()=>clearTimeout(D)},[d]);const O=D=>{if(D<1||D>P)return;const S=new URLSearchParams(n);S.set("page",D.toString()),i(S),window.scrollTo({top:0,behavior:"smooth"})},R=D=>{if(r.length>0){if(!window.confirm("Your cart will be cleared and replaced with items from this order. Continue?"))return;a()}D.items.forEach(S=>{const E=S.selected_customizations?Object.entries(S.selected_customizations).map(([w,$])=>({group_name:w,option_name:typeof $=="string"?$:$.name||"",additional_price:0})):[];s({item_id:S.item_id,item_name:S.item_name,quantity:S.quantity,unit_price:S.unit_price,customizations:E,line_total:S.line_total})}),l("/cart")},C=D=>{_.mutate(D)},z=x.useMemo(()=>{let D=0;return m&&D++,b&&D++,p&&D++,o&&D++,D},[m,b,p,o]);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order History"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all your past orders"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by order number...",value:d,onChange:D=>u(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex items-center gap-3",children:z>0&&e.jsxs("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["Clear Filters (",z,")"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Qm,{className:"w-4 h-4 inline mr-1"}),"Status"]}),e.jsxs("select",{value:m||"",onChange:D=>F("status",D.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(cr,{className:"w-4 h-4 inline mr-1"}),"Date Range"]}),e.jsxs("select",{value:b||"",onChange:D=>F("date_range",D.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_3_months",children:"Last 3 Months"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-1"}),"Order Type"]}),e.jsxs("select",{value:p||"",onChange:D=>F("order_type",D.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"collection",children:"Collection"}),e.jsx("option",{value:"delivery",children:"Delivery"})]})]})]})]}),j?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your orders..."})]})}):y?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(it,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(f==null?void 0:f.message)||"An error occurred while loading your orders"}),e.jsx("button",{onClick:()=>k(),className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Try Again"})]})}):T.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o||z>0?"No Orders Found":"No Orders Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:o||z>0?"Try adjusting your filters or search terms":"You haven't placed any orders yet. Start ordering now!"}),o||z>0?e.jsx("button",{onClick:v,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Clear Filters"}):e.jsx(H,{to:"/menu",className:"inline-block px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Browse Menu"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(H,{to:`/orders/${D.order_id}`,className:"text-sm font-medium text-orange-600 hover:text-orange-700",children:["#",D.order_number]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:n0(D.created_at)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:D.order_type==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"w-4 h-4 mr-1.5"}),"Delivery"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 mr-1.5"}),"Collection"]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[D.items.length," ",D.items.length===1?"item":"items"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i0(D.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:l0(D.status),children:[o0(D.status),c0(D.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(H,{to:`/orders/${D.order_id}`,className:"text-gray-600 hover:text-gray-900 transition-colors p-1.5 rounded hover:bg-gray-100",title:"View Details",children:e.jsx(ma,{className:"w-4 h-4"})}),D.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(D),className:"text-orange-600 hover:text-orange-700 transition-colors p-1.5 rounded hover:bg-orange-50",title:"Reorder",children:e.jsx(Ao,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(D.order_id),disabled:_.isPending,className:"text-blue-600 hover:text-blue-700 transition-colors p-1.5 rounded hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Download Invoice",children:e.jsx(qt,{className:`w-4 h-4 ${_.isPending?"animate-spin":""}`})})]})]})})]},D.order_id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4 mb-6",children:T.map(D=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs(H,{to:`/orders/${D.order_id}`,className:"text-lg font-semibold text-orange-600 hover:text-orange-700",children:["#",D.order_number]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:n0(D.created_at)})]}),e.jsxs("span",{className:l0(D.status),children:[o0(D.status),c0(D.status)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Type"}),e.jsx("div",{className:"flex items-center text-sm text-gray-900",children:D.order_type==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"w-4 h-4 mr-1.5"}),"Delivery"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 mr-1.5"}),"Collection"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Items"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[D.items.length," ",D.items.length===1?"item":"items"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:i0(D.total_amount)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{to:`/orders/${D.order_id}`,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium text-sm hover:bg-gray-200 transition-colors text-center",children:"View Details"}),D.status==="completed"&&e.jsxs("button",{onClick:()=>R(D),className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-medium text-sm hover:bg-orange-700 transition-colors",children:[e.jsx(Ao,{className:"w-4 h-4 inline mr-1"}),"Reorder"]})]})]})]},D.order_id))}),P>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(g-1)*h+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(g*h,M)})," ","of ",e.jsx("span",{className:"font-medium",children:M})," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(g-1),disabled:g===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Bi,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,P)},(D,S)=>{let E;return P<=5||g<=3?E=S+1:g>=P-2?E=P-4+S:E=g-2+S,e.jsx("button",{onClick:()=>O(E),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${g===E?"bg-orange-600 text-white":"text-gray-700 hover:bg-gray-50"}`,children:E},E)})}),e.jsx("button",{onClick:()=>O(g+1),disabled:g===P,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx($e,{className:"w-5 h-5"})})]})]})})]})]})})})},y4=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,b4=async(t,s,r)=>(await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}/cancel`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,j4=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`}})).data,Jc=t=>new Date(t).toLocaleString("en-IE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),ea=t=>`${Number(t||0).toFixed(2)}`,d0=t=>({received:"bg-gray-100 text-gray-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-blue-100 text-blue-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",Zc=t=>({received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled"})[t]||t,v4=t=>{if(t.status!=="received")return!1;const s=new Date(t.created_at).getTime(),r=new Date().getTime(),a=5*60*1e3;return r-s<a},N4=()=>{var _,F;const{order_id:t}=Jt(),s=je(),r=Fe(),a=X(v=>v.authentication_state.auth_token),n=X(v=>v.add_to_cart),[i,l]=x.useState(!1),[o,c]=x.useState(""),{data:d,isLoading:u,isError:m,error:b}=le({queryKey:["order",t],queryFn:()=>y4(t,a),enabled:!!t&&!!a,staleTime:3e4,retry:1}),p=ie({mutationFn:v=>b4(t,v,a),onSuccess:v=>{r.setQueryData(["order",t],v),l(!1),c("")}}),g=d?v4(d):!1,h=(d==null?void 0:d.items)||[],N=(d==null?void 0:d.status_history)||[],j=x.useCallback(async()=>{if(!(!t||!a))try{const v=await j4(t,a);window.open(v.invoice_url,"_blank")}catch(v){console.error("Failed to download invoice:",v),alert("Failed to download invoice. Please try again.")}},[t,a]),y=x.useCallback(()=>{d&&(d.items.forEach(v=>{const O=v.selected_customizations?Object.entries(v.selected_customizations).map(([R,C])=>({group_name:R,option_name:typeof C=="string"?C:C.name||"",additional_price:0})):[];n({item_id:v.item_id,item_name:v.item_name,quantity:v.quantity,unit_price:v.unit_price,customizations:O,line_total:v.line_total})}),s("/cart"))},[d,n,s]),f=x.useCallback(()=>{s(`/orders/${t}/track`)},[t,s]),k=x.useCallback(()=>{if(!o.trim()){alert("Please provide a reason for cancellation");return}p.mutate({cancellation_reason:o})},[o,p]);if(u)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})});if(m||!d){const v=W.isAxiosError(b)&&((_=b.response)==null?void 0:_.status)===404?"Order not found":W.isAxiosError(b)&&((F=b.response)==null?void 0:F.status)===403?"You don't have permission to view this order":"Failed to load order details";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx(ce,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:v}),e.jsx("p",{className:"text-gray-600 mb-6",children:v==="Order not found"?"The order you are looking for does not exist or may have been deleted.":"Please try again or contact support if the problem persists."}),e.jsxs(H,{to:"/orders",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(dt,{className:"h-5 w-5 mr-2"}),"Back to Orders"]})]})})})})}const T=d.order_type==="collection"?["received","preparing","ready","completed"]:["received","preparing","out_for_delivery","completed"],M=T.indexOf(d.status),P=d.status==="cancelled";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(H,{to:"/orders",className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[e.jsx(dt,{className:"h-5 w-5 mr-2"}),"Back to Orders"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",d.order_number]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Placed on ",Jc(d.created_at)]})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg font-semibold ${d0(d.status)}`,children:Zc(d.status)})]})]}),!P&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-200",children:e.jsx("div",{className:"h-full bg-orange-600 transition-all duration-500",style:{width:`${(M+1)/T.length*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:T.map((v,O)=>{const R=O<=M,C=Zc(v);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ${R?"bg-orange-600 border-orange-600":"bg-white border-gray-300"}`,children:R?e.jsx(we,{className:"h-6 w-6 text-white"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"})}),e.jsx("span",{className:`mt-2 text-sm font-medium ${R?"text-gray-900":"text-gray-500"}`,children:C})]},v)})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Pe,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Order Type"}),e.jsx("p",{className:"text-base text-gray-900 capitalize",children:d.order_type})]})]}),d.order_type==="collection"&&d.collection_time_slot&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Le,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Collection Time"}),e.jsx("p",{className:"text-base text-gray-900",children:Jc(d.collection_time_slot)})]})]}),d.order_type==="delivery"&&d.delivery_address_snapshot&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ge,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Delivery Address"}),e.jsxs("p",{className:"text-base text-gray-900",children:[d.delivery_address_snapshot.address_line1,d.delivery_address_snapshot.address_line2&&e.jsxs(e.Fragment,{children:[", ",d.delivery_address_snapshot.address_line2]})]}),e.jsxs("p",{className:"text-base text-gray-900",children:[d.delivery_address_snapshot.city,","," ",d.delivery_address_snapshot.postal_code]}),d.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Note: ",d.delivery_address_snapshot.delivery_instructions]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(zt,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("a",{href:`tel:${d.customer_phone}`,className:"text-base text-orange-600 hover:text-orange-700",children:d.customer_phone})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(lt,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("a",{href:`mailto:${d.customer_email}`,className:"text-base text-orange-600 hover:text-orange-700",children:d.customer_email})]})]})]})]}),d.special_instructions&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Special Instructions"}),e.jsx("p",{className:"text-sm text-yellow-800",children:d.special_instructions})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:h.map(v=>e.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:v.item_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",v.quantity]}),v.selected_customizations&&Object.keys(v.selected_customizations).length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(v.selected_customizations).map(([O,R])=>e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[O,":"]})," ",typeof R=="string"?R:R.name||R]},O))})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:ea(v.line_total)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ea(v.unit_price)," each"]})]})]},v.order_item_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:ea(d.subtotal)})]}),d.discount_code&&d.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount (",d.discount_code,")"]}),e.jsxs("span",{children:["-",ea(d.discount_amount)]})]}),d.delivery_fee&&d.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:ea(d.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsx("span",{children:ea(d.tax_amount)})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:ea(d.total_amount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(ls,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"text-base text-gray-900",children:d.payment_method_type||"Cash on Collection"})]})]}),d.sumup_transaction_id&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Pe,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"text-base text-gray-900 font-mono text-sm",children:d.sumup_transaction_id})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(we,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payment Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-semibold ${d.payment_status==="paid"?"bg-green-100 text-green-800":d.payment_status==="pending"?"bg-yellow-100 text-yellow-800":d.payment_status==="refunded"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:d.payment_status.charAt(0).toUpperCase()+d.payment_status.slice(1)})]})]}),d.loyalty_points_awarded>0&&e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-orange-900",children:["You earned ",d.loyalty_points_awarded," loyalty points from this order!"]})})]})]}),N.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status History"}),e.jsx("div",{className:"space-y-4",children:N.sort((v,O)=>new Date(O.changed_at).getTime()-new Date(v.changed_at).getTime()).map(v=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d0(v.status)}`,children:v.status==="completed"?e.jsx(we,{className:"h-5 w-5"}):v.status==="cancelled"?e.jsx(it,{className:"h-5 w-5"}):v.status==="preparing"?e.jsx(F1,{className:"h-5 w-5"}):v.status==="out_for_delivery"?e.jsx(Ma,{className:"h-5 w-5"}):e.jsx(Pe,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:Zc(v.status)}),e.jsx("p",{className:"text-sm text-gray-600",children:Jc(v.changed_at)}),v.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.notes})]})]},v.history_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.status!=="completed"&&d.status!=="cancelled"&&e.jsxs("button",{onClick:f,className:"flex items-center justify-center px-4 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2"}),"Track Order"]}),e.jsxs("button",{onClick:j,className:"flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(qt,{className:"h-5 w-5 mr-2"}),"Invoice"]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(Qt,{className:"h-5 w-5 mr-2"}),"Reorder"]}),g&&e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center px-4 py-3 bg-red-100 text-red-700 rounded-lg font-medium hover:bg-red-200 transition-colors",children:[e.jsx(it,{className:"h-5 w-5 mr-2"}),"Cancel"]})]}),d.status==="cancelled"&&d.cancellation_reason&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Cancellation Reason"}),e.jsx("p",{className:"text-sm text-red-800",children:d.cancellation_reason})]})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>l(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(it,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Cancel Order"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to cancel order #",d.order_number,"? This action cannot be undone."]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for cancellation ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"cancellation_reason",rows:3,value:o,onChange:v=>c(v.target.value),placeholder:"Please tell us why you're cancelling...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),p.isError&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to cancel order. Please try again or contact support."})})]})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:k,disabled:p.isPending||!o.trim(),className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:p.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Confirm Cancellation"}),e.jsx("button",{type:"button",onClick:()=>l(!1),disabled:p.isPending,className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})]})},Oa="https://123salama-lama-food-truck.launchpulse.ai",w4=async t=>(await W.get(`${Oa}/api/loyalty`,{headers:{Authorization:`Bearer ${t}`}})).data,_4=async(t,s,r)=>(await W.get(`${Oa}/api/loyalty/points/history`,{headers:{Authorization:`Bearer ${t}`},params:{limit:s,offset:r}})).data,k4=async t=>(await W.get(`${Oa}/api/loyalty/rewards`,{headers:{Authorization:`Bearer ${t}`}})).data.rewards,C4=async t=>(await W.get(`${Oa}/api/loyalty/redeemed-rewards`,{headers:{Authorization:`Bearer ${t}`}})).data.redeemed_rewards,S4=async t=>(await W.get(`${Oa}/api/loyalty/badges`,{headers:{Authorization:`Bearer ${t}`}})).data,P4=async t=>(await W.get(`${Oa}/api/loyalty/referral`,{headers:{Authorization:`Bearer ${t}`}})).data,E4=async(t,s)=>(await W.post(`${Oa}/api/loyalty/rewards/${s}/redeem`,{},{headers:{Authorization:`Bearer ${t}`}})).data,F4=()=>{const t=X(Q=>Q.authentication_state.current_user),s=X(Q=>Q.authentication_state.auth_token),[r,a]=x.useState(1),[n,i]=x.useState(null),[l,o]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(!1),[b,p]=x.useState(null),[g,h]=x.useState(!1),N=50,j=Fe(),{data:y,isLoading:f,error:k}=le({queryKey:["loyalty-account",t==null?void 0:t.user_id],queryFn:()=>w4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:T,isLoading:M,error:P}=le({queryKey:["points-history",t==null?void 0:t.user_id,r],queryFn:()=>_4(s,N,(r-1)*N),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:_,isLoading:F,error:v}=le({queryKey:["available-rewards",t==null?void 0:t.user_id],queryFn:()=>k4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:O}=le({queryKey:["redeemed-rewards",t==null?void 0:t.user_id],queryFn:()=>C4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:R,isLoading:C,error:z}=le({queryKey:["badges",t==null?void 0:t.user_id],queryFn:()=>S4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),{data:D}=le({queryKey:["referral-info",t==null?void 0:t.user_id],queryFn:()=>P4(s),enabled:!!s&&!!t,staleTime:5*60*1e3}),S=ie({mutationFn:Q=>E4(s,Q),onSuccess:Q=>{j.invalidateQueries({queryKey:["loyalty-account",t==null?void 0:t.user_id]}),j.invalidateQueries({queryKey:["redeemed-rewards",t==null?void 0:t.user_id]}),j.invalidateQueries({queryKey:["available-rewards",t==null?void 0:t.user_id]}),p(Q),o(!1),m(!0),i(null)},onError:Q=>{var K,G;alert(((G=(K=Q.response)==null?void 0:K.data)==null?void 0:G.message)||"Failed to redeem reward. Please try again."),i(null),o(!1)}}),E=Q=>{if(!y||y.current_points_balance<Q.points_cost){alert(`You need ${Q.points_cost-((y==null?void 0:y.current_points_balance)||0)} more points to redeem this reward.`);return}d(Q),o(!0)},w=()=>{c&&(i(c.reward_id),S.mutate(c.reward_id))},$=async()=>{if(D!=null&&D.referral_code)try{await navigator.clipboard.writeText(D.referral_code),h(!0),setTimeout(()=>h(!1),2e3)}catch(Q){console.error("Failed to copy:",Q)}},B=async Q=>{try{await navigator.clipboard.writeText(Q),alert("Reward code copied to clipboard!")}catch(K){console.error("Failed to copy:",K)}},I=()=>{D!=null&&D.referral_link&&(navigator.share?navigator.share({title:"Join Salama Lama Food Truck",text:"Use my referral code to get rewards!",url:D.referral_link}).catch(Q=>console.error("Share failed:",Q)):(navigator.clipboard.writeText(D.referral_link),alert("Referral link copied to clipboard!")))},q=Math.ceil(((T==null?void 0:T.total)||0)/N),L=(()=>{if(!y)return null;const Q=[100,250,500,1e3,2500,5e3],K=y.current_points_balance,G=Q.find(J=>J>K);return G?{points:G,remaining:G-K,progress:K/G*100}:null})(),U=Q=>new Date(Q).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),Y=Q=>Q.replace("_"," ").replace(/\b\w/g,K=>K.toUpperCase());return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"My Rewards"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Earn points, unlock rewards, and share the love with friends!"})]}),f?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded w-1/2 mx-auto"})]}):k?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl mb-12",children:e.jsx("p",{className:"font-medium",children:"Failed to load loyalty account"})}):y?e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-xl p-8 mb-12 text-white",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-blue-100 text-lg mb-2",children:"Your Points Balance"}),e.jsx("p",{className:"text-6xl font-bold mb-2",children:y.current_points_balance.toLocaleString()}),e.jsxs("p",{className:"text-blue-100",children:[y.total_points_earned.toLocaleString()," total earned  ",y.total_points_redeemed.toLocaleString()," redeemed"]})]}),L&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-sm text-blue-100",children:"Next Milestone"}),e.jsxs("p",{className:"text-sm font-medium",children:[L.points.toLocaleString()," points"]})]}),e.jsx("div",{className:"w-full bg-blue-800 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-white h-full rounded-full transition-all duration-500",style:{width:`${Math.min(L.progress,100)}%`}})}),e.jsxs("p",{className:"text-sm text-blue-100 mt-2 text-center",children:["Only ",L.remaining.toLocaleString()," more points to go!"]})]})]}):null,e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Redeem Your Points"}),e.jsx(H,{to:"/menu",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Earn More Points "})]}),F?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(Q=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]},Q))}):v?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load rewards"})}):_&&_.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.filter(Q=>Q.status==="active").map(Q=>{const K=y&&y.current_points_balance>=Q.points_cost,G=Q.availability_status==="unavailable"||Q.status==="out_of_stock";return e.jsxs("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-200 hover:shadow-xl ${!K||G?"opacity-60":""}`,children:[Q.image_url&&e.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:e.jsx("img",{src:Q.image_url,alt:Q.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Q.name}),Q.availability_status==="limited"&&e.jsx("span",{className:"bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded",children:"Limited"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:Q.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-5 h-5 text-blue-600 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:Q.points_cost.toLocaleString()})]}),e.jsx("button",{onClick:()=>E(Q),disabled:!K||G||n===Q.reward_id,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${!K||G?"bg-gray-200 text-gray-500 cursor-not-allowed":n===Q.reward_id?"bg-blue-400 text-white cursor-wait":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg"}`,children:n===Q.reward_id?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Redeeming..."]}):G?"Out of Stock":K?"Redeem":"Not Enough Points"})]})]})]},Q.reward_id)})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No rewards available at the moment."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Check back soon for exciting new rewards!"})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Your Achievements"}),C?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[1,2,3,4,5,6].map(Q=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})]},Q))}):z?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load badges"})}):R?e.jsxs("div",{className:"space-y-8",children:[R.earned.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Earned Badges"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:R.earned.map(Q=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-200 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:Q.icon_url?e.jsx("img",{src:Q.icon_url,alt:Q.name,className:"w-10 h-10"}):e.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:Q.description}),Q.earned_at&&e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:U(Q.earned_at)})]},Q.badge_id))})]}),R.locked.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Locked Badges"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:R.locked.map(Q=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg opacity-60 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),e.jsx("h4",{className:"font-semibold text-gray-700 text-sm mb-1",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:Q.description})]},Q.badge_id))})]})]}):null]}),O&&O.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Redeemed Rewards"}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reward Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Redeemed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"font-mono font-semibold text-blue-600",children:Q.reward_code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.points_deducted.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Q.usage_status==="unused"?"bg-green-100 text-green-800":Q.usage_status==="used"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:Q.usage_status==="unused"?"Active":Q.usage_status==="used"?"Used":"Expired"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(Q.redeemed_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.expires_at?U(Q.expires_at):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Q.usage_status==="unused"&&e.jsx("button",{onClick:()=>B(Q.reward_code),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Copy Code"})})]},Q.redeemed_reward_id))})]})})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Points History"}),M?e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(Q=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]},Q))})}):P?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:e.jsx("p",{className:"font-medium",children:"Failed to load points history"})}):T&&T.transactions.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.transactions.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(Q.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Q.transaction_type==="earned"?"bg-green-100 text-green-800":Q.transaction_type==="redeemed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Y(Q.transaction_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:Q.reason||(Q.order_id?`Order #${Q.order_id.slice(-8)}`:"-")}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold text-right ${Q.points_amount>0?"text-green-600":"text-red-600"}`,children:[Q.points_amount>0?"+":"",Q.points_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:Q.running_balance.toLocaleString()})]},Q.transaction_id))})]})}),q>1&&e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>a(Q=>Math.max(1,Q-1)),disabled:r===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>a(Q=>Math.min(q,Q+1)),disabled:r===q,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:r})," of"," ",e.jsx("span",{className:"font-medium",children:q})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>a(Q=>Math.max(1,Q-1)),disabled:r===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,q)},(Q,K)=>{const G=K+1;return e.jsx("button",{onClick:()=>a(G),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${r===G?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:G},G)}),e.jsxs("button",{onClick:()=>a(Q=>Math.min(q,Q+1)),disabled:r===q,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No points transactions yet."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start ordering to earn points!"})]})]}),D&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Refer a Friend"}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-700 rounded-xl shadow-xl p-8 text-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Share the Love, Earn Rewards!"}),e.jsx("p",{className:"text-green-100",children:"Invite your friends and you'll both get rewarded when they place their first order."})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-green-100 font-medium",children:"Your Referral Code"}),e.jsx("button",{onClick:$,className:"bg-white text-green-700 px-4 py-2 rounded-lg font-medium hover:bg-green-50 transition-colors",children:g?e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Copied!"]}):"Copy Code"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 text-center",children:e.jsx("span",{className:"text-3xl font-bold text-green-700 tracking-wider",children:D.referral_code})})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("button",{onClick:I,className:"bg-white text-green-700 px-8 py-3 rounded-lg font-medium hover:bg-green-50 transition-all duration-200 hover:shadow-lg",children:"Share Referral Link"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:D.referral_count}),e.jsx("p",{className:"text-green-100 text-sm",children:"Total Referrals"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:D.successful_referrals}),e.jsx("p",{className:"text-green-100 text-sm",children:"Successful"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:D.total_points_earned}),e.jsx("p",{className:"text-green-100 text-sm",children:"Points Earned"})]})]})]})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Want to earn more points?"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx(H,{to:"/menu",className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 hover:shadow-lg",children:"Order Now"}),e.jsx(H,{to:"/orders",className:"bg-white text-blue-600 border-2 border-blue-600 px-8 py-3 rounded-lg font-medium hover:bg-blue-50 transition-all duration-200",children:"View My Orders"})]})]})]})}),l&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Confirm Redemption"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to redeem ",e.jsx("strong",{children:c.points_cost.toLocaleString()})," points for"," ",e.jsx("strong",{children:c.name}),"?"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Your new balance will be:"," ",e.jsxs("strong",{children:[y?(y.current_points_balance-c.points_cost).toLocaleString():"0"," ","points"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{o(!1),d(null)},className:"flex-1 px-6 py-3 rounded-lg font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:w,className:"flex-1 px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Confirm"})]})]})}),u&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reward Redeemed!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your reward code is:"}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4",children:e.jsx("span",{className:"text-3xl font-bold text-blue-700 tracking-wider",children:b.reward_code})}),e.jsx("button",{onClick:()=>B(b.reward_code),className:"text-blue-600 hover:text-blue-700 font-medium mb-4",children:"Copy Code"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Use this code at checkout to apply your reward.",b.expires_at&&` Expires on ${U(b.expires_at)}.`]})]}),e.jsx("button",{onClick:()=>{m(!1),p(null)},className:"w-full px-6 py-3 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Got It"})]})})]})},T4=async()=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/catering/info")).data,A4=()=>{const[t,s]=x.useState(null),{data:r,isLoading:a,error:n}=le({queryKey:["cateringInfo"],queryFn:T4,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),i=[{question:"What is the minimum order requirement for catering?",answer:"Our minimum catering order is for 20 guests. We can accommodate events of any size, from intimate gatherings to large corporate functions."},{question:"How far in advance should I book catering?",answer:"We recommend booking at least 7 days in advance to ensure availability. However, we can sometimes accommodate last-minute requests depending on our schedule."},{question:"Do you provide equipment and setup?",answer:"Yes! We provide all necessary serving equipment, setup, and cleanup. Our team will arrive early to set up and will handle all cleanup after your event."},{question:"Can you accommodate dietary restrictions?",answer:"Absolutely! We offer vegetarian, vegan, gluten-free, halal, and nut-free options. Just let us know your requirements when submitting your inquiry."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, bank transfers, and company purchase orders for corporate events. A deposit is required to secure your booking."},{question:"What is your cancellation policy?",answer:"Cancellations made 72 hours or more before the event will receive a full refund of the deposit. Cancellations within 72 hours are subject to a 50% cancellation fee."}],l=[{name:"Corporate Events",description:"Team lunches, meetings, conferences",icon:""},{name:"Weddings",description:"Ceremony receptions, rehearsal dinners",icon:""},{name:"Private Parties",description:"Birthdays, anniversaries, celebrations",icon:""},{name:"Festivals & Markets",description:"Food festivals, farmers markets",icon:""},{name:"Community Events",description:"Fundraisers, charity events, gatherings",icon:""}],o=[{number:1,title:"Submit Inquiry",description:"Fill out our catering inquiry form with your event details",icon:""},{number:2,title:"Receive Custom Quote",description:"We'll send you a detailed quote within 24 hours",icon:""},{number:3,title:"Finalize Details",description:"Work with us to customize your menu and confirm arrangements",icon:""},{number:4,title:"Enjoy Your Event",description:"We handle everything - setup, service, and cleanup",icon:""}],c=d=>{s(t===d?null:d)};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"relative bg-gradient-to-br from-orange-50 to-red-50 py-16 md:py-24 lg:py-32",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:"Catering for Every Occasion"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-700 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Bring the authentic taste of our food truck to your next event. From corporate lunches to weddings, we make every occasion special."}),e.jsx(H,{to:"/catering/inquiry",className:"inline-block bg-orange-600 hover:bg-orange-700 text-white font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-lg hover:scale-105",children:"Request a Quote"})]})})}),a&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading catering information..."})]})}),n&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-800 font-medium mb-4",children:"Failed to load catering information"}),e.jsx("p",{className:"text-red-600 text-sm mb-4",children:n.message}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Please try refreshing the page or contact us directly."})]})}),!a&&!n&&r&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Our Catering Services"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:r.description||"We bring our award-winning menu directly to your event. Our mobile catering service combines convenience with exceptional food quality, ensuring your guests enjoy a memorable dining experience. Whether it's an intimate gathering or a large celebration, we have the perfect solution for you."})]})})}),e.jsx("section",{className:"py-16 md:py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Events We Serve"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"From corporate functions to private celebrations, we cater to all types of events"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((d,u)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"text-5xl mb-4",children:d.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.name}),e.jsx("p",{className:"text-gray-600",children:d.description})]},u))})]})}),r.packages&&r.packages.length>0&&e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Packages"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose from our curated packages or let us create a custom menu for your event"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.packages.map((d,u)=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 rounded-xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-all duration-200 hover:scale-105",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:d.name}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:d.description}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-baseline justify-center mb-2",children:[e.jsxs("span",{className:"text-4xl font-bold text-orange-600",children:["",Number(d.price_per_person||0).toFixed(2)]}),e.jsx("span",{className:"text-gray-600 ml-2",children:"per person"})]}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Minimum ",d.min_guests," guests"]})]}),e.jsx(H,{to:`/catering/inquiry?package=${encodeURIComponent(d.name)}`,className:"block w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold text-center px-6 py-3 rounded-lg transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",children:"Request Quote"})]},u))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our simple 4-step process makes catering your event effortless"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:o.map(d=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-6",children:[e.jsx("div",{className:"text-6xl mb-2",children:d.icon}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-orange-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg shadow-lg",children:d.number})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.title}),e.jsx("p",{className:"text-gray-600",children:d.description})]},d.number))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Have questions? We have answers."})]}),e.jsx("div",{className:"space-y-4",children:i.map((d,u)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsxs("button",{onClick:()=>c(u),className:"w-full px-6 py-4 text-left flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded-lg","aria-expanded":t===u,"aria-label":`Toggle FAQ: ${d.question}`,children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900 pr-4",children:d.question}),e.jsx("svg",{className:`w-6 h-6 text-orange-600 flex-shrink-0 transition-transform duration-200 ${t===u?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t===u&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:d.answer})})]},u))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-gradient-to-br from-orange-600 to-red-600",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Ready to Make Your Event Special?"}),e.jsx("p",{className:"text-xl text-orange-100 mb-8 leading-relaxed",children:"Get a custom quote today and let us handle all the details. Our team is ready to make your event unforgettable."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(H,{to:"/catering/inquiry",className:"inline-block bg-white hover:bg-gray-100 text-orange-600 font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",children:"Request a Quote"}),e.jsx(H,{to:"/contact",className:"inline-block bg-orange-700 hover:bg-orange-800 text-white font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",children:"Contact Us"})]}),e.jsxs("p",{className:"mt-6 text-orange-100 text-sm",children:["Questions? Call us at"," ",e.jsx("a",{href:"tel:+353-1-234-5678",className:"underline hover:text-white transition-colors",children:"+353-1-234-5678"})," ","or email"," ",e.jsx("a",{href:"mailto:catering@salamalama.ie",className:"underline hover:text-white transition-colors",children:"catering@salamalama.ie"})]})]})})]})]})},M4="https://123salama-lama-food-truck.launchpulse.ai",L4=()=>{const t=je(),s=X(P=>P.authentication_state.current_user),r=X(P=>P.authentication_state.auth_token),[a,n]=x.useState({contact_name:"",contact_email:"",contact_phone:"",company_name:null,event_type:"",event_type_other:null,event_date:"",event_start_time:"",event_end_time:"",event_location_address:"",event_location_city:"Dublin",event_location_postal_code:"",event_location_type:"",guest_count:0,guest_count_min:null,guest_count_max:null,dietary_requirements:[],dietary_notes:null,menu_preferences:null,preferred_package:null,budget_range:null,additional_details:null,marketing_opt_in:!1}),[i,l]=x.useState({}),[o,c]=x.useState(!1),[d,u]=x.useState(null);x.useEffect(()=>{s&&n(P=>({...P,contact_name:`${s.first_name} ${s.last_name}`,contact_email:s.email,contact_phone:s.phone}))},[s]);const m=ie({mutationFn:async P=>{const _={"Content-Type":"application/json"};return r&&(_.Authorization=`Bearer ${r}`),(await W.post(`${M4}/api/catering/inquiry`,P,{headers:_})).data},onSuccess:P=>{u(P),c(!0),n({contact_name:s?`${s.first_name} ${s.last_name}`:"",contact_email:(s==null?void 0:s.email)||"",contact_phone:(s==null?void 0:s.phone)||"",company_name:null,event_type:"",event_type_other:null,event_date:"",event_start_time:"",event_end_time:"",event_location_address:"",event_location_city:"Dublin",event_location_postal_code:"",event_location_type:"",guest_count:0,guest_count_min:null,guest_count_max:null,dietary_requirements:[],dietary_notes:null,menu_preferences:null,preferred_package:null,budget_range:null,additional_details:null,marketing_opt_in:!1}),l({})},onError:P=>{var F,v;console.error("Catering inquiry submission error:",P);const _=((v=(F=P.response)==null?void 0:F.data)==null?void 0:v.message)||P.message||"Failed to submit inquiry";l({submit:_})}}),b=P=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P),p=P=>/^\+?[\d\s\-()]{10,20}$/.test(P),g=P=>{if(!P)return!1;let _=P;if(P.includes(":")&&P.split(":").length===3){const v=P.split(":");_=`${v[0]}:${v[1]}`}return/^([01]\d|2[0-3]):([0-5]\d)$/.test(_)},h=P=>{if(!P)return!1;const _=new Date;_.setHours(0,0,0,0);const F=new Date(P);F.setHours(0,0,0,0);const v=new Date(_);return v.setDate(v.getDate()+7),F>=v},N=x.useCallback((P,_)=>{if(["contact_name","contact_email","contact_phone","event_type","event_date","event_start_time","event_end_time","event_location_address","event_location_city","event_location_postal_code","event_location_type","guest_count"].includes(P)&&(!_||typeof _=="string"&&_.trim()===""||typeof _=="number"&&_<=0))return"This field is required";switch(P){case"contact_email":if(_&&!b(_))return"Please enter a valid email address";break;case"contact_phone":if(_&&!p(_))return"Please enter a valid phone number (10-20 digits)";break;case"event_date":if(_&&!h(_))return"Event date must be at least 7 days from today";break;case"event_start_time":case"event_end_time":if(_&&!g(_))return"Please enter time in HH:MM format (e.g., 14:30)";break;case"guest_count":if(_&&(typeof _!="number"||_<=0))return"Guest count must be a positive number";break;case"event_type_other":if(a.event_type==="other"&&(!_||_.trim()===""))return"Please specify the event type";break}return null},[a.event_type]),j=x.useCallback(()=>{const P={};return console.log("Validating form with formData:",a),Object.keys(a).forEach(_=>{const F=N(_,a[_]);F&&(console.log(`Validation error for ${_}:`,F,"Value:",a[_]),P[_]=F)}),console.log("Total validation errors:",Object.keys(P).length,P),l(P),{isValid:Object.keys(P).length===0,errors:P}},[a,N]),y=(P,_)=>{n(F=>({...F,[P]:_})),i[P]&&l(F=>{const v={...F};return delete v[P],v})},f=P=>{const _=N(P,a[P]);_&&l(F=>({...F,[P]:_}))},k=P=>{n(_=>{const F=_.dietary_requirements||[],v=F.includes(P)?F.filter(O=>O!==P):[...F,P];return{..._,dietary_requirements:v}})},T=async P=>{P.preventDefault();const _=j();if(!_.isValid){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const v=Object.keys(_.errors)[0];if(v){const O=document.getElementById(v);O==null||O.focus(),O==null||O.scrollIntoView({behavior:"smooth",block:"center"})}},300);return}const F={...a,user_id:(s==null?void 0:s.user_id)||void 0,guest_count:Number(a.guest_count),guest_count_min:a.guest_count_min?Number(a.guest_count_min):null,guest_count_max:a.guest_count_max?Number(a.guest_count_max):null,dietary_requirements:a.dietary_requirements.length>0?a.dietary_requirements:null};m.mutate(F)},M=()=>{c(!1),t(s?"/catering/inquiries":"/menu")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Request a Catering Quote"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Tell us about your event and we'll get back to you within 24 hours"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8",children:e.jsxs("form",{onSubmit:T,className:"space-y-8",noValidate:!0,children:[i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm text-red-700",children:i.submit})]})}),Object.keys(i).length>0&&!i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-red-700 mb-1",children:"Please correct the following errors:"}),e.jsx("ul",{className:"text-sm text-red-600 list-disc list-inside space-y-1",children:Object.entries(i).map(([P,_])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-medium",children:[P.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase()),":"]})," ",_]},P))})]})]})}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"contact_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"contact_name",value:a.contact_name,onChange:P=>y("contact_name",P.target.value),onBlur:()=>f("contact_name"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_name?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"John Smith"}),i.contact_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"contact_email",value:a.contact_email,onChange:P=>y("contact_email",P.target.value),onBlur:()=>f("contact_email"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_email?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"john.smith@example.com"}),i.contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",id:"contact_phone",value:a.contact_phone,onChange:P=>y("contact_phone",P.target.value),onBlur:()=>f("contact_phone"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.contact_phone?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"+353 1 234 5678"}),i.contact_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.contact_phone})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company / Organization Name (Optional)"}),e.jsx("input",{type:"text",id:"company_name",value:a.company_name||"",onChange:P=>y("company_name",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"ABC Corporation"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"event_type",value:a.event_type,onChange:P=>y("event_type",P.target.value),onBlur:()=>f("event_type"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_type?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,children:[e.jsx("option",{value:"",children:"Select event type"}),e.jsx("option",{value:"corporate",children:"Corporate Event"}),e.jsx("option",{value:"wedding",children:"Wedding"}),e.jsx("option",{value:"birthday",children:"Birthday Party"}),e.jsx("option",{value:"meeting",children:"Meeting / Conference"}),e.jsx("option",{value:"other",children:"Other"})]}),i.event_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_type})]}),a.event_type==="other"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_type_other",className:"block text-sm font-medium text-gray-700 mb-1",children:["Please Specify ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_type_other",value:a.event_type_other||"",onChange:P=>y("event_type_other",P.target.value||null),onBlur:()=>f("event_type_other"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_type_other?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"Describe your event type"}),i.event_type_other&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_type_other})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Date ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",id:"event_date",name:"event_date",autoComplete:"off",value:a.event_date,onChange:P=>{const _=P.target.value;n(F=>({...F,event_date:_})),i.event_date&&l(F=>{const v={...F};return delete v.event_date,v})},onBlur:P=>{const _=P.target.value,F=N("event_date",_);F&&l(v=>({...v,event_date:F}))},min:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_date?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_date}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum 7 days lead time required"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_start_time",className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"time",id:"event_start_time",name:"event_start_time",autoComplete:"off",value:a.event_start_time,onChange:P=>{const _=P.target.value;n(F=>({...F,event_start_time:_})),i.event_start_time&&l(F=>{const v={...F};return delete v.event_start_time,v})},onBlur:P=>{const _=P.target.value,F=N("event_start_time",_);F&&l(v=>({...v,event_start_time:F}))},className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_start_time?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_start_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_end_time",className:"block text-sm font-medium text-gray-700 mb-1",children:["End Time ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"time",id:"event_end_time",name:"event_end_time",autoComplete:"off",value:a.event_end_time,onChange:P=>{const _=P.target.value;n(F=>({...F,event_end_time:_})),i.event_end_time&&l(F=>{const v={...F};return delete v.event_end_time,v})},onBlur:P=>{const _=P.target.value,F=N("event_end_time",_);F&&l(v=>({...v,event_end_time:F}))},className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_end_time?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`}),i.event_end_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_end_time})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Venue Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"event_location_address",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_address",value:a.event_location_address,onChange:P=>y("event_location_address",P.target.value),onBlur:()=>f("event_location_address"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_address?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"123 Main Street, Venue Name"}),i.event_location_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_address})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_location_city",className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_city",value:a.event_location_city,onChange:P=>y("event_location_city",P.target.value),onBlur:()=>f("event_location_city"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_city?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"Dublin"}),i.event_location_city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"event_location_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:["Postal Code ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"event_location_postal_code",value:a.event_location_postal_code,onChange:P=>y("event_location_postal_code",P.target.value),onBlur:()=>f("event_location_postal_code"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_postal_code?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"D01 A1B2"}),i.event_location_postal_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_postal_code})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"event_location_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Venue Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"event_location_type",value:a.event_location_type,onChange:P=>y("event_location_type",P.target.value),onBlur:()=>f("event_location_type"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.event_location_type?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,children:[e.jsx("option",{value:"",children:"Select venue type"}),e.jsx("option",{value:"office",children:"Office / Corporate Space"}),e.jsx("option",{value:"home",children:"Private Home"}),e.jsx("option",{value:"venue",children:"Event Venue / Hall"}),e.jsx("option",{value:"outdoor",children:"Outdoor Location"}),e.jsx("option",{value:"other",children:"Other"})]}),i.event_location_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.event_location_type})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Guest Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"guest_count",className:"block text-sm font-medium text-gray-700 mb-1",children:["Expected Guests ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"guest_count",min:"1",value:a.guest_count||"",onChange:P=>y("guest_count",parseInt(P.target.value)||0),onBlur:()=>f("guest_count"),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${i.guest_count?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-orange-500"} focus:outline-none focus:ring-4 focus:ring-orange-100`,placeholder:"50"}),i.guest_count&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.guest_count})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guest_count_min",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum (Optional)"}),e.jsx("input",{type:"number",id:"guest_count_min",min:"1",value:a.guest_count_min||"",onChange:P=>y("guest_count_min",P.target.value?parseInt(P.target.value):null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"guest_count_max",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum (Optional)"}),e.jsx("input",{type:"number",id:"guest_count_max",min:"1",value:a.guest_count_max||"",onChange:P=>y("guest_count_max",P.target.value?parseInt(P.target.value):null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",placeholder:"60"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dietary Requirements"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select all that apply:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:["vegetarian","vegan","gluten-free","halal","nut-free","dairy-free"].map(P=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.dietary_requirements.includes(P),onChange:()=>k(P),className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:P.replace("-"," ")})]},P))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dietary_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Dietary Notes (Optional)"}),e.jsx("textarea",{id:"dietary_notes",rows:3,value:a.dietary_notes||"",onChange:P=>y("dietary_notes",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Please specify any additional dietary requirements or allergies..."})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Menu Preferences"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred_package",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Package (Optional)"}),e.jsxs("select",{id:"preferred_package",value:a.preferred_package||"",onChange:P=>y("preferred_package",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx("option",{value:"",children:"Select a package"}),e.jsx("option",{value:"standard",children:"Standard Package"}),e.jsx("option",{value:"premium",children:"Premium Package"}),e.jsx("option",{value:"luxury",children:"Luxury Package"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"menu_preferences",className:"block text-sm font-medium text-gray-700 mb-1",children:"Menu Preferences & Special Requests (Optional)"}),e.jsx("textarea",{id:"menu_preferences",rows:4,value:a.menu_preferences||"",onChange:P=>y("menu_preferences",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Describe your ideal menu or specific items you'd like to include..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budget_range",className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Range (Optional)"}),e.jsxs("select",{id:"budget_range",value:a.budget_range||"",onChange:P=>y("budget_range",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"under-500",children:"Under 500"}),e.jsx("option",{value:"500-1000",children:"500 - 1,000"}),e.jsx("option",{value:"1000-2500",children:"1,000 - 2,500"}),e.jsx("option",{value:"2500-5000",children:"2,500 - 5,000"}),e.jsx("option",{value:"over-5000",children:"Over 5,000"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Additional Details"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"additional_details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Any other details we should know? (Optional)"}),e.jsx("textarea",{id:"additional_details",rows:5,value:a.additional_details||"",onChange:P=>y("additional_details",P.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-orange-500 focus:outline-none focus:ring-4 focus:ring-orange-100 resize-none",placeholder:"Setup requirements, equipment needs, timeline, special considerations..."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"marketing_opt_in",checked:a.marketing_opt_in,onChange:P=>y("marketing_opt_in",P.target.checked),className:"h-5 w-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500 mt-0.5"}),e.jsx("label",{htmlFor:"marketing_opt_in",className:"ml-3 text-sm text-gray-700",children:"Yes, I'd like to receive updates about catering services and special offers from Salama Lama"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["By submitting this form, you agree to our"," ",e.jsx(H,{to:"/terms",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Terms & Conditions"})," ","and"," ",e.jsx(H,{to:"/privacy",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Privacy Policy"}),"."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{type:"submit",disabled:m.isPending,className:"flex-1 bg-gradient-to-r from-orange-600 to-orange-700 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-orange-700 hover:to-orange-800 focus:outline-none focus:ring-4 focus:ring-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:m.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Inquiry"}),e.jsx(H,{to:"/catering",className:"flex-none sm:w-auto px-8 py-4 rounded-lg font-semibold text-lg border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200 text-center",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help or have questions?"," ",e.jsx(H,{to:"/contact",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Contact us"})," ","or call"," ",e.jsx("a",{href:"tel:+35312345678",className:"text-orange-600 hover:text-orange-700 font-medium",children:"+353 1 234 5678"})]})})]})}),o&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-full bg-green-100 p-4",children:e.jsx("svg",{className:"h-12 w-12 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We've received your catering inquiry"}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-orange-800 font-semibold",children:["Inquiry ID: ",d.inquiry_number]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"We'll review your request and get back to you within 24 hours with a custom quote."})]}),e.jsxs("div",{className:"space-y-3",children:[s&&e.jsx("button",{onClick:M,className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 focus:outline-none focus:ring-4 focus:ring-orange-200 transition-all duration-200",children:"View My Inquiries"}),e.jsx("button",{onClick:M,className:"w-full border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200",children:s?"Back to Home":"Browse Menu"})]})]})})]})},ei={new:{label:"New",color:"text-gray-700",bgColor:"bg-gray-100"},in_progress:{label:"In Progress",color:"text-yellow-700",bgColor:"bg-yellow-100"},quoted:{label:"Quote Sent",color:"text-blue-700",bgColor:"bg-blue-100"},confirmed:{label:"Confirmed",color:"text-green-700",bgColor:"bg-green-100"},completed:{label:"Completed",color:"text-green-800",bgColor:"bg-green-200"},cancelled:{label:"Cancelled",color:"text-red-700",bgColor:"bg-red-100"}},$4={corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:"Other"},R4=()=>{var T;const[t,s]=Xe(),r=Fe(),a=X(M=>M.authentication_state.auth_token),[n,i]=x.useState(null),[l,o]=x.useState(!1),c=t.get("status")||null,{data:d,isLoading:u,error:m}=le({queryKey:["catering-inquiries",c],queryFn:async()=>{const M={};return c&&(M.status=c),(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries",{headers:{Authorization:`Bearer ${a}`},params:M})).data},enabled:!!a,staleTime:6e4,refetchOnWindowFocus:!1}),b=(d==null?void 0:d.inquiries)||[],p=ie({mutationFn:async M=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${M}/cancel`,{},{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["catering-inquiries"]}),o(!1),i(null)}}),g=M=>{s(M?{status:M}:{})},h=M=>{i(M),o(!0)},N=()=>{n&&p.mutate(n)},j=()=>{o(!1),i(null)},y=M=>new Date(M).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}),f=M=>{const P=new Date(M),F=new Date().getTime()-P.getTime(),v=Math.floor(F/(1e3*60*60*24));if(v===0)return"Today";if(v===1)return"Yesterday";if(v<7)return`${v} days ago`;if(v<30){const O=Math.floor(v/7);return`${O} ${O===1?"week":"weeks"} ago`}else{const O=Math.floor(v/30);return`${O} ${O===1?"month":"months"} ago`}},k=M=>M==="new"||M==="in_progress";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Catering Inquiries"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track and manage your catering requests"})]}),e.jsxs(H,{to:"/catering/inquiry",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Inquiry"]})]}),e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex space-x-8 min-w-max","aria-label":"Filter by status",children:[e.jsx("button",{onClick:()=>g(null),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${c?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-orange-600 text-orange-600"}`,children:"All Inquiries"}),Object.entries(ei).map(([M,P])=>e.jsx("button",{onClick:()=>g(M),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${c===M?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:P.label},M))]})})]}),u&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your inquiries..."})]})}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-6 w-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading inquiries"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:m instanceof Error?m.message:"An unexpected error occurred"}),e.jsx("button",{onClick:()=>r.invalidateQueries({queryKey:["catering-inquiries"]}),className:"mt-2 text-sm font-medium text-red-600 hover:text-red-500",children:"Try again"})]})]})}),!u&&!m&&b.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:c?"No inquiries found":"No catering inquiries yet"}),e.jsx("p",{className:"mt-2 text-gray-600 max-w-md mx-auto",children:c?`You don't have any ${(T=ei[c])==null?void 0:T.label.toLowerCase()} inquiries.`:"You haven't submitted any catering inquiries yet. Let us help make your event special!"}),e.jsx("div",{className:"mt-6",children:c?e.jsx("button",{onClick:()=>g(null),className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"View All Inquiries"}):e.jsxs(H,{to:"/catering/inquiry",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Submit Your First Inquiry"]})})]}),!u&&!m&&b.length>0&&e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:b.map(M=>{var P,_,F;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M.inquiry_number}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${(P=ei[M.status])==null?void 0:P.color} ${(_=ei[M.status])==null?void 0:_.bgColor}`,children:(F=ei[M.status])==null?void 0:F.label})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted ",f(M.submitted_at)]})]})})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:$4[M.event_type]||M.event_type}),M.company_name&&e.jsx("p",{className:"text-sm text-gray-600",children:M.company_name})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y(M.event_date)}),e.jsx("p",{className:"text-sm text-gray-600",children:M.event_start_time})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsxs("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-900",children:M.event_location_city})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-900",children:M.guest_count_min&&M.guest_count_max?`${M.guest_count_min} - ${M.guest_count_max} guests`:`${M.guest_count} guests`})})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsxs(H,{to:`/catering/inquiries/${M.inquiry_id}`,className:"flex-1 inline-flex justify-center items-center px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]}),k(M.status)&&e.jsxs("button",{onClick:()=>h(M.inquiry_id),disabled:p.isPending,className:"inline-flex justify-center items-center px-4 py-2 bg-white border border-red-300 text-red-700 font-medium rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})})]},M.inquiry_id)})})]})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:j}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Cancel Inquiry"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to cancel this catering inquiry? This action cannot be undone."})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:N,disabled:p.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel Inquiry"}),e.jsx("button",{type:"button",onClick:j,disabled:p.isPending,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"No, Keep It"})]}),p.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to cancel inquiry. Please try again."})})]})]})})]})},O4=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data},D4=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}/accept-quote`,{},{headers:{Authorization:`Bearer ${s}`}})).data},I4=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/catering/inquiries/${t}/cancel`,{},{headers:{Authorization:`Bearer ${s}`}})).data},u0=t=>new Date(t).toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),m0=t=>{const[s,r]=t.split(":"),a=parseInt(s,10),n=a>=12?"PM":"AM";return`${a===0?12:a>12?a-12:a}:${r} ${n}`},Al=t=>{const s=new Date(t);return s.toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})+" at "+s.toLocaleTimeString("en-IE",{hour:"numeric",minute:"2-digit",hour12:!0})},za=t=>`${t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,q4=(t,s)=>({corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:s||"Other"})[t]||t,z4=t=>({new:"bg-gray-100 text-gray-800 border-gray-300",in_progress:"bg-yellow-100 text-yellow-800 border-yellow-300",quoted:"bg-blue-100 text-blue-800 border-blue-300",confirmed:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",cancelled:"bg-red-100 text-red-800 border-red-300"})[t]||"bg-gray-100 text-gray-800 border-gray-300",B4=t=>({new:"Pending Review",in_progress:"Under Review",quoted:"Quote Sent",confirmed:"Confirmed",completed:"Completed",cancelled:"Cancelled"})[t]||t,U4=t=>new Date(t)<new Date,V4=()=>{var h,N;const{inquiry_id:t}=Jt(),s=Fe(),r=X(j=>j.authentication_state.auth_token),{data:a,isLoading:n,error:i}=le({queryKey:["catering-inquiry",t],queryFn:()=>O4(t,r),enabled:!!t&&!!r,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),l=x.useMemo(()=>!(a!=null&&a.quotes)||a.quotes.length===0?null:a.quotes.find(j=>j.accepted_at===null)||null,[a]),o=ie({mutationFn:()=>D4(t,r),onSuccess:j=>{s.setQueryData(["catering-inquiry",t],j),s.invalidateQueries({queryKey:["catering-inquiries"]}),alert("Quote accepted successfully! We will contact you shortly to finalize details.")},onError:j=>{var f,k;const y=((k=(f=j.response)==null?void 0:f.data)==null?void 0:k.message)||j.message||"Failed to accept quote";alert(`Error: ${y}`)}}),c=ie({mutationFn:()=>I4(t,r),onSuccess:j=>{s.setQueryData(["catering-inquiry",t],j),s.invalidateQueries({queryKey:["catering-inquiries"]}),alert("Inquiry cancelled successfully.")},onError:j=>{var f,k;const y=((k=(f=j.response)==null?void 0:f.data)==null?void 0:k.message)||j.message||"Failed to cancel inquiry";alert(`Error: ${y}`)}}),d=()=>{if(!l)return;window.confirm("Are you sure you want to accept this quote? This will confirm your booking.")&&o.mutate()},u=()=>{window.confirm("Are you sure you want to cancel this inquiry? This action cannot be undone.")&&c.mutate()},m=()=>{l!=null&&l.quote_pdf_url?window.open(l.quote_pdf_url,"_blank","noopener,noreferrer"):alert("Quote PDF not available yet. Please contact support if this issue persists.")},b=(a==null?void 0:a.status)==="quoted"&&l&&!l.accepted_at,p=(a==null?void 0:a.status)&&["new","in_progress","quoted"].includes(a.status),g=l?U4(l.valid_until):!1;return n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"})]})]})})})}):i?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx(it,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Failed to Load Inquiry"}),e.jsx("p",{className:"text-red-700 mb-6",children:((N=(h=i==null?void 0:i.response)==null?void 0:h.data)==null?void 0:N.message)||(i==null?void 0:i.message)||"Could not load inquiry details"}),e.jsxs(H,{to:"/catering/inquiries",className:"inline-flex items-center px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})]})})})}):a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(H,{to:"/catering/inquiries",className:"inline-flex items-center text-orange-600 hover:text-orange-700 font-medium transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Inquiry #",a.inquiry_number]}),e.jsxs("p",{className:"text-gray-600",children:["Submitted on ",Al(a.submitted_at)]})]}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold border-2 ${z4(a.status)}`,children:B4(a.status)})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Inquiry Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-gray-200 md:left-1/2 md:transform md:-translate-x-1/2"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["new","in_progress","quoted","confirmed","completed"].includes(a.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Submitted"}),e.jsx("p",{className:"text-sm text-gray-600",children:Al(a.submitted_at)})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["in_progress","quoted","confirmed","completed"].includes(a.status)?"bg-green-500 border-green-200":(a.status==="new","bg-gray-300 border-gray-200")}`,children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Under Review"}),e.jsx("p",{className:"text-sm text-gray-600",children:["in_progress","quoted","confirmed","completed"].includes(a.status)?"Reviewed by admin":"Awaiting review"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["quoted","confirmed","completed"].includes(a.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Quote Sent"}),e.jsx("p",{className:"text-sm text-gray-600",children:["quoted","confirmed","completed"].includes(a.status)&&(l!=null&&l.sent_at)?Al(l.sent_at):"Quote pending"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${["confirmed","completed"].includes(a.status)?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Confirmed"}),e.jsx("p",{className:"text-sm text-gray-600",children:["confirmed","completed"].includes(a.status)&&(l!=null&&l.accepted_at)?Al(l.accepted_at):"Awaiting confirmation"})]})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 ${a.status==="completed"?"bg-green-500 border-green-200":"bg-gray-300 border-gray-200"}`,children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.status==="completed"?"Event completed":"Pending"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Type"}),e.jsx("p",{className:"text-gray-900",children:q4(a.event_type,a.event_type_other)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(cr,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Date"}),e.jsx("p",{className:"text-gray-900",children:u0(a.event_date)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Le,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Event Time"}),e.jsxs("p",{className:"text-gray-900",children:[m0(a.event_start_time)," - ",m0(a.event_end_time)]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Hr,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Guest Count"}),e.jsx("p",{className:"text-gray-900",children:a.guest_count_min&&a.guest_count_max?`${a.guest_count_min} - ${a.guest_count_max} guests`:`${a.guest_count} guests`})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 md:col-span-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-orange-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Location"}),e.jsxs("p",{className:"text-gray-900",children:[a.event_location_address,", ",a.event_location_city,", ",a.event_location_postal_code]}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[a.event_location_type," venue"]})]})]})]}),a.dietary_requirements&&a.dietary_requirements.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Dietary Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.dietary_requirements.map((j,y)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:j},y))}),a.dietary_notes&&e.jsxs("p",{className:"mt-3 text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Additional notes:"})," ",a.dietary_notes]})]}),a.menu_preferences&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Menu Preferences"}),e.jsx("p",{className:"text-gray-900",children:a.menu_preferences})]}),a.budget_range&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Budget Range"}),e.jsx("p",{className:"text-gray-900",children:a.budget_range})]}),a.additional_details&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Additional Details"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:a.additional_details})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:a.contact_name})]}),a.company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Company"}),e.jsx("p",{className:"text-gray-900",children:a.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:a.contact_email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:a.contact_phone})]})]})]}),a.admin_notes&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 lg:p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx(_s,{className:"w-6 h-6 mr-2"}),"Message from Admin"]}),e.jsx("p",{className:"text-blue-900 whitespace-pre-wrap",children:a.admin_notes})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Quote Details"}),l.quote_pdf_url&&e.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-800 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Download PDF"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Quote Number: ",e.jsx("span",{className:"font-semibold text-gray-900",children:l.quote_number})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Valid Until: ",e.jsx("span",{className:`font-semibold ${g?"text-red-600":"text-gray-900"}`,children:u0(l.valid_until)})]}),g&&e.jsx("p",{className:"text-sm text-red-600 font-semibold mt-1",children:" This quote has expired. Please contact us for an updated quote."})]}),e.jsx("div",{className:"overflow-x-auto mb-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.line_items.map((j,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:j.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:j.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:za(Number(j.unit_price||0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-semibold",children:za(Number(j.total||0))})]},y))})]})}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(l.subtotal||0))})]}),l.additional_fees&&l.additional_fees.length>0&&e.jsx(e.Fragment,{children:l.additional_fees.map((j,y)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:j.name}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(j.amount||0))})]},y))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:za(Number(l.tax_amount||0))})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-3 border-t border-gray-300",children:[e.jsx("span",{className:"text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-orange-600",children:za(Number(l.grand_total||0))})]})]}),l.terms&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Terms & Conditions"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:l.terms})]})]}),!l&&a.status==="in_progress"&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center",children:[e.jsx(ce,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"Quote Pending"}),e.jsx("p",{className:"text-yellow-700",children:"Our team is currently reviewing your inquiry. You'll receive a quote within 24-48 hours."})]}),(b||p)&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[b&&!g&&e.jsx("button",{onClick:d,disabled:o.isPending,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Accepting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-5 h-5 mr-2"}),"Accept Quote & Confirm Booking"]})}),p&&e.jsx("button",{onClick:u,disabled:c.isPending,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-5 h-5 mr-2"}),"Cancel Inquiry"]})})]})}),a.status==="confirmed"&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[e.jsx(we,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-green-700",children:"Your catering booking has been confirmed. We will contact you shortly to finalize all details."})]}),a.status==="cancelled"&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[e.jsx(it,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Inquiry Cancelled"}),e.jsx("p",{className:"text-red-700",children:"This catering inquiry has been cancelled. If you have any questions, please contact us."})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-8 text-center",children:[e.jsx(ce,{className:"w-16 h-16 text-yellow-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-yellow-900 mb-2",children:"Inquiry Not Found"}),e.jsx("p",{className:"text-yellow-700 mb-6",children:"The catering inquiry you're looking for doesn't exist or you don't have access to it."}),e.jsxs(H,{to:"/catering/inquiries",className:"inline-flex items-center px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to My Inquiries"]})]})})})})},W4=async()=>{const s=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/business/info",{params:{include_team:!0}});return{name:s.data.name||"",phone:s.data.phone||"",email:s.data.email||"",address:s.data.address||"",logo_url:s.data.logo_url||"",description:s.data.about_description||"",mission_statement:s.data.mission||"",team_members:s.data.team_info||[]}},H4=()=>{const t=X(l=>l.business_settings),{data:s,isLoading:r,isError:a,error:n}=le({queryKey:["business-info","about-page"],queryFn:W4,staleTime:5*60*1e3,retry:2}),i=(l,o)=>{l==="phone"?window.location.href=`tel:${o}`:l==="email"&&(window.location.href=`mailto:${o}`)};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading About Us..."})]})}),a&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Information"}),e.jsx("p",{className:"text-gray-600 mb-6",children:n instanceof Error?n.message:"We encountered an error while loading our information. Please try again later."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(H,{to:"/",className:"px-6 py-3 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors",children:"Back to Home"}),e.jsx(H,{to:"/contact",className:"px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Contact Us"})]})]})}),!r&&!a&&s&&e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"relative bg-gradient-to-br from-orange-50 to-red-50 py-20 lg:py-32",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["About ",s.name||t.business_info.name||"Salama Lama"]}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:["Bringing authentic flavors to the streets of ",s.address&&typeof s.address=="object"?s.address.city:t.business_info.address&&typeof t.business_info.address=="object"?t.business_info.address.city:"Dublin"]}),e.jsx("div",{className:"mt-8",children:e.jsxs(H,{to:"/menu",className:"inline-flex items-center px-8 py-4 bg-orange-600 text-white font-semibold rounded-lg shadow-lg hover:bg-orange-700 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"Browse Our Menu"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})}),s.description&&e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-8 text-center",children:"Our Story"}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:s.description.split(`

`).map((l,o)=>e.jsx("p",{className:"mb-6",children:l},o))})]})})}),s.mission_statement&&e.jsx("div",{className:"py-16 lg:py-24 bg-gradient-to-br from-orange-50 to-red-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-600 rounded-full mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:"Our Mission"}),e.jsxs("p",{className:"text-xl lg:text-2xl text-gray-700 leading-relaxed italic",children:['"',s.mission_statement,'"']})]})})}),s.team_members&&s.team_members.length>0&&e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"The passionate people behind the flavors you love"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.team_members.map((l,o)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-orange-100 to-red-100 flex items-center justify-center overflow-hidden",children:l.photo_url?e.jsx("img",{src:l.photo_url,alt:l.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-32 h-32 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-5xl font-bold text-white",children:l.name.charAt(0)})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:l.name}),e.jsx("p",{className:"text-orange-600 font-semibold mb-4",children:l.role}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.bio})]})]},o))})]})}),e.jsx("div",{className:"py-16 lg:py-24 bg-gradient-to-br from-orange-50 to-red-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"The principles that guide everything we do"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Quality First"}),e.jsx("p",{className:"text-gray-600",children:"Only the freshest ingredients and authentic recipes"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Community Focus"}),e.jsx("p",{className:"text-gray-600",children:"Building connections through great food"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Sustainability"}),e.jsx("p",{className:"text-gray-600",children:"Eco-friendly practices and local sourcing"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Innovation"}),e.jsx("p",{className:"text-gray-600",children:"Creative flavors and modern food experiences"})]})]})]})}),e.jsx("div",{className:"py-16 lg:py-24 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-600 to-red-600 rounded-2xl shadow-2xl overflow-hidden",children:e.jsxs("div",{className:"px-6 py-12 sm:px-12 lg:py-16 lg:px-16 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-6",children:"Ready to Experience Our Food?"}),e.jsx("p",{className:"text-xl text-orange-100 mb-8 max-w-2xl mx-auto",children:"Order online for collection or delivery and taste the difference that passion and quality make."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(H,{to:"/menu",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-orange-600 font-semibold rounded-lg shadow-lg hover:bg-gray-50 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"View Menu"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs(H,{to:"/contact",className:"inline-flex items-center justify-center px-8 py-4 bg-orange-800 text-white font-semibold rounded-lg shadow-lg hover:bg-orange-900 hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{children:"Contact Us"}),e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})})})}),e.jsx("div",{className:"py-12 bg-gray-100 border-t border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Get in Touch"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 text-gray-700",children:[e.jsxs("button",{onClick:()=>i("phone",s.phone||t.business_info.phone),className:"flex items-center gap-2 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"font-medium",children:s.phone||t.business_info.phone})]}),e.jsxs("button",{onClick:()=>i("email",s.email||t.business_info.email),className:"flex items-center gap-2 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{className:"font-medium",children:s.email||t.business_info.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"font-medium",children:s.address&&typeof s.address=="object"?`${s.address.line1}${s.address.line2?", "+s.address.line2:""}, ${s.address.city}, ${s.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}${t.business_info.address.line2?", "+t.business_info.address.line2:""}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:s.address||t.business_info.address||"Dublin, Ireland"})]})]})]})})})]})]})},Q4=()=>{const t=X(F=>F.business_settings),[s,r]=x.useState({name:"",email:"",phone:"",subject:"",message:""}),[a,n]=x.useState({}),[i,l]=x.useState(!1),[o,c]=x.useState(!0),d="https://123salama-lama-food-truck.launchpulse.ai",{data:u,isLoading:m,error:b}=le({queryKey:["business-contact-info"],queryFn:async()=>{const F=await W.get(`${d}/api/business/info`);return{name:F.data.name||"Salama Lama Food Truck",phone:F.data.phone||"",email:F.data.email||"",address:F.data.address||"",operating_hours:F.data.operating_hours||{},location_coordinates:F.data.location||null,social_links:F.data.social_links||{}}},staleTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1}),p=ie({mutationFn:async F=>(await new Promise(v=>setTimeout(v,1500)),console.log("Contact form submitted:",F),{success:!0,message:"Thank you for contacting us! We'll get back to you soon."}),onSuccess:()=>{l(!0),r({name:"",email:"",phone:"",subject:"",message:""}),n({}),setTimeout(()=>{l(!1)},5e3)},onError:F=>{var v,O;n({submit:((O=(v=F.response)==null?void 0:v.data)==null?void 0:O.message)||"Failed to send message. Please try again."})}}),g=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),h=F=>{const v=F.replace(/\s/g,"");return/^(\+353|0)\d{9}$/.test(v)},N=(F,v)=>{switch(F){case"name":return v.trim()?v.trim().length<2?"Name must be at least 2 characters":void 0:"Name is required";case"email":return v.trim()?g(v)?void 0:"Please enter a valid email address":"Email is required";case"phone":return v.trim()?h(v)?void 0:"Please enter a valid Irish phone number":"Phone number is required";case"subject":return v.trim()?v.trim().length<3?"Subject must be at least 3 characters":void 0:"Subject is required";case"message":return v.trim()?v.trim().length<10?"Message must be at least 10 characters":void 0:"Message is required";default:return}},j=()=>{const F={};return Object.keys(s).forEach(v=>{const O=N(v,s[v]);O&&(F[v]=O)}),n(F),Object.keys(F).length===0},y=(F,v)=>{r(O=>({...O,[F]:v})),a[F]&&n(O=>({...O,[F]:void 0})),a.submit&&n(O=>({...O,submit:void 0}))},f=F=>{const v=N(F,s[F]);v&&n(O=>({...O,[F]:v}))},k=F=>{F.preventDefault(),j()&&p.mutate(s)},T=()=>{console.log("Phone contact initiated")},M=()=>{console.log("Email contact initiated")},P=()=>{c(!1)},_=()=>{const F=(u==null?void 0:u.operating_hours)||t.operating_hours;if(!F||Object.keys(F).length===0)return e.jsx("p",{className:"text-gray-600",children:"Please contact us for our operating hours."});const v=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],O=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.jsx("div",{className:"space-y-2",children:v.map((R,C)=>{const z=F[R];return e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[e.jsx("span",{className:"font-medium text-gray-700",children:O[C]}),e.jsx("span",{className:"text-gray-600",children:z&&z.open&&z.close?`${z.open} - ${z.close}`:"Closed"})]},R)})})};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50",children:[e.jsx("section",{className:"bg-gradient-to-r from-orange-600 to-yellow-600 text-white py-16 lg:py-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Get in Touch"}),e.jsx("p",{className:"text-xl lg:text-2xl text-orange-100 max-w-3xl mx-auto leading-relaxed",children:"We'd love to hear from you! Whether you have a question about our menu, want to place a bulk order, or just want to say hello, we're here to help."})]})}),e.jsx("section",{className:"py-12 lg:py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(F=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full mb-6"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]},F))}):b?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load contact information"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 transition-all duration-200 hover:shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 mb-6",children:e.jsx(zt,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Call or Text"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:`tel:${(u==null?void 0:u.phone)||t.business_info.phone}`,onClick:T,className:"flex items-center text-gray-700 hover:text-orange-600 transition-colors group",children:[e.jsx(zt,{className:"h-5 w-5 mr-3 text-gray-400 group-hover:text-orange-600"}),e.jsx("span",{className:"font-medium",children:(u==null?void 0:u.phone)||t.business_info.phone||"+353-1-234-5678"})]}),e.jsxs("a",{href:`mailto:${(u==null?void 0:u.email)||t.business_info.email}`,onClick:M,className:"flex items-center text-gray-700 hover:text-orange-600 transition-colors group",children:[e.jsx(lt,{className:"h-5 w-5 mr-3 text-gray-400 group-hover:text-orange-600"}),e.jsx("span",{className:"font-medium",children:(u==null?void 0:u.email)||t.business_info.email||"hello@salamalama.ie"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 transition-all duration-200 hover:shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-6",children:e.jsx(Le,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Opening Hours"}),_()]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 transition-all duration-200 hover:shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-6",children:e.jsx(Ge,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Visit Us"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:u!=null&&u.address&&typeof u.address=="object"?`${u.address.line1}${u.address.line2?", "+u.address.line2:""}, ${u.address.city}, ${u.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}${t.business_info.address.line2?", "+t.business_info.address.line2:""}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland"}),e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(u!=null&&u.address&&typeof u.address=="object"?`${u.address.line1}, ${u.address.city}, ${u.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-4 text-orange-600 hover:text-orange-700 font-medium transition-colors",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]})})}),e.jsx("section",{className:"py-12 lg:py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Find Us on the Map"}),e.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600"})}),e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(u!=null&&u.address&&typeof u.address=="object"?`${u.address.line1}, ${u.address.city}, ${u.address.postal_code}`:t.business_info.address&&typeof t.business_info.address=="object"?`${t.business_info.address.line1}, ${t.business_info.address.city}, ${t.business_info.address.postal_code}`:"Dublin, Ireland")}&zoom=15`,width:"100%",height:"450",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:P,className:"w-full",title:"Salama Lama Food Truck Location"})]})]})}),e.jsx("section",{className:"py-12 lg:py-20 bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Send Us a Message"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed max-w-2xl mx-auto",children:"Have a question or feedback? Fill out the form below and we'll get back to you as soon as possible."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:[i&&e.jsxs("div",{className:"mb-8 bg-green-50 border-2 border-green-200 rounded-lg p-6 flex items-start",children:[e.jsx(we,{className:"h-6 w-6 text-green-600 mt-0.5 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-900 font-semibold mb-1",children:"Message Sent Successfully!"}),e.jsx("p",{className:"text-green-700",children:"Thank you for contacting us. We'll get back to you within 24 hours."})]})]}),a.submit&&e.jsxs("div",{className:"mb-8 bg-red-50 border-2 border-red-200 rounded-lg p-6 flex items-start",children:[e.jsx(ce,{className:"h-6 w-6 text-red-600 mt-0.5 mr-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-900 font-semibold mb-1",children:"Error"}),e.jsx("p",{className:"text-red-700",children:a.submit})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:F=>y("name",F.target.value),onBlur:()=>f("name"),placeholder:"John Smith",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${a.name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-orange-500 focus:ring-orange-100"}`}),a.name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),a.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:s.email,onChange:F=>y("email",F.target.value),onBlur:()=>f("email"),placeholder:"john.smith@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${a.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-orange-500 focus:ring-orange-100"}`}),a.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),a.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone",value:s.phone,onChange:F=>y("phone",F.target.value),onBlur:()=>f("phone"),placeholder:"0851234567 or +353851234567",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${a.phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-orange-500 focus:ring-orange-100"}`}),a.phone&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),a.phone]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"subject",value:s.subject,onChange:F=>y("subject",F.target.value),onBlur:()=>f("subject"),placeholder:"General Inquiry",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 ${a.subject?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-orange-500 focus:ring-orange-100"}`}),a.subject&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),a.subject]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",rows:6,value:s.message,onChange:F=>y("message",F.target.value),onBlur:()=>f("message"),placeholder:"Tell us how we can help you...",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 resize-none ${a.message?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-orange-500 focus:ring-orange-100"}`}),a.message&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),a.message]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:p.isPending,className:"w-full md:w-auto px-8 py-4 bg-gradient-to-r from-orange-600 to-yellow-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-orange-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Message..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yy,{className:"h-5 w-5 mr-2"}),"Send Message"]})})})]})]})]})})]})})},ed=[{id:"ordering",name:"Ordering",description:"Questions about placing and managing orders",sort_order:1},{id:"delivery",name:"Delivery",description:"Delivery zones, fees, and timing",sort_order:2},{id:"catering",name:"Catering",description:"Catering services and event inquiries",sort_order:3},{id:"loyalty",name:"Loyalty Program",description:"Points, rewards, and referrals",sort_order:4},{id:"account",name:"Account & Payments",description:"Account management and payment methods",sort_order:5}],td=[{id:"faq_1",category_id:"ordering",question:"How do I place an order?",answer:"You can place an order by browsing our menu, adding items to your cart, and proceeding to checkout. You can choose between collection or delivery (if available in your area). Create an account for faster checkout and to track your orders.",sort_order:1,is_active:!0,keywords:["place order","how to order","ordering process","menu","cart","checkout"]},{id:"faq_2",category_id:"ordering",question:"Can I customize my order?",answer:"Yes! Most of our menu items can be customized. When adding an item to your cart, you'll see available customization options such as spice level, extra toppings, and dietary modifications. Some items may have additional charges for premium customizations.",sort_order:2,is_active:!0,keywords:["customize","modifications","spice level","toppings","extras","changes"]},{id:"faq_3",category_id:"ordering",question:"What are your operating hours?",answer:"Our operating hours vary by day. You can view our current schedule on our homepage or contact page. We typically operate Monday-Friday 11:00 AM - 8:00 PM and weekends 12:00 PM - 9:00 PM. Check our website for holiday hours and special events.",sort_order:3,is_active:!0,keywords:["hours","open","closed","schedule","timing","when open"]},{id:"faq_4",category_id:"ordering",question:"Can I cancel or modify my order?",answer:"You can cancel your order within 10 minutes of placing it from your order tracking page. After that, please contact us immediately at our phone number. Modifications to orders in progress may not be possible, but we'll do our best to accommodate your request.",sort_order:4,is_active:!0,keywords:["cancel","modify","change order","edit order","update order"]},{id:"faq_5",category_id:"ordering",question:"Do you offer vegetarian and vegan options?",answer:"Absolutely! We have a wide selection of vegetarian and vegan dishes clearly marked on our menu with dietary icons. Use the dietary filters on our menu page to easily find options that suit your preferences. Our staff can also help with dietary questions.",sort_order:5,is_active:!0,keywords:["vegetarian","vegan","dietary","plant-based","meat-free","dietary requirements"]},{id:"faq_6",category_id:"delivery",question:"Do you deliver to my area?",answer:"We deliver to most areas within Dublin. Enter your address during checkout to see if we deliver to your location. Delivery availability and fees may vary by distance. Check our delivery zones map on the checkout page for specific coverage areas.",sort_order:1,is_active:!0,keywords:["delivery area","delivery zone","do you deliver","delivery coverage","location"]},{id:"faq_7",category_id:"delivery",question:"What are your delivery fees?",answer:"Delivery fees typically range from 3.50 to 6.00 depending on your distance from our location. The exact fee will be calculated and displayed before you complete your order. We offer free delivery on orders over 40 within our standard delivery zone.",sort_order:2,is_active:!0,keywords:["delivery fee","delivery cost","delivery charge","how much delivery","delivery price"]},{id:"faq_8",category_id:"delivery",question:"How long does delivery take?",answer:"Most deliveries arrive within 30-45 minutes during regular hours. Delivery times may be longer during peak hours (lunch and dinner rush). You'll receive an estimated delivery time when placing your order, and you can track your order in real-time from your account.",sort_order:3,is_active:!0,keywords:["delivery time","how long delivery","delivery duration","wait time","delivery speed"]},{id:"faq_9",category_id:"delivery",question:"Is there a minimum order for delivery?",answer:"Yes, most delivery zones have a minimum order value of 15-20. The specific minimum for your area will be displayed when you enter your delivery address at checkout. Collection orders have no minimum order value.",sort_order:4,is_active:!0,keywords:["minimum order","minimum delivery","order minimum","least order amount"]},{id:"faq_10",category_id:"delivery",question:"Can I track my delivery?",answer:"Yes! Once your order is confirmed, you can track its status in real-time from your order tracking page. You'll receive notifications when your order is being prepared, ready, and out for delivery. You can access tracking from the link in your confirmation email or through your account.",sort_order:5,is_active:!0,keywords:["track delivery","order tracking","track order","where is my order","order status"]},{id:"faq_11",category_id:"catering",question:"Do you offer catering services?",answer:"Yes! We provide full catering services for corporate events, weddings, private parties, and community gatherings. Visit our catering page to learn more about our packages and submit an inquiry. We can accommodate groups from 20 to 200+ guests.",sort_order:1,is_active:!0,keywords:["catering","events","parties","corporate catering","wedding catering","large orders"]},{id:"faq_12",category_id:"catering",question:"What is the minimum guest count for catering?",answer:"Our standard minimum for catering services is 20 guests. However, we may be able to accommodate smaller groups depending on availability and event type. Contact us directly to discuss your specific needs and we'll do our best to help.",sort_order:2,is_active:!0,keywords:["minimum guests","catering minimum","how many people","guest count","catering size"]},{id:"faq_13",category_id:"catering",question:"How far in advance should I book catering?",answer:"We recommend booking at least 7-10 days in advance for standard catering requests. For large events (100+ guests) or peak season dates (weekends, holidays), please book 2-3 weeks ahead. Last-minute requests may be accommodated based on availability.",sort_order:3,is_active:!0,keywords:["book catering","catering notice","advance booking","lead time","catering reservation"]},{id:"faq_14",category_id:"catering",question:"Can you accommodate dietary restrictions for catering?",answer:"Absolutely! We specialize in creating custom menus that accommodate various dietary needs including vegetarian, vegan, gluten-free, halal, and nut-free options. Mention your requirements in the catering inquiry form and we'll design a menu to suit your guests.",sort_order:4,is_active:!0,keywords:["dietary restrictions","catering dietary","allergies","special diet","food requirements"]},{id:"faq_15",category_id:"catering",question:"What equipment and services are included?",answer:"Our catering services include serving equipment, utensils, plates, napkins, and setup assistance. We can also provide staff for larger events. Specific inclusions vary by package - full details will be provided in your custom quote.",sort_order:5,is_active:!0,keywords:["catering equipment","included services","setup","staff","catering package"]},{id:"faq_16",category_id:"loyalty",question:"How does the loyalty program work?",answer:"Earn 1 point for every 1 you spend on orders. Points can be redeemed for discounts, free items, and special perks. Create an account to automatically start earning points with every order. Track your points and view available rewards in your loyalty dashboard.",sort_order:1,is_active:!0,keywords:["loyalty program","points","rewards","how to earn","loyalty system"]},{id:"faq_17",category_id:"loyalty",question:"How do I redeem my loyalty points?",answer:`Visit your loyalty dashboard to browse available rewards. Click "Redeem" on any reward you can afford with your points. You'll receive a unique reward code to use at checkout. Codes are typically valid for 30 days after redemption.`,sort_order:2,is_active:!0,keywords:["redeem points","use points","rewards redemption","reward code","spend points"]},{id:"faq_18",category_id:"loyalty",question:"Do loyalty points expire?",answer:"Points remain valid for 12 months from the date earned, as long as your account remains active. Any activity (orders or redemptions) extends the expiration of all your points. You'll receive notifications before points are about to expire.",sort_order:3,is_active:!0,keywords:["points expire","expiration","points validity","lose points","point duration"]},{id:"faq_19",category_id:"loyalty",question:"How does the referral program work?",answer:"Share your unique referral code with friends. When they sign up and place their first order, you both earn bonus points! Find your referral code in your loyalty dashboard. There's no limit to how many friends you can refer.",sort_order:4,is_active:!0,keywords:["referral","refer friend","referral code","invite friends","referral bonus"]},{id:"faq_20",category_id:"loyalty",question:"What are badges and how do I earn them?",answer:"Badges are special achievements you unlock by reaching milestones like total orders, spending thresholds, or consecutive weekly orders. Each badge comes with bonus points and bragging rights! View all available badges and your progress in your loyalty dashboard.",sort_order:5,is_active:!0,keywords:["badges","achievements","unlock badges","badges earn","loyalty badges"]},{id:"faq_21",category_id:"account",question:"Do I need an account to order?",answer:"You can browse our menu as a guest, but creating an account provides benefits: faster checkout, order history, loyalty points, saved addresses, and order tracking. Account creation is quick, free, and includes a welcome discount code!",sort_order:1,is_active:!0,keywords:["account","registration","sign up","create account","guest order"]},{id:"faq_22",category_id:"account",question:"What payment methods do you accept?",answer:"We accept all major credit and debit cards (Visa, Mastercard, Amex, Discover) through our secure payment processor. You can save your payment methods for faster checkout. For collection orders, we also accept cash payment at pickup.",sort_order:2,is_active:!0,keywords:["payment methods","credit card","debit card","cash","how to pay","payment options"]},{id:"faq_23",category_id:"account",question:"Is my payment information secure?",answer:"Absolutely. We never store your full card details. All payment processing is handled by our secure PCI-compliant payment provider (SumUp). We only store a tokenized reference to your card for future use. Your CVV is never stored and must be re-entered for each transaction.",sort_order:3,is_active:!0,keywords:["security","payment security","safe payment","card security","data protection"]},{id:"faq_24",category_id:"account",question:"How do I reset my password?",answer:`Click "Forgot Password" on the login page and enter your email address. You'll receive a password reset link valid for 1 hour. Click the link and create a new password. If you don't receive the email, check your spam folder or contact support.`,sort_order:4,is_active:!0,keywords:["reset password","forgot password","password recovery","change password","login issues"]},{id:"faq_25",category_id:"account",question:"Can I update my account information?",answer:'Yes, you can update your profile information, email, phone number, saved addresses, and payment methods anytime from your account settings. Click on your profile icon and select "My Profile" to make changes. Some changes may require email verification.',sort_order:5,is_active:!0,keywords:["update account","change email","edit profile","update information","account settings"]}],K4=()=>{var g;const t=X(h=>h.business_settings),[s,r]=x.useState(""),[a,n]=x.useState(null),[i,l]=x.useState(new Set),o=x.useMemo(()=>{let h=td.filter(N=>N.is_active);if(a&&(h=h.filter(N=>N.category_id===a)),s.trim()){const N=s.toLowerCase();h=h.filter(j=>j.question.toLowerCase().includes(N)||j.answer.toLowerCase().includes(N)||j.keywords.some(y=>y.toLowerCase().includes(N)))}return h.sort((N,j)=>N.sort_order-j.sort_order)},[s,a]),c=x.useMemo(()=>{const h={};return td.filter(N=>N.is_active).forEach(N=>{h[N.category_id]=(h[N.category_id]||0)+1}),h},[]),d=h=>{l(N=>{const j=new Set(N);return j.has(h)?j.delete(h):j.add(h),j})},u=()=>{r("")},m=()=>{n(null)},b=h=>{r(h.target.value)},p=h=>{n(a===h?null:h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-yellow-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[e.jsx("nav",{className:"mb-4","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("li",{children:e.jsx(H,{to:"/",className:"hover:text-orange-600 transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx("span",{className:"mx-2",children:"/"})}),e.jsx("li",{className:"text-gray-900 font-medium",children:"FAQs"})]})}),e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:e.jsx(T1,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Find answers to common questions about ordering, delivery, catering, loyalty rewards, and more."})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Us,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search FAQs... (e.g., delivery, payment, rewards)",value:s,onChange:b,className:"w-full pl-12 pr-12 py-3 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-orange-100 focus:border-orange-500 transition-all duration-200 text-base","aria-label":"Search FAQs"}),s&&e.jsx("button",{onClick:u,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsxs("button",{onClick:m,className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${a===null?"bg-orange-600 text-white shadow-lg hover:bg-orange-700":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-500 hover:text-orange-600"}`,children:["All Categories (",td.filter(h=>h.is_active).length,")"]}),ed.sort((h,N)=>h.sort_order-N.sort_order).map(h=>e.jsxs("button",{onClick:()=>p(h.id),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 ${a===h.id?"bg-orange-600 text-white shadow-lg hover:bg-orange-700":"bg-white text-gray-700 border-2 border-gray-300 hover:border-orange-500 hover:text-orange-600"}`,children:[h.name," (",c[h.id]||0,")"]},h.id))]})}),(s||a)&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Active Filters:"}),s&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:[e.jsxs("span",{children:['Search: "',s,'"']}),e.jsx("button",{onClick:u,className:"hover:text-orange-900 transition-colors","aria-label":"Clear search filter",children:e.jsx(_e,{className:"w-4 h-4"})})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsxs("span",{children:["Category: ",(g=ed.find(h=>h.id===a))==null?void 0:g.name]}),e.jsx("button",{onClick:m,className:"hover:text-blue-900 transition-colors","aria-label":"Clear category filter",children:e.jsx(_e,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-900",children:o.length})," ",o.length===1?"question":"questions"]})}),o.length>0?e.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:o.map(h=>{const N=i.has(h.id),j=ed.find(y=>y.id===h.category_id);return e.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("button",{onClick:()=>d(h.id),className:"w-full px-6 py-4 text-left flex items-center justify-between gap-4 hover:bg-gray-50 rounded-xl transition-colors","aria-expanded":N,"aria-controls":`faq-answer-${h.id}`,children:[e.jsxs("div",{className:"flex-1",children:[j&&e.jsx("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-800 text-xs font-semibold rounded-full mb-2",children:j.name}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 leading-snug",children:h.question})]}),e.jsx("div",{className:"flex-shrink-0",children:N?e.jsx(na,{className:"w-6 h-6 text-orange-600"}):e.jsx(Os,{className:"w-6 h-6 text-gray-400"})})]}),N&&e.jsx("div",{id:`faq-answer-${h.id}`,className:"px-6 pb-4 pt-2 border-t border-gray-100 animate-fadeIn",children:e.jsx("p",{className:"text-base text-gray-700 leading-relaxed whitespace-pre-line",children:h.answer})})]},h.id)})}):e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-6",children:e.jsx(Us,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No FAQs Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any questions matching your search or filter criteria."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[s&&e.jsx("button",{onClick:u,className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors shadow-md",children:"Clear Search"}),a&&e.jsx("button",{onClick:m,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Clear Category Filter"})]})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-600 to-yellow-600 rounded-2xl shadow-xl p-8 lg:p-12 text-white",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Still Have Questions?"}),e.jsx("p",{className:"text-lg text-orange-100 mb-8",children:"Can't find the answer you're looking for? Our friendly support team is here to help!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("a",{href:`tel:${t.business_info.phone}`,className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx(zt,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Call Us"}),e.jsx("p",{className:"text-orange-100 text-sm",children:t.business_info.phone||"+353-1-234-5678"})]}),e.jsxs("a",{href:`mailto:${t.business_info.email}`,className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx(lt,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Email Us"}),e.jsx("p",{className:"text-orange-100 text-sm",children:t.business_info.email||"hello@salamalama.ie"})]}),e.jsxs(H,{to:"/contact",className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-xl p-6 transition-all duration-200 group",children:[e.jsx(D1,{className:"w-8 h-8 mx-auto mb-3 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Contact Form"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Visit our contact page"})]})]})]})})})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.3s ease-in-out;
        }
      `})]})},Y4=()=>{const[t,s]=x.useState(null),[r,a]=x.useState(!0),[n,i]=x.useState(null),[l,o]=x.useState([]),[c,d]=x.useState(!1),[u,m]=x.useState(!1),b=X(k=>k.business_settings),p=x.useRef(new Map),g=x.useRef(null),h={title:"Terms and Conditions",last_updated:"2024-01-15",sections:[{id:"general-terms",heading:"1. General Terms",content:'These Terms and Conditions ("Terms") govern your use of the Salama Lama Food Truck online ordering platform and services. By accessing or using our services, you agree to be bound by these Terms. If you do not agree to these Terms, please do not use our services.',subsections:[{heading:"1.1 Agreement to Terms",content:"By creating an account or placing an order through our platform, you acknowledge that you have read, understood, and agree to be bound by these Terms and our Privacy Policy."},{heading:"1.2 Eligibility",content:"You must be at least 18 years old to use our services. By using our services, you represent and warrant that you meet this age requirement."},{heading:"1.3 Changes to Terms",content:"We reserve the right to modify these Terms at any time. We will notify users of material changes via email or through our platform. Your continued use of our services after such modifications constitutes acceptance of the updated Terms."}]},{id:"account-registration",heading:"2. Account Registration and Security",content:"To use certain features of our service, you must create an account. You are responsible for maintaining the confidentiality of your account credentials.",subsections:[{heading:"2.1 Account Creation",content:"You must provide accurate, current, and complete information during registration. You agree to update your information promptly if it changes."},{heading:"2.2 Account Security",content:"You are responsible for all activities that occur under your account. You must immediately notify us of any unauthorized use of your account or any other breach of security."},{heading:"2.3 Account Termination",content:"We reserve the right to suspend or terminate your account if you violate these Terms or engage in fraudulent or abusive behavior. You may also request account deletion at any time through your account settings."}]},{id:"menu-pricing",heading:"3. Menu Items and Pricing",content:"Our menu items and prices are subject to change without notice. We make every effort to ensure accuracy in our menu descriptions and pricing.",subsections:[{heading:"3.1 Menu Accuracy",content:"While we strive to provide accurate descriptions and images of our menu items, actual items may vary slightly. We reserve the right to modify menu items, ingredients, or recipes at any time."},{heading:"3.2 Pricing",content:"All prices are displayed in Euros () and include applicable VAT. Prices are subject to change without notice. The price applicable to your order will be the price displayed at the time you complete your order."},{heading:"3.3 Availability",content:"Menu items are subject to availability. We reserve the right to limit quantities or discontinue items. If an ordered item becomes unavailable, we will notify you and offer a substitute or refund."},{heading:"3.4 Dietary Information",content:"While we provide dietary information and accommodate dietary restrictions where possible, we cannot guarantee that our food is free from allergens. Please inform us of any allergies when ordering."}]},{id:"ordering-process",heading:"4. Ordering Process",content:"Orders can be placed through our online platform for collection or delivery (where available). All orders are subject to acceptance by Salama Lama.",subsections:[{heading:"4.1 Order Placement",content:"To place an order, you must add items to your cart, select a collection time or delivery address, and complete payment. Your order is not confirmed until you receive an order confirmation."},{heading:"4.2 Order Confirmation",content:"Upon successful order placement, you will receive an order confirmation via email and/or SMS containing your order details and unique order number."},{heading:"4.3 Order Modifications",content:"Order modifications are subject to availability and must be requested within a reasonable timeframe. Contact us immediately if you need to modify your order."},{heading:"4.4 Minimum Order Values",content:"Delivery orders may be subject to minimum order value requirements based on delivery zone. These requirements will be clearly displayed during checkout."}]},{id:"payment-terms",heading:"5. Payment Terms",content:"We accept various payment methods through our secure payment processor. All payments must be completed before order fulfillment.",subsections:[{heading:"5.1 Payment Methods",content:"We accept major credit and debit cards (Visa, Mastercard, American Express) through our payment processor SumUp. For collection orders, we may also accept cash payment on collection where indicated."},{heading:"5.2 Payment Processing",content:"Your payment will be processed immediately upon order confirmation. We do not store your full card details; they are securely processed and stored by our payment processor."},{heading:"5.3 Failed Payments",content:"If payment fails, your order will not be processed. You will be notified and given the opportunity to retry payment or use an alternative payment method."},{heading:"5.4 Pricing Errors",content:"In the event of a pricing error, we reserve the right to cancel the order and offer a refund or the correct price. We will notify you before taking any action."}]},{id:"collection-delivery",heading:"6. Collection and Delivery Services",content:"We offer both collection and delivery services (delivery subject to location and availability). Service-specific terms apply.",subsections:[{heading:"6.1 Collection Service",content:"For collection orders, you must collect your order at the specified time slot from the food truck location provided in your order confirmation. Please bring your order number for identification."},{heading:"6.2 Delivery Service",content:"Delivery is available to selected areas as indicated during checkout. Delivery fees and minimum order values vary by zone. Estimated delivery times are approximate and subject to traffic and weather conditions."},{heading:"6.3 Delivery Address",content:"You are responsible for providing an accurate and complete delivery address. We are not responsible for delays or failed deliveries due to incorrect address information."},{heading:"6.4 Delivery Delays",content:"While we aim to deliver within the estimated timeframe, delivery times are approximate and not guaranteed. We are not liable for delays caused by circumstances beyond our control."},{heading:"6.5 Failed Delivery",content:"If delivery cannot be completed due to incorrect address, unavailability of recipient, or access issues, the order may be deemed completed and no refund will be provided."}]},{id:"cancellation-refunds",heading:"7. Cancellation and Refunds",content:"Cancellation and refund rights vary depending on the stage of order processing and the nature of the service.",subsections:[{heading:"7.1 Customer Cancellation",content:"You may cancel your order within a limited time after placement, provided the order has not yet been prepared. Cancellation requests must be made through your account or by contacting us immediately."},{heading:"7.2 Refund Policy",content:"Refunds will be issued to the original payment method. Processing time for refunds typically takes 5-10 business days. Partial refunds may be issued for partial order fulfillment or resolved issues."},{heading:"7.3 Business Cancellation",content:"We reserve the right to cancel orders if items are unavailable, payment fails, or we identify fraudulent activity. You will be notified immediately and receive a full refund."},{heading:"7.4 Complaints and Issues",content:"If you have issues with your order quality or service, please contact us within 24 hours with your order details, photos (if applicable), and description of the issue. We will review and respond promptly."}]},{id:"catering-services",heading:"8. Catering Services",content:"Our catering services are subject to separate terms in addition to these general terms. Catering requires advance booking and agreement to a customized quote.",subsections:[{heading:"8.1 Catering Inquiries",content:"Catering services must be requested through our catering inquiry form with at least 7 days advance notice. All inquiries are subject to availability and approval."},{heading:"8.2 Catering Quotes",content:"We will provide a detailed quote including menu items, pricing, service details, and terms. The quote is valid for 7 days unless otherwise specified."},{heading:"8.3 Catering Confirmation",content:"Catering bookings are confirmed upon acceptance of the quote and receipt of the required deposit (if applicable). Final details must be confirmed at least 48 hours before the event."},{heading:"8.4 Catering Cancellation",content:"Catering cancellations made more than 48 hours before the event may receive a partial refund. Cancellations within 48 hours are non-refundable unless due to circumstances beyond your control."},{heading:"8.5 Event Day Responsibilities",content:"You are responsible for providing accurate event details, suitable venue access, power/water connections if required, and any necessary permits. We are not liable for issues arising from incomplete or inaccurate information."}]},{id:"loyalty-program",heading:"9. Loyalty and Rewards Program",content:"Our loyalty program allows customers to earn points and rewards. Participation is optional and subject to program terms.",subsections:[{heading:"9.1 Program Participation",content:"By creating an account, you are automatically enrolled in our loyalty program. Points are earned on qualifying purchases and can be redeemed for rewards as described in your account."},{heading:"9.2 Earning Points",content:"Points are awarded based on your order total after discounts and before delivery fees and tax. The earning rate is subject to change with notice. Points are credited after order completion."},{heading:"9.3 Redeeming Rewards",content:"Rewards can be redeemed through your account when you have sufficient points. Rewards are subject to availability and expiration dates. Redeemed rewards cannot be returned or exchanged for cash."},{heading:"9.4 Points Expiration",content:"Points may expire after a period of account inactivity as specified in the loyalty program terms. We will notify you before points expire."},{heading:"9.5 Program Changes",content:"We reserve the right to modify, suspend, or terminate the loyalty program at any time with reasonable notice. Changes to the program will be communicated via email and through our platform."},{heading:"9.6 Referral Program",content:"Our referral program allows you to earn rewards by referring friends. Referral rewards are subject to program terms and may require the referred customer to complete their first order."}]},{id:"intellectual-property",heading:"10. Intellectual Property Rights",content:"All content on our platform, including text, graphics, logos, images, and software, is the property of Salama Lama Food Truck and protected by intellectual property laws.",subsections:[{heading:"10.1 Ownership",content:"The Salama Lama name, logo, and all associated trademarks are our exclusive property. You may not use our intellectual property without prior written permission."},{heading:"10.2 Limited License",content:"We grant you a limited, non-exclusive, non-transferable license to access and use our platform for personal, non-commercial purposes in accordance with these Terms."},{heading:"10.3 User Content",content:"By submitting content to our platform (reviews, feedback, etc.), you grant us a worldwide, royalty-free license to use, reproduce, and display such content in connection with our services."}]},{id:"liability-limitations",heading:"11. Limitation of Liability and Disclaimers",content:"Our liability is limited to the maximum extent permitted by law. Important limitations and disclaimers apply to our services.",subsections:[{heading:'11.1 Service "As Is"',content:'Our services are provided "as is" without warranties of any kind, either express or implied. We do not guarantee uninterrupted or error-free service.'},{heading:"11.2 Food Safety",content:"While we maintain strict food safety standards, we are not responsible for adverse reactions or illness resulting from consumption of our products unless caused by our negligence."},{heading:"11.3 Limitation of Liability",content:"Our total liability for any claims arising from these Terms or your use of our services shall not exceed the amount you paid for the specific order giving rise to the claim."},{heading:"11.4 Exclusion of Damages",content:"We are not liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or goodwill."},{heading:"11.5 Force Majeure",content:"We are not liable for failure to perform obligations due to causes beyond our reasonable control, including natural disasters, power outages, strikes, or government actions."}]},{id:"privacy-data",heading:"12. Privacy and Data Protection",content:"We are committed to protecting your privacy and personal data in compliance with GDPR and applicable data protection laws.",subsections:[{heading:"12.1 Privacy Policy",content:"Our Privacy Policy, which is incorporated into these Terms, describes how we collect, use, and protect your personal information. Please review our Privacy Policy carefully."},{heading:"12.2 Data Collection",content:"We collect personal information necessary to process orders, provide services, and improve customer experience. This includes contact details, payment information, and order history."},{heading:"12.3 Data Security",content:"We implement appropriate security measures to protect your personal data. However, no method of transmission over the internet is 100% secure."},{heading:"12.4 Your Rights",content:"Under GDPR, you have rights to access, correct, delete, or restrict processing of your personal data. You can exercise these rights through your account settings or by contacting us."},{heading:"12.5 Marketing Communications",content:"You may opt in or out of marketing communications at any time through your account preferences or by following unsubscribe instructions in our emails."}]},{id:"dispute-resolution",heading:"13. Dispute Resolution and Governing Law",content:"These Terms are governed by Irish law. Disputes will be resolved through negotiation, mediation, or litigation in Ireland.",subsections:[{heading:"13.1 Governing Law",content:"These Terms and any disputes arising from them shall be governed by and construed in accordance with the laws of Ireland."},{heading:"13.2 Jurisdiction",content:"Any legal proceedings arising from these Terms shall be subject to the exclusive jurisdiction of the courts of Ireland."},{heading:"13.3 Informal Resolution",content:"Before initiating formal legal proceedings, we encourage you to contact us to attempt informal resolution of any dispute."},{heading:"13.4 Consumer Rights",content:"Nothing in these Terms affects your statutory rights as a consumer under Irish or EU law."}]},{id:"changes-to-terms",heading:"14. Changes to Terms and Service",content:"We may update these Terms periodically to reflect changes in our practices, services, or legal requirements.",subsections:[{heading:"14.1 Notification of Changes",content:"We will notify registered users of material changes to these Terms via email or prominent notice on our platform at least 7 days before the changes take effect."},{heading:"14.2 Acceptance of Changes",content:"Your continued use of our services after changes to these Terms constitutes acceptance of the revised Terms. If you do not agree to the changes, you should discontinue use of our services."},{heading:"14.3 Service Changes",content:"We reserve the right to modify, suspend, or discontinue any aspect of our services at any time without notice. We are not liable for any modification, suspension, or discontinuation of services."}]},{id:"contact-information",heading:"15. Contact Information and Support",content:"For questions, concerns, or support regarding these Terms or our services, please contact us through the following channels.",subsections:[{heading:"15.1 Customer Support",content:`You can reach our customer support team via phone at ${b.business_info.phone||"+353-1-XXX-XXXX"}, email at ${b.business_info.email||"hello@salamalama.ie"}, or through the contact form on our website.`},{heading:"15.2 Business Address",content:`Salama Lama Food Truck, ${b.business_info.address&&typeof b.business_info.address=="object"?`${b.business_info.address.line1}${b.business_info.address.line2?", "+b.business_info.address.line2:""}, ${b.business_info.address.city}, ${b.business_info.address.postal_code}`:"Dublin, Ireland"}. Our registered business address and VAT number are available upon request.`},{heading:"15.3 Response Times",content:"We aim to respond to all inquiries within 24-48 hours during business days. For urgent order-related issues, please call our phone line during operating hours."},{heading:"15.4 Feedback",content:"We welcome your feedback and suggestions. Please share your thoughts through our contact channels or leave a review on our platform."}]}]};x.useEffect(()=>{(async()=>{a(!0),await new Promise(M=>setTimeout(M,500)),s(h);const T=[];h.sections.forEach(M=>{T.push({id:M.id,title:M.heading,level:1}),M.subsections&&M.subsections.forEach((P,_)=>{T.push({id:`${M.id}-${_}`,title:P.heading,level:2})})}),o(T),a(!1)})()},[]),x.useEffect(()=>{if(!t)return;const k={root:null,rootMargin:"-20% 0px -70% 0px",threshold:0};return g.current=new IntersectionObserver(T=>{T.forEach(M=>{M.isIntersecting&&i(M.target.id)})},k),p.current.forEach(T=>{g.current&&g.current.observe(T)}),()=>{g.current&&g.current.disconnect()}},[t]),x.useEffect(()=>{const k=()=>{m(window.scrollY>400)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]);const N=k=>{const T=p.current.get(k);if(T){const _=T.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:_,behavior:"smooth"}),d(!1)}},j=()=>{window.scrollTo({top:0,behavior:"smooth"})},y=()=>{window.print()},f=(k,T)=>{T?p.current.set(k,T):p.current.delete(k)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r&&e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Terms & Conditions..."})]})}),!r&&t&&e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 mb-8 print:shadow-none print:border-0",children:e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(_s,{className:"w-8 h-8 text-orange-600"}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:t.title})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:b.business_info.name||"Salama Lama Food Truck"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last Updated: ",new Date(t.last_updated).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200","aria-label":"Print Terms & Conditions",children:[e.jsx(al,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Print"})]}),e.jsx(H,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200",children:e.jsx("span",{children:"Back to Home"})})]})]})}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0 print:hidden",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Table of Contents"}),e.jsx("nav",{className:"space-y-1 max-h-[calc(100vh-200px)] overflow-y-auto",children:l.map(k=>e.jsx("button",{onClick:()=>N(k.id),className:`
                          w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-150
                          ${k.level===2?"pl-6":""}
                          ${n===k.id?"bg-orange-50 text-orange-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                        `,children:e.jsxs("div",{className:"flex items-center gap-2",children:[n===k.id&&e.jsx($e,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:k.title})]})},k.id))})]})}),e.jsx("button",{onClick:()=>d(!c),className:"lg:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition-colors duration-200 print:hidden","aria-label":"Toggle table of contents",children:c?e.jsx(_e,{className:"w-6 h-6"}):e.jsx(nc,{className:"w-6 h-6"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 print:hidden",onClick:()=>d(!1)}),e.jsx("div",{className:"lg:hidden fixed inset-y-0 right-0 w-80 max-w-full bg-white shadow-2xl z-50 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Table of Contents"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close menu",children:e.jsx(_e,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("nav",{className:"space-y-1",children:l.map(k=>e.jsx("button",{onClick:()=>N(k.id),className:`
                              w-full text-left px-3 py-2 rounded-lg text-sm transition-colors duration-150
                              ${k.level===2?"pl-6":""}
                              ${n===k.id?"bg-orange-50 text-orange-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                            `,children:k.title},k.id))})]})})]}),e.jsxs("main",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 lg:p-12 print:shadow-none print:border-0",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-600 p-4 mb-8 rounded-r-lg print:break-inside-avoid",children:e.jsxs("p",{className:"text-sm text-orange-900 leading-relaxed",children:[e.jsx("strong",{children:"Please read these Terms and Conditions carefully."})," By accessing or using our services, you agree to be bound by these terms. If you do not agree to these terms, please do not use our services."]})}),e.jsx("article",{className:"prose prose-gray max-w-none",children:t.sections.map(k=>e.jsxs("section",{id:k.id,ref:T=>f(k.id,T),className:"mb-12 scroll-mt-24 print:break-inside-avoid",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-gray-200",children:k.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:k.content}),k.subsections&&k.subsections.length>0&&e.jsx("div",{className:"ml-0 sm:ml-4 space-y-6",children:k.subsections.map((T,M)=>e.jsxs("div",{id:`${k.id}-${M}`,ref:P=>f(`${k.id}-${M}`,P),className:"print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:T.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:T.content})]},`${k.id}-${M}`))})]},k.id))}),e.jsxs("div",{className:"mt-12 pt-8 border-t-2 border-gray-200 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Questions About These Terms?"}),e.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"If you have any questions or concerns about these Terms and Conditions, please contact us:"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:`mailto:${b.business_info.email||"hello@salamalama.ie"}`,className:"underline hover:text-blue-700",children:b.business_info.email||"hello@salamalama.ie"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",e.jsx("a",{href:`tel:${b.business_info.phone||"+353-1-XXX-XXXX"}`,className:"underline hover:text-blue-700",children:b.business_info.phone||"+353-1-XXX-XXXX"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",b.business_info.address&&typeof b.business_info.address=="object"?`${b.business_info.address.line1}${b.business_info.address.line2?", "+b.business_info.address.line2:""}, ${b.business_info.address.city}, ${b.business_info.address.postal_code}`:"Dublin, Ireland"]})]})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{className:"mb-2",children:"By using our services, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions."}),e.jsxs("p",{className:"font-medium text-gray-900",children:[" ",new Date().getFullYear()," ",b.business_info.name||"Salama Lama Food Truck",". All rights reserved."]})]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-4 justify-center print:hidden",children:[e.jsx(H,{to:"/privacy",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"Privacy Policy"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx(H,{to:"/contact",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"Contact Us"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx(H,{to:"/faqs",className:"text-sm text-orange-600 hover:text-orange-700 font-medium underline",children:"FAQs"})]})]})]})]}),u&&!r&&e.jsx("button",{onClick:j,className:"fixed bottom-6 left-6 z-40 w-12 h-12 bg-gray-900 hover:bg-gray-800 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-110 print:hidden","aria-label":"Back to top",children:e.jsx(gy,{className:"w-5 h-5"})})]}),e.jsx("style",{children:`
          @media print {
            body {
              print-color-adjust: exact;
              -webkit-print-color-adjust: exact;
            }
            
            .print\\:hidden {
              display: none !important;
            }
            
            .print\\:shadow-none {
              box-shadow: none !important;
            }
            
            .print\\:border-0 {
              border: 0 !important;
            }
            
            .print\\:break-inside-avoid {
              break-inside: avoid;
              page-break-inside: avoid;
            }
            
            h1, h2, h3 {
              break-after: avoid;
              page-break-after: avoid;
            }
            
            @page {
              margin: 2cm;
            }
          }
        `})]})},G4=async()=>{try{return(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/content/privacy")).data}catch{return{title:"Privacy Policy",last_updated:new Date().toISOString(),sections:[{id:"introduction",heading:"1. Introduction",content:"Salama Lama Food Truck ('we', 'us', or 'our') is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our website and services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site or use our services.",subsections:[]},{id:"data-controller",heading:"2. Data Controller",content:"Salama Lama Food Truck is the data controller responsible for your personal data. We are committed to ensuring that your privacy is protected in accordance with the General Data Protection Regulation (GDPR) and applicable Irish data protection laws.",subsections:[]},{id:"information-collected",heading:"3. Information We Collect",content:"We collect various types of information in connection with the services we provide, including:",subsections:[{heading:"Personal Identification Information",content:"Name, email address, phone number, delivery address, and payment information when you create an account or place an order."},{heading:"Order Information",content:"Details of your food orders, including items purchased, customizations, delivery preferences, and order history."},{heading:"Technical Information",content:"IP address, browser type, device information, operating system, and usage data collected through cookies and similar technologies."},{heading:"Location Data",content:"Delivery addresses and location information necessary to provide our services."},{heading:"Loyalty Program Data",content:"Points balance, rewards redemption history, badges earned, and referral activity."},{heading:"Communication Data",content:"Correspondence with customer support, catering inquiries, and marketing preferences."}]},{id:"how-we-use",heading:"4. How We Use Your Information",content:"We use the information we collect for the following purposes:",subsections:[{heading:"Service Delivery",content:"To process and fulfill your orders, manage deliveries, and provide customer support."},{heading:"Account Management",content:"To create and maintain your account, authenticate your identity, and manage your preferences."},{heading:"Payment Processing",content:"To process payments securely through our payment provider (SumUp) and prevent fraud."},{heading:"Loyalty Program",content:"To manage your loyalty points, rewards, badges, and referral program participation."},{heading:"Communications",content:"To send order confirmations, status updates, promotional offers (with your consent), and respond to inquiries."},{heading:"Service Improvement",content:"To analyze usage patterns, improve our menu offerings, and enhance user experience."},{heading:"Legal Compliance",content:"To comply with legal obligations, resolve disputes, and enforce our terms of service."}]},{id:"legal-basis",heading:"5. Legal Basis for Processing",content:"Under GDPR, we process your personal data based on the following legal grounds:",subsections:[{heading:"Contract Performance",content:"Processing necessary to fulfill our contract with you (order processing and delivery)."},{heading:"Consent",content:"Marketing communications and optional features (you can withdraw consent at any time)."},{heading:"Legitimate Interests",content:"Fraud prevention, service improvement, and business analytics."},{heading:"Legal Obligations",content:"Compliance with tax, accounting, and other legal requirements."}]},{id:"data-sharing",heading:"6. How We Share Your Information",content:"We do not sell your personal information. We may share your information with:",subsections:[{heading:"Service Providers",content:"Payment processors (SumUp), email service providers, cloud hosting, and analytics platforms that help us operate our business."},{heading:"Delivery Partners",content:"Delivery address and contact information necessary to fulfill delivery orders."},{heading:"Legal Authorities",content:"When required by law or to protect our rights, property, or safety."},{heading:"Business Transfers",content:"In the event of a merger, acquisition, or sale of assets, your information may be transferred."}]},{id:"data-retention",heading:"7. Data Retention",content:"We retain your personal data only as long as necessary for the purposes outlined in this policy:",subsections:[{heading:"Active Accounts",content:"Account and order data retained while your account is active."},{heading:"Anonymized Data",content:"After account deletion, order history is anonymized but retained for legal and accounting purposes (7 years)."},{heading:"Marketing Data",content:"Removed immediately upon unsubscribe or consent withdrawal."},{heading:"Technical Logs",content:"Retained for 90 days for security and troubleshooting purposes."}]},{id:"your-rights",heading:"8. Your Data Protection Rights (GDPR)",content:"Under GDPR, you have the following rights:",subsections:[{heading:"Right to Access",content:"Request a copy of all personal data we hold about you."},{heading:"Right to Rectification",content:"Request correction of inaccurate or incomplete data."},{heading:"Right to Erasure",content:"Request deletion of your personal data ('right to be forgotten')."},{heading:"Right to Restriction",content:"Request limitation of processing in certain circumstances."},{heading:"Right to Data Portability",content:"Receive your data in a structured, commonly used format."},{heading:"Right to Object",content:"Object to processing based on legitimate interests or direct marketing."},{heading:"Right to Withdraw Consent",content:"Withdraw consent at any time for consent-based processing."},{heading:"Right to Lodge a Complaint",content:"File a complaint with the Data Protection Commission (Ireland) if you believe your rights have been violated."}]},{id:"cookies",heading:"9. Cookies and Tracking Technologies",content:"We use cookies and similar technologies to enhance your experience, analyze usage, and provide personalized content. You can manage your cookie preferences through our Cookie Settings. For more information, please see our Cookie Policy.",subsections:[{heading:"Essential Cookies",content:"Required for website functionality (authentication, cart management)."},{heading:"Analytics Cookies",content:"Help us understand how visitors use our website (with your consent)."},{heading:"Marketing Cookies",content:"Used for personalized advertising and retargeting (with your consent)."}]},{id:"data-security",heading:"10. Data Security",content:"We implement appropriate technical and organizational measures to protect your personal data against unauthorized access, alteration, disclosure, or destruction. These include:",subsections:[{heading:"Encryption",content:"All data transmissions are encrypted using SSL/TLS. Payment information is tokenized and never stored in plain text."},{heading:"Access Controls",content:"Limited employee access to personal data based on job requirements."},{heading:"Regular Audits",content:"Security assessments and penetration testing to identify vulnerabilities."},{heading:"Secure Infrastructure",content:"Data hosted on secure cloud platforms with regular backups."}]},{id:"international-transfers",heading:"11. International Data Transfers",content:"Your data is primarily processed within the European Economic Area (EEA). If we transfer data outside the EEA, we ensure adequate safeguards are in place, such as Standard Contractual Clauses (SCCs) approved by the European Commission."},{id:"childrens-privacy",heading:"12. Children's Privacy",content:"Our services are not intended for individuals under the age of 16. We do not knowingly collect personal data from children. If you believe we have inadvertently collected information from a child, please contact us immediately."},{id:"third-party-links",heading:"13. Third-Party Links",content:"Our website may contain links to third-party websites (social media, payment processors). We are not responsible for the privacy practices of these external sites. We encourage you to review their privacy policies before providing any information."},{id:"changes-policy",heading:"14. Changes to This Privacy Policy",content:"We may update this Privacy Policy from time to time to reflect changes in our practices or legal requirements. The 'Last Updated' date at the top of this policy indicates when it was last revised. We will notify you of significant changes via email or prominent notice on our website."},{id:"contact-us",heading:"15. Contact Us",content:"If you have any questions about this Privacy Policy, wish to exercise your data protection rights, or need to contact our Data Protection Officer, please reach out to us:",subsections:[]}],contact_info:{dpo_email:"privacy@salamalama.ie",support_email:"hello@salamalama.ie",phone:"+353-1-234-5678"}}}},X4=async t=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/gdpr/export-data",{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,J4=()=>{const t=X(_=>_.authentication_state.current_user),s=X(_=>_.authentication_state.auth_token),[r,a]=x.useState(null),[n,i]=x.useState(!1),[l,o]=x.useState([]),[c,d]=x.useState(null),[u,m]=x.useState(null),b=je(),p=x.useRef({}),g=x.useRef(null),{data:h,isLoading:N,error:j}=le({queryKey:["privacyPolicy"],queryFn:G4,staleTime:30*60*1e3,retry:1}),y=ie({mutationFn:()=>{if(!s)throw new Error("Not authenticated");return X4(s)},onSuccess:()=>{d("Data export request submitted successfully! You will receive an email with your data within 48 hours."),m(null),setTimeout(()=>{d(null)},1e4)},onError:_=>{var v,O;const F=((O=(v=_.response)==null?void 0:v.data)==null?void 0:O.message)||_.message||"Failed to request data export. Please try again or contact support.";m(F),d(null)}});x.useEffect(()=>{if(h){const _=h.sections.map(F=>({id:F.id,title:F.heading,level:1}));o(_)}},[h]),x.useEffect(()=>{if(h)return g.current=new IntersectionObserver(_=>{_.forEach(F=>{F.isIntersecting&&F.intersectionRatio>.5&&a(F.target.id)})},{rootMargin:"-20% 0px -60% 0px",threshold:[.5]}),Object.values(p.current).forEach(_=>{var F;_&&((F=g.current)==null||F.observe(_))}),()=>{var _;(_=g.current)==null||_.disconnect()}},[h]);const f=x.useCallback(_=>{const F=p.current[_];if(F){const R=F.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:R,behavior:"smooth"})}},[]),k=()=>{window.print()},T=()=>{if(!t){b("/login?redirect_url=/privacy");return}m(null),d(null),y.mutate()},M=()=>{if(!t){b("/login?redirect_url=/privacy");return}b("/profile#delete-account")},P=()=>{i(!0)};return N?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading Privacy Policy..."})]})})}):j||!h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ce,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Privacy Policy"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're having trouble loading our privacy policy. Please try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 text-white py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(vi,{className:"h-12 w-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:h.title}),e.jsxs("p",{className:"text-blue-100",children:["Last Updated: ",new Date(h.last_updated).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("button",{onClick:k,className:"hidden md:flex items-center space-x-2 bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors print:hidden",children:[e.jsx(al,{className:"h-5 w-5"}),e.jsx("span",{children:"Print"})]})]}),e.jsx("p",{className:"text-lg text-blue-100 max-w-3xl",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your personal information in compliance with GDPR and Irish data protection laws."})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-1/4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sticky top-24",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(_s,{className:"h-5 w-5 mr-2 text-blue-600"}),"Table of Contents"]}),e.jsx("nav",{className:"space-y-2",children:l.map(_=>e.jsxs("button",{onClick:()=>f(_.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all duration-200 flex items-center justify-between group ${r===_.id?"bg-blue-50 text-blue-700 font-semibold":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("span",{className:"truncate",children:_.title}),r===_.id&&e.jsx($e,{className:"h-4 w-4 text-blue-600"})]},_.id))}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[e.jsxs("button",{onClick:P,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[e.jsx(ma,{className:"h-4 w-4"}),e.jsx("span",{children:"Cookie Settings"})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:T,disabled:y.isPending,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{children:y.isPending?"Requesting...":"Request My Data"})]}),e.jsxs("button",{onClick:M,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete My Account"})]})]})]})]})}),e.jsxs("main",{className:"lg:w-3/4",children:[c&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(we,{className:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-800",children:c})]})}),u&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:u})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 divide-y divide-gray-200",children:h.sections.map(_=>e.jsxs("section",{id:_.id,ref:F=>{F&&(p.current[_.id]=F)},className:"p-8 scroll-mt-24",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:_.heading}),e.jsxs("div",{className:"prose prose-gray max-w-none",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4 whitespace-pre-line",children:_.content}),_.subsections&&_.subsections.length>0&&e.jsx("div",{className:"space-y-4 mt-6",children:_.subsections.map((F,v)=>e.jsxs("div",{className:"pl-4 border-l-2 border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:F.heading}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:F.content})]},v))}),_.id==="contact-us"&&e.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-6 border border-blue-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(lt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Data Protection Officer"}),e.jsx("a",{href:`mailto:${h.contact_info.dpo_email}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:h.contact_info.dpo_email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(lt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Customer Support"}),e.jsx("a",{href:`mailto:${h.contact_info.support_email}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:h.contact_info.support_email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(zt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),e.jsx("a",{href:`tel:${h.contact_info.phone}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:h.contact_info.phone})]})]})]})})]})]},_.id))}),t&&e.jsxs("div",{className:"mt-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(vi,{className:"h-6 w-6 mr-2 text-blue-600"}),"Your GDPR Rights"]}),e.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"As a registered user, you can exercise your data protection rights directly through your account settings or by contacting us:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:T,disabled:y.isPending,className:"flex items-center justify-center space-x-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qt,{className:"h-5 w-5"}),e.jsx("span",{children:y.isPending?"Processing...":"Request My Data"})]}),e.jsxs(H,{to:"/profile",className:"flex items-center justify-center space-x-2 bg-white border-2 border-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium hover:bg-blue-50 hover:border-blue-300 transition-all duration-200",children:[e.jsx(vi,{className:"h-5 w-5"}),e.jsx("span",{children:"Manage Privacy Settings"})]})]})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-4 justify-center print:hidden",children:[e.jsxs(H,{to:"/terms",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Terms & Conditions"}),e.jsx(ma,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:P,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Cookie Policy"}),e.jsx(ma,{className:"h-4 w-4"})]}),e.jsxs(H,{to:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Contact Us"}),e.jsx(ma,{className:"h-4 w-4"})]})]})]})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cookie Settings"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We use cookies to enhance your experience, analyze site usage, and assist in our marketing efforts. You can manage your preferences below."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Essential Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Required for website functionality (authentication, cart, security). Cannot be disabled."})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Always Active"})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Analytics Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website."})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Marketing Cookies"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Used to deliver personalized advertisements and measure campaign effectiveness."})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{i(!1)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Save Preferences"})]})]})]})})})]})},Z4=()=>{const[t,s]=x.useState(""),[r,a]=x.useState(""),[n,i]=x.useState(!1),[l,o]=x.useState(!1),[c,d]=x.useState(!1),[u,m]=x.useState(null),[b,p]=x.useState(0),[g,h]=x.useState(null),[N,j]=x.useState(null),y=X(U=>U.authentication_state.authentication_status.is_loading),f=X(U=>U.authentication_state.error_message),k=X(U=>U.authentication_state.current_user),T=X(U=>U.authentication_state.authentication_status.is_authenticated),M=X(U=>U.login_user),P=X(U=>U.logout_user),_=X(U=>U.clear_auth_error),F=je(),v=5,O=3;x.useEffect(()=>{T&&k&&["staff","manager","admin"].includes(k.role)&&F("/staff/dashboard",{replace:!0})},[T,k,F]),x.useEffect(()=>{f&&(m(f),d(!1))},[f]);const R=U=>U?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U)?(h(null),!0):(h("Please enter a valid email address"),!1):(h("Email is required"),!1),C=U=>U?U.length<8?(j("Password must be at least 8 characters"),!1):(j(null),!0):(j("Password is required"),!1),z=()=>{const U=R(t),Y=C(r);return U&&Y},D=U=>{const Y=U.target.value;s(Y),m(null),_(),g&&h(null)},S=U=>{const Y=U.target.value;a(Y),m(null),_(),N&&j(null)},E=()=>{t&&R(t)},w=()=>{r&&C(r)},$=()=>{o(U=>!U)},B=async U=>{if(U.preventDefault(),b>=v){m("Too many failed login attempts. Please try again later or reset your password.");return}if(m(null),_(),!!z()){d(!0);try{await M(t,r,n);const Y=X.getState().authentication_state.current_user;if(Y){if(!["staff","manager","admin"].includes(Y.role)){m("Access denied. Staff credentials required."),p(Q=>Q+1),await P(),d(!1);return}p(0)}}catch(Y){console.error("Login error:",Y),p(K=>K+1);const Q=(Y==null?void 0:Y.message)||"Invalid email or password. Please try again.";m(Q),d(!1)}}},I=c||y,q=u||f,A=I||b>=v||!t||!r,L=b>=O&&b<v;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-gray-100 flex flex-col",children:[e.jsx("header",{className:"w-full py-6 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto flex justify-center items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Zx,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Salama Lama"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Staff Portal"})]})]})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"bg-white shadow-2xl shadow-blue-200/50 rounded-2xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(bs,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Sign In"}),e.jsx("p",{className:"text-gray-600",children:"Access your operational dashboard"})]}),q&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start space-x-3 animate-in fade-in duration-200",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:q})})]}),L&&!q&&e.jsxs("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 flex items-start space-x-3 animate-in fade-in duration-200",children:[e.jsx(ce,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["You have ",v-b," login attempt",v-b!==1?"s":""," remaining."]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Consider resetting your password if you've forgotten it."})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(lt,{className:`w-5 h-5 ${g?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:D,onBlur:E,placeholder:"staff@salamalama.ie",className:`
                        block w-full pl-12 pr-4 py-3 rounded-lg
                        border-2 transition-all duration-200
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4
                        ${g?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}
                      `})]}),g&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1 animate-in fade-in duration-200",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:g})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(bs,{className:`w-5 h-5 ${N?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:S,onBlur:w,placeholder:"Enter your password",className:`
                        block w-full pl-12 pr-12 py-3 rounded-lg
                        border-2 transition-all duration-200
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4
                        ${N?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}
                      `}),e.jsx("button",{type:"button",onClick:$,className:"absolute inset-y-0 right-0 pr-4 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-r-lg","aria-label":l?"Hide password":"Show password",children:l?e.jsx(zs,{className:"w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors"}):e.jsx(Ns,{className:"w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors"})})]}),N&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1 animate-in fade-in duration-200",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:N})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:n,onChange:U=>i(U.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Remember me for 30 days"})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:A,className:`
                      w-full flex justify-center items-center
                      py-3 px-4 rounded-lg font-semibold text-base
                      transition-all duration-200
                      focus:outline-none focus:ring-4 focus:ring-blue-100
                      ${A?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg active:scale-95"}
                    `,children:I?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In to Staff Portal"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(H,{to:"/forgot-password",className:"text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Forgot your password?"})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Zx,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Secure Staff Access"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"This portal is for authorized staff members only. All login attempts are monitored and logged."})]})]})}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Need help? Contact your manager or email"," ",e.jsx("a",{href:"mailto:support@salamalama.ie",className:"text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"support@salamalama.ie"})]})]})}),e.jsx("footer",{className:"py-6 px-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," Salama Lama Food Truck. All rights reserved."]})})]})})},e6=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/dashboard",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,t6=async t=>{const s=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},params:{limit:5,sort_by:"created_at",sort_order:"asc"}}),r=["received","preparing","ready","out_for_delivery"];return{...s.data,orders:s.data.orders.filter(a=>r.includes(a.status))}},s6=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${s}/status`,{status:r,notes:"Updated from dashboard"},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,r6=t=>{if(!t)return null;const s=new Date(t).getTime(),r=new Date().getTime();return Math.floor((s-r)/6e4)},a6=t=>{if(t===null)return"N/A";if(t<0)return"Overdue";if(t<60)return`${t}m`;const s=Math.floor(t/60),r=t%60;return`${s}h ${r}m`},n6=t=>t===null?"text-gray-500":t<0?"text-red-600":t<15?"text-orange-600":t<30?"text-yellow-600":"text-green-600",i6=()=>{const t=je(),s=Fe(),r=X(v=>v.authentication_state.auth_token),a=X(v=>v.authentication_state.current_user),[n,i]=x.useState(new Set),[l,o]=x.useState(new Date().toISOString()),{data:c,isLoading:d,refetch:u}=le({queryKey:["staffDashboardMetrics"],queryFn:()=>e6(r),enabled:!!r,staleTime:3e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:2}),{data:m,isLoading:b,error:p,refetch:g}=le({queryKey:["staffActiveOrders"],queryFn:()=>t6(r),enabled:!!r,staleTime:15e3,refetchInterval:15e3,refetchOnWindowFocus:!0,retry:2}),h=ie({mutationFn:({orderId:v,newStatus:O})=>s6(r,v,O),onSuccess:()=>{s.invalidateQueries({queryKey:["staffDashboardMetrics"]}),s.invalidateQueries({queryKey:["staffActiveOrders"]})}}),N=x.useMemo(()=>c?{total_orders_today:c.total_orders_today,orders_in_progress:c.orders_in_progress,orders_completed_today:c.orders_completed_today,average_prep_time:c.average_prep_time}:{total_orders_today:0,orders_in_progress:0,orders_completed_today:0,average_prep_time:null},[c]),j=x.useMemo(()=>m!=null&&m.orders?m.orders.map(v=>({order_id:v.order_id,order_number:v.order_number,order_type:v.order_type,customer_name:v.customer_name,items_summary:`${v.items.length} item${v.items.length!==1?"s":""}`,collection_time_slot:v.collection_time_slot,time_remaining:r6(v.collection_time_slot)})):[],[m]),y=x.useMemo(()=>c!=null&&c.low_stock_items?c.low_stock_items.filter(v=>!n.has(v.item_id)).map(v=>({item_id:v.item_id,item_name:v.name,current_stock:Number(v.current_stock||0),low_stock_threshold:Number(v.low_stock_threshold||0),alert_level:Number(v.current_stock||0)===0?"critical":"warning"})):[],[c,n]);x.useEffect(()=>{(c||m)&&o(new Date().toISOString())},[c,m]);const f=()=>{u(),g()},k=(v,O)=>{h.mutate({orderId:v,newStatus:O})},T=v=>{i(O=>new Set(O).add(v))},M=()=>{t("/staff/orders")},P=v=>{t(`/staff/orders/${v}`)},_=()=>{t("/staff/stock")},F=v=>v==="collection"?{text:"Collection",color:"bg-blue-100 text-blue-800"}:{text:"Delivery",color:"bg-purple-100 text-purple-800"};return!r||!a?(t("/staff/login"),null):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",a.first_name,"! Here's your operational overview."]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last updated"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:new Date(l).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("button",{onClick:f,disabled:d||b,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Refresh dashboard",children:[e.jsx(ks,{className:`size-5 mr-2 ${d||b?"animate-spin":""}`}),"Refresh"]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):N.total_orders_today}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Today"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Dt,{className:"size-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):N.orders_in_progress}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active orders"})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Le,{className:"size-8 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):N.orders_completed_today}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Today"})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(we,{className:"size-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 transition-all duration-200 hover:shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Prep Time"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:d?e.jsx("span",{className:"inline-block w-16 h-8 bg-gray-200 animate-pulse rounded"}):N.average_prep_time!==null?`${Math.round(N.average_prep_time)}m`:"N/A"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minutes"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(U1,{className:"size-8 text-purple-600"})})]})})]}),y.length>0&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Kt,{className:"size-6 text-orange-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[y.length," alert",y.length!==1?"s":""]})]}),e.jsx("button",{onClick:_,className:"text-sm font-medium text-orange-600 hover:text-orange-700 transition-colors",children:"View Stock "})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.map(v=>e.jsxs("div",{className:`px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors ${v.alert_level==="critical"?"bg-red-50":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${v.alert_level==="critical"?"bg-red-100":"bg-yellow-100"}`,children:e.jsx(Pe,{className:`size-5 ${v.alert_level==="critical"?"text-red-600":"text-yellow-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:v.item_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:["Current stock: ",e.jsx("span",{className:`font-semibold ${v.alert_level==="critical"?"text-red-600":"text-yellow-600"}`,children:v.current_stock})," / Threshold: ",v.low_stock_threshold]})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${v.alert_level==="critical"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:v.alert_level==="critical"?"Out of Stock":"Low Stock"})]}),e.jsx("button",{onClick:()=>T(v.item_id),className:"ml-4 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all","aria-label":"Acknowledge alert",children:e.jsx(_e,{className:"size-5"})})]},v.item_id))})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(wt,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Next Orders"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[j.length," active"]})]}),e.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:["View All Orders",e.jsx($e,{className:"size-4 ml-1"})]})]})}),p?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Kt,{className:"size-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load orders"}),e.jsx("button",{onClick:()=>g(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Try Again"})]}):b?e.jsx("div",{className:"divide-y divide-gray-200",children:[1,2,3].map(v=>e.jsx("div",{className:"px-6 py-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded"})]})},v))}):j.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(we,{className:"size-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"All caught up!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No active orders at the moment."})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(v=>{const O=F(v.order_type),R=n6(v.time_remaining);return e.jsx("div",{className:"px-6 py-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Order #",v.order_number]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.color}`,children:O.text})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Hr,{className:"size-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:v.customer_name})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Pe,{className:"size-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:v.items_summary})]}),v.collection_time_slot&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Le,{className:`size-4 mr-2 flex-shrink-0 ${R}`}),e.jsx("span",{className:"text-gray-600",children:new Date(v.collection_time_slot).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("span",{className:`ml-2 font-semibold ${R}`,children:["(",a6(v.time_remaining),")"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[e.jsx("button",{onClick:()=>P(v.order_id),className:"px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200",children:"View Details"}),e.jsx("button",{onClick:()=>k(v.order_id,"preparing"),disabled:h.isPending,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:h.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx(ks,{className:"size-4 mr-2 animate-spin"}),"Updating..."]}):"Start Preparing"})]})]})},v.order_id)})})]})]})]})})},l6=async(t,s)=>{const r=new URLSearchParams;s.status&&r.append("status",s.status),s.order_type&&r.append("order_type",s.order_type),r.append("sort_by",s.sort_by);const a=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}}),n=new Date,l=(Array.isArray(a.data.orders)?a.data.orders:[]).map(c=>({...c,items:Array.isArray(c.items)?c.items:[],time_since_received:Math.floor((n.getTime()-new Date(c.created_at).getTime())/6e4)})),o={total_active:l.length,new_count:l.filter(c=>c.status==="received").length,preparing_count:l.filter(c=>c.status==="preparing").length,ready_count:l.filter(c=>c.status==="ready").length,out_for_delivery_count:l.filter(c=>c.status==="out_for_delivery").length};return{orders:l,stats:o}},o6=async(t,s)=>{const{order_id:r,status:a,notes:n}=s;return(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${r}/status`,{status:a,notes:n},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data},c6=t=>{if(t<1)return"Just now";if(t===1)return"1 minute ago";if(t<60)return`${t} minutes ago`;const s=Math.floor(t/60);return s===1?"1 hour ago":`${s} hours ago`},_y=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}catch{return t}},d6=t=>{if(!t)return null;try{const s=new Date(t),r=new Date;return Math.floor((s.getTime()-r.getTime())/6e4)}catch{return null}},u6=t=>{switch(t){case"received":return"bg-gray-100 text-gray-800 border-gray-300";case"preparing":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"ready":return"bg-green-100 text-green-800 border-green-300";case"out_for_delivery":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},h0=t=>{switch(t){case"received":return"New";case"preparing":return"Preparing";case"ready":return"Ready";case"out_for_delivery":return"Out for Delivery";case"completed":return"Completed";default:return t}},m6=t=>{switch(t.status){case"received":return{label:"Start Preparing",status:"preparing"};case"preparing":return{label:"Mark as Ready",status:"ready"};case"ready":return t.order_type==="collection"?{label:"Mark Completed",status:"completed"}:{label:"Out for Delivery",status:"out_for_delivery"};case"out_for_delivery":return{label:"Mark Completed",status:"completed"};default:return null}},h6=t=>{const s=t.items.map(r=>{let a="";return r.selected_customizations&&Object.entries(r.selected_customizations).forEach(([n,i])=>{a+=`
   - ${n}: ${i}`}),`${r.quantity}x ${r.item_name}${a}`}).join(`
`);return`

  SALAMA LAMA FOOD TRUCK


ORDER #${t.order_number}

[${t.order_type.toUpperCase()}]${t.collection_time_slot?` - ${_y(t.collection_time_slot)}`:""}

Customer: ${t.customer_name}
Phone: ${t.customer_phone}


ITEMS:


${s}

${t.special_instructions?`
  SPECIAL INSTRUCTIONS:

${t.special_instructions}
`:""}

Received: ${new Date(t.created_at).toLocaleString("en-IE")}

  `.trim()},x6=t=>{const s=h6(t),r=window.open("","","width=600,height=800");r&&(r.document.write(`
      <html>
        <head>
          <title>Kitchen Ticket - ${t.order_number}</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 20px;
              white-space: pre-wrap;
            }
            @media print {
              body { margin: 0; }
            }
          </style>
        </head>
        <body>
          ${s.replace(/\n/g,"<br>")}
        </body>
      </html>
    `),r.document.close(),r.focus(),r.print(),r.close())},g6=()=>{const[t,s]=Xe(),r=Fe(),a=X(R=>R.authentication_state.auth_token),n=X(R=>R.authentication_state.current_user),i=X(R=>R.websocket_state.connected),l=X(R=>R.subscribe_to_staff_events),o=X(R=>R.add_notification),[c,d]=x.useState({status:t.get("status")||null,order_type:t.get("order_type")||null,sort_by:"created_at"}),[u,m]=x.useState(()=>localStorage.getItem("staff_order_view_mode")||"list"),[b,p]=x.useState({audio_enabled:!0,muted_until:null}),{data:g,isLoading:h,isError:N,error:j,refetch:y}=le({queryKey:["staff","orders",c],queryFn:()=>l6(a,c),enabled:!!a,staleTime:1e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:2}),f=Array.isArray(g==null?void 0:g.orders)?g.orders:[],k=(g==null?void 0:g.stats)||{total_active:0,new_count:0,preparing_count:0,ready_count:0,out_for_delivery_count:0},T=ie({mutationFn:R=>o6(a,R),onMutate:async R=>{await r.cancelQueries({queryKey:["staff","orders"]});const C=r.getQueryData(["staff","orders",c]);return r.setQueryData(["staff","orders",c],z=>z&&{...z,orders:z.orders.map(D=>D.order_id===R.order_id?{...D,status:R.status}:D)}),{previousData:C}},onError:(R,C,z)=>{z!=null&&z.previousData&&r.setQueryData(["staff","orders",c],z.previousData),o({type:"error",message:`Failed to update order status: ${R instanceof Error?R.message:"Unknown error"}`})},onSuccess:(R,C)=>{r.invalidateQueries({queryKey:["staff","orders"]}),o({type:"success",message:`Order #${R.order_number} status updated to ${h0(C.status)}`})}}),M=(R,C)=>{T.mutate({order_id:R.order_id,status:C})};x.useEffect(()=>{a&&n&&(n.role==="staff"||n.role==="manager"||n.role==="admin")&&l()},[a,n,l]),x.useEffect(()=>()=>{},[r,b,o]),x.useEffect(()=>{const R=new URLSearchParams;c.status&&R.set("status",c.status),c.order_type&&R.set("order_type",c.order_type),s(R,{replace:!0})},[c,s]),x.useEffect(()=>{localStorage.setItem("staff_order_view_mode",u)},[u]);const P=(R,C)=>{d(z=>({...z,[R]:C}))},_=()=>{p(R=>({...R,audio_enabled:!R.audio_enabled}))},F=()=>{const R=new Date;R.setMinutes(R.getMinutes()+15),p(C=>({...C,muted_until:R.toISOString()}))},v=x.useMemo(()=>{const R=Array.isArray(f)?f:[];return{received:R.filter(C=>C.status==="received"),preparing:R.filter(C=>C.status==="preparing"),ready:R.filter(C=>C.status==="ready"),out_for_delivery:R.filter(C=>C.status==="out_for_delivery")}},[f]),O=R=>{const C=m6(R),z=d6(R.collection_time_slot),D=z!==null&&z<0,S=z!==null&&z>0&&z<=10;return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border-l-4 p-4 space-y-3 ${R.status==="received"?"border-l-gray-400":R.status==="preparing"?"border-l-yellow-400":R.status==="ready"?"border-l-green-400":"border-l-blue-400"}`,children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["#",R.order_number]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full border ${R.order_type==="collection"?"bg-purple-100 text-purple-800 border-purple-300":"bg-orange-100 text-orange-800 border-orange-300"}`,children:R.order_type==="collection"?"COLLECTION":"DELIVERY"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full border ${u6(R.status)}`,children:h0(R.status)})]})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-700",children:e.jsx("span",{className:"font-medium",children:R.customer_name})}),e.jsxs("a",{href:`tel:${R.customer_phone}`,className:"flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx(zt,{className:"w-4 h-4 mr-1"}),R.customer_phone]})]}),R.order_type==="collection"&&R.collection_time_slot&&e.jsxs("div",{className:`flex items-center text-sm ${D?"text-red-600 font-semibold":S?"text-orange-600 font-semibold":"text-gray-600"}`,children:[e.jsx(Le,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Collection: ",_y(R.collection_time_slot)]}),z!==null&&e.jsxs("span",{className:"ml-2",children:["(",z>0?`in ${z} min`:`${Math.abs(z)} min overdue`,")"]})]}),R.order_type==="delivery"&&R.delivery_address_snapshot&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Delivery to:"})," ",R.delivery_address_snapshot.address_line1,", ",R.delivery_address_snapshot.city]}),e.jsx("div",{className:"border-t pt-3",children:e.jsx("div",{className:"space-y-2",children:Array.isArray(R.items)&&R.items.length>0?R.items.map(E=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[E.quantity,"x ",E.item_name]}),E.selected_customizations&&Object.keys(E.selected_customizations).length>0&&e.jsx("div",{className:"ml-4 text-xs text-gray-600 space-y-0.5",children:Object.entries(E.selected_customizations).map(([w,$],B)=>e.jsxs("div",{children:["- ",w,": ",e.jsx("span",{className:"font-medium",children:String($)})]},B))})]},E.order_item_id)):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No items available"})})}),R.special_instructions&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-2",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"w-4 h-4 text-red-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Special:"})," ",R.special_instructions]})]})}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Le,{className:"w-3 h-3 mr-1"}),"Received ",c6(R.time_since_received)]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[C&&e.jsx("button",{onClick:()=>M(R,C.status),disabled:T.isPending,className:`flex-1 flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${C.status==="preparing"?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500":C.status==="ready"?"bg-orange-600 hover:bg-orange-700 text-white focus:ring-orange-500":C.status==="completed"?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500":C.status==="out_for_delivery"?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500":"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500"}`,children:T.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),C.label]})}),e.jsx("button",{onClick:()=>x6(R),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx(al,{className:"w-4 h-4"})}),e.jsx(H,{to:`/staff/orders/${R.order_id}`,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:e.jsx($e,{className:"w-4 h-4"})})]})]},R.order_id)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Gx,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Queue"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time kitchen management"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ny,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(vy,{className:"w-5 h-5 text-red-600 animate-pulse"}),e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Reconnecting..."})]})}),e.jsx("button",{onClick:_,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500",title:b.audio_enabled?"Mute notifications":"Enable notifications",children:b.audio_enabled?e.jsx(Wr,{className:"w-5 h-5 text-gray-700"}):e.jsx(S1,{className:"w-5 h-5 text-gray-400"})}),b.audio_enabled&&e.jsx("button",{onClick:F,className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md text-gray-700 transition-colors",children:"Mute 15 min"}),e.jsx("button",{onClick:()=>y(),disabled:h,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50",title:"Refresh orders",children:e.jsx(ks,{className:`w-5 h-5 text-gray-700 ${h?"animate-spin":""}`})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("button",{onClick:()=>P("status",null),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${c.status===null?"border-orange-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.total_active}),e.jsx("div",{className:"text-sm text-gray-600",children:"All Active"})]}),e.jsxs("button",{onClick:()=>P("status","received"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${c.status==="received"?"border-gray-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:k.new_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"New"})]}),e.jsxs("button",{onClick:()=>P("status","preparing"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${c.status==="preparing"?"border-yellow-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:k.preparing_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Preparing"})]}),e.jsxs("button",{onClick:()=>P("status","ready"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${c.status==="ready"?"border-green-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:k.ready_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ready"})]}),e.jsxs("button",{onClick:()=>P("status","out_for_delivery"),className:`bg-white rounded-lg shadow-sm border-2 p-4 text-center transition-all hover:shadow-md ${c.status==="out_for_delivery"?"border-blue-500":"border-transparent"}`,children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:k.out_for_delivery_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Out for Delivery"})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("select",{value:c.order_type||"",onChange:R=>P("order_type",R.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"",children:"All Order Types"}),e.jsx("option",{value:"collection",children:"Collection Only"}),e.jsx("option",{value:"delivery",children:"Delivery Only"})]}),e.jsxs("select",{value:c.sort_by,onChange:R=>P("sort_by",R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"created_at",children:"Sort by: Oldest First"}),e.jsx("option",{value:"updated_at",children:"Sort by: Recently Updated"}),e.jsx("option",{value:"order_number",children:"Sort by: Order Number"}),e.jsx("option",{value:"total_amount",children:"Sort by: Total Amount"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-lg transition-colors ${u==="list"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(R1,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>m("kanban"),className:`p-2 rounded-lg transition-colors ${u==="kanban"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(M1,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:[h&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}),N&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(ce,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to load orders"}),e.jsx("p",{className:"text-red-700 mb-4",children:j instanceof Error?j.message:"Unknown error"}),e.jsx("button",{onClick:()=>y(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}),!h&&!N&&f.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[e.jsx(Gx,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders in queue"}),e.jsx("p",{className:"text-gray-600",children:c.status||c.order_type?"Try adjusting your filters to see more orders":"All orders are up to date!"})]}),!h&&!N&&f.length>0&&e.jsxs(e.Fragment,{children:[u==="list"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(R=>O(R))}),u==="kanban"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),"New (",v.received.length,")"]}),e.jsx("div",{className:"space-y-3",children:v.received.map(R=>O(R))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full mr-2"}),"Preparing (",v.preparing.length,")"]}),e.jsx("div",{className:"space-y-3",children:v.preparing.map(R=>O(R))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full mr-2"}),"Ready (",v.ready.length,")"]}),e.jsx("div",{className:"space-y-3",children:v.ready.map(R=>O(R))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-400 rounded-full mr-2"}),"Out for Delivery (",v.out_for_delivery.length,")"]}),e.jsx("div",{className:"space-y-3",children:v.out_for_delivery.map(R=>O(R))})]})]})]})]})]})})},p6=async(t,s)=>{const r=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return{...r.data,status_history:r.data.status_history||[]}},f6=async(t,s)=>{const{order_id:r,...a}=t,n=await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/orders/${r}/status`,a,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return{...n.data,status_history:n.data.status_history||[]}},ta=t=>`${Number(t||0).toFixed(2)}`,x0=t=>{const s=new Date,r=new Date(t),a=s.getTime()-r.getTime(),n=Math.floor(a/6e4),i=Math.floor(n/60),l=Math.floor(i/24);return n<1?"Just now":n<60?`${n} min${n>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:`${l} day${l>1?"s":""} ago`},sd=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g0=t=>{switch(t){case"received":return"bg-gray-100 text-gray-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-green-100 text-green-800";case"out_for_delivery":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},rd=t=>{switch(t){case"received":return"Received";case"preparing":return"Preparing";case"ready":return"Ready for Collection";case"out_for_delivery":return"Out for Delivery";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t}},y6=t=>{switch(t){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},b6=()=>{var P,_;const{order_id:t}=Jt(),s=je(),r=Fe(),a=X(F=>F.authentication_state.auth_token),n=X(F=>F.websocket_state.socket),i=X(F=>F.add_notification),[l,o]=x.useState(!1),[c,d]=x.useState(""),{data:u,isLoading:m,error:b,refetch:p}=le({queryKey:["staff-order-detail",t],queryFn:()=>p6(t,a),enabled:!!t&&!!a,staleTime:3e4,refetchOnWindowFocus:!0,retry:1}),g=b?((_=(P=b.response)==null?void 0:P.data)==null?void 0:_.message)||b.message||"Failed to load order":null,h=ie({mutationFn:F=>f6(F,a),onSuccess:F=>{r.setQueryData(["staff-order-detail",t],F),i({type:"order_status_update",message:`Order status updated to ${rd(F.status)}`}),d("")},onError:F=>{var O,R;const v=((R=(O=F.response)==null?void 0:O.data)==null?void 0:R.message)||F.message||"Failed to update status";i({type:"error",message:v})}}),N=h.isPending;x.useEffect(()=>{if(!n||!t)return;const F=v=>{v.data.order_id===t&&(p(),i({type:"order_status_update",message:`Order status updated by ${v.data.changed_by_name||"another staff member"}`}))};return n.on("order_status_updated",F),()=>{n.off("order_status_updated",F)}},[n,t,p,i]);const j=()=>{s("/staff/orders")},y=()=>{u!=null&&u.customer_phone&&(window.location.href=`tel:${u.customer_phone}`)},f=()=>{if(!u)return;const F=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Kitchen Ticket - ${u.order_number}</title>
        <style>
          @media print {
            @page { margin: 0.5cm; }
            body { 
              font-family: monospace; 
              font-size: 12pt; 
              line-height: 1.4;
              color: #000;
            }
          }
          body {
            font-family: monospace;
            max-width: 80mm;
            margin: 0 auto;
            padding: 10px;
          }
          .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 10px;
          }
          .order-number {
            font-size: 24pt;
            font-weight: bold;
            margin: 10px 0;
          }
          .section {
            margin: 15px 0;
            border-bottom: 1px dashed #000;
            padding-bottom: 10px;
          }
          .item {
            margin: 10px 0;
          }
          .item-name {
            font-weight: bold;
            font-size: 14pt;
          }
          .customization {
            margin-left: 20px;
            font-size: 11pt;
          }
          .instructions {
            border: 2px solid #000;
            padding: 10px;
            margin: 15px 0;
            font-weight: bold;
          }
          .phone {
            font-size: 14pt;
            font-weight: bold;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div>SALAMA LAMA FOOD TRUCK</div>
          <div class="order-number">#${u.order_number}</div>
        </div>
        
        <div class="section">
          <div><strong>TYPE:</strong> ${u.order_type.toUpperCase()}</div>
          ${u.order_type==="collection"&&u.collection_time_slot?`<div><strong>TIME:</strong> ${sd(u.collection_time_slot)}</div>`:""}
          ${u.order_type==="delivery"&&u.delivery_address_snapshot?`<div><strong>ADDRESS:</strong> ${u.delivery_address_snapshot.address_line1}, ${u.delivery_address_snapshot.city}</div>`:""}
        </div>
        
        <div class="section">
          <div><strong>ITEMS:</strong></div>
          ${u.items.map(O=>`
            <div class="item">
              <div class="item-name">${O.quantity}x ${O.item_name}</div>
              ${O.selected_customizations?Object.entries(O.selected_customizations).map(([R,C])=>`
                <div class="customization"> ${R}: ${C}</div>
              `).join(""):""}
            </div>
          `).join("")}
        </div>
        
        ${u.special_instructions?`
          <div class="instructions">
            <div><strong>SPECIAL INSTRUCTIONS:</strong></div>
            <div>${u.special_instructions}</div>
          </div>
        `:""}
        
        <div class="section">
          <div class="phone">Customer: ${u.customer_phone}</div>
          <div><strong>Received:</strong> ${sd(u.created_at)}</div>
        </div>
      </body>
      </html>
    `,v=window.open("","_blank");v&&(v.document.write(F),v.document.close(),v.focus(),setTimeout(()=>{v.print(),v.close()},250))},k=F=>{u&&h.mutate({order_id:u.order_id,status:F,notes:c.trim()||void 0})},T=()=>{if(!u)return null;const F=u.status;return F==="received"?e.jsx("button",{onClick:()=>k("preparing"),disabled:N,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:"Start Preparing"})}):F==="preparing"?e.jsx("button",{onClick:()=>k(u.order_type==="delivery"?"out_for_delivery":"ready"),disabled:N,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:u.order_type==="delivery"?"Mark Out for Delivery":"Mark as Ready"})}):F==="ready"||F==="out_for_delivery"?e.jsx("button",{onClick:()=>k("completed"),disabled:N,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsx("span",{children:"Mark as Completed"})}):null},M=({current_status:F,order_type:v})=>{const O=v==="delivery"?["received","preparing","out_for_delivery","completed"]:["received","preparing","ready","completed"],R={received:"Received",preparing:"Preparing",ready:"Ready",out_for_delivery:"Out for Delivery",completed:"Completed"},C=O.indexOf(F);return e.jsx("div",{className:"flex items-center justify-between w-full",children:O.map((z,D)=>{const S=z===F,E=D<C;return e.jsxs(ia.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${S?"bg-blue-600 text-white scale-110":E?"bg-green-600 text-white":"bg-gray-200 text-gray-400"}`,children:E?e.jsx(we,{className:"w-5 h-5"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-current"})}),e.jsx("span",{className:`text-xs mt-2 text-center ${S?"text-blue-700 font-semibold":E?"text-green-700 font-medium":"text-gray-400"}`,children:R[z]})]}),D<O.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded transition-all duration-200 ${D<C?"bg-green-600":"bg-gray-200"}`})]},z)})})};return m?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading order details..."})]})})})})}):g||!u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Kt,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Order"}),e.jsx("p",{className:"text-red-700 mb-4",children:g||"Order not found"}),e.jsxs(H,{to:"/staff/orders",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Order Queue"]})]})]})})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-6 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to order queue",children:e.jsx(dt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Order Number"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["#",u.order_number]})]})]}),e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[e.jsx(al,{className:"w-4 h-4"}),e.jsx("span",{children:"Print Ticket"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${g0(u.status)}`,children:rd(u.status)}),e.jsxs("span",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Le,{className:"w-4 h-4 mr-1"}),x0(u.created_at)]})]}),e.jsx(M,{current_status:u.status,order_type:u.order_type})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("div",{className:"text-base font-medium text-gray-900",children:u.customer_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Phone"}),e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsx("span",{children:u.customer_phone})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("div",{className:"text-base text-gray-700",children:u.customer_email})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-semibold ${u.order_type==="collection"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:u.order_type.toUpperCase()})}),u.order_type==="collection"&&u.collection_time_slot&&e.jsxs("div",{className:"flex items-start space-x-3 bg-blue-50 p-4 rounded-lg",children:[e.jsx(Le,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Collection Time"}),e.jsx("div",{className:"text-lg font-bold text-blue-700",children:sd(u.collection_time_slot)})]})]}),u.order_type==="delivery"&&u.delivery_address_snapshot&&e.jsxs("div",{className:"flex items-start space-x-3 bg-blue-50 p-4 rounded-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"Delivery Address"}),e.jsxs("div",{className:"text-base text-blue-800",children:[u.delivery_address_snapshot.address_line1,u.delivery_address_snapshot.address_line2&&`, ${u.delivery_address_snapshot.address_line2}`]}),e.jsxs("div",{className:"text-base text-blue-800",children:[u.delivery_address_snapshot.city,", ",u.delivery_address_snapshot.postal_code]}),u.delivery_address_snapshot.delivery_instructions&&e.jsxs("div",{className:"mt-2 text-sm text-blue-700 italic",children:["Note: ",u.delivery_address_snapshot.delivery_instructions]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-6",children:u.items.map(F=>e.jsxs("div",{className:"border-b border-gray-200 last:border-b-0 pb-4 last:pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[F.quantity," ",F.item_name]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[ta(F.unit_price)," each"]})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:ta(F.line_total)})]}),F.selected_customizations&&Object.keys(F.selected_customizations).length>0&&e.jsxs("div",{className:"mt-3 bg-orange-50 border-l-4 border-orange-400 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-900 mb-2",children:"Customizations:"}),e.jsx("div",{className:"space-y-1",children:Object.entries(F.selected_customizations).map(([v,O])=>e.jsxs("div",{className:"text-sm font-medium text-orange-800",children:[" ",v,": ",e.jsx("span",{className:"font-bold",children:String(O)})]},v))})]})]},F.order_item_id))})]}),u.special_instructions&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Kt,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-900 mb-2",children:"Special Instructions"}),e.jsx("p",{className:"text-base font-medium text-yellow-800 leading-relaxed",children:u.special_instructions})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:ta(u.subtotal)})]}),u.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount ",u.discount_code&&`(${u.discount_code})`]}),e.jsxs("span",{className:"font-medium",children:["-",ta(u.discount_amount)]})]}),u.delivery_fee&&u.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{className:"font-medium",children:ta(u.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT)"}),e.jsx("span",{className:"font-medium",children:ta(u.tax_amount)})]}),e.jsx("div",{className:"pt-3 border-t-2 border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:ta(u.total_amount)})]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Payment Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y6(u.payment_status)}`,children:u.payment_status.toUpperCase()})]}),u.payment_method_type&&e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Payment Method"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.payment_method_type})]})]})]})]}),u.status!=="completed"&&u.status!=="cancelled"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Update Order Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{id:"status_notes",value:c,onChange:F=>d(F.target.value),placeholder:"Add any notes about this status update...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{children:T()})]})]}),u.status_history.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("button",{onClick:()=>o(!l),className:"flex items-center justify-between w-full text-left",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Status History"}),l?e.jsx(na,{className:"w-5 h-5 text-gray-400"}):e.jsx(Os,{className:"w-5 h-5 text-gray-400"})]}),l&&e.jsx("div",{className:"mt-4 space-y-4",children:u.status_history.map(F=>e.jsx("div",{className:"flex items-start space-x-3 border-l-2 border-gray-300 pl-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${g0(F.status)}`,children:rd(F.status)}),e.jsx("span",{className:"text-sm text-gray-500",children:x0(F.changed_at)})]}),F.notes&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 italic",children:F.notes})]})},F.history_id))})]})]})})})},j6=async(t,s,r)=>{const a=new URLSearchParams;s&&a.append("category",s),r&&r!=="all"&&a.append("status",r);const i=(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/stock",{headers:{Authorization:`Bearer ${t}`},params:a})).data.items;let l=0,o=0,c=0;return{stock_items:i.map(u=>{let m="ok";return u.stock_tracked?u.current_stock===0?(m="out_of_stock",o++):u.current_stock!==null&&u.low_stock_threshold!==null&&u.current_stock<=u.low_stock_threshold?(m="low_stock",l++):c++:c++,{item_id:u.item_id,name:u.name,category_id:u.category_id,category_name:u.category_name,current_stock:u.current_stock,low_stock_threshold:u.low_stock_threshold,stock_tracked:u.stock_tracked,stock_status:m,is_active:u.is_active,image_url:u.image_url}}),stock_summary:{total_items_tracked:i.filter(u=>u.stock_tracked).length,low_stock_count:l,out_of_stock_count:o,items_ok_count:c}}},p0=async(t,s)=>{const{item_id:r,...a}=s;return(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/staff/stock/${r}`,a,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data},v6=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories,N6=()=>{var S,E;const[t,s]=Xe(),r=X(w=>w.authentication_state.auth_token),[a,n]=x.useState(t.get("category")||"all"),[i,l]=x.useState(t.get("status")||"all"),[o,c]=x.useState({}),[d,u]=x.useState(null),[m,b]=x.useState({}),p=Fe(),{data:g=[]}=le({queryKey:["staff-categories"],queryFn:()=>v6(r),enabled:!!r,staleTime:5*60*1e3}),{data:h,isLoading:N,error:j,refetch:y}=le({queryKey:["staff-stock",a==="all"?null:a,i],queryFn:()=>j6(r,a==="all"?null:a,i),enabled:!!r,staleTime:60*1e3,refetchOnWindowFocus:!1}),f=(h==null?void 0:h.stock_items)||[],k=(h==null?void 0:h.stock_summary)||{total_items_tracked:0,low_stock_count:0,out_of_stock_count:0,items_ok_count:0},T=ie({mutationFn:w=>p0(r,w),onSuccess:(w,$)=>{p.invalidateQueries({queryKey:["staff-stock"]}),c(B=>({...B,[$.item_id]:!1})),u(null),b(B=>{const I={...B};return delete I[$.item_id],I})},onError:(w,$)=>{c(B=>({...B,[$.item_id]:!1})),console.error("Stock update failed:",w)}}),M=ie({mutationFn:w=>p0(r,{item_id:w,change_type:"adjustment",quantity:0,reason:"ran_out_during_service",notes:"Marked out of stock by staff during service"}),onSuccess:()=>{p.invalidateQueries({queryKey:["staff-stock"]})}});x.useEffect(()=>{const w=new URLSearchParams;a!=="all"&&w.set("category",a),i!=="all"&&w.set("status",i),s(w)},[a,i,s]),x.useEffect(()=>{const w=X.getState().websocket_state.socket;if(w!=null&&w.connected){const $=()=>{p.invalidateQueries({queryKey:["staff-stock"]})};return w.on("stock.updated",$),w.on("stock.low",$),()=>{w.off("stock.updated",$),w.off("stock.low",$)}}},[p]);const P=w=>{n(w.target.value)},_=w=>{l(w.target.value)},F=()=>{n("all"),l("all")},v=w=>{d===w?u(null):(u(w),m[w]||b($=>({...$,[w]:{change_type:"restock",quantity:"",reason:"",notes:""}})))},O=(w,$,B)=>{b(I=>({...I,[w]:{...I[w],[$]:B}}))},R=w=>{const $=m[w];if(!$||!$.quantity)return;const B=parseInt($.quantity,10);if(isNaN(B)||B<=0){alert("Please enter a valid quantity");return}c(I=>({...I,[w]:!0})),T.mutate({item_id:w,change_type:$.change_type,quantity:B,reason:$.reason||void 0,notes:$.notes||void 0})},C=(w,$)=>{window.confirm(`Mark "${$}" as out of stock? This will notify the admin.`)&&M.mutate(w)},z=w=>{switch(w){case"ok":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Eu,{className:"w-3.5 h-3.5"}),"In Stock"]});case"low_stock":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Kt,{className:"w-3.5 h-3.5"}),"Low Stock"]});case"out_of_stock":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(it,{className:"w-3.5 h-3.5"}),"Out of Stock"]});default:return null}},D=w=>{switch(w){case"ok":return"border-green-200";case"low_stock":return"border-yellow-200";case"out_of_stock":return"border-red-200";default:return"border-gray-200"}};return N&&!h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading stock levels..."})]})})})})}):j?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[e.jsx(it,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Stock Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:W.isAxiosError(j)?((E=(S=j.response)==null?void 0:S.data)==null?void 0:E.message)||j.message:"An unexpected error occurred"}),e.jsxs("button",{onClick:()=>y(),className:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:[e.jsx(ks,{className:"w-4 h-4"}),"Retry"]})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Monitor and update inventory levels in real-time"})]}),e.jsxs("button",{onClick:()=>y(),disabled:N,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:`w-4 h-4 ${N?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl border-2 border-blue-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Items Tracked"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:k.total_items_tracked})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(fy,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-green-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-green-700",children:k.items_ok_count})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Eu,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-yellow-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-700",children:k.low_stock_count})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Kt,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-red-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-red-700",children:k.out_of_stock_count})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(it,{className:"w-6 h-6 text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(Qm,{className:"w-5 h-5 text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category-filter",value:a,onChange:P,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Categories"}),g.map(w=>e.jsx("option",{value:w.category_id,children:w.name},w.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),e.jsxs("select",{id:"status-filter",value:i,onChange:_,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"low_stock",children:"Low Stock Only"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock Only"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:F,disabled:a==="all"&&i==="all",className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Filters"})})]})]})]}),f.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center shadow-sm",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Items Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a!=="all"||i!=="all"?"Try adjusting your filters to see more items.":"No stock items are currently being tracked."}),(a!=="all"||i!=="all")&&e.jsx("button",{onClick:F,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(w=>{const $=d===w.item_id,B=m[w.item_id]||{change_type:"restock",quantity:"",reason:"",notes:""},I=o[w.item_id]||!1;return e.jsxs("div",{className:`bg-white rounded-xl border-2 ${D(w.stock_status)} shadow-sm overflow-hidden transition-all hover:shadow-lg`,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600",children:w.category_name})]}),e.jsx("div",{className:"ml-4",children:z(w.stock_status)})]}),w.stock_tracked?e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:w.current_stock!==null?w.current_stock:"N/A"})]}),w.low_stock_threshold!==null&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Low threshold:"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:w.low_stock_threshold})]})]}):e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Stock not tracked for this item"})}),w.stock_tracked&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>v(w.item_id),disabled:I,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:$?"Cancel Update":"Update Stock"}),w.stock_status!=="out_of_stock"&&e.jsx("button",{onClick:()=>C(w.item_id,w.name),disabled:I||M.isPending,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Out of Stock"})]})]}),$&&w.stock_tracked&&e.jsxs("div",{className:"border-t-2 border-gray-100 p-6 bg-gray-50",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Update Stock Level"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Type"}),e.jsxs("select",{value:B.change_type,onChange:q=>O(w.item_id,"change_type",q.target.value),disabled:I,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"restock",children:"Restock"}),e.jsx("option",{value:"adjustment",children:"Adjustment"}),e.jsx("option",{value:"waste",children:"Waste"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",min:"0",value:B.quantity,onChange:q=>O(w.item_id,"quantity",q.target.value),disabled:I,placeholder:"Enter quantity",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (optional)"}),e.jsx("input",{type:"text",value:B.reason,onChange:q=>O(w.item_id,"reason",q.target.value),disabled:I,placeholder:"e.g., Delivery received",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:B.notes,onChange:q=>O(w.item_id,"notes",q.target.value),disabled:I,placeholder:"Additional details...",rows:2,className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsx("button",{onClick:()=>R(w.item_id),disabled:I||!B.quantity,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Submit Update"})]})]})]},w.item_id)})})]})})})},w6=()=>{const[t,s]=Xe(),[r,a]=x.useState(t.get("period")||"today"),[n,i]=x.useState("daily"),l=X(M=>M.authentication_state.auth_token);x.useEffect(()=>{const M=t.get("period");M&&a(M)},[t]);const o=M=>{const P=new Date;switch(M){case"today":return P.toISOString().split("T")[0];case"yesterday":{const _=new Date(P);return _.setDate(_.getDate()-1),_.toISOString().split("T")[0]}case"last_7_days":return"last_7_days";default:return P.toISOString().split("T")[0]}},c=M=>`${Number(M||0).toFixed(2)}`,d=M=>new Date(M).toLocaleDateString("en-IE",{weekday:"short",month:"short",day:"numeric"}),{data:u,isLoading:m,error:b,refetch:p}=le({queryKey:["staff-daily-report",r],queryFn:async()=>{const M=o(r),P=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/reports/daily",{headers:{Authorization:`Bearer ${l}`},params:{date:M}});return{total_orders:P.data.total_orders||0,total_revenue:Number(P.data.total_revenue||0),average_order_value:Number(P.data.average_order_value||0),top_items:(P.data.top_items||[]).map(_=>({item_name:_.item_name||_.name||"",quantity_sold:Number(_.quantity_sold||_.quantity||0)}))}},enabled:!!l&&n==="daily",staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:g,isLoading:h,error:N,refetch:j}=le({queryKey:["staff-weekly-report"],queryFn:async()=>{const M=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/staff/reports/daily",{headers:{Authorization:`Bearer ${l}`},params:{period:"last_7_days"}});return{total_orders:M.data.total_orders||0,total_revenue:Number(M.data.total_revenue||0),daily_breakdown:M.data.daily_data||M.data.daily_breakdown||[]}},enabled:!!l&&n==="weekly",staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),y=M=>{a(M),s({period:M})},f=M=>{i(M)},k=n==="daily"?m:h,T=n==="daily"?b:N;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Reports"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"View daily and weekly operational metrics"})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",role:"tablist",children:[e.jsx("button",{onClick:()=>f("daily"),role:"tab","aria-selected":n==="daily",className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="daily"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Daily Report"}),e.jsx("button",{onClick:()=>f("weekly"),role:"tab","aria-selected":n==="weekly",className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="weekly"?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Weekly Report"})]})}),n==="daily"&&e.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"}].map(({value:M,label:P})=>e.jsx("button",{onClick:()=>y(M),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${r===M?"bg-orange-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:P},M))}),T&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Failed to load report data."}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:T instanceof Error?T.message:"Please try again later."})]})]}),e.jsx("button",{onClick:()=>n==="daily"?p():j(),className:"mt-3 px-4 py-2 bg-red-100 text-red-800 rounded-md hover:bg-red-200 transition-colors text-sm font-medium",children:"Retry"})]}),k&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading report data..."})]})}),n==="daily"&&!k&&u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Orders"}),e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:u.total_orders}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders processed"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Revenue"}),e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(u.total_revenue)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sales generated"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Average Order Value"}),e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(u.average_order_value)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Per order"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Top Selling Items"}),u.top_items.length>0?e.jsx("div",{className:"space-y-3",children:u.top_items.map((M,P)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 border-b border-gray-100 last:border-0 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold text-sm ${P===0?"bg-yellow-100 text-yellow-800":P===1?"bg-gray-200 text-gray-800":P===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:P+1}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:M.item_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:M.quantity_sold}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"sold"})]})]},P))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No item sales data available for this period"})]})]})]}),n==="weekly"&&!k&&g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Orders (7 Days)"}),e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:g.total_orders}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Average: ",e.jsx("span",{className:"font-semibold text-gray-700",children:(g.total_orders/7).toFixed(1)})," orders/day"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Revenue (7 Days)"}),e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:c(g.total_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Average: ",e.jsx("span",{className:"font-semibold text-gray-700",children:c(g.total_revenue/7)}),"/day"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Daily Breakdown"}),g.daily_breakdown.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Date"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Orders"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700 uppercase tracking-wide text-sm",children:"Revenue"})]})}),e.jsx("tbody",{children:g.daily_breakdown.map((M,P)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4 text-gray-900 font-medium",children:d(M.date)}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900 font-semibold text-lg",children:M.orders}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900 font-semibold text-lg",children:c(Number(M.revenue||0))})]},P))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 border-gray-200 bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4 font-bold text-gray-900 uppercase tracking-wide",children:"Total"}),e.jsx("td",{className:"py-4 px-4 text-right font-bold text-gray-900 text-xl",children:g.total_orders}),e.jsx("td",{className:"py-4 px-4 text-right font-bold text-gray-900 text-xl",children:c(g.total_revenue)})]})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No daily breakdown data available"})]})]})]}),!k&&!T&&e.jsxs(e.Fragment,{children:[n==="daily"&&!u&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-16 text-center",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Report Data"}),e.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]}),n==="weekly"&&!g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-16 text-center",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Report Data"}),e.jsx("p",{className:"text-gray-500",children:"No weekly data available"})]})]})]})})})},Ym="https://123salama-lama-food-truck.launchpulse.ai",_6=async t=>(await W.get(`${Ym}/api/staff/profile`,{headers:{Authorization:`Bearer ${t}`}})).data,k6=async t=>(await W.put(`${Ym}/api/staff/profile`,t.data,{headers:{Authorization:`Bearer ${t.token}`}})).data,C6=async t=>{await W.put(`${Ym}/api/profile/password`,t.data,{headers:{Authorization:`Bearer ${t.token}`}})},S6=()=>{const t=X(C=>C.authentication_state.auth_token),[s,r]=x.useState({first_name:"",last_name:"",phone:""}),[a,n]=x.useState({audio_notifications:!0,new_order_alerts:!0,low_stock_alerts:!0,mute_duration_minutes:0}),[i,l]=x.useState({current_password:"",new_password:"",confirm_password:""}),[o,c]=x.useState(!1),[d,u]=x.useState({}),[m,b]=x.useState(null),[p,g]=x.useState("weak"),h=Fe(),{data:N,isLoading:j}=le({queryKey:["staff-profile"],queryFn:()=>_6(t),enabled:!!t,staleTime:5*60*1e3}),y=ie({mutationFn:k6,onSuccess:C=>{h.setQueryData(["staff-profile"],C),b("Profile updated successfully!"),u({}),setTimeout(()=>b(null),5e3)},onError:C=>{var D,S;const z=((S=(D=C.response)==null?void 0:D.data)==null?void 0:S.message)||"Failed to update profile";u({general:z})}}),f=ie({mutationFn:C6,onSuccess:()=>{l({current_password:"",new_password:"",confirm_password:""}),c(!1),b("Password changed successfully!"),u({}),setTimeout(()=>b(null),5e3)},onError:C=>{var D,S;const z=((S=(D=C.response)==null?void 0:D.data)==null?void 0:S.message)||"Failed to change password";u({password:z})}});x.useEffect(()=>{N&&(r({first_name:N.first_name,last_name:N.last_name,phone:N.phone}),N.staff_permissions&&n({audio_notifications:N.staff_permissions.audio_notifications??!0,new_order_alerts:N.staff_permissions.new_order_alerts??!0,low_stock_alerts:N.staff_permissions.low_stock_alerts??!0,mute_duration_minutes:N.staff_permissions.mute_duration_minutes??0}))},[N]),x.useEffect(()=>{if(m){const C=setTimeout(()=>b(null),5e3);return()=>clearTimeout(C)}},[m]),x.useEffect(()=>{const C=i.new_password;if(C.length===0){g("weak");return}let z=0;C.length>=8&&z++,/[a-z]/.test(C)&&/[A-Z]/.test(C)&&z++,/\d/.test(C)&&z++,/[^a-zA-Z0-9]/.test(C)&&z++,z<=1?g("weak"):z<=3?g("medium"):g("strong")},[i.new_password]);const k=()=>{const C={};return s.first_name.trim()||(C.first_name="First name is required"),s.last_name.trim()||(C.last_name="Last name is required"),s.phone.trim()?s.phone.trim().length<10&&(C.phone="Phone number must be at least 10 characters"):C.phone="Phone number is required",u(C),Object.keys(C).length===0},T=()=>{const C={};return i.current_password||(C.current_password="Current password is required"),i.new_password?i.new_password.length<8?C.new_password="Password must be at least 8 characters":(!/[a-zA-Z]/.test(i.new_password)||!/\d/.test(i.new_password))&&(C.new_password="Password must include letters and numbers"):C.new_password="New password is required",i.confirm_password?i.new_password!==i.confirm_password&&(C.confirm_password="Passwords do not match"):C.confirm_password="Please confirm your password",u(C),Object.keys(C).length===0},M=(C,z)=>{r(D=>({...D,[C]:z})),u(D=>{const S={...D};return delete S[C],S})},P=(C,z)=>{l(D=>({...D,[C]:z})),u(D=>{const S={...D};return delete S[C],delete S.password,S})},_=C=>{n(z=>({...z,[C]:typeof z[C]=="boolean"?!z[C]:z[C]}))},F=C=>{n(z=>({...z,mute_duration_minutes:C}))},v=()=>{k()&&y.mutate({token:t,data:{first_name:s.first_name,last_name:s.last_name,phone:s.phone}})},O=()=>{y.mutate({token:t,data:{staff_permissions:a}})},R=()=>{T()&&f.mutate({token:t,data:{current_password:i.current_password,new_password:i.new_password}})};return j?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Tl,{className:"w-12 h-12 text-orange-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading profile..."})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),m&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-start",children:[e.jsx(we,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-green-800 font-medium",children:m})})]}),d.general&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-800 font-medium",children:d.general})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(At,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Profile Information"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.first_name,onChange:C=>M("first_name",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.first_name?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your first name"}),d.first_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.first_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.last_name,onChange:C=>M("last_name",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.last_name?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your last name"}),d.last_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:(N==null?void 0:N.email)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:s.phone,onChange:C=>M("phone",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.phone?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-orange-500"} focus:ring-4 focus:ring-orange-100 transition-all outline-none`,placeholder:"Enter your phone number"}),d.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:(N==null?void 0:N.role)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed capitalize"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:v,disabled:y.isPending,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Tl,{className:"w-5 h-5 animate-spin mr-2"}),"Saving..."]}):"Save Profile"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(bs,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Password"})]}),!o&&e.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-blue-100 text-sm font-medium transition-colors",children:"Change Password"})]})}),o?e.jsxs("div",{className:"p-6",children:[d.password&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:d.password})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.current_password,onChange:C=>P("current_password",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.current_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Enter current password"}),d.current_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.current_password})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.new_password,onChange:C=>P("new_password",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.new_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Enter new password"}),d.new_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.new_password}),i.new_password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${p==="weak"?"w-1/3 bg-red-500":p==="medium"?"w-2/3 bg-yellow-500":"w-full bg-green-500"}`})}),e.jsx("span",{className:`text-xs font-medium ${p==="weak"?"text-red-600":p==="medium"?"text-yellow-600":"text-green-600"}`,children:p==="weak"?"Weak":p==="medium"?"Medium":"Strong"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters with letters and numbers"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:i.confirm_password,onChange:C=>P("confirm_password",C.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${d.confirm_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} focus:ring-4 focus:ring-blue-100 transition-all outline-none`,placeholder:"Confirm new password"}),d.confirm_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.confirm_password})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{c(!1),l({current_password:"",new_password:"",confirm_password:""}),u({})},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:f.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Tl,{className:"w-5 h-5 animate-spin mr-2"}),"Changing..."]}):"Change Password"})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Keep your account secure by using a strong password."})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Wr,{className:"w-6 h-6 text-white mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Notification Preferences"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Audio Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Play sound alerts for new orders"})]}),e.jsx("button",{onClick:()=>_("audio_notifications"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${a.audio_notifications?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a.audio_notifications?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"New Order Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when new orders arrive"})]}),e.jsx("button",{onClick:()=>_("new_order_alerts"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${a.new_order_alerts?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a.new_order_alerts?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Low Stock Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when items are running low"})]}),e.jsx("button",{onClick:()=>_("low_stock_alerts"),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-100 ${a.low_stock_alerts?"bg-purple-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a.low_stock_alerts?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"pt-3",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Le,{className:"w-5 h-5 text-gray-600 mr-2"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Temporary Mute"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Mute all notifications for a set duration during busy periods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[0,15,30,60].map(C=>e.jsx("button",{onClick:()=>F(C),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${a.mute_duration_minutes===C?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:C===0?"Unmuted":`${C} min`},C))}),a.mute_duration_minutes>0&&e.jsxs("p",{className:"mt-3 text-sm text-purple-600 font-medium",children:["Notifications will be muted for ",a.mute_duration_minutes," minutes"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:O,disabled:y.isPending,className:"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-4 focus:ring-purple-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Tl,{className:"w-5 h-5 animate-spin mr-2"}),"Saving..."]}):"Save Preferences"})})]})]})]})})})},P6=()=>{const[t,s]=x.useState({email:"",password:"",remember_me:!1}),[r,a]=x.useState(""),[n,i]=x.useState(!1),[l,o]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState(!1),[b,p]=x.useState(0),[g,h]=x.useState(null),[N,j]=x.useState(0),y=X(S=>S.authentication_state.current_user),f=X(S=>S.authentication_state.authentication_status.is_authenticated),k=X(S=>S.authentication_state.authentication_status.is_loading),T=X(S=>S.authentication_state.error_message),M=X(S=>S.login_user),P=X(S=>S.clear_auth_error),_=je();x.useEffect(()=>{f&&y&&(y.role==="admin"?_("/admin/dashboard",{replace:!0}):y.role==="staff"||y.role==="manager"?_("/staff/dashboard",{replace:!0}):y.role==="customer"&&_("/dashboard",{replace:!0}))},[f,y,_]),x.useEffect(()=>{if(g){const S=setInterval(()=>{const E=new Date,w=Math.max(0,Math.floor((g.getTime()-E.getTime())/1e3));j(w),w===0&&(h(null),p(0),d(null))},1e3);return()=>clearInterval(S)}},[g]),x.useEffect(()=>{T&&d(T)},[T]);const F=S=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S),v=S=>{const E=Math.floor(S/60),w=S%60;return`${E}:${w.toString().padStart(2,"0")}`},O=(S,E)=>{s(w=>({...w,[S]:E})),c&&(d(null),P())},R=()=>{const S=b+1;if(p(S),S>=5){const E=new Date;E.setMinutes(E.getMinutes()+15),h(E),d("Too many failed login attempts. Your account has been temporarily locked for security.")}},C=()=>t.email.trim()?F(t.email)?t.password.trim()?t.password.length<8?(d("Password must be at least 8 characters"),!1):!0:(d("Password is required"),!1):(d("Please enter a valid email address"),!1):(d("Email address is required"),!1),z=async S=>{if(S.preventDefault(),g){d("Account temporarily locked. Please try again later.");return}if(C()){o(!0),d(null);try{await M(t.email.trim().toLowerCase(),t.password,t.remember_me);const E=X.getState().authentication_state.current_user;E&&E.role==="admin"?(p(0),h(null)):E&&(d("Access denied. Administrator privileges required."),X.getState().logout_user(),R())}catch(E){console.error("Admin login error:",E),R();const w=E.message||"Invalid email or password. Please try again.";d(w)}finally{o(!1)}}},D=async S=>{if(S.preventDefault(),!r.trim()||r.length!==6){d("Please enter a valid 6-digit verification code");return}o(!0),d(null);try{console.log("2FA code submitted:",r),await new Promise(E=>setTimeout(E,1e3)),m(!1),_("/admin/dashboard")}catch{d("Invalid verification code. Please try again."),R()}finally{o(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 p-3 rounded-full shadow-lg",children:e.jsx(vi,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Administrator Portal"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Secure access to business management"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-10",children:[c&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(ce,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:c}),g&&N>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Time remaining: ",v(N)]})]})]}),b>0&&b<5&&e.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[b===1&&"Failed login attempt. 4 attempts remaining.",b===2&&"Failed login attempt. 3 attempts remaining.",b===3&&"Warning: 2 attempts remaining before lockout.",b===4&&"Final attempt remaining. Account will be locked after next failure."]})}),!u&&e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(lt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"admin-email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:S=>O("email",S.target.value),disabled:l||k||!!g,placeholder:"admin@salamalama.ie",className:`block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 
                                 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                                 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(bs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"admin-password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:t.password,onChange:S=>O("password",S.target.value),disabled:l||k||!!g,placeholder:"Enter your secure password",className:`block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 
                                 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                                 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`}),e.jsx("button",{type:"button",onClick:()=>i(!n),disabled:l||k||!!g,className:`absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 
                                 disabled:cursor-not-allowed transition-colors`,"aria-label":n?"Hide password":"Show password",children:n?e.jsx(zs,{className:"h-5 w-5"}):e.jsx(Ns,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:t.remember_me,onChange:S=>O("remember_me",S.target.checked),disabled:l||k||!!g,className:`h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 
                               disabled:cursor-not-allowed`}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Keep me signed in"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l||k||!!g,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg
                               text-base font-semibold text-white bg-gradient-to-r from-orange-600 to-red-600
                               hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                               focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed
                               transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
                               shadow-lg hover:shadow-xl`,children:l||k?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Sign In to Admin Portal"})})]}),u&&e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mb-4",children:e.jsx(vi,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter the 6-digit code from your authenticator app"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-code",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Verification Code"}),e.jsx("input",{id:"two-factor-code",name:"two-factor-code",type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,required:!0,value:r,onChange:S=>{const E=S.target.value.replace(/\D/g,"");a(E),c&&d(null)},disabled:l,placeholder:"000000",className:`block w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-2xl tracking-widest
                               text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 
                               focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed transition-all`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:l||r.length!==6,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg
                               text-base font-semibold text-white bg-gradient-to-r from-orange-600 to-red-600
                               hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                               focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed
                               transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
                               shadow-lg hover:shadow-xl`,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify and Sign In"}),e.jsx("button",{type:"button",onClick:()=>{m(!1),a(""),d(null)},disabled:l,className:`w-full py-2 px-4 text-sm font-medium text-gray-700 hover:text-gray-900 
                               disabled:cursor-not-allowed transition-colors`,children:"Back to password"})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[e.jsx(bs,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Secure administrator access"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Protected by advanced security measures"})})]})})})},E6=async(t,s)=>{var a,n;const r=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/dashboard",{headers:{Authorization:`Bearer ${t}`},params:{date_range:s}});return{orders_today:r.data.orders_today||0,revenue_today:r.data.revenue_today||0,new_customers_today:r.data.new_customers_today||0,collection_percentage:((a=r.data.orders_breakdown)==null?void 0:a.collection_percentage)||0,delivery_percentage:((n=r.data.orders_breakdown)==null?void 0:n.delivery_percentage)||0}},F6=async t=>{const s=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/dashboard/alerts",{headers:{Authorization:`Bearer ${t}`}});return{low_stock_items_count:s.data.low_stock_items_count||0,new_catering_inquiries_count:s.data.new_catering_inquiries_count||0,low_stock_items:s.data.low_stock_items||[]}},T6=async t=>((await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders",{headers:{Authorization:`Bearer ${t}`},params:{limit:10,sort_by:"created_at",sort_order:"desc"}})).data.orders||[]).map(r=>({order_id:r.order_id,order_number:r.order_number,customer_name:r.customer_name,order_type:r.order_type,total_amount:Number(r.total_amount||0),status:r.status,created_at:r.created_at})),A6=async(t,s)=>((await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{headers:{Authorization:`Bearer ${t}`},params:{date_range:s,report_type:"revenue_trend"}})).data.revenue_by_day||[]).map(a=>({date:a.date,value:Number(a.revenue||0)})),M6=async(t,s)=>{await W.put("https://123salama-lama-food-truck.launchpulse.ai/api/admin/delivery/settings",{delivery_enabled:s},{headers:{Authorization:`Bearer ${t}`}})},L6=({data:t,height:s=200,color:r="#3b82f6"})=>{if(t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data available"});const a=Math.max(...t.map(o=>o.value),1),n=100,i=10,l=t.map((o,c)=>{const d=c/(t.length-1||1)*(n-i*2)+i,u=s-o.value/a*(s-i*2)-i;return`${d},${u}`}).join(" ");return e.jsxs("svg",{viewBox:`0 0 ${n} ${s}`,className:"w-full h-full",children:[e.jsx("polyline",{fill:"none",stroke:r,strokeWidth:"2",points:l}),t.map((o,c)=>{const d=c/(t.length-1||1)*(n-i*2)+i,u=s-o.value/a*(s-i*2)-i;return e.jsx("circle",{cx:d,cy:u,r:"2",fill:r},c)})]})},$6=()=>{const[t,s]=Xe(),r=Fe(),a=X(z=>z.authentication_state.auth_token),n=X(z=>z.authentication_state.current_user),i=X(z=>z.business_settings.delivery_enabled),l=X(z=>z.update_business_settings),[o,c]=x.useState(t.get("date_range")||"today"),[d,u]=x.useState(null);x.useEffect(()=>{s(o!=="today"?{date_range:o}:{})},[o,s]);const{data:m,isLoading:b,error:p,refetch:g}=le({queryKey:["admin-dashboard-metrics",o],queryFn:()=>E6(a,o),enabled:!!a,staleTime:6e4,refetchOnWindowFocus:!1}),{data:h,isLoading:N,refetch:j}=le({queryKey:["admin-dashboard-alerts"],queryFn:()=>F6(a),enabled:!!a,staleTime:3e4,refetchInterval:6e4,refetchOnWindowFocus:!1}),{data:y,isLoading:f,error:k,refetch:T}=le({queryKey:["admin-recent-orders"],queryFn:()=>T6(a),enabled:!!a,staleTime:3e4,refetchOnWindowFocus:!1}),{data:M,isLoading:P,error:_}=le({queryKey:["admin-revenue-chart",o],queryFn:()=>A6(a,o),enabled:!!a,staleTime:6e4,refetchOnWindowFocus:!1}),F=ie({mutationFn:z=>M6(a,z),onSuccess:(z,D)=>{l({delivery_enabled:D}),r.invalidateQueries({queryKey:["admin-dashboard-metrics"]})}}),v=()=>{g(),j(),T(),u(new Date().toISOString())},O=z=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(z),R=z=>new Intl.DateTimeFormat("en-IE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(z)),C=b||N||f||P;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("select",{value:o,onChange:z=>c(z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"this_month",children:"This Month"})]}),e.jsxs("button",{onClick:v,disabled:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[e.jsx("svg",{className:`w-4 h-4 mr-2 ${C?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),d&&e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",R(d)]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Orders Today"}),b?e.jsx("div",{className:"mt-2 h-8 w-20 bg-gray-200 animate-pulse rounded"}):p?e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Error loading"}):e.jsx("p",{className:"mt-2 text-4xl font-bold text-gray-900",children:(m==null?void 0:m.orders_today)||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue Today"}),b?e.jsx("div",{className:"mt-2 h-8 w-24 bg-gray-200 animate-pulse rounded"}):p?e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Error loading"}):e.jsx("p",{className:"mt-2 text-4xl font-bold text-green-600",children:O((m==null?void 0:m.revenue_today)||0)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"New Customers"}),b?e.jsx("div",{className:"mt-2 h-8 w-16 bg-gray-200 animate-pulse rounded"}):p?e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Error loading"}):e.jsx("p",{className:"mt-2 text-4xl font-bold text-gray-900",children:(m==null?void 0:m.new_customers_today)||0})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-4",children:"Order Types"}),b?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"})]}):p?e.jsx("p",{className:"text-sm text-red-600",children:"Error loading"}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Collection"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[(m==null?void 0:m.collection_percentage.toFixed(0))||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m==null?void 0:m.collection_percentage)||0}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Delivery"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[(m==null?void 0:m.delivery_percentage.toFixed(0))||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m==null?void 0:m.delivery_percentage)||0}%`}})})]})]})]})]}),h&&(h.low_stock_items_count>0||h.new_catering_inquiries_count>0)&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-8 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Pending Alerts"}),e.jsxs("div",{className:"space-y-2",children:[h.low_stock_items_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-semibold",children:h.low_stock_items_count})," items are low in stock"]}),e.jsx(H,{to:"/admin/stock?status=low_stock",className:"text-sm font-medium text-yellow-800 hover:text-yellow-900 underline",children:"View Stock"})]}),h.new_catering_inquiries_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-semibold",children:h.new_catering_inquiries_count})," new catering inquiries"]}),e.jsx(H,{to:"/admin/catering?status=new",className:"text-sm font-medium text-yellow-800 hover:text-yellow-900 underline",children:"View Inquiries"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),P?e.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"}):_?e.jsx("div",{className:"h-64 flex items-center justify-center text-red-600",children:"Failed to load chart data"}):e.jsx("div",{className:"h-64",children:e.jsx(L6,{data:M||[],height:200,color:"#10b981"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Service"}),e.jsx("button",{onClick:()=>F.mutate(!i),disabled:F.isPending,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${i?"bg-blue-600":"bg-gray-300"} ${F.isPending?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]}),e.jsx(H,{to:"/admin/menu/item",className:"block w-full px-4 py-3 text-center text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:"Add Menu Item"}),e.jsx(H,{to:"/admin/discounts/code",className:"block w-full px-4 py-3 text-center text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200",children:"Create Discount"}),e.jsx(H,{to:"/admin/analytics",className:"block w-full px-4 py-3 text-center text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",children:"View Analytics"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Orders"}),e.jsx(H,{to:"/admin/orders",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:f?e.jsx("div",{className:"p-6 space-y-3",children:[1,2,3,4,5].map(z=>e.jsx("div",{className:"h-12 bg-gray-200 animate-pulse rounded"},z))}):k?e.jsx("div",{className:"p-6 text-center text-red-600",children:"Failed to load recent orders"}):y&&y.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(H,{to:`/admin/orders/${z.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:z.order_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z.customer_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.order_type==="delivery"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:z.order_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:O(z.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.status==="completed"?"bg-green-100 text-green-800":z.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:z.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R(z.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(H,{to:`/admin/orders/${z.order_id}`,className:"text-blue-600 hover:text-blue-900",children:"View"})})]},z.order_id))})]}):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No recent orders"})})]})]})]})})},qn="https://123salama-lama-food-truck.launchpulse.ai",R6=async(t,s,r,a)=>{const n=new URLSearchParams;s&&n.append("category",s),r&&n.append("is_active",r),a&&n.append("search",a),n.append("_t",Date.now().toString());const i=await W.get(`${qn}/api/admin/menu/items?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return{...i.data,items:i.data.items.map(l=>({...l,price:Number(l.price||0),current_stock:l.current_stock!==null?Number(l.current_stock):null,low_stock_threshold:l.low_stock_threshold!==null?Number(l.low_stock_threshold):null,sort_order:Number(l.sort_order||0)}))}},O6=async t=>(await W.get(`${qn}/api/admin/menu/categories`,{headers:{Authorization:`Bearer ${t}`}})).data,D6=async(t,s,r)=>{await W.put(`${qn}/api/admin/menu/items/${s}`,{is_active:r},{headers:{Authorization:`Bearer ${t}`}})},I6=async(t,s)=>{await W.delete(`${qn}/api/admin/menu/items/${s}`,{headers:{Authorization:`Bearer ${t}`}})},q6=async(t,s)=>{const r=await W.post(`${qn}/api/admin/menu/items/${s}/duplicate`,{},{headers:{Authorization:`Bearer ${t}`}});return{item:{...r.data.item,price:Number(r.data.item.price||0),current_stock:r.data.item.current_stock!==null?Number(r.data.item.current_stock):null,sort_order:Number(r.data.item.sort_order||0)}}},z6=async(t,s,r)=>{await W.put(`${qn}/api/admin/menu/items/${s}`,{sort_order:r},{headers:{Authorization:`Bearer ${t}`}})},B6=()=>{const t=X(Z=>Z.authentication_state.auth_token),[s,r]=Xe(),a=je(),n=Fe(),i=s.get("category"),l=s.get("status"),[o,c]=x.useState(i),[d,u]=x.useState(l),[m,b]=x.useState(""),[p,g]=x.useState(""),[h,N]=x.useState([]),[j,y]=x.useState(!1),[f,k]=x.useState(null),[T,M]=x.useState(null),[P,_]=x.useState(null);x.useEffect(()=>{const Z=setTimeout(()=>{g(m)},500);return()=>clearTimeout(Z)},[m]),x.useEffect(()=>{const Z=new URLSearchParams;o&&Z.set("category",o),d&&Z.set("status",d),r(Z,{replace:!0})},[o,d,r]);const{data:F,isLoading:v,error:O}=le({queryKey:["admin-categories"],queryFn:()=>O6(t),enabled:!!t,staleTime:5*60*1e3}),{data:R,isLoading:C,error:z,refetch:D}=le({queryKey:["admin-menu-items",o,d,p],queryFn:async()=>{console.log("[AdminMenuList] Fetching menu items with filters:",{category:o,status:d,search:p});const Z=await R6(t,o,d,p);return console.log("[AdminMenuList] Fetched items:",Z.items.length,"items"),Z.items.length>0&&console.log("[AdminMenuList] Sample prices:",Z.items.slice(0,3).map(Se=>({name:Se.name,price:Se.price}))),Z},enabled:!!t,staleTime:0,gcTime:0,refetchOnMount:"always",refetchOnWindowFocus:!1,refetchOnReconnect:!0}),S=ie({mutationFn:({itemId:Z,isActive:Se})=>D6(t,Z,Se),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-menu-items"]}),M("Item status updated successfully"),setTimeout(()=>M(null),3e3)}}),E=ie({mutationFn:Z=>I6(t,Z),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-menu-items"]}),M("Item deleted successfully"),_(null),setTimeout(()=>M(null),3e3)}}),w=ie({mutationFn:Z=>q6(t,Z),onSuccess:Z=>{n.invalidateQueries({queryKey:["admin-menu-items"]}),a(`/admin/menu/item?item_id=${Z.item.item_id}`)}}),$=ie({mutationFn:({itemId:Z,sortOrder:Se})=>z6(t,Z,Se),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-menu-items"]}),M("Items reordered successfully"),setTimeout(()=>M(null),3e3)}}),B=Z=>{c(Z),N([])},I=Z=>{u(Z),N([])},q=Z=>{b(Z.target.value),N([])},A=Z=>{N(Se=>Se.includes(Z)?Se.filter(Zt=>Zt!==Z):[...Se,Z])},L=()=>{h.length===(R==null?void 0:R.items.length)?N([]):N((R==null?void 0:R.items.map(Z=>Z.item_id))||[])},U=(Z,Se)=>{S.mutate({itemId:Z,isActive:!Se})},Y=Z=>{_(Z)},Q=()=>{P&&E.mutate(P)},K=Z=>{w.mutate(Z)},G=async()=>{for(const Z of h)await S.mutateAsync({itemId:Z,isActive:!0});N([]),M(`${h.length} items enabled successfully`),setTimeout(()=>M(null),3e3)},J=async()=>{for(const Z of h)await S.mutateAsync({itemId:Z,isActive:!1});N([]),M(`${h.length} items disabled successfully`),setTimeout(()=>M(null),3e3)},xe=async()=>{if(window.confirm(`Delete ${h.length} items? This cannot be undone.`)){for(const Z of h)await E.mutateAsync(Z);N([]),M(`${h.length} items deleted successfully`),setTimeout(()=>M(null),3e3)}},ke=(Z,Se)=>{k(Se),Z.dataTransfer.effectAllowed="move"},he=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},se=(Z,Se)=>{if(Z.preventDefault(),!f||f===Se){k(null);return}const Zt=(R==null?void 0:R.items)||[],ds=Zt.findIndex(us=>us.item_id===f),ll=Zt.findIndex(us=>us.item_id===Se);if(ds===-1||ll===-1)return;const Ia=[...Zt],[ol]=Ia.splice(ds,1);Ia.splice(ll,0,ol);const zn=[];Ia.forEach((us,Bn)=>{us.sort_order!==Bn&&zn.push({itemId:us.item_id,sortOrder:Bn})}),Promise.all(zn.map(us=>$.mutateAsync(us))).then(()=>{D()}),k(null)},ye=Z=>{const Se=F==null?void 0:F.categories.find(Zt=>Zt.category_id===Z);return(Se==null?void 0:Se.name)||"Unknown"},Ps=Z=>Z.stock_tracked?Z.current_stock===null||Z.current_stock===0?{status:"Out of Stock",color:"red"}:Z.low_stock_threshold!==null&&Z.current_stock<=Z.low_stock_threshold?{status:"Low Stock",color:"yellow"}:{status:"In Stock",color:"green"}:{status:"Not Tracked",color:"gray"};if(v||C)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"h-12 w-12 animate-spin text-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading menu items..."})]})})});if(O||z)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(ce,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Failed to Load Data"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(O==null?void 0:O.message)||(z==null?void 0:z.message)}),e.jsx("button",{onClick:()=>{n.invalidateQueries({queryKey:["admin-categories"]}),n.invalidateQueries({queryKey:["admin-menu-items"]})},className:"bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Retry"})]})})});const Xr=(F==null?void 0:F.categories)||[],Ws=(R==null?void 0:R.items)||[],te=h.length===Ws.length&&Ws.length>0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Menu Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your menu items, categories, and availability"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(H,{to:"/admin/menu/categories",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(L1,{className:"h-4 w-4 mr-2"}),"Manage Categories"]}),e.jsxs(H,{to:"/admin/menu/item",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors shadow-lg hover:shadow-xl",children:[e.jsx(Ht,{className:"h-5 w-5 mr-2"}),"Add New Item"]})]})]})})}),T&&e.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-600 text-white px-6 py-4 rounded-lg shadow-xl flex items-center gap-3 animate-fade-in",children:[e.jsx(we,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:T})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:q,placeholder:"Search menu items...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),e.jsx("div",{className:"sm:w-64",children:e.jsxs("select",{value:o||"",onChange:Z=>B(Z.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),Xr.map(Z=>e.jsx("option",{value:Z.category_id,children:Z.name},Z.category_id))]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(null),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d===null?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>I("true"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="true"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Active"}),e.jsx("button",{onClick:()=>I("false"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="false"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Inactive"})]})]})}),h.length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-orange-900",children:[h.length," item",h.length!==1?"s":""," selected"]}),e.jsx("button",{onClick:()=>N([]),className:"text-orange-700 hover:text-orange-900 text-sm font-medium",children:"Clear selection"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:G,disabled:S.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Enable All"}),e.jsx("button",{onClick:J,disabled:S.isPending,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Disable All"}),e.jsx("button",{onClick:xe,disabled:E.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete All"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Drag & Drop Reordering"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable to reorder items by dragging them"})]}),e.jsx("button",{onClick:()=>y(!j),className:`px-6 py-2 rounded-lg font-medium transition-colors ${j?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:j?"Disable Reordering":"Enable Reordering"})]}),Ws.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Pe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No menu items found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m||o||d?"Try adjusting your filters or search query":"Get started by adding your first menu item"}),e.jsxs(H,{to:"/admin/menu/item",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(Ht,{className:"h-5 w-5 mr-2"}),"Add First Item"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("input",{type:"checkbox",checked:te,onChange:L,className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),Ws.map(Z=>{const Se=Ps(Z),Zt=h.includes(Z.item_id);return e.jsx("div",{draggable:j,onDragStart:ds=>ke(ds,Z.item_id),onDragOver:j?he:void 0,onDrop:j?ds=>se(ds,Z.item_id):void 0,className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 transition-all ${j?"cursor-move":""} ${f===Z.item_id?"opacity-50":""} ${Zt?"ring-2 ring-orange-500":""}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[j&&e.jsx(Fu,{className:"h-6 w-6 text-gray-400"}),e.jsx("input",{type:"checkbox",checked:Zt,onChange:()=>A(Z.item_id),className:"h-5 w-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"})]}),e.jsx("div",{className:"flex-shrink-0",children:Z.image_url?e.jsx("img",{src:Z.image_url,alt:Z.name,className:"h-24 w-24 object-cover rounded-lg"}):e.jsx("div",{className:"h-24 w-24 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Pe,{className:"h-10 w-10 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Z.name}),Z.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:Z.description})]}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",Z.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:ye(Z.category_id)}),Z.dietary_tags&&Z.dietary_tags.map(ds=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:ds},ds))]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${Z.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Z.is_active?"Active":"Inactive"}),Z.is_featured&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded",children:"Featured"}),Z.is_limited_edition&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded",children:"Limited Edition"}),Z.stock_tracked&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${Se.color==="red"?"bg-red-100 text-red-800":Se.color==="yellow"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[Se.status,Z.current_stock!==null&&` (${Z.current_stock})`]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>U(Z.item_id,Z.is_active),disabled:S.isPending,className:"inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:Z.is_active?e.jsxs(e.Fragment,{children:[e.jsx(V1,{className:"h-4 w-4 mr-1"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(W1,{className:"h-4 w-4 mr-1"}),"Enable"]})}),e.jsxs(H,{to:`/admin/menu/item?item_id=${Z.item_id}`,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(by,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>K(Z.item_id),disabled:w.isPending,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Hm,{className:"h-4 w-4 mr-1"}),"Duplicate"]}),e.jsxs("button",{onClick:()=>Y(Z.item_id),disabled:E.isPending,className:"inline-flex items-center px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:[e.jsx(It,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})},Z.item_id)})]})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(ce,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Menu Item"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Are you sure you want to delete this item? This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>_(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:E.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?"Deleting...":"Delete Item"})]})]})})]})})},U6=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data,V6=async(t,s)=>{console.log("[AdminMenuItemForm] Fetching item:",t);const r=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items/${t}`,{headers:{Authorization:`Bearer ${s}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});console.log("[AdminMenuItemForm] Fetched item response:",r.data);const a=r.data.item||r.data;return console.log("[AdminMenuItemForm] Extracted item price:",a.price),a},W6=async(t,s)=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,H6=async(t,s,r)=>{var n;console.log("[AdminMenuItemForm] PUT request to update item:",t),console.log("[AdminMenuItemForm] Update payload:",JSON.stringify(s,null,2));const a=await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});return console.log("[AdminMenuItemForm] PUT response:",a.data),console.log("[AdminMenuItemForm] Updated item price from response:",(n=a.data.item)==null?void 0:n.price),a.data.item||a.data},Q6=[{value:"vegan",label:"Vegan",icon:"V"},{value:"vegetarian",label:"Vegetarian",icon:"VG"},{value:"gluten_free",label:"Gluten-Free",icon:"GF"},{value:"halal",label:"Halal",icon:"H"},{value:"dairy_free",label:"Dairy-Free",icon:"DF"},{value:"nut_free",label:"Nut-Free",icon:"NF"}],K6=()=>{var ol,zn,us,Bn;const t=je(),s=Fe(),[r]=Xe(),a=r.get("item_id"),n=!!a,i=X(ne=>ne.authentication_state.auth_token),[l,o]=x.useState(""),[c,d]=x.useState(""),[u,m]=x.useState(""),[b,p]=x.useState(0),[g,h]=x.useState(""),[N,j]=x.useState([]),[y,f]=x.useState([]),[k,T]=x.useState(!1),[M,P]=x.useState(""),[_,F]=x.useState(!0),[v,O]=x.useState(!0),[R,C]=x.useState(!0),[z,D]=x.useState(!1),[S,E]=x.useState(null),[w,$]=x.useState(null),[B,I]=x.useState(!1),[q,A]=x.useState(""),[L,U]=x.useState(""),[Y,Q]=x.useState([]),[K,G]=x.useState(""),{data:J,isLoading:xe,error:ke}=le({queryKey:["admin-categories"],queryFn:()=>U6(i),enabled:!!i,staleTime:5*60*1e3}),{data:he,isLoading:se,error:ye}=le({queryKey:["admin-menu-item",a],queryFn:()=>V6(a,i),enabled:n&&!!i&&!!a,staleTime:60*1e3});x.useEffect(()=>{he&&n&&(console.log("[AdminMenuItemForm] Populating form with item data:",he),console.log("[AdminMenuItemForm] Setting price to:",he.price,"type:",typeof he.price),o(he.name||""),d(he.description||""),m(he.category_id||""),p(Number(he.price)||0),h(he.image_url||""),j(he.image_urls||[]),f(he.dietary_tags||[]),T(he.is_limited_edition||!1),P(he.limited_edition_end_date||""),F(he.is_active),O(he.available_for_collection),C(he.available_for_delivery),D(he.stock_tracked||!1),E(he.current_stock),$(he.low_stock_threshold),I(he.is_featured||!1),A(he.meta_description||""),U(he.image_alt_text||""))},[he,n]);const Ps=ie({mutationFn:ne=>W6(ne,i),onSuccess:async ne=>{console.log("[AdminMenuItemForm] Create successful, item:",ne),await s.cancelQueries({queryKey:["admin-menu-items"]}),s.removeQueries({queryKey:["admin-menu-items"]}),s.invalidateQueries({queryKey:["admin-menu-items"]}),G("Menu item created successfully!"),await new Promise(fe=>setTimeout(fe,300));try{await s.prefetchQuery({queryKey:["admin-menu-items",null,null,""],queryFn:()=>{const fe=new URLSearchParams;return fe.append("_t",Date.now().toString()),W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items?${fe.toString()}`,{headers:{Authorization:`Bearer ${i}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}).then(Ve=>({...Ve.data,items:Ve.data.items.map(ft=>({...ft,price:Number(ft.price||0)}))}))}})}catch(fe){console.error("[AdminMenuItemForm] Pre-fetch error:",fe)}t("/admin/menu",{replace:!0})},onError:ne=>{var Ve,ft;const fe=((ft=(Ve=ne.response)==null?void 0:Ve.data)==null?void 0:ft.message)||ne.message||"Failed to create menu item";Q([fe]),console.error("[AdminMenuItemForm] Create error:",ne)}}),Xr=ie({mutationFn:ne=>(console.log("[AdminMenuItemForm] Submitting update for item:",a,"with payload:",ne),H6(a,ne,i)),onSuccess:async ne=>{console.log("[AdminMenuItemForm] Update successful, item:",ne),console.log("[AdminMenuItemForm] Updated price:",ne.price),await s.cancelQueries({queryKey:["admin-menu-items"]}),await s.cancelQueries({queryKey:["admin-menu-item"]}),s.removeQueries({queryKey:["admin-menu-items"]}),s.removeQueries({queryKey:["admin-menu-item",a]}),s.invalidateQueries({queryKey:["admin-menu-items"]}),s.invalidateQueries({queryKey:["admin-menu-item"]}),G("Menu item updated successfully!"),await new Promise(fe=>setTimeout(fe,500));try{await s.prefetchQuery({queryKey:["admin-menu-items",null,null,""],queryFn:()=>{const fe=new URLSearchParams;return fe.append("_t",Date.now().toString()),W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/items?${fe.toString()}`,{headers:{Authorization:`Bearer ${i}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}).then(Ve=>({...Ve.data,items:Ve.data.items.map(ft=>({...ft,price:Number(ft.price||0)}))}))}})}catch(fe){console.error("[AdminMenuItemForm] Pre-fetch error:",fe)}t("/admin/menu",{replace:!0})},onError:ne=>{var Ve,ft;const fe=((ft=(Ve=ne.response)==null?void 0:Ve.data)==null?void 0:ft.message)||ne.message||"Failed to update menu item";Q([fe]),console.error("[AdminMenuItemForm] Update error:",ne)}}),Ws=()=>{const ne=[];return l.trim()||ne.push("Item name is required"),u||ne.push("Please select a category"),b<=0&&ne.push("Price must be greater than 0"),k&&!M&&ne.push("Limited edition end date is required"),z&&((S===null||S<0)&&ne.push("Current stock must be a non-negative number"),w!==null&&w<0&&ne.push("Low stock threshold must be a non-negative number")),Q(ne),ne.length===0},te=ne=>{if(ne.preventDefault(),Q([]),G(""),console.log("[AdminMenuItemForm] Form submitted, isEditMode:",n),console.log("[AdminMenuItemForm] Current price value:",b,"type:",typeof b),!Ws()){console.log("[AdminMenuItemForm] Form validation failed");return}const fe={name:l.trim(),description:c.trim()||null,category_id:u,price:Number(b),image_url:g.trim()||null,image_urls:N.filter(Ve=>Ve.trim()).length>0?N.filter(Ve=>Ve.trim()):null,dietary_tags:y.length>0?y:null,is_limited_edition:k,limited_edition_end_date:k&&M?M:null,is_active:_,available_for_collection:v,available_for_delivery:R,stock_tracked:z,current_stock:z?S:null,low_stock_threshold:z?w:null,is_featured:B,meta_description:q.trim()||null,image_alt_text:L.trim()||null};console.log("[AdminMenuItemForm] Submitting payload:",fe),n?(console.log("[AdminMenuItemForm] Calling updateMutation.mutate"),Xr.mutate(fe)):(console.log("[AdminMenuItemForm] Calling createMutation.mutate"),Ps.mutate(fe))},Z=ne=>{f(fe=>fe.includes(ne)?fe.filter(Ve=>Ve!==ne):[...fe,ne])},Se=()=>{j(ne=>[...ne,""])},Zt=(ne,fe)=>{j(Ve=>Ve.map((ft,Fy)=>Fy===ne?fe:ft))},ds=ne=>{j(fe=>fe.filter((Ve,ft)=>ft!==ne))};if(xe||n&&se)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading..."})]})})});if(ke||n&&ye)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6 max-w-md",children:[e.jsx("h2",{className:"text-red-800 font-bold text-lg mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:((zn=(ol=ke==null?void 0:ke.response)==null?void 0:ol.data)==null?void 0:zn.message)||((Bn=(us=ye==null?void 0:ye.response)==null?void 0:us.data)==null?void 0:Bn.message)||"Failed to load required data"}),e.jsx(H,{to:"/admin/menu",className:"inline-block bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Back to Menu"})]})})});const ll=(J==null?void 0:J.categories)||[],Ia=Ps.isPending||Xr.isPending;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(H,{to:"/admin/menu",className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Menu"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n?"Edit Menu Item":"Create New Menu Item"}),e.jsx("p",{className:"text-gray-600 mt-2",children:n?"Update menu item details and settings":"Add a new item to your menu"})]}),K&&e.jsx("div",{className:"mb-6 bg-green-50 border-2 border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-green-800 font-medium",children:K})]})}),Y.length>0&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:Y.map((ne,fe)=>e.jsx("li",{className:"text-red-700 text-sm",children:ne},fe))})]})]})}),e.jsxs("form",{onSubmit:te,className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:l,onChange:ne=>o(ne.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., Chicken Burrito",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:c,onChange:ne=>d(ne.target.value),rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"Describe your menu item..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category",value:u,onChange:ne=>m(ne.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),ll.map(ne=>e.jsx("option",{value:ne.category_id,children:ne.name},ne.category_id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"price",value:b,onChange:ne=>{const fe=Number(ne.target.value);console.log("[AdminMenuItemForm] Price changed from",b,"to",fe),p(fe)},step:"0.01",min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"0.00",required:!0})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Images"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Image URL"}),e.jsx("input",{type:"url",id:"imageUrl",value:g,onChange:ne=>h(ne.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"https://example.com/image.jpg"}),g&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:g,alt:"Primary preview",className:"h-32 w-32 object-cover rounded-lg border-2 border-gray-200",onError:ne=>{ne.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3ENo Image%3C/text%3E%3C/svg%3E'}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Images (Gallery)"}),e.jsxs("div",{className:"space-y-2",children:[N.map((ne,fe)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"url",value:ne,onChange:Ve=>Zt(fe,Ve.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"https://example.com/image.jpg"}),e.jsx("button",{type:"button",onClick:()=>ds(fe),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Remove"})]},fe)),e.jsx("button",{type:"button",onClick:Se,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"+ Add Image URL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageAltText",className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Alt Text (for accessibility)"}),e.jsx("input",{type:"text",id:"imageAltText",value:L,onChange:ne=>U(ne.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., Delicious chicken burrito with fresh ingredients"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dietary Information"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Q6.map(ne=>e.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${y.includes(ne.value)?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:y.includes(ne.value),onChange:()=>Z(ne.value),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsxs("span",{className:"ml-2 text-sm font-medium text-gray-700",children:[ne.icon," ",ne.label]})]},ne.value))})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Availability Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:ne=>F(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Item is Active (visible to customers)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:ne=>O(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Available for Collection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:ne=>C(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Available for Delivery"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:B,onChange:ne=>I(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Featured Item (show on homepage)"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Limited Edition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:ne=>T(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"This is a Limited Edition item"})]}),k&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"endDate",value:M,onChange:ne=>P(ne.target.value),className:"w-full md:w-1/2 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",required:k})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Stock Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:ne=>D(ne.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Track stock for this item"})]}),z&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"currentStock",value:S??"",onChange:ne=>E(ne.target.value?Number(ne.target.value):null),min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"0",required:z})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Alert Threshold"}),e.jsx("input",{type:"number",id:"threshold",value:w??"",onChange:ne=>$(ne.target.value?Number(ne.target.value):null),min:"0",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"e.g., 10"})]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"SEO (Optional)"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),e.jsx("textarea",{id:"metaDescription",value:q,onChange:ne=>A(ne.target.value),rows:2,maxLength:160,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"Brief description for search engines (max 160 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[q.length,"/160 characters"]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 flex items-center justify-between gap-4",children:[e.jsx(H,{to:"/admin/menu",className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Ia,className:"px-8 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:Ia?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"Updating...":"Creating..."]}):n?"Update Item":"Create Item"})]})]})]})})})},oc="https://123salama-lama-food-truck.launchpulse.ai",Y6=async t=>(await W.get(`${oc}/api/admin/menu/categories`,{headers:{Authorization:`Bearer ${t}`}})).data.categories,G6=async(t,s)=>(await W.post(`${oc}/api/admin/menu/categories`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,f0=async(t,s,r)=>(await W.put(`${oc}/api/admin/menu/categories/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,X6=async(t,s)=>{await W.delete(`${oc}/api/admin/menu/categories/${t}`,{headers:{Authorization:`Bearer ${s}`}})},J6=()=>{var E;const t=X(w=>w.authentication_state.auth_token),s=Fe(),[r,a]=x.useState(!1),[n,i]=x.useState("create"),[l,o]=x.useState({category_id:null,name:"",description:null,sort_order:0}),[c,d]=x.useState(null),[u,m]=x.useState(!1),[b,p]=x.useState(null),[g,h]=x.useState(null),[N,j]=x.useState(null),{data:y=[],isLoading:f}=le({queryKey:["admin-categories"],queryFn:()=>Y6(t||""),enabled:!!t,select:w=>w.sort(($,B)=>$.sort_order-B.sort_order),staleTime:3e4}),k=ie({mutationFn:w=>G6(w,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),a(!1),P(),d(null)},onError:w=>{var $,B;d(((B=($=w.response)==null?void 0:$.data)==null?void 0:B.message)||"Failed to create category")}}),T=ie({mutationFn:({categoryId:w,data:$})=>f0(w,$,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),a(!1),P(),d(null)},onError:w=>{var $,B;d(((B=($=w.response)==null?void 0:$.data)==null?void 0:B.message)||"Failed to update category")}}),M=ie({mutationFn:w=>X6(w,t||""),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-categories"]}),m(!1),p(null),d(null)},onError:w=>{var $,B;d(((B=($=w.response)==null?void 0:$.data)==null?void 0:B.message)||"Failed to delete category. It may have assigned items."),m(!1),p(null)}}),P=()=>{o({category_id:null,name:"",description:null,sort_order:0}),i("create")},_=()=>{P();const w=y.length>0?Math.max(...y.map($=>$.sort_order))+1:0;o($=>({...$,sort_order:w})),i("create"),a(!0),d(null)},F=w=>{o({category_id:w.category_id,name:w.name,description:w.description,sort_order:w.sort_order}),i("edit"),a(!0),d(null)},v=w=>{var B;if(w.preventDefault(),d(null),!l.name.trim()){d("Category name is required");return}if(l.name.length>100){d("Category name must be 100 characters or less");return}if(l.description&&l.description.length>500){d("Description must be 500 characters or less");return}const $={name:l.name.trim(),description:((B=l.description)==null?void 0:B.trim())||null,sort_order:l.sort_order};n==="create"?k.mutate($):n==="edit"&&l.category_id&&T.mutate({categoryId:l.category_id,data:$})},O=w=>{p(w),m(!0),d(null)},R=()=>{b&&M.mutate(b.category_id)},C=(w,$)=>{h($),w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/html",w.currentTarget.outerHTML),w.currentTarget.style.opacity="0.5"},z=w=>{w.currentTarget.style.opacity="1",h(null),j(null)},D=(w,$)=>{w.preventDefault(),w.dataTransfer.dropEffect="move",g!==$&&j($)},S=async(w,$)=>{var A;if(w.preventDefault(),w.stopPropagation(),g===null||g===$){h(null),j(null);return}const B=[...y],[I]=B.splice(g,1);B.splice($,0,I);const q=B.map((L,U)=>({...L,sort_order:U}));s.setQueryData(["admin-categories"],q);try{for(const L of q)L.sort_order!==((A=y.find(U=>U.category_id===L.category_id))==null?void 0:A.sort_order)&&await f0(L.category_id,{name:L.name,description:L.description,sort_order:L.sort_order},t||"");s.invalidateQueries({queryKey:["admin-categories"]})}catch{d("Failed to reorder categories"),s.invalidateQueries({queryKey:["admin-categories"]})}h(null),j(null)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Menu Categories"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Organize your menu structure and manage category display order"})]}),e.jsxs("button",{onClick:_,className:"mt-4 sm:mt-0 inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-orange-100",children:[e.jsx(Qc,{className:"w-5 h-5 mr-2"}),"Add New Category"]})]})}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Kt,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:c})]}),e.jsx("button",{onClick:()=>d(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:f?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-orange-600"})}):y.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:e.jsx(Qc,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first menu category to get started"}),e.jsxs("button",{onClick:_,className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(Qc,{className:"w-5 h-5 mr-2"}),"Add Category"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"w-32 px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((w,$)=>e.jsxs("tr",{draggable:!0,onDragStart:B=>C(B,$),onDragEnd:z,onDragOver:B=>D(B,$),onDrop:B=>S(B,$),className:`hover:bg-gray-50 transition-colors cursor-move ${g===$?"opacity-50":""} ${N===$?"border-t-2 border-orange-500":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-gray-400 hover:text-gray-600",children:[e.jsx(Fu,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:w.sort_order})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:w.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:w.description||e.jsx("span",{className:"italic text-gray-400",children:"No description"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>F(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":`Edit ${w.name}`,children:e.jsx(cn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors","aria-label":`Delete ${w.name}`,children:e.jsx(It,{className:"w-4 h-4"})})]})})]},w.category_id))})]})})}),y.length>0&&e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Fu,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Drag and drop categories to reorder them. The order here will be reflected in the customer menu."]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n==="create"?"Create New Category":"Edit Category"}),e.jsx("button",{onClick:()=>{a(!1),P(),d(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_e,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"category-name",type:"text",value:l.name,onChange:w=>{d(null),o($=>({...$,name:w.target.value}))},placeholder:"e.g., Mains, Sides, Drinks",maxLength:100,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"category-description",value:l.description||"",onChange:w=>{d(null),o($=>({...$,description:w.target.value||null}))},placeholder:"Brief description of this category",rows:3,maxLength:500,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none resize-none"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[((E=l.description)==null?void 0:E.length)||0,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-sort-order",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{id:"category-sort-order",type:"number",value:l.sort_order,onChange:w=>{d(null),o($=>({...$,sort_order:parseInt(w.target.value)||0}))},min:0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first in the menu. You can also drag and drop to reorder."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{a(!1),P(),d(null)},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k.isPending||T.isPending,className:"px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:k.isPending||T.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n==="create"?"Creating...":"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),n==="create"?"Create Category":"Update Category"]})})]})]})]})}),u&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx("div",{className:"flex-shrink-0 inline-flex items-center justify-center w-12 h-12 bg-red-100 rounded-full",children:e.jsx(Kt,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete Category"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete ",e.jsx("strong",{children:b.name}),"? This action cannot be undone."]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," If this category has menu items assigned to it, deletion will fail. Please reassign or delete those items first."]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{m(!1),p(null)},className:"px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:M.isPending,className:"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"Delete Category"]})})]})]})})})]})})})},Z6=async(t,s,r)=>{const a=new URLSearchParams;return s&&a.append("category",s),r&&a.append("status",r),(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/stock?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},e5=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/stock/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,t5=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories||[],s5=()=>{const t=X(S=>S.authentication_state.auth_token),[s,r]=Xe(),a=s.get("category"),n=s.get("status"),[i,l]=x.useState(a),[o,c]=x.useState(n),[d,u]=x.useState(null),[m,b]=x.useState(!1),[p,g]=x.useState({change_type:"restock",quantity:0,reason:"",notes:""}),[h,N]=x.useState({}),[j,y]=x.useState(""),f=Fe(),{data:k=[]}=le({queryKey:["admin-categories"],queryFn:()=>t5(t),enabled:!!t,staleTime:5*60*1e3}),{data:T,isLoading:M,isError:P,error:_}=le({queryKey:["admin-stock-overview",i,o],queryFn:()=>Z6(t,i,o),enabled:!!t,staleTime:60*1e3,select:S=>({...S,items:S.items.map(E=>({...E,current_stock:E.current_stock!==null?Number(E.current_stock):null,low_stock_threshold:E.low_stock_threshold!==null?Number(E.low_stock_threshold):null}))})}),F=ie({mutationFn:({item_id:S,payload:E})=>e5(t,S,E),onSuccess:()=>{f.invalidateQueries({queryKey:["admin-stock-overview"]}),b(!1),v(),u(null)},onError:S=>{var E,w;console.error("Stock adjustment failed:",S),N({submit:((w=(E=S.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to adjust stock"})}});x.useEffect(()=>{const S=new URLSearchParams;i&&S.set("category",i),o&&S.set("status",o),r(S,{replace:!0})},[i,o,r]);const v=()=>{g({change_type:"restock",quantity:0,reason:"",notes:""}),N({})},O=S=>{u(S),b(!0),v()},R=()=>{b(!1),u(null),v()},C=S=>{var $,B,I;S.preventDefault(),N({});const E={};if(p.quantity<=0&&(E.quantity="Quantity must be greater than 0"),p.change_type==="waste"&&!(($=p.reason)!=null&&$.trim())&&(E.reason="Reason is required for waste adjustments"),Object.keys(E).length>0){N(E);return}if(!d)return;const w={change_type:p.change_type,quantity:p.quantity,reason:((B=p.reason)==null?void 0:B.trim())||null,notes:((I=p.notes)==null?void 0:I.trim())||null};F.mutate({item_id:d.item_id,payload:w})},z=S=>{switch(S){case"ok":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 mr-1.5"}),"In Stock"]});case"low_stock":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Low Stock"]});case"out_of_stock":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(it,{className:"w-3 h-3 mr-1"}),"Out of Stock"]});default:return null}},D=(T==null?void 0:T.items.filter(S=>S.name.toLowerCase().includes(j.toLowerCase())))||[];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor inventory levels, adjust stock, and manage reorder alerts"})]}),e.jsxs(H,{to:"/admin/menu",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Manage Menu"]})]})}),M?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(S=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]},S))}):T?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items Tracked"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:T.total_items_tracked})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(Pe,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Alert"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-600",children:T.low_stock_count})]}),e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:e.jsx(Kt,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-red-600",children:T.out_of_stock_count})]}),e.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:e.jsx(it,{className:"w-8 h-8 text-red-600"})})]})})]}):null,e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category-filter",value:i||"",onChange:S=>l(S.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Categories"}),k.map(S=>e.jsx("option",{value:S.category_id,children:S.name},S.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),e.jsxs("select",{id:"status-filter",value:o||"",onChange:S=>c(S.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Items"}),e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"search",type:"text",placeholder:"Search by name...",value:j,onChange:S=>y(S.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]})]}),(i||o||j)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{l(null),c(null),y("")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:M?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading stock data..."})]}):P?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(it,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load stock data"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:_ instanceof Error?_.message:"Unknown error"})]}):D.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No items found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:(T==null?void 0:T.items.length)===0?"No stock items are being tracked yet.":"Try adjusting your filters or search query."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Threshold"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:S.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:S.category_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`font-bold ${S.stock_status==="out_of_stock"?"text-red-600":S.stock_status==="low_stock"?"text-yellow-600":"text-green-600"}`,children:S.current_stock!==null?S.current_stock:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:S.low_stock_threshold!==null?S.low_stock_threshold:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:z(S.stock_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>O(S),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Jx,{className:"w-4 h-4 mr-1.5"}),"Adjust"]}),e.jsx(H,{to:`/admin/stock/${S.item_id}/history`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"History"})]})})]},S.item_id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:D.map(S=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:S.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.category_name})]}),e.jsx("div",{className:"ml-4",children:z(S.stock_status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Stock"}),e.jsx("p",{className:`text-lg font-bold ${S.stock_status==="out_of_stock"?"text-red-600":S.stock_status==="low_stock"?"text-yellow-600":"text-green-600"}`,children:S.current_stock!==null?S.current_stock:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Threshold"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:S.low_stock_threshold!==null?S.low_stock_threshold:"N/A"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>O(S),className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Jx,{className:"w-4 h-4 mr-2"}),"Adjust Stock"]}),e.jsx(H,{to:`/admin/stock/${S.item_id}/history`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"History"})]})]},S.item_id))})]})})]})}),m&&d&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"adjustment-modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:R}),e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{id:"adjustment-modal-title",className:"text-xl font-bold text-gray-900",children:"Adjust Stock"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.name})]}),e.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:d.current_stock!==null?d.current_stock:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Threshold"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:d.low_stock_threshold!==null?d.low_stock_threshold:"N/A"})]})]})}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"change-type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Change Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"change-type",value:p.change_type,onChange:S=>{g(E=>({...E,change_type:S.target.value})),N(E=>({...E,change_type:""}))},className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"restock",children:"Restock (Add Inventory)"}),e.jsx("option",{value:"adjustment",children:"Adjustment (Correct Count)"}),e.jsx("option",{value:"waste",children:"Waste (Remove Spoiled)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[p.change_type==="restock"?e.jsx(wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"}):e.jsx(Mo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-red-500"}),e.jsx("input",{id:"quantity",type:"number",min:"1",value:p.quantity||"",onChange:S=>{g(E=>({...E,quantity:parseInt(S.target.value)||0})),N(E=>({...E,quantity:""}))},className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:ring-4 transition-all ${h.quantity?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,placeholder:"Enter quantity"})]}),h.quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.quantity})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason ",p.change_type==="waste"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"reason",type:"text",value:p.reason,onChange:S=>{g(E=>({...E,reason:S.target.value})),N(E=>({...E,reason:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:ring-4 transition-all ${h.reason?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,placeholder:"e.g., Weekly delivery, End of day count"}),h.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.reason})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),e.jsx("textarea",{id:"notes",rows:3,value:p.notes,onChange:S=>g(E=>({...E,notes:S.target.value})),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Optional internal notes..."})]}),h.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:h.submit})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:R,className:"flex-1 px-6 py-3 border-2 border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all",disabled:F.isPending,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:F.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adjusting..."]}):"Confirm Adjustment"})]})]})]})})]})]})},r5=()=>{var F,v,O,R;const{item_id:t}=Jt(),s=X(C=>C.authentication_state.auth_token),[r,a]=x.useState({limit:50,offset:0,total:0}),n="https://123salama-lama-food-truck.launchpulse.ai",{data:i,isLoading:l,isError:o,error:c,refetch:d}=le({queryKey:["admin","menu-item",t],queryFn:async()=>{const C=await W.get(`${n}/api/admin/menu/items/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});let z="Unknown Category";if(C.data.category_id)try{z=(await W.get(`${n}/api/admin/menu/categories/${C.data.category_id}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.name}catch(D){console.error("Failed to fetch category name:",D)}return{item_id:C.data.item_id,name:C.data.name,current_stock:C.data.current_stock!==void 0?C.data.current_stock:null,category_name:z}},enabled:!!t&&!!s,staleTime:5*60*1e3,retry:1}),{data:u,isLoading:m,isError:b,error:p,refetch:g}=le({queryKey:["admin","stock-history",t,r.limit,r.offset],queryFn:async()=>{const C=await W.get(`${n}/api/admin/stock/${t}/history`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},params:{limit:r.limit,offset:r.offset}}),z=C.data.history.map(D=>({history_id:D.history_id,change_type:D.change_type,previous_stock:Number(D.previous_stock||0),new_stock:Number(D.new_stock||0),quantity_changed:D.quantity_changed,reason:D.reason,notes:D.notes,changed_by_user_id:D.changed_by_user_id,changed_by_name:D.changed_by_user_id,changed_at:D.changed_at}));return a(D=>({...D,total:C.data.total})),{history:z,total:C.data.total}},enabled:!!t&&!!s,staleTime:30*1e3,retry:1}),h=x.useMemo(()=>Math.floor(r.offset/r.limit)+1,[r.offset,r.limit]),N=x.useMemo(()=>Math.ceil(r.total/r.limit),[r.total,r.limit]),j=x.useMemo(()=>r.offset+r.limit<r.total,[r.offset,r.limit,r.total]),y=x.useMemo(()=>r.offset>0,[r.offset]),f=()=>{j&&a(C=>({...C,offset:C.offset+C.limit}))},k=()=>{y&&a(C=>({...C,offset:Math.max(0,C.offset-C.limit)}))},T=()=>{if(!u||!i)return;const C=["Date","Time","Change Type","Previous Stock","New Stock","Quantity Changed","Reason","Changed By","Notes"],z=u.history.map($=>{const B=new Date($.changed_at);return[B.toLocaleDateString(),B.toLocaleTimeString(),$.change_type,$.previous_stock.toString(),$.new_stock.toString(),$.quantity_changed.toString(),$.reason||"",$.changed_by_name,$.notes||""]}),D=[C.join(","),...z.map($=>$.map(B=>`"${B}"`).join(","))].join(`
`),S=new Blob([D],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a"),w=URL.createObjectURL(S);E.setAttribute("href",w),E.setAttribute("download",`stock-history-${i.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.csv`),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E)},M=C=>{switch(C){case"restock":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"sale":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};case"adjustment":return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"};case"waste":return{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},P=C=>C.charAt(0).toUpperCase()+C.slice(1),_=C=>{const z=new Date(C),S=new Date().getTime()-z.getTime(),E=Math.floor(S/(1e3*60*60)),w=Math.floor(E/24);let $="";return w===0?E===0?$="Less than an hour ago":E===1?$="1 hour ago":$=`${E} hours ago`:w===1?$="Yesterday":w<7?$=`${w} days ago`:$=z.toLocaleDateString(),{date:z.toLocaleDateString(),time:z.toLocaleTimeString(),relative:$}};if(l||m)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 animate-pulse",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 animate-pulse",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((C,z)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},z))})})]})})});if(o||b){const C=o?((v=(F=c==null?void 0:c.response)==null?void 0:F.data)==null?void 0:v.message)||"Failed to load item details":((R=(O=p==null?void 0:p.response)==null?void 0:O.data)==null?void 0:R.message)||"Failed to load stock history";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(H,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx(ce,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Stock History"}),e.jsx("p",{className:"text-gray-600 mb-6",children:C}),e.jsxs("button",{onClick:()=>{d(),g()},className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ks,{className:"w-5 h-5 mr-2"}),"Retry"]})]})]})})})}return!(u!=null&&u.history)||u.history.length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(H,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),i&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:i.name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[i.category_name,"  Current Stock: "," ",e.jsx("span",{className:"font-semibold",children:i.current_stock!==null?i.current_stock:"N/A"})]})]}),e.jsx(Pe,{className:"w-12 h-12 text-gray-400"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Stock History"}),e.jsx("p",{className:"text-gray-600",children:"There are no stock movements recorded for this item yet."})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(H,{to:"/admin/stock",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Back to Stock Management"]}),i&&e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-blue-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Stock History: ",i.name]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",i.category_name]}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Current Stock:"})," ",e.jsx("span",{className:`font-bold ${i.current_stock===null?"text-gray-500":i.current_stock===0?"text-red-600":i.current_stock<10?"text-yellow-600":"text-green-600"}`,children:i.current_stock!==null?i.current_stock:"N/A"})]})]})]}),e.jsxs("button",{onClick:T,className:"flex items-center px-4 py-2 bg-white text-blue-700 font-medium rounded-lg border-2 border-blue-600 hover:bg-blue-50 transition-colors shadow-md",children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Export to CSV"]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Stock Movement History (",u.total," records)"]})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previous"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Changed By"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.history.map(C=>{const z=M(C.change_type),D=_(C.changed_at),S=C.quantity_changed>0;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.date}),e.jsx("div",{className:"text-gray-500",children:D.time}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:D.relative})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${z.bg} ${z.text} ${z.border}`,children:P(C.change_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.previous_stock})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.new_stock})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:S?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4 text-green-600 mr-1"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",C.quantity_changed]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Mo,{className:"w-4 h-4 text-red-600 mr-1"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:C.quantity_changed})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:C.reason||"No reason provided"}),C.notes&&e.jsx("div",{className:"text-gray-500 text-xs mt-1 italic",children:C.notes})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.changed_by_name})]},C.history_id)})})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:u.history.map(C=>{const z=M(C.change_type),D=_(C.changed_at),S=C.quantity_changed>0;return e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${z.bg} ${z.text} ${z.border}`,children:P(C.change_type)}),e.jsx("span",{className:"text-xs text-gray-500",children:D.relative})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Previous"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:C.previous_stock})]}),e.jsx("div",{className:"text-center flex items-center justify-center",children:S?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(wt,{className:"w-5 h-5 text-green-600 mb-1"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",C.quantity_changed]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Mo,{className:"w-5 h-5 text-red-600 mb-1"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:C.quantity_changed})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"New"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:C.new_stock})]})]}),e.jsxs("div",{className:"text-sm border-t border-gray-200 pt-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Reason:"})," ",e.jsx("span",{className:"text-gray-900",children:C.reason||"No reason provided"})]}),C.notes&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Notes:"})," ",e.jsx("span",{className:"text-gray-900 italic",children:C.notes})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Changed by: ",C.changed_by_name]}),e.jsxs("span",{children:[D.date," ",D.time]})]})]})]},C.history_id)})}),N>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:r.offset+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.offset+r.limit,r.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:r.total})," ","records"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:k,disabled:!y,className:`inline-flex items-center px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${y?"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Bi,{className:"w-5 h-5 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-gray-700 px-3",children:["Page ",e.jsx("span",{className:"font-medium",children:h})," of"," ",e.jsx("span",{className:"font-medium",children:N})]}),e.jsxs("button",{onClick:f,disabled:!j,className:`inline-flex items-center px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${j?"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["Next",e.jsx($e,{className:"w-5 h-5 ml-1"})]})]})]})]})]})})})};function Ss(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function La(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}const ky=6048e5,a5=864e5;let n5={};function cc(){return n5}function Ui(t,s){var o,c,d,u;const r=cc(),a=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=Ss(t),i=n.getDay(),l=(i<a?7:0)+i-a;return n.setDate(n.getDate()-l),n.setHours(0,0,0,0),n}function Lo(t){return Ui(t,{weekStartsOn:1})}function Cy(t){const s=Ss(t),r=s.getFullYear(),a=La(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Lo(a),i=La(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Lo(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function y0(t){const s=Ss(t);return s.setHours(0,0,0,0),s}function b0(t){const s=Ss(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function i5(t,s){const r=y0(t),a=y0(s),n=+r-b0(r),i=+a-b0(a);return Math.round((n-i)/a5)}function l5(t){const s=Cy(t),r=La(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Lo(r)}function o5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function c5(t){if(!o5(t)&&typeof t!="number")return!1;const s=Ss(t);return!isNaN(Number(s))}function d5(t){const s=Ss(t),r=La(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}const u5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},m5=(t,s,r)=>{let a;const n=u5[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function ad(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const h5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},g5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p5={date:ad({formats:h5,defaultWidth:"full"}),time:ad({formats:x5,defaultWidth:"full"}),dateTime:ad({formats:g5,defaultWidth:"full"})},f5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},y5=(t,s,r,a)=>f5[t];function ti(t){return(s,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):l;n=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const b5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},j5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},N5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},k5=(t,s)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},C5={ordinalNumber:k5,era:ti({values:b5,defaultWidth:"wide"}),quarter:ti({values:j5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ti({values:v5,defaultWidth:"wide"}),day:ti({values:N5,defaultWidth:"wide"}),dayPeriod:ti({values:w5,defaultWidth:"wide",formattingValues:_5,defaultFormattingWidth:"wide"})};function si(t){return(s,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const l=i[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?P5(o,m=>m.test(l)):S5(o,m=>m.test(l));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=s.slice(l.length);return{value:d,rest:u}}}function S5(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function P5(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function E5(t){return(s,r={})=>{const a=s.match(t.matchPattern);if(!a)return null;const n=a[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const o=s.slice(n.length);return{value:l,rest:o}}}const F5=/^(\d+)(th|st|nd|rd)?/i,T5=/\d+/i,A5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},M5={any:[/^b/i,/^(a|c)/i]},L5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$5={any:[/1/i,/2/i,/3/i,/4/i]},R5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},O5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},D5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},I5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},q5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},z5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},B5={ordinalNumber:E5({matchPattern:F5,parsePattern:T5,valueCallback:t=>parseInt(t,10)}),era:si({matchPatterns:A5,defaultMatchWidth:"wide",parsePatterns:M5,defaultParseWidth:"any"}),quarter:si({matchPatterns:L5,defaultMatchWidth:"wide",parsePatterns:$5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:si({matchPatterns:R5,defaultMatchWidth:"wide",parsePatterns:O5,defaultParseWidth:"any"}),day:si({matchPatterns:D5,defaultMatchWidth:"wide",parsePatterns:I5,defaultParseWidth:"any"}),dayPeriod:si({matchPatterns:q5,defaultMatchWidth:"any",parsePatterns:z5,defaultParseWidth:"any"})},U5={code:"en-US",formatDistance:m5,formatLong:p5,formatRelative:y5,localize:C5,match:B5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function V5(t){const s=Ss(t);return i5(s,d5(s))+1}function W5(t){const s=Ss(t),r=+Lo(s)-+l5(s);return Math.round(r/ky)+1}function Sy(t,s){var u,m,b,p;const r=Ss(t),a=r.getFullYear(),n=cc(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(b=n.locale)==null?void 0:b.options)==null?void 0:p.firstWeekContainsDate)??1,l=La(t,0);l.setFullYear(a+1,0,i),l.setHours(0,0,0,0);const o=Ui(l,s),c=La(t,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Ui(c,s);return r.getTime()>=o.getTime()?a+1:r.getTime()>=d.getTime()?a:a-1}function H5(t,s){var o,c,d,u;const r=cc(),a=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=Sy(t,s),i=La(t,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Ui(i,s)}function Q5(t,s){const r=Ss(t),a=+Ui(r,s)-+H5(r,s);return Math.round(a/ky)+1}function Te(t,s){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(s,"0");return r+a}const hr={y(t,s){const r=t.getFullYear(),a=r>0?r:1-r;return Te(s==="yy"?a%100:a,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):Te(r+1,2)},d(t,s){return Te(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return Te(t.getHours()%12||12,s.length)},H(t,s){return Te(t.getHours(),s.length)},m(t,s){return Te(t.getMinutes(),s.length)},s(t,s){return Te(t.getSeconds(),s.length)},S(t,s){const r=s.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return Te(n,s.length)}},Ba={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},j0={G:function(t,s,r){const a=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return hr.y(t,s)},Y:function(t,s,r,a){const n=Sy(t,a),i=n>0?n:1-n;if(s==="YY"){const l=i%100;return Te(l,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):Te(i,s.length)},R:function(t,s){const r=Cy(t);return Te(r,s.length)},u:function(t,s){const r=t.getFullYear();return Te(r,s.length)},Q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return Te(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return Te(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,r){const a=t.getMonth();switch(s){case"M":case"MM":return hr.M(t,s);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,r){const a=t.getMonth();switch(s){case"L":return String(a+1);case"LL":return Te(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,r,a){const n=Q5(t,a);return s==="wo"?r.ordinalNumber(n,{unit:"week"}):Te(n,s.length)},I:function(t,s,r){const a=W5(t);return s==="Io"?r.ordinalNumber(a,{unit:"week"}):Te(a,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):hr.d(t,s)},D:function(t,s,r){const a=V5(t);return s==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Te(a,s.length)},E:function(t,s,r){const a=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Te(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Te(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,r){const a=t.getDay(),n=a===0?7:a;switch(s){case"i":return String(n);case"ii":return Te(n,s.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,r){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,r){const a=t.getHours();let n;switch(a===12?n=Ba.noon:a===0?n=Ba.midnight:n=a/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,r){const a=t.getHours();let n;switch(a>=17?n=Ba.evening:a>=12?n=Ba.afternoon:a>=4?n=Ba.morning:n=Ba.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return hr.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):hr.H(t,s)},K:function(t,s,r){const a=t.getHours()%12;return s==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Te(a,s.length)},k:function(t,s,r){let a=t.getHours();return a===0&&(a=24),s==="ko"?r.ordinalNumber(a,{unit:"hour"}):Te(a,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):hr.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):hr.s(t,s)},S:function(t,s){return hr.S(t,s)},X:function(t,s,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(s){case"X":return N0(a);case"XXXX":case"XX":return aa(a);case"XXXXX":case"XXX":default:return aa(a,":")}},x:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"x":return N0(a);case"xxxx":case"xx":return aa(a);case"xxxxx":case"xxx":default:return aa(a,":")}},O:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+v0(a,":");case"OOOO":default:return"GMT"+aa(a,":")}},z:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+v0(a,":");case"zzzz":default:return"GMT"+aa(a,":")}},t:function(t,s,r){const a=Math.trunc(t.getTime()/1e3);return Te(a,s.length)},T:function(t,s,r){const a=t.getTime();return Te(a,s.length)}};function v0(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+s+Te(i,2)}function N0(t,s){return t%60===0?(t>0?"-":"+")+Te(Math.abs(t)/60,2):aa(t,s)}function aa(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=Te(Math.trunc(a/60),2),i=Te(a%60,2);return r+n+s+i}const w0=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Py=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},K5=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return w0(t,s);let i;switch(a){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",w0(a,s)).replace("{{time}}",Py(n,s))},Y5={p:Py,P:K5},G5=/^D+$/,X5=/^Y+$/,J5=["D","DD","YY","YYYY"];function Z5(t){return G5.test(t)}function ek(t){return X5.test(t)}function tk(t,s,r){const a=sk(t,s,r);if(console.warn(a),J5.includes(t))throw new RangeError(a)}function sk(t,s,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ak=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nk=/^'([^]*?)'?$/,ik=/''/g,lk=/[a-zA-Z]/;function ok(t,s,r){var u,m,b,p;const a=cc(),n=a.locale??U5,i=a.firstWeekContainsDate??((m=(u=a.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,l=a.weekStartsOn??((p=(b=a.locale)==null?void 0:b.options)==null?void 0:p.weekStartsOn)??0,o=Ss(t);if(!c5(o))throw new RangeError("Invalid time value");let c=s.match(ak).map(g=>{const h=g[0];if(h==="p"||h==="P"){const N=Y5[h];return N(g,n.formatLong)}return g}).join("").match(rk).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const h=g[0];if(h==="'")return{isToken:!1,value:ck(g)};if(j0[h])return{isToken:!0,value:g};if(h.match(lk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:g}});n.localize.preprocessor&&(c=n.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:n};return c.map(g=>{if(!g.isToken)return g.value;const h=g.value;(ek(h)||Z5(h))&&tk(h,s,String(t));const N=j0[h[0]];return N(o,h,n.localize,d)}).join("")}function ck(t){const s=t.match(nk);return s?s[1].replace(ik,"'"):t}const dk=async t=>{const{data:s}=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders",{params:{status:t.status||void 0,order_type:t.order_type||void 0,payment_status:t.payment_status||void 0,date_range:t.date_range||void 0,customer_search:t.customer_search||void 0,limit:t.limit,offset:t.offset,sort_by:t.sort_by,sort_order:t.sort_order},headers:{Authorization:`Bearer ${t.auth_token}`}});return s},uk=async t=>{const{data:s}=await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}`,{status:t.status},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},mk=async t=>{const{data:s}=await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}/refund`,{refund_amount:t.refund_amount,refund_reason:t.refund_reason},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},hk=async t=>{const{data:s}=await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/orders/${t.order_id}/cancel`,{cancellation_reason:t.cancellation_reason,issue_refund:t.issue_refund},{headers:{Authorization:`Bearer ${t.auth_token}`}});return s},xk=t=>({received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-green-100 text-green-800",out_for_delivery:"bg-purple-100 text-purple-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",gk=t=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",pk=()=>{var Xr,Ws;const t=je(),[s,r]=Xe(),a=Fe(),n=X(te=>te.authentication_state.auth_token),[i,l]=x.useState(s.get("status")),[o,c]=x.useState(s.get("order_type")),[d,u]=x.useState(s.get("payment_status")),[m,b]=x.useState(s.get("date_range")),[p,g]=x.useState(s.get("customer_search")||""),[h,N]=x.useState(p),[j,y]=x.useState({current_page:1,limit:50,offset:0,total:0,total_pages:0}),[f,k]=x.useState({sort_by:"created_at",sort_order:"desc"}),[T,M]=x.useState([]),[P,_]=x.useState({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""}),[F,v]=x.useState({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1}),[O,R]=x.useState(!1);x.useEffect(()=>{const te=setTimeout(()=>{g(h),y(Z=>({...Z,current_page:1,offset:0}))},500);return()=>clearTimeout(te)},[h]),x.useEffect(()=>{const te={};i&&(te.status=i),o&&(te.order_type=o),d&&(te.payment_status=d),m&&(te.date_range=m),p&&(te.customer_search=p),r(te)},[i,o,d,m,p,r]);const{data:C,isLoading:z,error:D,refetch:S}=le({queryKey:["admin","orders",i,o,d,m,p,j.limit,j.offset,f.sort_by,f.sort_order],queryFn:()=>dk({status:i,order_type:o,payment_status:d,date_range:m,customer_search:p,limit:j.limit,offset:j.offset,sort_by:f.sort_by,sort_order:f.sort_order,auth_token:n||""}),enabled:!!n,staleTime:3e4,select:te=>({orders:te.orders.map(Z=>({order_id:Z.order_id,order_number:Z.order_number,user_id:Z.user_id,customer_name:Z.customer_name,customer_email:Z.customer_email,order_type:Z.order_type,status:Z.status,payment_status:Z.payment_status,total_amount:Number(Z.total_amount||0),created_at:Z.created_at})),total:te.total})});x.useEffect(()=>{C&&y(te=>({...te,total:C.total,total_pages:Math.ceil(C.total/te.limit)}))},[C]);const E=(C==null?void 0:C.orders)||[],w=ie({mutationFn:uk,onSuccess:()=>{a.invalidateQueries({queryKey:["admin","orders"]})}}),$=ie({mutationFn:mk,onSuccess:()=>{a.invalidateQueries({queryKey:["admin","orders"]}),_({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""})}}),B=ie({mutationFn:hk,onSuccess:()=>{a.invalidateQueries({queryKey:["admin","orders"]}),v({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1})}}),I=te=>{l(te),y(Z=>({...Z,current_page:1,offset:0}))},q=te=>{c(te),y(Z=>({...Z,current_page:1,offset:0}))},A=te=>{u(te),y(Z=>({...Z,current_page:1,offset:0}))},L=te=>{b(te),y(Z=>({...Z,current_page:1,offset:0}))},U=()=>{l(null),c(null),u(null),b(null),g(""),N(""),y(te=>({...te,current_page:1,offset:0}))},Y=te=>{const Z=(te-1)*j.limit;y(Se=>({...Se,current_page:te,offset:Z})),M([])},Q=te=>{f.sort_by===te?k(Z=>({sort_by:te,sort_order:Z.sort_order==="asc"?"desc":"asc"})):k({sort_by:te,sort_order:"desc"})},K=te=>{M(Z=>Z.includes(te)?Z.filter(Se=>Se!==te):[...Z,te])},G=()=>{T.length===E.length?M([]):M(E.map(te=>te.order_id))},J=(te,Z)=>{n&&w.mutate({order_id:te,status:Z,auth_token:n})},xe=te=>{_({visible:!0,order_id:te.order_id,order_number:te.order_number,total_amount:te.total_amount,refund_amount:te.total_amount,refund_reason:""})},ke=()=>{!n||!P.refund_reason.trim()||$.mutate({order_id:P.order_id,refund_amount:P.refund_amount,refund_reason:P.refund_reason,auth_token:n})},he=te=>{v({visible:!0,order_id:te.order_id,order_number:te.order_number,cancellation_reason:"",issue_refund:te.payment_status==="paid"})},se=()=>{!n||!F.cancellation_reason.trim()||B.mutate({order_id:F.order_id,cancellation_reason:F.cancellation_reason,issue_refund:F.issue_refund,auth_token:n})},ye=[i,o,d,m,p].filter(Boolean).length,Ps=D?((Ws=(Xr=D.response)==null?void 0:Xr.data)==null?void 0:Ws.message)||D.message||"Failed to load orders":null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage and process all customer orders"})]}),e.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Back to Dashboard"})]}),C&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:C.total})]}),e.jsx(Dt,{className:"w-10 h-10 text-blue-600"})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer name or email...",value:h,onChange:te=>N(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),h&&e.jsx("button",{onClick:()=>{N(""),g("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("button",{onClick:()=>R(!O),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Qm,{className:"w-5 h-5 mr-2"}),"Filters",ye>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:ye}),O?e.jsx(na,{className:"w-4 h-4 ml-2"}):e.jsx(Os,{className:"w-4 h-4 ml-2"})]}),e.jsx("button",{onClick:()=>S(),disabled:z,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50",children:e.jsx(ks,{className:`w-5 h-5 ${z?"animate-spin":""}`})}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",onClick:()=>alert("Export functionality requires backend endpoint implementation"),children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Export"]})]}),O&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),e.jsxs("select",{value:i||"",onChange:te=>I(te.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),e.jsxs("select",{value:o||"",onChange:te=>q(te.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"collection",children:"Collection"}),e.jsx("option",{value:"delivery",children:"Delivery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsxs("select",{value:d||"",onChange:te=>A(te.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Payment Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:m||"",onChange:te=>L(te.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"this_month",children:"This Month"})]})]})]}),ye>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:["Status: ",i,e.jsx("button",{onClick:()=>I(null),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-4 h-4"})})]}),o&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:["Type: ",o,e.jsx("button",{onClick:()=>q(null),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-4 h-4"})})]}),d&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:["Payment: ",d,e.jsx("button",{onClick:()=>A(null),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-4 h-4"})})]}),m&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:["Date: ",m,e.jsx("button",{onClick:()=>L(null),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-4 h-4"})})]}),p&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:['Search: "',p,'"',e.jsx("button",{onClick:()=>{N(""),g("")},className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-4 h-4"})})]})]}),e.jsx("button",{onClick:U,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]})]})]})]}),T.length>0&&e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[T.length," order",T.length!==1?"s":""," selected"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>M([]),className:"px-4 py-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear selection"})})]})}),Ps&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:Ps}),e.jsx("button",{onClick:()=>S(),className:"mt-2 text-sm text-red-600 hover:text-red-700 font-medium",children:"Try again"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:T.length===E.length&&E.length>0,onChange:G,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("order_number"),children:e.jsxs("div",{className:"flex items-center",children:["Order #",f.sort_by==="order_number"&&(f.sort_order==="asc"?e.jsx(na,{className:"w-4 h-4 ml-1"}):e.jsx(Os,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("customer_name"),children:e.jsxs("div",{className:"flex items-center",children:["Customer",f.sort_by==="customer_name"&&(f.sort_order==="asc"?e.jsx(na,{className:"w-4 h-4 ml-1"}):e.jsx(Os,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("total_amount"),children:e.jsxs("div",{className:"flex items-center",children:["Total",f.sort_by==="total_amount"&&(f.sort_order==="asc"?e.jsx(na,{className:"w-4 h-4 ml-1"}):e.jsx(Os,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("created_at"),children:e.jsxs("div",{className:"flex items-center",children:["Date",f.sort_by==="created_at"&&(f.sort_order==="asc"?e.jsx(na,{className:"w-4 h-4 ml-1"}):e.jsx(Os,{className:"w-4 h-4 ml-1"}))]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z?Array.from({length:5}).map((te,Z)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-20 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-20 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded animate-pulse"})})]},Z)):E.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[e.jsx(Dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:ye>0?"Try adjusting your filters":"Orders will appear here once customers place them"}),ye>0&&e.jsx("button",{onClick:U,className:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]})}):E.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:T.includes(te.order_id),onChange:()=>K(te.order_id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(H,{to:`/admin/orders/${te.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:te.order_number})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:te.customer_name}),e.jsx("div",{className:"text-gray-500",children:te.customer_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te.order_type==="delivery"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[te.order_type==="delivery"?e.jsx(Ma,{className:"w-3 h-3 mr-1"}):e.jsx(Dt,{className:"w-3 h-3 mr-1"}),te.order_type==="delivery"?"Delivery":"Collection"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:te.status,onChange:Z=>J(te.order_id,Z.target.value),disabled:te.status==="completed"||te.status==="cancelled",className:`text-xs font-medium rounded-full px-3 py-1 border-0 focus:ring-2 focus:ring-blue-500 ${xk(te.status)} disabled:cursor-not-allowed`,children:[e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${gk(te.payment_status)}`,children:te.payment_status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",te.total_amount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ok(new Date(te.created_at),"MMM dd, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(H,{to:`/admin/orders/${te.order_id}`,className:"text-blue-600 hover:text-blue-700",title:"View Details",children:e.jsx(Ns,{className:"w-5 h-5"})}),te.status!=="cancelled"&&te.status!=="completed"&&e.jsxs(e.Fragment,{children:[te.payment_status==="paid"&&e.jsx("button",{onClick:()=>xe(te),className:"text-orange-600 hover:text-orange-700",title:"Refund Order",children:e.jsx(Ao,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>he(te),className:"text-red-600 hover:text-red-700",title:"Cancel Order",children:e.jsx(Fo,{className:"w-5 h-5"})})]})]})})]},te.order_id))})]})}),!z&&E.length>0&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>Y(j.current_page-1),disabled:j.current_page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>Y(j.current_page+1),disabled:j.current_page===j.total_pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:j.offset+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(j.offset+j.limit,j.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:j.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>Y(j.current_page-1),disabled:j.current_page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:j.total_pages},(te,Z)=>Z+1).map(te=>te===1||te===j.total_pages||te>=j.current_page-1&&te<=j.current_page+1?e.jsx("button",{onClick:()=>Y(te),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${te===j.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:te},te):te===j.current_page-2||te===j.current_page+2?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},te):null),e.jsx("button",{onClick:()=>Y(j.current_page+1),disabled:j.current_page===j.total_pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})]})}),P.visible&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>_({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(Ao,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Refund Order #",P.order_number]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount ()"}),e.jsx("input",{type:"number",id:"refund_amount",step:"0.01",min:"0",max:P.total_amount,value:P.refund_amount,onChange:te=>_(Z=>({...Z,refund_amount:parseFloat(te.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Order total: ",P.total_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"refund_reason",className:"block text-sm font-medium text-gray-700 mb-1",children:["Refund Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"refund_reason",value:P.refund_reason,onChange:te=>_(Z=>({...Z,refund_reason:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"customer_request",children:"Customer Request"}),e.jsx("option",{value:"order_error",children:"Order Error"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"delivery_issue",children:"Delivery Issue"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:ke,disabled:!P.refund_reason||$.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-600 text-base font-medium text-white hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:$.isPending?"Processing...":"Confirm Refund"}),e.jsx("button",{type:"button",onClick:()=>_({visible:!1,order_id:"",order_number:"",total_amount:0,refund_amount:0,refund_reason:""}),disabled:$.isPending,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:"Cancel"})]})]})]})}),F.visible&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>v({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(Fo,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Cancel Order #",F.order_number]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-gray-700 mb-1",children:["Cancellation Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"cancellation_reason",value:F.cancellation_reason,onChange:te=>v(Z=>({...Z,cancellation_reason:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"customer_request",children:"Customer Request"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"payment_issue",children:"Payment Issue"}),e.jsx("option",{value:"duplicate_order",children:"Duplicate Order"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"issue_refund",checked:F.issue_refund,onChange:te=>v(Z=>({...Z,issue_refund:te.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"issue_refund",className:"ml-2 block text-sm text-gray-900",children:"Issue refund (if payment was received)"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:se,disabled:!F.cancellation_reason||B.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:B.isPending?"Processing...":"Confirm Cancellation"}),e.jsx("button",{type:"button",onClick:()=>v({visible:!1,order_id:"",order_number:"",cancellation_reason:"",issue_refund:!1}),disabled:B.isPending,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:"Cancel"})]})]})]})})]})},dc="https://123salama-lama-food-truck.launchpulse.ai",fk=async(t,s)=>(await W.get(`${dc}/api/admin/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,_0=async(t,s,r)=>(await W.put(`${dc}/api/admin/orders/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,yk=async(t,s,r)=>(await W.post(`${dc}/api/admin/orders/${t}/refund`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,bk=async(t,s,r)=>(await W.post(`${dc}/api/admin/orders/${t}/cancel`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,Ts=t=>t==null?"0.00":`${Number(t).toFixed(2)}`,ri=t=>{if(!t)return"N/A";const s=new Date(t);return new Intl.DateTimeFormat("en-IE",{dateStyle:"medium",timeStyle:"short"}).format(s)},k0=t=>({received:"bg-blue-100 text-blue-800 border-blue-200",preparing:"bg-yellow-100 text-yellow-800 border-yellow-200",ready:"bg-green-100 text-green-800 border-green-200",out_for_delivery:"bg-purple-100 text-purple-800 border-purple-200",completed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",jk=t=>({paid:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",failed:"bg-red-100 text-red-800 border-red-200",refunded:"bg-gray-100 text-gray-800 border-gray-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",vk=t=>({received:e.jsx(Le,{className:"w-5 h-5"}),preparing:e.jsx(Pe,{className:"w-5 h-5"}),ready:e.jsx(we,{className:"w-5 h-5"}),out_for_delivery:e.jsx(Ma,{className:"w-5 h-5"}),completed:e.jsx(we,{className:"w-5 h-5"}),cancelled:e.jsx(it,{className:"w-5 h-5"})})[t]||e.jsx(Le,{className:"w-5 h-5"}),Nk=()=>{const{order_id:t}=Jt(),s=Fe(),r=X($=>$.authentication_state.auth_token),[a,n]=x.useState(""),[i,l]=x.useState(""),[o,c]=x.useState(!1),[d,u]=x.useState(!1),[m,b]=x.useState(""),[p,g]=x.useState(""),[h,N]=x.useState(""),[j,y]=x.useState(!1),{data:f,isLoading:k,isError:T,error:M,refetch:P}=le({queryKey:["adminOrderDetail",t],queryFn:()=>fk(t,r),enabled:!!t&&!!r,staleTime:3e4,refetchOnWindowFocus:!1,retry:1});x.useEffect(()=>{f&&(n(f.status),l(f.internal_notes||""),b(String(f.refund_amount||f.total_amount)))},[f]);const _=ie({mutationFn:$=>_0(t,$,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),alert("Order status updated successfully")},onError:$=>{var B,I;alert(`Failed to update status: ${((I=(B=$.response)==null?void 0:B.data)==null?void 0:I.message)||$.message}`)}}),F=ie({mutationFn:$=>yk(t,$,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),c(!1),b(""),g(""),alert("Refund processed successfully")},onError:$=>{var B,I;alert(`Failed to process refund: ${((I=(B=$.response)==null?void 0:B.data)==null?void 0:I.message)||$.message}`)}}),v=ie({mutationFn:$=>bk(t,$,r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),u(!1),N(""),y(!1),alert("Order cancelled successfully")},onError:$=>{var B,I;alert(`Failed to cancel order: ${((I=(B=$.response)==null?void 0:B.data)==null?void 0:I.message)||$.message}`)}}),O=ie({mutationFn:$=>_0(t,{status:f.status,internal_notes:$},r),onSuccess:()=>{s.invalidateQueries({queryKey:["adminOrderDetail",t]}),alert("Internal notes saved successfully")},onError:$=>{var B,I;alert(`Failed to save notes: ${((I=(B=$.response)==null?void 0:B.data)==null?void 0:I.message)||$.message}`)}}),R=()=>{a!==(f==null?void 0:f.status)&&_.mutate({status:a})},C=$=>{$.preventDefault();const B=parseFloat(m);if(isNaN(B)||B<=0){alert("Please enter a valid refund amount");return}if(f&&B>f.total_amount){alert("Refund amount cannot exceed order total");return}if(!p.trim()){alert("Please provide a refund reason");return}F.mutate({refund_amount:B,refund_reason:p.trim()})},z=$=>{if($.preventDefault(),!h.trim()){alert("Please provide a cancellation reason");return}v.mutate({cancellation_reason:h.trim(),issue_refund:j})},D=()=>{O.mutate(i)},S=()=>{window.print()},E=x.useMemo(()=>f?f.payment_status==="paid"&&f.status!=="cancelled"&&!f.refund_amount:!1,[f]),w=x.useMemo(()=>f?f.status!=="completed"&&f.status!=="cancelled":!1,[f]);return k?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading order details..."})]})})}):T||!f?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Order"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(M==null?void 0:M.message)||"Failed to load order details. Please try again."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>P(),className:"w-full px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:"Retry"}),e.jsx(H,{to:"/admin/orders",className:"block w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Orders"})]})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{to:"/admin/orders",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to orders",children:e.jsx(dt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",f.order_number]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",f.order_id]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-lg border flex items-center space-x-2 ${k0(f.status)}`,children:[vk(f.status),e.jsx("span",{className:"font-semibold capitalize",children:f.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[e.jsx(al,{className:"w-5 h-5"}),e.jsx("span",{children:"Print"})]}),E&&e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{className:"w-5 h-5"}),e.jsx("span",{children:"Refund"})]}),w&&e.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(Fo,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancel Order"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Customer Information"})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:f.customer_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx(H,{to:`/admin/customers/${f.user_id}`,className:"text-lg font-semibold text-blue-600 hover:text-blue-700 hover:underline",children:f.customer_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Customer ID: ",f.user_id]})]})]}),e.jsxs("div",{className:"space-y-2 pl-15",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(lt,{className:"w-5 h-5 text-gray-400"}),e.jsx("a",{href:`mailto:${f.customer_email}`,className:"hover:text-blue-600 hover:underline",children:f.customer_email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(zt,{className:"w-5 h-5 text-gray-400"}),e.jsx("a",{href:`tel:${f.customer_phone}`,className:"hover:text-blue-600 hover:underline",children:f.customer_phone})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("a",{href:`mailto:${f.customer_email}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-center text-sm",children:"Send Email"}),e.jsx("a",{href:`tel:${f.customer_phone}`,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors text-center text-sm",children:"Call Customer"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Details"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Order Type"}),e.jsx("p",{className:"text-base font-semibold text-gray-900 capitalize",children:f.order_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Created At"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:ri(f.created_at)})]})]}),f.order_type==="collection"&&f.collection_time_slot&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Collection Time"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:ri(f.collection_time_slot)})]}),f.order_type==="delivery"&&f.delivery_address_snapshot&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center space-x-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Delivery Address"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900",children:f.delivery_address_snapshot.address_line1}),f.delivery_address_snapshot.address_line2&&e.jsx("p",{className:"text-sm text-gray-700",children:f.delivery_address_snapshot.address_line2}),e.jsxs("p",{className:"text-sm text-gray-700",children:[f.delivery_address_snapshot.city,", ",f.delivery_address_snapshot.postal_code]}),f.delivery_address_snapshot.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 italic mt-2 border-t border-gray-200 pt-2",children:["Instructions: ",f.delivery_address_snapshot.delivery_instructions]})]})]}),f.special_instructions&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Special Instructions"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:f.special_instructions})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-orange-50 to-red-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Items"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.items.map($=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:$.item_name}),$.selected_customizations&&Object.keys($.selected_customizations).length>0&&e.jsx("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:Object.entries($.selected_customizations).map(([B,I])=>e.jsxs("p",{className:"italic",children:[B,": ",JSON.stringify(I)]},B))})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full font-semibold text-gray-900",children:$.quantity})}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-900 font-medium",children:Ts($.unit_price)}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-900 font-semibold",children:Ts($.line_total)})]},$.order_item_id))})]})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3 max-w-md ml-auto",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:Ts(f.subtotal)})]}),f.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount ",f.discount_code&&`(${f.discount_code})`,":"]}),e.jsxs("span",{className:"font-medium",children:["-",Ts(f.discount_amount)]})]}),f.delivery_fee!==null&&f.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee:"}),e.jsx("span",{className:"font-medium",children:Ts(f.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax (VAT):"}),e.jsx("span",{className:"font-medium",children:Ts(f.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-3 border-t border-gray-300",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Ts(f.total_amount)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-green-50 to-teal-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Information"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Status"}),e.jsx("div",{className:`inline-flex px-3 py-1 rounded-lg border font-semibold text-sm ${jk(f.payment_status)}`,children:f.payment_status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Method"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900 capitalize flex items-center space-x-2",children:[e.jsx(ls,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{children:f.payment_method_type||"N/A"})]})]})]}),f.sumup_transaction_id&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Transaction ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-900 bg-gray-50 px-3 py-2 rounded",children:f.sumup_transaction_id})]}),f.refund_amount&&e.jsx("div",{className:"border-t border-gray-200 pt-4 bg-yellow-50 -mx-6 -mb-6 px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Refund Amount:"}),e.jsx("p",{className:"text-lg font-bold text-yellow-900",children:Ts(f.refund_amount)})]}),f.refund_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800 mb-1",children:"Reason:"}),e.jsx("p",{className:"text-sm text-yellow-900 italic",children:f.refund_reason})]}),f.refunded_at&&e.jsxs("p",{className:"text-xs text-yellow-700",children:["Refunded at: ",ri(f.refunded_at)]})]})}),f.cancelled_at&&f.cancellation_reason&&e.jsx("div",{className:"border-t border-gray-200 pt-4 bg-red-50 -mx-6 -mb-6 px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Cancellation Reason:"}),e.jsx("p",{className:"text-sm text-red-900 italic",children:f.cancellation_reason}),e.jsxs("p",{className:"text-xs text-red-700",children:["Cancelled at: ",ri(f.cancelled_at)]})]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden sticky top-6",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Manage Status"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Order Status"}),e.jsxs("select",{id:"status-select",value:a,onChange:$=>n($.target.value),disabled:f.status==="completed"||f.status==="cancelled",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"preparing",children:"Preparing"}),e.jsx("option",{value:"ready",children:"Ready for Collection"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsx("button",{onClick:R,disabled:a===f.status||_.isPending||f.status==="completed"||f.status==="cancelled",className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("span",{children:"Update Status"})]})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Status History"}),e.jsx("div",{className:"space-y-3",children:f.status_history.map(($,B)=>e.jsxs("div",{className:`relative pl-6 ${B!==f.status_history.length-1?"pb-3 border-l-2 border-gray-300":""}`,children:[e.jsx("div",{className:"absolute left-0 top-0 w-3 h-3 bg-blue-600 rounded-full -translate-x-[7px]"}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${k0($.status)}`,children:$.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:ri($.changed_at)})]}),$.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-2 italic",children:$.notes})]})]},$.history_id))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Internal Notes"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Admin-only notes (not visible to customer)"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("textarea",{value:i,onChange:$=>l($.target.value),placeholder:"Add internal notes about this order...",rows:6,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 resize-none"}),e.jsx("button",{onClick:D,disabled:O.isPending,className:"w-full px-6 py-3 bg-gray-700 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("span",{children:"Save Notes"})]})})]})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Process Refund"})}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Amount ()"}),e.jsx("input",{id:"refund-amount",type:"number",step:"0.01",min:"0.01",max:f.total_amount,value:m,onChange:$=>b($.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500",placeholder:"Enter refund amount"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Order total: ",Ts(f.total_amount)]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"refund-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Reason"}),e.jsx("textarea",{id:"refund-reason",value:p,onChange:$=>g($.target.value),required:!0,rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-yellow-500 resize-none",placeholder:"Explain reason for refund..."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Warning:"})," This action will process a refund through the payment system and cannot be undone."]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),b(""),g("")},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F.isPending,className:"flex-1 px-4 py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"w-5 h-5"}),e.jsx("span",{children:"Process Refund"})]})})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-red-50 to-pink-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cancel Order"})}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),e.jsx("textarea",{id:"cancel-reason",value:h,onChange:$=>N($.target.value),required:!0,rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-red-500 resize-none",placeholder:"Explain reason for cancellation..."})]}),f.payment_status==="paid"&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:$=>y($.target.checked),className:"mt-1 w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Issue refund"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Automatically refund ",Ts(f.total_amount)," to customer"]})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-900",children:[e.jsx("strong",{children:"Warning:"})," Cancelling this order cannot be undone. The customer will be notified."]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),N(""),y(!1)},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:v.isPending,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Cancelling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fo,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancel Order"})]})})]})]})]})})]})})},Da="https://123salama-lama-food-truck.launchpulse.ai",wk=async t=>{const s=await W.get(`${Da}/api/admin/delivery/settings`,{headers:{Authorization:`Bearer ${t}`}});return{delivery_enabled:s.data.delivery_enabled??!1,minimum_order_value:s.data.minimum_order_value?Number(s.data.minimum_order_value):null,free_delivery_threshold:s.data.free_delivery_threshold?Number(s.data.free_delivery_threshold):null}},_k=async t=>(await W.get(`${Da}/api/admin/delivery/zones`,{headers:{Authorization:`Bearer ${t}`}})).data.zones.map(r=>({...r,delivery_fee:Number(r.delivery_fee||0),minimum_order_value:r.minimum_order_value?Number(r.minimum_order_value):null,estimated_delivery_time:Number(r.estimated_delivery_time||0),priority:Number(r.priority||0)})),kk=async(t,s)=>{await W.put(`${Da}/api/admin/delivery/settings`,s,{headers:{Authorization:`Bearer ${t}`}})},Ck=async(t,s)=>(await W.post(`${Da}/api/admin/delivery/zones`,s,{headers:{Authorization:`Bearer ${t}`}})).data,Sk=async(t,s,r)=>(await W.put(`${Da}/api/admin/delivery/zones/${s}`,r,{headers:{Authorization:`Bearer ${t}`}})).data,Pk=async(t,s)=>{await W.delete(`${Da}/api/admin/delivery/zones/${s}`,{headers:{Authorization:`Bearer ${t}`}})},Ek=async(t,s,r)=>{const a=await W.post(`${Da}/api/admin/delivery/validate-address`,{address:s,postal_code:r},{headers:{Authorization:`Bearer ${t}`}});return{...a.data,delivery_fee:a.data.delivery_fee?Number(a.data.delivery_fee):void 0,estimated_delivery_time:a.data.estimated_delivery_time?Number(a.data.estimated_delivery_time):void 0}},Fk=()=>{const t=X(K=>K.authentication_state.auth_token),[s,r]=x.useState(!1),[a,n]=x.useState(""),[i,l]=x.useState(""),[o,c]=x.useState(null),[d,u]=x.useState(!1),[m,b]=x.useState({zone_name:"",zone_type:"polygon",zone_boundaries:"{}",delivery_fee:"",minimum_order_value:"",estimated_delivery_time:"30",is_active:!0,priority:"0"}),[p,g]=x.useState(null),[h,N]=x.useState(""),[j,y]=x.useState(""),[f,k]=x.useState(null),[T,M]=x.useState(null),P=Fe(),{data:_,isLoading:F,error:v}=le({queryKey:["delivery_settings"],queryFn:()=>wk(t),enabled:!!t,staleTime:5*60*1e3,retry:1}),{data:O,isLoading:R,error:C}=le({queryKey:["delivery_zones"],queryFn:()=>_k(t),enabled:!!t,staleTime:5*60*1e3,retry:1}),z=ie({mutationFn:K=>kk(t,K),onSuccess:()=>{P.invalidateQueries({queryKey:["delivery_settings"]}),$("success","Delivery settings updated successfully")},onError:K=>{var G,J;$("error",((J=(G=K.response)==null?void 0:G.data)==null?void 0:J.message)||"Failed to update settings")}}),D=ie({mutationFn:K=>Ck(t,K),onSuccess:()=>{P.invalidateQueries({queryKey:["delivery_zones"]}),u(!1),B(),$("success","Delivery zone created successfully")},onError:K=>{var G,J;$("error",((J=(G=K.response)==null?void 0:G.data)==null?void 0:J.message)||"Failed to create zone")}}),S=ie({mutationFn:({zoneId:K,zoneData:G})=>Sk(t,K,G),onSuccess:()=>{P.invalidateQueries({queryKey:["delivery_zones"]}),u(!1),c(null),B(),$("success","Delivery zone updated successfully")},onError:K=>{var G,J;$("error",((J=(G=K.response)==null?void 0:G.data)==null?void 0:J.message)||"Failed to update zone")}}),E=ie({mutationFn:K=>Pk(t,K),onSuccess:()=>{P.invalidateQueries({queryKey:["delivery_zones"]}),g(null),$("success","Delivery zone deleted successfully")},onError:K=>{var G,J;$("error",((J=(G=K.response)==null?void 0:G.data)==null?void 0:J.message)||"Failed to delete zone")}}),w=ie({mutationFn:({address:K,postalCode:G})=>Ek(t,K,G),onSuccess:K=>{k(K)},onError:K=>{var G,J;$("error",((J=(G=K.response)==null?void 0:G.data)==null?void 0:J.message)||"Validation failed")}});x.useEffect(()=>{_&&(r(_.delivery_enabled),n(_.minimum_order_value!==null?String(_.minimum_order_value):""),l(_.free_delivery_threshold!==null?String(_.free_delivery_threshold):""))},[_]),x.useEffect(()=>{if(T){const K=setTimeout(()=>{M(null)},5e3);return()=>clearTimeout(K)}},[T]);const $=(K,G)=>{M({type:K,message:G})},B=()=>{b({zone_name:"",zone_type:"polygon",zone_boundaries:"{}",delivery_fee:"",minimum_order_value:"",estimated_delivery_time:"30",is_active:!0,priority:"0"})},I=()=>{B(),c(null),u(!0)},q=K=>{c(K),b({zone_name:K.zone_name,zone_type:K.zone_type,zone_boundaries:JSON.stringify(K.zone_boundaries,null,2),delivery_fee:String(K.delivery_fee),minimum_order_value:K.minimum_order_value!==null?String(K.minimum_order_value):"",estimated_delivery_time:String(K.estimated_delivery_time),is_active:K.is_active,priority:String(K.priority)}),u(!0)},A=()=>{const K={delivery_enabled:s,minimum_order_value:a?Number(a):null,free_delivery_threshold:i?Number(i):null};z.mutate(K)},L=K=>{K.preventDefault();let G;try{G=JSON.parse(m.zone_boundaries)}catch{$("error","Invalid zone boundaries JSON format");return}const J={zone_name:m.zone_name,zone_type:m.zone_type,zone_boundaries:G,delivery_fee:Number(m.delivery_fee),minimum_order_value:m.minimum_order_value?Number(m.minimum_order_value):null,estimated_delivery_time:Number(m.estimated_delivery_time),is_active:m.is_active,priority:Number(m.priority)};o?S.mutate({zoneId:o.zone_id,zoneData:J}):D.mutate(J)},U=K=>{E.mutate(K)},Y=()=>{if(!h.trim()||!j.trim()){$("error","Please enter both address and postal code");return}w.mutate({address:h,postalCode:j})},Q=K=>{const G={zone_name:K.zone_name,zone_boundaries:K.zone_boundaries,delivery_fee:K.delivery_fee,minimum_order_value:K.minimum_order_value,estimated_delivery_time:K.estimated_delivery_time,is_active:!K.is_active,priority:K.priority};S.mutate({zoneId:K.zone_id,zoneData:G})};return F||R?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading delivery settings..."})]})})})})}):v||C?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to Load Delivery Settings"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:(v==null?void 0:v.message)||(C==null?void 0:C.message)||"Please try again later"})]})]})})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ge,{className:"h-8 w-8 text-blue-600 mr-3"}),"Delivery Configuration"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage delivery zones, fees, and operational settings"})]}),T&&e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md rounded-lg shadow-lg p-4 ${T.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[T.type==="success"?e.jsx(qe,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):e.jsx(ce,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm font-medium ${T.type==="success"?"text-green-800":"text-red-800"}`,children:T.message})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(ic,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Global Delivery Settings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q1,{className:`h-6 w-6 mr-3 ${s?"text-green-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Delivery Service ",s?"Enabled":"Disabled"]}),e.jsx("p",{className:"text-sm text-gray-600",children:s?"Customers can select delivery at checkout":"Only collection is available"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${s?"bg-green-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${s?"translate-x-7":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Tr,{className:"inline h-4 w-4 mr-1"}),"Minimum Order Value ()"]}),e.jsx("input",{type:"number",id:"minimum_order_value",value:a,onChange:K=>n(K.target.value),placeholder:"e.g., 15.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no minimum order requirement"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"free_delivery_threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Tr,{className:"inline h-4 w-4 mr-1"}),"Free Delivery Threshold ()"]}),e.jsx("input",{type:"number",id:"free_delivery_threshold",value:i,onChange:K=>l(K.target.value),placeholder:"e.g., 50.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Orders above this amount qualify for free delivery"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:A,disabled:z.isPending,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xx,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Zones"})]}),e.jsxs("button",{onClick:I,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",children:[e.jsx(Ht,{className:"h-5 w-5 mr-2"}),"Add New Zone"]})]}),O&&O.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(K=>e.jsxs("div",{className:`border rounded-lg p-4 transition-all ${K.is_active?"border-gray-200 bg-white hover:shadow-md":"border-gray-300 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:K.zone_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 uppercase",children:K.zone_type})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.is_active?"bg-green-100 text-green-800":"bg-gray-200 text-gray-600"}`,children:K.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Delivery Fee:"}),e.jsxs("span",{className:"ml-auto",children:["",Number(K.delivery_fee).toFixed(2)]})]}),K.minimum_order_value!==null&&e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Min Order:"}),e.jsxs("span",{className:"ml-auto",children:["",Number(K.minimum_order_value).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Le,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Est. Time:"}),e.jsxs("span",{className:"ml-auto",children:[K.estimated_delivery_time," mins"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>q(K),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>Q(K),disabled:S.isPending,className:`flex-1 flex items-center justify-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${K.is_active?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:K.is_active?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),"Enable"]})}),e.jsx("button",{onClick:()=>g(K.zone_id),className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]})]},K.zone_id))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Xx,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No delivery zones configured"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first zone to start delivering"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Us,{className:"h-6 w-6 text-gray-700 mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Address Validation Tester"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",id:"test_address",value:h,onChange:K=>N(K.target.value),placeholder:"123 Main Street, Dublin",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_postal_code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",id:"test_postal_code",value:j,onChange:K=>y(K.target.value),placeholder:"D01 F5P2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("button",{onClick:Y,disabled:w.isPending,className:"w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Validating..."]}):"Validate Address"}),f&&e.jsx("div",{className:`mt-4 p-4 rounded-lg border ${f.valid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[f.valid?e.jsx(qe,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}):e.jsx(_e,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold ${f.valid?"text-green-800":"text-red-800"}`,children:f.valid?"Valid Delivery Address":"Cannot Deliver to Address"}),f.valid&&e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-green-700",children:[f.delivery_fee!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery Fee:"})," ",Number(f.delivery_fee).toFixed(2)]}),f.estimated_delivery_time!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Estimated Time:"})," ",f.estimated_delivery_time," minutes"]})]}),!f.valid&&f.message&&e.jsx("p",{className:"mt-1 text-sm text-red-700",children:f.message})]})]})})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?"Edit Delivery Zone":"Create New Delivery Zone"}),e.jsx("button",{onClick:()=>{u(!1),c(null),B()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"zone_name",required:!0,value:m.zone_name,onChange:K=>b(G=>({...G,zone_name:K.target.value})),placeholder:"e.g., Dublin City Centre",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"zone_type",required:!0,value:m.zone_type,onChange:K=>b(G=>({...G,zone_type:K.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"polygon",children:"Polygon"}),e.jsx("option",{value:"radius",children:"Radius"}),e.jsx("option",{value:"postal_code",children:"Postal Code"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_boundaries",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Boundaries (JSON) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"zone_boundaries",required:!0,value:m.zone_boundaries,onChange:K=>b(G=>({...G,zone_boundaries:K.target.value})),placeholder:'{"center": {"lat": 53.35, "lng": -6.26}, "radius": 5}',rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter zone boundaries as JSON. Example for radius: ",'{"center": {"lat": 53.35, "lng": -6.26}, "radius": 5}']})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"delivery_fee",className:"block text-sm font-medium text-gray-700 mb-2",children:["Delivery Fee () ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"delivery_fee",required:!0,value:m.delivery_fee,onChange:K=>b(G=>({...G,delivery_fee:K.target.value})),placeholder:"e.g., 3.50",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zone_minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value ()"}),e.jsx("input",{type:"number",id:"zone_minimum_order_value",value:m.minimum_order_value,onChange:K=>b(G=>({...G,minimum_order_value:K.target.value})),placeholder:"e.g., 20.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"estimated_delivery_time",className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Delivery Time (minutes) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"estimated_delivery_time",required:!0,value:m.estimated_delivery_time,onChange:K=>b(G=>({...G,estimated_delivery_time:K.target.value})),placeholder:"e.g., 30",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority (for overlapping zones)"}),e.jsx("input",{type:"number",id:"priority",value:m.priority,onChange:K=>b(G=>({...G,priority:K.target.value})),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority zones take precedence"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:K=>b(G=>({...G,is_active:K.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active Zone (available for delivery)"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),c(null),B()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D.isPending||S.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:D.isPending||S.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),o?"Updating...":"Creating..."]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),o?"Update Zone":"Create Zone"]})})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ce,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Delivery Zone"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this delivery zone? This action cannot be undone."}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>U(p),disabled:E.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Zone"})]})]})})]})})},Tk=async(t,s)=>{const r="https://123salama-lama-food-truck.launchpulse.ai",a=new URLSearchParams;t.status&&a.append("status",t.status),t.query&&a.append("query",t.query),a.append("limit",t.limit.toString()),a.append("offset",t.offset.toString()),a.append("sort_by",t.sort_by),a.append("sort_order",t.sort_order);const n=await W.get(`${r}/api/admin/discounts?${a.toString()}`,{headers:{Authorization:`Bearer ${s}`}});return{discount_codes:n.data.discount_codes||[],total:n.data.total||0}},Ak=async(t,s,r)=>{await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{status:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})},Mk=async(t,s)=>{await W.delete(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})},C0=(t,s)=>t==="percentage"?`${s}%`:t==="fixed"?`${s.toFixed(2)}`:t==="delivery_fee"?"Free Delivery":`${s.toFixed(2)}`,nd=t=>t?new Date(t).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}):"No expiry",S0=t=>{switch(t){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P0=t=>{switch(t){case"percentage":return"Percentage";case"fixed":return"Fixed Amount";case"delivery_fee":return"Free Delivery";default:return t}},Lk=()=>{const t=X(L=>L.authentication_state.auth_token),[s,r]=Xe(),[a,n]=x.useState(s.get("status")||null),[i,l]=x.useState(""),[o,c]=x.useState([]),[d]=x.useState("created_at"),[u]=x.useState("desc"),[m,b]=x.useState({limit:50,offset:0,total:0}),[p,g]=x.useState(!1),[h,N]=x.useState(null),[j,y]=x.useState(null),f=Fe(),{data:k,isLoading:T,isError:M,error:P,refetch:_}=le({queryKey:["admin-discount-codes",a,i,m.limit,m.offset,d,u],queryFn:()=>Tk({status:a,query:i,limit:m.limit,offset:m.offset,sort_by:d,sort_order:u},t||""),enabled:!!t,staleTime:6e4});x.useEffect(()=>{k&&b(L=>({...L,total:k.total}))},[k]);const F=ie({mutationFn:({code_id:L,status:U})=>Ak(L,U,t||""),onSuccess:()=>{f.invalidateQueries({queryKey:["admin-discount-codes"]})}}),v=ie({mutationFn:L=>Mk(L,t||""),onSuccess:()=>{f.invalidateQueries({queryKey:["admin-discount-codes"]}),g(!1),N(null)}}),O=L=>{n(L),b(Y=>({...Y,offset:0}));const U=new URLSearchParams(s);L?U.set("status",L):U.delete("status"),r(U)},R=L=>{l(L.target.value),b(U=>({...U,offset:0}))},C=L=>{const U=L.status==="active"?"inactive":"active";F.mutate({code_id:L.code_id,status:U})},z=L=>{N(L),g(!0)},D=()=>{h&&v.mutate(h.code_id)},S=L=>{navigator.clipboard.writeText(L),y(L),setTimeout(()=>y(null),2e3)},E=L=>{L.target.checked&&k?c(k.discount_codes.map(U=>U.code_id)):c([])},w=L=>{c(U=>U.includes(L)?U.filter(Y=>Y!==L):[...U,L])},$=L=>{b(U=>({...U,offset:L}))},B=x.useMemo(()=>(k==null?void 0:k.discount_codes)||[],[k]),I=x.useMemo(()=>Math.ceil(m.total/m.limit),[m.total,m.limit]),q=x.useMemo(()=>Math.floor(m.offset/m.limit)+1,[m.offset,m.limit]),A=[{label:"All",value:null},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Expired",value:"expired"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Discount Codes"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage promotional codes and track campaign performance"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs(H,{to:"/admin/discounts/code",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Discount Code"]})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:A.map(L=>e.jsx("button",{onClick:()=>O(L.value),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${a===L.value?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:L.label},L.label))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search discount codes...",value:i,onChange:R,className:"w-full px-4 py-3 pl-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"}),e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:T?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading discount codes..."})]})}):M?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load discount codes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:P instanceof Error?P.message:"An error occurred"}),e.jsx("button",{onClick:()=>_(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Try Again"})]})}):B.length===0?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i||a?"No discount codes found":"No discount codes yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i||a?"Try adjusting your filters or search term":"Create your first discount code to start promoting your business"}),!i&&!a&&e.jsxs(H,{to:"/admin/discounts/code",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Discount Code"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:o.length===B.length,onChange:E,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type & Value"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Min Order"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Validity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:o.includes(L.code_id),onChange:()=>w(L.code_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:L.code}),e.jsx("button",{onClick:()=>S(L.code),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Copy code",children:j===L.code?e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C0(L.discount_type,L.discount_value)}),e.jsx("div",{className:"text-xs text-gray-500",children:P0(L.discount_type)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.minimum_order_value?`${L.minimum_order_value.toFixed(2)}`:"None"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[L.total_used_count," ",L.total_usage_limit?`/ ${L.total_usage_limit}`:""]}),e.jsx("div",{className:"text-xs text-gray-500",children:L.total_usage_limit?"uses":"unlimited"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{children:nd(L.valid_from)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["to ",nd(L.valid_until)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${S0(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(H,{to:`/admin/discounts/code?code_id=${L.code_id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(H,{to:`/admin/discounts/${L.code_id}/usage`,className:"text-gray-600 hover:text-gray-900 transition-colors",title:"View Usage",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),L.status!=="expired"&&e.jsx("button",{onClick:()=>C(L),disabled:F.isPending,className:`${L.status==="active"?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"} transition-colors disabled:opacity-50`,title:L.status==="active"?"Deactivate":"Activate",children:F.isPending?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}):L.status==="active"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx("button",{onClick:()=>z(L),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},L.code_id))})]})}),e.jsx("div",{className:"lg:hidden",children:B.map(L=>e.jsxs("div",{className:"border-b border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:o.includes(L.code_id),onChange:()=>w(L.code_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold text-gray-900",children:L.code}),e.jsx("button",{onClick:()=>S(L.code),className:"text-gray-400 hover:text-blue-600 transition-colors",children:j===L.code?e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),e.jsx("span",{className:`inline-flex items-center mt-1 px-2 py-0.5 rounded-full text-xs font-medium border ${S0(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{to:`/admin/discounts/code?code_id=${L.code_id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>z(L),className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Discount:"}),e.jsx("div",{className:"font-medium text-gray-900",children:C0(L.discount_type,L.discount_value)}),e.jsx("div",{className:"text-xs text-gray-500",children:P0(L.discount_type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Usage:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:[L.total_used_count," ",L.total_usage_limit?`/ ${L.total_usage_limit}`:""]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Min Order:"}),e.jsx("div",{className:"font-medium text-gray-900",children:L.minimum_order_value?`${L.minimum_order_value.toFixed(2)}`:"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Valid Until:"}),e.jsx("div",{className:"font-medium text-gray-900",children:nd(L.valid_until)})]})]})]},L.code_id))}),I>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:m.offset+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(m.offset+m.limit,m.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:m.total})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(Math.max(0,m.offset-m.limit)),disabled:q===1,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",q," of ",I]}),e.jsx("button",{onClick:()=>$(m.offset+m.limit),disabled:q===I,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})})]})}),p&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Delete Discount Code"}),e.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete the discount code ",e.jsx("strong",{children:h.code}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),N(null)},className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:v.isPending,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete"})]})]})})]})},$k=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,Rk=async t=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/menu/categories",{headers:{Authorization:`Bearer ${t}`}})).data.categories||[],Ok=async(t,s)=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,Dk=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,Ik=()=>{const t=je(),[s]=Xe(),r=s.get("code_id"),a=X(v=>v.authentication_state.auth_token),[n,i]=x.useState({code:"",discount_type:"percentage",discount_value:"",applicable_order_types:[],applicable_category_ids:[],minimum_order_value:"",total_usage_limit:"",per_customer_usage_limit:"",valid_from:new Date().toISOString().slice(0,16),valid_until:"",status:"active",internal_notes:""}),[l,o]=x.useState({}),[c,d]=x.useState(!1),[u,m]=x.useState(null),b=!!r,{data:p,isLoading:g,error:h}=le({queryKey:["admin-discount-code",r],queryFn:()=>$k(r,a),enabled:!!r&&!!a,staleTime:0}),{data:N=[],isLoading:j}=le({queryKey:["admin-categories"],queryFn:()=>Rk(a),enabled:!!a,staleTime:5*60*1e3}),y=ie({mutationFn:v=>Ok(v,a),onSuccess:()=>{t("/admin/discounts",{state:{successMessage:"Discount code created successfully!"}})},onError:v=>{var R,C;const O=((C=(R=v.response)==null?void 0:R.data)==null?void 0:C.message)||v.message||"Failed to create discount code";m(O)}}),f=ie({mutationFn:v=>Dk(r,v,a),onSuccess:()=>{t("/admin/discounts",{state:{successMessage:"Discount code updated successfully!"}})},onError:v=>{var R,C;const O=((C=(R=v.response)==null?void 0:R.data)==null?void 0:C.message)||v.message||"Failed to update discount code";m(O)}});x.useEffect(()=>{var v,O,R,C;p&&b&&i({code:p.code,discount_type:p.discount_type,discount_value:p.discount_value.toString(),applicable_order_types:p.applicable_order_types||[],applicable_category_ids:p.applicable_category_ids||[],minimum_order_value:((v=p.minimum_order_value)==null?void 0:v.toString())||"",total_usage_limit:((O=p.total_usage_limit)==null?void 0:O.toString())||"",per_customer_usage_limit:((R=p.per_customer_usage_limit)==null?void 0:R.toString())||"",valid_from:p.valid_from.slice(0,16),valid_until:((C=p.valid_until)==null?void 0:C.slice(0,16))||"",status:p.status,internal_notes:p.internal_notes||""})},[p,b]);const k=()=>{d(!0);const v="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",O=8;let R="PROMO";for(let C=0;C<O;C++)R+=v.charAt(Math.floor(Math.random()*v.length));i(C=>({...C,code:R})),o(C=>({...C,code:""})),setTimeout(()=>d(!1),300)},T=v=>{const{name:O,value:R}=v.target;i(C=>({...C,[O]:R})),l[O]&&o(C=>({...C,[O]:""})),u&&m(null)},M=(v,O,R)=>{i(C=>{const z=C[v],D=R?[...z,O]:z.filter(S=>S!==O);return{...C,[v]:D}}),l[v]&&o(C=>({...C,[v]:""}))},P=()=>{const v={};if(n.code.trim()?/^[A-Z0-9]+$/.test(n.code)?(n.code.length<4||n.code.length>50)&&(v.code="Code must be between 4 and 50 characters"):v.code="Code must be uppercase alphanumeric characters only":v.code="Discount code is required",!n.discount_value)v.discount_value="Discount value is required";else{const O=parseFloat(n.discount_value);isNaN(O)||O<=0?v.discount_value="Discount value must be a positive number":n.discount_type==="percentage"&&(O<1||O>100)&&(v.discount_value="Percentage must be between 1 and 100")}if(n.valid_from||(v.valid_from="Start date is required"),n.valid_until&&n.valid_from){const O=new Date(n.valid_from);new Date(n.valid_until)<=O&&(v.valid_until="End date must be after start date")}return n.minimum_order_value&&parseFloat(n.minimum_order_value)<0&&(v.minimum_order_value="Minimum order value cannot be negative"),n.total_usage_limit&&parseInt(n.total_usage_limit)<1&&(v.total_usage_limit="Total usage limit must be at least 1"),n.per_customer_usage_limit&&parseInt(n.per_customer_usage_limit)<1&&(v.per_customer_usage_limit="Per-customer limit must be at least 1"),o(v),Object.keys(v).length===0},_=async v=>{if(v.preventDefault(),m(null),!P())return;const O=parseFloat(n.discount_value);if(b){const R={discount_value:O,minimum_order_value:n.minimum_order_value?parseFloat(n.minimum_order_value):null,total_usage_limit:n.total_usage_limit?parseInt(n.total_usage_limit):null,per_customer_usage_limit:n.per_customer_usage_limit?parseInt(n.per_customer_usage_limit):null,valid_until:n.valid_until||null,status:n.status,internal_notes:n.internal_notes||null};f.mutate(R)}else{const R={code:n.code.toUpperCase(),discount_type:n.discount_type,discount_value:O,applicable_order_types:n.applicable_order_types.length>0?n.applicable_order_types:null,applicable_category_ids:n.applicable_category_ids.length>0?n.applicable_category_ids:null,minimum_order_value:n.minimum_order_value?parseFloat(n.minimum_order_value):null,total_usage_limit:n.total_usage_limit?parseInt(n.total_usage_limit):null,per_customer_usage_limit:n.per_customer_usage_limit?parseInt(n.per_customer_usage_limit):null,valid_from:n.valid_from,valid_until:n.valid_until||null,status:n.status,internal_notes:n.internal_notes||null};y.mutate(R)}},F=g||y.isPending||f.isPending;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[e.jsx(H,{to:"/admin/dashboard",className:"hover:text-orange-600 transition-colors",children:"Dashboard"}),e.jsx("span",{children:"/"}),e.jsx(H,{to:"/admin/discounts",className:"hover:text-orange-600 transition-colors",children:"Discount Codes"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 font-medium",children:b?"Edit Code":"Create Code"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:b?"Edit Discount Code":"Create Discount Code"}),e.jsx(H,{to:"/admin/discounts",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:" Back to Discounts"})]})]}),h&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:"Failed to load discount code. Please try again."})}),u&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:u})}),g?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})}):e.jsxs("form",{onSubmit:_,className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",id:"code",name:"code",value:n.code,onChange:T,disabled:b,placeholder:"Enter code or generate",className:`flex-1 px-4 py-3 border rounded-lg font-mono uppercase focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.code?"border-red-300 bg-red-50":"border-gray-300"} ${b?"bg-gray-100 cursor-not-allowed":""}`}),!b&&e.jsx("button",{type:"button",onClick:k,disabled:c,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Generating..."})]}):e.jsx("span",{children:"Generate Code"})})]}),l.code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.code}),b&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Code cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"discount_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"discount_type",name:"discount_type",value:n.discount_type,onChange:T,disabled:b,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${b?"bg-gray-100 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"percentage",children:"Percentage Off"}),e.jsx("option",{value:"fixed",children:"Fixed Amount Off"}),e.jsx("option",{value:"delivery_fee",children:"Free Delivery"})]}),b&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"discount_value",className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[n.discount_type==="percentage"&&e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500",children:"%"}),n.discount_type==="fixed"&&e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",id:"discount_value",name:"discount_value",value:n.discount_value,onChange:T,disabled:n.discount_type==="delivery_fee",placeholder:n.discount_type==="percentage"?"10":"5.00",step:n.discount_type==="percentage"?"1":"0.01",min:"0",max:n.discount_type==="percentage"?"100":void 0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${n.discount_type==="fixed"?"pl-10":""} ${l.discount_value?"border-red-300 bg-red-50":"border-gray-300"} ${n.discount_type==="delivery_fee"?"bg-gray-100 cursor-not-allowed":""}`})]}),l.discount_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.discount_value}),n.discount_type==="delivery_fee"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Delivery fee will be waived"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Applicability Rules"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Leave empty to apply discount to all orders and items"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Applicable Order Types"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.applicable_order_types.includes("collection"),onChange:v=>M("applicable_order_types","collection",v.target.checked),disabled:b,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Collection Orders"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.applicable_order_types.includes("delivery"),onChange:v=>M("applicable_order_types","delivery",v.target.checked),disabled:b,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Delivery Orders"})]})]}),b&&e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Order type restrictions cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Applicable Categories"}),j?e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:N.map(v=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.applicable_category_ids.includes(v.category_id),onChange:O=>M("applicable_category_ids",v.category_id,O.target.checked),disabled:b,className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:v.name})]},v.category_id))}),b&&e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Category restrictions cannot be changed when editing"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Usage Constraints"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",id:"minimum_order_value",name:"minimum_order_value",value:n.minimum_order_value,onChange:T,placeholder:"0.00",step:"0.01",min:"0",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.minimum_order_value?"border-red-300 bg-red-50":"border-gray-300"}`})]}),l.minimum_order_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.minimum_order_value}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty for no minimum"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"total_usage_limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Usage Limit"}),e.jsx("input",{type:"number",id:"total_usage_limit",name:"total_usage_limit",value:n.total_usage_limit,onChange:T,placeholder:"Unlimited",min:"1",step:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.total_usage_limit?"border-red-300 bg-red-50":"border-gray-300"}`}),l.total_usage_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.total_usage_limit}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum total redemptions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"per_customer_usage_limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Per-Customer Limit"}),e.jsx("input",{type:"number",id:"per_customer_usage_limit",name:"per_customer_usage_limit",value:n.per_customer_usage_limit,onChange:T,placeholder:"Unlimited",min:"1",step:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.per_customer_usage_limit?"border-red-300 bg-red-50":"border-gray-300"}`}),l.per_customer_usage_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.per_customer_usage_limit}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Uses per customer"})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Validity Period"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"valid_from",className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",id:"valid_from",name:"valid_from",value:n.valid_from,onChange:T,disabled:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.valid_from?"border-red-300 bg-red-50":"border-gray-300"} ${b?"bg-gray-100 cursor-not-allowed":""}`}),l.valid_from&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.valid_from}),b&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Start date cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"valid_until",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",id:"valid_until",name:"valid_until",value:n.valid_until,onChange:T,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.valid_until?"border-red-300 bg-red-50":"border-gray-300"}`}),l.valid_until&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.valid_until}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty for no expiration"})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status & Notes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"status",name:"status",value:n.status,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"expired",children:"Expired"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Active codes can be used, inactive codes are disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"internal_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes"}),e.jsx("textarea",{id:"internal_notes",name:"internal_notes",value:n.internal_notes,onChange:T,rows:4,placeholder:"Add notes for internal reference (not visible to customers)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"These notes are only visible to administrators"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsx(H,{to:"/admin/discounts",className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F,className:"px-8 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:F?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:b?"Updating...":"Creating..."})]}):e.jsx("span",{children:b?"Update Discount Code":"Create Discount Code"})})]})]})]})})})},qk=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,zk=async(t,s,r)=>{const a=new URLSearchParams;r!=null&&r.from&&a.append("date_from",r.from),r!=null&&r.to&&a.append("date_to",r.to);const n=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/discounts/${t}/usage${a.toString()?"?"+a.toString():""}`,{headers:{Authorization:`Bearer ${s}`}}),i=n.data.total_usage_limit,l=i?i-n.data.total_uses:null;return{usage_analytics:{total_uses:n.data.total_uses||0,total_discount_given:Number(n.data.total_discount_given||0),remaining_uses:l,conversion_rate:Number(n.data.conversion_rate||0),average_order_value:Number(n.data.average_order_value||0)},usage_details:(n.data.usage_details||[]).map(o=>({usage_id:o.usage_id,order_id:o.order_id,user_id:o.user_id,discount_amount_applied:Number(o.discount_amount_applied||0),used_at:o.used_at,customer_email:o.customer_email||"",order_total:Number(o.order_total||0)}))}},ai=t=>`${t.toFixed(2)}`,E0=t=>new Date(t).toLocaleDateString("en-IE",{day:"2-digit",month:"short",year:"numeric"}),Ey=t=>new Date(t).toLocaleString("en-IE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Bk=(t,s)=>{const r=["Date/Time","Order ID","Customer Email","Discount Applied ()","Order Total ()"],a=t.map(c=>[Ey(c.used_at),c.order_id,c.customer_email,c.discount_amount_applied.toFixed(2),c.order_total.toFixed(2)]),n=[[`Discount Code: ${s.code}`],[`Export Date: ${new Date().toLocaleDateString("en-IE")}`],[],r,...a].map(c=>c.join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(i);l.setAttribute("href",o),l.setAttribute("download",`discount_${s.code}_usage_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},Uk=()=>{const{code_id:t}=Jt(),s=je(),r=X(_=>_.authentication_state.auth_token),a=X(_=>_.authentication_state.current_user),[n,i]=x.useState({from:null,to:null}),[l,o]=x.useState({from:null,to:null}),[c,d]=x.useState(!1);ia.useEffect(()=>{(!r||(a==null?void 0:a.role)!=="admin")&&s("/admin/login")},[r,a,s]);const{data:u,isLoading:m,isError:b,error:p}=le({queryKey:["admin-discount-code",t],queryFn:()=>qk(t,r),enabled:!!t&&!!r,staleTime:5*60*1e3}),{data:g,isLoading:h,isError:N,error:j}=le({queryKey:["admin-discount-usage",t,n],queryFn:()=>zk(t,r,n),enabled:!!t&&!!r,staleTime:2*60*1e3}),y=m||h;if(b||N)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(ce,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(p==null?void 0:p.message)||(j==null?void 0:j.message)||"Failed to load discount code analytics"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/admin/discounts"),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium transition-colors",children:"Back to Discounts"}),e.jsx("button",{onClick:()=>{window.location.reload()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Retry"})]})]})})})});const f=()=>{u&&(navigator.clipboard.writeText(u.code),d(!0),setTimeout(()=>d(!1),2e3))},k=()=>{i(l)},T=()=>{o({from:null,to:null}),i({from:null,to:null})},M=()=>{u&&(g!=null&&g.usage_details)&&Bk(g.usage_details,u)},P=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{to:"/admin/discounts",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Discount Code Analytics"}),u&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Performance insights for ",e.jsx("span",{className:"font-semibold",children:u.code})]})]})]}),e.jsxs("button",{onClick:M,disabled:!(g!=null&&g.usage_details)||g.usage_details.length===0,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qt,{className:"h-5 w-5"}),e.jsx("span",{children:"Export CSV"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(_=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"})]},_))})]}):e.jsxs(e.Fragment,{children:[u&&e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Code Details"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${P(u.status)}`,children:u.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Discount Code"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"text-2xl font-mono font-bold text-blue-600 bg-white px-4 py-2 rounded-lg",children:u.code}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-white/50 rounded-lg transition-colors",title:"Copy code",children:c?e.jsx(qe,{className:"h-5 w-5 text-green-600"}):e.jsx(Hm,{className:"h-5 w-5 text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Discount Type & Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:u.discount_type==="percentage"?`${u.discount_value}% OFF`:u.discount_type==="fixed"?`${u.discount_value.toFixed(2)} OFF`:"Free Delivery"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Minimum Order Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:u.minimum_order_value?ai(u.minimum_order_value):"None"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valid From"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:E0(u.valid_from)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valid Until"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.valid_until?E0(u.valid_until):"No expiry"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Usage Limit"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.total_usage_limit?`${u.total_used_count} / ${u.total_usage_limit}`:"Unlimited"})]})]})]})})}),g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Hr,{className:"h-6 w-6 text-blue-600"})}),g.usage_analytics.total_uses>0&&e.jsxs("span",{className:"text-green-600 text-sm font-semibold flex items-center",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),"Active"]})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Uses"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g.usage_analytics.total_uses.toLocaleString()}),(u==null?void 0:u.total_usage_limit)&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",u.total_usage_limit.toLocaleString()," limit"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Tr,{className:"h-6 w-6 text-green-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Discount Given"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ai(g.usage_analytics.total_discount_given)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Savings for customers"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Mo,{className:"h-6 w-6 text-purple-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Remaining Uses"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g.usage_analytics.remaining_uses!==null?g.usage_analytics.remaining_uses.toLocaleString():""}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.usage_analytics.remaining_uses!==null?"Left before limit":"Unlimited"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Qt,{className:"h-6 w-6 text-orange-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Average Order Value"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ai(g.usage_analytics.average_order_value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"With this code"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(cr,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filter by Date Range"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx("input",{type:"date",value:l.from||"",onChange:_=>o({...l,from:_.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx("input",{type:"date",value:l.to||"",onChange:_=>o({...l,to:_.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Apply"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg text-sm font-medium transition-colors",children:"Clear"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_s,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Usage Details"})]}),(g==null?void 0:g.usage_details)&&e.jsxs("span",{className:"text-sm text-gray-600",children:[g.usage_details.length," ",g.usage_details.length===1?"use":"uses"]})]})}),g!=null&&g.usage_details&&g.usage_details.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.usage_details.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ey(_.used_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx(H,{to:`/admin/orders/${_.order_id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:_.order_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx(H,{to:`/admin/customers/${_.user_id}`,className:"text-blue-600 hover:text-blue-800",children:_.customer_email})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["-",ai(_.discount_amount_applied)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ai(_.order_total)})]},_.usage_id))})]})}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(_s,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Usage Data"}),e.jsxs("p",{className:"text-gray-600",children:["This discount code hasn't been used yet",n.from||n.to?" in the selected date range":"","."]})]})]})]})})]})})},Vk=()=>{const t=X(J=>J.authentication_state.auth_token),[s,r]=Xe(),a=je(),[n,i]=x.useState(s.get("search")||""),[l,o]=x.useState(s.get("registration_date")||"all_time"),[c,d]=x.useState(s.get("total_orders")||"all"),[u]=x.useState(parseInt(s.get("limit")||"50",10)),[m,b]=x.useState(parseInt(s.get("offset")||"0",10)),[p,g]=x.useState([]),[h,N]=x.useState(n);x.useEffect(()=>{const J=setTimeout(()=>{N(n)},500);return()=>clearTimeout(J)},[n]),x.useEffect(()=>{const J=new URLSearchParams;h&&J.set("search",h),l!=="all_time"&&J.set("registration_date",l),c!=="all"&&J.set("total_orders",c),J.set("limit",u.toString()),J.set("offset",m.toString()),r(J,{replace:!0})},[h,l,c,u,m,r]);const j=async()=>{const J=new URLSearchParams;h&&J.append("search",h),l!=="all_time"&&J.append("registration_date",l),c!=="all"&&J.append("total_orders",c),J.append("limit",u.toString()),J.append("offset",m.toString());const xe=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/customers?${J.toString()}`,{headers:{Authorization:`Bearer ${t}`}});return{customers_list:xe.data.customers.map(he=>{var se,ye,Ps;return{user_id:he.user_id,email:he.email,first_name:he.first_name,last_name:he.last_name,phone:he.phone,created_at:he.created_at,total_orders:((se=he.stats)==null?void 0:se.total_orders)||0,total_spend:((ye=he.stats)==null?void 0:ye.total_spent)||0,current_points_balance:((Ps=he.loyalty_account)==null?void 0:Ps.current_points_balance)||0,status:he.status}}),total_customers_count:xe.data.total}},{data:y={customers_list:[],total_customers_count:0},isLoading:f,isError:k,error:T,refetch:M}=le({queryKey:["admin","customers",s.toString()],queryFn:j,staleTime:6e4,refetchOnWindowFocus:!1,placeholderData:J=>J}),P=y.customers_list,_=y.total_customers_count,F=x.useCallback(J=>{i(J.target.value),b(0)},[]),v=x.useCallback(J=>{o(J.target.value),b(0)},[]),O=x.useCallback(J=>{d(J.target.value),b(0)},[]),R=x.useCallback(J=>{g(xe=>xe.includes(J)?xe.filter(ke=>ke!==J):[...xe,J])},[]),C=x.useCallback(()=>{p.length===P.length&&P.length>0?g([]):g(P.map(J=>J.user_id))},[P,p.length]),z=x.useCallback(J=>p.includes(J),[p]),D=P.length>0&&p.length===P.length,S=p.length>0&&p.length<P.length,E=x.useCallback(()=>{m>0&&b(J=>Math.max(0,J-u))},[m,u]),w=x.useCallback(()=>{m+u<_&&b(J=>J+u)},[m,u,_]),$=x.useCallback(J=>{b((J-1)*u)},[u]),B=x.useCallback(async()=>{try{const J=new URLSearchParams;h&&J.append("query",h),l!=="all_time"&&J.append("registration_date",l),c!=="all"&&J.append("total_orders",c),J.append("format","csv");const xe=await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/customers/export?${J.toString()}`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),ke=new Blob([xe.data],{type:"text/csv"}),he=window.URL.createObjectURL(ke),se=document.createElement("a");se.href=he,se.download=`customers-export-${new Date().toISOString().split("T")[0]}.csv`,se.click(),window.URL.revokeObjectURL(he)}catch(J){console.error("Export failed:",J),alert("Failed to export customer data. Please try again.")}},[t,h,l,c]),I=x.useCallback(J=>{a(`/admin/customers/${J}`)},[a]),q=J=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(J),A=J=>new Date(J).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),L=J=>{switch(J){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"suspended":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},U=Math.floor(m/u)+1,Y=Math.ceil(_/u),Q=m>0,K=m+u<_,G=()=>{const J=[];if(Y<=5)for(let ke=1;ke<=Y;ke++)J.push(ke);else if(U<=3){for(let ke=1;ke<=4;ke++)J.push(ke);J.push(-1),J.push(Y)}else if(U>=Y-2){J.push(1),J.push(-1);for(let ke=Y-3;ke<=Y;ke++)J.push(ke)}else J.push(1),J.push(-1),J.push(U-1),J.push(U),J.push(U+1),J.push(-1),J.push(Y);return J};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customer Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage customer relationships, view profiles, and track loyalty status"})]}),e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100 shadow-md",children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Export CSV"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Customers"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Us,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"search",value:n,onChange:F,placeholder:"Name, email, or phone...",className:"block w-full pl-10 pr-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"registration_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Date"}),e.jsxs("select",{id:"registration_date",value:l,onChange:v,className:"block w-full px-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"all_time",children:"All Time"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_90_days",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"total_orders",className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Count"}),e.jsxs("select",{id:"total_orders",value:c,onChange:O,className:"block w-full px-3 py-2.5 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-white",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"more_than_10",children:"10+ Orders"}),e.jsx("option",{value:"more_than_50",children:"50+ Orders"})]})]})]})}),e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yx,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Customers:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:_})]}),p.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[p.length," customer",p.length!==1?"s":""," selected"]})})]})}),f&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading customers..."})]})}),k&&e.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customers"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:T instanceof Error?T.message:"An error occurred"}),e.jsx("button",{onClick:()=>M(),className:"mt-3 inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})]})}),!f&&!k&&P.length===0&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Yx,{className:"mx-auto h-16 w-16 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No customers found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:h||l!=="all_time"||c!=="all"?"Try adjusting your filters to see more results.":"No customers have registered yet."})]})}),!f&&!k&&P.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:D,ref:J=>{J&&(J.indeterminate=S)},onChange:C,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total Spend"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Loyalty Points"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(J=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:z(J.user_id),onChange:()=>R(J.user_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold",children:[J.first_name.charAt(0),J.last_name.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("button",{onClick:()=>I(J.user_id),className:"text-sm font-medium text-blue-600 hover:text-blue-800 focus:outline-none focus:underline transition-colors",children:[J.first_name," ",J.last_name]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Joined ",A(J.created_at)]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(lt,{className:"w-4 h-4 mr-2 text-gray-400"}),J.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(zt,{className:"w-4 h-4 mr-2 text-gray-400"}),J.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:J.total_orders})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(wt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:q(J.total_spend)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(or,{className:"w-4 h-4 mr-2 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:J.current_points_balance})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${L(J.status)}`,children:J.status.charAt(0).toUpperCase()+J.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(H,{to:`/admin/customers/${J.user_id}`,className:"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:["View Details",e.jsx(ma,{className:"w-4 h-4 ml-1"})]})})]},J.user_id))})]})})}),Y>1&&e.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:m+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(m+u,_)})," ","of ",e.jsx("span",{className:"font-medium",children:_})," customers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:E,disabled:!Q,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Bi,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"hidden sm:flex items-center space-x-1",children:G().map((J,xe)=>J===-1?e.jsx("span",{className:"px-3 py-2 text-gray-500",children:"..."},`ellipsis-${xe}`):e.jsx("button",{onClick:()=>$(J),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${U===J?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:J},J))}),e.jsxs("button",{onClick:w,disabled:!K,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx($e,{className:"w-4 h-4 ml-1"})]})]})]})})]})]})]})})},Wk=()=>{const{customer_id:t}=Jt(),s=je(),r=Fe(),a=X(se=>se.authentication_state.auth_token),[n,i]=x.useState(!1),[l,o]=x.useState({}),[c,d]=x.useState(!1),[u,m]=x.useState(""),[b,p]=x.useState(""),[g,h]=x.useState(!1),[N,j]=x.useState(null),[y,f]=x.useState(""),[k,T]=x.useState(!1),[M,P]=x.useState(""),_="https://123salama-lama-food-truck.launchpulse.ai",{data:F,isLoading:v,error:O}=le({queryKey:["admin","customer",t],queryFn:async()=>(await W.get(`${_}/api/admin/customers/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data,enabled:!!t&&!!a,staleTime:3e4,refetchOnWindowFocus:!0}),R=ie({mutationFn:async se=>(await W.put(`${_}/api/admin/customers/${t}`,se,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:se=>{r.setQueryData(["admin","customer",t],ye=>ye&&{...ye,user:se}),i(!1),o({})}}),C=ie({mutationFn:async se=>(await W.post(`${_}/api/admin/customers/${t}/adjust-points`,se,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:se=>{r.setQueryData(["admin","customer",t],ye=>ye&&{...ye,loyalty_account:se}),d(!1),m(""),p(""),r.invalidateQueries({queryKey:["admin","customer",t]})}}),z=ie({mutationFn:async se=>(await W.put(`${_}/api/admin/customers/${t}/status`,se,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:se=>{r.setQueryData(["admin","customer",t],ye=>ye&&{...ye,user:{...ye.user,status:se.status}}),h(!1),j(null),f("")}}),D=ie({mutationFn:async()=>(await W.delete(`${_}/api/admin/customers/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s("/admin/customers")}}),S=()=>{n?o({}):F!=null&&F.user&&o({first_name:F.user.first_name,last_name:F.user.last_name,email:F.user.email,phone:F.user.phone}),i(!n)},E=()=>{l.first_name&&l.last_name&&l.email&&l.phone&&R.mutate({first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone})},w=()=>{const se=parseInt(u);!isNaN(se)&&b.trim()&&C.mutate({points_amount:se,reason:b.trim()})},$=()=>{N&&y.trim()&&z.mutate({status:N==="activate"?"active":"suspended",reason:y.trim()})},B=()=>{M==="DELETE"&&D.mutate()},I=se=>{j(se),h(!0)},q=se=>new Date(se).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),A=se=>`${Number(se).toFixed(2)}`,L=se=>{const ye={active:"bg-green-100 text-green-800 border-green-200",suspended:"bg-red-100 text-red-800 border-red-200",inactive:"bg-gray-100 text-gray-800 border-gray-200"};return ye[se]||ye.inactive},U=se=>({completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",received:"bg-blue-100 text-blue-800",preparing:"bg-yellow-100 text-yellow-800",ready:"bg-purple-100 text-purple-800"})[se]||"bg-gray-100 text-gray-800";if(v)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading customer profile..."})]})})});if(O||!F)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(Kt,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Customer Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load customer profile. The customer may not exist or you may not have permission."}),e.jsxs(H,{to:"/admin/customers",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Customers"]})]})})});const{user:Y,loyalty_account:Q,recent_orders:K,recent_points_transactions:G,catering_inquiries:J,total_orders:xe,total_spend:ke,average_order_value:he}=F;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(H,{to:"/admin/customers",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Customers"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[Y.first_name," ",Y.last_name]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Customer ID: ",Y.user_id]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${L(Y.status)}`,children:Y.status.charAt(0).toUpperCase()+Y.status.slice(1)}),Y.status==="active"&&e.jsx("button",{onClick:()=>I("suspend"),className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Suspend Account"}),Y.status==="suspended"&&e.jsx("button",{onClick:()=>I("activate"),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"Activate Account"}),e.jsx("button",{onClick:()=>T(!0),className:"p-2 bg-gray-100 text-red-600 rounded-lg hover:bg-red-50 transition-colors",title:"Delete Account",children:e.jsx(It,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:xe})]}),e.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:e.jsx(Dt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spend"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:A(ke)})]}),e.jsx("div",{className:"bg-green-100 rounded-full p-3",children:e.jsx(Tr,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Order Value"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:A(he)})]}),e.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:e.jsx(wt,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile"}),e.jsx("button",{onClick:S,className:"p-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors",children:n?e.jsx(_e,{className:"w-5 h-5 text-white"}):e.jsx(by,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[Y.profile_photo_url?e.jsx("img",{src:Y.profile_photo_url,alt:`${Y.first_name} ${Y.last_name}`,className:"w-24 h-24 rounded-full object-cover border-4 border-orange-100"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-orange-100 flex items-center justify-center border-4 border-orange-200",children:e.jsx(At,{className:"w-12 h-12 text-orange-600"})}),Y.email_verified&&e.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 rounded-full p-1",children:e.jsx(we,{className:"w-5 h-5 text-white"})})]})}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:l.first_name||"",onChange:se=>o({...l,first_name:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:l.last_name||"",onChange:se=>o({...l,last_name:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l.email||"",onChange:se=>o({...l,email:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone||"",onChange:se=>o({...l,phone:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsx("button",{onClick:E,disabled:R.isPending,className:"w-full flex items-center justify-center px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(lt,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y.email})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(zt,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y.phone})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(cr,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:q(Y.created_at)})]})]}),Y.last_login_at&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Le,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Login"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:q(Y.last_login_at)})]})]}),Y.dietary_preferences&&Y.dietary_preferences.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Dietary Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y.dietary_preferences.map((se,ye)=>e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:se},ye))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Marketing Opt-in"}),e.jsx("span",{className:`text-sm font-medium ${Y.marketing_opt_in?"text-green-600":"text-gray-400"}`,children:Y.marketing_opt_in?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email Verified"}),e.jsx("span",{className:`text-sm font-medium ${Y.email_verified?"text-green-600":"text-red-600"}`,children:Y.email_verified?"Yes":"No"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:"Loyalty Account"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-purple-100 rounded-full mb-3",children:e.jsx(or,{className:"w-10 h-10 text-purple-600"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Points Balance"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:Q.current_points_balance.toLocaleString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Earned"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:Q.total_points_earned.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Redeemed"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:Q.total_points_redeemed.toLocaleString()})]})]}),Y.referral_code&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Referral Code"}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:Y.referral_code})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Hr,{className:"w-4 h-4 mr-1"}),Q.referral_count," successful referrals"]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:[e.jsx(Fn,{className:"w-5 h-5 mr-2"}),"Adjust Points"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"}),e.jsx(H,{to:`/admin/orders?customer_id=${Y.user_id}`,className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:K.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(se=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(H,{to:`/admin/orders/${se.order_id}`,className:"text-sm font-medium text-orange-600 hover:text-orange-700",children:se.order_number})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:se.order_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(se.status)}`,children:se.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A(se.total_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(se.created_at)})]},se.order_id))})]}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No orders yet"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Points Transaction History"})}),e.jsx("div",{className:"overflow-x-auto",children:G.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(se=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:se.transaction_type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-medium ${se.points_amount>=0?"text-green-600":"text-red-600"}`,children:[se.points_amount>=0?"+":"",se.points_amount]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:se.reason||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:se.running_balance}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(se.created_at)})]},se.transaction_id))})]}):e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No transactions yet"})]})})]}),J.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Catering Inquiries"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:J.map(se=>e.jsxs(H,{to:`/admin/catering/${se.inquiry_id}`,className:"flex items-center justify-between px-6 py-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:se.inquiry_number}),e.jsxs("p",{className:"text-sm text-gray-900 capitalize",children:[se.event_type," - ",se.guest_count," guests"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:q(se.event_date)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U(se.status)}`,children:se.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:q(se.submitted_at)})]})]},se.inquiry_id))})]})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Adjust Loyalty Points"}),e.jsx("button",{onClick:()=>{d(!1),m(""),p("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Q.current_points_balance})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Points Amount ",e.jsx("span",{className:"text-gray-500",children:"(use negative for deduction)"})]}),e.jsx("input",{type:"number",value:u,onChange:se=>m(se.target.value),placeholder:"e.g., 100 or -50",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsxs("select",{value:b,onChange:se=>p(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 mb-2",children:[e.jsx("option",{value:"",children:"Select reason..."}),e.jsx("option",{value:"Compensation for service issue",children:"Compensation for service issue"}),e.jsx("option",{value:"Correction of system error",children:"Correction of system error"}),e.jsx("option",{value:"Promotional bonus",children:"Promotional bonus"}),e.jsx("option",{value:"Manual adjustment by admin",children:"Manual adjustment by admin"})]}),b==="Manual adjustment by admin"&&e.jsx("input",{type:"text",placeholder:"Additional details...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",onChange:se=>p(`Manual adjustment: ${se.target.value}`)})]}),u&&!isNaN(parseInt(u))&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"New balance after adjustment:"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Q.current_points_balance+parseInt(u)})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{d(!1),m(""),p("")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:!u||!b||C.isPending,className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?"Adjusting...":"Confirm Adjustment"})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:N==="suspend"?"Suspend Account":"Activate Account"}),e.jsx("button",{onClick:()=>{h(!1),j(null),f("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:`rounded-lg p-4 ${N==="suspend"?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Kt,{className:`w-5 h-5 mt-0.5 mr-3 ${N==="suspend"?"text-red-600":"text-green-600"}`}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-medium ${N==="suspend"?"text-red-900":"text-green-900"}`,children:N==="suspend"?"This will prevent the customer from logging in and placing orders.":"This will restore the customer's ability to login and place orders."})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason (required)"}),e.jsx("textarea",{value:y,onChange:se=>f(se.target.value),placeholder:"Enter reason for status change...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{h(!1),j(null),f("")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:$,disabled:!y.trim()||z.isPending,className:`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${N==="suspend"?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:z.isPending?"Processing...":`Confirm ${N==="suspend"?"Suspend":"Activate"}`})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Delete Customer Account"}),e.jsx("button",{onClick:()=>{T(!1),P("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Kt,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-2",children:"GDPR-Compliant Account Deletion"}),e.jsxs("ul",{className:"text-xs text-red-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Customer data will be anonymized"}),e.jsx("li",{children:"Order history will be retained for legal compliance"}),e.jsx("li",{children:"Personal identifiable information will be removed"}),e.jsx("li",{children:"This action cannot be undone"})]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-bold text-red-600",children:"DELETE"})," to confirm"]}),e.jsx("input",{type:"text",value:M,onChange:se=>P(se.target.value),placeholder:"DELETE",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{T(!1),P("")},className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:M!=="DELETE"||D.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D.isPending?"Deleting...":"Delete Account Permanently"})]})]})})]})},Hk=()=>e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Staff management functionality coming soon..."})]}),id={staff_basic:{name:"Staff - Basic",permissions:{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}},staff_advanced:{name:"Staff - Advanced",permissions:{view_orders:!0,update_order_status:!0,view_stock:!0,update_stock:!0,view_reports:!1,manage_customers:!1}},manager:{name:"Manager - Full Access",permissions:{view_orders:!0,update_order_status:!0,view_stock:!0,update_stock:!0,view_reports:!0,manage_customers:!0}}},Qk=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,Kk=async(t,s)=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,Yk=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/staff/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,Gk=()=>{var F,v;const t=je(),[s]=Xe(),r=s.get("staff_id"),a=!!r,n=X(O=>O.authentication_state.auth_token),[i,l]=x.useState({email:"",password:"",first_name:"",last_name:"",phone:"",role:"staff",status:"active",staff_permissions:{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}}),[o,c]=x.useState(!0),[d,u]=x.useState({}),[m,b]=x.useState(!1),{data:p,isLoading:g,error:h}=le({queryKey:["staff",r],queryFn:()=>Qk(r,n),enabled:a&&!!r&&!!n,staleTime:0});x.useEffect(()=>{p&&a&&l({email:p.email,password:"",first_name:p.first_name,last_name:p.last_name,phone:p.phone,role:p.role,status:p.status,staff_permissions:p.staff_permissions||{view_orders:!0,update_order_status:!0,view_stock:!1,update_stock:!1,view_reports:!1,manage_customers:!1}})},[p,a]);const N=ie({mutationFn:O=>Kk(O,n),onSuccess:O=>{t(`/admin/staff?created=${O.user_id}`)},onError:O=>{var C,z;const R=((z=(C=O.response)==null?void 0:C.data)==null?void 0:z.message)||"Failed to create staff account";u({submit:R})}}),j=ie({mutationFn:O=>Yk(r,O,n),onSuccess:O=>{t(`/admin/staff?updated=${O.user_id}`)},onError:O=>{var C,z;const R=((z=(C=O.response)==null?void 0:C.data)==null?void 0:z.message)||"Failed to update staff account";u({submit:R})}}),y=x.useCallback(()=>{const O={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(O.email="Invalid email format"):O.email="Email is required",a||(i.password?i.password.length<8&&(O.password="Password must be at least 8 characters"):O.password="Password is required"),i.first_name?i.first_name.length>100&&(O.first_name="First name must be less than 100 characters"):O.first_name="First name is required",i.last_name?i.last_name.length>100&&(O.last_name="Last name must be less than 100 characters"):O.last_name="Last name is required",i.phone?(i.phone.length<10||i.phone.length>20)&&(O.phone="Phone number must be between 10 and 20 characters"):O.phone="Phone number is required",u(O),Object.keys(O).length===0},[i,a]),f=O=>{if(O.preventDefault(),!!y())if(a){const{email:R,password:C,...z}=i;j.mutate(z)}else N.mutate(i)},k=(O,R)=>{l(C=>({...C,[O]:R})),d[O]&&u(C=>{const z={...C};return delete z[O],z})},T=O=>{l(R=>({...R,staff_permissions:{...R.staff_permissions,[O]:!R.staff_permissions[O]}}))},M=O=>{l(R=>({...R,staff_permissions:id[O].permissions}))},P=()=>{const R="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let C="";for(let z=0;z<12;z++)C+=R.charAt(Math.floor(Math.random()*R.length));k("password",C),b(!0)},_=N.isPending||j.isPending||g;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(H,{to:"/admin/dashboard",className:"hover:text-gray-700 transition-colors",children:"Dashboard"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(H,{to:"/admin/staff",className:"hover:text-gray-700 transition-colors",children:"Staff"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:a?"Edit Staff Member":"Create Staff Member"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Staff Member":"Create New Staff Member"}),e.jsx("p",{className:"mt-2 text-gray-600",children:a?"Update staff member information and permissions":"Add a new staff member with role and permissions"})]})})]}),g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading staff data..."})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to load staff data"}),e.jsx("p",{className:"text-red-700 mt-1 text-sm",children:((v=(F=h==null?void 0:h.response)==null?void 0:F.data)==null?void 0:v.message)||"An error occurred while loading staff data"})]})]})}),!g&&e.jsxs("form",{onSubmit:f,className:"space-y-8",children:[d.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-red-800 font-semibold",children:"Error"}),e.jsx("p",{className:"text-red-700 mt-1 text-sm",children:d.submit})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Personal Information"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",value:i.email,onChange:O=>k("email",O.target.value),onBlur:y,disabled:a,className:`w-full px-4 py-3 rounded-lg border-2 ${d.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all ${a?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,placeholder:"staff@salamalama.ie"}),d.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.email}),a&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Email cannot be changed after account creation"})]}),!a&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password *"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:m?"text":"password",id:"password",value:i.password,onChange:O=>k("password",O.target.value),onBlur:y,className:`w-full px-4 py-3 rounded-lg border-2 ${d.password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"Minimum 8 characters"}),e.jsx("button",{type:"button",onClick:()=>b(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("button",{type:"button",onClick:P,className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Generate"})]}),d.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.password}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Password must be at least 8 characters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",id:"first_name",value:i.first_name,onChange:O=>k("first_name",O.target.value),onBlur:y,className:`w-full px-4 py-3 rounded-lg border-2 ${d.first_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"John"}),d.first_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",id:"last_name",value:i.last_name,onChange:O=>k("last_name",O.target.value),onBlur:y,className:`w-full px-4 py-3 rounded-lg border-2 ${d.last_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"Smith"}),d.last_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",id:"phone",value:i.phone,onChange:O=>k("phone",O.target.value),onBlur:y,className:`w-full px-4 py-3 rounded-lg border-2 ${d.phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"+353 1 234 5678"}),d.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Role & Status"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-900 mb-2",children:"Role *"}),e.jsxs("select",{id:"role",value:i.role,onChange:O=>k("role",O.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"manager",children:"Manager"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i.role==="staff"?"Basic operational access":"Advanced access with management capabilities"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-900",children:"Account Status"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i.status==="active"?"Staff member can log in and access the system":"Staff member cannot access the system"})]}),e.jsx("button",{type:"button",onClick:()=>k("status",i.status==="active"?"inactive":"active"),className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${i.status==="active"?"bg-green-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${i.status==="active"?"translate-x-7":"translate-x-1"}`})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Permissions"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Quick Permission Templates"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(id).map(O=>e.jsx("button",{type:"button",onClick:()=>M(O),className:"px-4 py-2 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-lg font-medium transition-colors border border-orange-200",children:id[O].name},O))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Individual Permissions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_orders,onChange:()=>T("view_orders"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Orders"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to view order queue and details"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.update_order_status,onChange:()=>T("update_order_status"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Update Order Status"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Change order status (preparing, ready, etc.)"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_stock,onChange:()=>T("view_stock"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Stock"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to view inventory levels"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.update_stock,onChange:()=>T("update_stock"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Update Stock"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Adjust inventory quantities"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.view_reports,onChange:()=>T("view_reports"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"View Reports"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Access to daily/weekly sales reports"})]})]})}),e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.staff_permissions.manage_customers,onChange:()=>T("manage_customers"),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Manage Customers"}),e.jsx("span",{className:"text-sm text-gray-500",children:"View and modify customer information"})]})]})})]})]})]})]}),!a&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Options"})}),e.jsx("div",{className:"p-6",children:e.jsx("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:O=>c(O.target.checked),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500 focus:ring-2"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium block",children:"Send Welcome Email"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Staff member will receive login credentials via email"})]})]})})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t-2 border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/admin/staff"),disabled:_,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:_?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Updating...":"Creating..."]}):a?"Update Staff Member":"Create Staff Member"})]})]})]})})})};function Xk({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Jk=x.forwardRef(Xk);function Zk({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const F0=x.forwardRef(Zk);function e3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const ld=x.forwardRef(e3);function t3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const s3=x.forwardRef(t3);function r3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const a3=x.forwardRef(r3);function n3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const T0=x.forwardRef(n3);function i3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const A0=x.forwardRef(i3);function l3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const o3=x.forwardRef(l3);function c3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const M0=x.forwardRef(c3);function d3({title:t,titleId:s,...r},a){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?x.createElement("title",{id:s},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const u3=x.forwardRef(d3),m3=async(t,s)=>{const r=new URLSearchParams;return s.status&&s.status!=="all"&&r.append("status",s.status),s.event_type&&s.event_type!=="all"&&r.append("event_type",s.event_type),s.date_from&&r.append("date_from",s.date_from),s.date_to&&r.append("date_to",s.date_to),s.limit&&r.append("limit",s.limit.toString()),s.offset&&r.append("offset",s.offset.toString()),(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries${r.toString()?`?${r.toString()}`:""}`,{headers:{Authorization:`Bearer ${t}`}})).data},h3=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,L0=t=>({new:"bg-yellow-100 text-yellow-800 border-yellow-200",in_progress:"bg-blue-100 text-blue-800 border-blue-200",quoted:"bg-purple-100 text-purple-800 border-purple-200",confirmed:"bg-green-100 text-green-800 border-green-200",completed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",$0=t=>({corporate:"Corporate",wedding:"Wedding",birthday:"Birthday",meeting:"Meeting",other:"Other"})[t]||t,R0=t=>new Date(t).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),O0=t=>new Date(t).toLocaleString("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x3=()=>{const t=je(),[s,r]=Xe(),a=Fe(),n=X(L=>L.authentication_state.auth_token),[i,l]=x.useState(s.get("status")||"all"),[o,c]=x.useState(s.get("event_type")||"all"),[d,u]=x.useState(s.get("date_range")||"all"),[m,b]=x.useState(1),[p,g]=x.useState([]),[h,N]=x.useState(""),j=20,f=(L=>{const U=new Date;let Y,Q;switch(L){case"next_month":Y=U,Q=new Date(U.getFullYear(),U.getMonth()+1,U.getDate());break;case"next_3_months":Y=U,Q=new Date(U.getFullYear(),U.getMonth()+3,U.getDate());break;default:return{}}return{date_from:Y==null?void 0:Y.toISOString().split("T")[0],date_to:Q==null?void 0:Q.toISOString().split("T")[0]}})(d),{data:k,isLoading:T,error:M,refetch:P}=le({queryKey:["admin-catering-inquiries",i,o,d,m],queryFn:()=>m3(n,{status:i!=="all"?i:void 0,event_type:o!=="all"?o:void 0,date_from:f.date_from,date_to:f.date_to,limit:j,offset:(m-1)*j}),enabled:!!n,staleTime:3e4,refetchOnWindowFocus:!1}),_=(k==null?void 0:k.inquiries)||[],F=(k==null?void 0:k.total)||_.length,v=Math.ceil(F/j),O=_.filter(L=>L.status==="new").length,R=ie({mutationFn:({inquiry_id:L,payload:U})=>h3(n,L,U),onSuccess:()=>{a.invalidateQueries({queryKey:["admin-catering-inquiries"]})}});x.useEffect(()=>{const L=new URLSearchParams;i!=="all"&&L.set("status",i),o!=="all"&&L.set("event_type",o),d!=="all"&&L.set("date_range",d),r(L)},[i,o,d,r]);const C=L=>{l(L),b(1)},z=L=>{c(L),b(1)},D=L=>{u(L),b(1)},S=L=>{g(U=>U.includes(L)?U.filter(Y=>Y!==L):[...U,L])},E=()=>{p.length===_.length?g([]):g(_.map(L=>L.inquiry_id))},w=async()=>{if(!(!h||p.length===0||!window.confirm(`Are you sure you want to update ${p.length} inquiries to status: ${h}?`)))try{await Promise.all(p.map(U=>R.mutateAsync({inquiry_id:U,payload:{status:h}}))),g([]),N("")}catch(U){console.error("Bulk update failed:",U)}},$=async(L,U)=>{try{await R.mutateAsync({inquiry_id:L,payload:{status:U}})}catch(Y){console.error("Status update failed:",Y)}},B=L=>{t(`/admin/catering/${L}`)},I=()=>{alert(`Export functionality requires backend endpoint implementation.
Endpoint: GET /api/admin/catering/inquiries/export`)},q=()=>{m>1&&b(m-1)},A=()=>{m<v&&b(m+1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catering Inquiries"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage catering inquiries and generate quotes"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[O>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx("span",{className:"mr-1",children:O})," New"]}),e.jsxs("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(Jk,{className:"h-5 w-5 mr-2 text-gray-500"}),"Export"]})]})]})})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(o3,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status-filter",value:i,onChange:L=>C(L.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"event-type-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),e.jsxs("select",{id:"event-type-filter",value:o,onChange:L=>z(L.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"corporate",children:"Corporate"}),e.jsx("option",{value:"wedding",children:"Wedding"}),e.jsx("option",{value:"birthday",children:"Birthday"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-range-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),e.jsxs("select",{id:"date-range-filter",value:d,onChange:L=>D(L.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"next_month",children:"Next Month"}),e.jsx("option",{value:"next_3_months",children:"Next 3 Months"})]})]})]})]}),p.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[p.length," inquiries selected"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:h,onChange:L=>N(L.target.value),className:"block w-48 px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select action..."}),e.jsx("option",{value:"in_progress",children:"Mark as In Progress"}),e.jsx("option",{value:"cancelled",children:"Cancel Inquiries"})]}),e.jsx("button",{onClick:w,disabled:!h||R.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:R.isPending?"Applying...":"Apply"})]})]})}),T?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading inquiries..."})]})}):M?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(u3,{className:"h-12 w-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Failed to load inquiries"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:M instanceof Error?M.message:"Unknown error"}),e.jsx("button",{onClick:()=>P(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Retry"})]})}):_.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ld,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No inquiries found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:p.length===_.length&&_.length>0,onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inquiry #"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guests"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>B(L.inquiry_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:U=>U.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:p.includes(L.inquiry_id),onChange:()=>S(L.inquiry_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:L.inquiry_number})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:L.contact_name}),L.company_name&&e.jsx("div",{className:"text-gray-500",children:L.company_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(F0,{className:"h-4 w-4 text-gray-400 mr-2"}),$0(L.event_type)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(ld,{className:"h-4 w-4 text-gray-400 mr-2"}),R0(L.event_date)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(M0,{className:"h-4 w-4 text-gray-400 mr-2"}),L.guest_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:U=>U.stopPropagation(),children:e.jsxs("select",{value:L.status,onChange:U=>$(L.inquiry_id,U.target.value),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${L0(L.status)} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(T0,{className:"h-4 w-4 mr-1"}),O0(L.submitted_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:U=>U.stopPropagation(),children:e.jsxs("button",{onClick:()=>B(L.inquiry_id),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(A0,{className:"h-4 w-4 mr-1"}),"View"]})})]},L.inquiry_id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:_.map(L=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:p.includes(L.inquiry_id),onChange:()=>S(L.inquiry_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:L.inquiry_number}),e.jsx("div",{className:`inline-flex items-center ml-2 px-2 py-1 rounded-full text-xs font-medium border ${L0(L.status)}`,children:L.status.replace("_"," ")})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:L.contact_name}),L.company_name&&e.jsxs("span",{className:"text-gray-500",children:[" ",L.company_name]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(F0,{className:"h-4 w-4 text-gray-400 mr-2"}),$0(L.event_type)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ld,{className:"h-4 w-4 text-gray-400 mr-2"}),R0(L.event_date)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(M0,{className:"h-4 w-4 text-gray-400 mr-2"}),L.guest_count," guests"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(T0,{className:"h-4 w-4 mr-1"}),"Submitted ",O0(L.submitted_at)]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-200",children:[e.jsxs("select",{value:L.status,onChange:U=>$(L.inquiry_id,U.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("button",{onClick:()=>B(L.inquiry_id),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(A0,{className:"h-4 w-4 mr-1"}),"View"]})]})]},L.inquiry_id))}),v>1&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:q,disabled:m===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:A,disabled:m===v,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(m-1)*j+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(m*j,F)})," ","of"," ",e.jsx("span",{className:"font-medium",children:F})," ","inquiries"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:q,disabled:m===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(s3,{className:"h-5 w-5"})]}),Array.from({length:v},(L,U)=>U+1).map(L=>e.jsx("button",{onClick:()=>b(L),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${L===m?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:L},L)),e.jsxs("button",{onClick:A,disabled:m===v,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(a3,{className:"h-5 w-5"})]})]})})]})]})]})]})})]})})},g3=async(t,s)=>(await W.get(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,p3=async(t,s,r)=>(await W.put(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,f3=async(t,s,r)=>{var c;const a=s.line_items.reduce((d,u)=>d+u.total,0),n=((c=s.additional_fees)==null?void 0:c.reduce((d,u)=>d+u.amount,0))||0,i=(a+n)*.23,l=a+n+i;return(await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/inquiries/${t}/quotes`,{...s,subtotal:a,tax_amount:i,grand_total:l},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data},y3=async(t,s)=>(await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/catering/quotes/${t}/send`,{},{headers:{Authorization:`Bearer ${s}`}})).data,b3=()=>{const{inquiry_id:t}=Jt(),s=Fe(),r=X(E=>E.authentication_state.auth_token),[a,n]=x.useState(""),[i,l]=x.useState(""),[o,c]=x.useState(!1),[d,u]=x.useState({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null}),{data:m,isLoading:b,isError:p,error:g}=le({queryKey:["admin","catering","inquiry",t],queryFn:()=>g3(t,r),enabled:!!t&&!!r,staleTime:3e4,retry:1});x.useEffect(()=>{m&&(n(m.admin_notes||""),l(m.status))},[m]);const h=ie({mutationFn:E=>p3(t,E,r),onSuccess:()=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]})}}),N=ie({mutationFn:E=>f3(t,E,r),onSuccess:()=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]}),c(!1),u({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null})}}),j=ie({mutationFn:E=>y3(E,r),onSuccess:()=>{s.invalidateQueries({queryKey:["admin","catering","inquiry",t]})}}),y=E=>{l(E)},f=()=>{h.mutate({status:i,admin_notes:a||null})},k=()=>{u(E=>({...E,line_items:[...E.line_items,{item:"",quantity:1,unit_price:0,total:0}]}))},T=(E,w,$)=>{u(B=>{const I=[...B.line_items];return I[E]={...I[E],[w]:$},(w==="quantity"||w==="unit_price")&&(I[E].total=I[E].quantity*I[E].unit_price),v({...B,line_items:I})})},M=E=>{u(w=>{const $=w.line_items.filter((B,I)=>I!==E);return v({...w,line_items:$})})},P=()=>{u(E=>({...E,additional_fees:[...E.additional_fees||[],{name:"",amount:0}]}))},_=(E,w,$)=>{u(B=>{const I=[...B.additional_fees||[]];return I[E]={...I[E],[w]:$},v({...B,additional_fees:I})})},F=E=>{u(w=>{const $=(w.additional_fees||[]).filter((B,I)=>I!==E);return v({...w,additional_fees:$})})},v=E=>{const w=E.line_items.reduce((q,A)=>q+A.total,0),$=(E.additional_fees||[]).reduce((q,A)=>q+Number(A.amount),0),B=(w+$)*.23,I=w+$+B;return{...E,subtotal:w,tax_amount:B,grand_total:I}},O=()=>{if(d.line_items.length===0){alert("Please add at least one line item");return}if(!d.valid_until){alert("Please set a valid until date");return}N.mutate({line_items:d.line_items,additional_fees:d.additional_fees,valid_until:d.valid_until,terms:d.terms})},R=E=>{switch(E){case"new":return"bg-gray-100 text-gray-800 border-gray-300";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"quoted":return"bg-blue-100 text-blue-800 border-blue-300";case"confirmed":return"bg-green-100 text-green-800 border-green-300";case"completed":return"bg-green-200 text-green-900 border-green-400";case"cancelled":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},C=E=>({corporate:"Corporate Event",wedding:"Wedding",birthday:"Birthday Party",meeting:"Meeting",other:"Other"})[E]||E,z=E=>new Date(E).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}),D=E=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(E);if(b)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"h-12 w-12 animate-spin text-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading catering inquiry..."})]})})});if(p)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx(ce,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Inquiry"}),e.jsx("p",{className:"text-gray-600 mb-6",children:g instanceof Error?g.message:"Failed to load inquiry details"}),e.jsxs(H,{to:"/admin/catering",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(Bi,{className:"h-5 w-5 mr-2"}),"Back to Inquiries"]})]})})})});if(!m)return null;const S=m.quotes&&m.quotes.length>0?m.quotes[0]:null;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(H,{to:"/admin/catering",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Bi,{className:"h-5 w-5 mr-1"}),"Back to Inquiries"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Inquiry #",m.inquiry_number]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${R(m.status)}`,children:m.status.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["Submitted ",z(m.submitted_at)]})]})]}),e.jsx("button",{onClick:f,disabled:h.isPending,className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-5 w-5 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(py,{className:"h-6 w-6 mr-2 text-orange-600"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Contact Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:m.contact_name})]}),m.company_name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Company"}),e.jsx("p",{className:"text-gray-900 font-medium",children:m.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${m.contact_email}`,className:"text-orange-600 hover:text-orange-700 flex items-center",children:[e.jsx(lt,{className:"h-4 w-4 mr-1"}),m.contact_email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${m.contact_phone}`,className:"text-orange-600 hover:text-orange-700 flex items-center",children:[e.jsx(zt,{className:"h-4 w-4 mr-1"}),m.contact_phone]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(cr,{className:"h-6 w-6 mr-2 text-orange-600"}),"Event Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Type"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[C(m.event_type),m.event_type_other&&` - ${m.event_type_other}`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Date"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(cr,{className:"h-4 w-4 mr-1 text-gray-400"}),z(m.event_date)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Event Time"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-1 text-gray-400"}),m.event_start_time," - ",m.event_end_time]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Guest Count"}),e.jsxs("p",{className:"text-gray-900 font-medium flex items-center",children:[e.jsx(Hr,{className:"h-4 w-4 mr-1 text-gray-400"}),m.guest_count_min&&m.guest_count_max?`${m.guest_count_min} - ${m.guest_count_max}`:m.guest_count]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Location"}),e.jsxs("p",{className:"text-gray-900 flex items-start",children:[e.jsx(Ge,{className:"h-4 w-4 mr-1 text-gray-400 mt-0.5"}),e.jsxs("span",{children:[m.event_location_address,e.jsx("br",{}),m.event_location_city,", ",m.event_location_postal_code,e.jsx("br",{}),e.jsxs("span",{className:"text-gray-500 text-sm capitalize",children:["(",m.event_location_type,")"]})]})]})]}),m.dietary_requirements&&m.dietary_requirements.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Dietary Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.dietary_requirements.map((E,w)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:E},w))})]}),m.dietary_notes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Dietary Notes"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3",children:m.dietary_notes})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(_s,{className:"h-6 w-6 mr-2 text-orange-600"}),"Menu Preferences"]}),e.jsxs("div",{className:"space-y-4",children:[m.preferred_package&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Preferred Package"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:m.preferred_package})]}),m.budget_range&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Budget Range"}),e.jsx("p",{className:"text-gray-900 font-medium",children:m.budget_range})]}),m.menu_preferences&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Menu Preferences"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:m.menu_preferences})]}),m.additional_details&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Additional Details"}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:m.additional_details})]})]})]}),S&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(_s,{className:"h-6 w-6 mr-2 text-orange-600"}),"Quote #",S.quote_number]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[S.quote_pdf_url&&e.jsxs("a",{href:S.quote_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),!S.sent_at&&e.jsx("button",{onClick:()=>j.mutate(S.quote_id),disabled:j.isPending,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yy,{className:"h-4 w-4 mr-2"}),"Send to Customer"]})})]})]}),S.sent_at&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4 flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsxs("span",{className:"text-green-800 text-sm font-medium",children:["Sent to customer on ",z(S.sent_at)]})]}),S.accepted_at&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4 flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-blue-800 text-sm font-medium",children:["Accepted by customer on ",z(S.accepted_at)]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.line_items.map((E,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:E.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:D(E.unit_price)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:D(E.total)})]},w))})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:D(S.subtotal)})]}),S.additional_fees&&S.additional_fees.length>0&&e.jsx(e.Fragment,{children:S.additional_fees.map((E,w)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:E.name}),e.jsx("span",{className:"text-gray-900 font-medium",children:D(E.amount)})]},w))}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:D(S.tax_amount)})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:D(S.grand_total)})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Valid Until:"})," ",z(S.valid_until)]}),S.terms&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Terms & Conditions:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-3 whitespace-pre-wrap",children:S.terms})]})]})]}),!S&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Generate Quote"}),!o&&e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Create Quote"]})]}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Line Items"}),e.jsxs("button",{onClick:k,className:"inline-flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[e.jsx(Ht,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),d.line_items.length===0?e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"No line items added yet"})}):e.jsx("div",{className:"space-y-3",children:d.line_items.map((E,w)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",placeholder:"Item name",value:E.item,onChange:$=>T(w,"item",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Qty",value:E.quantity,onChange:$=>T(w,"quantity",Number($.target.value)),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Price",value:E.unit_price,onChange:$=>T(w,"unit_price",Number($.target.value)),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),e.jsx("div",{className:"col-span-2 flex items-center justify-end",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:D(E.total)})}),e.jsx("div",{className:"col-span-1 flex items-center justify-end",children:e.jsx("button",{onClick:()=>M(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})})]},w))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Fees"}),e.jsxs("button",{onClick:P,className:"inline-flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[e.jsx(Ht,{className:"h-4 w-4 mr-1"}),"Add Fee"]})]}),d.additional_fees&&d.additional_fees.length>0&&e.jsx("div",{className:"space-y-3",children:d.additional_fees.map((E,w)=>e.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"text",placeholder:"Fee name (e.g., Service Fee)",value:E.name,onChange:$=>_(w,"name",$.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("input",{type:"number",placeholder:"Amount",value:E.amount,onChange:$=>_(w,"amount",Number($.target.value)),min:"0",step:"0.01",className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>F(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]},w))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:D(d.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (23%)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:D(d.tax_amount)})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"font-bold text-gray-900",children:D(d.grand_total)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valid Until"}),e.jsx("input",{type:"date",value:d.valid_until,onChange:E=>u(w=>({...w,valid_until:E.target.value})),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),e.jsx("textarea",{value:d.terms||"",onChange:E=>u(w=>({...w,terms:E.target.value})),rows:4,placeholder:"Enter quote terms and conditions...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{c(!1),u({line_items:[],subtotal:0,additional_fees:[],tax_amount:0,grand_total:0,valid_until:"",terms:null})},className:"px-6 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:N.isPending,className:"inline-flex items-center px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):"Generate Quote"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Inquiry Status"}),e.jsxs("select",{value:i,onChange:E=>y(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent font-medium",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quoted",children:"Quoted"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Admin Notes"}),e.jsx("textarea",{value:a,onChange:E=>n(E.target.value),rows:6,placeholder:"Add internal notes about this inquiry...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These notes are only visible to admin and staff"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Info"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Inquiry ID"}),e.jsx("span",{className:"text-gray-900 font-medium",children:m.inquiry_id.substring(0,8)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted"}),e.jsx("span",{className:"text-gray-900 font-medium",children:z(m.submitted_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated"}),e.jsx("span",{className:"text-gray-900 font-medium",children:z(m.updated_at)})]}),m.user_id&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer Account"}),e.jsx(H,{to:`/admin/customers/${m.user_id}`,className:"text-orange-600 hover:text-orange-700 font-medium",children:"View Profile"})]})]})]})]})]})]})})})},j3=()=>{const[t,s]=Xe(),r=X(q=>q.authentication_state.auth_token),a=Fe(),[n,i]=x.useState(t.get("status")||"all"),[l,o]=x.useState(t.get("date_range")||"all_time"),[c,d]=x.useState(t.get("customer_search")||""),[u,m]=x.useState(1),[b,p]=x.useState(!1),[g,h]=x.useState({user_id:"",customer_name:"",customer_email:"",customer_phone:"",customer_address:null,line_items:[],subtotal:0,discount_amount:0,delivery_fee:null,tax_amount:0,grand_total:0,issue_date:new Date().toISOString().split("T")[0],due_date:null,notes:null}),[N,j]=x.useState({item:"",quantity:1,unit_price:0,total:0}),y=20,f=(u-1)*y,k=q=>{const A=new Date,L=U=>U.toISOString().split("T")[0];switch(q){case"today":return{date_from:L(A),date_to:L(A)};case"this_week":{const U=new Date(A);return U.setDate(A.getDate()-A.getDay()),{date_from:L(U),date_to:L(A)}}case"this_month":{const U=new Date(A.getFullYear(),A.getMonth(),1);return{date_from:L(U),date_to:L(A)}}case"last_month":{const U=new Date(A.getFullYear(),A.getMonth()-1,1),Y=new Date(A.getFullYear(),A.getMonth(),0);return{date_from:L(U),date_to:L(Y)}}case"all_time":default:return{}}},T=q=>`${Number(q||0).toFixed(2)}`,M=q=>new Date(q).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"}),P=q=>{const A={paid:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",overdue:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"},L={paid:"Paid",pending:"Pending",overdue:"Overdue",cancelled:"Cancelled"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${A[q]||A.pending}`,children:L[q]||q})},_=()=>{h({user_id:"",customer_name:"",customer_email:"",customer_phone:"",customer_address:null,line_items:[],subtotal:0,discount_amount:0,delivery_fee:null,tax_amount:0,grand_total:0,issue_date:new Date().toISOString().split("T")[0],due_date:null,notes:null}),j({item:"",quantity:1,unit_price:0,total:0})},F=async()=>{const{date_from:q,date_to:A}=k(l),L={limit:y,offset:f};return n!=="all"&&(L.status=n),q&&(L.date_from=q),A&&(L.date_to=A),c&&(L.query=c),(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",{params:L,headers:{Authorization:`Bearer ${r}`}})).data},{data:v,isLoading:O,error:R,refetch:C}=le({queryKey:["admin-invoices",n,l,c,u],queryFn:F,staleTime:3e4,enabled:!!r}),z=ie({mutationFn:async q=>(await W.post("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",q,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["admin-invoices"]}),p(!1),_()}}),D=ie({mutationFn:async q=>(await W.post(`https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices/${q}/send`,{},{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["admin-invoices"]})}}),S=async()=>{const{date_from:q,date_to:A}=k(l),L={format:"csv"};n!=="all"&&(L.status=n),q&&(L.date_from=q),A&&(L.date_to=A),c&&(L.query=c);try{const U=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/invoices",{params:L,headers:{Authorization:`Bearer ${r}`},responseType:"blob"}),Y=window.URL.createObjectURL(new Blob([U.data])),Q=document.createElement("a");Q.href=Y,Q.setAttribute("download",`invoices_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Q),Q.click(),Q.remove()}catch(U){console.error("CSV export failed:",U)}},E=()=>{if(!N.item||N.quantity<=0||N.unit_price<=0)return;const q=N.quantity*N.unit_price,A=[...g.line_items,{...N,total:q}],L=A.reduce((Y,Q)=>Y+Q.total,0),U=L-g.discount_amount+(g.delivery_fee||0)+g.tax_amount;h({...g,line_items:A,subtotal:L,grand_total:U}),j({item:"",quantity:1,unit_price:0,total:0})},w=q=>{const A=g.line_items.filter((Y,Q)=>Q!==q),L=A.reduce((Y,Q)=>Y+Q.total,0),U=L-g.discount_amount+(g.delivery_fee||0)+g.tax_amount;h({...g,line_items:A,subtotal:L,grand_total:U})},$=q=>{const A={...g,...q},L=A.line_items.reduce((Y,Q)=>Y+Q.total,0),U=L-A.discount_amount+(A.delivery_fee||0)+A.tax_amount;h({...A,subtotal:L,grand_total:U})},B=q=>{if(q.preventDefault(),g.line_items.length===0){alert("Please add at least one line item");return}if(!g.customer_name||!g.customer_email||!g.customer_phone){alert("Please fill in all required customer information");return}z.mutate(g)};x.useEffect(()=>{const q={};n!=="all"&&(q.status=n),l!=="all_time"&&(q.date_range=l),c&&(q.customer_search=c),s(q)},[n,l,c,s]);const I=Math.ceil(((v==null?void 0:v.total)||0)/y);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoice Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage invoices, track payments, and generate custom billing"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{id:"status-filter",value:n,onChange:q=>{i(q.target.value),m(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-range-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("select",{id:"date-range-filter",value:l,onChange:q=>{o(q.target.value),m(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all_time",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"customer-search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Customer"}),e.jsx("input",{id:"customer-search",type:"text",value:c,onChange:q=>{d(q.target.value),m(1)},placeholder:"Search by name, email, or phone...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Custom Invoice"]}),e.jsxs("button",{onClick:S,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center border border-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to CSV"]}),e.jsxs("button",{onClick:()=>C(),disabled:O,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center border border-gray-300 disabled:opacity-50",children:[e.jsx("svg",{className:`w-5 h-5 mr-2 ${O?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),O?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading invoices..."})]})}):R?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Invoices"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load invoices. Please try again."}),e.jsx("button",{onClick:()=>C(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})}):!(v!=null&&v.invoices)||v.invoices.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Invoices Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c||n!=="all"||l!=="all_time"?"No invoices match your current filters.":"No invoices have been created yet."}),e.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Create First Invoice"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.invoices.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(H,{to:`/admin/invoices/${q.invoice_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:q.invoice_number})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:q.customer_email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M(q.issue_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.due_date?M(q.due_date):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T(q.grand_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(q.payment_status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{to:`/admin/invoices/${q.invoice_id}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:"View"}),q.payment_status==="pending"&&e.jsx("button",{onClick:()=>D.mutate(q.invoice_id),disabled:D.isPending,className:"text-green-600 hover:text-green-700 font-medium disabled:opacity-50",children:"Send"}),q.invoice_pdf_url&&e.jsx("a",{href:q.invoice_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-700 font-medium",children:"PDF"})]})})]},q.invoice_id))})]})})}),I>1&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:f+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f+y,(v==null?void 0:v.total)||0)})," ","of ",e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.total)||0})," invoices"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(Math.max(1,u-1)),disabled:u===1,className:"px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",u," of ",I]}),e.jsx("button",{onClick:()=>m(Math.min(I,u+1)),disabled:u===I,className:"px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Custom Invoice"}),e.jsx("button",{onClick:()=>{p(!1),_()},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:B,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:g.customer_name,onChange:q=>h({...g,customer_name:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:g.customer_email,onChange:q=>h({...g,customer_email:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,value:g.customer_phone,onChange:q=>h({...g,customer_phone:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Address"}),e.jsx("input",{type:"text",value:g.customer_address||"",onChange:q=>h({...g,customer_address:q.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Line Items"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Description"}),e.jsx("input",{type:"text",value:N.item,onChange:q=>j({...N,item:q.target.value}),placeholder:"e.g., Catering Service",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:N.quantity,onChange:q=>j({...N,quantity:Number(q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N.unit_price,onChange:q=>j({...N,unit_price:Number(q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("button",{type:"button",onClick:E,className:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Add Line Item"})]}),g.line_items.length>0?e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.line_items.map((q,A)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:q.item}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:q.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T(q.unit_price)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:T(q.total)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{type:"button",onClick:()=>w(A),className:"text-red-600 hover:text-red-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},A))})]})}):e.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-200 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No line items added yet"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Amount ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:g.discount_amount,onChange:q=>$({discount_amount:Number(q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Fee ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:g.delivery_fee||0,onChange:q=>$({delivery_fee:Number(q.target.value)||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Amount ()"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:g.tax_amount,onChange:q=>$({tax_amount:Number(q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-medium text-gray-900",children:T(g.subtotal)})]}),g.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",T(g.discount_amount)]})]}),g.delivery_fee&&g.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fee:"}),e.jsx("span",{className:"font-medium text-gray-900",children:T(g.delivery_fee)})]}),g.tax_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsx("span",{className:"font-medium text-gray-900",children:T(g.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Grand Total:"}),e.jsx("span",{className:"text-gray-900",children:T(g.grand_total)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:g.issue_date,onChange:q=>h({...g,issue_date:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:g.due_date||"",onChange:q=>h({...g,due_date:q.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{rows:3,value:g.notes||"",onChange:q=>h({...g,notes:q.target.value||null}),placeholder:"Optional invoice notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),_()},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:z.isPending||g.line_items.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Invoice"})]})]})]})})]})},Gm="https://123salama-lama-food-truck.launchpulse.ai",v3=async(t,s)=>(await W.get(`${Gm}/api/admin/invoices/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,N3=async(t,s,r)=>(await W.put(`${Gm}/api/admin/invoices/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,w3=async(t,s)=>{await W.post(`${Gm}/api/admin/invoices/${t}/send`,{},{headers:{Authorization:`Bearer ${s}`}})},_3=()=>{var C,z;const{invoice_id:t}=Jt(),s=je(),r=Fe(),a=X(D=>D.authentication_state.auth_token),n=X(D=>D.add_notification),[i,l]=x.useState("pending"),[o,c]=x.useState(""),[d,u]=x.useState(null),[m,b]=x.useState(!1),{data:p,isLoading:g,isError:h,error:N}=le({queryKey:["admin-invoice-detail",t],queryFn:()=>v3(t,a),enabled:!!t&&!!a,staleTime:3e4,retry:1});x.useEffect(()=>{p&&(l(p.payment_status),c(p.notes||""))},[p]);const j=ie({mutationFn:D=>N3(t,D,a),onSuccess:D=>{r.setQueryData(["admin-invoice-detail",t],D),n({type:"success",message:"Invoice updated successfully"}),u(null)},onError:D=>{var E,w;const S=((w=(E=D.response)==null?void 0:E.data)==null?void 0:w.message)||D.message||"Failed to update invoice";u(S),n({type:"error",message:S})}}),y=ie({mutationFn:()=>w3(t,a),onSuccess:()=>{n({type:"success",message:"Invoice sent successfully to customer"}),b(!1)},onError:D=>{var E,w;const S=((w=(E=D.response)==null?void 0:E.data)==null?void 0:w.message)||D.message||"Failed to send invoice";u(S),n({type:"error",message:S}),b(!1)}}),f=()=>{if(!p)return;const D={payment_status:i,notes:o||null};j.mutate(D)},k=()=>{p!=null&&p.invoice_pdf_url?window.open(p.invoice_pdf_url,"_blank"):u("Invoice PDF not available")},T=()=>{b(!0),y.mutate()},M=()=>{p!=null&&p.user_id&&s(`/admin/customers/${p.user_id}`)},P=()=>{p!=null&&p.order_id&&s(`/admin/orders/${p.order_id}`)},_=D=>{switch(D){case"paid":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"cancelled":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=D=>{switch(D){case"paid":return e.jsx(we,{className:"w-4 h-4"});case"pending":return e.jsx(Le,{className:"w-4 h-4"});case"overdue":return e.jsx(ce,{className:"w-4 h-4"});case"cancelled":return e.jsx(it,{className:"w-4 h-4"});default:return e.jsx(_s,{className:"w-4 h-4"})}},v=D=>`${Number(D||0).toFixed(2)}`,O=D=>D?new Date(D).toLocaleDateString("en-IE",{year:"numeric",month:"long",day:"numeric"}):"N/A",R=D=>D?new Date(D).toLocaleString("en-IE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(H,{to:"/admin/invoices",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Back to Invoices"})]})}),g&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-6 h-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-1",children:"Failed to Load Invoice"}),e.jsx("p",{className:"text-red-700",children:((z=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:z.message)||(N==null?void 0:N.message)||"An error occurred while loading the invoice."})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(H,{to:"/admin/invoices",className:"text-red-600 hover:text-red-700 font-medium",children:"Return to Invoices List"})})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-700 text-sm",children:d}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto text-red-600 hover:text-red-700",children:e.jsx(it,{className:"w-5 h-5"})})]})}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Invoice ",p.invoice_number]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${_(p.payment_status)}`,children:[F(p.payment_status),e.jsx("span",{className:"ml-2 capitalize",children:p.payment_status})]}),p.order_id&&e.jsxs("button",{onClick:P,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(ma,{className:"w-4 h-4 mr-1"}),"View Related Order"]})]})]}),e.jsxs("div",{className:"mt-4 lg:mt-0 flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:k,disabled:!p.invoice_pdf_url,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Download PDF"]}),e.jsx("button",{onClick:T,disabled:m||y.isPending,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m||y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"w-5 h-5 mr-2"}),"Email Invoice"]})}),e.jsx("button",{onClick:f,disabled:j.isPending,className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(At,{className:"w-5 h-5 mr-2 text-gray-600"}),"Customer Information"]}),e.jsx("button",{onClick:M,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View Profile "})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Name"}),e.jsx("button",{onClick:M,className:"text-lg font-semibold text-blue-600 hover:text-blue-700",children:p.customer_name})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${p.customer_email}`,className:"text-gray-900 hover:text-blue-600 flex items-center",children:[e.jsx(lt,{className:"w-4 h-4 mr-2 text-gray-500"}),p.customer_email]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${p.customer_phone}`,className:"text-gray-900 hover:text-blue-600 flex items-center",children:[e.jsx(zt,{className:"w-4 h-4 mr-2 text-gray-500"}),p.customer_phone]})]})]}),p.customer_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Address"}),e.jsxs("p",{className:"text-gray-900 flex items-start",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2 text-gray-500 mt-0.5"}),p.customer_address]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(cr,{className:"w-5 h-5 mr-2 text-gray-600"}),"Dates & Timeline"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Issue Date"}),e.jsx("p",{className:"text-gray-900 font-medium",children:O(p.issue_date)})]}),p.due_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),e.jsx("p",{className:"text-gray-900 font-medium",children:O(p.due_date)})]}),p.paid_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Paid At"}),e.jsx("p",{className:"text-gray-900 font-medium",children:R(p.paid_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Created"}),e.jsx("p",{className:"text-gray-900 font-medium",children:R(p.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900 font-medium",children:R(p.updated_at)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Line Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.line_items.map((D,S)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:D.item}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 text-right",children:D.quantity}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 text-right",children:v(D.unit_price)}),e.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900 text-right",children:v(D.total)})]},S))})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-gray-900 font-medium",children:v(p.subtotal)})]}),p.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["-",v(p.discount_amount)]})]}),p.delivery_fee!==null&&p.delivery_fee>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fee"}),e.jsx("span",{className:"text-gray-900 font-medium",children:v(p.delivery_fee)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (VAT)"}),e.jsx("span",{className:"text-gray-900 font-medium",children:v(p.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Grand Total"}),e.jsx("span",{className:"text-orange-600",children:v(p.grand_total)})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(ls,{className:"w-5 h-5 mr-2 text-gray-600"}),"Payment Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payment_status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsxs("select",{id:"payment_status",value:i,onChange:D=>l(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p.payment_method&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:p.payment_method})]}),p.sumup_transaction_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Transaction ID"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:p.sumup_transaction_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v(p.grand_total)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Internal Notes"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoice_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Admin Only)"}),e.jsx("textarea",{id:"invoice_notes",value:o,onChange:D=>c(D.target.value),rows:6,placeholder:"Add internal notes about this invoice...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[o.length," characters"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600 italic",children:"Notes are for internal use only and will not be visible to customers on the invoice."})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg border border-orange-200 p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Invoice Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Status"}),e.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:p.payment_status})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Total Amount"}),e.jsx("span",{className:"font-semibold text-gray-900",children:v(p.grand_total)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Items"}),e.jsx("span",{className:"font-semibold text-gray-900",children:p.line_items.length})]}),p.order_id&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Order-Based"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Yes"})]}),p.catering_inquiry_id&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Catering"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"Yes"})]})]})]})]})]})]})]})})})})},k3=async(t,s,r)=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{params:{date_range:s,report_type:r},headers:{Authorization:`Bearer ${t}`}})).data,C3=async(t,s)=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/customers",{params:{date_range:s},headers:{Authorization:`Bearer ${t}`}})).data,S3=async(t,s)=>(await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/time-analysis",{params:{date_range:s},headers:{Authorization:`Bearer ${t}`}})).data,Hs=({title:t,value:s,icon:r,trend:a,color:n})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${n}`,children:r}),a&&e.jsxs("div",{className:`flex items-center text-sm font-medium ${a.isPositive?"text-green-600":"text-red-600"}`,children:[a.isPositive?e.jsx(gy,{className:"w-4 h-4 mr-1"}):e.jsx(C1,{className:"w-4 h-4 mr-1"}),Math.abs(a.value),"%"]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),P3=({data:t})=>{if(!t||t.length===0)return e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"});const s=Math.max(...t.map(o=>o.revenue)),r=800,a=250,n=40,i=t.map((o,c)=>({x:n+c*(r-2*n)/(t.length-1),y:a-n-o.revenue/s*(a-2*n)})),l=i.map((o,c)=>`${c===0?"M":"L"} ${o.x} ${o.y}`).join(" ");return e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("svg",{viewBox:`0 0 ${r} ${a}`,className:"w-full h-64",children:[[0,.25,.5,.75,1].map((o,c)=>e.jsx("line",{x1:n,y1:n+o*(a-2*n),x2:r-n,y2:n+o*(a-2*n),stroke:"#e5e7eb",strokeWidth:"1"},c)),e.jsx("path",{d:l,fill:"none",stroke:"#3b82f6",strokeWidth:"3"}),i.map((o,c)=>e.jsx("circle",{cx:o.x,cy:o.y,r:"4",fill:"#3b82f6"},c)),t.map((o,c)=>e.jsx("text",{x:i[c].x,y:a-10,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})},c))]})})},D0=({data:t})=>{if(!t||t.length===0)return e.jsx("div",{className:"w-full h-64 flex items-center justify-center text-gray-400",children:"No data available"});const s=Math.max(...t.map(o=>o.value)),r=60,a=20,n=t.length*(r+a)+40,i=250,l=40;return e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("svg",{viewBox:`0 0 ${n} ${i}`,className:"w-full h-64",children:t.map((o,c)=>{const d=o.value/s*(i-2*l),u=l+c*(r+a),m=i-l-d;return e.jsxs("g",{children:[e.jsx("rect",{x:u,y:m,width:r,height:d,fill:"#3b82f6",rx:"4"}),e.jsx("text",{x:u+r/2,y:m-5,textAnchor:"middle",fontSize:"12",fill:"#1f2937",fontWeight:"600",children:o.value}),e.jsx("text",{x:u+r/2,y:i-10,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:o.label})]},c)})})})},E3=()=>{var O,R,C,z,D,S,E;const[t,s]=Xe(),[r,a]=x.useState(t.get("date_range")||"last_30_days"),[n,i]=x.useState(t.get("report_type")||"overview"),[l,o]=x.useState(!1),c=X(w=>w.authentication_state.auth_token),d=X(w=>w.authentication_state.current_user);x.useEffect(()=>{const w={};r!=="last_30_days"&&(w.date_range=r),n!=="overview"&&(w.report_type=n),s(w,{replace:!0})},[r,n,s]);const{data:u,isLoading:m,error:b,refetch:p}=le({queryKey:["admin-analytics-sales",r,n],queryFn:()=>k3(c,r,n),enabled:!!c,staleTime:5*60*1e3}),{data:g,isLoading:h,error:N,refetch:j}=le({queryKey:["admin-analytics-customers",r],queryFn:()=>C3(c,r),enabled:!!c&&n==="customers",staleTime:5*60*1e3}),{data:y,isLoading:f,error:k,refetch:T}=le({queryKey:["admin-analytics-time",r],queryFn:()=>S3(c,r),enabled:!!c&&n==="time",staleTime:5*60*1e3}),M=w=>{a(w)},P=w=>{i(w)},_=async()=>{if(c){o(!0);try{const w=await W.get("https://123salama-lama-food-truck.launchpulse.ai/api/admin/analytics/sales",{params:{date_range:r,format:"csv"},headers:{Authorization:`Bearer ${c}`},responseType:"blob"}),$=new Blob([w.data],{type:"text/csv"}),B=window.URL.createObjectURL($),I=document.createElement("a");I.href=B,I.download=`analytics_${r}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(B)}catch(w){console.error("Export failed:",w),alert("Failed to export analytics data. Please try again.")}finally{o(!1)}}},F=w=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(w),v=w=>`${(w*100).toFixed(1)}%`;return!c||!d||d.role!=="admin"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need admin privileges to view analytics."}),e.jsx(H,{to:"/admin/dashboard",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Return to Dashboard"})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Analytics"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive insights into your business performance"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:r,onChange:w=>M(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"}),e.jsx("option",{value:"this_year",children:"This Year"})]}),e.jsx("button",{onClick:_,disabled:l||m,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{className:"w-5 h-5 mr-2"}),"Export CSV"]})})]})]}),e.jsxs("div",{className:"flex space-x-2 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>P("overview"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${n==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(wt,{className:"w-5 h-5 inline-block mr-2"}),"Sales Overview"]}),e.jsxs("button",{onClick:()=>P("customers"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${n==="customers"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Hr,{className:"w-5 h-5 inline-block mr-2"}),"Customer Insights"]}),e.jsxs("button",{onClick:()=>P("time"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${n==="time"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Le,{className:"w-5 h-5 inline-block mr-2"}),"Time Analysis"]})]})]}),n==="overview"&&e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ae,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading analytics..."})]}):b?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load sales analytics"}),e.jsx("button",{onClick:()=>p(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Hs,{title:"Total Revenue",value:F(((O=u.summary)==null?void 0:O.revenue)||0),icon:e.jsx(Tr,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"}),e.jsx(Hs,{title:"Total Orders",value:(((R=u.summary)==null?void 0:R.orders)||0).toLocaleString(),icon:e.jsx(Dt,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Hs,{title:"Average Order Value",value:F(((C=u.summary)==null?void 0:C.average_order_value)||0),icon:e.jsx(wt,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-50"})]}),u.revenue_by_day&&u.revenue_by_day.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),e.jsx(P3,{data:u.revenue_by_day})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Orders Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[(z=u.breakdown_by_type)==null?void 0:z.map(w=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-4 h-4 rounded mr-3 ${w.order_type==="collection"?"bg-blue-600":"bg-green-600"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:w.order_type})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[w.orders," orders"]})]},w.order_type)),u.breakdown_by_type&&u.breakdown_by_type.length>0&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.breakdown_by_type.map(w=>{var $;return e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2 first:mt-0",children:[e.jsxs("span",{className:"capitalize",children:[w.order_type," Rate"]}),e.jsxs("span",{className:"font-medium",children:[($=u.summary)!=null&&$.orders?(w.orders/u.summary.orders*100).toFixed(1):"0.0","%"]})]},w.order_type)})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Items"}),e.jsx("div",{className:"space-y-3",children:(D=u.top_items)==null?void 0:D.slice(0,5).map((w,$)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-50 text-blue-600 font-semibold text-sm",children:$+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.item_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w.quantity_sold," sold"]})]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:F(w.revenue)})]},w.item_id||w.item_name))})]})]})]}):null}),n==="customers"&&e.jsx(e.Fragment,{children:h?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ae,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading customer analytics..."})]}):N?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load customer analytics"}),e.jsx("button",{onClick:()=>j(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Hs,{title:"New Customers",value:g.new_customers.toLocaleString(),icon:e.jsx(Hr,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Hs,{title:"Repeat Customer Rate",value:v(g.repeat_customer_rate),icon:e.jsx(wt,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"}),e.jsx(Hs,{title:"Customer Lifetime Value",value:F(g.customer_lifetime_value),icon:e.jsx(or,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers"}),e.jsx("div",{className:"space-y-3",children:g.top_customers.slice(0,5).map((w,$)=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-purple-50 text-purple-600 font-semibold text-sm",children:$+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.customer_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w.total_orders," orders"]})]})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:F(w.total_spend)})]},w.user_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loyalty Program Engagement"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Participants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.loyalty_engagement.active_participants.toLocaleString()})]}),e.jsx(or,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Issued"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.loyalty_engagement.points_issued.toLocaleString()})]}),e.jsx(wt,{className:"w-8 h-8 text-green-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Redeemed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.loyalty_engagement.points_redeemed.toLocaleString()})]}),e.jsx(Dt,{className:"w-8 h-8 text-purple-600"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Redemption Rate"}),e.jsxs("span",{className:"font-medium",children:[(g.loyalty_engagement.points_redeemed/g.loyalty_engagement.points_issued*100).toFixed(1),"%"]})]})})]})]})]})]}):null}),n==="time"&&e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ae,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading time analytics..."})]}):k?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-700 mb-4",children:"Failed to load time analytics"}),e.jsx("button",{onClick:()=>T(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}):y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(Hs,{title:"Average Fulfillment Time",value:`${y.average_fulfillment_time} min`,icon:e.jsx(Le,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),e.jsx(Hs,{title:"Peak Order Hour",value:`${((S=y.peak_order_hours[0])==null?void 0:S.hour)||0}:00`,icon:e.jsx(cr,{className:"w-6 h-6 text-orange-600"}),color:"bg-orange-50"}),e.jsx(Hs,{title:"Busiest Day",value:((E=y.orders_by_day_of_week[0])==null?void 0:E.day)||"N/A",icon:e.jsx(wt,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Peak Order Hours"}),e.jsx(D0,{data:y.peak_order_hours.map(w=>({label:`${w.hour}:00`,value:w.order_count}))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Orders by Day of Week"}),e.jsx(D0,{data:y.orders_by_day_of_week.map(w=>({label:w.day,value:w.order_count}))})]})]}):null})]})})})},uc="https://123salama-lama-food-truck.launchpulse.ai",F3=async t=>(await W.get(`${uc}/api/admin/settings`,{headers:{Authorization:`Bearer ${t}`}})).data,T3=async(t,s)=>{await W.put(`${uc}/api/admin/settings/business`,s,{headers:{Authorization:`Bearer ${t}`}})},A3=async(t,s)=>{await W.put(`${uc}/api/admin/settings/operating-hours`,s,{headers:{Authorization:`Bearer ${t}`}})},M3=async(t,s)=>{await W.put(`${uc}/api/admin/settings/loyalty`,s,{headers:{Authorization:`Bearer ${t}`}})},L3=()=>{const[t,s]=Xe(),r=X(I=>I.authentication_state.auth_token),a=X(I=>I.update_business_settings),[n,i]=x.useState(t.get("section")||"business_info"),[l,o]=x.useState({name:"",phone:"",email:"",address:"",logo_url:null}),[c,d]=x.useState({weekly_schedule:{monday:{open:"11:00",close:"20:00",closed:!1},tuesday:{open:"11:00",close:"20:00",closed:!1},wednesday:{open:"11:00",close:"20:00",closed:!1},thursday:{open:"11:00",close:"20:00",closed:!1},friday:{open:"11:00",close:"20:00",closed:!1},saturday:{open:"12:00",close:"22:00",closed:!1},sunday:{open:"12:00",close:"20:00",closed:!1}},special_hours:[]}),[u,m]=x.useState({vat_rate:23,tax_registration_number:null,apply_tax_to_all:!0}),[b,p]=x.useState({order_notifications_enabled:!0,notification_emails:[],catering_notifications_enabled:!0,customer_email_notifications:!0,customer_sms_notifications:!1}),[g,h]=x.useState({earning_rate:1,points_expiry_enabled:!1,points_expiry_months:12,referral_enabled:!0,referrer_reward_points:100,referee_reward_points:50,gamification_enabled:!0}),[N,j]=x.useState({sumup_api_key:null,sumup_merchant_id:null,test_mode_enabled:!0,saved_methods_enabled:!0}),[y,f]=x.useState({email_provider:"sendgrid",smtp_host:null,smtp_port:null,api_key:null,sender_email:"",sender_name:""}),[k,T]=x.useState({business_info:!1,operating_hours:!1,tax:!1,notifications:!1,loyalty:!1,payment:!1,email:!1}),[M,P]=x.useState({sumup:!1,email:!1}),[_,F]=x.useState(null),{data:v,isLoading:O}=le({queryKey:["adminSettings"],queryFn:()=>F3(r),enabled:!!r,staleTime:5*60*1e3});x.useEffect(()=>{if(v){const I={...v.business_info};I.address&&typeof I.address=="object"&&(I.address=`${I.address.line1}${I.address.line2?", "+I.address.line2:""}, ${I.address.city}, ${I.address.postal_code}`),o(I),d(v.operating_hours),m(v.tax_settings),p(v.notification_settings),h(v.loyalty_settings),j(v.payment_settings),f(v.email_settings)}},[v]),x.useEffect(()=>{s({section:n})},[n,s]);const R=ie({mutationFn:I=>T3(r,I),onSuccess:()=>{T(I=>({...I,business_info:!1})),F({type:"success",message:"Business information updated successfully!"}),a({business_info:l})},onError:I=>{var q,A;F({type:"error",message:((A=(q=I.response)==null?void 0:q.data)==null?void 0:A.message)||"Failed to update business information"})}}),C=ie({mutationFn:I=>A3(r,I),onSuccess:()=>{T(I=>({...I,operating_hours:!1})),F({type:"success",message:"Operating hours updated successfully!"}),a({operating_hours:c.weekly_schedule})},onError:I=>{var q,A;F({type:"error",message:((A=(q=I.response)==null?void 0:q.data)==null?void 0:A.message)||"Failed to update operating hours"})}}),z=ie({mutationFn:I=>M3(r,I),onSuccess:()=>{T(I=>({...I,loyalty:!1})),F({type:"success",message:"Loyalty settings updated successfully!"}),a({loyalty_settings:{earning_rate:g.earning_rate,referral_enabled:g.referral_enabled}})},onError:I=>{var q,A;F({type:"error",message:((A=(q=I.response)==null?void 0:q.data)==null?void 0:A.message)||"Failed to update loyalty settings"})}}),D=I=>{switch(I){case"business_info":R.mutate(l);break;case"operating_hours":C.mutate(c);break;case"loyalty":z.mutate(g);break;case"tax":case"notifications":case"payment":case"email":F({type:"error",message:`${I.replace("_"," ").toUpperCase()} settings endpoint not yet implemented in backend`});break}},S=I=>{k[n]?window.confirm("You have unsaved changes. Are you sure you want to leave this section?")&&i(I):i(I)},E=()=>{d(I=>({...I,special_hours:[...I.special_hours,{date:"",status:"closed",custom_hours:null}]})),T(I=>({...I,operating_hours:!0}))},w=I=>{d(q=>({...q,special_hours:q.special_hours.filter((A,L)=>L!==I)})),T(q=>({...q,operating_hours:!0}))};x.useEffect(()=>{if(_){const I=setTimeout(()=>F(null),5e3);return()=>clearTimeout(I)}},[_]);const $=[{id:"business_info",label:"Business Info",icon:py},{id:"operating_hours",label:"Operating Hours",icon:Le},{id:"tax",label:"Tax Settings",icon:z1},{id:"notifications",label:"Notifications",icon:Wr},{id:"loyalty",label:"Loyalty Program",icon:Fn},{id:"payment",label:"Payment Integration",icon:ls},{id:"email",label:"Email Configuration",icon:lt}],B=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return O?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading settings..."})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ic,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your business settings and integrations"})]})]}),k[n]&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600 bg-yellow-50 px-4 py-2 rounded-lg",children:[e.jsx(ce,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Unsaved changes"})]})]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex space-x-1 overflow-x-auto",children:$.map(({id:I,label:q,icon:A})=>e.jsxs("button",{onClick:()=>S(I),className:`flex items-center space-x-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${n===I?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:q}),k[I]&&e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]},I))})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[n==="business_info"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Business Information"}),e.jsx("p",{className:"text-gray-600",children:"Update your business details and contact information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:I=>{o({...l,name:I.target.value}),T(q=>({...q,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Salama Lama Food Truck"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:l.phone,onChange:I=>{o({...l,phone:I.target.value}),T(q=>({...q,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"+353-1-234-5678"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:l.email,onChange:I=>{o({...l,email:I.target.value}),T(q=>({...q,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"hello@salamalama.ie"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:typeof l.address=="string"?l.address:`${l.address.line1}${l.address.line2?", "+l.address.line2:""}, ${l.address.city}, ${l.address.postal_code}`,onChange:I=>{o({...l,address:I.target.value}),T(q=>({...q,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Dublin, Ireland"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),e.jsx("input",{type:"url",value:l.logo_url||"",onChange:I=>{o({...l,logo_url:I.target.value||null}),T(q=>({...q,business_info:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://example.com/logo.png"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter the URL of your business logo image"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>D("business_info"),disabled:R.isPending||!k.business_info,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Business Info"})]})})})]}),n==="operating_hours"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Operating Hours"}),e.jsx("p",{className:"text-gray-600",children:"Set your weekly schedule and special hours"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Schedule"}),e.jsx("div",{className:"space-y-4",children:B.map(I=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-32",children:e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:I})}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.weekly_schedule[I].closed,onChange:q=>{d(A=>({...A,weekly_schedule:{...A.weekly_schedule,[I]:{...A.weekly_schedule[I],closed:q.target.checked}}})),T(A=>({...A,operating_hours:!0}))},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Closed"})]}),!c.weekly_schedule[I].closed&&e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("input",{type:"time",value:c.weekly_schedule[I].open,onChange:q=>{d(A=>({...A,weekly_schedule:{...A.weekly_schedule,[I]:{...A.weekly_schedule[I],open:q.target.value}}})),T(A=>({...A,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"time",value:c.weekly_schedule[I].close,onChange:q=>{d(A=>({...A,weekly_schedule:{...A.weekly_schedule,[I]:{...A.weekly_schedule[I],close:q.target.value}}})),T(A=>({...A,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]},I))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Special Hours / Closures"}),e.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Special Hours"})]})]}),c.special_hours.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Le,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No special hours configured"})]}):e.jsx("div",{className:"space-y-3",children:c.special_hours.map((I,q)=>{var A,L;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"date",value:I.date,onChange:U=>{const Y=[...c.special_hours];Y[q].date=U.target.value,d(Q=>({...Q,special_hours:Y})),T(Q=>({...Q,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("select",{value:I.status,onChange:U=>{const Y=[...c.special_hours];Y[q].status=U.target.value,U.target.value==="closed"&&(Y[q].custom_hours=null),d(Q=>({...Q,special_hours:Y})),T(Q=>({...Q,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"custom",children:"Custom Hours"})]}),I.status==="custom"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"time",value:((A=I.custom_hours)==null?void 0:A.open)||"",onChange:U=>{var Q;const Y=[...c.special_hours];Y[q].custom_hours={open:U.target.value,close:((Q=Y[q].custom_hours)==null?void 0:Q.close)||""},d(K=>({...K,special_hours:Y})),T(K=>({...K,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"time",value:((L=I.custom_hours)==null?void 0:L.close)||"",onChange:U=>{var Q;const Y=[...c.special_hours];Y[q].custom_hours={open:((Q=Y[q].custom_hours)==null?void 0:Q.open)||"",close:U.target.value},d(K=>({...K,special_hours:Y})),T(K=>({...K,operating_hours:!0}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("button",{onClick:()=>w(q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(It,{className:"h-4 w-4"})})]},q)})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>D("operating_hours"),disabled:C.isPending||!k.operating_hours,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:C.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Operating Hours"})]})})})]}),n==="tax"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tax Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure VAT and tax policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VAT Rate (%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:u.vat_rate,onChange:I=>{m({...u,vat_rate:parseFloat(I.target.value)}),T(q=>({...q,tax:!0}))},min:"0",max:"100",step:"0.1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Registration Number"}),e.jsx("input",{type:"text",value:u.tax_registration_number||"",onChange:I=>{m({...u,tax_registration_number:I.target.value||null}),T(q=>({...q,tax:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"IE1234567T"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:u.apply_tax_to_all,onChange:I=>{m({...u,apply_tax_to_all:I.target.checked}),T(q=>({...q,tax:!0}))},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Apply tax to all items"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for tax settings (PUT /api/admin/settings/tax) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>D("tax"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Tax Settings"})]})})]}),n==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure email and SMS notification preferences"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Order Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Receive notifications for new orders"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.order_notifications_enabled,onChange:I=>{p({...b,order_notifications_enabled:I.target.checked}),T(q=>({...q,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Catering Inquiry Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Receive notifications for new catering inquiries"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.catering_notifications_enabled,onChange:I=>{p({...b,catering_notifications_enabled:I.target.checked}),T(q=>({...q,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customer Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send email notifications to customers"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.customer_email_notifications,onChange:I=>{p({...b,customer_email_notifications:I.target.checked}),T(q=>({...q,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Customer SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send SMS notifications to customers"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.customer_sms_notifications,onChange:I=>{p({...b,customer_sms_notifications:I.target.checked}),T(q=>({...q,notifications:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for notification settings (PUT /api/admin/settings/notifications) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>D("notifications"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Notification Settings"})]})})]}),n==="loyalty"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loyalty Program Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure loyalty points, rewards, and referral program"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Points Earning Rate ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"1 ="}),e.jsx("input",{type:"number",value:g.earning_rate,onChange:I=>{h({...g,earning_rate:parseFloat(I.target.value)}),T(q=>({...q,loyalty:!0}))},min:"0",step:"0.1",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-sm text-gray-600",children:"points"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Points Expiry"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable automatic expiry of unused points"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.points_expiry_enabled,onChange:I=>{h({...g,points_expiry_enabled:I.target.checked}),T(q=>({...q,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),g.points_expiry_enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points Expiry Period (months)"}),e.jsx("input",{type:"number",value:g.points_expiry_months,onChange:I=>{h({...g,points_expiry_months:parseInt(I.target.value)}),T(q=>({...q,loyalty:!0}))},min:"1",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Referral Program"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable customer referral rewards"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.referral_enabled,onChange:I=>{h({...g,referral_enabled:I.target.checked}),T(q=>({...q,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),g.referral_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referrer Reward (points)"}),e.jsx("input",{type:"number",value:g.referrer_reward_points,onChange:I=>{h({...g,referrer_reward_points:parseInt(I.target.value)}),T(q=>({...q,loyalty:!0}))},min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referee Reward (points)"}),e.jsx("input",{type:"number",value:g.referee_reward_points,onChange:I=>{h({...g,referee_reward_points:parseInt(I.target.value)}),T(q=>({...q,loyalty:!0}))},min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Gamification Features"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable spin wheel, badges, and achievements"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.gamification_enabled,onChange:I=>{h({...g,gamification_enabled:I.target.checked}),T(q=>({...q,loyalty:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>D("loyalty"),disabled:z.isPending||!k.loyalty,className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Loyalty Settings"})]})})})]}),n==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Integration"}),e.jsx("p",{className:"text-gray-600",children:"Configure SumUp payment processing"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SumUp API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M.sumup?"text":"password",value:N.sumup_api_key||"",onChange:I=>{j({...N,sumup_api_key:I.target.value||null}),T(q=>({...q,payment:!0}))},className:"w-full px-4 py-2 pr-24 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono text-sm",placeholder:"sk_test_..."}),e.jsx("button",{type:"button",onClick:()=>P({...M,sumup:!M.sumup}),className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 text-sm text-orange-600 hover:text-orange-700 font-medium",children:M.sumup?"Hide":"Show"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SumUp Merchant ID"}),e.jsx("input",{type:"text",value:N.sumup_merchant_id||"",onChange:I=>{j({...N,sumup_merchant_id:I.target.value||null}),T(q=>({...q,payment:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"mer_..."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Test Mode"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use test API keys for development"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.test_mode_enabled,onChange:I=>{j({...N,test_mode_enabled:I.target.checked}),T(q=>({...q,payment:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Save Payment Methods"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Allow customers to save cards for future use"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.saved_methods_enabled,onChange:I=>{j({...N,saved_methods_enabled:I.target.checked}),T(q=>({...q,payment:!0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for payment settings (PUT /api/admin/settings/payment) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:()=>D("payment"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Payment Settings"})]})})]}),n==="email"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Configuration"}),e.jsx("p",{className:"text-gray-600",children:"Configure email service provider"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Provider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y.email_provider,onChange:I=>{f({...y,email_provider:I.target.value}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sendgrid",children:"SendGrid"}),e.jsx("option",{value:"mailgun",children:"Mailgun"}),e.jsx("option",{value:"smtp",children:"SMTP"})]})]}),y.email_provider==="smtp"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SMTP Host ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:y.smtp_host||"",onChange:I=>{f({...y,smtp_host:I.target.value||null}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"smtp.example.com"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SMTP Port ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:y.smtp_port||"",onChange:I=>{f({...y,smtp_port:parseInt(I.target.value)||null}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"587"})]})]})}),y.email_provider!=="smtp"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["API Key ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M.email?"text":"password",value:y.api_key||"",onChange:I=>{f({...y,api_key:I.target.value||null}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 pr-24 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono text-sm",placeholder:"SG...."}),e.jsx("button",{type:"button",onClick:()=>P({...M,email:!M.email}),className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 text-sm text-orange-600 hover:text-orange-700 font-medium",children:M.email?"Hide":"Show"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sender Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:y.sender_email,onChange:I=>{f({...y,sender_email:I.target.value}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"hello@salamalama.ie"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sender Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:y.sender_name,onChange:I=>{f({...y,sender_name:I.target.value}),T(q=>({...q,email:!0}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Salama Lama Food Truck"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(ce,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Endpoint Not Implemented"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The backend endpoint for email settings (PUT /api/admin/settings/email) has not been implemented yet."})]})]}),e.jsx("div",{className:"flex justify-end space-x-4 pt-4",children:e.jsxs("button",{onClick:()=>D("email"),className:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Email Settings"})]})})]})]})}),_&&e.jsx("div",{className:"fixed bottom-8 right-8 z-50 animate-slide-up",children:e.jsxs("div",{className:`flex items-center space-x-3 px-6 py-4 rounded-lg shadow-lg ${_.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[_.type==="success"?e.jsx(we,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(ce,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:_.message}),e.jsx("button",{onClick:()=>F(null),className:"ml-4 hover:opacity-70 transition-opacity",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]})})},$3=new TN({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),mc=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading Salama Lama..."})]})}),yt=({children:t})=>{const s=X(n=>n.authentication_state.authentication_status.is_authenticated),r=X(n=>n.authentication_state.authentication_status.is_loading),a=X(n=>{var i;return(i=n.authentication_state.current_user)==null?void 0:i.role});return r?e.jsx(mc,{}):s?a!=="customer"?a==="staff"||a==="manager"?e.jsx(Vt,{to:"/staff/dashboard",replace:!0}):a==="admin"?e.jsx(Vt,{to:"/admin/dashboard",replace:!0}):e.jsx(Vt,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Vt,{to:"/login",replace:!0})},Ua=({children:t})=>{const s=X(n=>n.authentication_state.authentication_status.is_authenticated),r=X(n=>n.authentication_state.authentication_status.is_loading),a=X(n=>{var i;return(i=n.authentication_state.current_user)==null?void 0:i.role});return r?e.jsx(mc,{}):s?a!=="staff"&&a!=="manager"?a==="customer"?e.jsx(Vt,{to:"/dashboard",replace:!0}):a==="admin"?e.jsx(Vt,{to:"/admin/dashboard",replace:!0}):e.jsx(Vt,{to:"/staff/login",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Vt,{to:"/staff/login",replace:!0})},We=({children:t})=>{const s=X(n=>n.authentication_state.authentication_status.is_authenticated),r=X(n=>n.authentication_state.authentication_status.is_loading),a=X(n=>{var i;return(i=n.authentication_state.current_user)==null?void 0:i.role});return r?e.jsx(mc,{}):s?a!=="admin"?a==="customer"?e.jsx(Vt,{to:"/dashboard",replace:!0}):a==="staff"||a==="manager"?e.jsx(Vt,{to:"/staff/dashboard",replace:!0}):e.jsx(Vt,{to:"/admin/login",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Vt,{to:"/admin/login",replace:!0})},R3=({children:t})=>{const s=Vs(),r=X(m=>m.authentication_state.authentication_status.is_authenticated),a=X(m=>{var b;return(b=m.authentication_state.current_user)==null?void 0:b.role}),n=s.pathname.startsWith("/admin"),i=s.pathname.startsWith("/staff"),o=["/","/menu","/catering","/dashboard"].includes(s.pathname),c=n||i,d=!n&&!i&&!r;let u=null;return n&&r&&a==="admin"?u=e_:i&&r&&(a==="staff"||a==="manager")?u=Z1:r&&a==="customer"&&!n&&!i?u=G1:!r&&!n&&!i&&(u=K1),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[u&&e.jsx(u,{}),e.jsxs("div",{className:`flex-1 flex ${n?"bg-gray-50":""}`,children:[n&&r&&a==="admin"&&e.jsx(t_,{}),e.jsx("main",{className:`flex-1 ${n?"ml-0 lg:ml-64":""}`,children:t})]}),!c&&e.jsx(l_,{}),o&&e.jsx(c_,{}),d&&e.jsx(o_,{})]})},O3=()=>e.jsx(R3,{children:e.jsxs(Xv,{children:[e.jsx(ue,{path:"/",element:e.jsx(x_,{})}),e.jsx(ue,{path:"/about",element:e.jsx(H4,{})}),e.jsx(ue,{path:"/contact",element:e.jsx(Q4,{})}),e.jsx(ue,{path:"/faqs",element:e.jsx(K4,{})}),e.jsx(ue,{path:"/terms",element:e.jsx(Y4,{})}),e.jsx(ue,{path:"/privacy",element:e.jsx(J4,{})}),e.jsx(ue,{path:"/menu",element:e.jsx(y_,{})}),e.jsx(ue,{path:"/cart",element:e.jsx(b_,{})}),e.jsx(ue,{path:"/catering",element:e.jsx(A4,{})}),e.jsx(ue,{path:"/catering/inquiry",element:e.jsx(L4,{})}),e.jsx(ue,{path:"/login",element:e.jsx(D_,{})}),e.jsx(ue,{path:"/signup",element:e.jsx(O_,{})}),e.jsx(ue,{path:"/forgot-password",element:e.jsx(q_,{})}),e.jsx(ue,{path:"/reset-password/:token",element:e.jsx(B_,{})}),e.jsx(ue,{path:"/verify-email/:token",element:e.jsx(U_,{})}),e.jsx(ue,{path:"/dashboard",element:e.jsx(yt,{children:e.jsx(Q_,{})})}),e.jsx(ue,{path:"/profile",element:e.jsx(yt,{children:e.jsx(Z_,{})})}),e.jsx(ue,{path:"/addresses",element:e.jsx(yt,{children:e.jsx(n4,{})})}),e.jsx(ue,{path:"/payment-methods",element:e.jsx(yt,{children:e.jsx(x4,{})})}),e.jsx(ue,{path:"/orders",element:e.jsx(yt,{children:e.jsx(f4,{})})}),e.jsx(ue,{path:"/orders/:order_id",element:e.jsx(yt,{children:e.jsx(N4,{})})}),e.jsx(ue,{path:"/orders/:order_id/track",element:e.jsx(yt,{children:e.jsx(R_,{})})}),e.jsx(ue,{path:"/order/confirmation",element:e.jsx(yt,{children:e.jsx(M_,{})})}),e.jsx(ue,{path:"/checkout/order-type",element:e.jsx(yt,{children:e.jsx(j_,{})})}),e.jsx(ue,{path:"/checkout/contact",element:e.jsx(yt,{children:e.jsx(w_,{})})}),e.jsx(ue,{path:"/checkout/payment",element:e.jsx(yt,{children:e.jsx(C_,{})})}),e.jsx(ue,{path:"/checkout/review",element:e.jsx(yt,{children:e.jsx(E_,{})})}),e.jsx(ue,{path:"/rewards",element:e.jsx(yt,{children:e.jsx(F4,{})})}),e.jsx(ue,{path:"/catering/inquiries",element:e.jsx(yt,{children:e.jsx(R4,{})})}),e.jsx(ue,{path:"/catering/inquiries/:inquiry_id",element:e.jsx(yt,{children:e.jsx(V4,{})})}),e.jsx(ue,{path:"/staff/login",element:e.jsx(Z4,{})}),e.jsx(ue,{path:"/staff/dashboard",element:e.jsx(Ua,{children:e.jsx(i6,{})})}),e.jsx(ue,{path:"/staff/orders",element:e.jsx(Ua,{children:e.jsx(g6,{})})}),e.jsx(ue,{path:"/staff/orders/:order_id",element:e.jsx(Ua,{children:e.jsx(b6,{})})}),e.jsx(ue,{path:"/staff/stock",element:e.jsx(Ua,{children:e.jsx(N6,{})})}),e.jsx(ue,{path:"/staff/reports",element:e.jsx(Ua,{children:e.jsx(w6,{})})}),e.jsx(ue,{path:"/staff/profile",element:e.jsx(Ua,{children:e.jsx(S6,{})})}),e.jsx(ue,{path:"/admin/login",element:e.jsx(P6,{})}),e.jsx(ue,{path:"/admin/dashboard",element:e.jsx(We,{children:e.jsx($6,{})})}),e.jsx(ue,{path:"/admin/menu",element:e.jsx(We,{children:e.jsx(B6,{})})}),e.jsx(ue,{path:"/admin/menu/item",element:e.jsx(We,{children:e.jsx(K6,{})})}),e.jsx(ue,{path:"/admin/menu/categories",element:e.jsx(We,{children:e.jsx(J6,{})})}),e.jsx(ue,{path:"/admin/stock",element:e.jsx(We,{children:e.jsx(s5,{})})}),e.jsx(ue,{path:"/admin/stock/:item_id/history",element:e.jsx(We,{children:e.jsx(r5,{})})}),e.jsx(ue,{path:"/admin/orders",element:e.jsx(We,{children:e.jsx(pk,{})})}),e.jsx(ue,{path:"/admin/orders/:order_id",element:e.jsx(We,{children:e.jsx(Nk,{})})}),e.jsx(ue,{path:"/admin/delivery",element:e.jsx(We,{children:e.jsx(Fk,{})})}),e.jsx(ue,{path:"/admin/discounts",element:e.jsx(We,{children:e.jsx(Lk,{})})}),e.jsx(ue,{path:"/admin/discounts/code",element:e.jsx(We,{children:e.jsx(Ik,{})})}),e.jsx(ue,{path:"/admin/discounts/:code_id/usage",element:e.jsx(We,{children:e.jsx(Uk,{})})}),e.jsx(ue,{path:"/admin/customers",element:e.jsx(We,{children:e.jsx(Vk,{})})}),e.jsx(ue,{path:"/admin/customers/:customer_id",element:e.jsx(We,{children:e.jsx(Wk,{})})}),e.jsx(ue,{path:"/admin/staff",element:e.jsx(We,{children:e.jsx(Hk,{})})}),e.jsx(ue,{path:"/admin/staff/member",element:e.jsx(We,{children:e.jsx(Gk,{})})}),e.jsx(ue,{path:"/admin/catering",element:e.jsx(We,{children:e.jsx(x3,{})})}),e.jsx(ue,{path:"/admin/catering/:inquiry_id",element:e.jsx(We,{children:e.jsx(b3,{})})}),e.jsx(ue,{path:"/admin/invoices",element:e.jsx(We,{children:e.jsx(j3,{})})}),e.jsx(ue,{path:"/admin/invoices/:invoice_id",element:e.jsx(We,{children:e.jsx(_3,{})})}),e.jsx(ue,{path:"/admin/analytics",element:e.jsx(We,{children:e.jsx(E3,{})})}),e.jsx(ue,{path:"/admin/settings",element:e.jsx(We,{children:e.jsx(L3,{})})}),e.jsx(ue,{path:"*",element:e.jsx(Vt,{to:"/",replace:!0})})]})}),D3=()=>{const t=X(a=>a.authentication_state.authentication_status.is_loading),s=X(a=>a.initialize_auth),r=X(a=>a.fetch_business_settings);return x.useEffect(()=>{s(),r()},[s,r]),t?e.jsx(mc,{}):e.jsx(AN,{client:$3,children:e.jsx(nN,{children:e.jsx(O3,{})})})},I3=()=>e.jsx(e.Fragment,{children:e.jsx(D3,{})});cf(document.getElementById("root")).render(e.jsx(I3,{}));
